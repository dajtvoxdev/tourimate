var nSe=Object.defineProperty;var FG=n=>{throw TypeError(n)};var rSe=(n,e,t)=>e in n?nSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var j=(n,e,t)=>rSe(n,typeof e!="symbol"?e+"":e,t),v4=(n,e,t)=>e.has(n)||FG("Cannot "+t);var v=(n,e,t)=>(v4(n,e,"read from private field"),t?t.call(n):e.get(n)),G=(n,e,t)=>e.has(n)?FG("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),L=(n,e,t,r)=>(v4(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),J=(n,e,t)=>(v4(n,e,"access private method"),t);var pi=(n,e,t,r)=>({set _(i){L(n,e,i,t)},get _(){return v(n,e,r)}});function iSe(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var nj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var y4={exports:{}},ik={},x4={exports:{}},Sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BG;function sSe(){if(BG)return Sn;BG=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function f(ne){return ne===null||typeof ne!="object"?null:(ne=h&&ne[h]||ne["@@iterator"],typeof ne=="function"?ne:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function b(ne,te,H){this.props=ne,this.context=te,this.refs=y,this.updater=H||p}b.prototype.isReactComponent={},b.prototype.setState=function(ne,te){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,te,"setState")},b.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function _(){}_.prototype=b.prototype;function C(ne,te,H){this.props=ne,this.context=te,this.refs=y,this.updater=H||p}var k=C.prototype=new _;k.constructor=C,x(k,b.prototype),k.isPureReactComponent=!0;var T=Array.isArray,E=Object.prototype.hasOwnProperty,N={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function M(ne,te,H){var ce,pe={},oe=null,ve=null;if(te!=null)for(ce in te.ref!==void 0&&(ve=te.ref),te.key!==void 0&&(oe=""+te.key),te)E.call(te,ce)&&!P.hasOwnProperty(ce)&&(pe[ce]=te[ce]);var be=arguments.length-2;if(be===1)pe.children=H;else if(1<be){for(var fe=Array(be),we=0;we<be;we++)fe[we]=arguments[we+2];pe.children=fe}if(ne&&ne.defaultProps)for(ce in be=ne.defaultProps,be)pe[ce]===void 0&&(pe[ce]=be[ce]);return{$$typeof:n,type:ne,key:oe,ref:ve,props:pe,_owner:N.current}}function O(ne,te){return{$$typeof:n,type:ne.type,key:te,ref:ne.ref,props:ne.props,_owner:ne._owner}}function q(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===n}function D(ne){var te={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(H){return te[H]})}var F=/\/+/g;function K(ne,te){return typeof ne=="object"&&ne!==null&&ne.key!=null?D(""+ne.key):te.toString(36)}function ee(ne,te,H,ce,pe){var oe=typeof ne;(oe==="undefined"||oe==="boolean")&&(ne=null);var ve=!1;if(ne===null)ve=!0;else switch(oe){case"string":case"number":ve=!0;break;case"object":switch(ne.$$typeof){case n:case e:ve=!0}}if(ve)return ve=ne,pe=pe(ve),ne=ce===""?"."+K(ve,0):ce,T(pe)?(H="",ne!=null&&(H=ne.replace(F,"$&/")+"/"),ee(pe,te,H,"",function(we){return we})):pe!=null&&(q(pe)&&(pe=O(pe,H+(!pe.key||ve&&ve.key===pe.key?"":(""+pe.key).replace(F,"$&/")+"/")+ne)),te.push(pe)),1;if(ve=0,ce=ce===""?".":ce+":",T(ne))for(var be=0;be<ne.length;be++){oe=ne[be];var fe=ce+K(oe,be);ve+=ee(oe,te,H,fe,pe)}else if(fe=f(ne),typeof fe=="function")for(ne=fe.call(ne),be=0;!(oe=ne.next()).done;)oe=oe.value,fe=ce+K(oe,be++),ve+=ee(oe,te,H,fe,pe);else if(oe==="object")throw te=String(ne),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return ve}function Y(ne,te,H){if(ne==null)return ne;var ce=[],pe=0;return ee(ne,ce,"","",function(oe){return te.call(H,oe,pe++)}),ce}function U(ne){if(ne._status===-1){var te=ne._result;te=te(),te.then(function(H){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=H)},function(H){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=H)}),ne._status===-1&&(ne._status=0,ne._result=te)}if(ne._status===1)return ne._result.default;throw ne._result}var R={current:null},z={transition:null},W={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:z,ReactCurrentOwner:N};function se(){throw Error("act(...) is not supported in production builds of React.")}return Sn.Children={map:Y,forEach:function(ne,te,H){Y(ne,function(){te.apply(this,arguments)},H)},count:function(ne){var te=0;return Y(ne,function(){te++}),te},toArray:function(ne){return Y(ne,function(te){return te})||[]},only:function(ne){if(!q(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},Sn.Component=b,Sn.Fragment=t,Sn.Profiler=i,Sn.PureComponent=C,Sn.StrictMode=r,Sn.Suspense=c,Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Sn.act=se,Sn.cloneElement=function(ne,te,H){if(ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ne+".");var ce=x({},ne.props),pe=ne.key,oe=ne.ref,ve=ne._owner;if(te!=null){if(te.ref!==void 0&&(oe=te.ref,ve=N.current),te.key!==void 0&&(pe=""+te.key),ne.type&&ne.type.defaultProps)var be=ne.type.defaultProps;for(fe in te)E.call(te,fe)&&!P.hasOwnProperty(fe)&&(ce[fe]=te[fe]===void 0&&be!==void 0?be[fe]:te[fe])}var fe=arguments.length-2;if(fe===1)ce.children=H;else if(1<fe){be=Array(fe);for(var we=0;we<fe;we++)be[we]=arguments[we+2];ce.children=be}return{$$typeof:n,type:ne.type,key:pe,ref:oe,props:ce,_owner:ve}},Sn.createContext=function(ne){return ne={$$typeof:o,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ne.Provider={$$typeof:s,_context:ne},ne.Consumer=ne},Sn.createElement=M,Sn.createFactory=function(ne){var te=M.bind(null,ne);return te.type=ne,te},Sn.createRef=function(){return{current:null}},Sn.forwardRef=function(ne){return{$$typeof:a,render:ne}},Sn.isValidElement=q,Sn.lazy=function(ne){return{$$typeof:d,_payload:{_status:-1,_result:ne},_init:U}},Sn.memo=function(ne,te){return{$$typeof:u,type:ne,compare:te===void 0?null:te}},Sn.startTransition=function(ne){var te=z.transition;z.transition={};try{ne()}finally{z.transition=te}},Sn.unstable_act=se,Sn.useCallback=function(ne,te){return R.current.useCallback(ne,te)},Sn.useContext=function(ne){return R.current.useContext(ne)},Sn.useDebugValue=function(){},Sn.useDeferredValue=function(ne){return R.current.useDeferredValue(ne)},Sn.useEffect=function(ne,te){return R.current.useEffect(ne,te)},Sn.useId=function(){return R.current.useId()},Sn.useImperativeHandle=function(ne,te,H){return R.current.useImperativeHandle(ne,te,H)},Sn.useInsertionEffect=function(ne,te){return R.current.useInsertionEffect(ne,te)},Sn.useLayoutEffect=function(ne,te){return R.current.useLayoutEffect(ne,te)},Sn.useMemo=function(ne,te){return R.current.useMemo(ne,te)},Sn.useReducer=function(ne,te,H){return R.current.useReducer(ne,te,H)},Sn.useRef=function(ne){return R.current.useRef(ne)},Sn.useState=function(ne){return R.current.useState(ne)},Sn.useSyncExternalStore=function(ne,te,H){return R.current.useSyncExternalStore(ne,te,H)},Sn.useTransition=function(){return R.current.useTransition()},Sn.version="18.3.1",Sn}var $G;function eS(){return $G||($G=1,x4.exports=sSe()),x4.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VG;function oSe(){if(VG)return ik;VG=1;var n=eS(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var d,h={},f=null,p=null;u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)r.call(c,d)&&!s.hasOwnProperty(d)&&(h[d]=c[d]);if(a&&a.defaultProps)for(d in c=a.defaultProps,c)h[d]===void 0&&(h[d]=c[d]);return{$$typeof:e,type:a,key:f,ref:p,props:h,_owner:i.current}}return ik.Fragment=t,ik.jsx=o,ik.jsxs=o,ik}var UG;function aSe(){return UG||(UG=1,y4.exports=oSe()),y4.exports}var l=aSe(),S=eS();const re=qn(S),T9=iSe({__proto__:null,default:re},[S]);var eA=n=>n.type==="checkbox",ay=n=>n instanceof Date,Ca=n=>n==null;const vae=n=>typeof n=="object";var Vi=n=>!Ca(n)&&!Array.isArray(n)&&vae(n)&&!ay(n),lSe=n=>Vi(n)&&n.target?eA(n.target)?n.target.checked:n.target.value:n,cSe=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,uSe=(n,e)=>n.has(cSe(e)),dSe=n=>{const e=n.constructor&&n.constructor.prototype;return Vi(e)&&e.hasOwnProperty("isPrototypeOf")},A9=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ms(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(A9&&(n instanceof Blob||r))&&(t||Vi(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!dSe(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=ms(n[i]));else return n;return e}var VR=n=>/^\w*$/.test(n),Pi=n=>n===void 0,N9=n=>Array.isArray(n)?n.filter(Boolean):[],j9=n=>N9(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Lt=(n,e,t)=>{if(!e||!Vi(n))return t;const r=(VR(e)?[e]:j9(e)).reduce((i,s)=>Ca(i)?i:i[s],n);return Pi(r)||r===n?Pi(n[e])?t:n[e]:r},xd=n=>typeof n=="boolean",qr=(n,e,t)=>{let r=-1;const i=VR(e)?[e]:j9(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let c=t;if(r!==o){const u=n[a];c=Vi(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=c,n=n[a]}};const zG={BLUR:"blur",FOCUS_OUT:"focusout"},vu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Vh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hSe=re.createContext(null);hSe.displayName="HookFormContext";var fSe=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in n)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==vu.all&&(e._proxyFormState[o]=!r||vu.all),n[o]}});return i};const mSe=typeof window<"u"?re.useLayoutEffect:re.useEffect;var Tl=n=>typeof n=="string",pSe=(n,e,t,r,i)=>Tl(n)?(r&&e.watch.add(n),Lt(t,n,i)):Array.isArray(n)?n.map(s=>(r&&e.watch.add(s),Lt(t,s))):(r&&(e.watchAll=!0),t),tB=n=>Ca(n)||!vae(n);function hp(n,e,t=new WeakSet){if(tB(n)||tB(e))return n===e;if(ay(n)&&ay(e))return n.getTime()===e.getTime();const r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const s of r){const o=n[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(ay(o)&&ay(a)||Vi(o)&&Vi(a)||Array.isArray(o)&&Array.isArray(a)?!hp(o,a,t):o!==a)return!1}}return!0}var gSe=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},gC=n=>Array.isArray(n)?n:[n],HG=()=>{let n=[];return{get observers(){return n},next:i=>{for(const s of n)s.next&&s.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(s=>s!==i)}}),unsubscribe:()=>{n=[]}}};function yae(n,e){const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r],s=e[r];if(i&&Vi(i)&&s){const o=yae(i,s);Vi(o)&&(t[r]=o)}else n[r]&&(t[r]=s)}return t}var _a=n=>Vi(n)&&!Object.keys(n).length,P9=n=>n.type==="file",yu=n=>typeof n=="function",oI=n=>{if(!A9)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},xae=n=>n.type==="select-multiple",I9=n=>n.type==="radio",vSe=n=>I9(n)||eA(n),b4=n=>oI(n)&&n.isConnected;function ySe(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Pi(n)?r++:n[e[r++]];return n}function xSe(n){for(const e in n)if(n.hasOwnProperty(e)&&!Pi(n[e]))return!1;return!0}function Li(n,e){const t=Array.isArray(e)?e:VR(e)?[e]:j9(e),r=t.length===1?n:ySe(n,t),i=t.length-1,s=t[i];return r&&delete r[s],i!==0&&(Vi(r)&&_a(r)||Array.isArray(r)&&xSe(r))&&Li(n,t.slice(0,-1)),n}var bSe=n=>{for(const e in n)if(yu(n[e]))return!0;return!1};function bae(n){return Array.isArray(n)||Vi(n)&&!bSe(n)}function nB(n,e={}){for(const t in n)bae(n[t])?(e[t]=Array.isArray(n[t])?[]:{},nB(n[t],e[t])):Pi(n[t])||(e[t]=!0);return e}function kb(n,e,t){t||(t=nB(e));for(const r in n)bae(n[r])?Pi(e)||tB(t[r])?t[r]=nB(n[r],Array.isArray(n[r])?[]:{}):kb(n[r],Ca(e)?{}:e[r],t[r]):t[r]=!hp(n[r],e[r]);return t}const WG={value:!1,isValid:!1},qG={value:!0,isValid:!0};var wae=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Pi(n[0].attributes.value)?Pi(n[0].value)||n[0].value===""?qG:{value:n[0].value,isValid:!0}:qG:WG}return WG},_ae=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Pi(n)?n:e?n===""?NaN:n&&+n:t&&Tl(n)?new Date(n):r?r(n):n;const GG={isValid:!1,value:null};var Sae=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,GG):GG;function KG(n){const e=n.ref;return P9(e)?e.files:I9(e)?Sae(n.refs).value:xae(e)?[...e.selectedOptions].map(({value:t})=>t):eA(e)?wae(n.refs).value:_ae(Pi(e.value)?n.ref.value:e.value,n)}var wSe=(n,e,t,r)=>{const i={};for(const s of n){const o=Lt(e,s);o&&qr(i,s,o._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},aI=n=>n instanceof RegExp,sk=n=>Pi(n)?n:aI(n)?n.source:Vi(n)?aI(n.value)?n.value.source:n.value:n,YG=n=>({isOnSubmit:!n||n===vu.onSubmit,isOnBlur:n===vu.onBlur,isOnChange:n===vu.onChange,isOnAll:n===vu.all,isOnTouch:n===vu.onTouched});const XG="AsyncFunction";var _Se=n=>!!n&&!!n.validate&&!!(yu(n.validate)&&n.validate.constructor.name===XG||Vi(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===XG)),SSe=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),JG=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const vC=(n,e,t,r)=>{for(const i of t||Object.keys(n)){const s=Lt(n,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(vC(a,e))break}else if(Vi(a)&&vC(a,e))break}}};function QG(n,e,t){const r=Lt(n,t);if(r||VR(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const s=i.join("."),o=Lt(e,s),a=Lt(n,s);if(o&&!Array.isArray(o)&&t!==s)return{name:t};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:t}}var kSe=(n,e,t,r)=>{t(n);const{name:i,...s}=n;return _a(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||vu.all))},CSe=(n,e,t)=>!n||!e||n===e||gC(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),ESe=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,TSe=(n,e)=>!N9(Lt(n,e)).length&&Li(n,e),ASe=(n,e,t)=>{const r=gC(Lt(n,t));return qr(r,"root",e[t]),qr(n,t,r),n};function ZG(n,e,t="validate"){if(Tl(n)||Array.isArray(n)&&n.every(Tl)||xd(n)&&!n)return{type:t,message:Tl(n)?n:"",ref:e}}var sb=n=>Vi(n)&&!aI(n)?n:{value:n,message:""},eK=async(n,e,t,r,i,s)=>{const{ref:o,refs:a,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:p,validate:x,name:y,valueAsNumber:b,mount:_}=n._f,C=Lt(t,y);if(!_||e.has(y))return{};const k=a?a[0]:o,T=F=>{i&&k.reportValidity&&(k.setCustomValidity(xd(F)?"":F||""),k.reportValidity())},E={},N=I9(o),P=eA(o),M=N||P,O=(b||P9(o))&&Pi(o.value)&&Pi(C)||oI(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,q=gSe.bind(null,y,r,E),D=(F,K,ee,Y=Vh.maxLength,U=Vh.minLength)=>{const R=F?K:ee;E[y]={type:F?Y:U,message:R,ref:o,...q(F?Y:U,R)}};if(s?!Array.isArray(C)||!C.length:c&&(!M&&(O||Ca(C))||xd(C)&&!C||P&&!wae(a).isValid||N&&!Sae(a).isValid)){const{value:F,message:K}=Tl(c)?{value:!!c,message:c}:sb(c);if(F&&(E[y]={type:Vh.required,message:K,ref:k,...q(Vh.required,K)},!r))return T(K),E}if(!O&&(!Ca(h)||!Ca(f))){let F,K;const ee=sb(f),Y=sb(h);if(!Ca(C)&&!isNaN(C)){const U=o.valueAsNumber||C&&+C;Ca(ee.value)||(F=U>ee.value),Ca(Y.value)||(K=U<Y.value)}else{const U=o.valueAsDate||new Date(C),R=se=>new Date(new Date().toDateString()+" "+se),z=o.type=="time",W=o.type=="week";Tl(ee.value)&&C&&(F=z?R(C)>R(ee.value):W?C>ee.value:U>new Date(ee.value)),Tl(Y.value)&&C&&(K=z?R(C)<R(Y.value):W?C<Y.value:U<new Date(Y.value))}if((F||K)&&(D(!!F,ee.message,Y.message,Vh.max,Vh.min),!r))return T(E[y].message),E}if((u||d)&&!O&&(Tl(C)||s&&Array.isArray(C))){const F=sb(u),K=sb(d),ee=!Ca(F.value)&&C.length>+F.value,Y=!Ca(K.value)&&C.length<+K.value;if((ee||Y)&&(D(ee,F.message,K.message),!r))return T(E[y].message),E}if(p&&!O&&Tl(C)){const{value:F,message:K}=sb(p);if(aI(F)&&!C.match(F)&&(E[y]={type:Vh.pattern,message:K,ref:o,...q(Vh.pattern,K)},!r))return T(K),E}if(x){if(yu(x)){const F=await x(C,t),K=ZG(F,k);if(K&&(E[y]={...K,...q(Vh.validate,K.message)},!r))return T(K.message),E}else if(Vi(x)){let F={};for(const K in x){if(!_a(F)&&!r)break;const ee=ZG(await x[K](C,t),k,K);ee&&(F={...ee,...q(K,ee.message)},T(ee.message),r&&(E[y]=F))}if(!_a(F)&&(E[y]={ref:k,...F},!r))return E}}return T(!0),E};const NSe={mode:vu.onSubmit,reValidateMode:vu.onChange,shouldFocusError:!0};function jSe(n={}){let e={...NSe,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:yu(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Vi(e.defaultValues)||Vi(e.values)?ms(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:ms(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:HG(),state:HG()},p=e.criteriaMode===vu.all,x=xe=>Ne=>{clearTimeout(u),u=setTimeout(xe,Ne)},y=async xe=>{if(!e.disabled&&(d.isValid||h.isValid||xe)){const Ne=e.resolver?_a((await P()).errors):await O(r,!0);Ne!==t.isValid&&f.state.next({isValid:Ne})}},b=(xe,Ne)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((xe||Array.from(a.mount)).forEach(Oe=>{Oe&&(Ne?qr(t.validatingFields,Oe,Ne):Li(t.validatingFields,Oe))}),f.state.next({validatingFields:t.validatingFields,isValidating:!_a(t.validatingFields)}))},_=(xe,Ne=[],Oe,qe,Ze=!0,Ye=!0)=>{if(qe&&Oe&&!e.disabled){if(o.action=!0,Ye&&Array.isArray(Lt(r,xe))){const ht=Oe(Lt(r,xe),qe.argA,qe.argB);Ze&&qr(r,xe,ht)}if(Ye&&Array.isArray(Lt(t.errors,xe))){const ht=Oe(Lt(t.errors,xe),qe.argA,qe.argB);Ze&&qr(t.errors,xe,ht),TSe(t.errors,xe)}if((d.touchedFields||h.touchedFields)&&Ye&&Array.isArray(Lt(t.touchedFields,xe))){const ht=Oe(Lt(t.touchedFields,xe),qe.argA,qe.argB);Ze&&qr(t.touchedFields,xe,ht)}(d.dirtyFields||h.dirtyFields)&&(t.dirtyFields=kb(i,s)),f.state.next({name:xe,isDirty:D(xe,Ne),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else qr(s,xe,Ne)},C=(xe,Ne)=>{qr(t.errors,xe,Ne),f.state.next({errors:t.errors})},k=xe=>{t.errors=xe,f.state.next({errors:t.errors,isValid:!1})},T=(xe,Ne,Oe,qe)=>{const Ze=Lt(r,xe);if(Ze){const Ye=Lt(s,xe,Pi(Oe)?Lt(i,xe):Oe);Pi(Ye)||qe&&qe.defaultChecked||Ne?qr(s,xe,Ne?Ye:KG(Ze._f)):ee(xe,Ye),o.mount&&y()}},E=(xe,Ne,Oe,qe,Ze)=>{let Ye=!1,ht=!1;const Bt={name:xe};if(!e.disabled){if(!Oe||qe){(d.isDirty||h.isDirty)&&(ht=t.isDirty,t.isDirty=Bt.isDirty=D(),Ye=ht!==Bt.isDirty);const Jt=hp(Lt(i,xe),Ne);ht=!!Lt(t.dirtyFields,xe),Jt?Li(t.dirtyFields,xe):qr(t.dirtyFields,xe,!0),Bt.dirtyFields=t.dirtyFields,Ye=Ye||(d.dirtyFields||h.dirtyFields)&&ht!==!Jt}if(Oe){const Jt=Lt(t.touchedFields,xe);Jt||(qr(t.touchedFields,xe,Oe),Bt.touchedFields=t.touchedFields,Ye=Ye||(d.touchedFields||h.touchedFields)&&Jt!==Oe)}Ye&&Ze&&f.state.next(Bt)}return Ye?Bt:{}},N=(xe,Ne,Oe,qe)=>{const Ze=Lt(t.errors,xe),Ye=(d.isValid||h.isValid)&&xd(Ne)&&t.isValid!==Ne;if(e.delayError&&Oe?(c=x(()=>C(xe,Oe)),c(e.delayError)):(clearTimeout(u),c=null,Oe?qr(t.errors,xe,Oe):Li(t.errors,xe)),(Oe?!hp(Ze,Oe):Ze)||!_a(qe)||Ye){const ht={...qe,...Ye&&xd(Ne)?{isValid:Ne}:{},errors:t.errors,name:xe};t={...t,...ht},f.state.next(ht)}},P=async xe=>{b(xe,!0);const Ne=await e.resolver(s,e.context,wSe(xe||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(xe),Ne},M=async xe=>{const{errors:Ne}=await P(xe);if(xe)for(const Oe of xe){const qe=Lt(Ne,Oe);qe?qr(t.errors,Oe,qe):Li(t.errors,Oe)}else t.errors=Ne;return Ne},O=async(xe,Ne,Oe={valid:!0})=>{for(const qe in xe){const Ze=xe[qe];if(Ze){const{_f:Ye,...ht}=Ze;if(Ye){const Bt=a.array.has(Ye.name),Jt=Ze._f&&_Se(Ze._f);Jt&&d.validatingFields&&b([Ye.name],!0);const Pn=await eK(Ze,a.disabled,s,p,e.shouldUseNativeValidation&&!Ne,Bt);if(Jt&&d.validatingFields&&b([Ye.name]),Pn[Ye.name]&&(Oe.valid=!1,Ne))break;!Ne&&(Lt(Pn,Ye.name)?Bt?ASe(t.errors,Pn,Ye.name):qr(t.errors,Ye.name,Pn[Ye.name]):Li(t.errors,Ye.name))}!_a(ht)&&await O(ht,Ne,Oe)}}return Oe.valid},q=()=>{for(const xe of a.unMount){const Ne=Lt(r,xe);Ne&&(Ne._f.refs?Ne._f.refs.every(Oe=>!b4(Oe)):!b4(Ne._f.ref))&&ve(xe)}a.unMount=new Set},D=(xe,Ne)=>!e.disabled&&(xe&&Ne&&qr(s,xe,Ne),!hp(se(),i)),F=(xe,Ne,Oe)=>pSe(xe,a,{...o.mount?s:Pi(Ne)?i:Tl(xe)?{[xe]:Ne}:Ne},Oe,Ne),K=xe=>N9(Lt(o.mount?s:i,xe,e.shouldUnregister?Lt(i,xe,[]):[])),ee=(xe,Ne,Oe={})=>{const qe=Lt(r,xe);let Ze=Ne;if(qe){const Ye=qe._f;Ye&&(!Ye.disabled&&qr(s,xe,_ae(Ne,Ye)),Ze=oI(Ye.ref)&&Ca(Ne)?"":Ne,xae(Ye.ref)?[...Ye.ref.options].forEach(ht=>ht.selected=Ze.includes(ht.value)):Ye.refs?eA(Ye.ref)?Ye.refs.forEach(ht=>{(!ht.defaultChecked||!ht.disabled)&&(Array.isArray(Ze)?ht.checked=!!Ze.find(Bt=>Bt===ht.value):ht.checked=Ze===ht.value||!!Ze)}):Ye.refs.forEach(ht=>ht.checked=ht.value===Ze):P9(Ye.ref)?Ye.ref.value="":(Ye.ref.value=Ze,Ye.ref.type||f.state.next({name:xe,values:ms(s)})))}(Oe.shouldDirty||Oe.shouldTouch)&&E(xe,Ze,Oe.shouldTouch,Oe.shouldDirty,!0),Oe.shouldValidate&&W(xe)},Y=(xe,Ne,Oe)=>{for(const qe in Ne){if(!Ne.hasOwnProperty(qe))return;const Ze=Ne[qe],Ye=xe+"."+qe,ht=Lt(r,Ye);(a.array.has(xe)||Vi(Ze)||ht&&!ht._f)&&!ay(Ze)?Y(Ye,Ze,Oe):ee(Ye,Ze,Oe)}},U=(xe,Ne,Oe={})=>{const qe=Lt(r,xe),Ze=a.array.has(xe),Ye=ms(Ne);qr(s,xe,Ye),Ze?(f.array.next({name:xe,values:ms(s)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&Oe.shouldDirty&&f.state.next({name:xe,dirtyFields:kb(i,s),isDirty:D(xe,Ye)})):qe&&!qe._f&&!Ca(Ye)?Y(xe,Ye,Oe):ee(xe,Ye,Oe),JG(xe,a)&&f.state.next({...t,name:xe}),f.state.next({name:o.mount?xe:void 0,values:ms(s)})},R=async xe=>{o.mount=!0;const Ne=xe.target;let Oe=Ne.name,qe=!0;const Ze=Lt(r,Oe),Ye=Jt=>{qe=Number.isNaN(Jt)||ay(Jt)&&isNaN(Jt.getTime())||hp(Jt,Lt(s,Oe,Jt))},ht=YG(e.mode),Bt=YG(e.reValidateMode);if(Ze){let Jt,Pn;const Hn=Ne.type?KG(Ze._f):lSe(xe),zr=xe.type===zG.BLUR||xe.type===zG.FOCUS_OUT,Js=!SSe(Ze._f)&&!e.resolver&&!Lt(t.errors,Oe)&&!Ze._f.deps||ESe(zr,Lt(t.touchedFields,Oe),t.isSubmitted,Bt,ht),ui=JG(Oe,a,zr);qr(s,Oe,Hn),zr?(!Ne||!Ne.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(xe),c&&c(0)):Ze._f.onChange&&Ze._f.onChange(xe);const qi=E(Oe,Hn,zr),ql=!_a(qi)||ui;if(!zr&&f.state.next({name:Oe,type:xe.type,values:ms(s)}),Js)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?zr&&y():zr||y()),ql&&f.state.next({name:Oe,...ui?{}:qi});if(!zr&&ui&&f.state.next({...t}),e.resolver){const{errors:Gi}=await P([Oe]);if(Ye(Hn),qe){const Wa=QG(t.errors,r,Oe),Qo=QG(Gi,r,Wa.name||Oe);Jt=Qo.error,Oe=Qo.name,Pn=_a(Gi)}}else b([Oe],!0),Jt=(await eK(Ze,a.disabled,s,p,e.shouldUseNativeValidation))[Oe],b([Oe]),Ye(Hn),qe&&(Jt?Pn=!1:(d.isValid||h.isValid)&&(Pn=await O(r,!0)));qe&&(Ze._f.deps&&(!Array.isArray(Ze._f.deps)||Ze._f.deps.length>0)&&W(Ze._f.deps),N(Oe,Pn,Jt,qi))}},z=(xe,Ne)=>{if(Lt(t.errors,Ne)&&xe.focus)return xe.focus(),1},W=async(xe,Ne={})=>{let Oe,qe;const Ze=gC(xe);if(e.resolver){const Ye=await M(Pi(xe)?xe:Ze);Oe=_a(Ye),qe=xe?!Ze.some(ht=>Lt(Ye,ht)):Oe}else xe?(qe=(await Promise.all(Ze.map(async Ye=>{const ht=Lt(r,Ye);return await O(ht&&ht._f?{[Ye]:ht}:ht)}))).every(Boolean),!(!qe&&!t.isValid)&&y()):qe=Oe=await O(r);return f.state.next({...!Tl(xe)||(d.isValid||h.isValid)&&Oe!==t.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:Oe}:{},errors:t.errors}),Ne.shouldFocus&&!qe&&vC(r,z,xe?Ze:a.mount),qe},se=(xe,Ne)=>{let Oe={...o.mount?s:i};return Ne&&(Oe=yae(Ne.dirtyFields?t.dirtyFields:t.touchedFields,Oe)),Pi(xe)?Oe:Tl(xe)?Lt(Oe,xe):xe.map(qe=>Lt(Oe,qe))},ne=(xe,Ne)=>({invalid:!!Lt((Ne||t).errors,xe),isDirty:!!Lt((Ne||t).dirtyFields,xe),error:Lt((Ne||t).errors,xe),isValidating:!!Lt(t.validatingFields,xe),isTouched:!!Lt((Ne||t).touchedFields,xe)}),te=xe=>{xe&&gC(xe).forEach(Ne=>Li(t.errors,Ne)),f.state.next({errors:xe?t.errors:{}})},H=(xe,Ne,Oe)=>{const qe=(Lt(r,xe,{_f:{}})._f||{}).ref,Ze=Lt(t.errors,xe)||{},{ref:Ye,message:ht,type:Bt,...Jt}=Ze;qr(t.errors,xe,{...Jt,...Ne,ref:qe}),f.state.next({name:xe,errors:t.errors,isValid:!1}),Oe&&Oe.shouldFocus&&qe&&qe.focus&&qe.focus()},ce=(xe,Ne)=>yu(xe)?f.state.subscribe({next:Oe=>"values"in Oe&&xe(F(void 0,Ne),Oe)}):F(xe,Ne,!0),pe=xe=>f.state.subscribe({next:Ne=>{CSe(xe.name,Ne.name,xe.exact)&&kSe(Ne,xe.formState||d,vt,xe.reRenderRoot)&&xe.callback({values:{...s},...t,...Ne,defaultValues:i})}}).unsubscribe,oe=xe=>(o.mount=!0,h={...h,...xe.formState},pe({...xe,formState:h})),ve=(xe,Ne={})=>{for(const Oe of xe?gC(xe):a.mount)a.mount.delete(Oe),a.array.delete(Oe),Ne.keepValue||(Li(r,Oe),Li(s,Oe)),!Ne.keepError&&Li(t.errors,Oe),!Ne.keepDirty&&Li(t.dirtyFields,Oe),!Ne.keepTouched&&Li(t.touchedFields,Oe),!Ne.keepIsValidating&&Li(t.validatingFields,Oe),!e.shouldUnregister&&!Ne.keepDefaultValue&&Li(i,Oe);f.state.next({values:ms(s)}),f.state.next({...t,...Ne.keepDirty?{isDirty:D()}:{}}),!Ne.keepIsValid&&y()},be=({disabled:xe,name:Ne})=>{(xd(xe)&&o.mount||xe||a.disabled.has(Ne))&&(xe?a.disabled.add(Ne):a.disabled.delete(Ne))},fe=(xe,Ne={})=>{let Oe=Lt(r,xe);const qe=xd(Ne.disabled)||xd(e.disabled);return qr(r,xe,{...Oe||{},_f:{...Oe&&Oe._f?Oe._f:{ref:{name:xe}},name:xe,mount:!0,...Ne}}),a.mount.add(xe),Oe?be({disabled:xd(Ne.disabled)?Ne.disabled:e.disabled,name:xe}):T(xe,!0,Ne.value),{...qe?{disabled:Ne.disabled||e.disabled}:{},...e.progressive?{required:!!Ne.required,min:sk(Ne.min),max:sk(Ne.max),minLength:sk(Ne.minLength),maxLength:sk(Ne.maxLength),pattern:sk(Ne.pattern)}:{},name:xe,onChange:R,onBlur:R,ref:Ze=>{if(Ze){fe(xe,Ne),Oe=Lt(r,xe);const Ye=Pi(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,ht=vSe(Ye),Bt=Oe._f.refs||[];if(ht?Bt.find(Jt=>Jt===Ye):Ye===Oe._f.ref)return;qr(r,xe,{_f:{...Oe._f,...ht?{refs:[...Bt.filter(b4),Ye,...Array.isArray(Lt(i,xe))?[{}]:[]],ref:{type:Ye.type,name:xe}}:{ref:Ye}}}),T(xe,!1,void 0,Ye)}else Oe=Lt(r,xe,{}),Oe._f&&(Oe._f.mount=!1),(e.shouldUnregister||Ne.shouldUnregister)&&!(uSe(a.array,xe)&&o.action)&&a.unMount.add(xe)}}},we=()=>e.shouldFocusError&&vC(r,z,a.mount),ue=xe=>{xd(xe)&&(f.state.next({disabled:xe}),vC(r,(Ne,Oe)=>{const qe=Lt(r,Oe);qe&&(Ne.disabled=qe._f.disabled||xe,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||xe}))},0,!1))},Z=(xe,Ne)=>async Oe=>{let qe;Oe&&(Oe.preventDefault&&Oe.preventDefault(),Oe.persist&&Oe.persist());let Ze=ms(s);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:Ye,values:ht}=await P();t.errors=Ye,Ze=ms(ht)}else await O(r);if(a.disabled.size)for(const Ye of a.disabled)Li(Ze,Ye);if(Li(t.errors,"root"),_a(t.errors)){f.state.next({errors:{}});try{await xe(Ze,Oe)}catch(Ye){qe=Ye}}else Ne&&await Ne({...t.errors},Oe),we(),setTimeout(we);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_a(t.errors)&&!qe,submitCount:t.submitCount+1,errors:t.errors}),qe)throw qe},ge=(xe,Ne={})=>{Lt(r,xe)&&(Pi(Ne.defaultValue)?U(xe,ms(Lt(i,xe))):(U(xe,Ne.defaultValue),qr(i,xe,ms(Ne.defaultValue))),Ne.keepTouched||Li(t.touchedFields,xe),Ne.keepDirty||(Li(t.dirtyFields,xe),t.isDirty=Ne.defaultValue?D(xe,ms(Lt(i,xe))):D()),Ne.keepError||(Li(t.errors,xe),d.isValid&&y()),f.state.next({...t}))},he=(xe,Ne={})=>{const Oe=xe?ms(xe):i,qe=ms(Oe),Ze=_a(xe),Ye=Ze?i:qe;if(Ne.keepDefaultValues||(i=Oe),!Ne.keepValues){if(Ne.keepDirtyValues){const ht=new Set([...a.mount,...Object.keys(kb(i,s))]);for(const Bt of Array.from(ht))Lt(t.dirtyFields,Bt)?qr(Ye,Bt,Lt(s,Bt)):U(Bt,Lt(Ye,Bt))}else{if(A9&&Pi(xe))for(const ht of a.mount){const Bt=Lt(r,ht);if(Bt&&Bt._f){const Jt=Array.isArray(Bt._f.refs)?Bt._f.refs[0]:Bt._f.ref;if(oI(Jt)){const Pn=Jt.closest("form");if(Pn){Pn.reset();break}}}}if(Ne.keepFieldsRef)for(const ht of a.mount)U(ht,Lt(Ye,ht));else r={}}s=e.shouldUnregister?Ne.keepDefaultValues?ms(i):{}:ms(Ye),f.array.next({values:{...Ye}}),f.state.next({values:{...Ye}})}a={mount:Ne.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!Ne.keepIsValid||!!Ne.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:Ne.keepSubmitCount?t.submitCount:0,isDirty:Ze?!1:Ne.keepDirty?t.isDirty:!!(Ne.keepDefaultValues&&!hp(xe,i)),isSubmitted:Ne.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Ze?{}:Ne.keepDirtyValues?Ne.keepDefaultValues&&s?kb(i,s):t.dirtyFields:Ne.keepDefaultValues&&xe?kb(i,xe):Ne.keepDirty?t.dirtyFields:{},touchedFields:Ne.keepTouched?t.touchedFields:{},errors:Ne.keepErrors?t.errors:{},isSubmitSuccessful:Ne.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Ee=(xe,Ne)=>he(yu(xe)?xe(s):xe,Ne),Be=(xe,Ne={})=>{const Oe=Lt(r,xe),qe=Oe&&Oe._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),Ne.shouldSelect&&yu(Ze.select)&&Ze.select())}},vt=xe=>{t={...t,...xe}},Rt={control:{register:fe,unregister:ve,getFieldState:ne,handleSubmit:Z,setError:H,_subscribe:pe,_runSchema:P,_focusError:we,_getWatch:F,_getDirty:D,_setValid:y,_setFieldArray:_,_setDisabledField:be,_setErrors:k,_getFieldArray:K,_reset:he,_resetDefaultValues:()=>yu(e.defaultValues)&&e.defaultValues().then(xe=>{Ee(xe,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:q,_disableForm:ue,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return a},set _names(xe){a=xe},get _formState(){return t},get _options(){return e},set _options(xe){e={...e,...xe}}},subscribe:oe,trigger:W,register:fe,handleSubmit:Z,watch:ce,setValue:U,getValues:se,reset:Ee,resetField:ge,clearErrors:te,unregister:ve,setError:H,setFocus:Be,getFieldState:ne};return{...Rt,formControl:Rt}}function O9(n={}){const e=re.useRef(void 0),t=re.useRef(void 0),[r,i]=re.useState({isDirty:!1,isValidating:!1,isLoading:yu(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:yu(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:r},n.defaultValues&&!yu(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:o,...a}=jSe(n);e.current={...a,formState:r}}const s=e.current.control;return s._options=n,mSe(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),re.useEffect(()=>s._disableForm(n.disabled),[s,n.disabled]),re.useEffect(()=>{n.mode&&(s._options.mode=n.mode),n.reValidateMode&&(s._options.reValidateMode=n.reValidateMode)},[s,n.mode,n.reValidateMode]),re.useEffect(()=>{n.errors&&(s._setErrors(n.errors),s._focusError())},[s,n.errors]),re.useEffect(()=>{n.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,n.shouldUnregister]),re.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),re.useEffect(()=>{n.values&&!hp(n.values,t.current)?(s._reset(n.values,{keepFieldsRef:!0,...s._options.resetOptions}),t.current=n.values,i(o=>({...o}))):s._resetDefaultValues()},[s,n.values]),re.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=fSe(r,s),e.current}var w4={exports:{}},ha={},_4={exports:{}},S4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tK;function PSe(){return tK||(tK=1,(function(n){function e(z,W){var se=z.length;z.push(W);e:for(;0<se;){var ne=se-1>>>1,te=z[ne];if(0<i(te,W))z[ne]=W,z[se]=te,se=ne;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var W=z[0],se=z.pop();if(se!==W){z[0]=se;e:for(var ne=0,te=z.length,H=te>>>1;ne<H;){var ce=2*(ne+1)-1,pe=z[ce],oe=ce+1,ve=z[oe];if(0>i(pe,se))oe<te&&0>i(ve,pe)?(z[ne]=ve,z[oe]=se,ne=oe):(z[ne]=pe,z[ce]=se,ne=ce);else if(oe<te&&0>i(ve,se))z[ne]=ve,z[oe]=se,ne=oe;else break e}}return W}function i(z,W){var se=z.sortIndex-W.sortIndex;return se!==0?se:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,p=!1,x=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(z){for(var W=t(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=z)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=t(u)}}function T(z){if(y=!1,k(z),!x)if(t(c)!==null)x=!0,U(E);else{var W=t(u);W!==null&&R(T,W.startTime-z)}}function E(z,W){x=!1,y&&(y=!1,_(M),M=-1),p=!0;var se=f;try{for(k(W),h=t(c);h!==null&&(!(h.expirationTime>W)||z&&!D());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var te=ne(h.expirationTime<=W);W=n.unstable_now(),typeof te=="function"?h.callback=te:h===t(c)&&r(c),k(W)}else r(c);h=t(c)}if(h!==null)var H=!0;else{var ce=t(u);ce!==null&&R(T,ce.startTime-W),H=!1}return H}finally{h=null,f=se,p=!1}}var N=!1,P=null,M=-1,O=5,q=-1;function D(){return!(n.unstable_now()-q<O)}function F(){if(P!==null){var z=n.unstable_now();q=z;var W=!0;try{W=P(!0,z)}finally{W?K():(N=!1,P=null)}}else N=!1}var K;if(typeof C=="function")K=function(){C(F)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Y=ee.port2;ee.port1.onmessage=F,K=function(){Y.postMessage(null)}}else K=function(){b(F,0)};function U(z){P=z,N||(N=!0,K())}function R(z,W){M=b(function(){z(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){x||p||(x=!0,U(E))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(z){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var se=f;f=W;try{return z()}finally{f=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=f;f=z;try{return W()}finally{f=se}},n.unstable_scheduleCallback=function(z,W,se){var ne=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ne+se:ne):se=ne,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=se+te,z={id:d++,callback:W,priorityLevel:z,startTime:se,expirationTime:te,sortIndex:-1},se>ne?(z.sortIndex=se,e(u,z),t(c)===null&&z===t(u)&&(y?(_(M),M=-1):y=!0,R(T,se-ne))):(z.sortIndex=te,e(c,z),x||p||(x=!0,U(E))),z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(z){var W=f;return function(){var se=f;f=W;try{return z.apply(this,arguments)}finally{f=se}}}})(S4)),S4}var nK;function ISe(){return nK||(nK=1,_4.exports=PSe()),_4.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rK;function OSe(){if(rK)return ha;rK=1;var n=eS(),e=ISe();function t(m){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+m,w=1;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,g){o(m,g),o(m+"Capture",g)}function o(m,g){for(i[m]=g,m=0;m<g.length;m++)r.add(g[m])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function f(m){return c.call(h,m)?!0:c.call(d,m)?!1:u.test(m)?h[m]=!0:(d[m]=!0,!1)}function p(m,g,w,A){if(w!==null&&w.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return A?!1:w!==null?!w.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function x(m,g,w,A){if(g===null||typeof g>"u"||p(m,g,w,A))return!0;if(A)return!1;if(w!==null)switch(w.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function y(m,g,w,A,I,V,ie){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=A,this.attributeNamespace=I,this.mustUseProperty=w,this.propertyName=m,this.type=g,this.sanitizeURL=V,this.removeEmptyString=ie}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){b[m]=new y(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var g=m[0];b[g]=new y(g,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){b[m]=new y(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){b[m]=new y(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){b[m]=new y(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){b[m]=new y(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){b[m]=new y(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){b[m]=new y(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){b[m]=new y(m,5,!1,m.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var g=m.replace(_,C);b[g]=new y(g,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var g=m.replace(_,C);b[g]=new y(g,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var g=m.replace(_,C);b[g]=new y(g,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){b[m]=new y(m,1,!1,m.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){b[m]=new y(m,1,!1,m.toLowerCase(),null,!0,!0)});function k(m,g,w,A){var I=b.hasOwnProperty(g)?b[g]:null;(I!==null?I.type!==0:A||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(x(g,w,I,A)&&(w=null),A||I===null?f(g)&&(w===null?m.removeAttribute(g):m.setAttribute(g,""+w)):I.mustUseProperty?m[I.propertyName]=w===null?I.type===3?!1:"":w:(g=I.attributeName,A=I.attributeNamespace,w===null?m.removeAttribute(g):(I=I.type,w=I===3||I===4&&w===!0?"":""+w,A?m.setAttributeNS(A,g,w):m.setAttribute(g,w))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),z=Symbol.iterator;function W(m){return m===null||typeof m!="object"?null:(m=z&&m[z]||m["@@iterator"],typeof m=="function"?m:null)}var se=Object.assign,ne;function te(m){if(ne===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);ne=g&&g[1]||""}return`
`+ne+m}var H=!1;function ce(m,g){if(!m||H)return"";H=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Fe){var A=Fe}Reflect.construct(m,[],g)}else{try{g.call()}catch(Fe){A=Fe}m.call(g.prototype)}else{try{throw Error()}catch(Fe){A=Fe}m()}}catch(Fe){if(Fe&&A&&typeof Fe.stack=="string"){for(var I=Fe.stack.split(`
`),V=A.stack.split(`
`),ie=I.length-1,ye=V.length-1;1<=ie&&0<=ye&&I[ie]!==V[ye];)ye--;for(;1<=ie&&0<=ye;ie--,ye--)if(I[ie]!==V[ye]){if(ie!==1||ye!==1)do if(ie--,ye--,0>ye||I[ie]!==V[ye]){var ke=`
`+I[ie].replace(" at new "," at ");return m.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",m.displayName)),ke}while(1<=ie&&0<=ye);break}}}finally{H=!1,Error.prepareStackTrace=w}return(m=m?m.displayName||m.name:"")?te(m):""}function pe(m){switch(m.tag){case 5:return te(m.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return m=ce(m.type,!1),m;case 11:return m=ce(m.type.render,!1),m;case 1:return m=ce(m.type,!0),m;default:return""}}function oe(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case P:return"Fragment";case N:return"Portal";case O:return"Profiler";case M:return"StrictMode";case K:return"Suspense";case ee:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case D:return(m.displayName||"Context")+".Consumer";case q:return(m._context.displayName||"Context")+".Provider";case F:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Y:return g=m.displayName||null,g!==null?g:oe(m.type)||"Memo";case U:g=m._payload,m=m._init;try{return oe(m(g))}catch{}}return null}function ve(m){var g=m.type;switch(m.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=g.render,m=m.displayName||m.name||"",g.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(g);case 8:return g===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function be(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function fe(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function we(m){var g=fe(m)?"checked":"value",w=Object.getOwnPropertyDescriptor(m.constructor.prototype,g),A=""+m[g];if(!m.hasOwnProperty(g)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var I=w.get,V=w.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return I.call(this)},set:function(ie){A=""+ie,V.call(this,ie)}}),Object.defineProperty(m,g,{enumerable:w.enumerable}),{getValue:function(){return A},setValue:function(ie){A=""+ie},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function ue(m){m._valueTracker||(m._valueTracker=we(m))}function Z(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var w=g.getValue(),A="";return m&&(A=fe(m)?m.checked?"true":"false":m.value),m=A,m!==w?(g.setValue(m),!0):!1}function ge(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function he(m,g){var w=g.checked;return se({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??m._wrapperState.initialChecked})}function Ee(m,g){var w=g.defaultValue==null?"":g.defaultValue,A=g.checked!=null?g.checked:g.defaultChecked;w=be(g.value!=null?g.value:w),m._wrapperState={initialChecked:A,initialValue:w,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function Be(m,g){g=g.checked,g!=null&&k(m,"checked",g,!1)}function vt(m,g){Be(m,g);var w=be(g.value),A=g.type;if(w!=null)A==="number"?(w===0&&m.value===""||m.value!=w)&&(m.value=""+w):m.value!==""+w&&(m.value=""+w);else if(A==="submit"||A==="reset"){m.removeAttribute("value");return}g.hasOwnProperty("value")?Rt(m,g.type,w):g.hasOwnProperty("defaultValue")&&Rt(m,g.type,be(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(m.defaultChecked=!!g.defaultChecked)}function xt(m,g,w){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var A=g.type;if(!(A!=="submit"&&A!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+m._wrapperState.initialValue,w||g===m.value||(m.value=g),m.defaultValue=g}w=m.name,w!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,w!==""&&(m.name=w)}function Rt(m,g,w){(g!=="number"||ge(m.ownerDocument)!==m)&&(w==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+w&&(m.defaultValue=""+w))}var xe=Array.isArray;function Ne(m,g,w,A){if(m=m.options,g){g={};for(var I=0;I<w.length;I++)g["$"+w[I]]=!0;for(w=0;w<m.length;w++)I=g.hasOwnProperty("$"+m[w].value),m[w].selected!==I&&(m[w].selected=I),I&&A&&(m[w].defaultSelected=!0)}else{for(w=""+be(w),g=null,I=0;I<m.length;I++){if(m[I].value===w){m[I].selected=!0,A&&(m[I].defaultSelected=!0);return}g!==null||m[I].disabled||(g=m[I])}g!==null&&(g.selected=!0)}}function Oe(m,g){if(g.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},g,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function qe(m,g){var w=g.value;if(w==null){if(w=g.children,g=g.defaultValue,w!=null){if(g!=null)throw Error(t(92));if(xe(w)){if(1<w.length)throw Error(t(93));w=w[0]}g=w}g==null&&(g=""),w=g}m._wrapperState={initialValue:be(w)}}function Ze(m,g){var w=be(g.value),A=be(g.defaultValue);w!=null&&(w=""+w,w!==m.value&&(m.value=w),g.defaultValue==null&&m.defaultValue!==w&&(m.defaultValue=w)),A!=null&&(m.defaultValue=""+A)}function Ye(m){var g=m.textContent;g===m._wrapperState.initialValue&&g!==""&&g!==null&&(m.value=g)}function ht(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bt(m,g){return m==null||m==="http://www.w3.org/1999/xhtml"?ht(g):m==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var Jt,Pn=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,w,A,I){MSApp.execUnsafeLocalFunction(function(){return m(g,w,A,I)})}:m})(function(m,g){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=g;else{for(Jt=Jt||document.createElement("div"),Jt.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Jt.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;g.firstChild;)m.appendChild(g.firstChild)}});function Hn(m,g){if(g){var w=m.firstChild;if(w&&w===m.lastChild&&w.nodeType===3){w.nodeValue=g;return}}m.textContent=g}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Js=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(m){Js.forEach(function(g){g=g+m.charAt(0).toUpperCase()+m.substring(1),zr[g]=zr[m]})});function ui(m,g,w){return g==null||typeof g=="boolean"||g===""?"":w||typeof g!="number"||g===0||zr.hasOwnProperty(m)&&zr[m]?(""+g).trim():g+"px"}function qi(m,g){m=m.style;for(var w in g)if(g.hasOwnProperty(w)){var A=w.indexOf("--")===0,I=ui(w,g[w],A);w==="float"&&(w="cssFloat"),A?m.setProperty(w,I):m[w]=I}}var ql=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gi(m,g){if(g){if(ql[m]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(t(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(t(61))}if(g.style!=null&&typeof g.style!="object")throw Error(t(62))}}function Wa(m,g){if(m.indexOf("-")===-1)return typeof g.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qo=null;function di(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Zo=null,us=null,fn=null;function hi(m){if(m=zS(m)){if(typeof Zo!="function")throw Error(t(280));var g=m.stateNode;g&&(g=vN(g),Zo(m.stateNode,m.type,g))}}function qa(m){us?fn?fn.push(m):fn=[m]:us=m}function $t(){if(us){var m=us,g=fn;if(fn=us=null,hi(m),g)for(m=0;m<g.length;m++)hi(g[m])}}function sn(m,g){return m(g)}function An(){}var Ir=!1;function Ki(m,g,w){if(Ir)return m(g,w);Ir=!0;try{return sn(m,g,w)}finally{Ir=!1,(us!==null||fn!==null)&&(An(),$t())}}function Ri(m,g){var w=m.stateNode;if(w===null)return null;var A=vN(w);if(A===null)return null;w=A[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(m=m.type,A=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!A;break e;default:m=!1}if(m)return null;if(w&&typeof w!="function")throw Error(t(231,g,typeof w));return w}var Ps=!1;if(a)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{Ps=!1}function So(m,g,w,A,I,V,ie,ye,ke){var Fe=Array.prototype.slice.call(arguments,3);try{g.apply(w,Fe)}catch(Je){this.onError(Je)}}var Qu=!1,Pm=null,Im=!1,Zu=null,Ex={onError:function(m){Qu=!0,Pm=m}};function Om(m,g,w,A,I,V,ie,ye,ke){Qu=!1,Pm=null,So.apply(Ex,arguments)}function uv(m,g,w,A,I,V,ie,ye,ke){if(Om.apply(this,arguments),Qu){if(Qu){var Fe=Pm;Qu=!1,Pm=null}else throw Error(t(198));Im||(Im=!0,Zu=Fe)}}function Mc(m){var g=m,w=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(w=g.return),m=g.return;while(m)}return g.tag===3?w:null}function ed(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function Tx(m){if(Mc(m)!==m)throw Error(t(188))}function dv(m){var g=m.alternate;if(!g){if(g=Mc(m),g===null)throw Error(t(188));return g!==m?null:m}for(var w=m,A=g;;){var I=w.return;if(I===null)break;var V=I.alternate;if(V===null){if(A=I.return,A!==null){w=A;continue}break}if(I.child===V.child){for(V=I.child;V;){if(V===w)return Tx(I),m;if(V===A)return Tx(I),g;V=V.sibling}throw Error(t(188))}if(w.return!==A.return)w=I,A=V;else{for(var ie=!1,ye=I.child;ye;){if(ye===w){ie=!0,w=I,A=V;break}if(ye===A){ie=!0,A=I,w=V;break}ye=ye.sibling}if(!ie){for(ye=V.child;ye;){if(ye===w){ie=!0,w=V,A=I;break}if(ye===A){ie=!0,A=V,w=I;break}ye=ye.sibling}if(!ie)throw Error(t(189))}}if(w.alternate!==A)throw Error(t(190))}if(w.tag!==3)throw Error(t(188));return w.stateNode.current===w?m:g}function Ch(m){return m=dv(m),m!==null?td(m):null}function td(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var g=td(m);if(g!==null)return g;m=m.sibling}return null}var Eh=e.unstable_scheduleCallback,hv=e.unstable_cancelCallback,Ax=e.unstable_shouldYield,Nx=e.unstable_requestPaint,hr=e.unstable_now,Is=e.unstable_getCurrentPriorityLevel,Rm=e.unstable_ImmediatePriority,Mm=e.unstable_UserBlockingPriority,nd=e.unstable_NormalPriority,jx=e.unstable_LowPriority,Dc=e.unstable_IdlePriority,Ga=null,ko=null;function Th(m){if(ko&&typeof ko.onCommitFiberRoot=="function")try{ko.onCommitFiberRoot(Ga,m,void 0,(m.current.flags&128)===128)}catch{}}var Yi=Math.clz32?Math.clz32:pv,fv=Math.log,mv=Math.LN2;function pv(m){return m>>>=0,m===0?32:31-(fv(m)/mv|0)|0}var Lc=64,Ah=4194304;function rd(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function id(m,g){var w=m.pendingLanes;if(w===0)return 0;var A=0,I=m.suspendedLanes,V=m.pingedLanes,ie=w&268435455;if(ie!==0){var ye=ie&~I;ye!==0?A=rd(ye):(V&=ie,V!==0&&(A=rd(V)))}else ie=w&~I,ie!==0?A=rd(ie):V!==0&&(A=rd(V));if(A===0)return 0;if(g!==0&&g!==A&&(g&I)===0&&(I=A&-A,V=g&-g,I>=V||I===16&&(V&4194240)!==0))return g;if((A&4)!==0&&(A|=w&16),g=m.entangledLanes,g!==0)for(m=m.entanglements,g&=A;0<g;)w=31-Yi(g),I=1<<w,A|=m[w],g&=~I;return A}function B(m,g){switch(m){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q(m,g){for(var w=m.suspendedLanes,A=m.pingedLanes,I=m.expirationTimes,V=m.pendingLanes;0<V;){var ie=31-Yi(V),ye=1<<ie,ke=I[ie];ke===-1?((ye&w)===0||(ye&A)!==0)&&(I[ie]=B(ye,g)):ke<=g&&(m.expiredLanes|=ye),V&=~ye}}function le(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function me(){var m=Lc;return Lc<<=1,(Lc&4194240)===0&&(Lc=64),m}function Re(m){for(var g=[],w=0;31>w;w++)g.push(m);return g}function je(m,g,w){m.pendingLanes|=g,g!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,g=31-Yi(g),m[g]=w}function Ve(m,g){var w=m.pendingLanes&~g;m.pendingLanes=g,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=g,m.mutableReadLanes&=g,m.entangledLanes&=g,g=m.entanglements;var A=m.eventTimes;for(m=m.expirationTimes;0<w;){var I=31-Yi(w),V=1<<I;g[I]=0,A[I]=-1,m[I]=-1,w&=~V}}function lt(m,g){var w=m.entangledLanes|=g;for(m=m.entanglements;w;){var A=31-Yi(w),I=1<<A;I&g|m[A]&g&&(m[A]|=g),w&=~I}}var ft=0;function Yt(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var on,tr,ea,ta,Qs,Fc=!1,na=[],ra=null,Zs=null,Ka=null,ia=new Map,sd=new Map,od=[],Y3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nN(m,g){switch(m){case"focusin":case"focusout":ra=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":ia.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(g.pointerId)}}function gv(m,g,w,A,I,V){return m===null||m.nativeEvent!==V?(m={blockedOn:g,domEventName:w,eventSystemFlags:A,nativeEvent:V,targetContainers:[I]},g!==null&&(g=zS(g),g!==null&&tr(g)),m):(m.eventSystemFlags|=A,g=m.targetContainers,I!==null&&g.indexOf(I)===-1&&g.push(I),m)}function X3(m,g,w,A,I){switch(g){case"focusin":return ra=gv(ra,m,g,w,A,I),!0;case"dragenter":return Zs=gv(Zs,m,g,w,A,I),!0;case"mouseover":return Ka=gv(Ka,m,g,w,A,I),!0;case"pointerover":var V=I.pointerId;return ia.set(V,gv(ia.get(V)||null,m,g,w,A,I)),!0;case"gotpointercapture":return V=I.pointerId,sd.set(V,gv(sd.get(V)||null,m,g,w,A,I)),!0}return!1}function Gl(m){var g=kv(m.target);if(g!==null){var w=Mc(g);if(w!==null){if(g=w.tag,g===13){if(g=ed(w),g!==null){m.blockedOn=g,Qs(m.priority,function(){ea(w)});return}}else if(g===3&&w.stateNode.current.memoizedState.isDehydrated){m.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Dm(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var w=yv(m.domEventName,m.eventSystemFlags,g[0],m.nativeEvent);if(w===null){w=m.nativeEvent;var A=new w.constructor(w.type,w);Qo=A,w.target.dispatchEvent(A),Qo=null}else return g=zS(w),g!==null&&tr(g),m.blockedOn=w,!1;g.shift()}return!0}function vv(m,g,w){Dm(m)&&w.delete(g)}function nr(){Fc=!1,ra!==null&&Dm(ra)&&(ra=null),Zs!==null&&Dm(Zs)&&(Zs=null),Ka!==null&&Dm(Ka)&&(Ka=null),ia.forEach(vv),sd.forEach(vv)}function Bc(m,g){m.blockedOn===g&&(m.blockedOn=null,Fc||(Fc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nr)))}function ad(m){function g(I){return Bc(I,m)}if(0<na.length){Bc(na[0],m);for(var w=1;w<na.length;w++){var A=na[w];A.blockedOn===m&&(A.blockedOn=null)}}for(ra!==null&&Bc(ra,m),Zs!==null&&Bc(Zs,m),Ka!==null&&Bc(Ka,m),ia.forEach(g),sd.forEach(g),w=0;w<od.length;w++)A=od[w],A.blockedOn===m&&(A.blockedOn=null);for(;0<od.length&&(w=od[0],w.blockedOn===null);)Gl(w),w.blockedOn===null&&od.shift()}var Kl=T.ReactCurrentBatchConfig,Ya=!0;function Px(m,g,w,A){var I=ft,V=Kl.transition;Kl.transition=null;try{ft=1,Ix(m,g,w,A)}finally{ft=I,Kl.transition=V}}function Nh(m,g,w,A){var I=ft,V=Kl.transition;Kl.transition=null;try{ft=4,Ix(m,g,w,A)}finally{ft=I,Kl.transition=V}}function Ix(m,g,w,A){if(Ya){var I=yv(m,g,w,A);if(I===null)aD(m,g,A,Lm,w),nN(m,A);else if(X3(I,m,g,w,A))A.stopPropagation();else if(nN(m,A),g&4&&-1<Y3.indexOf(m)){for(;I!==null;){var V=zS(I);if(V!==null&&on(V),V=yv(m,g,w,A),V===null&&aD(m,g,A,Lm,w),V===I)break;I=V}I!==null&&A.stopPropagation()}else aD(m,g,A,null,w)}}var Lm=null;function yv(m,g,w,A){if(Lm=null,m=di(A),m=kv(m),m!==null)if(g=Mc(m),g===null)m=null;else if(w=g.tag,w===13){if(m=ed(g),m!==null)return m;m=null}else if(w===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null);return Lm=m,null}function TS(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Is()){case Rm:return 1;case Mm:return 4;case nd:case jx:return 16;case Dc:return 536870912;default:return 16}default:return 16}}var $c=null,Ox=null,Rx=null;function rN(){if(Rx)return Rx;var m,g=Ox,w=g.length,A,I="value"in $c?$c.value:$c.textContent,V=I.length;for(m=0;m<w&&g[m]===I[m];m++);var ie=w-m;for(A=1;A<=ie&&g[w-A]===I[V-A];A++);return Rx=I.slice(m,1<A?1-A:void 0)}function jh(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function xv(){return!0}function bv(){return!1}function Os(m){function g(w,A,I,V,ie){this._reactName=w,this._targetInst=I,this.type=A,this.nativeEvent=V,this.target=ie,this.currentTarget=null;for(var ye in m)m.hasOwnProperty(ye)&&(w=m[ye],this[ye]=w?w(V):V[ye]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?xv:bv,this.isPropagationStopped=bv,this}return se(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=xv)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=xv)},persist:function(){},isPersistent:xv}),g}var Fm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ph=Os(Fm),wv=se({},Fm,{view:0,detail:0}),AS=Os(wv),Bm,Ih,ld,_v=se({},wv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bx,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==ld&&(ld&&m.type==="mousemove"?(Bm=m.screenX-ld.screenX,Ih=m.screenY-ld.screenY):Ih=Bm=0,ld=m),Bm)},movementY:function(m){return"movementY"in m?m.movementY:Ih}}),NS=Os(_v),iN=se({},_v,{dataTransfer:0}),jS=Os(iN),Co=se({},wv,{relatedTarget:0}),Mx=Os(Co),PS=se({},Fm,{animationName:0,elapsedTime:0,pseudoElement:0}),J3=Os(PS),sN=se({},Fm,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Dx=Os(sN),oN=se({},Fm,{data:0}),IS=Os(oN),Lx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lN(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=aN[m])?!!g[m]:!1}function Bx(){return lN}var OS=se({},wv,{key:function(m){if(m.key){var g=Lx[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=jh(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Fx[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bx,charCode:function(m){return m.type==="keypress"?jh(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?jh(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),cN=Os(OS),$=se({},_v,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X=Os($),ae=se({},wv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bx}),de=Os(ae),De=se({},Fm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ie=Os(De),Ue=se({},_v,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),rt=Os(Ue),qt=[9,13,27,32],dn=a&&"CompositionEvent"in window,en=null;a&&"documentMode"in document&&(en=document.documentMode);var fr=a&&"TextEvent"in window&&!en,eo=a&&(!dn||en&&8<en&&11>=en),sa=" ",oa=!1;function Sv(m,g){switch(m){case"keyup":return qt.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RS(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var cd=!1;function Z1e(m,g){switch(m){case"compositionend":return RS(g);case"keypress":return g.which!==32?null:(oa=!0,sa);case"textInput":return m=g.data,m===sa&&oa?null:m;default:return null}}function e_e(m,g){if(cd)return m==="compositionend"||!dn&&Sv(m,g)?(m=rN(),Rx=Ox=$c=null,cd=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return eo&&g.locale!=="ko"?null:g.data;default:return null}}var t_e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MW(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!t_e[m.type]:g==="textarea"}function DW(m,g,w,A){qa(A),g=mN(g,"onChange"),0<g.length&&(w=new Ph("onChange","change",null,w,A),m.push({event:w,listeners:g}))}var MS=null,DS=null;function n_e(m){eq(m,0)}function uN(m){var g=Hx(m);if(Z(g))return m}function r_e(m,g){if(m==="change")return g}var LW=!1;if(a){var Q3;if(a){var Z3="oninput"in document;if(!Z3){var FW=document.createElement("div");FW.setAttribute("oninput","return;"),Z3=typeof FW.oninput=="function"}Q3=Z3}else Q3=!1;LW=Q3&&(!document.documentMode||9<document.documentMode)}function BW(){MS&&(MS.detachEvent("onpropertychange",$W),DS=MS=null)}function $W(m){if(m.propertyName==="value"&&uN(DS)){var g=[];DW(g,DS,m,di(m)),Ki(n_e,g)}}function i_e(m,g,w){m==="focusin"?(BW(),MS=g,DS=w,MS.attachEvent("onpropertychange",$W)):m==="focusout"&&BW()}function s_e(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return uN(DS)}function o_e(m,g){if(m==="click")return uN(g)}function a_e(m,g){if(m==="input"||m==="change")return uN(g)}function l_e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var Vc=typeof Object.is=="function"?Object.is:l_e;function LS(m,g){if(Vc(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var w=Object.keys(m),A=Object.keys(g);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var I=w[A];if(!c.call(g,I)||!Vc(m[I],g[I]))return!1}return!0}function VW(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function UW(m,g){var w=VW(m);m=0;for(var A;w;){if(w.nodeType===3){if(A=m+w.textContent.length,m<=g&&A>=g)return{node:w,offset:g-m};m=A}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=VW(w)}}function zW(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?zW(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function HW(){for(var m=window,g=ge();g instanceof m.HTMLIFrameElement;){try{var w=typeof g.contentWindow.location.href=="string"}catch{w=!1}if(w)m=g.contentWindow;else break;g=ge(m.document)}return g}function eD(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}function c_e(m){var g=HW(),w=m.focusedElem,A=m.selectionRange;if(g!==w&&w&&w.ownerDocument&&zW(w.ownerDocument.documentElement,w)){if(A!==null&&eD(w)){if(g=A.start,m=A.end,m===void 0&&(m=g),"selectionStart"in w)w.selectionStart=g,w.selectionEnd=Math.min(m,w.value.length);else if(m=(g=w.ownerDocument||document)&&g.defaultView||window,m.getSelection){m=m.getSelection();var I=w.textContent.length,V=Math.min(A.start,I);A=A.end===void 0?V:Math.min(A.end,I),!m.extend&&V>A&&(I=A,A=V,V=I),I=UW(w,V);var ie=UW(w,A);I&&ie&&(m.rangeCount!==1||m.anchorNode!==I.node||m.anchorOffset!==I.offset||m.focusNode!==ie.node||m.focusOffset!==ie.offset)&&(g=g.createRange(),g.setStart(I.node,I.offset),m.removeAllRanges(),V>A?(m.addRange(g),m.extend(ie.node,ie.offset)):(g.setEnd(ie.node,ie.offset),m.addRange(g)))}}for(g=[],m=w;m=m.parentNode;)m.nodeType===1&&g.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<g.length;w++)m=g[w],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var u_e=a&&"documentMode"in document&&11>=document.documentMode,$x=null,tD=null,FS=null,nD=!1;function WW(m,g,w){var A=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;nD||$x==null||$x!==ge(A)||(A=$x,"selectionStart"in A&&eD(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),FS&&LS(FS,A)||(FS=A,A=mN(tD,"onSelect"),0<A.length&&(g=new Ph("onSelect","select",null,g,w),m.push({event:g,listeners:A}),g.target=$x)))}function dN(m,g){var w={};return w[m.toLowerCase()]=g.toLowerCase(),w["Webkit"+m]="webkit"+g,w["Moz"+m]="moz"+g,w}var Vx={animationend:dN("Animation","AnimationEnd"),animationiteration:dN("Animation","AnimationIteration"),animationstart:dN("Animation","AnimationStart"),transitionend:dN("Transition","TransitionEnd")},rD={},qW={};a&&(qW=document.createElement("div").style,"AnimationEvent"in window||(delete Vx.animationend.animation,delete Vx.animationiteration.animation,delete Vx.animationstart.animation),"TransitionEvent"in window||delete Vx.transitionend.transition);function hN(m){if(rD[m])return rD[m];if(!Vx[m])return m;var g=Vx[m],w;for(w in g)if(g.hasOwnProperty(w)&&w in qW)return rD[m]=g[w];return m}var GW=hN("animationend"),KW=hN("animationiteration"),YW=hN("animationstart"),XW=hN("transitionend"),JW=new Map,QW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $m(m,g){JW.set(m,g),s(g,[m])}for(var iD=0;iD<QW.length;iD++){var sD=QW[iD],d_e=sD.toLowerCase(),h_e=sD[0].toUpperCase()+sD.slice(1);$m(d_e,"on"+h_e)}$m(GW,"onAnimationEnd"),$m(KW,"onAnimationIteration"),$m(YW,"onAnimationStart"),$m("dblclick","onDoubleClick"),$m("focusin","onFocus"),$m("focusout","onBlur"),$m(XW,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var BS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_e=new Set("cancel close invalid load scroll toggle".split(" ").concat(BS));function ZW(m,g,w){var A=m.type||"unknown-event";m.currentTarget=w,uv(A,g,void 0,m),m.currentTarget=null}function eq(m,g){g=(g&4)!==0;for(var w=0;w<m.length;w++){var A=m[w],I=A.event;A=A.listeners;e:{var V=void 0;if(g)for(var ie=A.length-1;0<=ie;ie--){var ye=A[ie],ke=ye.instance,Fe=ye.currentTarget;if(ye=ye.listener,ke!==V&&I.isPropagationStopped())break e;ZW(I,ye,Fe),V=ke}else for(ie=0;ie<A.length;ie++){if(ye=A[ie],ke=ye.instance,Fe=ye.currentTarget,ye=ye.listener,ke!==V&&I.isPropagationStopped())break e;ZW(I,ye,Fe),V=ke}}}if(Im)throw m=Zu,Im=!1,Zu=null,m}function Or(m,g){var w=g[fD];w===void 0&&(w=g[fD]=new Set);var A=m+"__bubble";w.has(A)||(tq(g,m,2,!1),w.add(A))}function oD(m,g,w){var A=0;g&&(A|=4),tq(w,m,A,g)}var fN="_reactListening"+Math.random().toString(36).slice(2);function $S(m){if(!m[fN]){m[fN]=!0,r.forEach(function(w){w!=="selectionchange"&&(f_e.has(w)||oD(w,!1,m),oD(w,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[fN]||(g[fN]=!0,oD("selectionchange",!1,g))}}function tq(m,g,w,A){switch(TS(g)){case 1:var I=Px;break;case 4:I=Nh;break;default:I=Ix}w=I.bind(null,g,w,m),I=void 0,!Ps||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(I=!0),A?I!==void 0?m.addEventListener(g,w,{capture:!0,passive:I}):m.addEventListener(g,w,!0):I!==void 0?m.addEventListener(g,w,{passive:I}):m.addEventListener(g,w,!1)}function aD(m,g,w,A,I){var V=A;if((g&1)===0&&(g&2)===0&&A!==null)e:for(;;){if(A===null)return;var ie=A.tag;if(ie===3||ie===4){var ye=A.stateNode.containerInfo;if(ye===I||ye.nodeType===8&&ye.parentNode===I)break;if(ie===4)for(ie=A.return;ie!==null;){var ke=ie.tag;if((ke===3||ke===4)&&(ke=ie.stateNode.containerInfo,ke===I||ke.nodeType===8&&ke.parentNode===I))return;ie=ie.return}for(;ye!==null;){if(ie=kv(ye),ie===null)return;if(ke=ie.tag,ke===5||ke===6){A=V=ie;continue e}ye=ye.parentNode}}A=A.return}Ki(function(){var Fe=V,Je=di(w),et=[];e:{var Xe=JW.get(m);if(Xe!==void 0){var St=Ph,It=m;switch(m){case"keypress":if(jh(w)===0)break e;case"keydown":case"keyup":St=cN;break;case"focusin":It="focus",St=Mx;break;case"focusout":It="blur",St=Mx;break;case"beforeblur":case"afterblur":St=Mx;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=NS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=jS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=de;break;case GW:case KW:case YW:St=J3;break;case XW:St=Ie;break;case"scroll":St=AS;break;case"wheel":St=rt;break;case"copy":case"cut":case"paste":St=Dx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=X}var Mt=(g&4)!==0,Ei=!Mt&&m==="scroll",Pe=Mt?Xe!==null?Xe+"Capture":null:Xe;Mt=[];for(var Te=Fe,Me;Te!==null;){Me=Te;var at=Me.stateNode;if(Me.tag===5&&at!==null&&(Me=at,Pe!==null&&(at=Ri(Te,Pe),at!=null&&Mt.push(VS(Te,at,Me)))),Ei)break;Te=Te.return}0<Mt.length&&(Xe=new St(Xe,It,null,w,Je),et.push({event:Xe,listeners:Mt}))}}if((g&7)===0){e:{if(Xe=m==="mouseover"||m==="pointerover",St=m==="mouseout"||m==="pointerout",Xe&&w!==Qo&&(It=w.relatedTarget||w.fromElement)&&(kv(It)||It[Oh]))break e;if((St||Xe)&&(Xe=Je.window===Je?Je:(Xe=Je.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,St?(It=w.relatedTarget||w.toElement,St=Fe,It=It?kv(It):null,It!==null&&(Ei=Mc(It),It!==Ei||It.tag!==5&&It.tag!==6)&&(It=null)):(St=null,It=Fe),St!==It)){if(Mt=NS,at="onMouseLeave",Pe="onMouseEnter",Te="mouse",(m==="pointerout"||m==="pointerover")&&(Mt=X,at="onPointerLeave",Pe="onPointerEnter",Te="pointer"),Ei=St==null?Xe:Hx(St),Me=It==null?Xe:Hx(It),Xe=new Mt(at,Te+"leave",St,w,Je),Xe.target=Ei,Xe.relatedTarget=Me,at=null,kv(Je)===Fe&&(Mt=new Mt(Pe,Te+"enter",It,w,Je),Mt.target=Me,Mt.relatedTarget=Ei,at=Mt),Ei=at,St&&It)t:{for(Mt=St,Pe=It,Te=0,Me=Mt;Me;Me=Ux(Me))Te++;for(Me=0,at=Pe;at;at=Ux(at))Me++;for(;0<Te-Me;)Mt=Ux(Mt),Te--;for(;0<Me-Te;)Pe=Ux(Pe),Me--;for(;Te--;){if(Mt===Pe||Pe!==null&&Mt===Pe.alternate)break t;Mt=Ux(Mt),Pe=Ux(Pe)}Mt=null}else Mt=null;St!==null&&nq(et,Xe,St,Mt,!1),It!==null&&Ei!==null&&nq(et,Ei,It,Mt,!0)}}e:{if(Xe=Fe?Hx(Fe):window,St=Xe.nodeName&&Xe.nodeName.toLowerCase(),St==="select"||St==="input"&&Xe.type==="file")var Ft=r_e;else if(MW(Xe))if(LW)Ft=a_e;else{Ft=s_e;var zt=i_e}else(St=Xe.nodeName)&&St.toLowerCase()==="input"&&(Xe.type==="checkbox"||Xe.type==="radio")&&(Ft=o_e);if(Ft&&(Ft=Ft(m,Fe))){DW(et,Ft,w,Je);break e}zt&&zt(m,Xe,Fe),m==="focusout"&&(zt=Xe._wrapperState)&&zt.controlled&&Xe.type==="number"&&Rt(Xe,"number",Xe.value)}switch(zt=Fe?Hx(Fe):window,m){case"focusin":(MW(zt)||zt.contentEditable==="true")&&($x=zt,tD=Fe,FS=null);break;case"focusout":FS=tD=$x=null;break;case"mousedown":nD=!0;break;case"contextmenu":case"mouseup":case"dragend":nD=!1,WW(et,w,Je);break;case"selectionchange":if(u_e)break;case"keydown":case"keyup":WW(et,w,Je)}var Ht;if(dn)e:{switch(m){case"compositionstart":var tn="onCompositionStart";break e;case"compositionend":tn="onCompositionEnd";break e;case"compositionupdate":tn="onCompositionUpdate";break e}tn=void 0}else cd?Sv(m,w)&&(tn="onCompositionEnd"):m==="keydown"&&w.keyCode===229&&(tn="onCompositionStart");tn&&(eo&&w.locale!=="ko"&&(cd||tn!=="onCompositionStart"?tn==="onCompositionEnd"&&cd&&(Ht=rN()):($c=Je,Ox="value"in $c?$c.value:$c.textContent,cd=!0)),zt=mN(Fe,tn),0<zt.length&&(tn=new IS(tn,m,null,w,Je),et.push({event:tn,listeners:zt}),Ht?tn.data=Ht:(Ht=RS(w),Ht!==null&&(tn.data=Ht)))),(Ht=fr?Z1e(m,w):e_e(m,w))&&(Fe=mN(Fe,"onBeforeInput"),0<Fe.length&&(Je=new IS("onBeforeInput","beforeinput",null,w,Je),et.push({event:Je,listeners:Fe}),Je.data=Ht))}eq(et,g)})}function VS(m,g,w){return{instance:m,listener:g,currentTarget:w}}function mN(m,g){for(var w=g+"Capture",A=[];m!==null;){var I=m,V=I.stateNode;I.tag===5&&V!==null&&(I=V,V=Ri(m,w),V!=null&&A.unshift(VS(m,V,I)),V=Ri(m,g),V!=null&&A.push(VS(m,V,I))),m=m.return}return A}function Ux(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function nq(m,g,w,A,I){for(var V=g._reactName,ie=[];w!==null&&w!==A;){var ye=w,ke=ye.alternate,Fe=ye.stateNode;if(ke!==null&&ke===A)break;ye.tag===5&&Fe!==null&&(ye=Fe,I?(ke=Ri(w,V),ke!=null&&ie.unshift(VS(w,ke,ye))):I||(ke=Ri(w,V),ke!=null&&ie.push(VS(w,ke,ye)))),w=w.return}ie.length!==0&&m.push({event:g,listeners:ie})}var m_e=/\r\n?/g,p_e=/\u0000|\uFFFD/g;function rq(m){return(typeof m=="string"?m:""+m).replace(m_e,`
`).replace(p_e,"")}function pN(m,g,w){if(g=rq(g),rq(m)!==g&&w)throw Error(t(425))}function gN(){}var lD=null,cD=null;function uD(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var dD=typeof setTimeout=="function"?setTimeout:void 0,g_e=typeof clearTimeout=="function"?clearTimeout:void 0,iq=typeof Promise=="function"?Promise:void 0,v_e=typeof queueMicrotask=="function"?queueMicrotask:typeof iq<"u"?function(m){return iq.resolve(null).then(m).catch(y_e)}:dD;function y_e(m){setTimeout(function(){throw m})}function hD(m,g){var w=g,A=0;do{var I=w.nextSibling;if(m.removeChild(w),I&&I.nodeType===8)if(w=I.data,w==="/$"){if(A===0){m.removeChild(I),ad(g);return}A--}else w!=="$"&&w!=="$?"&&w!=="$!"||A++;w=I}while(w);ad(g)}function Vm(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return m}function sq(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var w=m.data;if(w==="$"||w==="$!"||w==="$?"){if(g===0)return m;g--}else w==="/$"&&g++}m=m.previousSibling}return null}var zx=Math.random().toString(36).slice(2),ud="__reactFiber$"+zx,US="__reactProps$"+zx,Oh="__reactContainer$"+zx,fD="__reactEvents$"+zx,x_e="__reactListeners$"+zx,b_e="__reactHandles$"+zx;function kv(m){var g=m[ud];if(g)return g;for(var w=m.parentNode;w;){if(g=w[Oh]||w[ud]){if(w=g.alternate,g.child!==null||w!==null&&w.child!==null)for(m=sq(m);m!==null;){if(w=m[ud])return w;m=sq(m)}return g}m=w,w=m.parentNode}return null}function zS(m){return m=m[ud]||m[Oh],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Hx(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function vN(m){return m[US]||null}var mD=[],Wx=-1;function Um(m){return{current:m}}function Rr(m){0>Wx||(m.current=mD[Wx],mD[Wx]=null,Wx--)}function wr(m,g){Wx++,mD[Wx]=m.current,m.current=g}var zm={},to=Um(zm),aa=Um(!1),Cv=zm;function qx(m,g){var w=m.type.contextTypes;if(!w)return zm;var A=m.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===g)return A.__reactInternalMemoizedMaskedChildContext;var I={},V;for(V in w)I[V]=g[V];return A&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=g,m.__reactInternalMemoizedMaskedChildContext=I),I}function la(m){return m=m.childContextTypes,m!=null}function yN(){Rr(aa),Rr(to)}function oq(m,g,w){if(to.current!==zm)throw Error(t(168));wr(to,g),wr(aa,w)}function aq(m,g,w){var A=m.stateNode;if(g=g.childContextTypes,typeof A.getChildContext!="function")return w;A=A.getChildContext();for(var I in A)if(!(I in g))throw Error(t(108,ve(m)||"Unknown",I));return se({},w,A)}function xN(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||zm,Cv=to.current,wr(to,m),wr(aa,aa.current),!0}function lq(m,g,w){var A=m.stateNode;if(!A)throw Error(t(169));w?(m=aq(m,g,Cv),A.__reactInternalMemoizedMergedChildContext=m,Rr(aa),Rr(to),wr(to,m)):Rr(aa),wr(aa,w)}var Rh=null,bN=!1,pD=!1;function cq(m){Rh===null?Rh=[m]:Rh.push(m)}function w_e(m){bN=!0,cq(m)}function Hm(){if(!pD&&Rh!==null){pD=!0;var m=0,g=ft;try{var w=Rh;for(ft=1;m<w.length;m++){var A=w[m];do A=A(!0);while(A!==null)}Rh=null,bN=!1}catch(I){throw Rh!==null&&(Rh=Rh.slice(m+1)),Eh(Rm,Hm),I}finally{ft=g,pD=!1}}return null}var Gx=[],Kx=0,wN=null,_N=0,Yl=[],Xl=0,Ev=null,Mh=1,Dh="";function Tv(m,g){Gx[Kx++]=_N,Gx[Kx++]=wN,wN=m,_N=g}function uq(m,g,w){Yl[Xl++]=Mh,Yl[Xl++]=Dh,Yl[Xl++]=Ev,Ev=m;var A=Mh;m=Dh;var I=32-Yi(A)-1;A&=~(1<<I),w+=1;var V=32-Yi(g)+I;if(30<V){var ie=I-I%5;V=(A&(1<<ie)-1).toString(32),A>>=ie,I-=ie,Mh=1<<32-Yi(g)+I|w<<I|A,Dh=V+m}else Mh=1<<V|w<<I|A,Dh=m}function gD(m){m.return!==null&&(Tv(m,1),uq(m,1,0))}function vD(m){for(;m===wN;)wN=Gx[--Kx],Gx[Kx]=null,_N=Gx[--Kx],Gx[Kx]=null;for(;m===Ev;)Ev=Yl[--Xl],Yl[Xl]=null,Dh=Yl[--Xl],Yl[Xl]=null,Mh=Yl[--Xl],Yl[Xl]=null}var Xa=null,Ja=null,Hr=!1,Uc=null;function dq(m,g){var w=ec(5,null,null,0);w.elementType="DELETED",w.stateNode=g,w.return=m,g=m.deletions,g===null?(m.deletions=[w],m.flags|=16):g.push(w)}function hq(m,g){switch(m.tag){case 5:var w=m.type;return g=g.nodeType!==1||w.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(m.stateNode=g,Xa=m,Ja=Vm(g.firstChild),!0):!1;case 6:return g=m.pendingProps===""||g.nodeType!==3?null:g,g!==null?(m.stateNode=g,Xa=m,Ja=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(w=Ev!==null?{id:Mh,overflow:Dh}:null,m.memoizedState={dehydrated:g,treeContext:w,retryLane:1073741824},w=ec(18,null,null,0),w.stateNode=g,w.return=m,m.child=w,Xa=m,Ja=null,!0):!1;default:return!1}}function yD(m){return(m.mode&1)!==0&&(m.flags&128)===0}function xD(m){if(Hr){var g=Ja;if(g){var w=g;if(!hq(m,g)){if(yD(m))throw Error(t(418));g=Vm(w.nextSibling);var A=Xa;g&&hq(m,g)?dq(A,w):(m.flags=m.flags&-4097|2,Hr=!1,Xa=m)}}else{if(yD(m))throw Error(t(418));m.flags=m.flags&-4097|2,Hr=!1,Xa=m}}}function fq(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Xa=m}function SN(m){if(m!==Xa)return!1;if(!Hr)return fq(m),Hr=!0,!1;var g;if((g=m.tag!==3)&&!(g=m.tag!==5)&&(g=m.type,g=g!=="head"&&g!=="body"&&!uD(m.type,m.memoizedProps)),g&&(g=Ja)){if(yD(m))throw mq(),Error(t(418));for(;g;)dq(m,g),g=Vm(g.nextSibling)}if(fq(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,g=0;m;){if(m.nodeType===8){var w=m.data;if(w==="/$"){if(g===0){Ja=Vm(m.nextSibling);break e}g--}else w!=="$"&&w!=="$!"&&w!=="$?"||g++}m=m.nextSibling}Ja=null}}else Ja=Xa?Vm(m.stateNode.nextSibling):null;return!0}function mq(){for(var m=Ja;m;)m=Vm(m.nextSibling)}function Yx(){Ja=Xa=null,Hr=!1}function bD(m){Uc===null?Uc=[m]:Uc.push(m)}var __e=T.ReactCurrentBatchConfig;function HS(m,g,w){if(m=w.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(t(309));var A=w.stateNode}if(!A)throw Error(t(147,m));var I=A,V=""+m;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===V?g.ref:(g=function(ie){var ye=I.refs;ie===null?delete ye[V]:ye[V]=ie},g._stringRef=V,g)}if(typeof m!="string")throw Error(t(284));if(!w._owner)throw Error(t(290,m))}return m}function kN(m,g){throw m=Object.prototype.toString.call(g),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m))}function pq(m){var g=m._init;return g(m._payload)}function gq(m){function g(Pe,Te){if(m){var Me=Pe.deletions;Me===null?(Pe.deletions=[Te],Pe.flags|=16):Me.push(Te)}}function w(Pe,Te){if(!m)return null;for(;Te!==null;)g(Pe,Te),Te=Te.sibling;return null}function A(Pe,Te){for(Pe=new Map;Te!==null;)Te.key!==null?Pe.set(Te.key,Te):Pe.set(Te.index,Te),Te=Te.sibling;return Pe}function I(Pe,Te){return Pe=Qm(Pe,Te),Pe.index=0,Pe.sibling=null,Pe}function V(Pe,Te,Me){return Pe.index=Me,m?(Me=Pe.alternate,Me!==null?(Me=Me.index,Me<Te?(Pe.flags|=2,Te):Me):(Pe.flags|=2,Te)):(Pe.flags|=1048576,Te)}function ie(Pe){return m&&Pe.alternate===null&&(Pe.flags|=2),Pe}function ye(Pe,Te,Me,at){return Te===null||Te.tag!==6?(Te=d4(Me,Pe.mode,at),Te.return=Pe,Te):(Te=I(Te,Me),Te.return=Pe,Te)}function ke(Pe,Te,Me,at){var Ft=Me.type;return Ft===P?Je(Pe,Te,Me.props.children,at,Me.key):Te!==null&&(Te.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===U&&pq(Ft)===Te.type)?(at=I(Te,Me.props),at.ref=HS(Pe,Te,Me),at.return=Pe,at):(at=KN(Me.type,Me.key,Me.props,null,Pe.mode,at),at.ref=HS(Pe,Te,Me),at.return=Pe,at)}function Fe(Pe,Te,Me,at){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Me.containerInfo||Te.stateNode.implementation!==Me.implementation?(Te=h4(Me,Pe.mode,at),Te.return=Pe,Te):(Te=I(Te,Me.children||[]),Te.return=Pe,Te)}function Je(Pe,Te,Me,at,Ft){return Te===null||Te.tag!==7?(Te=Mv(Me,Pe.mode,at,Ft),Te.return=Pe,Te):(Te=I(Te,Me),Te.return=Pe,Te)}function et(Pe,Te,Me){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=d4(""+Te,Pe.mode,Me),Te.return=Pe,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case E:return Me=KN(Te.type,Te.key,Te.props,null,Pe.mode,Me),Me.ref=HS(Pe,null,Te),Me.return=Pe,Me;case N:return Te=h4(Te,Pe.mode,Me),Te.return=Pe,Te;case U:var at=Te._init;return et(Pe,at(Te._payload),Me)}if(xe(Te)||W(Te))return Te=Mv(Te,Pe.mode,Me,null),Te.return=Pe,Te;kN(Pe,Te)}return null}function Xe(Pe,Te,Me,at){var Ft=Te!==null?Te.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Ft!==null?null:ye(Pe,Te,""+Me,at);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case E:return Me.key===Ft?ke(Pe,Te,Me,at):null;case N:return Me.key===Ft?Fe(Pe,Te,Me,at):null;case U:return Ft=Me._init,Xe(Pe,Te,Ft(Me._payload),at)}if(xe(Me)||W(Me))return Ft!==null?null:Je(Pe,Te,Me,at,null);kN(Pe,Me)}return null}function St(Pe,Te,Me,at,Ft){if(typeof at=="string"&&at!==""||typeof at=="number")return Pe=Pe.get(Me)||null,ye(Te,Pe,""+at,Ft);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case E:return Pe=Pe.get(at.key===null?Me:at.key)||null,ke(Te,Pe,at,Ft);case N:return Pe=Pe.get(at.key===null?Me:at.key)||null,Fe(Te,Pe,at,Ft);case U:var zt=at._init;return St(Pe,Te,Me,zt(at._payload),Ft)}if(xe(at)||W(at))return Pe=Pe.get(Me)||null,Je(Te,Pe,at,Ft,null);kN(Te,at)}return null}function It(Pe,Te,Me,at){for(var Ft=null,zt=null,Ht=Te,tn=Te=0,fs=null;Ht!==null&&tn<Me.length;tn++){Ht.index>tn?(fs=Ht,Ht=null):fs=Ht.sibling;var $n=Xe(Pe,Ht,Me[tn],at);if($n===null){Ht===null&&(Ht=fs);break}m&&Ht&&$n.alternate===null&&g(Pe,Ht),Te=V($n,Te,tn),zt===null?Ft=$n:zt.sibling=$n,zt=$n,Ht=fs}if(tn===Me.length)return w(Pe,Ht),Hr&&Tv(Pe,tn),Ft;if(Ht===null){for(;tn<Me.length;tn++)Ht=et(Pe,Me[tn],at),Ht!==null&&(Te=V(Ht,Te,tn),zt===null?Ft=Ht:zt.sibling=Ht,zt=Ht);return Hr&&Tv(Pe,tn),Ft}for(Ht=A(Pe,Ht);tn<Me.length;tn++)fs=St(Ht,Pe,tn,Me[tn],at),fs!==null&&(m&&fs.alternate!==null&&Ht.delete(fs.key===null?tn:fs.key),Te=V(fs,Te,tn),zt===null?Ft=fs:zt.sibling=fs,zt=fs);return m&&Ht.forEach(function(Zm){return g(Pe,Zm)}),Hr&&Tv(Pe,tn),Ft}function Mt(Pe,Te,Me,at){var Ft=W(Me);if(typeof Ft!="function")throw Error(t(150));if(Me=Ft.call(Me),Me==null)throw Error(t(151));for(var zt=Ft=null,Ht=Te,tn=Te=0,fs=null,$n=Me.next();Ht!==null&&!$n.done;tn++,$n=Me.next()){Ht.index>tn?(fs=Ht,Ht=null):fs=Ht.sibling;var Zm=Xe(Pe,Ht,$n.value,at);if(Zm===null){Ht===null&&(Ht=fs);break}m&&Ht&&Zm.alternate===null&&g(Pe,Ht),Te=V(Zm,Te,tn),zt===null?Ft=Zm:zt.sibling=Zm,zt=Zm,Ht=fs}if($n.done)return w(Pe,Ht),Hr&&Tv(Pe,tn),Ft;if(Ht===null){for(;!$n.done;tn++,$n=Me.next())$n=et(Pe,$n.value,at),$n!==null&&(Te=V($n,Te,tn),zt===null?Ft=$n:zt.sibling=$n,zt=$n);return Hr&&Tv(Pe,tn),Ft}for(Ht=A(Pe,Ht);!$n.done;tn++,$n=Me.next())$n=St(Ht,Pe,tn,$n.value,at),$n!==null&&(m&&$n.alternate!==null&&Ht.delete($n.key===null?tn:$n.key),Te=V($n,Te,tn),zt===null?Ft=$n:zt.sibling=$n,zt=$n);return m&&Ht.forEach(function(tSe){return g(Pe,tSe)}),Hr&&Tv(Pe,tn),Ft}function Ei(Pe,Te,Me,at){if(typeof Me=="object"&&Me!==null&&Me.type===P&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case E:e:{for(var Ft=Me.key,zt=Te;zt!==null;){if(zt.key===Ft){if(Ft=Me.type,Ft===P){if(zt.tag===7){w(Pe,zt.sibling),Te=I(zt,Me.props.children),Te.return=Pe,Pe=Te;break e}}else if(zt.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===U&&pq(Ft)===zt.type){w(Pe,zt.sibling),Te=I(zt,Me.props),Te.ref=HS(Pe,zt,Me),Te.return=Pe,Pe=Te;break e}w(Pe,zt);break}else g(Pe,zt);zt=zt.sibling}Me.type===P?(Te=Mv(Me.props.children,Pe.mode,at,Me.key),Te.return=Pe,Pe=Te):(at=KN(Me.type,Me.key,Me.props,null,Pe.mode,at),at.ref=HS(Pe,Te,Me),at.return=Pe,Pe=at)}return ie(Pe);case N:e:{for(zt=Me.key;Te!==null;){if(Te.key===zt)if(Te.tag===4&&Te.stateNode.containerInfo===Me.containerInfo&&Te.stateNode.implementation===Me.implementation){w(Pe,Te.sibling),Te=I(Te,Me.children||[]),Te.return=Pe,Pe=Te;break e}else{w(Pe,Te);break}else g(Pe,Te);Te=Te.sibling}Te=h4(Me,Pe.mode,at),Te.return=Pe,Pe=Te}return ie(Pe);case U:return zt=Me._init,Ei(Pe,Te,zt(Me._payload),at)}if(xe(Me))return It(Pe,Te,Me,at);if(W(Me))return Mt(Pe,Te,Me,at);kN(Pe,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,Te!==null&&Te.tag===6?(w(Pe,Te.sibling),Te=I(Te,Me),Te.return=Pe,Pe=Te):(w(Pe,Te),Te=d4(Me,Pe.mode,at),Te.return=Pe,Pe=Te),ie(Pe)):w(Pe,Te)}return Ei}var Xx=gq(!0),vq=gq(!1),CN=Um(null),EN=null,Jx=null,wD=null;function _D(){wD=Jx=EN=null}function SD(m){var g=CN.current;Rr(CN),m._currentValue=g}function kD(m,g,w){for(;m!==null;){var A=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,A!==null&&(A.childLanes|=g)):A!==null&&(A.childLanes&g)!==g&&(A.childLanes|=g),m===w)break;m=m.return}}function Qx(m,g){EN=m,wD=Jx=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&g)!==0&&(ca=!0),m.firstContext=null)}function Jl(m){var g=m._currentValue;if(wD!==m)if(m={context:m,memoizedValue:g,next:null},Jx===null){if(EN===null)throw Error(t(308));Jx=m,EN.dependencies={lanes:0,firstContext:m}}else Jx=Jx.next=m;return g}var Av=null;function CD(m){Av===null?Av=[m]:Av.push(m)}function yq(m,g,w,A){var I=g.interleaved;return I===null?(w.next=w,CD(g)):(w.next=I.next,I.next=w),g.interleaved=w,Lh(m,A)}function Lh(m,g){m.lanes|=g;var w=m.alternate;for(w!==null&&(w.lanes|=g),w=m,m=m.return;m!==null;)m.childLanes|=g,w=m.alternate,w!==null&&(w.childLanes|=g),w=m,m=m.return;return w.tag===3?w.stateNode:null}var Wm=!1;function ED(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xq(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Fh(m,g){return{eventTime:m,lane:g,tag:0,payload:null,callback:null,next:null}}function qm(m,g,w){var A=m.updateQueue;if(A===null)return null;if(A=A.shared,(Dn&2)!==0){var I=A.pending;return I===null?g.next=g:(g.next=I.next,I.next=g),A.pending=g,Lh(m,w)}return I=A.interleaved,I===null?(g.next=g,CD(A)):(g.next=I.next,I.next=g),A.interleaved=g,Lh(m,w)}function TN(m,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194240)!==0)){var A=g.lanes;A&=m.pendingLanes,w|=A,g.lanes=w,lt(m,w)}}function bq(m,g){var w=m.updateQueue,A=m.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var I=null,V=null;if(w=w.firstBaseUpdate,w!==null){do{var ie={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};V===null?I=V=ie:V=V.next=ie,w=w.next}while(w!==null);V===null?I=V=g:V=V.next=g}else I=V=g;w={baseState:A.baseState,firstBaseUpdate:I,lastBaseUpdate:V,shared:A.shared,effects:A.effects},m.updateQueue=w;return}m=w.lastBaseUpdate,m===null?w.firstBaseUpdate=g:m.next=g,w.lastBaseUpdate=g}function AN(m,g,w,A){var I=m.updateQueue;Wm=!1;var V=I.firstBaseUpdate,ie=I.lastBaseUpdate,ye=I.shared.pending;if(ye!==null){I.shared.pending=null;var ke=ye,Fe=ke.next;ke.next=null,ie===null?V=Fe:ie.next=Fe,ie=ke;var Je=m.alternate;Je!==null&&(Je=Je.updateQueue,ye=Je.lastBaseUpdate,ye!==ie&&(ye===null?Je.firstBaseUpdate=Fe:ye.next=Fe,Je.lastBaseUpdate=ke))}if(V!==null){var et=I.baseState;ie=0,Je=Fe=ke=null,ye=V;do{var Xe=ye.lane,St=ye.eventTime;if((A&Xe)===Xe){Je!==null&&(Je=Je.next={eventTime:St,lane:0,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null});e:{var It=m,Mt=ye;switch(Xe=g,St=w,Mt.tag){case 1:if(It=Mt.payload,typeof It=="function"){et=It.call(St,et,Xe);break e}et=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Mt.payload,Xe=typeof It=="function"?It.call(St,et,Xe):It,Xe==null)break e;et=se({},et,Xe);break e;case 2:Wm=!0}}ye.callback!==null&&ye.lane!==0&&(m.flags|=64,Xe=I.effects,Xe===null?I.effects=[ye]:Xe.push(ye))}else St={eventTime:St,lane:Xe,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},Je===null?(Fe=Je=St,ke=et):Je=Je.next=St,ie|=Xe;if(ye=ye.next,ye===null){if(ye=I.shared.pending,ye===null)break;Xe=ye,ye=Xe.next,Xe.next=null,I.lastBaseUpdate=Xe,I.shared.pending=null}}while(!0);if(Je===null&&(ke=et),I.baseState=ke,I.firstBaseUpdate=Fe,I.lastBaseUpdate=Je,g=I.shared.interleaved,g!==null){I=g;do ie|=I.lane,I=I.next;while(I!==g)}else V===null&&(I.shared.lanes=0);Pv|=ie,m.lanes=ie,m.memoizedState=et}}function wq(m,g,w){if(m=g.effects,g.effects=null,m!==null)for(g=0;g<m.length;g++){var A=m[g],I=A.callback;if(I!==null){if(A.callback=null,A=w,typeof I!="function")throw Error(t(191,I));I.call(A)}}}var WS={},dd=Um(WS),qS=Um(WS),GS=Um(WS);function Nv(m){if(m===WS)throw Error(t(174));return m}function TD(m,g){switch(wr(GS,g),wr(qS,m),wr(dd,WS),m=g.nodeType,m){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Bt(null,"");break;default:m=m===8?g.parentNode:g,g=m.namespaceURI||null,m=m.tagName,g=Bt(g,m)}Rr(dd),wr(dd,g)}function Zx(){Rr(dd),Rr(qS),Rr(GS)}function _q(m){Nv(GS.current);var g=Nv(dd.current),w=Bt(g,m.type);g!==w&&(wr(qS,m),wr(dd,w))}function AD(m){qS.current===m&&(Rr(dd),Rr(qS))}var ei=Um(0);function NN(m){for(var g=m;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var ND=[];function jD(){for(var m=0;m<ND.length;m++)ND[m]._workInProgressVersionPrimary=null;ND.length=0}var jN=T.ReactCurrentDispatcher,PD=T.ReactCurrentBatchConfig,jv=0,ti=null,Xi=null,ds=null,PN=!1,KS=!1,YS=0,S_e=0;function no(){throw Error(t(321))}function ID(m,g){if(g===null)return!1;for(var w=0;w<g.length&&w<m.length;w++)if(!Vc(m[w],g[w]))return!1;return!0}function OD(m,g,w,A,I,V){if(jv=V,ti=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,jN.current=m===null||m.memoizedState===null?T_e:A_e,m=w(A,I),KS){V=0;do{if(KS=!1,YS=0,25<=V)throw Error(t(301));V+=1,ds=Xi=null,g.updateQueue=null,jN.current=N_e,m=w(A,I)}while(KS)}if(jN.current=RN,g=Xi!==null&&Xi.next!==null,jv=0,ds=Xi=ti=null,PN=!1,g)throw Error(t(300));return m}function RD(){var m=YS!==0;return YS=0,m}function hd(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?ti.memoizedState=ds=m:ds=ds.next=m,ds}function Ql(){if(Xi===null){var m=ti.alternate;m=m!==null?m.memoizedState:null}else m=Xi.next;var g=ds===null?ti.memoizedState:ds.next;if(g!==null)ds=g,Xi=m;else{if(m===null)throw Error(t(310));Xi=m,m={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},ds===null?ti.memoizedState=ds=m:ds=ds.next=m}return ds}function XS(m,g){return typeof g=="function"?g(m):g}function MD(m){var g=Ql(),w=g.queue;if(w===null)throw Error(t(311));w.lastRenderedReducer=m;var A=Xi,I=A.baseQueue,V=w.pending;if(V!==null){if(I!==null){var ie=I.next;I.next=V.next,V.next=ie}A.baseQueue=I=V,w.pending=null}if(I!==null){V=I.next,A=A.baseState;var ye=ie=null,ke=null,Fe=V;do{var Je=Fe.lane;if((jv&Je)===Je)ke!==null&&(ke=ke.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),A=Fe.hasEagerState?Fe.eagerState:m(A,Fe.action);else{var et={lane:Je,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};ke===null?(ye=ke=et,ie=A):ke=ke.next=et,ti.lanes|=Je,Pv|=Je}Fe=Fe.next}while(Fe!==null&&Fe!==V);ke===null?ie=A:ke.next=ye,Vc(A,g.memoizedState)||(ca=!0),g.memoizedState=A,g.baseState=ie,g.baseQueue=ke,w.lastRenderedState=A}if(m=w.interleaved,m!==null){I=m;do V=I.lane,ti.lanes|=V,Pv|=V,I=I.next;while(I!==m)}else I===null&&(w.lanes=0);return[g.memoizedState,w.dispatch]}function DD(m){var g=Ql(),w=g.queue;if(w===null)throw Error(t(311));w.lastRenderedReducer=m;var A=w.dispatch,I=w.pending,V=g.memoizedState;if(I!==null){w.pending=null;var ie=I=I.next;do V=m(V,ie.action),ie=ie.next;while(ie!==I);Vc(V,g.memoizedState)||(ca=!0),g.memoizedState=V,g.baseQueue===null&&(g.baseState=V),w.lastRenderedState=V}return[V,A]}function Sq(){}function kq(m,g){var w=ti,A=Ql(),I=g(),V=!Vc(A.memoizedState,I);if(V&&(A.memoizedState=I,ca=!0),A=A.queue,LD(Tq.bind(null,w,A,m),[m]),A.getSnapshot!==g||V||ds!==null&&ds.memoizedState.tag&1){if(w.flags|=2048,JS(9,Eq.bind(null,w,A,I,g),void 0,null),hs===null)throw Error(t(349));(jv&30)!==0||Cq(w,g,I)}return I}function Cq(m,g,w){m.flags|=16384,m={getSnapshot:g,value:w},g=ti.updateQueue,g===null?(g={lastEffect:null,stores:null},ti.updateQueue=g,g.stores=[m]):(w=g.stores,w===null?g.stores=[m]:w.push(m))}function Eq(m,g,w,A){g.value=w,g.getSnapshot=A,Aq(g)&&Nq(m)}function Tq(m,g,w){return w(function(){Aq(g)&&Nq(m)})}function Aq(m){var g=m.getSnapshot;m=m.value;try{var w=g();return!Vc(m,w)}catch{return!0}}function Nq(m){var g=Lh(m,1);g!==null&&qc(g,m,1,-1)}function jq(m){var g=hd();return typeof m=="function"&&(m=m()),g.memoizedState=g.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:XS,lastRenderedState:m},g.queue=m,m=m.dispatch=E_e.bind(null,ti,m),[g.memoizedState,m]}function JS(m,g,w,A){return m={tag:m,create:g,destroy:w,deps:A,next:null},g=ti.updateQueue,g===null?(g={lastEffect:null,stores:null},ti.updateQueue=g,g.lastEffect=m.next=m):(w=g.lastEffect,w===null?g.lastEffect=m.next=m:(A=w.next,w.next=m,m.next=A,g.lastEffect=m)),m}function Pq(){return Ql().memoizedState}function IN(m,g,w,A){var I=hd();ti.flags|=m,I.memoizedState=JS(1|g,w,void 0,A===void 0?null:A)}function ON(m,g,w,A){var I=Ql();A=A===void 0?null:A;var V=void 0;if(Xi!==null){var ie=Xi.memoizedState;if(V=ie.destroy,A!==null&&ID(A,ie.deps)){I.memoizedState=JS(g,w,V,A);return}}ti.flags|=m,I.memoizedState=JS(1|g,w,V,A)}function Iq(m,g){return IN(8390656,8,m,g)}function LD(m,g){return ON(2048,8,m,g)}function Oq(m,g){return ON(4,2,m,g)}function Rq(m,g){return ON(4,4,m,g)}function Mq(m,g){if(typeof g=="function")return m=m(),g(m),function(){g(null)};if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function Dq(m,g,w){return w=w!=null?w.concat([m]):null,ON(4,4,Mq.bind(null,g,m),w)}function FD(){}function Lq(m,g){var w=Ql();g=g===void 0?null:g;var A=w.memoizedState;return A!==null&&g!==null&&ID(g,A[1])?A[0]:(w.memoizedState=[m,g],m)}function Fq(m,g){var w=Ql();g=g===void 0?null:g;var A=w.memoizedState;return A!==null&&g!==null&&ID(g,A[1])?A[0]:(m=m(),w.memoizedState=[m,g],m)}function Bq(m,g,w){return(jv&21)===0?(m.baseState&&(m.baseState=!1,ca=!0),m.memoizedState=w):(Vc(w,g)||(w=me(),ti.lanes|=w,Pv|=w,m.baseState=!0),g)}function k_e(m,g){var w=ft;ft=w!==0&&4>w?w:4,m(!0);var A=PD.transition;PD.transition={};try{m(!1),g()}finally{ft=w,PD.transition=A}}function $q(){return Ql().memoizedState}function C_e(m,g,w){var A=Xm(m);if(w={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null},Vq(m))Uq(g,w);else if(w=yq(m,g,w,A),w!==null){var I=To();qc(w,m,A,I),zq(w,g,A)}}function E_e(m,g,w){var A=Xm(m),I={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null};if(Vq(m))Uq(g,I);else{var V=m.alternate;if(m.lanes===0&&(V===null||V.lanes===0)&&(V=g.lastRenderedReducer,V!==null))try{var ie=g.lastRenderedState,ye=V(ie,w);if(I.hasEagerState=!0,I.eagerState=ye,Vc(ye,ie)){var ke=g.interleaved;ke===null?(I.next=I,CD(g)):(I.next=ke.next,ke.next=I),g.interleaved=I;return}}catch{}finally{}w=yq(m,g,I,A),w!==null&&(I=To(),qc(w,m,A,I),zq(w,g,A))}}function Vq(m){var g=m.alternate;return m===ti||g!==null&&g===ti}function Uq(m,g){KS=PN=!0;var w=m.pending;w===null?g.next=g:(g.next=w.next,w.next=g),m.pending=g}function zq(m,g,w){if((w&4194240)!==0){var A=g.lanes;A&=m.pendingLanes,w|=A,g.lanes=w,lt(m,w)}}var RN={readContext:Jl,useCallback:no,useContext:no,useEffect:no,useImperativeHandle:no,useInsertionEffect:no,useLayoutEffect:no,useMemo:no,useReducer:no,useRef:no,useState:no,useDebugValue:no,useDeferredValue:no,useTransition:no,useMutableSource:no,useSyncExternalStore:no,useId:no,unstable_isNewReconciler:!1},T_e={readContext:Jl,useCallback:function(m,g){return hd().memoizedState=[m,g===void 0?null:g],m},useContext:Jl,useEffect:Iq,useImperativeHandle:function(m,g,w){return w=w!=null?w.concat([m]):null,IN(4194308,4,Mq.bind(null,g,m),w)},useLayoutEffect:function(m,g){return IN(4194308,4,m,g)},useInsertionEffect:function(m,g){return IN(4,2,m,g)},useMemo:function(m,g){var w=hd();return g=g===void 0?null:g,m=m(),w.memoizedState=[m,g],m},useReducer:function(m,g,w){var A=hd();return g=w!==void 0?w(g):g,A.memoizedState=A.baseState=g,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:g},A.queue=m,m=m.dispatch=C_e.bind(null,ti,m),[A.memoizedState,m]},useRef:function(m){var g=hd();return m={current:m},g.memoizedState=m},useState:jq,useDebugValue:FD,useDeferredValue:function(m){return hd().memoizedState=m},useTransition:function(){var m=jq(!1),g=m[0];return m=k_e.bind(null,m[1]),hd().memoizedState=m,[g,m]},useMutableSource:function(){},useSyncExternalStore:function(m,g,w){var A=ti,I=hd();if(Hr){if(w===void 0)throw Error(t(407));w=w()}else{if(w=g(),hs===null)throw Error(t(349));(jv&30)!==0||Cq(A,g,w)}I.memoizedState=w;var V={value:w,getSnapshot:g};return I.queue=V,Iq(Tq.bind(null,A,V,m),[m]),A.flags|=2048,JS(9,Eq.bind(null,A,V,w,g),void 0,null),w},useId:function(){var m=hd(),g=hs.identifierPrefix;if(Hr){var w=Dh,A=Mh;w=(A&~(1<<32-Yi(A)-1)).toString(32)+w,g=":"+g+"R"+w,w=YS++,0<w&&(g+="H"+w.toString(32)),g+=":"}else w=S_e++,g=":"+g+"r"+w.toString(32)+":";return m.memoizedState=g},unstable_isNewReconciler:!1},A_e={readContext:Jl,useCallback:Lq,useContext:Jl,useEffect:LD,useImperativeHandle:Dq,useInsertionEffect:Oq,useLayoutEffect:Rq,useMemo:Fq,useReducer:MD,useRef:Pq,useState:function(){return MD(XS)},useDebugValue:FD,useDeferredValue:function(m){var g=Ql();return Bq(g,Xi.memoizedState,m)},useTransition:function(){var m=MD(XS)[0],g=Ql().memoizedState;return[m,g]},useMutableSource:Sq,useSyncExternalStore:kq,useId:$q,unstable_isNewReconciler:!1},N_e={readContext:Jl,useCallback:Lq,useContext:Jl,useEffect:LD,useImperativeHandle:Dq,useInsertionEffect:Oq,useLayoutEffect:Rq,useMemo:Fq,useReducer:DD,useRef:Pq,useState:function(){return DD(XS)},useDebugValue:FD,useDeferredValue:function(m){var g=Ql();return Xi===null?g.memoizedState=m:Bq(g,Xi.memoizedState,m)},useTransition:function(){var m=DD(XS)[0],g=Ql().memoizedState;return[m,g]},useMutableSource:Sq,useSyncExternalStore:kq,useId:$q,unstable_isNewReconciler:!1};function zc(m,g){if(m&&m.defaultProps){g=se({},g),m=m.defaultProps;for(var w in m)g[w]===void 0&&(g[w]=m[w]);return g}return g}function BD(m,g,w,A){g=m.memoizedState,w=w(A,g),w=w==null?g:se({},g,w),m.memoizedState=w,m.lanes===0&&(m.updateQueue.baseState=w)}var MN={isMounted:function(m){return(m=m._reactInternals)?Mc(m)===m:!1},enqueueSetState:function(m,g,w){m=m._reactInternals;var A=To(),I=Xm(m),V=Fh(A,I);V.payload=g,w!=null&&(V.callback=w),g=qm(m,V,I),g!==null&&(qc(g,m,I,A),TN(g,m,I))},enqueueReplaceState:function(m,g,w){m=m._reactInternals;var A=To(),I=Xm(m),V=Fh(A,I);V.tag=1,V.payload=g,w!=null&&(V.callback=w),g=qm(m,V,I),g!==null&&(qc(g,m,I,A),TN(g,m,I))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var w=To(),A=Xm(m),I=Fh(w,A);I.tag=2,g!=null&&(I.callback=g),g=qm(m,I,A),g!==null&&(qc(g,m,A,w),TN(g,m,A))}};function Hq(m,g,w,A,I,V,ie){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(A,V,ie):g.prototype&&g.prototype.isPureReactComponent?!LS(w,A)||!LS(I,V):!0}function Wq(m,g,w){var A=!1,I=zm,V=g.contextType;return typeof V=="object"&&V!==null?V=Jl(V):(I=la(g)?Cv:to.current,A=g.contextTypes,V=(A=A!=null)?qx(m,I):zm),g=new g(w,V),m.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=MN,m.stateNode=g,g._reactInternals=m,A&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=I,m.__reactInternalMemoizedMaskedChildContext=V),g}function qq(m,g,w,A){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,A),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,A),g.state!==m&&MN.enqueueReplaceState(g,g.state,null)}function $D(m,g,w,A){var I=m.stateNode;I.props=w,I.state=m.memoizedState,I.refs={},ED(m);var V=g.contextType;typeof V=="object"&&V!==null?I.context=Jl(V):(V=la(g)?Cv:to.current,I.context=qx(m,V)),I.state=m.memoizedState,V=g.getDerivedStateFromProps,typeof V=="function"&&(BD(m,g,V,w),I.state=m.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(g=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),g!==I.state&&MN.enqueueReplaceState(I,I.state,null),AN(m,w,I,A),I.state=m.memoizedState),typeof I.componentDidMount=="function"&&(m.flags|=4194308)}function eb(m,g){try{var w="",A=g;do w+=pe(A),A=A.return;while(A);var I=w}catch(V){I=`
Error generating stack: `+V.message+`
`+V.stack}return{value:m,source:g,stack:I,digest:null}}function VD(m,g,w){return{value:m,source:null,stack:w??null,digest:g??null}}function UD(m,g){try{console.error(g.value)}catch(w){setTimeout(function(){throw w})}}var j_e=typeof WeakMap=="function"?WeakMap:Map;function Gq(m,g,w){w=Fh(-1,w),w.tag=3,w.payload={element:null};var A=g.value;return w.callback=function(){UN||(UN=!0,r4=A),UD(m,g)},w}function Kq(m,g,w){w=Fh(-1,w),w.tag=3;var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var I=g.value;w.payload=function(){return A(I)},w.callback=function(){UD(m,g)}}var V=m.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(w.callback=function(){UD(m,g),typeof A!="function"&&(Km===null?Km=new Set([this]):Km.add(this));var ie=g.stack;this.componentDidCatch(g.value,{componentStack:ie!==null?ie:""})}),w}function Yq(m,g,w){var A=m.pingCache;if(A===null){A=m.pingCache=new j_e;var I=new Set;A.set(g,I)}else I=A.get(g),I===void 0&&(I=new Set,A.set(g,I));I.has(w)||(I.add(w),m=H_e.bind(null,m,g,w),g.then(m,m))}function Xq(m){do{var g;if((g=m.tag===13)&&(g=m.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return m;m=m.return}while(m!==null);return null}function Jq(m,g,w,A,I){return(m.mode&1)===0?(m===g?m.flags|=65536:(m.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(g=Fh(-1,1),g.tag=2,qm(w,g,1))),w.lanes|=1),m):(m.flags|=65536,m.lanes=I,m)}var P_e=T.ReactCurrentOwner,ca=!1;function Eo(m,g,w,A){g.child=m===null?vq(g,null,w,A):Xx(g,m.child,w,A)}function Qq(m,g,w,A,I){w=w.render;var V=g.ref;return Qx(g,I),A=OD(m,g,w,A,V,I),w=RD(),m!==null&&!ca?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~I,Bh(m,g,I)):(Hr&&w&&gD(g),g.flags|=1,Eo(m,g,A,I),g.child)}function Zq(m,g,w,A,I){if(m===null){var V=w.type;return typeof V=="function"&&!u4(V)&&V.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(g.tag=15,g.type=V,eG(m,g,V,A,I)):(m=KN(w.type,null,A,g,g.mode,I),m.ref=g.ref,m.return=g,g.child=m)}if(V=m.child,(m.lanes&I)===0){var ie=V.memoizedProps;if(w=w.compare,w=w!==null?w:LS,w(ie,A)&&m.ref===g.ref)return Bh(m,g,I)}return g.flags|=1,m=Qm(V,A),m.ref=g.ref,m.return=g,g.child=m}function eG(m,g,w,A,I){if(m!==null){var V=m.memoizedProps;if(LS(V,A)&&m.ref===g.ref)if(ca=!1,g.pendingProps=A=V,(m.lanes&I)!==0)(m.flags&131072)!==0&&(ca=!0);else return g.lanes=m.lanes,Bh(m,g,I)}return zD(m,g,w,A,I)}function tG(m,g,w){var A=g.pendingProps,I=A.children,V=m!==null?m.memoizedState:null;if(A.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(nb,Qa),Qa|=w;else{if((w&1073741824)===0)return m=V!==null?V.baseLanes|w:w,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:m,cachePool:null,transitions:null},g.updateQueue=null,wr(nb,Qa),Qa|=m,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=V!==null?V.baseLanes:w,wr(nb,Qa),Qa|=A}else V!==null?(A=V.baseLanes|w,g.memoizedState=null):A=w,wr(nb,Qa),Qa|=A;return Eo(m,g,I,w),g.child}function nG(m,g){var w=g.ref;(m===null&&w!==null||m!==null&&m.ref!==w)&&(g.flags|=512,g.flags|=2097152)}function zD(m,g,w,A,I){var V=la(w)?Cv:to.current;return V=qx(g,V),Qx(g,I),w=OD(m,g,w,A,V,I),A=RD(),m!==null&&!ca?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~I,Bh(m,g,I)):(Hr&&A&&gD(g),g.flags|=1,Eo(m,g,w,I),g.child)}function rG(m,g,w,A,I){if(la(w)){var V=!0;xN(g)}else V=!1;if(Qx(g,I),g.stateNode===null)LN(m,g),Wq(g,w,A),$D(g,w,A,I),A=!0;else if(m===null){var ie=g.stateNode,ye=g.memoizedProps;ie.props=ye;var ke=ie.context,Fe=w.contextType;typeof Fe=="object"&&Fe!==null?Fe=Jl(Fe):(Fe=la(w)?Cv:to.current,Fe=qx(g,Fe));var Je=w.getDerivedStateFromProps,et=typeof Je=="function"||typeof ie.getSnapshotBeforeUpdate=="function";et||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ye!==A||ke!==Fe)&&qq(g,ie,A,Fe),Wm=!1;var Xe=g.memoizedState;ie.state=Xe,AN(g,A,ie,I),ke=g.memoizedState,ye!==A||Xe!==ke||aa.current||Wm?(typeof Je=="function"&&(BD(g,w,Je,A),ke=g.memoizedState),(ye=Wm||Hq(g,w,ye,A,Xe,ke,Fe))?(et||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=A,g.memoizedState=ke),ie.props=A,ie.state=ke,ie.context=Fe,A=ye):(typeof ie.componentDidMount=="function"&&(g.flags|=4194308),A=!1)}else{ie=g.stateNode,xq(m,g),ye=g.memoizedProps,Fe=g.type===g.elementType?ye:zc(g.type,ye),ie.props=Fe,et=g.pendingProps,Xe=ie.context,ke=w.contextType,typeof ke=="object"&&ke!==null?ke=Jl(ke):(ke=la(w)?Cv:to.current,ke=qx(g,ke));var St=w.getDerivedStateFromProps;(Je=typeof St=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ye!==et||Xe!==ke)&&qq(g,ie,A,ke),Wm=!1,Xe=g.memoizedState,ie.state=Xe,AN(g,A,ie,I);var It=g.memoizedState;ye!==et||Xe!==It||aa.current||Wm?(typeof St=="function"&&(BD(g,w,St,A),It=g.memoizedState),(Fe=Wm||Hq(g,w,Fe,A,Xe,It,ke)||!1)?(Je||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(A,It,ke),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(A,It,ke)),typeof ie.componentDidUpdate=="function"&&(g.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ie.componentDidUpdate!="function"||ye===m.memoizedProps&&Xe===m.memoizedState||(g.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ye===m.memoizedProps&&Xe===m.memoizedState||(g.flags|=1024),g.memoizedProps=A,g.memoizedState=It),ie.props=A,ie.state=It,ie.context=ke,A=Fe):(typeof ie.componentDidUpdate!="function"||ye===m.memoizedProps&&Xe===m.memoizedState||(g.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ye===m.memoizedProps&&Xe===m.memoizedState||(g.flags|=1024),A=!1)}return HD(m,g,w,A,V,I)}function HD(m,g,w,A,I,V){nG(m,g);var ie=(g.flags&128)!==0;if(!A&&!ie)return I&&lq(g,w,!1),Bh(m,g,V);A=g.stateNode,P_e.current=g;var ye=ie&&typeof w.getDerivedStateFromError!="function"?null:A.render();return g.flags|=1,m!==null&&ie?(g.child=Xx(g,m.child,null,V),g.child=Xx(g,null,ye,V)):Eo(m,g,ye,V),g.memoizedState=A.state,I&&lq(g,w,!0),g.child}function iG(m){var g=m.stateNode;g.pendingContext?oq(m,g.pendingContext,g.pendingContext!==g.context):g.context&&oq(m,g.context,!1),TD(m,g.containerInfo)}function sG(m,g,w,A,I){return Yx(),bD(I),g.flags|=256,Eo(m,g,w,A),g.child}var WD={dehydrated:null,treeContext:null,retryLane:0};function qD(m){return{baseLanes:m,cachePool:null,transitions:null}}function oG(m,g,w){var A=g.pendingProps,I=ei.current,V=!1,ie=(g.flags&128)!==0,ye;if((ye=ie)||(ye=m!==null&&m.memoizedState===null?!1:(I&2)!==0),ye?(V=!0,g.flags&=-129):(m===null||m.memoizedState!==null)&&(I|=1),wr(ei,I&1),m===null)return xD(g),m=g.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((g.mode&1)===0?g.lanes=1:m.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(ie=A.children,m=A.fallback,V?(A=g.mode,V=g.child,ie={mode:"hidden",children:ie},(A&1)===0&&V!==null?(V.childLanes=0,V.pendingProps=ie):V=YN(ie,A,0,null),m=Mv(m,A,w,null),V.return=g,m.return=g,V.sibling=m,g.child=V,g.child.memoizedState=qD(w),g.memoizedState=WD,m):GD(g,ie));if(I=m.memoizedState,I!==null&&(ye=I.dehydrated,ye!==null))return I_e(m,g,ie,A,ye,I,w);if(V){V=A.fallback,ie=g.mode,I=m.child,ye=I.sibling;var ke={mode:"hidden",children:A.children};return(ie&1)===0&&g.child!==I?(A=g.child,A.childLanes=0,A.pendingProps=ke,g.deletions=null):(A=Qm(I,ke),A.subtreeFlags=I.subtreeFlags&14680064),ye!==null?V=Qm(ye,V):(V=Mv(V,ie,w,null),V.flags|=2),V.return=g,A.return=g,A.sibling=V,g.child=A,A=V,V=g.child,ie=m.child.memoizedState,ie=ie===null?qD(w):{baseLanes:ie.baseLanes|w,cachePool:null,transitions:ie.transitions},V.memoizedState=ie,V.childLanes=m.childLanes&~w,g.memoizedState=WD,A}return V=m.child,m=V.sibling,A=Qm(V,{mode:"visible",children:A.children}),(g.mode&1)===0&&(A.lanes=w),A.return=g,A.sibling=null,m!==null&&(w=g.deletions,w===null?(g.deletions=[m],g.flags|=16):w.push(m)),g.child=A,g.memoizedState=null,A}function GD(m,g){return g=YN({mode:"visible",children:g},m.mode,0,null),g.return=m,m.child=g}function DN(m,g,w,A){return A!==null&&bD(A),Xx(g,m.child,null,w),m=GD(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function I_e(m,g,w,A,I,V,ie){if(w)return g.flags&256?(g.flags&=-257,A=VD(Error(t(422))),DN(m,g,ie,A)):g.memoizedState!==null?(g.child=m.child,g.flags|=128,null):(V=A.fallback,I=g.mode,A=YN({mode:"visible",children:A.children},I,0,null),V=Mv(V,I,ie,null),V.flags|=2,A.return=g,V.return=g,A.sibling=V,g.child=A,(g.mode&1)!==0&&Xx(g,m.child,null,ie),g.child.memoizedState=qD(ie),g.memoizedState=WD,V);if((g.mode&1)===0)return DN(m,g,ie,null);if(I.data==="$!"){if(A=I.nextSibling&&I.nextSibling.dataset,A)var ye=A.dgst;return A=ye,V=Error(t(419)),A=VD(V,A,void 0),DN(m,g,ie,A)}if(ye=(ie&m.childLanes)!==0,ca||ye){if(A=hs,A!==null){switch(ie&-ie){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=(I&(A.suspendedLanes|ie))!==0?0:I,I!==0&&I!==V.retryLane&&(V.retryLane=I,Lh(m,I),qc(A,m,I,-1))}return c4(),A=VD(Error(t(421))),DN(m,g,ie,A)}return I.data==="$?"?(g.flags|=128,g.child=m.child,g=W_e.bind(null,m),I._reactRetry=g,null):(m=V.treeContext,Ja=Vm(I.nextSibling),Xa=g,Hr=!0,Uc=null,m!==null&&(Yl[Xl++]=Mh,Yl[Xl++]=Dh,Yl[Xl++]=Ev,Mh=m.id,Dh=m.overflow,Ev=g),g=GD(g,A.children),g.flags|=4096,g)}function aG(m,g,w){m.lanes|=g;var A=m.alternate;A!==null&&(A.lanes|=g),kD(m.return,g,w)}function KD(m,g,w,A,I){var V=m.memoizedState;V===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:I}:(V.isBackwards=g,V.rendering=null,V.renderingStartTime=0,V.last=A,V.tail=w,V.tailMode=I)}function lG(m,g,w){var A=g.pendingProps,I=A.revealOrder,V=A.tail;if(Eo(m,g,A.children,w),A=ei.current,(A&2)!==0)A=A&1|2,g.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&aG(m,w,g);else if(m.tag===19)aG(m,w,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}A&=1}if(wr(ei,A),(g.mode&1)===0)g.memoizedState=null;else switch(I){case"forwards":for(w=g.child,I=null;w!==null;)m=w.alternate,m!==null&&NN(m)===null&&(I=w),w=w.sibling;w=I,w===null?(I=g.child,g.child=null):(I=w.sibling,w.sibling=null),KD(g,!1,I,w,V);break;case"backwards":for(w=null,I=g.child,g.child=null;I!==null;){if(m=I.alternate,m!==null&&NN(m)===null){g.child=I;break}m=I.sibling,I.sibling=w,w=I,I=m}KD(g,!0,w,null,V);break;case"together":KD(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function LN(m,g){(g.mode&1)===0&&m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2)}function Bh(m,g,w){if(m!==null&&(g.dependencies=m.dependencies),Pv|=g.lanes,(w&g.childLanes)===0)return null;if(m!==null&&g.child!==m.child)throw Error(t(153));if(g.child!==null){for(m=g.child,w=Qm(m,m.pendingProps),g.child=w,w.return=g;m.sibling!==null;)m=m.sibling,w=w.sibling=Qm(m,m.pendingProps),w.return=g;w.sibling=null}return g.child}function O_e(m,g,w){switch(g.tag){case 3:iG(g),Yx();break;case 5:_q(g);break;case 1:la(g.type)&&xN(g);break;case 4:TD(g,g.stateNode.containerInfo);break;case 10:var A=g.type._context,I=g.memoizedProps.value;wr(CN,A._currentValue),A._currentValue=I;break;case 13:if(A=g.memoizedState,A!==null)return A.dehydrated!==null?(wr(ei,ei.current&1),g.flags|=128,null):(w&g.child.childLanes)!==0?oG(m,g,w):(wr(ei,ei.current&1),m=Bh(m,g,w),m!==null?m.sibling:null);wr(ei,ei.current&1);break;case 19:if(A=(w&g.childLanes)!==0,(m.flags&128)!==0){if(A)return lG(m,g,w);g.flags|=128}if(I=g.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),wr(ei,ei.current),A)break;return null;case 22:case 23:return g.lanes=0,tG(m,g,w)}return Bh(m,g,w)}var cG,YD,uG,dG;cG=function(m,g){for(var w=g.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},YD=function(){},uG=function(m,g,w,A){var I=m.memoizedProps;if(I!==A){m=g.stateNode,Nv(dd.current);var V=null;switch(w){case"input":I=he(m,I),A=he(m,A),V=[];break;case"select":I=se({},I,{value:void 0}),A=se({},A,{value:void 0}),V=[];break;case"textarea":I=Oe(m,I),A=Oe(m,A),V=[];break;default:typeof I.onClick!="function"&&typeof A.onClick=="function"&&(m.onclick=gN)}Gi(w,A);var ie;w=null;for(Fe in I)if(!A.hasOwnProperty(Fe)&&I.hasOwnProperty(Fe)&&I[Fe]!=null)if(Fe==="style"){var ye=I[Fe];for(ie in ye)ye.hasOwnProperty(ie)&&(w||(w={}),w[ie]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(i.hasOwnProperty(Fe)?V||(V=[]):(V=V||[]).push(Fe,null));for(Fe in A){var ke=A[Fe];if(ye=I!=null?I[Fe]:void 0,A.hasOwnProperty(Fe)&&ke!==ye&&(ke!=null||ye!=null))if(Fe==="style")if(ye){for(ie in ye)!ye.hasOwnProperty(ie)||ke&&ke.hasOwnProperty(ie)||(w||(w={}),w[ie]="");for(ie in ke)ke.hasOwnProperty(ie)&&ye[ie]!==ke[ie]&&(w||(w={}),w[ie]=ke[ie])}else w||(V||(V=[]),V.push(Fe,w)),w=ke;else Fe==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ye=ye?ye.__html:void 0,ke!=null&&ye!==ke&&(V=V||[]).push(Fe,ke)):Fe==="children"?typeof ke!="string"&&typeof ke!="number"||(V=V||[]).push(Fe,""+ke):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Fe)?(ke!=null&&Fe==="onScroll"&&Or("scroll",m),V||ye===ke||(V=[])):(V=V||[]).push(Fe,ke))}w&&(V=V||[]).push("style",w);var Fe=V;(g.updateQueue=Fe)&&(g.flags|=4)}},dG=function(m,g,w,A){w!==A&&(g.flags|=4)};function QS(m,g){if(!Hr)switch(m.tailMode){case"hidden":g=m.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?m.tail=null:w.sibling=null;break;case"collapsed":w=m.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:A.sibling=null}}function ro(m){var g=m.alternate!==null&&m.alternate.child===m.child,w=0,A=0;if(g)for(var I=m.child;I!==null;)w|=I.lanes|I.childLanes,A|=I.subtreeFlags&14680064,A|=I.flags&14680064,I.return=m,I=I.sibling;else for(I=m.child;I!==null;)w|=I.lanes|I.childLanes,A|=I.subtreeFlags,A|=I.flags,I.return=m,I=I.sibling;return m.subtreeFlags|=A,m.childLanes=w,g}function R_e(m,g,w){var A=g.pendingProps;switch(vD(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ro(g),null;case 1:return la(g.type)&&yN(),ro(g),null;case 3:return A=g.stateNode,Zx(),Rr(aa),Rr(to),jD(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(m===null||m.child===null)&&(SN(g)?g.flags|=4:m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Uc!==null&&(o4(Uc),Uc=null))),YD(m,g),ro(g),null;case 5:AD(g);var I=Nv(GS.current);if(w=g.type,m!==null&&g.stateNode!=null)uG(m,g,w,A,I),m.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!A){if(g.stateNode===null)throw Error(t(166));return ro(g),null}if(m=Nv(dd.current),SN(g)){A=g.stateNode,w=g.type;var V=g.memoizedProps;switch(A[ud]=g,A[US]=V,m=(g.mode&1)!==0,w){case"dialog":Or("cancel",A),Or("close",A);break;case"iframe":case"object":case"embed":Or("load",A);break;case"video":case"audio":for(I=0;I<BS.length;I++)Or(BS[I],A);break;case"source":Or("error",A);break;case"img":case"image":case"link":Or("error",A),Or("load",A);break;case"details":Or("toggle",A);break;case"input":Ee(A,V),Or("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!V.multiple},Or("invalid",A);break;case"textarea":qe(A,V),Or("invalid",A)}Gi(w,V),I=null;for(var ie in V)if(V.hasOwnProperty(ie)){var ye=V[ie];ie==="children"?typeof ye=="string"?A.textContent!==ye&&(V.suppressHydrationWarning!==!0&&pN(A.textContent,ye,m),I=["children",ye]):typeof ye=="number"&&A.textContent!==""+ye&&(V.suppressHydrationWarning!==!0&&pN(A.textContent,ye,m),I=["children",""+ye]):i.hasOwnProperty(ie)&&ye!=null&&ie==="onScroll"&&Or("scroll",A)}switch(w){case"input":ue(A),xt(A,V,!0);break;case"textarea":ue(A),Ye(A);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(A.onclick=gN)}A=I,g.updateQueue=A,A!==null&&(g.flags|=4)}else{ie=I.nodeType===9?I:I.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=ht(w)),m==="http://www.w3.org/1999/xhtml"?w==="script"?(m=ie.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof A.is=="string"?m=ie.createElement(w,{is:A.is}):(m=ie.createElement(w),w==="select"&&(ie=m,A.multiple?ie.multiple=!0:A.size&&(ie.size=A.size))):m=ie.createElementNS(m,w),m[ud]=g,m[US]=A,cG(m,g,!1,!1),g.stateNode=m;e:{switch(ie=Wa(w,A),w){case"dialog":Or("cancel",m),Or("close",m),I=A;break;case"iframe":case"object":case"embed":Or("load",m),I=A;break;case"video":case"audio":for(I=0;I<BS.length;I++)Or(BS[I],m);I=A;break;case"source":Or("error",m),I=A;break;case"img":case"image":case"link":Or("error",m),Or("load",m),I=A;break;case"details":Or("toggle",m),I=A;break;case"input":Ee(m,A),I=he(m,A),Or("invalid",m);break;case"option":I=A;break;case"select":m._wrapperState={wasMultiple:!!A.multiple},I=se({},A,{value:void 0}),Or("invalid",m);break;case"textarea":qe(m,A),I=Oe(m,A),Or("invalid",m);break;default:I=A}Gi(w,I),ye=I;for(V in ye)if(ye.hasOwnProperty(V)){var ke=ye[V];V==="style"?qi(m,ke):V==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ke!=null&&Pn(m,ke)):V==="children"?typeof ke=="string"?(w!=="textarea"||ke!=="")&&Hn(m,ke):typeof ke=="number"&&Hn(m,""+ke):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?ke!=null&&V==="onScroll"&&Or("scroll",m):ke!=null&&k(m,V,ke,ie))}switch(w){case"input":ue(m),xt(m,A,!1);break;case"textarea":ue(m),Ye(m);break;case"option":A.value!=null&&m.setAttribute("value",""+be(A.value));break;case"select":m.multiple=!!A.multiple,V=A.value,V!=null?Ne(m,!!A.multiple,V,!1):A.defaultValue!=null&&Ne(m,!!A.multiple,A.defaultValue,!0);break;default:typeof I.onClick=="function"&&(m.onclick=gN)}switch(w){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return ro(g),null;case 6:if(m&&g.stateNode!=null)dG(m,g,m.memoizedProps,A);else{if(typeof A!="string"&&g.stateNode===null)throw Error(t(166));if(w=Nv(GS.current),Nv(dd.current),SN(g)){if(A=g.stateNode,w=g.memoizedProps,A[ud]=g,(V=A.nodeValue!==w)&&(m=Xa,m!==null))switch(m.tag){case 3:pN(A.nodeValue,w,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&pN(A.nodeValue,w,(m.mode&1)!==0)}V&&(g.flags|=4)}else A=(w.nodeType===9?w:w.ownerDocument).createTextNode(A),A[ud]=g,g.stateNode=A}return ro(g),null;case 13:if(Rr(ei),A=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Hr&&Ja!==null&&(g.mode&1)!==0&&(g.flags&128)===0)mq(),Yx(),g.flags|=98560,V=!1;else if(V=SN(g),A!==null&&A.dehydrated!==null){if(m===null){if(!V)throw Error(t(318));if(V=g.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(t(317));V[ud]=g}else Yx(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ro(g),V=!1}else Uc!==null&&(o4(Uc),Uc=null),V=!0;if(!V)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=w,g):(A=A!==null,A!==(m!==null&&m.memoizedState!==null)&&A&&(g.child.flags|=8192,(g.mode&1)!==0&&(m===null||(ei.current&1)!==0?Ji===0&&(Ji=3):c4())),g.updateQueue!==null&&(g.flags|=4),ro(g),null);case 4:return Zx(),YD(m,g),m===null&&$S(g.stateNode.containerInfo),ro(g),null;case 10:return SD(g.type._context),ro(g),null;case 17:return la(g.type)&&yN(),ro(g),null;case 19:if(Rr(ei),V=g.memoizedState,V===null)return ro(g),null;if(A=(g.flags&128)!==0,ie=V.rendering,ie===null)if(A)QS(V,!1);else{if(Ji!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(ie=NN(m),ie!==null){for(g.flags|=128,QS(V,!1),A=ie.updateQueue,A!==null&&(g.updateQueue=A,g.flags|=4),g.subtreeFlags=0,A=w,w=g.child;w!==null;)V=w,m=A,V.flags&=14680066,ie=V.alternate,ie===null?(V.childLanes=0,V.lanes=m,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=ie.childLanes,V.lanes=ie.lanes,V.child=ie.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=ie.memoizedProps,V.memoizedState=ie.memoizedState,V.updateQueue=ie.updateQueue,V.type=ie.type,m=ie.dependencies,V.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),w=w.sibling;return wr(ei,ei.current&1|2),g.child}m=m.sibling}V.tail!==null&&hr()>rb&&(g.flags|=128,A=!0,QS(V,!1),g.lanes=4194304)}else{if(!A)if(m=NN(ie),m!==null){if(g.flags|=128,A=!0,w=m.updateQueue,w!==null&&(g.updateQueue=w,g.flags|=4),QS(V,!0),V.tail===null&&V.tailMode==="hidden"&&!ie.alternate&&!Hr)return ro(g),null}else 2*hr()-V.renderingStartTime>rb&&w!==1073741824&&(g.flags|=128,A=!0,QS(V,!1),g.lanes=4194304);V.isBackwards?(ie.sibling=g.child,g.child=ie):(w=V.last,w!==null?w.sibling=ie:g.child=ie,V.last=ie)}return V.tail!==null?(g=V.tail,V.rendering=g,V.tail=g.sibling,V.renderingStartTime=hr(),g.sibling=null,w=ei.current,wr(ei,A?w&1|2:w&1),g):(ro(g),null);case 22:case 23:return l4(),A=g.memoizedState!==null,m!==null&&m.memoizedState!==null!==A&&(g.flags|=8192),A&&(g.mode&1)!==0?(Qa&1073741824)!==0&&(ro(g),g.subtreeFlags&6&&(g.flags|=8192)):ro(g),null;case 24:return null;case 25:return null}throw Error(t(156,g.tag))}function M_e(m,g){switch(vD(g),g.tag){case 1:return la(g.type)&&yN(),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Zx(),Rr(aa),Rr(to),jD(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 5:return AD(g),null;case 13:if(Rr(ei),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(t(340));Yx()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return Rr(ei),null;case 4:return Zx(),null;case 10:return SD(g.type._context),null;case 22:case 23:return l4(),null;case 24:return null;default:return null}}var FN=!1,io=!1,D_e=typeof WeakSet=="function"?WeakSet:Set,At=null;function tb(m,g){var w=m.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(A){mi(m,g,A)}else w.current=null}function XD(m,g,w){try{w()}catch(A){mi(m,g,A)}}var hG=!1;function L_e(m,g){if(lD=Ya,m=HW(),eD(m)){if("selectionStart"in m)var w={start:m.selectionStart,end:m.selectionEnd};else e:{w=(w=m.ownerDocument)&&w.defaultView||window;var A=w.getSelection&&w.getSelection();if(A&&A.rangeCount!==0){w=A.anchorNode;var I=A.anchorOffset,V=A.focusNode;A=A.focusOffset;try{w.nodeType,V.nodeType}catch{w=null;break e}var ie=0,ye=-1,ke=-1,Fe=0,Je=0,et=m,Xe=null;t:for(;;){for(var St;et!==w||I!==0&&et.nodeType!==3||(ye=ie+I),et!==V||A!==0&&et.nodeType!==3||(ke=ie+A),et.nodeType===3&&(ie+=et.nodeValue.length),(St=et.firstChild)!==null;)Xe=et,et=St;for(;;){if(et===m)break t;if(Xe===w&&++Fe===I&&(ye=ie),Xe===V&&++Je===A&&(ke=ie),(St=et.nextSibling)!==null)break;et=Xe,Xe=et.parentNode}et=St}w=ye===-1||ke===-1?null:{start:ye,end:ke}}else w=null}w=w||{start:0,end:0}}else w=null;for(cD={focusedElem:m,selectionRange:w},Ya=!1,At=g;At!==null;)if(g=At,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,At=m;else for(;At!==null;){g=At;try{var It=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(It!==null){var Mt=It.memoizedProps,Ei=It.memoizedState,Pe=g.stateNode,Te=Pe.getSnapshotBeforeUpdate(g.elementType===g.type?Mt:zc(g.type,Mt),Ei);Pe.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var Me=g.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(at){mi(g,g.return,at)}if(m=g.sibling,m!==null){m.return=g.return,At=m;break}At=g.return}return It=hG,hG=!1,It}function ZS(m,g,w){var A=g.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var I=A=A.next;do{if((I.tag&m)===m){var V=I.destroy;I.destroy=void 0,V!==void 0&&XD(g,w,V)}I=I.next}while(I!==A)}}function BN(m,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&m)===m){var A=w.create;w.destroy=A()}w=w.next}while(w!==g)}}function JD(m){var g=m.ref;if(g!==null){var w=m.stateNode;switch(m.tag){case 5:m=w;break;default:m=w}typeof g=="function"?g(m):g.current=m}}function fG(m){var g=m.alternate;g!==null&&(m.alternate=null,fG(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&(delete g[ud],delete g[US],delete g[fD],delete g[x_e],delete g[b_e])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function mG(m){return m.tag===5||m.tag===3||m.tag===4}function pG(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||mG(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function QD(m,g,w){var A=m.tag;if(A===5||A===6)m=m.stateNode,g?w.nodeType===8?w.parentNode.insertBefore(m,g):w.insertBefore(m,g):(w.nodeType===8?(g=w.parentNode,g.insertBefore(m,w)):(g=w,g.appendChild(m)),w=w._reactRootContainer,w!=null||g.onclick!==null||(g.onclick=gN));else if(A!==4&&(m=m.child,m!==null))for(QD(m,g,w),m=m.sibling;m!==null;)QD(m,g,w),m=m.sibling}function ZD(m,g,w){var A=m.tag;if(A===5||A===6)m=m.stateNode,g?w.insertBefore(m,g):w.appendChild(m);else if(A!==4&&(m=m.child,m!==null))for(ZD(m,g,w),m=m.sibling;m!==null;)ZD(m,g,w),m=m.sibling}var Rs=null,Hc=!1;function Gm(m,g,w){for(w=w.child;w!==null;)gG(m,g,w),w=w.sibling}function gG(m,g,w){if(ko&&typeof ko.onCommitFiberUnmount=="function")try{ko.onCommitFiberUnmount(Ga,w)}catch{}switch(w.tag){case 5:io||tb(w,g);case 6:var A=Rs,I=Hc;Rs=null,Gm(m,g,w),Rs=A,Hc=I,Rs!==null&&(Hc?(m=Rs,w=w.stateNode,m.nodeType===8?m.parentNode.removeChild(w):m.removeChild(w)):Rs.removeChild(w.stateNode));break;case 18:Rs!==null&&(Hc?(m=Rs,w=w.stateNode,m.nodeType===8?hD(m.parentNode,w):m.nodeType===1&&hD(m,w),ad(m)):hD(Rs,w.stateNode));break;case 4:A=Rs,I=Hc,Rs=w.stateNode.containerInfo,Hc=!0,Gm(m,g,w),Rs=A,Hc=I;break;case 0:case 11:case 14:case 15:if(!io&&(A=w.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){I=A=A.next;do{var V=I,ie=V.destroy;V=V.tag,ie!==void 0&&((V&2)!==0||(V&4)!==0)&&XD(w,g,ie),I=I.next}while(I!==A)}Gm(m,g,w);break;case 1:if(!io&&(tb(w,g),A=w.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=w.memoizedProps,A.state=w.memoizedState,A.componentWillUnmount()}catch(ye){mi(w,g,ye)}Gm(m,g,w);break;case 21:Gm(m,g,w);break;case 22:w.mode&1?(io=(A=io)||w.memoizedState!==null,Gm(m,g,w),io=A):Gm(m,g,w);break;default:Gm(m,g,w)}}function vG(m){var g=m.updateQueue;if(g!==null){m.updateQueue=null;var w=m.stateNode;w===null&&(w=m.stateNode=new D_e),g.forEach(function(A){var I=q_e.bind(null,m,A);w.has(A)||(w.add(A),A.then(I,I))})}}function Wc(m,g){var w=g.deletions;if(w!==null)for(var A=0;A<w.length;A++){var I=w[A];try{var V=m,ie=g,ye=ie;e:for(;ye!==null;){switch(ye.tag){case 5:Rs=ye.stateNode,Hc=!1;break e;case 3:Rs=ye.stateNode.containerInfo,Hc=!0;break e;case 4:Rs=ye.stateNode.containerInfo,Hc=!0;break e}ye=ye.return}if(Rs===null)throw Error(t(160));gG(V,ie,I),Rs=null,Hc=!1;var ke=I.alternate;ke!==null&&(ke.return=null),I.return=null}catch(Fe){mi(I,g,Fe)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)yG(g,m),g=g.sibling}function yG(m,g){var w=m.alternate,A=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Wc(g,m),fd(m),A&4){try{ZS(3,m,m.return),BN(3,m)}catch(Mt){mi(m,m.return,Mt)}try{ZS(5,m,m.return)}catch(Mt){mi(m,m.return,Mt)}}break;case 1:Wc(g,m),fd(m),A&512&&w!==null&&tb(w,w.return);break;case 5:if(Wc(g,m),fd(m),A&512&&w!==null&&tb(w,w.return),m.flags&32){var I=m.stateNode;try{Hn(I,"")}catch(Mt){mi(m,m.return,Mt)}}if(A&4&&(I=m.stateNode,I!=null)){var V=m.memoizedProps,ie=w!==null?w.memoizedProps:V,ye=m.type,ke=m.updateQueue;if(m.updateQueue=null,ke!==null)try{ye==="input"&&V.type==="radio"&&V.name!=null&&Be(I,V),Wa(ye,ie);var Fe=Wa(ye,V);for(ie=0;ie<ke.length;ie+=2){var Je=ke[ie],et=ke[ie+1];Je==="style"?qi(I,et):Je==="dangerouslySetInnerHTML"?Pn(I,et):Je==="children"?Hn(I,et):k(I,Je,et,Fe)}switch(ye){case"input":vt(I,V);break;case"textarea":Ze(I,V);break;case"select":var Xe=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!V.multiple;var St=V.value;St!=null?Ne(I,!!V.multiple,St,!1):Xe!==!!V.multiple&&(V.defaultValue!=null?Ne(I,!!V.multiple,V.defaultValue,!0):Ne(I,!!V.multiple,V.multiple?[]:"",!1))}I[US]=V}catch(Mt){mi(m,m.return,Mt)}}break;case 6:if(Wc(g,m),fd(m),A&4){if(m.stateNode===null)throw Error(t(162));I=m.stateNode,V=m.memoizedProps;try{I.nodeValue=V}catch(Mt){mi(m,m.return,Mt)}}break;case 3:if(Wc(g,m),fd(m),A&4&&w!==null&&w.memoizedState.isDehydrated)try{ad(g.containerInfo)}catch(Mt){mi(m,m.return,Mt)}break;case 4:Wc(g,m),fd(m);break;case 13:Wc(g,m),fd(m),I=m.child,I.flags&8192&&(V=I.memoizedState!==null,I.stateNode.isHidden=V,!V||I.alternate!==null&&I.alternate.memoizedState!==null||(n4=hr())),A&4&&vG(m);break;case 22:if(Je=w!==null&&w.memoizedState!==null,m.mode&1?(io=(Fe=io)||Je,Wc(g,m),io=Fe):Wc(g,m),fd(m),A&8192){if(Fe=m.memoizedState!==null,(m.stateNode.isHidden=Fe)&&!Je&&(m.mode&1)!==0)for(At=m,Je=m.child;Je!==null;){for(et=At=Je;At!==null;){switch(Xe=At,St=Xe.child,Xe.tag){case 0:case 11:case 14:case 15:ZS(4,Xe,Xe.return);break;case 1:tb(Xe,Xe.return);var It=Xe.stateNode;if(typeof It.componentWillUnmount=="function"){A=Xe,w=Xe.return;try{g=A,It.props=g.memoizedProps,It.state=g.memoizedState,It.componentWillUnmount()}catch(Mt){mi(A,w,Mt)}}break;case 5:tb(Xe,Xe.return);break;case 22:if(Xe.memoizedState!==null){wG(et);continue}}St!==null?(St.return=Xe,At=St):wG(et)}Je=Je.sibling}e:for(Je=null,et=m;;){if(et.tag===5){if(Je===null){Je=et;try{I=et.stateNode,Fe?(V=I.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(ye=et.stateNode,ke=et.memoizedProps.style,ie=ke!=null&&ke.hasOwnProperty("display")?ke.display:null,ye.style.display=ui("display",ie))}catch(Mt){mi(m,m.return,Mt)}}}else if(et.tag===6){if(Je===null)try{et.stateNode.nodeValue=Fe?"":et.memoizedProps}catch(Mt){mi(m,m.return,Mt)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===m)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===m)break e;for(;et.sibling===null;){if(et.return===null||et.return===m)break e;Je===et&&(Je=null),et=et.return}Je===et&&(Je=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:Wc(g,m),fd(m),A&4&&vG(m);break;case 21:break;default:Wc(g,m),fd(m)}}function fd(m){var g=m.flags;if(g&2){try{e:{for(var w=m.return;w!==null;){if(mG(w)){var A=w;break e}w=w.return}throw Error(t(160))}switch(A.tag){case 5:var I=A.stateNode;A.flags&32&&(Hn(I,""),A.flags&=-33);var V=pG(m);ZD(m,V,I);break;case 3:case 4:var ie=A.stateNode.containerInfo,ye=pG(m);QD(m,ye,ie);break;default:throw Error(t(161))}}catch(ke){mi(m,m.return,ke)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function F_e(m,g,w){At=m,xG(m)}function xG(m,g,w){for(var A=(m.mode&1)!==0;At!==null;){var I=At,V=I.child;if(I.tag===22&&A){var ie=I.memoizedState!==null||FN;if(!ie){var ye=I.alternate,ke=ye!==null&&ye.memoizedState!==null||io;ye=FN;var Fe=io;if(FN=ie,(io=ke)&&!Fe)for(At=I;At!==null;)ie=At,ke=ie.child,ie.tag===22&&ie.memoizedState!==null?_G(I):ke!==null?(ke.return=ie,At=ke):_G(I);for(;V!==null;)At=V,xG(V),V=V.sibling;At=I,FN=ye,io=Fe}bG(m)}else(I.subtreeFlags&8772)!==0&&V!==null?(V.return=I,At=V):bG(m)}}function bG(m){for(;At!==null;){var g=At;if((g.flags&8772)!==0){var w=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:io||BN(5,g);break;case 1:var A=g.stateNode;if(g.flags&4&&!io)if(w===null)A.componentDidMount();else{var I=g.elementType===g.type?w.memoizedProps:zc(g.type,w.memoizedProps);A.componentDidUpdate(I,w.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var V=g.updateQueue;V!==null&&wq(g,V,A);break;case 3:var ie=g.updateQueue;if(ie!==null){if(w=null,g.child!==null)switch(g.child.tag){case 5:w=g.child.stateNode;break;case 1:w=g.child.stateNode}wq(g,ie,w)}break;case 5:var ye=g.stateNode;if(w===null&&g.flags&4){w=ye;var ke=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":ke.autoFocus&&w.focus();break;case"img":ke.src&&(w.src=ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Fe=g.alternate;if(Fe!==null){var Je=Fe.memoizedState;if(Je!==null){var et=Je.dehydrated;et!==null&&ad(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}io||g.flags&512&&JD(g)}catch(Xe){mi(g,g.return,Xe)}}if(g===m){At=null;break}if(w=g.sibling,w!==null){w.return=g.return,At=w;break}At=g.return}}function wG(m){for(;At!==null;){var g=At;if(g===m){At=null;break}var w=g.sibling;if(w!==null){w.return=g.return,At=w;break}At=g.return}}function _G(m){for(;At!==null;){var g=At;try{switch(g.tag){case 0:case 11:case 15:var w=g.return;try{BN(4,g)}catch(ke){mi(g,w,ke)}break;case 1:var A=g.stateNode;if(typeof A.componentDidMount=="function"){var I=g.return;try{A.componentDidMount()}catch(ke){mi(g,I,ke)}}var V=g.return;try{JD(g)}catch(ke){mi(g,V,ke)}break;case 5:var ie=g.return;try{JD(g)}catch(ke){mi(g,ie,ke)}}}catch(ke){mi(g,g.return,ke)}if(g===m){At=null;break}var ye=g.sibling;if(ye!==null){ye.return=g.return,At=ye;break}At=g.return}}var B_e=Math.ceil,$N=T.ReactCurrentDispatcher,e4=T.ReactCurrentOwner,Zl=T.ReactCurrentBatchConfig,Dn=0,hs=null,Mi=null,Ms=0,Qa=0,nb=Um(0),Ji=0,ek=null,Pv=0,VN=0,t4=0,tk=null,ua=null,n4=0,rb=1/0,$h=null,UN=!1,r4=null,Km=null,zN=!1,Ym=null,HN=0,nk=0,i4=null,WN=-1,qN=0;function To(){return(Dn&6)!==0?hr():WN!==-1?WN:WN=hr()}function Xm(m){return(m.mode&1)===0?1:(Dn&2)!==0&&Ms!==0?Ms&-Ms:__e.transition!==null?(qN===0&&(qN=me()),qN):(m=ft,m!==0||(m=window.event,m=m===void 0?16:TS(m.type)),m)}function qc(m,g,w,A){if(50<nk)throw nk=0,i4=null,Error(t(185));je(m,w,A),((Dn&2)===0||m!==hs)&&(m===hs&&((Dn&2)===0&&(VN|=w),Ji===4&&Jm(m,Ms)),da(m,A),w===1&&Dn===0&&(g.mode&1)===0&&(rb=hr()+500,bN&&Hm()))}function da(m,g){var w=m.callbackNode;Q(m,g);var A=id(m,m===hs?Ms:0);if(A===0)w!==null&&hv(w),m.callbackNode=null,m.callbackPriority=0;else if(g=A&-A,m.callbackPriority!==g){if(w!=null&&hv(w),g===1)m.tag===0?w_e(kG.bind(null,m)):cq(kG.bind(null,m)),v_e(function(){(Dn&6)===0&&Hm()}),w=null;else{switch(Yt(A)){case 1:w=Rm;break;case 4:w=Mm;break;case 16:w=nd;break;case 536870912:w=Dc;break;default:w=nd}w=IG(w,SG.bind(null,m))}m.callbackPriority=g,m.callbackNode=w}}function SG(m,g){if(WN=-1,qN=0,(Dn&6)!==0)throw Error(t(327));var w=m.callbackNode;if(ib()&&m.callbackNode!==w)return null;var A=id(m,m===hs?Ms:0);if(A===0)return null;if((A&30)!==0||(A&m.expiredLanes)!==0||g)g=GN(m,A);else{g=A;var I=Dn;Dn|=2;var V=EG();(hs!==m||Ms!==g)&&($h=null,rb=hr()+500,Ov(m,g));do try{U_e();break}catch(ye){CG(m,ye)}while(!0);_D(),$N.current=V,Dn=I,Mi!==null?g=0:(hs=null,Ms=0,g=Ji)}if(g!==0){if(g===2&&(I=le(m),I!==0&&(A=I,g=s4(m,I))),g===1)throw w=ek,Ov(m,0),Jm(m,A),da(m,hr()),w;if(g===6)Jm(m,A);else{if(I=m.current.alternate,(A&30)===0&&!$_e(I)&&(g=GN(m,A),g===2&&(V=le(m),V!==0&&(A=V,g=s4(m,V))),g===1))throw w=ek,Ov(m,0),Jm(m,A),da(m,hr()),w;switch(m.finishedWork=I,m.finishedLanes=A,g){case 0:case 1:throw Error(t(345));case 2:Rv(m,ua,$h);break;case 3:if(Jm(m,A),(A&130023424)===A&&(g=n4+500-hr(),10<g)){if(id(m,0)!==0)break;if(I=m.suspendedLanes,(I&A)!==A){To(),m.pingedLanes|=m.suspendedLanes&I;break}m.timeoutHandle=dD(Rv.bind(null,m,ua,$h),g);break}Rv(m,ua,$h);break;case 4:if(Jm(m,A),(A&4194240)===A)break;for(g=m.eventTimes,I=-1;0<A;){var ie=31-Yi(A);V=1<<ie,ie=g[ie],ie>I&&(I=ie),A&=~V}if(A=I,A=hr()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*B_e(A/1960))-A,10<A){m.timeoutHandle=dD(Rv.bind(null,m,ua,$h),A);break}Rv(m,ua,$h);break;case 5:Rv(m,ua,$h);break;default:throw Error(t(329))}}}return da(m,hr()),m.callbackNode===w?SG.bind(null,m):null}function s4(m,g){var w=tk;return m.current.memoizedState.isDehydrated&&(Ov(m,g).flags|=256),m=GN(m,g),m!==2&&(g=ua,ua=w,g!==null&&o4(g)),m}function o4(m){ua===null?ua=m:ua.push.apply(ua,m)}function $_e(m){for(var g=m;;){if(g.flags&16384){var w=g.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var A=0;A<w.length;A++){var I=w[A],V=I.getSnapshot;I=I.value;try{if(!Vc(V(),I))return!1}catch{return!1}}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Jm(m,g){for(g&=~t4,g&=~VN,m.suspendedLanes|=g,m.pingedLanes&=~g,m=m.expirationTimes;0<g;){var w=31-Yi(g),A=1<<w;m[w]=-1,g&=~A}}function kG(m){if((Dn&6)!==0)throw Error(t(327));ib();var g=id(m,0);if((g&1)===0)return da(m,hr()),null;var w=GN(m,g);if(m.tag!==0&&w===2){var A=le(m);A!==0&&(g=A,w=s4(m,A))}if(w===1)throw w=ek,Ov(m,0),Jm(m,g),da(m,hr()),w;if(w===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=g,Rv(m,ua,$h),da(m,hr()),null}function a4(m,g){var w=Dn;Dn|=1;try{return m(g)}finally{Dn=w,Dn===0&&(rb=hr()+500,bN&&Hm())}}function Iv(m){Ym!==null&&Ym.tag===0&&(Dn&6)===0&&ib();var g=Dn;Dn|=1;var w=Zl.transition,A=ft;try{if(Zl.transition=null,ft=1,m)return m()}finally{ft=A,Zl.transition=w,Dn=g,(Dn&6)===0&&Hm()}}function l4(){Qa=nb.current,Rr(nb)}function Ov(m,g){m.finishedWork=null,m.finishedLanes=0;var w=m.timeoutHandle;if(w!==-1&&(m.timeoutHandle=-1,g_e(w)),Mi!==null)for(w=Mi.return;w!==null;){var A=w;switch(vD(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&yN();break;case 3:Zx(),Rr(aa),Rr(to),jD();break;case 5:AD(A);break;case 4:Zx();break;case 13:Rr(ei);break;case 19:Rr(ei);break;case 10:SD(A.type._context);break;case 22:case 23:l4()}w=w.return}if(hs=m,Mi=m=Qm(m.current,null),Ms=Qa=g,Ji=0,ek=null,t4=VN=Pv=0,ua=tk=null,Av!==null){for(g=0;g<Av.length;g++)if(w=Av[g],A=w.interleaved,A!==null){w.interleaved=null;var I=A.next,V=w.pending;if(V!==null){var ie=V.next;V.next=I,A.next=ie}w.pending=A}Av=null}return m}function CG(m,g){do{var w=Mi;try{if(_D(),jN.current=RN,PN){for(var A=ti.memoizedState;A!==null;){var I=A.queue;I!==null&&(I.pending=null),A=A.next}PN=!1}if(jv=0,ds=Xi=ti=null,KS=!1,YS=0,e4.current=null,w===null||w.return===null){Ji=1,ek=g,Mi=null;break}e:{var V=m,ie=w.return,ye=w,ke=g;if(g=Ms,ye.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var Fe=ke,Je=ye,et=Je.tag;if((Je.mode&1)===0&&(et===0||et===11||et===15)){var Xe=Je.alternate;Xe?(Je.updateQueue=Xe.updateQueue,Je.memoizedState=Xe.memoizedState,Je.lanes=Xe.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var St=Xq(ie);if(St!==null){St.flags&=-257,Jq(St,ie,ye,V,g),St.mode&1&&Yq(V,Fe,g),g=St,ke=Fe;var It=g.updateQueue;if(It===null){var Mt=new Set;Mt.add(ke),g.updateQueue=Mt}else It.add(ke);break e}else{if((g&1)===0){Yq(V,Fe,g),c4();break e}ke=Error(t(426))}}else if(Hr&&ye.mode&1){var Ei=Xq(ie);if(Ei!==null){(Ei.flags&65536)===0&&(Ei.flags|=256),Jq(Ei,ie,ye,V,g),bD(eb(ke,ye));break e}}V=ke=eb(ke,ye),Ji!==4&&(Ji=2),tk===null?tk=[V]:tk.push(V),V=ie;do{switch(V.tag){case 3:V.flags|=65536,g&=-g,V.lanes|=g;var Pe=Gq(V,ke,g);bq(V,Pe);break e;case 1:ye=ke;var Te=V.type,Me=V.stateNode;if((V.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Km===null||!Km.has(Me)))){V.flags|=65536,g&=-g,V.lanes|=g;var at=Kq(V,ye,g);bq(V,at);break e}}V=V.return}while(V!==null)}AG(w)}catch(Ft){g=Ft,Mi===w&&w!==null&&(Mi=w=w.return);continue}break}while(!0)}function EG(){var m=$N.current;return $N.current=RN,m===null?RN:m}function c4(){(Ji===0||Ji===3||Ji===2)&&(Ji=4),hs===null||(Pv&268435455)===0&&(VN&268435455)===0||Jm(hs,Ms)}function GN(m,g){var w=Dn;Dn|=2;var A=EG();(hs!==m||Ms!==g)&&($h=null,Ov(m,g));do try{V_e();break}catch(I){CG(m,I)}while(!0);if(_D(),Dn=w,$N.current=A,Mi!==null)throw Error(t(261));return hs=null,Ms=0,Ji}function V_e(){for(;Mi!==null;)TG(Mi)}function U_e(){for(;Mi!==null&&!Ax();)TG(Mi)}function TG(m){var g=PG(m.alternate,m,Qa);m.memoizedProps=m.pendingProps,g===null?AG(m):Mi=g,e4.current=null}function AG(m){var g=m;do{var w=g.alternate;if(m=g.return,(g.flags&32768)===0){if(w=R_e(w,g,Qa),w!==null){Mi=w;return}}else{if(w=M_e(w,g),w!==null){w.flags&=32767,Mi=w;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Ji=6,Mi=null;return}}if(g=g.sibling,g!==null){Mi=g;return}Mi=g=m}while(g!==null);Ji===0&&(Ji=5)}function Rv(m,g,w){var A=ft,I=Zl.transition;try{Zl.transition=null,ft=1,z_e(m,g,w,A)}finally{Zl.transition=I,ft=A}return null}function z_e(m,g,w,A){do ib();while(Ym!==null);if((Dn&6)!==0)throw Error(t(327));w=m.finishedWork;var I=m.finishedLanes;if(w===null)return null;if(m.finishedWork=null,m.finishedLanes=0,w===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var V=w.lanes|w.childLanes;if(Ve(m,V),m===hs&&(Mi=hs=null,Ms=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||zN||(zN=!0,IG(nd,function(){return ib(),null})),V=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||V){V=Zl.transition,Zl.transition=null;var ie=ft;ft=1;var ye=Dn;Dn|=4,e4.current=null,L_e(m,w),yG(w,m),c_e(cD),Ya=!!lD,cD=lD=null,m.current=w,F_e(w),Nx(),Dn=ye,ft=ie,Zl.transition=V}else m.current=w;if(zN&&(zN=!1,Ym=m,HN=I),V=m.pendingLanes,V===0&&(Km=null),Th(w.stateNode),da(m,hr()),g!==null)for(A=m.onRecoverableError,w=0;w<g.length;w++)I=g[w],A(I.value,{componentStack:I.stack,digest:I.digest});if(UN)throw UN=!1,m=r4,r4=null,m;return(HN&1)!==0&&m.tag!==0&&ib(),V=m.pendingLanes,(V&1)!==0?m===i4?nk++:(nk=0,i4=m):nk=0,Hm(),null}function ib(){if(Ym!==null){var m=Yt(HN),g=Zl.transition,w=ft;try{if(Zl.transition=null,ft=16>m?16:m,Ym===null)var A=!1;else{if(m=Ym,Ym=null,HN=0,(Dn&6)!==0)throw Error(t(331));var I=Dn;for(Dn|=4,At=m.current;At!==null;){var V=At,ie=V.child;if((At.flags&16)!==0){var ye=V.deletions;if(ye!==null){for(var ke=0;ke<ye.length;ke++){var Fe=ye[ke];for(At=Fe;At!==null;){var Je=At;switch(Je.tag){case 0:case 11:case 15:ZS(8,Je,V)}var et=Je.child;if(et!==null)et.return=Je,At=et;else for(;At!==null;){Je=At;var Xe=Je.sibling,St=Je.return;if(fG(Je),Je===Fe){At=null;break}if(Xe!==null){Xe.return=St,At=Xe;break}At=St}}}var It=V.alternate;if(It!==null){var Mt=It.child;if(Mt!==null){It.child=null;do{var Ei=Mt.sibling;Mt.sibling=null,Mt=Ei}while(Mt!==null)}}At=V}}if((V.subtreeFlags&2064)!==0&&ie!==null)ie.return=V,At=ie;else e:for(;At!==null;){if(V=At,(V.flags&2048)!==0)switch(V.tag){case 0:case 11:case 15:ZS(9,V,V.return)}var Pe=V.sibling;if(Pe!==null){Pe.return=V.return,At=Pe;break e}At=V.return}}var Te=m.current;for(At=Te;At!==null;){ie=At;var Me=ie.child;if((ie.subtreeFlags&2064)!==0&&Me!==null)Me.return=ie,At=Me;else e:for(ie=Te;At!==null;){if(ye=At,(ye.flags&2048)!==0)try{switch(ye.tag){case 0:case 11:case 15:BN(9,ye)}}catch(Ft){mi(ye,ye.return,Ft)}if(ye===ie){At=null;break e}var at=ye.sibling;if(at!==null){at.return=ye.return,At=at;break e}At=ye.return}}if(Dn=I,Hm(),ko&&typeof ko.onPostCommitFiberRoot=="function")try{ko.onPostCommitFiberRoot(Ga,m)}catch{}A=!0}return A}finally{ft=w,Zl.transition=g}}return!1}function NG(m,g,w){g=eb(w,g),g=Gq(m,g,1),m=qm(m,g,1),g=To(),m!==null&&(je(m,1,g),da(m,g))}function mi(m,g,w){if(m.tag===3)NG(m,m,w);else for(;g!==null;){if(g.tag===3){NG(g,m,w);break}else if(g.tag===1){var A=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Km===null||!Km.has(A))){m=eb(w,m),m=Kq(g,m,1),g=qm(g,m,1),m=To(),g!==null&&(je(g,1,m),da(g,m));break}}g=g.return}}function H_e(m,g,w){var A=m.pingCache;A!==null&&A.delete(g),g=To(),m.pingedLanes|=m.suspendedLanes&w,hs===m&&(Ms&w)===w&&(Ji===4||Ji===3&&(Ms&130023424)===Ms&&500>hr()-n4?Ov(m,0):t4|=w),da(m,g)}function jG(m,g){g===0&&((m.mode&1)===0?g=1:(g=Ah,Ah<<=1,(Ah&130023424)===0&&(Ah=4194304)));var w=To();m=Lh(m,g),m!==null&&(je(m,g,w),da(m,w))}function W_e(m){var g=m.memoizedState,w=0;g!==null&&(w=g.retryLane),jG(m,w)}function q_e(m,g){var w=0;switch(m.tag){case 13:var A=m.stateNode,I=m.memoizedState;I!==null&&(w=I.retryLane);break;case 19:A=m.stateNode;break;default:throw Error(t(314))}A!==null&&A.delete(g),jG(m,w)}var PG;PG=function(m,g,w){if(m!==null)if(m.memoizedProps!==g.pendingProps||aa.current)ca=!0;else{if((m.lanes&w)===0&&(g.flags&128)===0)return ca=!1,O_e(m,g,w);ca=(m.flags&131072)!==0}else ca=!1,Hr&&(g.flags&1048576)!==0&&uq(g,_N,g.index);switch(g.lanes=0,g.tag){case 2:var A=g.type;LN(m,g),m=g.pendingProps;var I=qx(g,to.current);Qx(g,w),I=OD(null,g,A,m,I,w);var V=RD();return g.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,la(A)?(V=!0,xN(g)):V=!1,g.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,ED(g),I.updater=MN,g.stateNode=I,I._reactInternals=g,$D(g,A,m,w),g=HD(null,g,A,!0,V,w)):(g.tag=0,Hr&&V&&gD(g),Eo(null,g,I,w),g=g.child),g;case 16:A=g.elementType;e:{switch(LN(m,g),m=g.pendingProps,I=A._init,A=I(A._payload),g.type=A,I=g.tag=K_e(A),m=zc(A,m),I){case 0:g=zD(null,g,A,m,w);break e;case 1:g=rG(null,g,A,m,w);break e;case 11:g=Qq(null,g,A,m,w);break e;case 14:g=Zq(null,g,A,zc(A.type,m),w);break e}throw Error(t(306,A,""))}return g;case 0:return A=g.type,I=g.pendingProps,I=g.elementType===A?I:zc(A,I),zD(m,g,A,I,w);case 1:return A=g.type,I=g.pendingProps,I=g.elementType===A?I:zc(A,I),rG(m,g,A,I,w);case 3:e:{if(iG(g),m===null)throw Error(t(387));A=g.pendingProps,V=g.memoizedState,I=V.element,xq(m,g),AN(g,A,null,w);var ie=g.memoizedState;if(A=ie.element,V.isDehydrated)if(V={element:A,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},g.updateQueue.baseState=V,g.memoizedState=V,g.flags&256){I=eb(Error(t(423)),g),g=sG(m,g,A,w,I);break e}else if(A!==I){I=eb(Error(t(424)),g),g=sG(m,g,A,w,I);break e}else for(Ja=Vm(g.stateNode.containerInfo.firstChild),Xa=g,Hr=!0,Uc=null,w=vq(g,null,A,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Yx(),A===I){g=Bh(m,g,w);break e}Eo(m,g,A,w)}g=g.child}return g;case 5:return _q(g),m===null&&xD(g),A=g.type,I=g.pendingProps,V=m!==null?m.memoizedProps:null,ie=I.children,uD(A,I)?ie=null:V!==null&&uD(A,V)&&(g.flags|=32),nG(m,g),Eo(m,g,ie,w),g.child;case 6:return m===null&&xD(g),null;case 13:return oG(m,g,w);case 4:return TD(g,g.stateNode.containerInfo),A=g.pendingProps,m===null?g.child=Xx(g,null,A,w):Eo(m,g,A,w),g.child;case 11:return A=g.type,I=g.pendingProps,I=g.elementType===A?I:zc(A,I),Qq(m,g,A,I,w);case 7:return Eo(m,g,g.pendingProps,w),g.child;case 8:return Eo(m,g,g.pendingProps.children,w),g.child;case 12:return Eo(m,g,g.pendingProps.children,w),g.child;case 10:e:{if(A=g.type._context,I=g.pendingProps,V=g.memoizedProps,ie=I.value,wr(CN,A._currentValue),A._currentValue=ie,V!==null)if(Vc(V.value,ie)){if(V.children===I.children&&!aa.current){g=Bh(m,g,w);break e}}else for(V=g.child,V!==null&&(V.return=g);V!==null;){var ye=V.dependencies;if(ye!==null){ie=V.child;for(var ke=ye.firstContext;ke!==null;){if(ke.context===A){if(V.tag===1){ke=Fh(-1,w&-w),ke.tag=2;var Fe=V.updateQueue;if(Fe!==null){Fe=Fe.shared;var Je=Fe.pending;Je===null?ke.next=ke:(ke.next=Je.next,Je.next=ke),Fe.pending=ke}}V.lanes|=w,ke=V.alternate,ke!==null&&(ke.lanes|=w),kD(V.return,w,g),ye.lanes|=w;break}ke=ke.next}}else if(V.tag===10)ie=V.type===g.type?null:V.child;else if(V.tag===18){if(ie=V.return,ie===null)throw Error(t(341));ie.lanes|=w,ye=ie.alternate,ye!==null&&(ye.lanes|=w),kD(ie,w,g),ie=V.sibling}else ie=V.child;if(ie!==null)ie.return=V;else for(ie=V;ie!==null;){if(ie===g){ie=null;break}if(V=ie.sibling,V!==null){V.return=ie.return,ie=V;break}ie=ie.return}V=ie}Eo(m,g,I.children,w),g=g.child}return g;case 9:return I=g.type,A=g.pendingProps.children,Qx(g,w),I=Jl(I),A=A(I),g.flags|=1,Eo(m,g,A,w),g.child;case 14:return A=g.type,I=zc(A,g.pendingProps),I=zc(A.type,I),Zq(m,g,A,I,w);case 15:return eG(m,g,g.type,g.pendingProps,w);case 17:return A=g.type,I=g.pendingProps,I=g.elementType===A?I:zc(A,I),LN(m,g),g.tag=1,la(A)?(m=!0,xN(g)):m=!1,Qx(g,w),Wq(g,A,I),$D(g,A,I,w),HD(null,g,A,!0,m,w);case 19:return lG(m,g,w);case 22:return tG(m,g,w)}throw Error(t(156,g.tag))};function IG(m,g){return Eh(m,g)}function G_e(m,g,w,A){this.tag=m,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ec(m,g,w,A){return new G_e(m,g,w,A)}function u4(m){return m=m.prototype,!(!m||!m.isReactComponent)}function K_e(m){if(typeof m=="function")return u4(m)?1:0;if(m!=null){if(m=m.$$typeof,m===F)return 11;if(m===Y)return 14}return 2}function Qm(m,g){var w=m.alternate;return w===null?(w=ec(m.tag,g,m.key,m.mode),w.elementType=m.elementType,w.type=m.type,w.stateNode=m.stateNode,w.alternate=m,m.alternate=w):(w.pendingProps=g,w.type=m.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=m.flags&14680064,w.childLanes=m.childLanes,w.lanes=m.lanes,w.child=m.child,w.memoizedProps=m.memoizedProps,w.memoizedState=m.memoizedState,w.updateQueue=m.updateQueue,g=m.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=m.sibling,w.index=m.index,w.ref=m.ref,w}function KN(m,g,w,A,I,V){var ie=2;if(A=m,typeof m=="function")u4(m)&&(ie=1);else if(typeof m=="string")ie=5;else e:switch(m){case P:return Mv(w.children,I,V,g);case M:ie=8,I|=8;break;case O:return m=ec(12,w,g,I|2),m.elementType=O,m.lanes=V,m;case K:return m=ec(13,w,g,I),m.elementType=K,m.lanes=V,m;case ee:return m=ec(19,w,g,I),m.elementType=ee,m.lanes=V,m;case R:return YN(w,I,V,g);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case q:ie=10;break e;case D:ie=9;break e;case F:ie=11;break e;case Y:ie=14;break e;case U:ie=16,A=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return g=ec(ie,w,g,I),g.elementType=m,g.type=A,g.lanes=V,g}function Mv(m,g,w,A){return m=ec(7,m,A,g),m.lanes=w,m}function YN(m,g,w,A){return m=ec(22,m,A,g),m.elementType=R,m.lanes=w,m.stateNode={isHidden:!1},m}function d4(m,g,w){return m=ec(6,m,null,g),m.lanes=w,m}function h4(m,g,w){return g=ec(4,m.children!==null?m.children:[],m.key,g),g.lanes=w,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}function Y_e(m,g,w,A,I){this.tag=g,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Re(0),this.expirationTimes=Re(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.identifierPrefix=A,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function f4(m,g,w,A,I,V,ie,ye,ke){return m=new Y_e(m,g,w,ye,ke),g===1?(g=1,V===!0&&(g|=8)):g=0,V=ec(3,null,null,g),m.current=V,V.stateNode=m,V.memoizedState={element:A,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},ED(V),m}function X_e(m,g,w){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:A==null?null:""+A,children:m,containerInfo:g,implementation:w}}function OG(m){if(!m)return zm;m=m._reactInternals;e:{if(Mc(m)!==m||m.tag!==1)throw Error(t(170));var g=m;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(la(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(t(171))}if(m.tag===1){var w=m.type;if(la(w))return aq(m,w,g)}return g}function RG(m,g,w,A,I,V,ie,ye,ke){return m=f4(w,A,!0,m,I,V,ie,ye,ke),m.context=OG(null),w=m.current,A=To(),I=Xm(w),V=Fh(A,I),V.callback=g??null,qm(w,V,I),m.current.lanes=I,je(m,I,A),da(m,A),m}function XN(m,g,w,A){var I=g.current,V=To(),ie=Xm(I);return w=OG(w),g.context===null?g.context=w:g.pendingContext=w,g=Fh(V,ie),g.payload={element:m},A=A===void 0?null:A,A!==null&&(g.callback=A),m=qm(I,g,ie),m!==null&&(qc(m,I,ie,V),TN(m,I,ie)),ie}function JN(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function MG(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var w=m.retryLane;m.retryLane=w!==0&&w<g?w:g}}function m4(m,g){MG(m,g),(m=m.alternate)&&MG(m,g)}function J_e(){return null}var DG=typeof reportError=="function"?reportError:function(m){console.error(m)};function p4(m){this._internalRoot=m}QN.prototype.render=p4.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(t(409));XN(m,g,null,null)},QN.prototype.unmount=p4.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;Iv(function(){XN(null,m,null,null)}),g[Oh]=null}};function QN(m){this._internalRoot=m}QN.prototype.unstable_scheduleHydration=function(m){if(m){var g=ta();m={blockedOn:null,target:m,priority:g};for(var w=0;w<od.length&&g!==0&&g<od[w].priority;w++);od.splice(w,0,m),w===0&&Gl(m)}};function g4(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function ZN(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function LG(){}function Q_e(m,g,w,A,I){if(I){if(typeof A=="function"){var V=A;A=function(){var Fe=JN(ie);V.call(Fe)}}var ie=RG(g,A,m,0,null,!1,!1,"",LG);return m._reactRootContainer=ie,m[Oh]=ie.current,$S(m.nodeType===8?m.parentNode:m),Iv(),ie}for(;I=m.lastChild;)m.removeChild(I);if(typeof A=="function"){var ye=A;A=function(){var Fe=JN(ke);ye.call(Fe)}}var ke=f4(m,0,!1,null,null,!1,!1,"",LG);return m._reactRootContainer=ke,m[Oh]=ke.current,$S(m.nodeType===8?m.parentNode:m),Iv(function(){XN(g,ke,w,A)}),ke}function ej(m,g,w,A,I){var V=w._reactRootContainer;if(V){var ie=V;if(typeof I=="function"){var ye=I;I=function(){var ke=JN(ie);ye.call(ke)}}XN(g,ie,m,I)}else ie=Q_e(w,g,m,I,A);return JN(ie)}on=function(m){switch(m.tag){case 3:var g=m.stateNode;if(g.current.memoizedState.isDehydrated){var w=rd(g.pendingLanes);w!==0&&(lt(g,w|1),da(g,hr()),(Dn&6)===0&&(rb=hr()+500,Hm()))}break;case 13:Iv(function(){var A=Lh(m,1);if(A!==null){var I=To();qc(A,m,1,I)}}),m4(m,1)}},tr=function(m){if(m.tag===13){var g=Lh(m,134217728);if(g!==null){var w=To();qc(g,m,134217728,w)}m4(m,134217728)}},ea=function(m){if(m.tag===13){var g=Xm(m),w=Lh(m,g);if(w!==null){var A=To();qc(w,m,g,A)}m4(m,g)}},ta=function(){return ft},Qs=function(m,g){var w=ft;try{return ft=m,g()}finally{ft=w}},Zo=function(m,g,w){switch(g){case"input":if(vt(m,w),g=w.name,w.type==="radio"&&g!=null){for(w=m;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<w.length;g++){var A=w[g];if(A!==m&&A.form===m.form){var I=vN(A);if(!I)throw Error(t(90));Z(A),vt(A,I)}}}break;case"textarea":Ze(m,w);break;case"select":g=w.value,g!=null&&Ne(m,!!w.multiple,g,!1)}},sn=a4,An=Iv;var Z_e={usingClientEntryPoint:!1,Events:[zS,Hx,vN,qa,$t,a4]},rk={findFiberByHostInstance:kv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eSe={bundleType:rk.bundleType,version:rk.version,rendererPackageName:rk.rendererPackageName,rendererConfig:rk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Ch(m),m===null?null:m.stateNode},findFiberByHostInstance:rk.findFiberByHostInstance||J_e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tj=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tj.isDisabled&&tj.supportsFiber)try{Ga=tj.inject(eSe),ko=tj}catch{}}return ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z_e,ha.createPortal=function(m,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g4(g))throw Error(t(200));return X_e(m,g,null,w)},ha.createRoot=function(m,g){if(!g4(m))throw Error(t(299));var w=!1,A="",I=DG;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(A=g.identifierPrefix),g.onRecoverableError!==void 0&&(I=g.onRecoverableError)),g=f4(m,1,!1,null,null,w,!1,A,I),m[Oh]=g.current,$S(m.nodeType===8?m.parentNode:m),new p4(g)},ha.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=Ch(g),m=m===null?null:m.stateNode,m},ha.flushSync=function(m){return Iv(m)},ha.hydrate=function(m,g,w){if(!ZN(g))throw Error(t(200));return ej(null,m,g,!0,w)},ha.hydrateRoot=function(m,g,w){if(!g4(m))throw Error(t(405));var A=w!=null&&w.hydratedSources||null,I=!1,V="",ie=DG;if(w!=null&&(w.unstable_strictMode===!0&&(I=!0),w.identifierPrefix!==void 0&&(V=w.identifierPrefix),w.onRecoverableError!==void 0&&(ie=w.onRecoverableError)),g=RG(g,null,m,1,w??null,I,!1,V,ie),m[Oh]=g.current,$S(m),A)for(m=0;m<A.length;m++)w=A[m],I=w._getVersion,I=I(w._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[w,I]:g.mutableSourceEagerHydrationData.push(w,I);return new QN(g)},ha.render=function(m,g,w){if(!ZN(g))throw Error(t(200));return ej(null,m,g,!1,w)},ha.unmountComponentAtNode=function(m){if(!ZN(m))throw Error(t(40));return m._reactRootContainer?(Iv(function(){ej(null,null,m,!1,function(){m._reactRootContainer=null,m[Oh]=null})}),!0):!1},ha.unstable_batchedUpdates=a4,ha.unstable_renderSubtreeIntoContainer=function(m,g,w,A){if(!ZN(w))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return ej(m,g,w,!1,A)},ha.version="18.3.1-next-f1338f8080-20240426",ha}var iK;function kae(){if(iK)return w4.exports;iK=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),w4.exports=OSe(),w4.exports}var tS=kae();const R9=qn(tS);var RSe=n=>{switch(n){case"success":return LSe;case"info":return BSe;case"warning":return FSe;case"error":return $Se;default:return null}},MSe=Array(12).fill(0),DSe=({visible:n,className:e})=>re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},re.createElement("div",{className:"sonner-spinner"},MSe.map((t,r)=>re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),LSe=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FSe=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),BSe=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),$Se=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),VSe=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),USe=()=>{let[n,e]=re.useState(document.hidden);return re.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},rB=1,zSe=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:rB++,s=this.toasts.find(a=>a.id===i),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...n,id:i,title:t}),{...a,...n,id:i,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:i}),i},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),i=t!==void 0,s,o=r.then(async c=>{if(s=["resolve",c],re.isValidElement(c))i=!1,this.create({id:t,type:"default",message:c});else if(WSe(c)&&!c.ok){i=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:u,description:d})}else if(e.success!==void 0){i=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:u,description:d})}}).catch(async c=>{if(s=["reject",c],e.error!==void 0){i=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:u,description:d})}}).finally(()=>{var c;i&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||rB++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Sa=new zSe,HSe=(n,e)=>{let t=(e==null?void 0:e.id)||rB++;return Sa.addToast({title:n,...e,id:t}),t},WSe=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",qSe=HSe,GSe=()=>Sa.toasts,KSe=()=>Sa.getActiveToasts(),Ae=Object.assign(qSe,{success:Sa.success,info:Sa.info,warning:Sa.warning,error:Sa.error,custom:Sa.custom,message:Sa.message,promise:Sa.promise,dismiss:Sa.dismiss,loading:Sa.loading},{getHistory:GSe,getToasts:KSe});function YSe(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}YSe(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function rj(n){return n.label!==void 0}var XSe=3,JSe="32px",QSe="16px",sK=4e3,ZSe=356,eke=14,tke=20,nke=200;function Gc(...n){return n.filter(Boolean).join(" ")}function rke(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var ike=n=>{var e,t,r,i,s,o,a,c,u,d,h;let{invert:f,toast:p,unstyled:x,interacting:y,setHeights:b,visibleToasts:_,heights:C,index:k,toasts:T,expanded:E,removeToast:N,defaultRichColors:P,closeButton:M,style:O,cancelButtonStyle:q,actionButtonStyle:D,className:F="",descriptionClassName:K="",duration:ee,position:Y,gap:U,loadingIcon:R,expandByDefault:z,classNames:W,icons:se,closeButtonAriaLabel:ne="Close toast",pauseWhenPageIsHidden:te}=n,[H,ce]=re.useState(null),[pe,oe]=re.useState(null),[ve,be]=re.useState(!1),[fe,we]=re.useState(!1),[ue,Z]=re.useState(!1),[ge,he]=re.useState(!1),[Ee,Be]=re.useState(!1),[vt,xt]=re.useState(0),[Rt,xe]=re.useState(0),Ne=re.useRef(p.duration||ee||sK),Oe=re.useRef(null),qe=re.useRef(null),Ze=k===0,Ye=k+1<=_,ht=p.type,Bt=p.dismissible!==!1,Jt=p.className||"",Pn=p.descriptionClassName||"",Hn=re.useMemo(()=>C.findIndex($t=>$t.toastId===p.id)||0,[C,p.id]),zr=re.useMemo(()=>{var $t;return($t=p.closeButton)!=null?$t:M},[p.closeButton,M]),Js=re.useMemo(()=>p.duration||ee||sK,[p.duration,ee]),ui=re.useRef(0),qi=re.useRef(0),ql=re.useRef(0),Gi=re.useRef(null),[Wa,Qo]=Y.split("-"),di=re.useMemo(()=>C.reduce(($t,sn,An)=>An>=Hn?$t:$t+sn.height,0),[C,Hn]),Zo=USe(),us=p.invert||f,fn=ht==="loading";qi.current=re.useMemo(()=>Hn*U+di,[Hn,di]),re.useEffect(()=>{Ne.current=Js},[Js]),re.useEffect(()=>{be(!0)},[]),re.useEffect(()=>{let $t=qe.current;if($t){let sn=$t.getBoundingClientRect().height;return xe(sn),b(An=>[{toastId:p.id,height:sn,position:p.position},...An]),()=>b(An=>An.filter(Ir=>Ir.toastId!==p.id))}},[b,p.id]),re.useLayoutEffect(()=>{if(!ve)return;let $t=qe.current,sn=$t.style.height;$t.style.height="auto";let An=$t.getBoundingClientRect().height;$t.style.height=sn,xe(An),b(Ir=>Ir.find(Ki=>Ki.toastId===p.id)?Ir.map(Ki=>Ki.toastId===p.id?{...Ki,height:An}:Ki):[{toastId:p.id,height:An,position:p.position},...Ir])},[ve,p.title,p.description,b,p.id]);let hi=re.useCallback(()=>{we(!0),xt(qi.current),b($t=>$t.filter(sn=>sn.toastId!==p.id)),setTimeout(()=>{N(p)},nke)},[p,N,b,qi]);re.useEffect(()=>{if(p.promise&&ht==="loading"||p.duration===1/0||p.type==="loading")return;let $t;return E||y||te&&Zo?(()=>{if(ql.current<ui.current){let sn=new Date().getTime()-ui.current;Ne.current=Ne.current-sn}ql.current=new Date().getTime()})():Ne.current!==1/0&&(ui.current=new Date().getTime(),$t=setTimeout(()=>{var sn;(sn=p.onAutoClose)==null||sn.call(p,p),hi()},Ne.current)),()=>clearTimeout($t)},[E,y,p,ht,te,Zo,hi]),re.useEffect(()=>{p.delete&&hi()},[hi,p.delete]);function qa(){var $t,sn,An;return se!=null&&se.loading?re.createElement("div",{className:Gc(W==null?void 0:W.loader,($t=p==null?void 0:p.classNames)==null?void 0:$t.loader,"sonner-loader"),"data-visible":ht==="loading"},se.loading):R?re.createElement("div",{className:Gc(W==null?void 0:W.loader,(sn=p==null?void 0:p.classNames)==null?void 0:sn.loader,"sonner-loader"),"data-visible":ht==="loading"},R):re.createElement(DSe,{className:Gc(W==null?void 0:W.loader,(An=p==null?void 0:p.classNames)==null?void 0:An.loader),visible:ht==="loading"})}return re.createElement("li",{tabIndex:0,ref:qe,className:Gc(F,Jt,W==null?void 0:W.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,W==null?void 0:W.default,W==null?void 0:W[ht],(t=p==null?void 0:p.classNames)==null?void 0:t[ht]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:P,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":ve,"data-promise":!!p.promise,"data-swiped":Ee,"data-removed":fe,"data-visible":Ye,"data-y-position":Wa,"data-x-position":Qo,"data-index":k,"data-front":Ze,"data-swiping":ue,"data-dismissible":Bt,"data-type":ht,"data-invert":us,"data-swipe-out":ge,"data-swipe-direction":pe,"data-expanded":!!(E||z&&ve),style:{"--index":k,"--toasts-before":k,"--z-index":T.length-k,"--offset":`${fe?vt:qi.current}px`,"--initial-height":z?"auto":`${Rt}px`,...O,...p.style},onDragEnd:()=>{Z(!1),ce(null),Gi.current=null},onPointerDown:$t=>{fn||!Bt||(Oe.current=new Date,xt(qi.current),$t.target.setPointerCapture($t.pointerId),$t.target.tagName!=="BUTTON"&&(Z(!0),Gi.current={x:$t.clientX,y:$t.clientY}))},onPointerUp:()=>{var $t,sn,An,Ir;if(ge||!Bt)return;Gi.current=null;let Ki=Number((($t=qe.current)==null?void 0:$t.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ri=Number(((sn=qe.current)==null?void 0:sn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ps=new Date().getTime()-((An=Oe.current)==null?void 0:An.getTime()),fi=H==="x"?Ki:Ri,So=Math.abs(fi)/Ps;if(Math.abs(fi)>=tke||So>.11){xt(qi.current),(Ir=p.onDismiss)==null||Ir.call(p,p),oe(H==="x"?Ki>0?"right":"left":Ri>0?"down":"up"),hi(),he(!0),Be(!1);return}Z(!1),ce(null)},onPointerMove:$t=>{var sn,An,Ir,Ki;if(!Gi.current||!Bt||((sn=window.getSelection())==null?void 0:sn.toString().length)>0)return;let Ri=$t.clientY-Gi.current.y,Ps=$t.clientX-Gi.current.x,fi=(An=n.swipeDirections)!=null?An:rke(Y);!H&&(Math.abs(Ps)>1||Math.abs(Ri)>1)&&ce(Math.abs(Ps)>Math.abs(Ri)?"x":"y");let So={x:0,y:0};H==="y"?(fi.includes("top")||fi.includes("bottom"))&&(fi.includes("top")&&Ri<0||fi.includes("bottom")&&Ri>0)&&(So.y=Ri):H==="x"&&(fi.includes("left")||fi.includes("right"))&&(fi.includes("left")&&Ps<0||fi.includes("right")&&Ps>0)&&(So.x=Ps),(Math.abs(So.x)>0||Math.abs(So.y)>0)&&Be(!0),(Ir=qe.current)==null||Ir.style.setProperty("--swipe-amount-x",`${So.x}px`),(Ki=qe.current)==null||Ki.style.setProperty("--swipe-amount-y",`${So.y}px`)}},zr&&!p.jsx?re.createElement("button",{"aria-label":ne,"data-disabled":fn,"data-close-button":!0,onClick:fn||!Bt?()=>{}:()=>{var $t;hi(),($t=p.onDismiss)==null||$t.call(p,p)},className:Gc(W==null?void 0:W.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(s=se==null?void 0:se.close)!=null?s:VSe):null,p.jsx||S.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:re.createElement(re.Fragment,null,ht||p.icon||p.promise?re.createElement("div",{"data-icon":"",className:Gc(W==null?void 0:W.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||qa():null,p.type!=="loading"?p.icon||(se==null?void 0:se[ht])||RSe(ht):null):null,re.createElement("div",{"data-content":"",className:Gc(W==null?void 0:W.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},re.createElement("div",{"data-title":"",className:Gc(W==null?void 0:W.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?re.createElement("div",{"data-description":"",className:Gc(K,Pn,W==null?void 0:W.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),S.isValidElement(p.cancel)?p.cancel:p.cancel&&rj(p.cancel)?re.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||q,onClick:$t=>{var sn,An;rj(p.cancel)&&Bt&&((An=(sn=p.cancel).onClick)==null||An.call(sn,$t),hi())},className:Gc(W==null?void 0:W.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,S.isValidElement(p.action)?p.action:p.action&&rj(p.action)?re.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||D,onClick:$t=>{var sn,An;rj(p.action)&&((An=(sn=p.action).onClick)==null||An.call(sn,$t),!$t.defaultPrevented&&hi())},className:Gc(W==null?void 0:W.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function oK(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function ske(n,e){let t={};return[n,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?QSe:JSe;function c(u){["top","right","bottom","left"].forEach(d=>{t[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?t[`${o}-${u}`]=a:t[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),t}var oke=S.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:x=XSe,toastOptions:y,dir:b=oK(),gap:_=eke,loadingIcon:C,icons:k,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:E}=n,[N,P]=re.useState([]),M=re.useMemo(()=>Array.from(new Set([r].concat(N.filter(te=>te.position).map(te=>te.position)))),[N,r]),[O,q]=re.useState([]),[D,F]=re.useState(!1),[K,ee]=re.useState(!1),[Y,U]=re.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=re.useRef(null),z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=re.useRef(null),se=re.useRef(!1),ne=re.useCallback(te=>{P(H=>{var ce;return(ce=H.find(pe=>pe.id===te.id))!=null&&ce.delete||Sa.dismiss(te.id),H.filter(({id:pe})=>pe!==te.id)})},[]);return re.useEffect(()=>Sa.subscribe(te=>{if(te.dismiss){P(H=>H.map(ce=>ce.id===te.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{R9.flushSync(()=>{P(H=>{let ce=H.findIndex(pe=>pe.id===te.id);return ce!==-1?[...H.slice(0,ce),{...H[ce],...te},...H.slice(ce+1)]:[te,...H]})})})}),[]),re.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:H})=>{U(H?"dark":"light")})}catch{te.addListener(({matches:ce})=>{try{U(ce?"dark":"light")}catch(pe){console.error(pe)}})}},[d]),re.useEffect(()=>{N.length<=1&&F(!1)},[N]),re.useEffect(()=>{let te=H=>{var ce,pe;i.every(oe=>H[oe]||H.code===oe)&&(F(!0),(ce=R.current)==null||ce.focus()),H.code==="Escape"&&(document.activeElement===R.current||(pe=R.current)!=null&&pe.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[i]),re.useEffect(()=>{if(R.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,se.current=!1)}},[R.current]),re.createElement("section",{ref:e,"aria-label":`${T} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((te,H)=>{var ce;let[pe,oe]=te.split("-");return N.length?re.createElement("ol",{key:te,dir:b==="auto"?oK():b,tabIndex:-1,ref:R,className:a,"data-sonner-toaster":!0,"data-theme":Y,"data-y-position":pe,"data-lifted":D&&N.length>1&&!s,"data-x-position":oe,style:{"--front-toast-height":`${((ce=O[0])==null?void 0:ce.height)||0}px`,"--width":`${ZSe}px`,"--gap":`${_}px`,...p,...ske(c,u)},onBlur:ve=>{se.current&&!ve.currentTarget.contains(ve.relatedTarget)&&(se.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||se.current||(se.current=!0,W.current=ve.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{K||F(!1)},onDragEnd:()=>F(!1),onPointerDown:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||ee(!0)},onPointerUp:()=>ee(!1)},N.filter(ve=>!ve.position&&H===0||ve.position===te).map((ve,be)=>{var fe,we;return re.createElement(ike,{key:ve.id,icons:k,index:be,toast:ve,defaultRichColors:h,duration:(fe=y==null?void 0:y.duration)!=null?fe:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:t,visibleToasts:x,closeButton:(we=y==null?void 0:y.closeButton)!=null?we:o,interacting:K,position:te,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:ne,toasts:N.filter(ue=>ue.position==ve.position),heights:O.filter(ue=>ue.position==ve.position),setHeights:q,expandByDefault:s,gap:_,loadingIcon:C,expanded:D,pauseWhenPageIsHidden:E,swipeDirections:n.swipeDirections})})):null}))});const k4="https://tourimate.site",ob={get access(){return localStorage.getItem("accessToken")||""},set access(n){n?localStorage.setItem("accessToken",n):localStorage.removeItem("accessToken")},get refresh(){return localStorage.getItem("refreshToken")||""},set refresh(n){n?localStorage.setItem("refreshToken",n):localStorage.removeItem("refreshToken")},set refreshExpiry(n){n?localStorage.setItem("refreshTokenExpiresAt",n):localStorage.removeItem("refreshTokenExpiresAt")}};async function Dv(n,e){const t={"Content-Type":"application/json",...ob.access?{Authorization:`Bearer ${ob.access}`}:{}};let r=await fetch(`${k4}${n}`,{headers:{...t,...(e==null?void 0:e.headers)||{}},...e});if(r.status===401&&ob.refresh)try{const s=await fetch(`${k4}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:ob.refresh})});if(s.ok){const o=await s.json();ob.access=o.accessToken,r=await fetch(`${k4}${n}`,{headers:{...t,Authorization:`Bearer ${ob.access}`,...(e==null?void 0:e.headers)||{}},...e})}}catch{}const i=await r.text();try{const s=i?JSON.parse(i):{};if(!r.ok)throw s;return s}catch{if(!r.ok)throw new Error(i||r.statusText);return{}}}const lI={login:n=>Dv("/api/auth/login",{method:"POST",body:JSON.stringify(n)}),register:n=>Dv("/api/auth/register",{method:"POST",body:JSON.stringify(n)}),forgotStart:n=>Dv("/api/auth/start",{method:"POST",body:JSON.stringify(n)}),forgotVerify:n=>Dv("/api/auth/forgot/verify",{method:"POST",body:JSON.stringify(n)}),checkPhoneExists:n=>Dv(`/api/auth/exists?phoneNumberE164=${encodeURIComponent(n)}`),refresh:n=>Dv("/api/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:n})}),logout:n=>Dv("/api/auth/logout",{method:"POST",body:JSON.stringify({refreshToken:n})})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function HC(){return HC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},HC.apply(this,arguments)}var xg;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(xg||(xg={}));const aK="popstate";function ake(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return iB("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:cI(i)}return cke(e,t,null,n)}function Oi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cae(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lke(){return Math.random().toString(36).substr(2,8)}function lK(n,e){return{usr:n.state,key:n.key,idx:e}}function iB(n,e,t,r){return t===void 0&&(t=null),HC({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?nS(e):e,{state:t,key:e&&e.key||r||lke()})}function cI(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nS(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function cke(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=xg.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(HC({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=xg.Pop;let b=d(),_=b==null?null:b-u;u=b,c&&c({action:a,location:y.location,delta:_})}function f(b,_){a=xg.Push;let C=iB(y.location,b,_);u=d()+1;let k=lK(C,u),T=y.createHref(C);try{o.pushState(k,"",T)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(T)}s&&c&&c({action:a,location:y.location,delta:1})}function p(b,_){a=xg.Replace;let C=iB(y.location,b,_);u=d();let k=lK(C,u),T=y.createHref(C);o.replaceState(k,"",T),s&&c&&c({action:a,location:y.location,delta:0})}function x(b){let _=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof b=="string"?b:cI(b);return C=C.replace(/ $/,"%20"),Oi(_,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,_)}let y={get action(){return a},get location(){return n(i,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(aK,h),c=b,()=>{i.removeEventListener(aK,h),c=null}},createHref(b){return e(i,b)},createURL:x,encodeLocation(b){let _=x(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(b){return o.go(b)}};return y}var cK;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(cK||(cK={}));function uke(n,e,t){return t===void 0&&(t="/"),dke(n,e,t)}function dke(n,e,t,r){let i=typeof e=="string"?nS(e):e,s=M9(i.pathname||"/",t);if(s==null)return null;let o=Eae(n);hke(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=kke(s);a=wke(o[c],u)}return a}function Eae(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Oi(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Sg([r,c.relativePath]),d=t.concat(c);s.children&&s.children.length>0&&(Oi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Eae(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:xke(u,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of Tae(s.path))i(s,o,c)}),e}function Tae(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Tae(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function hke(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bke(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const fke=/^:[\w-]+$/,mke=3,pke=2,gke=1,vke=10,yke=-2,uK=n=>n==="*";function xke(n,e){let t=n.split("/"),r=t.length;return t.some(uK)&&(r+=yke),e&&(r+=pke),t.filter(i=>!uK(i)).reduce((i,s)=>i+(fke.test(s)?mke:s===""?gke:vke),r)}function bke(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function wke(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=_ke({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Sg([s,h.pathname]),pathnameBase:Ake(Sg([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Sg([s,h.pathnameBase]))}return o}function _ke(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Ske(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const x=a[h];return p&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function Ske(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Cae(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kke(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cae(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function M9(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Cke(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?nS(n):n;return{pathname:t?t.startsWith("/")?t:Eke(t,e):e,search:Nke(r),hash:jke(i)}}function Eke(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function C4(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tke(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function D9(n,e){let t=Tke(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function L9(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=nS(n):(i=HC({},n),Oi(!i.pathname||!i.pathname.includes("?"),C4("?","pathname","search",i)),Oi(!i.pathname||!i.pathname.includes("#"),C4("#","pathname","hash",i)),Oi(!i.search||!i.search.includes("#"),C4("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let c=Cke(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Sg=n=>n.join("/").replace(/\/\/+/g,"/"),Ake=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Nke=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jke=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Pke(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Aae=["post","put","patch","delete"];new Set(Aae);const Ike=["get",...Aae];new Set(Ike);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function WC(){return WC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},WC.apply(this,arguments)}const F9=S.createContext(null),Oke=S.createContext(null),Qg=S.createContext(null),UR=S.createContext(null),wm=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Nae=S.createContext(null);function Rke(n,e){let{relative:t}=e===void 0?{}:e;rS()||Oi(!1);let{basename:r,navigator:i}=S.useContext(Qg),{hash:s,pathname:o,search:a}=Pae(n,{relative:t}),c=o;return r!=="/"&&(c=o==="/"?r:Sg([r,o])),i.createHref({pathname:c,search:a,hash:s})}function rS(){return S.useContext(UR)!=null}function zl(){return rS()||Oi(!1),S.useContext(UR).location}function jae(n){S.useContext(Qg).static||S.useLayoutEffect(n)}function li(){let{isDataRoute:n}=S.useContext(wm);return n?Gke():Mke()}function Mke(){rS()||Oi(!1);let n=S.useContext(F9),{basename:e,future:t,navigator:r}=S.useContext(Qg),{matches:i}=S.useContext(wm),{pathname:s}=zl(),o=JSON.stringify(D9(i,t.v7_relativeSplatPath)),a=S.useRef(!1);return jae(()=>{a.current=!0}),S.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=L9(u,JSON.parse(o),s,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Sg([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,n])}function tA(){let{matches:n}=S.useContext(wm),e=n[n.length-1];return e?e.params:{}}function Pae(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=S.useContext(Qg),{matches:i}=S.useContext(wm),{pathname:s}=zl(),o=JSON.stringify(D9(i,r.v7_relativeSplatPath));return S.useMemo(()=>L9(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function Dke(n,e){return Lke(n,e)}function Lke(n,e,t,r){rS()||Oi(!1);let{navigator:i}=S.useContext(Qg),{matches:s}=S.useContext(wm),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=zl(),d;if(e){var h;let b=typeof e=="string"?nS(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Oi(!1),d=b}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=uke(n,{pathname:p}),y=Uke(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Sg([c,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Sg([c,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,r);return e&&y?S.createElement(UR.Provider,{value:{location:WC({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:xg.Pop}},y):y}function Fke(){let n=qke(),e=Pke(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),t?S.createElement("pre",{style:i},t):null,null)}const Bke=S.createElement(Fke,null);class $ke extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?S.createElement(wm.Provider,{value:this.props.routeContext},S.createElement(Nae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vke(n){let{routeContext:e,match:t,children:r}=n,i=S.useContext(F9);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(wm.Provider,{value:e},r)}function Uke(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Oi(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=t,x=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,x=!1,y=null,b=null;t&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||Bke,c&&(u<0&&f===0?(Kke("route-fallback"),x=!0,b=null):u===f&&(x=!0,b=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),C=()=>{let k;return p?k=y:x?k=b:h.route.Component?k=S.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=d,S.createElement(Vke,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:t!=null},children:k})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement($ke,{location:t.location,revalidation:t.revalidation,component:y,error:p,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}var Iae=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Iae||{}),Oae=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Oae||{});function zke(n){let e=S.useContext(F9);return e||Oi(!1),e}function Hke(n){let e=S.useContext(Oke);return e||Oi(!1),e}function Wke(n){let e=S.useContext(wm);return e||Oi(!1),e}function Rae(n){let e=Wke(),t=e.matches[e.matches.length-1];return t.route.id||Oi(!1),t.route.id}function qke(){var n;let e=S.useContext(Nae),t=Hke(),r=Rae();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Gke(){let{router:n}=zke(Iae.UseNavigateStable),e=Rae(Oae.UseNavigateStable),t=S.useRef(!1);return jae(()=>{t.current=!0}),S.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,WC({fromRouteId:e},s)))},[n,e])}const dK={};function Kke(n,e,t){dK[n]||(dK[n]=!0)}function Yke(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function sB(n){let{to:e,replace:t,state:r,relative:i}=n;rS()||Oi(!1);let{future:s,static:o}=S.useContext(Qg),{matches:a}=S.useContext(wm),{pathname:c}=zl(),u=li(),d=L9(e,D9(a,s.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return S.useEffect(()=>u(JSON.parse(h),{replace:t,state:r,relative:i}),[u,h,i,t,r]),null}function Nn(n){Oi(!1)}function Xke(n){let{basename:e="/",children:t=null,location:r,navigationType:i=xg.Pop,navigator:s,static:o=!1,future:a}=n;rS()&&Oi(!1);let c=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:s,static:o,future:WC({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=nS(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:x="default"}=r,y=S.useMemo(()=>{let b=M9(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:x},navigationType:i}},[c,d,h,f,p,x,i]);return y==null?null:S.createElement(Qg.Provider,{value:u},S.createElement(UR.Provider,{children:t,value:y}))}function Jke(n){let{children:e,location:t}=n;return Dke(oB(e),t)}new Promise(()=>{});function oB(n,e){e===void 0&&(e=[]);let t=[];return S.Children.forEach(n,(r,i)=>{if(!S.isValidElement(r))return;let s=[...e,i];if(r.type===S.Fragment){t.push.apply(t,oB(r.props.children,s));return}r.type!==Nn&&Oi(!1),!r.props.index||!r.props.children||Oi(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=oB(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aB(){return aB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},aB.apply(this,arguments)}function Qke(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Zke(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eCe(n,e){return n.button===0&&(!e||e==="_self")&&!Zke(n)}function lB(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function tCe(n,e){let t=lB(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}const nCe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rCe="6";try{window.__reactRouterVersion=rCe}catch{}const iCe="startTransition",hK=T9[iCe];function sCe(n){let{basename:e,children:t,future:r,window:i}=n,s=S.useRef();s.current==null&&(s.current=ake({window:i,v5Compat:!0}));let o=s.current,[a,c]=S.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=S.useCallback(h=>{u&&hK?hK(()=>c(h)):c(h)},[c,u]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>Yke(r),[r]),S.createElement(Xke,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const oCe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aCe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r_=S.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Qke(e,nCe),{basename:p}=S.useContext(Qg),x,y=!1;if(typeof u=="string"&&aCe.test(u)&&(x=u,oCe))try{let k=new URL(window.location.href),T=u.startsWith("//")?new URL(k.protocol+u):new URL(u),E=M9(T.pathname,p);T.origin===k.origin&&E!=null?u=E+T.search+T.hash:y=!0}catch{}let b=Rke(u,{relative:i}),_=lCe(u,{replace:o,state:a,target:c,preventScrollReset:d,relative:i,viewTransition:h});function C(k){r&&r(k),k.defaultPrevented||_(k)}return S.createElement("a",aB({},f,{href:x||b,onClick:y||s?r:C,ref:t,target:c}))});var fK;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fK||(fK={}));var mK;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(mK||(mK={}));function lCe(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=li(),u=zl(),d=Pae(n,{relative:o});return S.useCallback(h=>{if(eCe(h,t)){h.preventDefault();let f=r!==void 0?r:cI(u)===cI(d);c(n,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,c,d,r,i,t,n,s,o,a])}function Mae(n){let e=S.useRef(lB(n)),t=S.useRef(!1),r=zl(),i=S.useMemo(()=>tCe(r.search,t.current?null:e.current),[r.search]),s=li(),o=S.useCallback((a,c)=>{const u=lB(typeof a=="function"?a(i):a);t.current=!0,s("?"+u,c)},[s,i]);return[i,o]}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cCe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dae=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uCe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dCe=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>S.createElement("svg",{ref:c,...uCe,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Dae("lucide",i),...a},[...o.map(([u,d])=>S.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(n,e)=>{const t=S.forwardRef(({className:r,...i},s)=>S.createElement(dCe,{ref:s,iconNode:e,className:Dae(`lucide-${cCe(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hCe=_t("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=_t("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=_t("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fCe=_t("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mCe=_t("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fae=_t("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pCe=_t("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=_t("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=_t("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gCe=_t("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vCe=_t("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=_t("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=_t("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=_t("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=_t("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=_t("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yCe=_t("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=_t("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=_t("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=_t("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xCe=_t("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=_t("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=_t("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=_t("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=_t("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=_t("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=_t("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=_t("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=_t("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=_t("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=_t("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=_t("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bCe=_t("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=_t("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=_t("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=_t("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=_t("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=_t("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wCe=_t("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=_t("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=_t("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=_t("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=_t("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=_t("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=_t("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ce=_t("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=_t("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=_t("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=_t("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=_t("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=_t("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=_t("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=_t("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=_t("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=_t("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SCe=_t("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=_t("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kCe=_t("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=_t("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=_t("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=_t("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CCe=_t("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=_t("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=_t("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=_t("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=_t("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=_t("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ECe=_t("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=_t("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TCe=_t("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=_t("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=_t("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=_t("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rP="https://tourimate.site";let xu={isLoggedIn:!1,user:null,isLoading:!1,error:null},uB=new Set;const cy=()=>{uB.forEach(n=>n())},ACe=()=>{try{const n=localStorage.getItem("userProfile");return n?JSON.parse(n):null}catch{return null}},NCe=n=>{n?localStorage.setItem("userProfile",JSON.stringify(n)):localStorage.removeItem("userProfile")},rw=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("refreshTokenExpiresAt"),localStorage.removeItem("userProfile")},jCe=async()=>{const n=localStorage.getItem("accessToken"),e=localStorage.getItem("refreshToken");if(!n)return null;try{let t=await fetch(`${rP}/api/auth/me`,{headers:{Authorization:`Bearer ${n}`}});if(t.status===401&&e)try{const i=await fetch(`${rP}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(i.ok){const s=await i.json();localStorage.setItem("accessToken",s.accessToken),t=await fetch(`${rP}/api/auth/me`,{headers:{Authorization:`Bearer ${s.accessToken}`}})}else return rw(),null}catch{return rw(),null}if(t.status===401)return rw(),null;if(!t.ok)throw new Error(`HTTP ${t.status}`);return await t.json()}catch(t){return console.error("Failed to fetch user profile:",t),null}},uI=async()=>{const n=localStorage.getItem("accessToken");localStorage.getItem("refreshToken");const e=localStorage.getItem("refreshTokenExpiresAt"),t=ACe();if(e&&new Date(e)<=new Date){rw(),xu={isLoggedIn:!1,user:null,isLoading:!1,error:"Session expired"},cy();return}if(!n){xu={isLoggedIn:!1,user:null,isLoading:!1,error:null},cy();return}t&&(xu={isLoggedIn:!0,user:t,isLoading:!0,error:null},cy());const r=await jCe();r?(NCe(r),xu={isLoggedIn:!0,user:r,isLoading:!1,error:null}):xu={isLoggedIn:!1,user:null,isLoading:!1,error:"Failed to load user profile"},cy()};uI();setInterval(()=>{const n=localStorage.getItem("refreshTokenExpiresAt");n&&new Date(n)<=new Date&&(rw(),xu={isLoggedIn:!1,user:null,isLoading:!1,error:"Session expired"},cy())},300*1e3);const Zr=()=>{var s,o,a;const[n,e]=S.useState(xu);S.useEffect(()=>{const c=()=>e({...xu});return uB.add(c),e({...xu}),()=>{uB.delete(c)}},[]);const t=S.useCallback(async c=>{localStorage.setItem("accessToken",c.accessToken),localStorage.setItem("refreshToken",c.refreshToken),localStorage.setItem("refreshTokenExpiresAt",c.expiresAt),await uI()},[]),r=S.useCallback(async()=>{try{const c=localStorage.getItem("refreshToken");c&&await fetch(`${rP}/api/auth/logout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:c})})}catch(c){console.error("Logout API call failed:",c)}finally{rw(),xu={isLoggedIn:!1,user:null,isLoading:!1,error:null},cy()}},[]),i=S.useCallback(async()=>{xu.isLoading=!0,cy(),await uI()},[]);return{...n,login:t,logout:r,refreshProfile:i,isAdmin:((s=n.user)==null?void 0:s.role)==="Admin",isTourGuide:((o=n.user)==null?void 0:o.role)==="TourGuide"||((a=n.user)==null?void 0:a.role)==="Admin"}};window.addEventListener("storage",n=>{(n.key==="accessToken"||n.key==="userProfile")&&uI()});function Ks({hideRegister:n=!1,hideLogin:e=!1}){const t=li(),r=zl(),[i,s]=S.useState(!1),[o,a]=S.useState(!1),{isLoggedIn:c,user:u,isAdmin:d,logout:h}=Zr(),f=(u==null?void 0:u.role)==="TourGuide",p=async()=>{await h(),Ae.success("Đã đăng xuất"),t("/")},x=({to:y,label:b})=>l.jsxs("button",{onClick:()=>{a(!1),t(y)},className:`group relative px-6 py-2.5 rounded-full font-nunito font-bold text-sm md:text-base transition-all duration-200 shadow-sm hover:shadow-md ring-1 ring-black/5 overflow-hidden ${r.pathname===y?"bg-gradient-to-r from-tour-blue to-tour-teal text-black":"bg-white text-black hover:bg-gray-50"}`,children:[l.jsx("span",{className:"relative z-10",children:b}),l.jsx("span",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-tour-blue/0 via-tour-teal/10 to-tour-blue/0 opacity-0 group-hover:opacity-100 transition-opacity"})]});return l.jsx("header",{className:"sticky top-0 z-40 bg-white/70 backdrop-blur-md border-b border-white/20 shadow-sm",children:l.jsxs("div",{className:"max-w-9xl mx-auto px-4 md:px-6",children:[l.jsxs("div",{className:"flex items-center justify-between h-16 md:h-20",children:[l.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-3 group",children:[l.jsx("img",{src:"/logo.png",alt:"TouriMate",className:"h-10 w-auto md:h-12 drop-shadow"}),l.jsx("span",{className:"hidden sm:block font-josefin text-2xl md:text-3xl font-bold bg-gradient-to-r from-tour-blue to-tour-teal text-transparent bg-clip-text group-hover:opacity-90",children:"TouriMate"})]}),l.jsxs("nav",{className:"hidden md:flex items-center gap-3 lg:gap-4",children:[l.jsx(x,{to:"/",label:"Trang chủ"}),l.jsx(x,{to:"/tours",label:"Tours"}),l.jsx(x,{to:"/about",label:"Về chúng tôi"}),l.jsx(x,{to:"/tour-guides",label:"Hướng dẫn viên"}),c&&f&&l.jsx(x,{to:"/admin/tours",label:"Tạo tour"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[c?l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>s(!i),className:"flex items-center space-x-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors duration-200",children:[l.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-tour-light-blue rounded-full flex items-center justify-center ring-1 ring-white/40 overflow-hidden",children:u!=null&&u.avatar?l.jsx("img",{src:u.avatar,alt:"avatar",className:"w-full h-full object-cover"}):l.jsx(Fo,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),l.jsx(nA,{className:`w-4 h-4 text-black transition-transform duration-200 ${i?"rotate-180":""}`})]}),i&&l.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:l.jsxs("div",{className:"py-2",children:[l.jsxs("button",{onClick:()=>t("/profile"),className:"w-full px-6 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-3",children:[l.jsx(Fo,{className:"w-5 h-5 text-gray-600"}),l.jsx("span",{className:"font-nunito text-lg font-medium text-black",children:"Thông tin cá nhân"})]}),(d||f)&&l.jsx(l.Fragment,{children:l.jsxs("button",{onClick:()=>t("/admin"),className:"w-full px-6 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-3",children:[l.jsx(U0,{className:"w-5 h-5 text-gray-600"}),l.jsx("span",{className:"font-nunito text-lg font-medium text-black",children:"Quản trị"})]})}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{onClick:p,className:"w-full px-6 py-3 text-left hover:bg-red-50 transition-colors duration-200 flex items-center space-x-3 text-red-600",children:[l.jsx(U9,{className:"w-5 h-5"}),l.jsx("span",{className:"font-nunito text-lg font-medium",children:"Đăng xuất"})]})]})})]}):l.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[!e&&l.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-2.5 rounded-full bg-white text-black font-nunito font-bold shadow-sm hover:shadow-md ring-1 ring-black/5 hover:bg-gray-50 transition-all",children:"Đăng nhập"}),!n&&l.jsx("button",{onClick:()=>t("/register"),className:"px-6 py-2.5 rounded-full bg-gradient-to-r from-tour-blue to-tour-teal text-black font-nunito font-bold shadow-sm hover:shadow-md hover:brightness-105 transition-all",children:"Đăng ký"})]}),l.jsx("button",{onClick:()=>a(y=>!y),className:"md:hidden p-2 rounded-xl bg-gray-200 hover:bg-gray-300 transition-colors",children:o?l.jsx(si,{className:"w-5 h-5"}):l.jsx(Wae,{className:"w-5 h-5"})})]})]}),o&&l.jsx("div",{className:"md:hidden pb-4 animate-in fade-in slide-in-from-top-2",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(x,{to:"/",label:"Trang chủ"}),l.jsx(x,{to:"/tours",label:"Tours"}),l.jsx(x,{to:"/about",label:"Về chúng tôi"}),l.jsx(x,{to:"/tour-guides",label:"Hướng dẫn viên"}),c&&f&&l.jsx(x,{to:"/admin/tours",label:"Tạo tour"}),c&&(d||f)&&l.jsx(x,{to:"/admin",label:"Quản trị"}),!c&&l.jsxs("div",{className:"flex gap-2 pt-2",children:[!e&&l.jsx("button",{onClick:()=>{a(!1),t("/login")},className:"flex-1 px-5 py-2.5 rounded-full bg-white text-black font-nunito font-bold shadow-sm ring-1 ring-black/5 hover:bg-gray-50 transition-all",children:"Đăng nhập"}),!n&&l.jsx("button",{onClick:()=>{a(!1),t("/register")},className:"flex-1 px-5 py-2.5 rounded-full bg-gradient-to-r from-tour-blue to-tour-teal text-black font-nunito font-bold shadow-sm hover:brightness-105 transition-all",children:"Đăng ký"})]})]})})]})})}const PCe=n=>{let e=(n||"").replace(/[\s\-\(\)]/g,"");return!e||e.startsWith("+84")?e:e.startsWith("84")?"+"+e:e.startsWith("0")?"+84"+e.substring(1):"+84"+e};function ICe(){const{register:n,handleSubmit:e,setValue:t,watch:r}=O9({defaultValues:{phoneNumberE164:"",password:""}}),[i,s]=S.useState(null),[o,a]=S.useState(!1),c=li(),u=zl(),[d]=Mae(),{login:h}=Zr(),f=async p=>{var x;s(null),a(!0);try{const y=PCe(p.phoneNumberE164),b=await lI.login({...p,phoneNumberE164:y});await h({accessToken:b.accessToken,refreshToken:b.refreshToken||"",expiresAt:String(b.refreshTokenExpiresAt||new Date)});const _=(x=u.state)==null?void 0:x.from,C=d.get("returnUrl");C?c(decodeURIComponent(C),{replace:!0}):_?c(_,{replace:!0}):c("/")}catch(y){const b=y.message||"Đăng nhập thất bại";s(b),Ae.error(b)}finally{a(!1)}};return l.jsxs("div",{className:"min-h-[100dvh] w-full relative overflow-hidden",children:[l.jsx(Ks,{hideLogin:!0}),l.jsx("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://cdn.builder.io/api/v1/image/assets/TEMP/1a09124bf5c1d065e204bde5e60af8d4a7ebfba4?width=2878')"}}),l.jsx("div",{className:"relative z-10 flex items-center justify-center py-2 px-3 sm:px-4 lg:px-5",children:l.jsxs("div",{className:"max-w-[80vw] min-w-[280px] max-h-[85vh] overflow-auto glassmorphism rounded-[24px] p-3 sm:p-4 md:p-6 lg:p-7 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4 sm:mb-5 md:mb-6",children:[l.jsx("img",{src:"/logo.png",alt:"TouriMate",className:"h-12 w-auto"}),l.jsx("h1",{className:"text-gradient-login text-base sm:text-lg md:text-xl lg:text-2xl font-bold leading-none",children:"Đăng nhập"})]}),l.jsxs("form",{onSubmit:e(f),className:"space-y-3 sm:space-y-3.5 md:space-y-4",children:[l.jsx("div",{className:"relative",children:l.jsx("input",{placeholder:"Số điện thoại (+84 hoặc 0...)",className:"w-full h-[30px] sm:h-[34px] md:h-[38px] bg-white rounded-[22px] px-2.5 sm:px-3 md:px-3.5 text-black text-xs sm:text-sm md:text-base leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",...n("phoneNumberE164",{required:!0})})}),l.jsx("div",{className:"relative",children:l.jsx("input",{placeholder:"Mật khẩu",type:"password",className:"w-full h-[30px] sm:h-[34px] md:h-[38px] bg-white rounded-[22px] px-2.5 sm:px-3 md:px-3.5 text-black text-xs sm:text-sm md:text-base leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",...n("password",{required:!0})})}),i&&l.jsx("div",{className:"h-0.5"}),l.jsx("div",{className:"pt-1 sm:pt-2 md:pt-3",children:l.jsx("button",{disabled:o,className:"w-full max-w-[170px] h-[34px] sm:h-[38px] md:h-[42px] bg-[#0b4f85] text-white rounded-[26px] mx-auto block shadow-lg hover:bg-[#0a4676] transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed",children:l.jsx("span",{className:"font-saira text-[11px] sm:text-xs md:text-sm lg:text-[16px] font-bold flex items-center justify-center gap-2",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Đang xử lý..."]}):"Đăng nhập"})})}),l.jsxs("div",{className:"text-center pt-3 sm:pt-4 md:pt-5 flex items-center justify-center gap-4",children:[l.jsxs(r_,{to:"/",className:"inline-flex items-center gap-1.5 text-black font-nunito font-bold hover:opacity-80 transition-opacity",children:[l.jsx(rh,{className:"w-4 h-4"}),"Về trang chủ"]}),l.jsx("span",{className:"text-black/20",children:"|"}),l.jsxs(r_,{to:"/register",className:"inline-flex items-center gap-1.5 text-black font-nunito font-bold hover:opacity-80 transition-opacity",children:[l.jsx(TCe,{className:"w-4 h-4"}),"Chưa có tài khoản? Đăng ký"]})]}),l.jsx("div",{className:"text-center pt-1",children:l.jsx("a",{className:"text-xs sm:text-sm hover:underline",href:"/forgot",children:"Quên mật khẩu?"})})]})]})})]})}const OCe=()=>{};var yK={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yae=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},RCe=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;c||(p=64,o||(f=64)),r.push(t[d],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Yae(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RCe(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new MCe;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const x=u<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MCe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DCe=function(n){const e=Yae(n);return Xae.encodeByteArray(e,!0)},Jae=function(n){return DCe(n).replace(/\./g,"")},Qae=function(n){try{return Xae.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LCe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FCe=()=>LCe().__FIREBASE_DEFAULTS__,BCe=()=>{if(typeof process>"u"||typeof yK>"u")return;const n=yK.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$Ce=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Qae(n[1]);return e&&JSON.parse(e)},H9=()=>{try{return OCe()||FCe()||BCe()||$Ce()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VCe=n=>{var e,t;return(t=(e=H9())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Zae=()=>{var n;return(n=H9())==null?void 0:n.config},ele=n=>{var e;return(e=H9())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UCe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zCe(n){return(await fetch(n,{credentials:"include"})).ok}const yC={};function HCe(){const n={prod:[],emulator:[]};for(const e of Object.keys(yC))yC[e]?n.emulator.push(e):n.prod.push(e);return n}function WCe(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let xK=!1;function qCe(n,e){if(typeof window>"u"||typeof document>"u"||!qR(window.location.host)||yC[n]===e||yC[n]||xK)return;yC[n]=e;function t(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=HCe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{xK=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=WCe(r),p=t("text"),x=document.getElementById(p)||document.createElement("span"),y=t("learnmore"),b=document.getElementById(y)||document.createElement("a"),_=t("preprendIcon"),C=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const k=f.element;a(k),d(b,y);const T=u();c(C,_),k.append(C,x,b,T),document.body.appendChild(k)}s?(x.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GCe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ko())}function KCe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YCe(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XCe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JCe(){const n=Ko();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QCe(){try{return typeof indexedDB=="object"}catch{return!1}}function ZCe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eEe="FirebaseError";class Zg extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=eEe,Object.setPrototypeOf(this,Zg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rA.prototype.create)}}class rA{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tEe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zg(i,a,r)}}function tEe(n,e){return n.replace(nEe,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nEe=/\{\$([^}]+)}/g;function rEe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function o_(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(bK(s)&&bK(o)){if(!o_(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function bK(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iEe(n,e){const t=new sEe(n,e);return t.subscribe.bind(t)}class sEe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");oEe(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=E4),i.error===void 0&&(i.error=E4),i.complete===void 0&&(i.complete=E4);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oEe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function E4(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n){return n&&n._delegate?n._delegate:n}class a_{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aEe=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new UCe;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cEe(e))try{this.getOrInitializeService({instanceIdentifier:Yv})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yv){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yv){return this.instances.has(e)}getOptions(e=Yv){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lEe(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yv){return this.component?this.component.multipleInstances?e:Yv:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lEe(n){return n===Yv?void 0:n}function cEe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uEe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aEe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(vr||(vr={}));const dEe={debug:vr.DEBUG,verbose:vr.VERBOSE,info:vr.INFO,warn:vr.WARN,error:vr.ERROR,silent:vr.SILENT},hEe=vr.INFO,fEe={[vr.DEBUG]:"log",[vr.VERBOSE]:"log",[vr.INFO]:"info",[vr.WARN]:"warn",[vr.ERROR]:"error"},mEe=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=fEe[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tle{constructor(e){this.name=e,this._logLevel=hEe,this._logHandler=mEe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dEe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vr.DEBUG,...e),this._logHandler(this,vr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vr.VERBOSE,...e),this._logHandler(this,vr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vr.INFO,...e),this._logHandler(this,vr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vr.WARN,...e),this._logHandler(this,vr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vr.ERROR,...e),this._logHandler(this,vr.ERROR,...e)}}const pEe=(n,e)=>e.some(t=>n instanceof t);let wK,_K;function gEe(){return wK||(wK=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vEe(){return _K||(_K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nle=new WeakMap,dB=new WeakMap,rle=new WeakMap,T4=new WeakMap,W9=new WeakMap;function yEe(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Cg(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&nle.set(t,n)}).catch(()=>{}),W9.set(e,n),e}function xEe(n){if(dB.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});dB.set(n,e)}let hB={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dB.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rle.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cg(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bEe(n){hB=n(hB)}function wEe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(A4(this),e,...t);return rle.set(r,e.sort?e.sort():[e]),Cg(r)}:vEe().includes(n)?function(...e){return n.apply(A4(this),e),Cg(nle.get(this))}:function(...e){return Cg(n.apply(A4(this),e))}}function _Ee(n){return typeof n=="function"?wEe(n):(n instanceof IDBTransaction&&xEe(n),pEe(n,gEe())?new Proxy(n,hB):n)}function Cg(n){if(n instanceof IDBRequest)return yEe(n);if(T4.has(n))return T4.get(n);const e=_Ee(n);return e!==n&&(T4.set(n,e),W9.set(e,n)),e}const A4=n=>W9.get(n);function SEe(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Cg(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Cg(o.result),c.oldVersion,c.newVersion,Cg(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const kEe=["get","getKey","getAll","getAllKeys","count"],CEe=["put","add","delete","clear"],N4=new Map;function SK(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(N4.get(e))return N4.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=CEe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kEe.includes(t)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return N4.set(e,s),s}bEe(n=>({...n,get:(e,t,r)=>SK(e,t)||n.get(e,t,r),has:(e,t)=>!!SK(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EEe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TEe(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function TEe(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fB="@firebase/app",kK="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=new tle("@firebase/app"),AEe="@firebase/app-compat",NEe="@firebase/analytics-compat",jEe="@firebase/analytics",PEe="@firebase/app-check-compat",IEe="@firebase/app-check",OEe="@firebase/auth",REe="@firebase/auth-compat",MEe="@firebase/database",DEe="@firebase/data-connect",LEe="@firebase/database-compat",FEe="@firebase/functions",BEe="@firebase/functions-compat",$Ee="@firebase/installations",VEe="@firebase/installations-compat",UEe="@firebase/messaging",zEe="@firebase/messaging-compat",HEe="@firebase/performance",WEe="@firebase/performance-compat",qEe="@firebase/remote-config",GEe="@firebase/remote-config-compat",KEe="@firebase/storage",YEe="@firebase/storage-compat",XEe="@firebase/firestore",JEe="@firebase/ai",QEe="@firebase/firestore-compat",ZEe="firebase",e2e="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="[DEFAULT]",t2e={[fB]:"fire-core",[AEe]:"fire-core-compat",[jEe]:"fire-analytics",[NEe]:"fire-analytics-compat",[IEe]:"fire-app-check",[PEe]:"fire-app-check-compat",[OEe]:"fire-auth",[REe]:"fire-auth-compat",[MEe]:"fire-rtdb",[DEe]:"fire-data-connect",[LEe]:"fire-rtdb-compat",[FEe]:"fire-fn",[BEe]:"fire-fn-compat",[$Ee]:"fire-iid",[VEe]:"fire-iid-compat",[UEe]:"fire-fcm",[zEe]:"fire-fcm-compat",[HEe]:"fire-perf",[WEe]:"fire-perf-compat",[qEe]:"fire-rc",[GEe]:"fire-rc-compat",[KEe]:"fire-gcs",[YEe]:"fire-gcs-compat",[XEe]:"fire-fst",[QEe]:"fire-fst-compat",[JEe]:"fire-vertex","fire-js":"fire-js",[ZEe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new Map,n2e=new Map,pB=new Map;function CK(n,e){try{n.container.addComponent(e)}catch(t){im.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function YC(n){const e=n.name;if(pB.has(e))return im.debug(`There were multiple attempts to register component ${e}.`),!1;pB.set(e,n);for(const t of dI.values())CK(t,n);for(const t of n2e.values())CK(t,n);return!0}function ile(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gd(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eg=new rA("app","Firebase",r2e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2e{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new a_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=e2e;function sle(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:mB,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Eg.create("bad-app-name",{appName:String(i)});if(t||(t=Zae()),!t)throw Eg.create("no-options");const s=dI.get(i);if(s){if(o_(t,s.options)&&o_(r,s.config))return s;throw Eg.create("duplicate-app",{appName:i})}const o=new uEe(i);for(const c of pB.values())o.addComponent(c);const a=new i2e(t,r,o);return dI.set(i,a),a}function s2e(n=mB){const e=dI.get(n);if(!e&&n===mB&&Zae())return sle();if(!e)throw Eg.create("no-app",{appName:n});return e}function iw(n,e,t){let r=t2e[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),im.warn(o.join(" "));return}YC(new a_(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2e="firebase-heartbeat-database",a2e=1,XC="firebase-heartbeat-store";let j4=null;function ole(){return j4||(j4=SEe(o2e,a2e,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(XC)}catch(t){console.warn(t)}}}}).catch(n=>{throw Eg.create("idb-open",{originalErrorMessage:n.message})})),j4}async function l2e(n){try{const t=(await ole()).transaction(XC),r=await t.objectStore(XC).get(ale(n));return await t.done,r}catch(e){if(e instanceof Zg)im.warn(e.message);else{const t=Eg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});im.warn(t.message)}}}async function EK(n,e){try{const r=(await ole()).transaction(XC,"readwrite");await r.objectStore(XC).put(e,ale(n)),await r.done}catch(t){if(t instanceof Zg)im.warn(t.message);else{const r=Eg.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});im.warn(r.message)}}}function ale(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2e=1024,u2e=30;class d2e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f2e(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=TK();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>u2e){const o=m2e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){im.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=TK(),{heartbeatsToSend:r,unsentEntries:i}=h2e(this._heartbeatsCache.heartbeats),s=Jae(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return im.warn(t),""}}}function TK(){return new Date().toISOString().substring(0,10)}function h2e(n,e=c2e){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),AK(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),AK(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class f2e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QCe()?ZCe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l2e(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EK(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EK(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function AK(n){return Jae(JSON.stringify({version:2,heartbeats:n})).length}function m2e(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2e(n){YC(new a_("platform-logger",e=>new EEe(e),"PRIVATE")),YC(new a_("heartbeat",e=>new d2e(e),"PRIVATE")),iw(fB,kK,n),iw(fB,kK,"esm2020"),iw("fire-js","")}p2e("");var g2e="firebase",v2e="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */iw(g2e,v2e,"app");function lle(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y2e=lle,cle=new rA("auth","Firebase",lle());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new tle("@firebase/auth");function x2e(n,...e){hI.logLevel<=vr.WARN&&hI.warn(`Auth (${iA}): ${n}`,...e)}function iP(n,...e){hI.logLevel<=vr.ERROR&&hI.error(`Auth (${iA}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(n,...e){throw q9(n,...e)}function Ol(n,...e){return q9(n,...e)}function ule(n,e,t){const r={...y2e(),[e]:t};return new rA("auth","Firebase",r).create(e,{appName:n.name})}function Tg(n){return ule(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q9(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cle.create(n,...e)}function Nt(n,e,...t){if(!n)throw q9(e,...t)}function $f(n){const e="INTERNAL ASSERTION FAILED: "+n;throw iP(e),new Error(e)}function om(n,e){n||$f(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function dle(){return NK()==="http:"||NK()==="https:"}function NK(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dle()||YCe()||"connection"in navigator)?navigator.onLine:!0}function w2e(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t){this.shortDelay=e,this.longDelay=t,om(t>e,"Short delay should be less than long delay!"),this.isMobile=GCe()||XCe()}get(){return b2e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(n,e){om(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$f("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$f("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$f("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],k2e=new sA(3e4,6e4);function xh(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function zu(n,e,t,r,i={}){return fle(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=sS({key:n.config.apiKey,...o}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:c,...s};return KCe()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&qR(n.emulatorConfig.host)&&(u.credentials="include"),hle.fetch()(await mle(n,n.config.apiHost,t,a),u)})}async function fle(n,e,t){n._canInitEmulator=!1;const r={..._2e,...e};try{const i=new E2e(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fk(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fk(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Fk(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Fk(n,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ule(n,d,u);sm(n,d)}}catch(i){if(i instanceof Zg)throw i;sm(n,"network-request-failed",{message:String(i)})}}async function GR(n,e,t,r,i={}){const s=await zu(n,e,t,r,i);return"mfaPendingCredential"in s&&sm(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function mle(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?G9(n.config,i):`${n.config.apiScheme}://${i}`;return S2e.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function C2e(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E2e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ol(this.auth,"network-request-failed")),k2e.get())})}}function Fk(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ol(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(n){return n!==void 0&&n.getResponse!==void 0}function PK(n){return n!==void 0&&n.enterprise!==void 0}class ple{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return C2e(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2e(n){return(await zu(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function gle(n,e){return zu(n,"GET","/v2/recaptchaConfig",xh(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2e(n,e){return zu(n,"POST","/v1/accounts:delete",e)}async function fI(n,e){return zu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function N2e(n,e=!1){const t=ev(n),r=await t.getIdToken(e),i=K9(r);Nt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xC(P4(i.auth_time)),issuedAtTime:xC(P4(i.iat)),expirationTime:xC(P4(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function P4(n){return Number(n)*1e3}function K9(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return iP("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qae(t);return i?JSON.parse(i):(iP("Failed to decode base64 JWT payload"),null)}catch(i){return iP("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function IK(n){const e=K9(n);return Nt(e,"internal-error"),Nt(typeof e.exp<"u","internal-error"),Nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Zg&&j2e(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function j2e({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xC(this.lastLoginAt),this.creationTime=xC(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(n){var h;const e=n.auth,t=await n.getIdToken(),r=await JC(n,fI(e,{idToken:t}));Nt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?vle(i.providerUserInfo):[],o=O2e(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new vB(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function I2e(n){const e=ev(n);await mI(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O2e(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vle(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2e(n,e){const t=await fle(n,{},async()=>{const r=sS({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await mle(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return n.emulatorConfig&&qR(n.emulatorConfig.host)&&(c.credentials="include"),hle.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function M2e(n,e){return zu(n,"POST","/v2/accounts:revokeToken",xh(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Nt(e.idToken,"internal-error"),Nt(typeof e.idToken<"u","internal-error"),Nt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IK(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Nt(e.length!==0,"internal-error");const t=IK(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await R2e(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new sw;return r&&(Nt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Nt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Nt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sw,this.toJSON())}_performRefresh(){return $f("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){Nt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Su{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new P2e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vB(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await JC(this,this.stsTokenManager.getToken(this.auth,e));return Nt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return N2e(this,e)}reload(){return I2e(this)}_assign(e){this!==e&&(Nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Su({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await mI(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gd(this.auth.app))return Promise.reject(Tg(this.auth));const e=await this.getIdToken();return await JC(this,A2e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:x,stsTokenManager:y}=t;Nt(h&&y,e,"internal-error");const b=sw.fromJSON(this.name,y);Nt(typeof h=="string",e,"internal-error"),ep(r,e.name),ep(i,e.name),Nt(typeof f=="boolean",e,"internal-error"),Nt(typeof p=="boolean",e,"internal-error"),ep(s,e.name),ep(o,e.name),ep(a,e.name),ep(c,e.name),ep(u,e.name),ep(d,e.name);const _=new Su({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:u,lastLoginAt:d});return x&&Array.isArray(x)&&(_.providerData=x.map(C=>({...C}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,t,r=!1){const i=new sw;i.updateFromServerResponse(t);const s=new Su({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mI(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Nt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?vle(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new sw;a.updateFromIdToken(r);const c=new Su({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vB(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK=new Map;function Vf(n){om(n instanceof Function,"Expected a class definition");let e=OK.get(n);return e?(om(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,OK.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yle{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yle.type="NONE";const RK=yle;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n,e,t){return`firebase:${n}:${e}:${t}`}class ow{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=sP(this.userKey,i.apiKey,s),this.fullPersistenceKey=sP("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fI(this.auth,{idToken:e}).catch(()=>{});return t?Su._fromGetAccountInfoResponse(this.auth,t,e):null}return Su._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ow(Vf(RK),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Vf(RK);const o=sP(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await fI(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Su._fromGetAccountInfoResponse(e,f,d)}else h=Su._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ow(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ow(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MK(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_le(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xle(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kle(e))return"Blackberry";if(Cle(e))return"Webos";if(ble(e))return"Safari";if((e.includes("chrome/")||wle(e))&&!e.includes("edge/"))return"Chrome";if(Sle(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xle(n=Ko()){return/firefox\//i.test(n)}function ble(n=Ko()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wle(n=Ko()){return/crios\//i.test(n)}function _le(n=Ko()){return/iemobile/i.test(n)}function Sle(n=Ko()){return/android/i.test(n)}function kle(n=Ko()){return/blackberry/i.test(n)}function Cle(n=Ko()){return/webos/i.test(n)}function Y9(n=Ko()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D2e(n=Ko()){var e;return Y9(n)&&!!((e=window.navigator)!=null&&e.standalone)}function L2e(){return JCe()&&document.documentMode===10}function Ele(n=Ko()){return Y9(n)||Sle(n)||Cle(n)||kle(n)||/windows phone/i.test(n)||_le(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tle(n,e=[]){let t;switch(n){case"Browser":t=MK(Ko());break;case"Worker":t=`${MK(Ko())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${iA}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2e(n,e={}){return zu(n,"GET","/v2/passwordPolicy",xh(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2e=6;class V2e{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$2e,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2e{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DK(this),this.idTokenSubscription=new DK(this),this.beforeStateQueue=new F2e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cle,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vf(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ow.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fI(this,{idToken:e}),r=await Su._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Gd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mI(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w2e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gd(this.app))return Promise.reject(Tg(this));const t=e?ev(e):null;return t&&Nt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gd(this.app)?Promise.reject(Tg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gd(this.app)?Promise.reject(Tg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B2e(this),t=new V2e(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rA("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await M2e(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vf(e)||this._popupRedirectResolver;Nt(t,this,"argument-error"),this.redirectPersistenceManager=await ow.create(this,[Vf(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tle(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Gd(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&x2e(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function km(n){return ev(n)}class DK{constructor(e){this.auth=e,this.observer=null,this.addObserver=iEe(t=>this.observer=t)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z2e(n){oA=n}function X9(n){return oA.loadJS(n)}function H2e(){return oA.recaptchaV2Script}function W2e(){return oA.recaptchaEnterpriseScript}function q2e(){return oA.gapiScript}function Ale(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2e=500,K2e=6e4,oj=1e12;class Y2e{constructor(e){this.auth=e,this.counter=oj,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new Q2e(e,this.auth.name,t||{})),this.counter++,r}reset(e){var r;const t=e||oj;(r=this._widgets.get(t))==null||r.delete(),this._widgets.delete(t)}getResponse(e){var r;const t=e||oj;return((r=this._widgets.get(t))==null?void 0:r.getResponse())||""}async execute(e){var r;const t=e||oj;return(r=this._widgets.get(t))==null||r.execute(),""}}class X2e{constructor(){this.enterprise=new J2e}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class J2e{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Q2e{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Nt(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Z2e(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},K2e)},G2e))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Z2e(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const eTe="recaptcha-enterprise",bC="NO_RECAPTCHA";class Nle{constructor(e){this.type=eTe,this.auth=km(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{gle(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new ple(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;PK(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(bC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new X2e().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&PK(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=W2e();c.length!==0&&(c+=a),X9(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function I4(n,e,t,r=!1,i=!1){const s=new Nle(n);let o;if(i)o=bC;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function O4(n,e,t,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const o=await I4(n,e,t);return r(n,o).catch(async a=>{var c;if(((c=n._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(a.code==="auth/missing-recaptcha-token"||a.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const u=await I4(n,e,t,!1,!0);return r(n,u)}return Promise.reject(a)})}else{const o=await I4(n,e,t,!1,!0);return r(n,o)}}async function tTe(n){const e=km(n),t=await gle(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ple(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new Nle(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nTe(n,e){const t=ile(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(o_(s,e??{}))return i;sm(i,"already-initialized")}return t.initialize({options:e})}function rTe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Vf);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iTe(n,e,t){const r=km(n);Nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=jle(e),{host:o,port:a}=sTe(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(o_(u,r.config.emulator)&&o_(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,qR(o)?(zCe(`${s}//${o}${c}`),qCe("Auth",!0)):oTe()}function jle(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sTe(n){const e=jle(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:LK(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:LK(o)}}}function LK(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oTe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $f("not implemented")}_getIdTokenResponse(e){return $f("not implemented")}_linkToIdToken(e,t){return $f("not implemented")}_getReauthenticationResolver(e){return $f("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(n,e){return GR(n,"POST","/v1/accounts:signInWithIdp",xh(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aTe="http://localhost";class z0 extends J9{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new z0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const o=new z0(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return aw(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,aw(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,aw(e,t)}buildRequest(){const e={requestUri:aTe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sS(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FK(n,e){return zu(n,"POST","/v1/accounts:sendVerificationCode",xh(n,e))}async function lTe(n,e){return GR(n,"POST","/v1/accounts:signInWithPhoneNumber",xh(n,e))}async function cTe(n,e){const t=await GR(n,"POST","/v1/accounts:signInWithPhoneNumber",xh(n,e));if(t.temporaryProof)throw Fk(n,"account-exists-with-different-credential",t);return t}const uTe={USER_NOT_FOUND:"user-not-found"};async function dTe(n,e){const t={...e,operation:"REAUTH"};return GR(n,"POST","/v1/accounts:signInWithPhoneNumber",xh(n,t),uTe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0 extends J9{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new R0({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new R0({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return lTe(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return cTe(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return dTe(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new R0({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ple{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends Ple{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends aA{constructor(){super("facebook.com")}static credential(e){return z0._fromParams({providerId:fp.PROVIDER_ID,signInMethod:fp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fp.credentialFromTaggedObject(e)}static credentialFromError(e){return fp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fp.credential(e.oauthAccessToken)}catch{return null}}}fp.FACEBOOK_SIGN_IN_METHOD="facebook.com";fp.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends aA{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return z0._fromParams({providerId:mp.PROVIDER_ID,signInMethod:mp.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mp.credentialFromTaggedObject(e)}static credentialFromError(e){return mp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return mp.credential(t,r)}catch{return null}}}mp.GOOGLE_SIGN_IN_METHOD="google.com";mp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends aA{constructor(){super("github.com")}static credential(e){return z0._fromParams({providerId:pp.PROVIDER_ID,signInMethod:pp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pp.credentialFromTaggedObject(e)}static credentialFromError(e){return pp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pp.credential(e.oauthAccessToken)}catch{return null}}}pp.GITHUB_SIGN_IN_METHOD="github.com";pp.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends aA{constructor(){super("twitter.com")}static credential(e,t){return z0._fromParams({providerId:gp.PROVIDER_ID,signInMethod:gp.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gp.credentialFromTaggedObject(e)}static credentialFromError(e){return gp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return gp.credential(t,r)}catch{return null}}}gp.TWITTER_SIGN_IN_METHOD="twitter.com";gp.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Su._fromIdTokenResponse(e,r,i),o=BK(r);return new l_({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=BK(r);return new l_({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function BK(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Zg{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,pI.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new pI(e,t,r,i)}}function Ile(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pI._fromErrorAndOperation(n,s,e,r):s})}async function hTe(n,e,t=!1){const r=await JC(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return l_._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fTe(n,e,t=!1){const{auth:r}=n;if(Gd(r.app))return Promise.reject(Tg(r));const i="reauthenticate";try{const s=await JC(n,Ile(r,i,e,n),t);Nt(s.idToken,r,"internal-error");const o=K9(s.idToken);Nt(o,r,"internal-error");const{sub:a}=o;return Nt(n.uid===a,r,"user-mismatch"),l_._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&sm(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ole(n,e,t=!1){if(Gd(n.app))return Promise.reject(Tg(n));const r="signIn",i=await Ile(n,r,e),s=await l_._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Rle(n,e){return Ole(km(n),e)}function mTe(n,e,t,r){return ev(n).onIdTokenChanged(e,t,r)}function pTe(n,e,t){return ev(n).beforeAuthStateChanged(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $K(n,e){return zu(n,"POST","/v2/accounts/mfaEnrollment:start",xh(n,e))}const gI="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mle{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gI,"1"),this.storage.removeItem(gI),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gTe=1e3,vTe=10;class Dle extends Mle{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ele(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);L2e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vTe):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},gTe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dle.type="LOCAL";const yTe=Dle;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lle extends Mle{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lle.type="SESSION";const Fle=Lle;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xTe(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new KR(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),c=await xTe(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}KR.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q9(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bTe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=Q9("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function wTe(n){$i().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function _Te(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function STe(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function kTe(){return Z9()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ble="firebaseLocalStorageDb",CTe=1,vI="firebaseLocalStorage",$le="fbase_key";class lA{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function YR(n,e){return n.transaction([vI],e?"readwrite":"readonly").objectStore(vI)}function ETe(){const n=indexedDB.deleteDatabase(Ble);return new lA(n).toPromise()}function yB(){const n=indexedDB.open(Ble,CTe);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vI,{keyPath:$le})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vI)?e(r):(r.close(),await ETe(),e(await yB()))})})}async function VK(n,e,t){const r=YR(n,!0).put({[$le]:e,value:t});return new lA(r).toPromise()}async function TTe(n,e){const t=YR(n,!1).get(e),r=await new lA(t).toPromise();return r===void 0?null:r.value}function UK(n,e){const t=YR(n,!0).delete(e);return new lA(t).toPromise()}const ATe=800,NTe=3;class Vle{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yB(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>NTe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z9()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=KR._getInstance(kTe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await _Te(),!this.activeServiceWorker)return;this.sender=new bTe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||STe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yB();return await VK(e,gI,"1"),await UK(e,gI),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>VK(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>TTe(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>UK(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=YR(i,!1).getAll();return new lA(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ATe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vle.type="LOCAL";const jTe=Vle;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zK(n,e){return zu(n,"POST","/v2/accounts/mfaSignIn:start",xh(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=Ale("rcb"),PTe=new sA(3e4,6e4);class ITe{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=$i().grecaptcha)!=null&&e.render)}load(e,t=""){return Nt(OTe(t),e,"argument-error"),this.shouldResolveImmediately(t)&&jK($i().grecaptcha)?Promise.resolve($i().grecaptcha):new Promise((r,i)=>{const s=$i().setTimeout(()=>{i(Ol(e,"network-request-failed"))},PTe.get());$i()[R4]=()=>{$i().clearTimeout(s),delete $i()[R4];const a=$i().grecaptcha;if(!a||!jK(a)){i(Ol(e,"internal-error"));return}const c=a.render;a.render=(u,d)=>{const h=c(u,d);return this.counter++,h},this.hostLanguage=t,r(a)};const o=`${H2e()}?${sS({onload:R4,render:"explicit",hl:t})}`;X9(o).catch(()=>{clearTimeout(s),i(Ol(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=$i().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function OTe(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class RTe{async load(e){return new Y2e(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="recaptcha",MTe={theme:"light",type:"image"};class DTe{constructor(e,t,r={...MTe}){this.parameters=r,this.type=wC,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=km(e),this.isInvisible=this.parameters.size==="invisible",Nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;Nt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new RTe:new ITe,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Nt(!this.parameters.sitekey,this.auth,"argument-error"),Nt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Nt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=$i()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){Nt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Nt(dle()&&!Z9(),this.auth,"internal-error"),await LTe(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await T2e(this.auth);Nt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Nt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function LTe(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FTe{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=R0._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function BTe(n,e,t){if(Gd(n.app))return Promise.reject(Tg(n));const r=km(n),i=await Ule(r,e,ev(t));return new FTe(i,s=>Rle(r,s))}async function Ule(n,e,t){var r;if(!n._getRecaptchaConfig())try{await tTe(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){Nt(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await O4(n,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===bC){Nt((t==null?void 0:t.type)===wC,d,"argument-error");const f=await M4(d,h,t);return $K(d,f)}return $K(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{Nt(s.type==="signin",n,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;Nt(o,n,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await O4(n,a,"mfaSmsSignIn",async(h,f)=>{if(f.phoneSignInInfo.captchaResponse===bC){Nt((t==null?void 0:t.type)===wC,h,"argument-error");const p=await M4(h,f,t);return zK(h,p)}return zK(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await O4(n,s,"sendVerificationCode",async(u,d)=>{if(d.captchaResponse===bC){Nt((t==null?void 0:t.type)===wC,u,"argument-error");const h=await M4(u,d,t);return FK(u,h)}return FK(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{t==null||t._reset()}}async function M4(n,e,t){Nt(t.type===wC,n,"argument-error");const r=await t.verify();Nt(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.providerId=M0.PROVIDER_ID,this.auth=km(e)}verifyPhoneNumber(e,t){return Ule(this.auth,e,ev(t))}static credential(e,t){return R0._fromVerification(e,t)}static credentialFromResult(e){const t=e;return M0.credentialFromTaggedObject(t)}static credentialFromError(e){return M0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?R0._fromTokenResponse(t,r):null}}M0.PROVIDER_ID="phone";M0.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Te(n,e){return e?Vf(e):(Nt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU extends J9{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return aw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return aw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return aw(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VTe(n){return Ole(n.auth,new eU(n),n.bypassAuthState)}function UTe(n){const{auth:e,user:t}=n;return Nt(t,e,"internal-error"),fTe(t,new eU(n),n.bypassAuthState)}async function zTe(n){const{auth:e,user:t}=n;return Nt(t,e,"internal-error"),hTe(t,new eU(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VTe;case"linkViaPopup":case"linkViaRedirect":return zTe;case"reauthViaPopup":case"reauthViaRedirect":return UTe;default:sm(this.auth,"internal-error")}}resolve(e){om(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){om(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HTe=new sA(2e3,1e4);class Bb extends zle{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bb.currentPopupAction&&Bb.currentPopupAction.cancel(),Bb.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Nt(e,this.auth,"internal-error"),e}async onExecution(){om(this.filter.length===1,"Popup operations only handle one event");const e=Q9();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ol(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ol(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bb.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ol(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HTe.get())};e()}}Bb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WTe="pendingRedirect",oP=new Map;class qTe extends zle{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=oP.get(this.auth._key());if(!e){try{const r=await GTe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}oP.set(this.auth._key(),e)}return this.bypassAuthState||oP.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GTe(n,e){const t=XTe(e),r=YTe(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function KTe(n,e){oP.set(n._key(),e)}function YTe(n){return Vf(n._redirectPersistence)}function XTe(n){return sP(WTe,n.config.apiKey,n.name)}async function JTe(n,e,t=!1){if(Gd(n.app))return Promise.reject(Tg(n));const r=km(n),i=$Te(r,e),o=await new qTe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QTe=600*1e3;class ZTe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eAe(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Hle(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ol(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QTe&&this.cachedEventUids.clear(),this.cachedEventUids.has(HK(e))}saveEventToCache(e){this.cachedEventUids.add(HK(e)),this.lastProcessedEventTime=Date.now()}}function HK(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Hle({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eAe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hle(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tAe(n,e={}){return zu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nAe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rAe=/^https?/;async function iAe(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tAe(n);for(const t of e)try{if(sAe(t))return}catch{}sm(n,"unauthorized-domain")}function sAe(n){const e=gB(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!rAe.test(t))return!1;if(nAe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oAe=new sA(3e4,6e4);function WK(){const n=$i().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aAe(n){return new Promise((e,t)=>{var i,s,o;function r(){WK(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WK(),t(Ol(n,"network-request-failed"))},timeout:oAe.get()})}if((s=(i=$i().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=$i().gapi)!=null&&o.load)r();else{const a=Ale("iframefcb");return $i()[a]=()=>{gapi.load?r():t(Ol(n,"network-request-failed"))},X9(`${q2e()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw aP=null,e})}let aP=null;function lAe(n){return aP=aP||aAe(n),aP}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cAe=new sA(5e3,15e3),uAe="__/auth/iframe",dAe="emulator/auth/iframe",hAe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fAe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mAe(n){const e=n.config;Nt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?G9(e,dAe):`https://${n.config.authDomain}/${uAe}`,r={apiKey:e.apiKey,appName:n.name,v:iA},i=fAe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${sS(r).slice(1)}`}async function pAe(n){const e=await lAe(n),t=$i().gapi;return Nt(t,n,"internal-error"),e.open({where:document.body,url:mAe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hAe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ol(n,"network-request-failed"),a=$i().setTimeout(()=>{s(o)},cAe.get());function c(){$i().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gAe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vAe=500,yAe=600,xAe="_blank",bAe="http://localhost";class qK{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wAe(n,e,t,r=vAe,i=yAe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...gAe,width:r.toString(),height:i.toString(),top:s,left:o},u=Ko().toLowerCase();t&&(a=wle(u)?xAe:t),xle(u)&&(e=e||bAe,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[p,x])=>`${f}${p}=${x},`,"");if(D2e(u)&&a!=="_self")return _Ae(e||"",a),new qK(null);const h=window.open(e||"",a,d);Nt(h,n,"popup-blocked");try{h.focus()}catch{}return new qK(h)}function _Ae(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SAe="__/auth/handler",kAe="emulator/auth/handler",CAe=encodeURIComponent("fac");async function GK(n,e,t,r,i,s){Nt(n.config.authDomain,n,"auth-domain-config-required"),Nt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:iA,eventId:i};if(e instanceof Ple){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",rEe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof aA){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await n._getAppCheckToken(),u=c?`#${CAe}=${encodeURIComponent(c)}`:"";return`${EAe(n)}?${sS(a).slice(1)}${u}`}function EAe({config:n}){return n.emulator?G9(n,kAe):`https://${n.authDomain}/${SAe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="webStorageSupport";class TAe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fle,this._completeRedirectFn=JTe,this._overrideRedirectResult=KTe}async _openPopup(e,t,r,i){var o;om((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await GK(e,t,r,gB(),i);return wAe(e,s,Q9())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await GK(e,t,r,gB(),i);return wTe(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(om(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await pAe(e),r=new ZTe(e);return t.register("authEvent",i=>(Nt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(D4,{type:D4},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[D4];s!==void 0&&t(!!s),sm(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iAe(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ele()||ble()||Y9()}}const AAe=TAe;var KK="@firebase/auth",YK="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NAe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jAe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PAe(n){YC(new a_("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Nt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tle(n)},u=new U2e(r,i,s,c);return rTe(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),YC(new a_("auth-internal",e=>{const t=km(e.getProvider("auth").getImmediate());return(r=>new NAe(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),iw(KK,YK,jAe(n)),iw(KK,YK,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IAe=300,OAe=ele("authIdTokenMaxAge")||IAe;let XK=null;const RAe=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>OAe)return;const i=t==null?void 0:t.token;XK!==i&&(XK=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MAe(n=s2e()){const e=ile(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nTe(n,{popupRedirectResolver:AAe,persistence:[jTe,yTe,Fle]}),r=ele("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=RAe(s.toString());pTe(t,o,()=>o(t.currentUser)),mTe(t,a=>o(a))}}const i=VCe("auth");return i&&iTe(t,`http://${i}`),t}function DAe(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}z2e({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ol("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",DAe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PAe("Browser");const LAe={apiKey:"AIzaSyA0-0wKS1wvKRnc17J_g6izwwXf5EUmqPY",authDomain:"tourimate-93472.firebaseapp.com",projectId:"tourimate-93472",storageBucket:"tourimate-93472.firebasestorage.app",messagingSenderId:"380950364483",appId:"1:380950364483:web:bd4a3eb8dcd0ba4563eff6"},FAe=sle(LAe),cA=MAe(FAe);cA.languageCode="vi";let bg=null;const _C=()=>{if(bg)return bg;const n=document.getElementById("recaptcha-container");return n&&(n.innerHTML=""),bg=new DTe(cA,"recaptcha-container",{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")}}),bg},BAe=()=>{try{if(bg){try{bg.clear()}catch{}bg=null}try{const t=window.grecaptcha;t&&typeof t.reset=="function"&&t.reset()}catch{}const n=document.getElementById("recaptcha-container");n&&(n.innerHTML="");const e=document.querySelector(".grecaptcha-badge");if(e&&e.parentElement)try{e.parentElement.removeChild(e)}catch{}}catch{}},$Ae=n=>{let e=n.replace(/[\s\-\(\)]/g,"");return e.startsWith("+84")?e:e.startsWith("84")?"+"+e:e.startsWith("0")?"+84"+e.substring(1):"+84"+e},Wle=async n=>{try{const e=bg||_C(),t=$Ae(n);console.log("Sending OTP to:",t);const r=await BTe(cA,t,e);return console.log("OTP sent successfully"),r.verificationId}catch(e){throw console.error("Error sending OTP:",e),new Error(e.message||"Gửi OTP thất bại. Vui lòng thử lại.")}},qle=async(n,e)=>{try{const t=M0.credential(n,e);return(await Rle(cA,t)).user}catch(t){throw console.error("Error verifying OTP:",t),new Error("Mã OTP không hợp lệ hoặc đã hết hạn.")}},Gle=async()=>{const n=cA.currentUser;if(!n)throw new Error("No user logged in");return await n.getIdToken()};function VAe(){const{register:n,handleSubmit:e,watch:t}=O9({defaultValues:{phoneNumberE164:"",password:"",confirmPassword:"",firstName:"",lastName:"",acceptEmailMarketing:!0,acceptTerms:!1,email:"",code:""}}),[r,i]=S.useState(!1),[s,o]=S.useState(!1),a=t("phoneNumberE164"),[c,u]=S.useState(0),d=90,[h,f]=S.useState(!1),[p,x]=S.useState(!1),[y,b]=S.useState(null),_=li(),C=zl(),k=()=>{BAe()};S.useEffect(()=>{if(c<=0)return;const N=setInterval(()=>u(P=>P>0?P-1:0),1e3);return()=>clearInterval(N)},[c]),S.useEffect(()=>{try{console.log("Setting up reCAPTCHA..."),k(),_C(),console.log("reCAPTCHA setup successfully")}catch(N){if(console.error("Failed to setup reCAPTCHA:",N),String((N==null?void 0:N.message)||"").includes("already been rendered"))try{k(),_C(),console.log("reCAPTCHA re-setup after render conflict");return}catch{}Ae.error("Không thể khởi tạo xác thực. Vui lòng tải lại trang.")}},[]);const T=async()=>{if(s||c>0)return;if(!a){Ae.error("Vui lòng nhập số điện thoại");return}if(!/^(\+84|84|0)[1-9][0-9]{8,9}$/.test(a)){Ae.error("Số điện thoại không đúng định dạng. Vui lòng nhập số Việt Nam hợp lệ (VD: 0123456789, +84123456789).");return}let P=!1;const M=async()=>{o(!0);try{const O=await Wle(a);b(O),Ae.success("Đã gửi mã OTP. Vui lòng kiểm tra SMS."),u(d),k()}catch(O){const q=O.message||"Gửi OTP thất bại";if(console.error("Error sending OTP:",q),!P&&q.includes("already been rendered")){P=!0,k();try{return _C(),await new Promise(D=>setTimeout(D,150)),await M()}catch{Ae.error("Không thể khởi tạo lại xác thực. Tải lại trang giúp mình nhé.")}}else Ae.error(q)}finally{o(!1)}};await M()},E=async N=>{var M;if(r)return;if(!/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(N.password)){Ae.error("Mật khẩu phải ít nhất 8 ký tự.");return}if(!N.acceptTerms){Ae.error("Vui lòng đồng ý điều khoản và chính sách.");return}if(N.password!==N.confirmPassword){Ae.error("Mật khẩu nhập lại không khớp.");return}if(!y){Ae.error("Vui lòng gửi mã OTP trước.");return}if(!N.code||N.code.length<6){Ae.error("Vui lòng nhập mã OTP đầy đủ (6 chữ số).");return}i(!0);try{try{await qle(y,N.code)}catch(K){const ee=(K==null?void 0:K.code)==="auth/invalid-verification-code"?"Mã OTP không đúng. Vui lòng kiểm tra và thử lại.":(K==null?void 0:K.code)==="auth/code-expired"?"Mã OTP đã hết hạn. Vui lòng gửi lại mã mới.":"Xác minh OTP thất bại. Vui lòng thử lại.";Ae.error(ee);return}const O=await Gle(),q={phoneNumberE164:N.phoneNumberE164,password:N.password,firstName:N.firstName,lastName:N.lastName,acceptEmailMarketing:!!N.acceptEmailMarketing,email:N.email||void 0,firebaseIdToken:O},D=await lI.register(q);localStorage.setItem("accessToken",D.accessToken),D.refreshToken&&localStorage.setItem("refreshToken",D.refreshToken),D.refreshTokenExpiresAt&&localStorage.setItem("refreshTokenExpiresAt",String(D.refreshTokenExpiresAt)),Ae.success("Đăng ký thành công! Đang chuyển hướng...");const F=(M=C.state)==null?void 0:M.from;setTimeout(F?()=>{_(F,{replace:!0})}:()=>{_("/")},1e3)}catch(O){Ae.error(O.message||"Đăng ký thất bại")}finally{i(!1)}};return l.jsxs("div",{className:"min-h-[100dvh] w-full relative overflow-hidden",children:[l.jsx(Ks,{hideRegister:!0}),l.jsx("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://cdn.builder.io/api/v1/image/assets/TEMP/1a09124bf5c1d065e204bde5e60af8d4a7ebfba4?width=2878')"}}),l.jsx("div",{className:"relative z-10 flex items-center justify-center py-2 px-3 sm:px-4 lg:px-5",children:l.jsxs("div",{className:"max-w-[80vw] min-w-[280px] max-h-[85vh] overflow-auto glassmorphism rounded-[24px] p-3 sm:p-4 md:p-6 lg:p-7 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4 sm:mb-5 md:mb-6",children:[l.jsx("img",{src:"/logo.png",alt:"TouriMate",className:"h-20 w-auto"}),l.jsx("h1",{className:"text-gradient-login text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold leading-none",children:"Đăng Ký"})]}),l.jsx("div",{id:"recaptcha-container",style:{display:"none"}}),l.jsxs("form",{onSubmit:e(E),className:"space-y-2.5 sm:space-y-3.5 md:space-y-4",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-3.5",children:[l.jsx("div",{className:"relative",children:l.jsx("input",{type:"text",...n("lastName",{required:!0}),className:"w-full h-[32px] sm:h-[36px] md:h-[40px] bg-white rounded-[24px] px-3 sm:px-3.5 md:px-4 text-black  text-xs sm:text-sm md:text-base lg:text-[16px] leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Họ"})}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"text",...n("firstName",{required:!0}),className:"w-full h-[32px] sm:h-[36px] md:h-[40px] bg-white rounded-[24px] px-3 sm:px-3.5 md:px-4 text-black  text-xs sm:text-sm md:text-base lg:text-[16px] leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Tên"})})]}),l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"tel",...n("phoneNumberE164",{required:!0}),className:"flex-1 h-[32px] sm:h-[36px] md:h-[40px] bg-white rounded-[24px] px-3 sm:px-3.5 md:px-4 text-black  text-xs sm:text-sm md:text-base lg:text-[16px] leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Số điện thoại (VD: 0123456789 hoặc +84123456789)"}),l.jsx("button",{type:"button",onClick:T,disabled:s||c>0,className:"px-2 sm:px-3 md:px-3.5 h-[32px] sm:h-[36px] md:h-[40px] bg-[#0b4f85] text-white rounded-[24px] font-saira text-[11px] sm:text-xs md:text-sm font-bold shadow-md hover:bg-[#0a4676] transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:scale-100",children:s?l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Đang gửi..."]}):c>0?l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Gửi lại sau ",Math.floor(c/60),":",String(c%60).padStart(2,"0")]}):"Gửi OTP"})]})}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"text",...n("code",{required:!0}),className:"w-full h-[32px] sm:h-[36px] md:h-[40px] bg-white rounded-[24px] px-3 sm:px-3.5 md:px-4 text-black  text-xs sm:text-sm md:text-base lg:text-[16px] leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Mã OTP"})}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"email",...n("email"),className:"w-full h-[32px] sm:h-[36px] md:h-[40px] bg-white rounded-[24px] px-3 sm:px-3.5 md:px-4 text-black  text-xs sm:text-sm md:text-base lg:text-[16px] leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Email (tùy chọn)"})}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:h?"text":"password",...n("password",{required:!0}),className:"w-full h-[32px] sm:h-[36px] md:h-[40px] bg-white rounded-[24px] pr-10 px-3 sm:px-3.5 md:px-4 text-black  text-xs sm:text-sm md:text-base lg:text-[16px] leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Mật khẩu"}),l.jsx("button",{type:"button",onClick:()=>f(N=>!N),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800",children:h?l.jsx(pK,{size:18}):l.jsx(Ts,{size:18})})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:p?"text":"password",...n("confirmPassword",{required:!0}),className:"w-full h-[32px] sm:h-[36px] md:h-[40px] bg-white rounded-[24px] pr-10 px-3 sm:px-3.5 md:px-4 text-black  text-xs sm:text-sm md:text-base lg:text-[16px] leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Nhập lại mật khẩu"}),l.jsx("button",{type:"button",onClick:()=>x(N=>!N),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800",children:p?l.jsx(pK,{size:18}):l.jsx(Ts,{size:18})})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,...n("acceptEmailMarketing"),className:"w-4 h-4 sm:w-5 sm:h-5 accent-[#0b4f85] border border-gray-300 rounded focus:ring-2 focus:ring-[#0b4f85]/30"}),l.jsx("span",{className:"text-black font-inter text-[11px] sm:text-xs md:text-sm font-normal",children:"Nhận email khuyến mãi"})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",...n("acceptTerms",{required:!0}),className:"mt-1 w-4 h-4 sm:w-5 sm:h-5 accent-[#0b4f85] border border-gray-300 rounded focus:ring-2 focus:ring-[#0b4f85]/30"}),l.jsxs("span",{className:"text-black font-inter text-[11px] sm:text-xs md:text-sm font-normal",children:["Tôi đã đọc và đồng ý với"," ",l.jsx("a",{href:"/terms",className:"text-[#0b4f85] underline",children:"điều khoản sử dụng"})," ","và"," ",l.jsx("a",{href:"/privacy",className:"text-[#0b4f85] underline",children:"chính sách bảo mật"}),"."]})]}),l.jsx("div",{className:"pt-2 sm:pt-3 md:pt-4",children:l.jsx("button",{type:"submit",disabled:r,className:"w-full max-w-[180px] h-[36px] sm:h-[40px] md:h-[44px] bg-[#0b4f85] text-white rounded-[28px] mx-auto block shadow-lg hover:bg-[#0a4676] transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:scale-100",children:l.jsx("span",{className:"font-saira text-xs sm:text-sm md:text-base lg:text-[18px] font-bold flex items-center justify-center gap-2",children:r?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Đang xử lý..."]}):"Đăng ký"})})}),l.jsxs("div",{className:"text-center pt-3 sm:pt-4 md:pt-5 flex items-center justify-center gap-4",children:[l.jsxs(r_,{to:"/",className:"inline-flex items-center gap-1.5 text-black font-nunito font-bold hover:opacity-80 transition-opacity",children:[l.jsx(rh,{className:"w-4 h-4"}),"Về trang chủ"]}),l.jsx("span",{className:"text-black/20",children:"|"}),l.jsxs(r_,{to:"/login",className:"inline-flex items-center gap-1.5 text-black font-nunito font-bold hover:opacity-80 transition-opacity",children:[l.jsx(Hae,{className:"w-4 h-4"}),"Đã có tài khoản? Đăng nhập"]})]})]})]})})]})}function UAe(){const n=li(),{register:e,handleSubmit:t,watch:r}=O9({defaultValues:{phoneNumberE164:"",code:"",newPassword:"",confirmPassword:""}}),[i,s]=S.useState(!1),[o,a]=S.useState(0),c=90,[u,d]=S.useState(!1),[h,f]=S.useState(null),p=r("phoneNumberE164");S.useEffect(()=>{try{_C()}catch(b){console.error("Failed to setup reCAPTCHA:",b),Ae.error("Không thể khởi tạo xác thực. Vui lòng tải lại trang.")}},[]),S.useEffect(()=>{if(o<=0)return;const b=setInterval(()=>a(_=>_>0?_-1:0),1e3);return()=>clearInterval(b)},[o]);const x=async()=>{var b;if(!i){if(!p){Ae.error("Vui lòng nhập số điện thoại");return}try{const{exists:_}=await lI.checkPhoneExists(p);if(!_){Ae.error("Số điện thoại không tồn tại trong hệ thống.");return}}catch(_){Ae.error(_.message||"Không thể kiểm tra số điện thoại");return}s(!0);try{const _=await Wle(p);f(_),Ae.success("Đã gửi mã OTP. Vui lòng kiểm tra SMS."),a(c);const C=window;try{(b=C.recaptchaVerifier)==null||b.clear(),C.recaptchaVerifier=null}catch{}}catch(_){Ae.error(_.message||"Gửi OTP thất bại")}finally{s(!1)}}},y=async b=>{const _=b.newPassword||"";if(!/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(_)){Ae.error("Mật khẩu phải ít nhất 8 ký tự.");return}if(b.newPassword!==b.confirmPassword){Ae.error("Mật khẩu nhập lại không khớp.");return}if(!h){Ae.error("Vui lòng gửi mã OTP trước.");return}if(!b.code||b.code.length<6){Ae.error("Vui lòng nhập mã OTP đầy đủ (6 chữ số).");return}d(!0);try{try{await qle(h,b.code)}catch(E){const N=(E==null?void 0:E.code)==="auth/invalid-verification-code"?"Mã OTP không đúng. Vui lòng kiểm tra và thử lại.":(E==null?void 0:E.code)==="auth/code-expired"?"Mã OTP đã hết hạn. Vui lòng gửi lại mã mới.":"Xác minh OTP thất bại. Vui lòng thử lại.";Ae.error(N);return}const k=await Gle(),T={phoneNumberE164:b.phoneNumberE164,firebaseIdToken:k,newPassword:b.newPassword};await lI.forgotVerify(T),Ae.success("Đặt lại mật khẩu thành công. Hãy đăng nhập."),setTimeout(()=>n("/login"),800)}catch(k){Ae.error(k.message||"Xác minh OTP thất bại")}finally{d(!1)}};return l.jsxs("div",{className:"min-h-[100dvh] w-full relative overflow-hidden",children:[l.jsx(Ks,{}),l.jsx("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://cdn.builder.io/api/v1/image/assets/TEMP/1a09124bf5c1d065e204bde5e60af8d4a7ebfba4?width=2878')"}}),l.jsx("div",{className:"relative z-10 flex items-center justify-center py-2 px-3 sm:px-4 lg:px-5",children:l.jsxs("div",{className:"max-w-[80vw] min-w-[280px] max-h-[85vh] overflow-auto glassmorphism rounded-[24px] p-3 sm:p-4 md:p-6 lg:p-7 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4 sm:mb-5 md:mb-6",children:[l.jsx("img",{src:"/logo.png",alt:"TouriMate",className:"h-12 w-auto"}),l.jsx("h1",{className:"text-gradient-login text-base sm:text-lg md:text-xl lg:text-2xl font-bold leading-none",children:"Quên mật khẩu"})]}),l.jsxs("form",{onSubmit:t(y),className:"space-y-3 sm:space-y-3.5 md:space-y-4",children:[l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{className:"flex-1 h-[30px] sm:h-[34px] md:h-[38px] bg-white rounded-[22px] px-2.5 sm:px-3 md:px-3.5 text-black text-xs sm:text-sm md:text-base leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Số điện thoại (+84 hoặc 0...)",...e("phoneNumberE164",{required:!0})}),l.jsx("button",{type:"button",onClick:x,disabled:i||o>0,className:"px-2 sm:px-3 md:px-3.5 h-[30px] sm:h-[34px] md:h-[38px] bg-[#0b4f85] text-white rounded-[22px] font-saira text-[11px] sm:text-xs md:text-sm font-bold shadow-md hover:bg-[#0a4676] transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:i?"Đang gửi...":o>0?`Gửi lại sau ${Math.floor(o/60)}:${String(o%60).padStart(2,"0")}`:"Gửi OTP"})]})}),l.jsx("div",{className:"relative",children:l.jsx("input",{className:"w-full h-[30px] sm:h-[34px] md:h-[38px] bg-white rounded-[22px] px-2.5 sm:px-3 md:px-3.5 text-black text-xs sm:text-sm md:text-base leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Mã OTP",...e("code",{required:!0})})}),l.jsx("div",{className:"relative",children:l.jsx("input",{className:"w-full h-[30px] sm:h-[34px] md:h-[38px] bg-white rounded-[22px] px-2.5 sm:px-3 md:px-3.5 text-black text-xs sm:text-sm md:text-base leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Mật khẩu mới",type:"password",...e("newPassword",{required:!0})})}),l.jsx("div",{className:"relative",children:l.jsx("input",{className:"w-full h-[30px] sm:h-[34px] md:h-[38px] bg-white rounded-[22px] px-2.5 sm:px-3 md:px-3.5 text-black text-xs sm:text-sm md:text-base leading-normal focus:outline-none focus:ring-2 focus:ring-login-gradient-start/50 transition-all duration-200",placeholder:"Nhập lại mật khẩu mới",type:"password",...e("confirmPassword",{required:!0})})}),l.jsx("div",{className:"pt-1 sm:pt-2 md:pt-3",children:l.jsx("button",{disabled:u,className:"w-full max-w-[170px] h-[34px] sm:h-[38px] md:h-[42px] bg-[#0b4f85] text-white rounded-[26px] mx-auto block shadow-lg hover:bg-[#0a4676] transition-all font-saira text-[11px] sm:text-xs md:text-sm lg:text-[16px] font-bold disabled:opacity-60",children:u?"Đang xử lý...":"Xác nhận"})}),l.jsx("div",{id:"recaptcha-container",style:{display:"none"}}),l.jsxs("div",{className:"text-center pt-3 sm:pt-4 md:pt-5 flex items-center justify-center gap-4",children:[l.jsxs(r_,{to:"/",className:"inline-flex items-center gap-1.5 text-black font-nunito font-bold hover:opacity-80 transition-opacity",children:[l.jsx(rh,{className:"w-4 h-4"}),"Về trang chủ"]}),l.jsx("span",{className:"text-black/20",children:"|"}),l.jsxs(r_,{to:"/login",className:"inline-flex items-center gap-1.5 text-black font-nunito font-bold hover:opacity-80 transition-opacity",children:[l.jsx(Hae,{className:"w-4 h-4"}),"Đã có tài khoản? Đăng nhập"]})]})]})]})})]})}const zAe=1,HAe=1e6;let L4=0;function WAe(){return L4=(L4+1)%Number.MAX_SAFE_INTEGER,L4.toString()}const F4=new Map,JK=n=>{if(F4.has(n))return;const e=setTimeout(()=>{F4.delete(n),SC({type:"REMOVE_TOAST",toastId:n})},HAe);F4.set(n,e)},qAe=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,zAe)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?JK(t):n.toasts.forEach(r=>{JK(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},lP=[];let cP={toasts:[]};function SC(n){cP=qAe(cP,n),lP.forEach(e=>{e(cP)})}function GAe({...n}){const e=WAe(),t=i=>SC({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>SC({type:"DISMISS_TOAST",toastId:e});return SC({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function tU(){const[n,e]=S.useState(cP);return S.useEffect(()=>(lP.push(e),()=>{const t=lP.indexOf(e);t>-1&&lP.splice(t,1)}),[n]),{...n,toast:GAe,dismiss:t=>SC({type:"DISMISS_TOAST",toastId:t})}}function st(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function QK(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function am(...n){return e=>{let t=!1;const r=n.map(i=>{const s=QK(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():QK(n[i],null)}}}}function an(...n){return S.useCallback(am(...n),n)}function KAe(n,e){const t=S.createContext(e),r=s=>{const{children:o,...a}=s,c=S.useMemo(()=>a,Object.values(a));return l.jsx(t.Provider,{value:c,children:o})};r.displayName=n+"Provider";function i(s){const o=S.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function _o(n,e=[]){let t=[];function r(s,o){const a=S.createContext(o),c=t.length;t=[...t,o];const u=h=>{var _;const{scope:f,children:p,...x}=h,y=((_=f==null?void 0:f[n])==null?void 0:_[c])||a,b=S.useMemo(()=>x,Object.values(x));return l.jsx(y.Provider,{value:b,children:p})};u.displayName=s+"Provider";function d(h,f){var y;const p=((y=f==null?void 0:f[n])==null?void 0:y[c])||a,x=S.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=t.map(o=>S.createContext(o));return function(a){const c=(a==null?void 0:a[n])||s;return S.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return i.scopeName=n,[r,YAe(i,...e)]}function YAe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(s)[`__scope${u}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Rg(n){const e=JAe(n),t=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),c=a.find(QAe);if(c){const u=c.props.children,d=a.map(h=>h===c?S.Children.count(u)>1?S.Children.only(null):S.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...o,ref:i,children:S.isValidElement(u)?S.cloneElement(u,void 0,d):null})}return l.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var XAe=Rg("Slot");function JAe(n){const e=S.forwardRef((t,r)=>{const{children:i,...s}=t;if(S.isValidElement(i)){const o=eNe(i),a=ZAe(s,i.props);return i.type!==S.Fragment&&(a.ref=r?am(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Kle=Symbol("radix.slottable");function Yle(n){const e=({children:t})=>l.jsx(l.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=Kle,e}function QAe(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Kle}function ZAe(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function eNe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function uA(n){const e=n+"CollectionProvider",[t,r]=_o(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:b,children:_}=y,C=re.useRef(null),k=re.useRef(new Map).current;return l.jsx(i,{scope:b,itemMap:k,collectionRef:C,children:_})};o.displayName=e;const a=n+"CollectionSlot",c=Rg(a),u=re.forwardRef((y,b)=>{const{scope:_,children:C}=y,k=s(a,_),T=an(b,k.collectionRef);return l.jsx(c,{ref:T,children:C})});u.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=Rg(d),p=re.forwardRef((y,b)=>{const{scope:_,children:C,...k}=y,T=re.useRef(null),E=an(b,T),N=s(d,_);return re.useEffect(()=>(N.itemMap.set(T,{ref:T,...k}),()=>void N.itemMap.delete(T))),l.jsx(f,{[h]:"",ref:E,children:C})});p.displayName=d;function x(y){const b=s(n+"CollectionConsumer",y);return re.useCallback(()=>{const C=b.collectionRef.current;if(!C)return[];const k=Array.from(C.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((N,P)=>k.indexOf(N.ref.current)-k.indexOf(P.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},x,r]}var tNe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kt=tNe.reduce((n,e)=>{const t=Rg(`Primitive.${e}`),r=S.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function nU(n,e){n&&tS.flushSync(()=>n.dispatchEvent(e))}function Yo(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function nNe(n,e=globalThis==null?void 0:globalThis.document){const t=Yo(n);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var rNe="DismissableLayer",xB="dismissableLayer.update",iNe="dismissableLayer.pointerDownOutside",sNe="dismissableLayer.focusOutside",ZK,Xle=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cx=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=n,u=S.useContext(Xle),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=S.useState({}),x=an(e,P=>h(P)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(b),C=d?y.indexOf(d):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,T=C>=_,E=aNe(P=>{const M=P.target,O=[...u.branches].some(q=>q.contains(M));!T||O||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),N=lNe(P=>{const M=P.target;[...u.branches].some(q=>q.contains(M))||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return nNe(P=>{C===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ZK=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),eY(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ZK)}},[d,f,t,u]),S.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),eY())},[d,u]),S.useEffect(()=>{const P=()=>p({});return document.addEventListener(xB,P),()=>document.removeEventListener(xB,P)},[]),l.jsx(kt.div,{...c,ref:x,style:{pointerEvents:k?T?"auto":"none":void 0,...n.style},onFocusCapture:st(n.onFocusCapture,N.onFocusCapture),onBlurCapture:st(n.onBlurCapture,N.onBlurCapture),onPointerDownCapture:st(n.onPointerDownCapture,E.onPointerDownCapture)})});cx.displayName=rNe;var oNe="DismissableLayerBranch",Jle=S.forwardRef((n,e)=>{const t=S.useContext(Xle),r=S.useRef(null),i=an(e,r);return S.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),l.jsx(kt.div,{...n,ref:i})});Jle.displayName=oNe;function aNe(n,e=globalThis==null?void 0:globalThis.document){const t=Yo(n),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){Qle(iNe,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function lNe(n,e=globalThis==null?void 0:globalThis.document){const t=Yo(n),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&Qle(sNe,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function eY(){const n=new CustomEvent(xB);document.dispatchEvent(n)}function Qle(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?nU(i,s):i.dispatchEvent(s)}var cNe=cx,uNe=Jle,Wi=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},dNe="Portal",oS=S.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=S.useState(!1);Wi(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?R9.createPortal(l.jsx(kt.div,{...r,ref:e}),o):null});oS.displayName=dNe;function hNe(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var Da=n=>{const{present:e,children:t}=n,r=fNe(e),i=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),s=an(r.ref,mNe(i));return typeof t=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};Da.displayName="Presence";function fNe(n){const[e,t]=S.useState(),r=S.useRef(null),i=S.useRef(n),s=S.useRef("none"),o=n?"mounted":"unmounted",[a,c]=hNe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const u=aj(r.current);s.current=a==="mounted"?u:"none"},[a]),Wi(()=>{const u=r.current,d=i.current;if(d!==n){const f=s.current,p=aj(u);n?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),Wi(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const y=aj(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&y&&(c("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=p=>{p.target===e&&(s.current=aj(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function aj(n){return(n==null?void 0:n.animationName)||"none"}function mNe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var pNe=T9[" useInsertionEffect ".trim().toString()]||Wi;function Pu({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=gNe({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:i;{const d=S.useRef(n!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=S.useCallback(d=>{var h;if(a){const f=vNe(d)?d(n):d;f!==n&&((h=o.current)==null||h.call(o,f))}else s(d)},[a,n,s,o]);return[c,u]}function gNe({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),i=S.useRef(t),s=S.useRef(e);return pNe(()=>{s.current=e},[e]),S.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function vNe(n){return typeof n=="function"}var Zle=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yNe="VisuallyHidden",XR=S.forwardRef((n,e)=>l.jsx(kt.span,{...n,ref:e,style:{...Zle,...n.style}}));XR.displayName=yNe;var xNe=XR,rU="ToastProvider",[iU,bNe,wNe]=uA("Toast"),[ece]=_o("Toast",[wNe]),[_Ne,JR]=ece(rU),tce=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,c]=S.useState(null),[u,d]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${rU}\`. Expected non-empty \`string\`.`),l.jsx(iU.Provider,{scope:e,children:l.jsx(_Ne,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:S.useCallback(()=>d(p=>p+1),[]),onToastRemove:S.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};tce.displayName=rU;var nce="ToastViewport",SNe=["F8"],bB="toast.viewportPause",wB="toast.viewportResume",rce=S.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=SNe,label:i="Notifications ({hotkey})",...s}=n,o=JR(nce,t),a=bNe(t),c=S.useRef(null),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=an(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;S.useEffect(()=>{const b=_=>{var k;r.length!==0&&r.every(T=>_[T]||_.code===T)&&((k=h.current)==null||k.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),S.useEffect(()=>{const b=c.current,_=h.current;if(x&&b&&_){const C=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(bB);_.dispatchEvent(N),o.isClosePausedRef.current=!0}},k=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(wB);_.dispatchEvent(N),o.isClosePausedRef.current=!1}},T=N=>{!b.contains(N.relatedTarget)&&k()},E=()=>{b.contains(document.activeElement)||k()};return b.addEventListener("focusin",C),b.addEventListener("focusout",T),b.addEventListener("pointermove",C),b.addEventListener("pointerleave",E),window.addEventListener("blur",C),window.addEventListener("focus",k),()=>{b.removeEventListener("focusin",C),b.removeEventListener("focusout",T),b.removeEventListener("pointermove",C),b.removeEventListener("pointerleave",E),window.removeEventListener("blur",C),window.removeEventListener("focus",k)}}},[x,o.isClosePausedRef]);const y=S.useCallback(({tabbingDirection:b})=>{const C=a().map(k=>{const T=k.ref.current,E=[T,...DNe(T)];return b==="forwards"?E:E.reverse()});return(b==="forwards"?C.reverse():C).flat()},[a]);return S.useEffect(()=>{const b=h.current;if(b){const _=C=>{var E,N,P;const k=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!k){const M=document.activeElement,O=C.shiftKey;if(C.target===b&&O){(E=u.current)==null||E.focus();return}const F=y({tabbingDirection:O?"backwards":"forwards"}),K=F.findIndex(ee=>ee===M);B4(F.slice(K+1))?C.preventDefault():O?(N=u.current)==null||N.focus():(P=d.current)==null||P.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[a,y]),l.jsxs(uNe,{ref:c,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&l.jsx(_B,{ref:u,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"forwards"});B4(b)}}),l.jsx(iU.Slot,{scope:t,children:l.jsx(kt.ol,{tabIndex:-1,...s,ref:f})}),x&&l.jsx(_B,{ref:d,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"backwards"});B4(b)}})]})});rce.displayName=nce;var ice="ToastFocusProxy",_B=S.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=JR(ice,t);return l.jsx(XR,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});_B.displayName=ice;var dA="Toast",kNe="toast.swipeStart",CNe="toast.swipeMove",ENe="toast.swipeCancel",TNe="toast.swipeEnd",sce=S.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,c]=Pu({prop:r,defaultProp:i??!0,onChange:s,caller:dA});return l.jsx(Da,{present:t||a,children:l.jsx(jNe,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:Yo(n.onPause),onResume:Yo(n.onResume),onSwipeStart:st(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:st(n.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:st(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:st(n.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});sce.displayName=dA;var[ANe,NNe]=ece(dA,{onClose(){}}),jNe=S.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...x}=n,y=JR(dA,t),[b,_]=S.useState(null),C=an(e,ee=>_(ee)),k=S.useRef(null),T=S.useRef(null),E=i||y.duration,N=S.useRef(0),P=S.useRef(E),M=S.useRef(0),{onToastAdd:O,onToastRemove:q}=y,D=Yo(()=>{var Y;(b==null?void 0:b.contains(document.activeElement))&&((Y=y.viewport)==null||Y.focus()),o()}),F=S.useCallback(ee=>{!ee||ee===1/0||(window.clearTimeout(M.current),N.current=new Date().getTime(),M.current=window.setTimeout(D,ee))},[D]);S.useEffect(()=>{const ee=y.viewport;if(ee){const Y=()=>{F(P.current),u==null||u()},U=()=>{const R=new Date().getTime()-N.current;P.current=P.current-R,window.clearTimeout(M.current),c==null||c()};return ee.addEventListener(bB,U),ee.addEventListener(wB,Y),()=>{ee.removeEventListener(bB,U),ee.removeEventListener(wB,Y)}}},[y.viewport,E,c,u,F]),S.useEffect(()=>{s&&!y.isClosePausedRef.current&&F(E)},[s,E,y.isClosePausedRef,F]),S.useEffect(()=>(O(),()=>q()),[O,q]);const K=S.useMemo(()=>b?hce(b):null,[b]);return y.viewport?l.jsxs(l.Fragment,{children:[K&&l.jsx(PNe,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:K}),l.jsx(ANe,{scope:t,onClose:D,children:tS.createPortal(l.jsx(iU.ItemSlot,{scope:t,children:l.jsx(cNe,{asChild:!0,onEscapeKeyDown:st(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||D(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(kt.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...x,ref:C,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:st(n.onKeyDown,ee=>{ee.key==="Escape"&&(a==null||a(ee.nativeEvent),ee.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:st(n.onPointerDown,ee=>{ee.button===0&&(k.current={x:ee.clientX,y:ee.clientY})}),onPointerMove:st(n.onPointerMove,ee=>{if(!k.current)return;const Y=ee.clientX-k.current.x,U=ee.clientY-k.current.y,R=!!T.current,z=["left","right"].includes(y.swipeDirection),W=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,se=z?W(0,Y):0,ne=z?0:W(0,U),te=ee.pointerType==="touch"?10:2,H={x:se,y:ne},ce={originalEvent:ee,delta:H};R?(T.current=H,lj(CNe,h,ce,{discrete:!1})):tY(H,y.swipeDirection,te)?(T.current=H,lj(kNe,d,ce,{discrete:!1}),ee.target.setPointerCapture(ee.pointerId)):(Math.abs(Y)>te||Math.abs(U)>te)&&(k.current=null)}),onPointerUp:st(n.onPointerUp,ee=>{const Y=T.current,U=ee.target;if(U.hasPointerCapture(ee.pointerId)&&U.releasePointerCapture(ee.pointerId),T.current=null,k.current=null,Y){const R=ee.currentTarget,z={originalEvent:ee,delta:Y};tY(Y,y.swipeDirection,y.swipeThreshold)?lj(TNe,p,z,{discrete:!0}):lj(ENe,f,z,{discrete:!0}),R.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),PNe=n=>{const{__scopeToast:e,children:t,...r}=n,i=JR(dA,e),[s,o]=S.useState(!1),[a,c]=S.useState(!1);return RNe(()=>o(!0)),S.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:l.jsx(oS,{asChild:!0,children:l.jsx(XR,{...r,children:s&&l.jsxs(l.Fragment,{children:[i.label," ",t]})})})},INe="ToastTitle",oce=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(kt.div,{...r,ref:e})});oce.displayName=INe;var ONe="ToastDescription",ace=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(kt.div,{...r,ref:e})});ace.displayName=ONe;var lce="ToastAction",cce=S.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(dce,{altText:t,asChild:!0,children:l.jsx(sU,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${lce}\`. Expected non-empty \`string\`.`),null)});cce.displayName=lce;var uce="ToastClose",sU=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=NNe(uce,t);return l.jsx(dce,{asChild:!0,children:l.jsx(kt.button,{type:"button",...r,ref:e,onClick:st(n.onClick,i.onClose)})})});sU.displayName=uce;var dce=S.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return l.jsx(kt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function hce(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),MNe(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...hce(r))}}),e}function lj(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?nU(i,s):i.dispatchEvent(s)}var tY=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function RNe(n=()=>{}){const e=Yo(n);Wi(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function MNe(n){return n.nodeType===n.ELEMENT_NODE}function DNe(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function B4(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var LNe=tce,fce=rce,mce=sce,pce=oce,gce=ace,vce=cce,yce=sU;function xce(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=xce(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function rn(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=xce(n))&&(r&&(r+=" "),r+=e);return r}const nY=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,rY=rn,hA=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return rY(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=t==null?void 0:t[u],h=s==null?void 0:s[u];if(d===null)return null;const f=nY(d)||nY(h);return i[u][f]}),a=t&&Object.entries(t).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(x=>{let[y,b]=x;return Array.isArray(b)?b.includes({...s,...a}[y]):{...s,...a}[y]===b})?[...u,h,f]:u},[]);return rY(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)},oU="-",FNe=n=>{const e=$Ne(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(oU);return a[0]===""&&a.length!==1&&a.shift(),bce(a,e)||BNe(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},bce=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?bce(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(oU);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},iY=/^\[(.+)\]$/,BNe=n=>{if(iY.test(n)){const e=iY.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},$Ne=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return UNe(Object.entries(n.classGroups),t).forEach(([s,o])=>{SB(o,r,s,e)}),r},SB=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:sY(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(VNe(i)){SB(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{SB(o,sY(e,s),t,r)})})},sY=(n,e)=>{let t=n;return e.split(oU).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},VNe=n=>n.isThemeGetter,UNe=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,zNe=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},wce="!",HNe=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const c=[];let u=0,d=0,h;for(let b=0;b<a.length;b++){let _=a[b];if(u===0){if(_===i&&(r||a.slice(b,b+s)===e)){c.push(a.slice(d,b)),d=b+s;continue}if(_==="/"){h=b;continue}}_==="["?u++:_==="]"&&u--}const f=c.length===0?a:a.substring(d),p=f.startsWith(wce),x=p?f.substring(1):f,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:y}};return t?a=>t({className:a,parseClassName:o}):o},WNe=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},qNe=n=>({cache:zNe(n.cacheSize),parseClassName:HNe(n),...FNe(n)}),GNe=/\s+/,KNe=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(GNe);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=t(u);let x=!!p,y=r(x?f.substring(0,p):f);if(!y){if(!x){a=u+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=u+(a.length>0?" "+a:a);continue}x=!1}const b=WNe(d).join(":"),_=h?b+wce:b,C=_+y;if(s.includes(C))continue;s.push(C);const k=i(y,x);for(let T=0;T<k.length;++T){const E=k[T];s.push(_+E)}a=u+(a.length>0?" "+a:a)}return a};function YNe(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=_ce(e))&&(r&&(r+=" "),r+=t);return r}const _ce=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=_ce(n[r]))&&(t&&(t+=" "),t+=e);return t};function XNe(n,...e){let t,r,i,s=o;function o(c){const u=e.reduce((d,h)=>h(d),n());return t=qNe(u),r=t.cache.get,i=t.cache.set,s=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=KNe(c,t);return i(c,d),d}return function(){return s(YNe.apply(null,arguments))}}const Mr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Sce=/^\[(?:([a-z-]+):)?(.+)\]$/i,JNe=/^\d+\/\d+$/,QNe=new Set(["px","full","screen"]),ZNe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eje=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tje=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nje=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rje=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Uh=n=>lw(n)||QNe.has(n)||JNe.test(n),tp=n=>aS(n,"length",dje),lw=n=>!!n&&!Number.isNaN(Number(n)),$4=n=>aS(n,"number",lw),ok=n=>!!n&&Number.isInteger(Number(n)),ije=n=>n.endsWith("%")&&lw(n.slice(0,-1)),pn=n=>Sce.test(n),np=n=>ZNe.test(n),sje=new Set(["length","size","percentage"]),oje=n=>aS(n,sje,kce),aje=n=>aS(n,"position",kce),lje=new Set(["image","url"]),cje=n=>aS(n,lje,fje),uje=n=>aS(n,"",hje),ak=()=>!0,aS=(n,e,t)=>{const r=Sce.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},dje=n=>eje.test(n)&&!tje.test(n),kce=()=>!1,hje=n=>nje.test(n),fje=n=>rje.test(n),mje=()=>{const n=Mr("colors"),e=Mr("spacing"),t=Mr("blur"),r=Mr("brightness"),i=Mr("borderColor"),s=Mr("borderRadius"),o=Mr("borderSpacing"),a=Mr("borderWidth"),c=Mr("contrast"),u=Mr("grayscale"),d=Mr("hueRotate"),h=Mr("invert"),f=Mr("gap"),p=Mr("gradientColorStops"),x=Mr("gradientColorStopPositions"),y=Mr("inset"),b=Mr("margin"),_=Mr("opacity"),C=Mr("padding"),k=Mr("saturate"),T=Mr("scale"),E=Mr("sepia"),N=Mr("skew"),P=Mr("space"),M=Mr("translate"),O=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",pn,e],F=()=>[pn,e],K=()=>["",Uh,tp],ee=()=>["auto",lw,pn],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",pn],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[lw,pn];return{cacheSize:500,separator:":",theme:{colors:[ak],spacing:[Uh,tp],blur:["none","",np,pn],brightness:ne(),borderColor:[n],borderRadius:["none","","full",np,pn],borderSpacing:F(),borderWidth:K(),contrast:ne(),grayscale:W(),hueRotate:ne(),invert:W(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[ije,tp],inset:D(),margin:D(),opacity:ne(),padding:F(),saturate:ne(),scale:ne(),sepia:W(),skew:ne(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",pn]}],container:["container"],columns:[{columns:[np]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),pn]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ok,pn]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pn]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",ok,pn]}],"grid-cols":[{"grid-cols":[ak]}],"col-start-end":[{col:["auto",{span:["full",ok,pn]},pn]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[ak]}],"row-start-end":[{row:["auto",{span:[ok,pn]},pn]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pn]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pn,e]}],"min-w":[{"min-w":[pn,e,"min","max","fit"]}],"max-w":[{"max-w":[pn,e,"none","full","min","max","fit","prose",{screen:[np]},np]}],h:[{h:[pn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",np,tp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$4]}],"font-family":[{font:[ak]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pn]}],"line-clamp":[{"line-clamp":["none",lw,$4]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Uh,pn]}],"list-image":[{"list-image":["none",pn]}],"list-style-type":[{list:["none","disc","decimal",pn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Uh,tp]}],"underline-offset":[{"underline-offset":["auto",Uh,pn]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),aje]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oje]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cje]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Uh,pn]}],"outline-w":[{outline:[Uh,tp]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Uh,tp]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",np,uje]}],"shadow-color":[{shadow:[ak]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",np,pn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[k]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pn]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",pn]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",pn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[ok,pn]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pn]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Uh,tp,$4]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pje=XNe(mje);function Qe(...n){return pje(rn(n))}const gje=LNe,Cce=S.forwardRef(({className:n,...e},t)=>l.jsx(fce,{ref:t,className:Qe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Cce.displayName=fce.displayName;const vje=hA("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ece=S.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(mce,{ref:r,className:Qe(vje({variant:e}),n),...t}));Ece.displayName=mce.displayName;const yje=S.forwardRef(({className:n,...e},t)=>l.jsx(vce,{ref:t,className:Qe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));yje.displayName=vce.displayName;const Tce=S.forwardRef(({className:n,...e},t)=>l.jsx(yce,{ref:t,className:Qe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(si,{className:"h-4 w-4"})}));Tce.displayName=yce.displayName;const Ace=S.forwardRef(({className:n,...e},t)=>l.jsx(pce,{ref:t,className:Qe("text-sm font-semibold",n),...e}));Ace.displayName=pce.displayName;const Nce=S.forwardRef(({className:n,...e},t)=>l.jsx(gce,{ref:t,className:Qe("text-sm opacity-90",n),...e}));Nce.displayName=gce.displayName;function xje(){const{toasts:n}=tU();return l.jsxs(gje,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return l.jsxs(Ece,{...s,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Ace,{children:t}),r&&l.jsx(Nce,{children:r})]}),i,l.jsx(Tce,{})]},e)}),l.jsx(Cce,{})]})}var cj={},oY;function bje(){if(oY)return cj;oY=1;var n=kae();return cj.createRoot=n.createRoot,cj.hydrateRoot=n.hydrateRoot,cj}var wje=bje(),aY=["light","dark"],_je="(prefers-color-scheme: dark)",Sje=S.createContext(void 0),kje={setTheme:n=>{},themes:[]},Cje=()=>{var n;return(n=S.useContext(Sje))!=null?n:kje};S.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:c})=>{let u=s==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,h=i?aY.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(x,y=!1,b=!0)=>{let _=o?o[x]:x,C=y?x+"|| ''":`'${_}'`,k="";return i&&b&&!y&&aY.includes(x)&&(k+=`d.style.colorScheme = '${x}';`),t==="class"?y||_?k+=`c.add(${C})`:k+="null":_&&(k+=`d[s](n,${C})`),k},p=n?`!function(){${d}${f(n)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${_je}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${h}}catch(t){}}();`;return S.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});const Eje=({...n})=>{const{theme:e="system"}=Cje();return l.jsx(oke,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var Tje=T9[" useId ".trim().toString()]||(()=>{}),Aje=0;function Ys(n){const[e,t]=S.useState(Tje());return Wi(()=>{t(r=>r??String(Aje++))},[n]),e?`radix-${e}`:""}const Nje=["top","right","bottom","left"],Mg=Math.min,kl=Math.max,yI=Math.round,uj=Math.floor,ih=n=>({x:n,y:n}),jje={left:"right",right:"left",bottom:"top",top:"bottom"},Pje={start:"end",end:"start"};function kB(n,e,t){return kl(n,Mg(e,t))}function lm(n,e){return typeof n=="function"?n(e):n}function cm(n){return n.split("-")[0]}function lS(n){return n.split("-")[1]}function aU(n){return n==="x"?"y":"x"}function lU(n){return n==="y"?"height":"width"}const Ije=new Set(["top","bottom"]);function eh(n){return Ije.has(cm(n))?"y":"x"}function cU(n){return aU(eh(n))}function Oje(n,e,t){t===void 0&&(t=!1);const r=lS(n),i=cU(n),s=lU(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=xI(o)),[o,xI(o)]}function Rje(n){const e=xI(n);return[CB(n),e,CB(e)]}function CB(n){return n.replace(/start|end/g,e=>Pje[e])}const lY=["left","right"],cY=["right","left"],Mje=["top","bottom"],Dje=["bottom","top"];function Lje(n,e,t){switch(n){case"top":case"bottom":return t?e?cY:lY:e?lY:cY;case"left":case"right":return e?Mje:Dje;default:return[]}}function Fje(n,e,t,r){const i=lS(n);let s=Lje(cm(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(CB)))),s}function xI(n){return n.replace(/left|right|bottom|top/g,e=>jje[e])}function Bje(n){return{top:0,right:0,bottom:0,left:0,...n}}function jce(n){return typeof n!="number"?Bje(n):{top:n,right:n,bottom:n,left:n}}function bI(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function uY(n,e,t){let{reference:r,floating:i}=n;const s=eh(e),o=cU(e),a=lU(o),c=cm(e),u=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(c){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(lS(e)){case"start":p[o]-=f*(t&&u?-1:1);break;case"end":p[o]+=f*(t&&u?-1:1);break}return p}const $je=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:h}=uY(u,r,c),f=r,p={},x=0;for(let y=0;y<a.length;y++){const{name:b,fn:_}=a[y],{x:C,y:k,data:T,reset:E}=await _({x:d,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:u,platform:o,elements:{reference:n,floating:e}});d=C??d,h=k??h,p={...p,[b]:{...p[b],...T}},E&&x<=50&&(x++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):E.rects),{x:d,y:h}=uY(u,f,c)),y=-1)}return{x:d,y:h,placement:f,strategy:i,middlewareData:p}};async function QC(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=lm(e,n),x=jce(p),b=a[f?h==="floating"?"reference":"floating":h],_=bI(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(b)))==null||t?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),C=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},E=bI(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:k,strategy:c}):C);return{top:(_.top-E.top+x.top)/T.y,bottom:(E.bottom-_.bottom+x.bottom)/T.y,left:(_.left-E.left+x.left)/T.x,right:(E.right-_.right+x.right)/T.x}}const Vje=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=lm(n,e)||{};if(u==null)return{};const h=jce(d),f={x:t,y:r},p=cU(i),x=lU(p),y=await o.getDimensions(u),b=p==="y",_=b?"top":"left",C=b?"bottom":"right",k=b?"clientHeight":"clientWidth",T=s.reference[x]+s.reference[p]-f[p]-s.floating[x],E=f[p]-s.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=N?N[k]:0;(!P||!await(o.isElement==null?void 0:o.isElement(N)))&&(P=a.floating[k]||s.floating[x]);const M=T/2-E/2,O=P/2-y[x]/2-1,q=Mg(h[_],O),D=Mg(h[C],O),F=q,K=P-y[x]-D,ee=P/2-y[x]/2+M,Y=kB(F,ee,K),U=!c.arrow&&lS(i)!=null&&ee!==Y&&s.reference[x]/2-(ee<F?q:D)-y[x]/2<0,R=U?ee<F?ee-F:ee-K:0;return{[p]:f[p]+R,data:{[p]:Y,centerOffset:ee-Y-R,...U&&{alignmentOffset:R}},reset:U}}}),Uje=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...b}=lm(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const _=cm(i),C=eh(a),k=cm(a)===a,T=await(c.isRTL==null?void 0:c.isRTL(u.floating)),E=f||(k||!y?[xI(a)]:Rje(a)),N=x!=="none";!f&&N&&E.push(...Fje(a,y,x,T));const P=[a,...E],M=await QC(e,b),O=[];let q=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&O.push(M[_]),h){const ee=Oje(i,o,T);O.push(M[ee[0]],M[ee[1]])}if(q=[...q,{placement:i,overflows:O}],!O.every(ee=>ee<=0)){var D,F;const ee=(((D=s.flip)==null?void 0:D.index)||0)+1,Y=P[ee];if(Y&&(!(h==="alignment"?C!==eh(Y):!1)||q.every(z=>eh(z.placement)===C?z.overflows[0]>0:!0)))return{data:{index:ee,overflows:q},reset:{placement:Y}};let U=(F=q.filter(R=>R.overflows[0]<=0).sort((R,z)=>R.overflows[1]-z.overflows[1])[0])==null?void 0:F.placement;if(!U)switch(p){case"bestFit":{var K;const R=(K=q.filter(z=>{if(N){const W=eh(z.placement);return W===C||W==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(W=>W>0).reduce((W,se)=>W+se,0)]).sort((z,W)=>z[1]-W[1])[0])==null?void 0:K[0];R&&(U=R);break}case"initialPlacement":U=a;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function dY(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function hY(n){return Nje.some(e=>n[e]>=0)}const zje=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=lm(n,e);switch(r){case"referenceHidden":{const s=await QC(e,{...i,elementContext:"reference"}),o=dY(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:hY(o)}}}case"escaped":{const s=await QC(e,{...i,altBoundary:!0}),o=dY(s,t.floating);return{data:{escapedOffsets:o,escaped:hY(o)}}}default:return{}}}}},Pce=new Set(["left","top"]);async function Hje(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=cm(t),a=lS(t),c=eh(t)==="y",u=Pce.has(o)?-1:1,d=s&&c?-1:1,h=lm(e,n);let{mainAxis:f,crossAxis:p,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof x=="number"&&(p=a==="end"?x*-1:x),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const Wje=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await Hje(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},qje=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:_,y:C}=b;return{x:_,y:C}}},...c}=lm(n,e),u={x:t,y:r},d=await QC(e,c),h=eh(cm(i)),f=aU(h);let p=u[f],x=u[h];if(s){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",C=p+d[b],k=p-d[_];p=kB(C,p,k)}if(o){const b=h==="y"?"top":"left",_=h==="y"?"bottom":"right",C=x+d[b],k=x-d[_];x=kB(C,x,k)}const y=a.fn({...e,[f]:p,[h]:x});return{...y,data:{x:y.x-t,y:y.y-r,enabled:{[f]:s,[h]:o}}}}}},Gje=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=lm(n,e),d={x:t,y:r},h=eh(i),f=aU(h);let p=d[f],x=d[h];const y=lm(a,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const k=f==="y"?"height":"width",T=s.reference[f]-s.floating[k]+b.mainAxis,E=s.reference[f]+s.reference[k]-b.mainAxis;p<T?p=T:p>E&&(p=E)}if(u){var _,C;const k=f==="y"?"width":"height",T=Pce.has(cm(i)),E=s.reference[h]-s.floating[k]+(T&&((_=o.offset)==null?void 0:_[h])||0)+(T?0:b.crossAxis),N=s.reference[h]+s.reference[k]+(T?0:((C=o.offset)==null?void 0:C[h])||0)-(T?b.crossAxis:0);x<E?x=E:x>N&&(x=N)}return{[f]:p,[h]:x}}}},Kje=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...u}=lm(n,e),d=await QC(e,u),h=cm(i),f=lS(i),p=eh(i)==="y",{width:x,height:y}=s.floating;let b,_;h==="top"||h==="bottom"?(b=h,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,b=f==="end"?"top":"bottom");const C=y-d.top-d.bottom,k=x-d.left-d.right,T=Mg(y-d[b],C),E=Mg(x-d[_],k),N=!e.middlewareData.shift;let P=T,M=E;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(M=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=C),N&&!f){const q=kl(d.left,0),D=kl(d.right,0),F=kl(d.top,0),K=kl(d.bottom,0);p?M=x-2*(q!==0||D!==0?q+D:kl(d.left,d.right)):P=y-2*(F!==0||K!==0?F+K:kl(d.top,d.bottom))}await c({...e,availableWidth:M,availableHeight:P});const O=await o.getDimensions(a.floating);return x!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}};function QR(){return typeof window<"u"}function cS(n){return Ice(n)?(n.nodeName||"").toLowerCase():"#document"}function Rl(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function bh(n){var e;return(e=(Ice(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Ice(n){return QR()?n instanceof Node||n instanceof Rl(n).Node:!1}function Iu(n){return QR()?n instanceof Element||n instanceof Rl(n).Element:!1}function hh(n){return QR()?n instanceof HTMLElement||n instanceof Rl(n).HTMLElement:!1}function fY(n){return!QR()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Rl(n).ShadowRoot}const Yje=new Set(["inline","contents"]);function fA(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ou(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!Yje.has(i)}const Xje=new Set(["table","td","th"]);function Jje(n){return Xje.has(cS(n))}const Qje=[":popover-open",":modal"];function ZR(n){return Qje.some(e=>{try{return n.matches(e)}catch{return!1}})}const Zje=["transform","translate","scale","rotate","perspective"],ePe=["transform","translate","scale","rotate","perspective","filter"],tPe=["paint","layout","strict","content"];function uU(n){const e=dU(),t=Iu(n)?Ou(n):n;return Zje.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||ePe.some(r=>(t.willChange||"").includes(r))||tPe.some(r=>(t.contain||"").includes(r))}function nPe(n){let e=Dg(n);for(;hh(e)&&!c_(e);){if(uU(e))return e;if(ZR(e))return null;e=Dg(e)}return null}function dU(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rPe=new Set(["html","body","#document"]);function c_(n){return rPe.has(cS(n))}function Ou(n){return Rl(n).getComputedStyle(n)}function eM(n){return Iu(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Dg(n){if(cS(n)==="html")return n;const e=n.assignedSlot||n.parentNode||fY(n)&&n.host||bh(n);return fY(e)?e.host:e}function Oce(n){const e=Dg(n);return c_(e)?n.ownerDocument?n.ownerDocument.body:n.body:hh(e)&&fA(e)?e:Oce(e)}function ZC(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Oce(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Rl(i);if(s){const a=EB(o);return e.concat(o,o.visualViewport||[],fA(i)?i:[],a&&t?ZC(a):[])}return e.concat(i,ZC(i,[],t))}function EB(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Rce(n){const e=Ou(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=hh(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=yI(t)!==s||yI(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function hU(n){return Iu(n)?n:n.contextElement}function cw(n){const e=hU(n);if(!hh(e))return ih(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Rce(e);let o=(s?yI(t.width):t.width)/r,a=(s?yI(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const iPe=ih(0);function Mce(n){const e=Rl(n);return!dU()||!e.visualViewport?iPe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sPe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Rl(n)?!1:e}function H0(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=hU(n);let o=ih(1);e&&(r?Iu(r)&&(o=cw(r)):o=cw(n));const a=sPe(s,t,r)?Mce(s):ih(0);let c=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const f=Rl(s),p=r&&Iu(r)?Rl(r):r;let x=f,y=EB(x);for(;y&&r&&p!==x;){const b=cw(y),_=y.getBoundingClientRect(),C=Ou(y),k=_.left+(y.clientLeft+parseFloat(C.paddingLeft))*b.x,T=_.top+(y.clientTop+parseFloat(C.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=k,u+=T,x=Rl(y),y=EB(x)}}return bI({width:d,height:h,x:c,y:u})}function tM(n,e){const t=eM(n).scrollLeft;return e?e.left+t:H0(bh(n)).left+t}function Dce(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-tM(n,t),i=t.top+e.scrollTop;return{x:r,y:i}}function oPe(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=bh(r),a=e?ZR(e.floating):!1;if(r===o||a&&s)return t;let c={scrollLeft:0,scrollTop:0},u=ih(1);const d=ih(0),h=hh(r);if((h||!h&&!s)&&((cS(r)!=="body"||fA(o))&&(c=eM(r)),hh(r))){const p=H0(r);u=cw(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!s?Dce(o,c):ih(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:t.y*u.y-c.scrollTop*u.y+d.y+f.y}}function aPe(n){return Array.from(n.getClientRects())}function lPe(n){const e=bh(n),t=eM(n),r=n.ownerDocument.body,i=kl(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=kl(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+tM(n);const a=-t.scrollTop;return Ou(r).direction==="rtl"&&(o+=kl(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const mY=25;function cPe(n,e){const t=Rl(n),r=bh(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const d=dU();(!d||d&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}const u=tM(r);if(u<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,x=Math.abs(r.clientWidth-h.clientWidth-p);x<=mY&&(s-=x)}else u<=mY&&(s+=u);return{width:s,height:o,x:a,y:c}}const uPe=new Set(["absolute","fixed"]);function dPe(n,e){const t=H0(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=hh(n)?cw(n):ih(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:o,height:a,x:c,y:u}}function pY(n,e,t){let r;if(e==="viewport")r=cPe(n,t);else if(e==="document")r=lPe(bh(n));else if(Iu(e))r=dPe(e,t);else{const i=Mce(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return bI(r)}function Lce(n,e){const t=Dg(n);return t===e||!Iu(t)||c_(t)?!1:Ou(t).position==="fixed"||Lce(t,e)}function hPe(n,e){const t=e.get(n);if(t)return t;let r=ZC(n,[],!1).filter(a=>Iu(a)&&cS(a)!=="body"),i=null;const s=Ou(n).position==="fixed";let o=s?Dg(n):n;for(;Iu(o)&&!c_(o);){const a=Ou(o),c=uU(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&uPe.has(i.position)||fA(o)&&!c&&Lce(n,o))?r=r.filter(d=>d!==o):i=a,o=Dg(o)}return e.set(n,r),r}function fPe(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?ZR(e)?[]:hPe(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((u,d)=>{const h=pY(e,d,i);return u.top=kl(h.top,u.top),u.right=Mg(h.right,u.right),u.bottom=Mg(h.bottom,u.bottom),u.left=kl(h.left,u.left),u},pY(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mPe(n){const{width:e,height:t}=Rce(n);return{width:e,height:t}}function pPe(n,e,t){const r=hh(e),i=bh(e),s=t==="fixed",o=H0(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=ih(0);function u(){c.x=tM(i)}if(r||!r&&!s)if((cS(e)!=="body"||fA(i))&&(a=eM(e)),r){const p=H0(e,!0,s,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?Dce(i,a):ih(0),h=o.left+a.scrollLeft-c.x-d.x,f=o.top+a.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function V4(n){return Ou(n).position==="static"}function gY(n,e){if(!hh(n)||Ou(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return bh(n)===t&&(t=t.ownerDocument.body),t}function Fce(n,e){const t=Rl(n);if(ZR(n))return t;if(!hh(n)){let i=Dg(n);for(;i&&!c_(i);){if(Iu(i)&&!V4(i))return i;i=Dg(i)}return t}let r=gY(n,e);for(;r&&Jje(r)&&V4(r);)r=gY(r,e);return r&&c_(r)&&V4(r)&&!uU(r)?t:r||nPe(n)||t}const gPe=async function(n){const e=this.getOffsetParent||Fce,t=this.getDimensions,r=await t(n.floating);return{reference:pPe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vPe(n){return Ou(n).direction==="rtl"}const yPe={convertOffsetParentRelativeRectToViewportRelativeRect:oPe,getDocumentElement:bh,getClippingRect:fPe,getOffsetParent:Fce,getElementRects:gPe,getClientRects:aPe,getDimensions:mPe,getScale:cw,isElement:Iu,isRTL:vPe};function Bce(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function xPe(n,e){let t=null,r;const i=bh(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const u=n.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const x=uj(h),y=uj(i.clientWidth-(d+f)),b=uj(i.clientHeight-(h+p)),_=uj(d),k={rootMargin:-x+"px "+-y+"px "+-b+"px "+-_+"px",threshold:kl(0,Mg(1,c))||1};let T=!0;function E(N){const P=N[0].intersectionRatio;if(P!==c){if(!T)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!Bce(u,n.getBoundingClientRect())&&o(),T=!1}try{t=new IntersectionObserver(E,{...k,root:i.ownerDocument})}catch{t=new IntersectionObserver(E,k)}t.observe(n)}return o(!0),s}function bPe(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=hU(n),d=i||s?[...u?ZC(u):[],...ZC(e)]:[];d.forEach(_=>{i&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const h=u&&a?xPe(u,t):null;let f=-1,p=null;o&&(p=new ResizeObserver(_=>{let[C]=_;C&&C.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var k;(k=p)==null||k.observe(e)})),t()}),u&&!c&&p.observe(u),p.observe(e));let x,y=c?H0(n):null;c&&b();function b(){const _=H0(n);y&&!Bce(y,_)&&t(),y=_,x=requestAnimationFrame(b)}return t(),()=>{var _;d.forEach(C=>{i&&C.removeEventListener("scroll",t),s&&C.removeEventListener("resize",t)}),h==null||h(),(_=p)==null||_.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const wPe=Wje,_Pe=qje,SPe=Uje,kPe=Kje,CPe=zje,vY=Vje,EPe=Gje,TPe=(n,e,t)=>{const r=new Map,i={platform:yPe,...t},s={...i.platform,_c:r};return $je(n,e,{...i,platform:s})};var APe=typeof document<"u",NPe=function(){},uP=APe?S.useLayoutEffect:NPe;function wI(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!wI(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!wI(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function $ce(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function yY(n,e){const t=$ce(n);return Math.round(e*t)/t}function U4(n){const e=S.useRef(n);return uP(()=>{e.current=n}),e}function jPe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=n,[d,h]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=S.useState(r);wI(f,r)||p(r);const[x,y]=S.useState(null),[b,_]=S.useState(null),C=S.useCallback(z=>{z!==N.current&&(N.current=z,y(z))},[]),k=S.useCallback(z=>{z!==P.current&&(P.current=z,_(z))},[]),T=s||x,E=o||b,N=S.useRef(null),P=S.useRef(null),M=S.useRef(d),O=c!=null,q=U4(c),D=U4(i),F=U4(u),K=S.useCallback(()=>{if(!N.current||!P.current)return;const z={placement:e,strategy:t,middleware:f};D.current&&(z.platform=D.current),TPe(N.current,P.current,z).then(W=>{const se={...W,isPositioned:F.current!==!1};ee.current&&!wI(M.current,se)&&(M.current=se,tS.flushSync(()=>{h(se)}))})},[f,e,t,D,F]);uP(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,h(z=>({...z,isPositioned:!1})))},[u]);const ee=S.useRef(!1);uP(()=>(ee.current=!0,()=>{ee.current=!1}),[]),uP(()=>{if(T&&(N.current=T),E&&(P.current=E),T&&E){if(q.current)return q.current(T,E,K);K()}},[T,E,K,q,O]);const Y=S.useMemo(()=>({reference:N,floating:P,setReference:C,setFloating:k}),[C,k]),U=S.useMemo(()=>({reference:T,floating:E}),[T,E]),R=S.useMemo(()=>{const z={position:t,left:0,top:0};if(!U.floating)return z;const W=yY(U.floating,d.x),se=yY(U.floating,d.y);return a?{...z,transform:"translate("+W+"px, "+se+"px)",...$ce(U.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:W,top:se}},[t,a,U.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:K,refs:Y,elements:U,floatingStyles:R}),[d,K,Y,U,R])}const PPe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?vY({element:r.current,padding:i}).fn(t):{}:r?vY({element:r,padding:i}).fn(t):{}}}},IPe=(n,e)=>({...wPe(n),options:[n,e]}),OPe=(n,e)=>({..._Pe(n),options:[n,e]}),RPe=(n,e)=>({...EPe(n),options:[n,e]}),MPe=(n,e)=>({...SPe(n),options:[n,e]}),DPe=(n,e)=>({...kPe(n),options:[n,e]}),LPe=(n,e)=>({...CPe(n),options:[n,e]}),FPe=(n,e)=>({...PPe(n),options:[n,e]});var BPe="Arrow",Vce=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return l.jsx(kt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});Vce.displayName=BPe;var $Pe=Vce;function nM(n){const[e,t]=S.useState(void 0);return Wi(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var fU="Popper",[Uce,tv]=_o(fU),[VPe,zce]=Uce(fU),Hce=n=>{const{__scopePopper:e,children:t}=n,[r,i]=S.useState(null);return l.jsx(VPe,{scope:e,anchor:r,onAnchorChange:i,children:t})};Hce.displayName=fU;var Wce="PopperAnchor",qce=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=zce(Wce,t),o=S.useRef(null),a=an(e,o),c=S.useRef(null);return S.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||o.current,u!==c.current&&s.onAnchorChange(c.current)}),r?null:l.jsx(kt.div,{...i,ref:a})});qce.displayName=Wce;var mU="PopperContent",[UPe,zPe]=Uce(mU),Gce=S.forwardRef((n,e)=>{var ve,be,fe,we,ue,Z;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:x,...y}=n,b=zce(mU,t),[_,C]=S.useState(null),k=an(e,ge=>C(ge)),[T,E]=S.useState(null),N=nM(T),P=(N==null?void 0:N.width)??0,M=(N==null?void 0:N.height)??0,O=r+(s!=="center"?"-"+s:""),q=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(u)?u:[u],F=D.length>0,K={padding:q,boundary:D.filter(WPe),altBoundary:F},{refs:ee,floatingStyles:Y,placement:U,isPositioned:R,middlewareData:z}=jPe({strategy:"fixed",placement:O,whileElementsMounted:(...ge)=>bPe(...ge,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[IPe({mainAxis:i+M,alignmentAxis:o}),c&&OPe({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?RPe():void 0,...K}),c&&MPe({...K}),DPe({...K,apply:({elements:ge,rects:he,availableWidth:Ee,availableHeight:Be})=>{const{width:vt,height:xt}=he.reference,Rt=ge.floating.style;Rt.setProperty("--radix-popper-available-width",`${Ee}px`),Rt.setProperty("--radix-popper-available-height",`${Be}px`),Rt.setProperty("--radix-popper-anchor-width",`${vt}px`),Rt.setProperty("--radix-popper-anchor-height",`${xt}px`)}}),T&&FPe({element:T,padding:a}),qPe({arrowWidth:P,arrowHeight:M}),f&&LPe({strategy:"referenceHidden",...K})]}),[W,se]=Xce(U),ne=Yo(x);Wi(()=>{R&&(ne==null||ne())},[R,ne]);const te=(ve=z.arrow)==null?void 0:ve.x,H=(be=z.arrow)==null?void 0:be.y,ce=((fe=z.arrow)==null?void 0:fe.centerOffset)!==0,[pe,oe]=S.useState();return Wi(()=>{_&&oe(window.getComputedStyle(_).zIndex)},[_]),l.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:R?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[(we=z.transformOrigin)==null?void 0:we.x,(ue=z.transformOrigin)==null?void 0:ue.y].join(" "),...((Z=z.hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(UPe,{scope:t,placedSide:W,onArrowChange:E,arrowX:te,arrowY:H,shouldHideArrow:ce,children:l.jsx(kt.div,{"data-side":W,"data-align":se,...y,ref:k,style:{...y.style,animation:R?void 0:"none"}})})})});Gce.displayName=mU;var Kce="PopperArrow",HPe={top:"bottom",right:"left",bottom:"top",left:"right"},Yce=S.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=zPe(Kce,r),o=HPe[s.placedSide];return l.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:l.jsx($Pe,{...i,ref:t,style:{...i.style,display:"block"}})})});Yce.displayName=Kce;function WPe(n){return n!==null}var qPe=n=>({name:"transformOrigin",options:n,fn(e){var b,_,C;const{placement:t,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[u,d]=Xce(t),h={start:"0%",center:"50%",end:"100%"}[d],f=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,p=(((C=i.arrow)==null?void 0:C.y)??0)+c/2;let x="",y="";return u==="bottom"?(x=o?h:`${f}px`,y=`${-c}px`):u==="top"?(x=o?h:`${f}px`,y=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,y=o?h:`${p}px`):u==="left"&&(x=`${r.floating.width+c}px`,y=o?h:`${p}px`),{data:{x,y}}}});function Xce(n){const[e,t="center"]=n.split("-");return[e,t]}var pU=Hce,mA=qce,rM=Gce,iM=Yce,[sM]=_o("Tooltip",[tv]),gU=tv(),Jce="TooltipProvider",GPe=700,xY="tooltip.open",[KPe,Qce]=sM(Jce),Zce=n=>{const{__scopeTooltip:e,delayDuration:t=GPe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=S.useRef(!0),a=S.useRef(!1),c=S.useRef(0);return S.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(KPe,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:S.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(u=>{a.current=u},[]),disableHoverableContent:i,children:s})};Zce.displayName=Jce;var eue="Tooltip",[Kgt,oM]=sM(eue),TB="TooltipTrigger",YPe=S.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=oM(TB,t),s=Qce(TB,t),o=gU(t),a=S.useRef(null),c=an(e,a,i.onTriggerChange),u=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>u.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(mA,{asChild:!0,...o,children:l.jsx(kt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:st(n.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:st(n.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:st(n.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:st(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:st(n.onBlur,i.onClose),onClick:st(n.onClick,i.onClose)})})});YPe.displayName=TB;var XPe="TooltipPortal",[Ygt,JPe]=sM(XPe,{forceMount:void 0}),u_="TooltipContent",tue=S.forwardRef((n,e)=>{const t=JPe(u_,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=oM(u_,n.__scopeTooltip);return l.jsx(Da,{present:r||o.open,children:o.disableHoverableContent?l.jsx(nue,{side:i,...s,ref:e}):l.jsx(QPe,{side:i,...s,ref:e})})}),QPe=S.forwardRef((n,e)=>{const t=oM(u_,n.__scopeTooltip),r=Qce(u_,n.__scopeTooltip),i=S.useRef(null),s=an(e,i),[o,a]=S.useState(null),{trigger:c,onClose:u}=t,d=i.current,{onPointerInTransitChange:h}=r,f=S.useCallback(()=>{a(null),h(!1)},[h]),p=S.useCallback((x,y)=>{const b=x.currentTarget,_={x:x.clientX,y:x.clientY},C=rIe(_,b.getBoundingClientRect()),k=iIe(_,C),T=sIe(y.getBoundingClientRect()),E=aIe([...k,...T]);a(E),h(!0)},[h]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(c&&d){const x=b=>p(b,d),y=b=>p(b,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",y)}}},[c,d,p,f]),S.useEffect(()=>{if(o){const x=y=>{const b=y.target,_={x:y.clientX,y:y.clientY},C=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),k=!oIe(_,o);C?f():k&&(f(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,o,u,f]),l.jsx(nue,{...n,ref:s})}),[ZPe,eIe]=sM(eue,{isInside:!1}),tIe=Yle("TooltipContent"),nue=S.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,c=oM(u_,t),u=gU(t),{onClose:d}=c;return S.useEffect(()=>(document.addEventListener(xY,d),()=>document.removeEventListener(xY,d)),[d]),S.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),l.jsx(cx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:l.jsxs(rM,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(tIe,{children:r}),l.jsx(ZPe,{scope:t,isInside:!0,children:l.jsx(xNe,{id:c.contentId,role:"tooltip",children:i||r})})]})})});tue.displayName=u_;var rue="TooltipArrow",nIe=S.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=gU(t);return eIe(rue,t).isInside?null:l.jsx(iM,{...i,...r,ref:e})});nIe.displayName=rue;function rIe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function iIe(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function sIe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function oIe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],u=a.x,d=a.y,h=c.x,f=c.y;d>r!=f>r&&t<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i}function aIe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),lIe(e)}function lIe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var cIe=Zce,iue=tue;const uIe=cIe,dIe=S.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(iue,{ref:r,sideOffset:e,className:Qe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));dIe.displayName=iue.displayName;var aM=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hIe={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},xp,E9,oae,fIe=(oae=class{constructor(){G(this,xp,hIe);G(this,E9,!1)}setTimeoutProvider(n){L(this,xp,n)}setTimeout(n,e){return v(this,xp).setTimeout(n,e)}clearTimeout(n){v(this,xp).clearTimeout(n)}setInterval(n,e){return v(this,xp).setInterval(n,e)}clearInterval(n){v(this,xp).clearInterval(n)}},xp=new WeakMap,E9=new WeakMap,oae),AB=new fIe;function mIe(n){setTimeout(n,0)}var lM=typeof window>"u"||"Deno"in globalThis;function Zc(){}function pIe(n,e){return typeof n=="function"?n(e):n}function gIe(n){return typeof n=="number"&&n>=0&&n!==1/0}function vIe(n,e){return Math.max(n+(e||0)-Date.now(),0)}function NB(n,e){return typeof n=="function"?n(e):n}function yIe(n,e){return typeof n=="function"?n(e):n}function bY(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==vU(o,e.options))return!1}else if(!tE(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function wY(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(eE(e.options.mutationKey)!==eE(s))return!1}else if(!tE(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function vU(n,e){return((e==null?void 0:e.queryKeyHashFn)||eE)(n)}function eE(n){return JSON.stringify(n,(e,t)=>jB(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function tE(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>tE(n[t],e[t])):!1}var xIe=Object.prototype.hasOwnProperty;function sue(n,e){if(n===e)return n;const t=_Y(n)&&_Y(e);if(!t&&!(jB(n)&&jB(e)))return e;const i=(t?n:Object.keys(n)).length,s=t?e:Object.keys(e),o=s.length,a=t?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=t?u:s[u],h=n[d],f=e[d];if(h===f){a[d]=h,(t?u<i:xIe.call(n,d))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=sue(h,f);a[d]=p,p===h&&c++}return i===o&&c===i?n:a}function _Y(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function jB(n){if(!SY(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!SY(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function SY(n){return Object.prototype.toString.call(n)==="[object Object]"}function bIe(n){return new Promise(e=>{AB.setTimeout(e,n)})}function wIe(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?sue(n,e):e}function _Ie(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function SIe(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var yU=Symbol();function oue(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===yU?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var gy,bp,Sw,aae,kIe=(aae=class extends aM{constructor(){super();G(this,gy);G(this,bp);G(this,Sw);L(this,Sw,e=>{if(!lM&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){v(this,bp)||this.setEventListener(v(this,Sw))}onUnsubscribe(){var e;this.hasListeners()||((e=v(this,bp))==null||e.call(this),L(this,bp,void 0))}setEventListener(e){var t;L(this,Sw,e),(t=v(this,bp))==null||t.call(this),L(this,bp,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){v(this,gy)!==e&&(L(this,gy,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof v(this,gy)=="boolean"?v(this,gy):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},gy=new WeakMap,bp=new WeakMap,Sw=new WeakMap,aae),aue=new kIe;function CIe(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}var EIe=mIe;function TIe(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=EIe;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Do=TIe(),kw,wp,Cw,lae,AIe=(lae=class extends aM{constructor(){super();G(this,kw,!0);G(this,wp);G(this,Cw);L(this,Cw,e=>{if(!lM&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){v(this,wp)||this.setEventListener(v(this,Cw))}onUnsubscribe(){var e;this.hasListeners()||((e=v(this,wp))==null||e.call(this),L(this,wp,void 0))}setEventListener(e){var t;L(this,Cw,e),(t=v(this,wp))==null||t.call(this),L(this,wp,e(this.setOnline.bind(this)))}setOnline(e){v(this,kw)!==e&&(L(this,kw,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return v(this,kw)}},kw=new WeakMap,wp=new WeakMap,Cw=new WeakMap,lae),_I=new AIe;function NIe(n){return Math.min(1e3*2**n,3e4)}function lue(n){return(n??"online")==="online"?_I.isOnline():!0}var PB=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function cue(n){let e=!1,t=0,r;const i=CIe(),s=()=>i.status!=="pending",o=y=>{var b;if(!s()){const _=new PB(y);f(_),(b=n.onCancel)==null||b.call(n,_)}},a=()=>{e=!0},c=()=>{e=!1},u=()=>aue.isFocused()&&(n.networkMode==="always"||_I.isOnline())&&n.canRun(),d=()=>lue(n.networkMode)&&n.canRun(),h=y=>{s()||(r==null||r(),i.resolve(y))},f=y=>{s()||(r==null||r(),i.reject(y))},p=()=>new Promise(y=>{var b;r=_=>{(s()||u())&&y(_)},(b=n.onPause)==null||b.call(n)}).then(()=>{var y;r=void 0,s()||(y=n.onContinue)==null||y.call(n)}),x=()=>{if(s())return;let y;const b=t===0?n.initialPromise:void 0;try{y=b??n.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(h).catch(_=>{var N;if(s())return;const C=n.retry??(lM?0:3),k=n.retryDelay??NIe,T=typeof k=="function"?k(t,_):k,E=C===!0||typeof C=="number"&&t<C||typeof C=="function"&&C(t,_);if(e||!E){f(_);return}t++,(N=n.onFail)==null||N.call(n,t,_),bIe(T).then(()=>u()?void 0:p()).then(()=>{e?f(_):x()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?x():p().then(x),i)}}var vy,cae,uue=(cae=class{constructor(){G(this,vy)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gIe(this.gcTime)&&L(this,vy,AB.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(lM?1/0:300*1e3))}clearGcTimeout(){v(this,vy)&&(AB.clearTimeout(v(this,vy)),L(this,vy,void 0))}},vy=new WeakMap,cae),yy,Ew,cc,xy,gs,v2,by,eu,Kh,uae,jIe=(uae=class extends uue{constructor(e){super();G(this,eu);G(this,yy);G(this,Ew);G(this,cc);G(this,xy);G(this,gs);G(this,v2);G(this,by);L(this,by,!1),L(this,v2,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,xy,e.client),L(this,cc,v(this,xy).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,yy,kY(this.options)),this.state=e.state??v(this,yy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=v(this,gs))==null?void 0:e.promise}setOptions(e){if(this.options={...v(this,v2),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=kY(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),L(this,yy,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&v(this,cc).remove(this)}setData(e,t){const r=wIe(this.state.data,e,this.options);return J(this,eu,Kh).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){J(this,eu,Kh).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=v(this,gs))==null?void 0:r.promise;return(i=v(this,gs))==null||i.cancel(e),t?t.then(Zc).catch(Zc):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(v(this,yy))}isActive(){return this.observers.some(e=>yIe(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yU||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>NB(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!vIe(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=v(this,gs))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=v(this,gs))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),v(this,cc).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(v(this,gs)&&(v(this,by)?v(this,gs).cancel({revert:!0}):v(this,gs).cancelRetry()),this.scheduleGc()),v(this,cc).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||J(this,eu,Kh).call(this,{type:"invalidate"})}async fetch(e,t){var c,u,d,h,f,p,x,y,b,_,C,k;if(this.state.fetchStatus!=="idle"&&((c=v(this,gs))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(v(this,gs))return v(this,gs).continueRetry(),v(this,gs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const T=this.observers.find(E=>E.options.queryFn);T&&this.setOptions(T.options)}const r=new AbortController,i=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(L(this,by,!0),r.signal)})},s=()=>{const T=oue(this.options,t),N=(()=>{const P={client:v(this,xy),queryKey:this.queryKey,meta:this.meta};return i(P),P})();return L(this,by,!1),this.options.persister?this.options.persister(T,N,this):T(N)},a=(()=>{const T={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:v(this,xy),state:this.state,fetchFn:s};return i(T),T})();(u=this.options.behavior)==null||u.onFetch(a,this),L(this,Ew,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&J(this,eu,Kh).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),L(this,gs,cue({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,onCancel:T=>{T instanceof PB&&T.revert&&this.setState({...v(this,Ew),fetchStatus:"idle"}),r.abort()},onFail:(T,E)=>{J(this,eu,Kh).call(this,{type:"failed",failureCount:T,error:E})},onPause:()=>{J(this,eu,Kh).call(this,{type:"pause"})},onContinue:()=>{J(this,eu,Kh).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const T=await v(this,gs).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(p=(f=v(this,cc).config).onSuccess)==null||p.call(f,T,this),(y=(x=v(this,cc).config).onSettled)==null||y.call(x,T,this.state.error,this),T}catch(T){if(T instanceof PB){if(T.silent)return v(this,gs).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw J(this,eu,Kh).call(this,{type:"error",error:T}),(_=(b=v(this,cc).config).onError)==null||_.call(b,T,this),(k=(C=v(this,cc).config).onSettled)==null||k.call(C,this.state.data,T,this),T}finally{this.scheduleGc()}}},yy=new WeakMap,Ew=new WeakMap,cc=new WeakMap,xy=new WeakMap,gs=new WeakMap,v2=new WeakMap,by=new WeakMap,eu=new WeakSet,Kh=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...PIe(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return L(this,Ew,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Do.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),v(this,cc).notify({query:this,type:"updated",action:e})})},uae);function PIe(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lue(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function kY(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function CY(n){return{onFetch:(e,t)=>{var d,h,f,p,x;const r=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const b=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},_=oue(e.options,e.fetchOptions),C=async(k,T,E)=>{if(y)return Promise.reject();if(T==null&&k.pages.length)return Promise.resolve(k);const P=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:T,direction:E?"backward":"forward",meta:e.options.meta};return b(D),D})(),M=await _(P),{maxPages:O}=e.options,q=E?SIe:_Ie;return{pages:q(k.pages,M,O),pageParams:q(k.pageParams,T,O)}};if(i&&s.length){const k=i==="backward",T=k?IIe:EY,E={pages:s,pageParams:o},N=T(r,E);a=await C(E,N,k)}else{const k=n??s.length;do{const T=c===0?o[0]??r.initialPageParam:EY(r,a);if(c>0&&T==null)break;a=await C(a,T),c++}while(c<k)}return a};e.options.persister?e.fetchFn=()=>{var y,b;return(b=(y=e.options).persister)==null?void 0:b.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function EY(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function IIe(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var y2,wd,jo,wy,_d,op,dae,OIe=(dae=class extends uue{constructor(e){super();G(this,_d);G(this,y2);G(this,wd);G(this,jo);G(this,wy);L(this,y2,e.client),this.mutationId=e.mutationId,L(this,jo,e.mutationCache),L(this,wd,[]),this.state=e.state||RIe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){v(this,wd).includes(e)||(v(this,wd).push(e),this.clearGcTimeout(),v(this,jo).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,wd,v(this,wd).filter(t=>t!==e)),this.scheduleGc(),v(this,jo).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){v(this,wd).length||(this.state.status==="pending"?this.scheduleGc():v(this,jo).remove(this))}continue(){var e;return((e=v(this,wy))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,c,u,d,h,f,p,x,y,b,_,C,k,T,E,N,P,M,O;const t=()=>{J(this,_d,op).call(this,{type:"continue"})},r={client:v(this,y2),meta:this.options.meta,mutationKey:this.options.mutationKey};L(this,wy,cue({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(q,D)=>{J(this,_d,op).call(this,{type:"failed",failureCount:q,error:D})},onPause:()=>{J(this,_d,op).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>v(this,jo).canRun(this)}));const i=this.state.status==="pending",s=!v(this,wy).canStart();try{if(i)t();else{J(this,_d,op).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=v(this,jo).config).onMutate)==null?void 0:a.call(o,e,this,r));const D=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,r));D!==this.state.context&&J(this,_d,op).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const q=await v(this,wy).start();return await((h=(d=v(this,jo).config).onSuccess)==null?void 0:h.call(d,q,e,this.state.context,this,r)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,q,e,this.state.context,r)),await((y=(x=v(this,jo).config).onSettled)==null?void 0:y.call(x,q,null,this.state.variables,this.state.context,this,r)),await((_=(b=this.options).onSettled)==null?void 0:_.call(b,q,null,e,this.state.context,r)),J(this,_d,op).call(this,{type:"success",data:q}),q}catch(q){try{throw await((k=(C=v(this,jo).config).onError)==null?void 0:k.call(C,q,e,this.state.context,this,r)),await((E=(T=this.options).onError)==null?void 0:E.call(T,q,e,this.state.context,r)),await((P=(N=v(this,jo).config).onSettled)==null?void 0:P.call(N,void 0,q,this.state.variables,this.state.context,this,r)),await((O=(M=this.options).onSettled)==null?void 0:O.call(M,void 0,q,e,this.state.context,r)),q}finally{J(this,_d,op).call(this,{type:"error",error:q})}}finally{v(this,jo).runNext(this)}}},y2=new WeakMap,wd=new WeakMap,jo=new WeakMap,wy=new WeakMap,_d=new WeakSet,op=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Do.batch(()=>{v(this,wd).forEach(r=>{r.onMutationUpdate(e)}),v(this,jo).notify({mutation:this,type:"updated",action:e})})},dae);function RIe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rf,tu,x2,hae,MIe=(hae=class extends aM{constructor(e={}){super();G(this,rf);G(this,tu);G(this,x2);this.config=e,L(this,rf,new Set),L(this,tu,new Map),L(this,x2,0)}build(e,t,r){const i=new OIe({client:e,mutationCache:this,mutationId:++pi(this,x2)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){v(this,rf).add(e);const t=dj(e);if(typeof t=="string"){const r=v(this,tu).get(t);r?r.push(e):v(this,tu).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(v(this,rf).delete(e)){const t=dj(e);if(typeof t=="string"){const r=v(this,tu).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&v(this,tu).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=dj(e);if(typeof t=="string"){const r=v(this,tu).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=dj(e);if(typeof t=="string"){const i=(r=v(this,tu).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Do.batch(()=>{v(this,rf).forEach(e=>{this.notify({type:"removed",mutation:e})}),v(this,rf).clear(),v(this,tu).clear()})}getAll(){return Array.from(v(this,rf))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>wY(t,r))}findAll(e={}){return this.getAll().filter(t=>wY(e,t))}notify(e){Do.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Do.batch(()=>Promise.all(e.map(t=>t.continue().catch(Zc))))}},rf=new WeakMap,tu=new WeakMap,x2=new WeakMap,hae);function dj(n){var e;return(e=n.options.scope)==null?void 0:e.id}var Sd,fae,DIe=(fae=class extends aM{constructor(e={}){super();G(this,Sd);this.config=e,L(this,Sd,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??vU(i,t);let o=this.get(s);return o||(o=new jIe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){v(this,Sd).has(e.queryHash)||(v(this,Sd).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=v(this,Sd).get(e.queryHash);t&&(e.destroy(),t===e&&v(this,Sd).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Do.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return v(this,Sd).get(e)}getAll(){return[...v(this,Sd).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>bY(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>bY(e,r)):t}notify(e){Do.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Do.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Do.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Sd=new WeakMap,fae),gi,_p,Sp,Tw,Aw,kp,Nw,jw,mae,LIe=(mae=class{constructor(n={}){G(this,gi);G(this,_p);G(this,Sp);G(this,Tw);G(this,Aw);G(this,kp);G(this,Nw);G(this,jw);L(this,gi,n.queryCache||new DIe),L(this,_p,n.mutationCache||new MIe),L(this,Sp,n.defaultOptions||{}),L(this,Tw,new Map),L(this,Aw,new Map),L(this,kp,0)}mount(){pi(this,kp)._++,v(this,kp)===1&&(L(this,Nw,aue.subscribe(async n=>{n&&(await this.resumePausedMutations(),v(this,gi).onFocus())})),L(this,jw,_I.subscribe(async n=>{n&&(await this.resumePausedMutations(),v(this,gi).onOnline())})))}unmount(){var n,e;pi(this,kp)._--,v(this,kp)===0&&((n=v(this,Nw))==null||n.call(this),L(this,Nw,void 0),(e=v(this,jw))==null||e.call(this),L(this,jw,void 0))}isFetching(n){return v(this,gi).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return v(this,_p).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=v(this,gi).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=v(this,gi).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(NB(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return v(this,gi).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=v(this,gi).get(r.queryHash),s=i==null?void 0:i.state.data,o=pIe(e,s);if(o!==void 0)return v(this,gi).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Do.batch(()=>v(this,gi).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=v(this,gi).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=v(this,gi);Do.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=v(this,gi);return Do.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Do.batch(()=>v(this,gi).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(Zc).catch(Zc)}invalidateQueries(n,e={}){return Do.batch(()=>(v(this,gi).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Do.batch(()=>v(this,gi).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(Zc)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Zc)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=v(this,gi).build(this,e);return t.isStaleByTime(NB(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Zc).catch(Zc)}fetchInfiniteQuery(n){return n.behavior=CY(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Zc).catch(Zc)}ensureInfiniteQueryData(n){return n.behavior=CY(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return _I.isOnline()?v(this,_p).resumePausedMutations():Promise.resolve()}getQueryCache(){return v(this,gi)}getMutationCache(){return v(this,_p)}getDefaultOptions(){return v(this,Sp)}setDefaultOptions(n){L(this,Sp,n)}setQueryDefaults(n,e){v(this,Tw).set(eE(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...v(this,Tw).values()],t={};return e.forEach(r=>{tE(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){v(this,Aw).set(eE(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...v(this,Aw).values()],t={};return e.forEach(r=>{tE(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...v(this,Sp).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=vU(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yU&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...v(this,Sp).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){v(this,gi).clear(),v(this,_p).clear()}},gi=new WeakMap,_p=new WeakMap,Sp=new WeakMap,Tw=new WeakMap,Aw=new WeakMap,kp=new WeakMap,Nw=new WeakMap,jw=new WeakMap,mae),FIe=S.createContext(void 0),BIe=({client:n,children:e})=>(S.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(FIe.Provider,{value:n,children:e}));const due="https://tourimate.site",$o=async(n,e={})=>{const{skipAuth:t,...r}=e,i=localStorage.getItem("accessToken"),s=localStorage.getItem("refreshToken"),o={};!t&&i&&(o.Authorization=`Bearer ${i}`),r.headers&&Object.assign(o,r.headers);let a=await fetch(n,{...r,headers:o});if(a.status===401&&s&&!t)try{const c=await fetch(`${due}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:s})});if(c.ok){const u=await c.json();localStorage.setItem("accessToken",u.accessToken),a=await fetch(n,{...r,headers:{...o,Authorization:`Bearer ${u.accessToken}`}})}else{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("refreshTokenExpiresAt"),localStorage.removeItem("userProfile");const u=window.location.pathname+window.location.search;window.location.href=`/login?returnUrl=${encodeURIComponent(u)}`}}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("refreshTokenExpiresAt"),localStorage.removeItem("userProfile");const c=window.location.pathname+window.location.search;window.location.href=`/login?returnUrl=${encodeURIComponent(c)}`}return a},ot=async(n,e={})=>{const t=await $o(n,{...e,headers:{"Content-Type":"application/json",...e.headers}});if(!t.ok){const i=await t.text();throw new Error(i||t.statusText)}const r=await t.text();return r?JSON.parse(r):{}},xU=async(n,e,t={})=>{const r=await $o(n,{...t,method:"POST",body:e});if(!r.ok){const s=await r.text();throw new Error(s||r.statusText)}const i=await r.text();return i?JSON.parse(i):{}},Ge=()=>due;let D0=class{static async getTours(e){const t=new URLSearchParams;return Object.entries(e).forEach(([r,i])=>{i!=null&&i!==""&&t.append(r,i.toString())}),ot(`${Ge()}/api/tour?${t.toString()}`,{skipAuth:!0})}static async getTourById(e){return ot(`${Ge()}/api/tour/${e}`,{skipAuth:!0})}static async getFeaturedTours(e=10){return ot(`${Ge()}/api/tour/featured?limit=${e}`,{skipAuth:!0})}static async getToursByGuide(e,t){const r=new URLSearchParams;return t!==void 0&&r.append("isActive",t.toString()),ot(`${Ge()}/api/tour/guide/${e}?${r.toString()}`,{skipAuth:!0})}static async getMyTours(e){const t=new URLSearchParams;return e!==void 0&&t.append("isActive",e.toString()),ot(`${Ge()}/api/tour/my-tours?${t.toString()}`,{skipAuth:!1})}static async getTourCategories(){return ot(`${Ge()}/api/tourcategories`,{skipAuth:!0})}static async getTourCategoryById(e){return ot(`${Ge()}/api/tourcategories/${e}`,{skipAuth:!0})}};function hue(){const[n,e]=S.useState(0),t=li(),[r,i]=S.useState([]),[s,o]=S.useState(!0),{user:a}=Zr();S.useEffect(()=>{c()},[]);const c=async()=>{try{o(!0);const y=await D0.getFeaturedTours(10);i(y)}catch(y){console.error("Error fetching featured tours:",y)}finally{o(!1)}},u=(y,b="VND")=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:b==="VND"?"VND":b}).format(y),d=y=>{if(y<24)return`${y} giờ`;const b=Math.floor(y/24),_=y%24;return _===0?`${b} ngày`:`${b} ngày ${_} giờ`},h=r.slice(0,5),f=r.slice(5,10),p=()=>{e(y=>(y+1)%h.length)},x=()=>{e(y=>(y-1+h.length)%h.length)};return l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx(Ks,{}),s?l.jsx("section",{className:"relative min-h-[500px] md:min-h-[700px] bg-gray-200 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-tour-blue"})}):r.length>0?l.jsxs("section",{className:"relative min-h-[500px] md:min-h-[700px] bg-cover bg-center bg-no-repeat",style:{backgroundImage:r[0].imageUrls&&r[0].imageUrls.length>0?`url('${r[0].imageUrls[0]}')`:"url('https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80')"},children:[l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),l.jsx("div",{className:"relative z-10 container mx-auto px-4 py-12 md:py-20",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[l.jsxs("div",{className:"text-left",children:[l.jsx("h1",{className:"font-josefin text-4xl md:text-6xl lg:text-8xl font-bold text-white leading-tight",children:r[0].title}),l.jsxs("div",{className:"mt-6 flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(ki,{className:"w-6 h-6 text-yellow-400 fill-current"}),l.jsx("span",{className:"text-white text-xl font-semibold",children:r[0].averageRating.toFixed(1)}),l.jsxs("span",{className:"text-white text-lg",children:["(",r[0].totalReviews," đánh giá)"]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Bo,{className:"w-6 h-6 text-white"}),l.jsxs("span",{className:"text-white text-lg",children:[r[0].totalBookings," lượt đặt"]})]})]})]}),l.jsx("div",{className:"lg:mt-16",children:l.jsx("div",{className:"bg-white bg-opacity-90 rounded-[60px] p-6 md:p-8 backdrop-blur-md max-w-md mx-auto lg:mx-0 shadow-2xl",children:l.jsxs("div",{className:"space-y-4 md:space-y-6",children:[l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Xr,{className:"w-6 h-6 md:w-8 md:h-8 text-black mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-nunito font-bold text-lg md:text-2xl text-black",children:"Điểm đến:"}),l.jsx("p",{className:"font-nunito text-lg md:text-2xl text-black",children:r[0].location})]})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(er,{className:"w-6 h-6 md:w-8 md:h-8 text-black mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-nunito font-bold text-lg md:text-2xl text-black",children:"Thời gian:"}),l.jsx("p",{className:"font-nunito text-lg md:text-2xl text-black",children:d(r[0].duration)})]})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(pCe,{className:"w-6 h-6 md:w-8 md:h-8 text-black mt-1 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-nunito font-bold text-lg md:text-2xl text-black",children:"Giá từ:"}),l.jsx("p",{className:"font-nunito text-2xl md:text-3xl font-bold text-tour-blue",children:u(r[0].price,r[0].currency)})]})]}),l.jsxs("div",{className:"flex gap-4 mt-6",children:[l.jsx("button",{onClick:()=>t(`/tour/${r[0].id}`),className:"bg-tour-teal hover:bg-tour-blue transition-colors duration-200 rounded-[20px] px-8 py-4",children:l.jsx("span",{className:"font-nunito text-2xl md:text-3xl font-bold text-black",children:"Chi tiết"})}),l.jsx("button",{onClick:()=>t("/tours"),className:"bg-tour-blue hover:bg-tour-teal transition-colors duration-200 rounded-[20px] px-8 py-4",children:l.jsx("span",{className:"font-nunito text-2xl md:text-3xl font-bold text-black",children:"Xem tất cả tour"})})]})]})})})]})})]}):l.jsx("section",{className:"relative min-h-[500px] md:min-h-[700px] bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-white",children:[l.jsx("h1",{className:"font-josefin text-4xl md:text-6xl font-bold mb-4",children:"Chào mừng đến với TouriMate"}),l.jsx("p",{className:"font-nunito text-xl md:text-2xl",children:"Khám phá những tour du lịch tuyệt vời"})]})}),l.jsx("section",{className:"py-16 md:py-24 bg-gradient-to-br from-blue-50 to-indigo-100",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("p",{className:"font-josefin text-lg md:text-2xl font-bold text-tour-blue mb-4",children:"Về chúng tôi"}),l.jsx("h2",{className:"font-itim text-4xl md:text-5xl lg:text-6xl text-gray-900 font-normal mb-6",children:"TouriMate - Người bạn đồng hành tin cậy"}),l.jsx("p",{className:"font-nunito text-lg md:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Chúng tôi kết nối bạn với những hướng dẫn viên chuyên nghiệp và những trải nghiệm du lịch đáng nhớ nhất"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:[l.jsxs("div",{className:"text-center bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-16 h-16 bg-tour-blue rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Bo,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"font-nunito text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"1000+"}),l.jsx("p",{className:"font-nunito text-lg text-gray-600",children:"Khách hàng hài lòng"})]}),l.jsxs("div",{className:"text-center bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-16 h-16 bg-tour-teal rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Xr,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"font-nunito text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"50+"}),l.jsx("p",{className:"font-nunito text-lg text-gray-600",children:"Điểm đến hấp dẫn"})]}),l.jsxs("div",{className:"text-center bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ki,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"font-nunito text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"4.8"}),l.jsx("p",{className:"font-nunito text-lg text-gray-600",children:"Đánh giá trung bình"})]}),l.jsxs("div",{className:"text-center bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-16 h-16 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(er,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"font-nunito text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"24/7"}),l.jsx("p",{className:"font-nunito text-lg text-gray-600",children:"Hỗ trợ khách hàng"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-6",children:l.jsx(Bo,{className:"w-6 h-6 text-tour-blue"})}),l.jsx("h3",{className:"font-nunito text-xl font-bold text-gray-900 mb-4",children:"Hướng dẫn viên chuyên nghiệp"}),l.jsx("p",{className:"font-nunito text-gray-600 leading-relaxed",children:"Đội ngũ hướng dẫn viên giàu kinh nghiệm, am hiểu sâu sắc về văn hóa và lịch sử địa phương"})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-6",children:l.jsx(Xr,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"font-nunito text-xl font-bold text-gray-900 mb-4",children:"Điểm đến đa dạng"}),l.jsx("p",{className:"font-nunito text-gray-600 leading-relaxed",children:"Từ biển đảo xanh biếc đến núi rừng hùng vĩ, khám phá mọi vẻ đẹp của Việt Nam"})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-6",children:l.jsx(ki,{className:"w-6 h-6 text-purple-600"})}),l.jsx("h3",{className:"font-nunito text-xl font-bold text-gray-900 mb-4",children:"Trải nghiệm tuyệt vời"}),l.jsx("p",{className:"font-nunito text-gray-600 leading-relaxed",children:"Cam kết mang đến những kỷ niệm đáng nhớ với dịch vụ chất lượng cao và giá cả hợp lý"})]})]}),l.jsx("div",{className:"text-center mt-16",children:l.jsx("button",{onClick:()=>t("/tours"),className:"bg-gradient-to-r from-tour-blue to-tour-teal hover:from-tour-teal hover:to-tour-blue text-white font-nunito text-xl font-bold py-4 px-12 rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Khám phá ngay"})})]})}),l.jsx("section",{className:"py-8 md:py-12 bg-white",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"font-josefin text-3xl md:text-4xl lg:text-5xl font-bold text-black mb-4",children:"Tour nổi bật"}),l.jsx("p",{className:"font-nunito text-lg md:text-xl text-gray-600",children:"Những tour du lịch được yêu thích nhất"})]}),s?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tour-blue"})}):l.jsxs("div",{className:"relative max-w-6xl mx-auto",children:[l.jsx("div",{className:"overflow-hidden",children:l.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${n*100}%)`},children:h.map((y,b)=>l.jsx("div",{className:"w-full flex-shrink-0 px-4",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:y.imageUrls&&y.imageUrls.length>0?y.imageUrls[0]:"/placeholder-tour.jpg",alt:y.title,className:"w-full h-64 md:h-80 lg:h-96 object-cover rounded-[30px]"}),l.jsx("div",{className:"absolute top-4 right-4 bg-white rounded-[20px] px-6 py-4",children:l.jsx("span",{className:"font-nunito text-xl md:text-2xl lg:text-3xl font-bold text-black",children:u(y.price,y.currency)})}),l.jsx("button",{onClick:()=>t(`/tour/${y.id}`),className:"absolute bottom-4 right-4 bg-tour-blue hover:bg-tour-teal transition-colors duration-200 rounded-[20px] px-6 py-4",children:l.jsx("span",{className:"font-nunito text-xl md:text-2xl lg:text-3xl font-bold text-black",children:"Chi tiết"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-nunito text-3xl md:text-4xl lg:text-5xl font-bold text-black",children:y.title}),l.jsx("p",{className:"font-nunito text-2xl md:text-3xl lg:text-4xl font-normal text-black",children:d(y.duration)}),l.jsxs("div",{className:"flex items-center space-x-4 text-lg",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(ki,{className:"w-5 h-5 text-yellow-500 fill-current"}),l.jsxs("span",{children:[y.averageRating.toFixed(1)," (",y.totalReviews,")"]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Bo,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{children:y.totalBookings})]})]})]})]})},y.id))})}),h.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:x,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:shadow-xl transition-shadow duration-200",children:l.jsx(zR,{className:"w-6 h-6 md:w-8 md:h-8 text-black"})}),l.jsx("button",{onClick:p,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:shadow-xl transition-shadow duration-200",children:l.jsx(kg,{className:"w-6 h-6 md:w-8 md:h-8 text-black"})}),l.jsx("div",{className:"flex justify-center space-x-2 mt-8",children:h.map((y,b)=>l.jsx("button",{onClick:()=>e(b),className:`w-4 h-4 rounded-full transition-colors duration-200 ${b===n?"bg-tour-blue":"bg-tour-light-blue"}`},b))})]})]})]})}),l.jsxs("section",{className:"py-12 md:py-20 bg-cover bg-center bg-no-repeat relative",style:{backgroundImage:"url('https://cdn.builder.io/api/v1/image/assets/TEMP/cf453166b1b410b448124e644a9cd0080e77891c?width=2304')"},children:[l.jsx("div",{className:"absolute inset-0 bg-blue-400 bg-opacity-50"}),l.jsx("div",{className:"relative z-10 container mx-auto px-4 text-center",children:l.jsx("h2",{className:"font-itim text-4xl md:text-5xl lg:text-6xl text-white font-normal",children:"Bạn đã chuẩn bị gì chưa ?"})})]}),l.jsx("section",{className:"py-8 md:py-12 bg-gray-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"font-josefin text-3xl md:text-4xl lg:text-5xl font-bold text-black mb-4",children:"Tour được đánh giá cao"}),l.jsx("p",{className:"font-nunito text-lg md:text-xl text-gray-600",children:"Những tour có rating và lượt đặt cao nhất"})]}),s?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tour-blue"})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(y=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[l.jsxs("div",{className:"relative h-48",children:[l.jsx("img",{src:y.imageUrls&&y.imageUrls.length>0?y.imageUrls[0]:"/placeholder-tour.jpg",alt:y.title,className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-1",children:l.jsx("span",{className:"font-bold text-lg text-gray-900",children:u(y.price,y.currency)})})]}),l.jsxs("div",{className:"p-4 space-y-3",children:[l.jsx("h3",{className:"font-semibold text-lg text-gray-900 line-clamp-2",children:y.title}),l.jsx("div",{className:"text-sm text-gray-600 line-clamp-2 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:y.shortDescription}}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ki,{className:"w-4 h-4 text-yellow-500 fill-current"}),l.jsxs("span",{children:[y.averageRating.toFixed(1)," (",y.totalReviews,")"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Bo,{className:"w-4 h-4"}),l.jsx("span",{children:y.totalBookings})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ts,{className:"w-4 h-4"}),l.jsx("span",{children:y.viewCount})]})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{onClick:()=>t(`/tour/${y.id}`),className:"flex-1 bg-tour-blue hover:bg-tour-teal text-white py-2 px-4 rounded-lg transition-colors duration-200",children:"Chi tiết"}),!(a&&a.role==="TourGuide"&&y.tourGuideId===a.id)&&l.jsx("button",{onClick:()=>t(`/tour/${y.id}/book`),className:"flex-1 bg-tour-teal hover:bg-tour-blue text-white py-2 px-4 rounded-lg transition-colors duration-200",children:"Đặt tour"})]})]})]},y.id))})]})}),l.jsx("footer",{className:"bg-gray-300 py-12 md:py-20",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"font-nunito text-lg md:text-xl text-black",children:"© 2024 Travel Guide Vietnam. All rights reserved."})})})})]})}function $Ie(){return l.jsx(hue,{})}const VIe=()=>{const n=zl();return S.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function UIe(){const n=li(),[e,t]=S.useState([]),[r,i]=S.useState(!0),[s,o]=S.useState(null);S.useEffect(()=>{a()},[]);const a=async()=>{try{i(!0),o(null);const f=(await ot(`${Ge()}/api/guides`,{skipAuth:!0})).filter(p=>p.isActive);t(f)}catch(h){console.error("Error fetching tour guides:",h),o("Không thể tải danh sách hướng dẫn viên"),t([])}finally{i(!1)}},c=h=>`${h.firstName} ${h.lastName}`.trim(),u=h=>{if(h.bio)return h.bio;let f="Hướng dẫn viên chuyên nghiệp";return h.experience&&(f+=` với ${h.experience} năm kinh nghiệm`),h.specialties&&h.specialties.length>0&&(f+=` chuyên về ${h.specialties.join(", ")}`),f+=" trong việc đồng hành và chia sẻ vẻ đẹp của Việt Nam.",f},d=h=>h.avatar?h.avatar:"https://cdn.builder.io/api/v1/image/assets/TEMP/2168645f531d28b82837c632f89d3ed0ceaf4956?width=720";return l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx(Ks,{}),l.jsxs("section",{className:"relative h-[500px] md:h-[600px] lg:h-[700px] bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://cdn.builder.io/api/v1/image/assets/TEMP/ac22f2485a263f666b244c562a91c2c171ea8b4e?width=2880')"},children:[l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center max-w-9xl w-full mx-auto",children:[l.jsxs("div",{className:"bg-white bg-opacity-60 backdrop-blur-md rounded-[40px] p-8 md:p-12 lg:p-16",children:[l.jsx("h1",{className:"font-josefin text-3xl md:text-5xl lg:text-6xl font-bold text-white text-center lg:text-left leading-tight",children:"Hướng dẫn viên chuyên nghiệp"}),l.jsx("p",{className:"font-nunito text-lg md:text-xl text-white text-center lg:text-left mt-4 opacity-90",children:"Tham gia đội ngũ hướng dẫn viên chuyên nghiệp của chúng tôi"})]}),l.jsx("div",{className:"flex justify-center lg:justify-end",children:l.jsx("button",{onClick:()=>n("/tour-guide-registration"),className:"bg-tour-blue hover:bg-tour-teal transition-all duration-300 hover:scale-105 active:scale-95 rounded-[30px] px-8 md:px-12 py-6 md:py-8 shadow-2xl group",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"font-nunito text-xl md:text-2xl lg:text-3xl font-bold text-white block mb-2",children:"Đăng kí làm hướng dẫn viên"}),l.jsx("span",{className:"font-nunito text-sm md:text-base text-white opacity-90",children:"Chia sẻ kinh nghiệm - Tạo thu nhập"})]})})})]})})]}),l.jsx("section",{className:"py-8 md:py-12 bg-white",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("h2",{className:"font-itim text-4xl md:text-5xl lg:text-6xl text-black text-left",children:"Hướng dẫn viên"})})}),l.jsx("section",{className:"py-8 md:py-12 bg-white",children:l.jsxs("div",{className:"container mx-auto px-4",children:[r?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Og,{className:"h-12 w-12 animate-spin mx-auto text-tour-blue"}),l.jsx("p",{className:"mt-4 text-gray-500 font-nunito",children:"Đang tải danh sách hướng dẫn viên..."})]})}):s?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-red-500 font-nunito text-lg",children:s}),l.jsx("button",{onClick:a,className:"mt-4 bg-tour-blue hover:bg-tour-teal text-white px-6 py-2 rounded-lg font-nunito font-bold transition-colors duration-200",children:"Thử lại"})]}):e.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-gray-500 font-nunito text-lg",children:"Chưa có hướng dẫn viên nào"}),l.jsx("p",{className:"text-gray-400 font-nunito mt-2",children:"Hãy đăng ký làm hướng dẫn viên đầu tiên!"})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:e.map(h=>l.jsxs("div",{className:"border border-gray-200 rounded-[20px] overflow-hidden hover:shadow-xl transition-shadow duration-300 cursor-pointer group",onClick:()=>n(`/guide/${h.id}`),children:[l.jsx("img",{src:d(h),alt:c(h),className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"font-nunito text-xl font-bold text-black mb-2",children:c(h)}),l.jsx("p",{className:"font-nunito text-base text-gray-700 mb-4 line-clamp-3",children:u(h)}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[h.rating&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-yellow-500",children:"★"}),l.jsx("span",{children:h.rating.toFixed(1)}),h.totalReviews&&l.jsxs("span",{children:["(",h.totalReviews,")"]})]}),h.totalTours&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{children:"📅"}),l.jsxs("span",{children:[h.totalTours," tour"]})]}),h.experience&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{children:"⭐"}),l.jsxs("span",{children:[h.experience," năm KN"]})]})]}),l.jsx("button",{onClick:f=>{f.stopPropagation(),n(`/guide/${h.id}`)},className:"bg-tour-blue hover:bg-tour-teal text-white px-4 py-2 rounded-lg font-nunito font-bold transition-colors duration-200",children:"Xem chi tiết"})]})]},h.id))}),l.jsxs("div",{className:"flex justify-center items-center space-x-4 mt-12",children:[l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("div",{className:"w-9 h-9 bg-gray-300 rounded-full"}),l.jsx("div",{className:"w-9 h-9 bg-gray-300 rounded-full"}),l.jsx("div",{className:"w-9 h-9 bg-gray-300 rounded-full"}),l.jsx("div",{className:"w-9 h-9 bg-gray-300 rounded-full"})]}),l.jsx("button",{className:"bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-shadow duration-200 border border-gray-200",children:l.jsx(Lae,{className:"w-6 h-6 text-black"})})]})]})}),l.jsx("footer",{className:"bg-gray-300 py-12 md:py-20",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"font-nunito text-lg md:text-xl text-black",children:"© 2024 Travel Guide Vietnam. All rights reserved."})})})})]})}const nE=hA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ce=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?XAe:"button";return l.jsx(o,{className:Qe(nE({variant:e,size:t,className:n})),ref:s,...i})});Ce.displayName="Button";const We=S.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:Qe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));We.displayName="Input";function SI(n,[e,t]){return Math.min(t,Math.max(e,n))}var zIe=S.createContext(void 0);function pA(n){const e=S.useContext(zIe);return n||e||"ltr"}var z4=0;function cM(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??TY()),document.body.insertAdjacentElement("beforeend",n[1]??TY()),z4++,()=>{z4===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),z4--}},[])}function TY(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var H4="focusScope.autoFocusOnMount",W4="focusScope.autoFocusOnUnmount",AY={bubbles:!1,cancelable:!0},HIe="FocusScope",gA=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,c]=S.useState(null),u=Yo(i),d=Yo(s),h=S.useRef(null),f=an(e,y=>c(y)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let y=function(k){if(p.paused||!a)return;const T=k.target;a.contains(T)?h.current=T:ap(h.current,{select:!0})},b=function(k){if(p.paused||!a)return;const T=k.relatedTarget;T!==null&&(a.contains(T)||ap(h.current,{select:!0}))},_=function(k){if(document.activeElement===document.body)for(const E of k)E.removedNodes.length>0&&ap(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const C=new MutationObserver(_);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),C.disconnect()}}},[r,a,p.paused]),S.useEffect(()=>{if(a){jY.add(p);const y=document.activeElement;if(!a.contains(y)){const _=new CustomEvent(H4,AY);a.addEventListener(H4,u),a.dispatchEvent(_),_.defaultPrevented||(WIe(XIe(fue(a)),{select:!0}),document.activeElement===y&&ap(a))}return()=>{a.removeEventListener(H4,u),setTimeout(()=>{const _=new CustomEvent(W4,AY);a.addEventListener(W4,d),a.dispatchEvent(_),_.defaultPrevented||ap(y??document.body,{select:!0}),a.removeEventListener(W4,d),jY.remove(p)},0)}}},[a,u,d,p]);const x=S.useCallback(y=>{if(!t&&!r||p.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(b&&_){const C=y.currentTarget,[k,T]=qIe(C);k&&T?!y.shiftKey&&_===T?(y.preventDefault(),t&&ap(k,{select:!0})):y.shiftKey&&_===k&&(y.preventDefault(),t&&ap(T,{select:!0})):_===C&&y.preventDefault()}},[t,r,p.paused]);return l.jsx(kt.div,{tabIndex:-1,...o,ref:f,onKeyDown:x})});gA.displayName=HIe;function WIe(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ap(r,{select:e}),document.activeElement!==t)return}function qIe(n){const e=fue(n),t=NY(e,n),r=NY(e.reverse(),n);return[t,r]}function fue(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function NY(n,e){for(const t of n)if(!GIe(t,{upTo:e}))return t}function GIe(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function KIe(n){return n instanceof HTMLInputElement&&"select"in n}function ap(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&KIe(n)&&e&&n.select()}}var jY=YIe();function YIe(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=PY(n,e),n.unshift(e)},remove(e){var t;n=PY(n,e),(t=n[0])==null||t.resume()}}}function PY(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function XIe(n){return n.filter(e=>e.tagName!=="A")}function uM(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var JIe=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},ab=new WeakMap,hj=new WeakMap,fj={},q4=0,mue=function(n){return n&&(n.host||mue(n.parentNode))},QIe=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=mue(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},ZIe=function(n,e,t,r){var i=QIe(e,Array.isArray(n)?n:[n]);fj[t]||(fj[t]=new WeakMap);var s=fj[t],o=[],a=new Set,c=new Set(i),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),x=p!==null&&p!=="false",y=(ab.get(f)||0)+1,b=(s.get(f)||0)+1;ab.set(f,y),s.set(f,b),o.push(f),y===1&&x&&hj.set(f,!0),b===1&&f.setAttribute(t,"true"),x||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return d(e),a.clear(),q4++,function(){o.forEach(function(h){var f=ab.get(h)-1,p=s.get(h)-1;ab.set(h,f),s.set(h,p),f||(hj.has(h)||h.removeAttribute(r),hj.delete(h)),p||h.removeAttribute(t)}),q4--,q4||(ab=new WeakMap,ab=new WeakMap,hj=new WeakMap,fj={})}},dM=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=JIe(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ZIe(r,i,t,"aria-hidden")):function(){return null}},Kd=function(){return Kd=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Kd.apply(this,arguments)};function pue(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function eOe(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var dP="right-scroll-bar-position",hP="width-before-scroll-bar",tOe="with-scroll-bars-hidden",nOe="--removed-body-scroll-bar-size";function G4(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function rOe(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var iOe=typeof window<"u"?S.useLayoutEffect:S.useEffect,IY=new WeakMap;function sOe(n,e){var t=rOe(null,function(r){return n.forEach(function(i){return G4(i,r)})});return iOe(function(){var r=IY.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||G4(a,null)}),s.forEach(function(a){i.has(a)||G4(a,o)})}IY.set(t,n)},[n]),t}function oOe(n){return n}function aOe(n,e){e===void 0&&(e=oOe);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var c=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),t={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),t}}}};return i}function lOe(n){n===void 0&&(n={});var e=aOe(null);return e.options=Kd({async:!0,ssr:!1},n),e}var gue=function(n){var e=n.sideCar,t=pue(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Kd({},t))};gue.isSideCarExport=!0;function cOe(n,e){return n.useMedium(e),gue}var vue=lOe(),K4=function(){},hM=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:K4,onWheelCapture:K4,onTouchMoveCapture:K4}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,c=n.className,u=n.removeScrollBar,d=n.enabled,h=n.shards,f=n.sideCar,p=n.noRelative,x=n.noIsolation,y=n.inert,b=n.allowPinchZoom,_=n.as,C=_===void 0?"div":_,k=n.gapMode,T=pue(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,N=sOe([t,e]),P=Kd(Kd({},T),i);return S.createElement(S.Fragment,null,d&&S.createElement(E,{sideCar:vue,removeScrollBar:u,shards:h,noRelative:p,noIsolation:x,inert:y,setCallbacks:s,allowPinchZoom:!!b,lockRef:t,gapMode:k}),o?S.cloneElement(S.Children.only(a),Kd(Kd({},P),{ref:N})):S.createElement(C,Kd({},P,{className:c,ref:N}),a))});hM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hM.classNames={fullWidth:hP,zeroRight:dP};var uOe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dOe(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=uOe();return e&&n.setAttribute("nonce",e),n}function hOe(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function fOe(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var mOe=function(){var n=0,e=null;return{add:function(t){n==0&&(e=dOe())&&(hOe(e,t),fOe(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pOe=function(){var n=mOe();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},yue=function(){var n=pOe(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},gOe={left:0,top:0,right:0,gap:0},Y4=function(n){return parseInt(n||"",10)||0},vOe=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[Y4(t),Y4(r),Y4(i)]},yOe=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return gOe;var e=vOe(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},xOe=yue(),uw="data-scroll-locked",bOe=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(tOe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(uw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(hP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dP," .").concat(dP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(hP," .").concat(hP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(uw,`] {
    `).concat(nOe,": ").concat(a,`px;
  }
`)},OY=function(){var n=parseInt(document.body.getAttribute(uw)||"0",10);return isFinite(n)?n:0},wOe=function(){S.useEffect(function(){return document.body.setAttribute(uw,(OY()+1).toString()),function(){var n=OY()-1;n<=0?document.body.removeAttribute(uw):document.body.setAttribute(uw,n.toString())}},[])},_Oe=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;wOe();var s=S.useMemo(function(){return yOe(i)},[i]);return S.createElement(xOe,{styles:bOe(s,!e,i,t?"":"!important")})},IB=!1;if(typeof window<"u")try{var mj=Object.defineProperty({},"passive",{get:function(){return IB=!0,!0}});window.addEventListener("test",mj,mj),window.removeEventListener("test",mj,mj)}catch{IB=!1}var lb=IB?{passive:!1}:!1,SOe=function(n){return n.tagName==="TEXTAREA"},xue=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!SOe(n)&&t[e]==="visible")},kOe=function(n){return xue(n,"overflowY")},COe=function(n){return xue(n,"overflowX")},RY=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=bue(n,r);if(i){var s=wue(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},EOe=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},TOe=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},bue=function(n,e){return n==="v"?kOe(e):COe(e)},wue=function(n,e){return n==="v"?EOe(e):TOe(e)},AOe=function(n,e){return n==="h"&&e==="rtl"?-1:1},NOe=function(n,e,t,r,i){var s=AOe(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,c=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=wue(n,a),x=p[0],y=p[1],b=p[2],_=y-b-s*x;(x||_)&&bue(n,a)&&(h+=_,f+=x);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(u=!0),u},pj=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},MY=function(n){return[n.deltaX,n.deltaY]},DY=function(n){return n&&"current"in n?n.current:n},jOe=function(n,e){return n[0]===e[0]&&n[1]===e[1]},POe=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},IOe=0,cb=[];function OOe(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),i=S.useState(IOe++)[0],s=S.useState(yue)[0],o=S.useRef(n);S.useEffect(function(){o.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var y=eOe([n.lockRef.current],(n.shards||[]).map(DY),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=S.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var _=pj(y),C=t.current,k="deltaX"in y?y.deltaX:C[0]-_[0],T="deltaY"in y?y.deltaY:C[1]-_[1],E,N=y.target,P=Math.abs(k)>Math.abs(T)?"h":"v";if("touches"in y&&P==="h"&&N.type==="range")return!1;var M=RY(P,N);if(!M)return!0;if(M?E=P:(E=P==="v"?"h":"v",M=RY(P,N)),!M)return!1;if(!r.current&&"changedTouches"in y&&(k||T)&&(r.current=E),!E)return!0;var O=r.current||E;return NOe(O,b,y,O==="h"?k:T)},[]),c=S.useCallback(function(y){var b=y;if(!(!cb.length||cb[cb.length-1]!==s)){var _="deltaY"in b?MY(b):pj(b),C=e.current.filter(function(E){return E.name===b.type&&(E.target===b.target||b.target===E.shadowParent)&&jOe(E.delta,_)})[0];if(C&&C.should){b.cancelable&&b.preventDefault();return}if(!C){var k=(o.current.shards||[]).map(DY).filter(Boolean).filter(function(E){return E.contains(b.target)}),T=k.length>0?a(b,k[0]):!o.current.noIsolation;T&&b.cancelable&&b.preventDefault()}}},[]),u=S.useCallback(function(y,b,_,C){var k={name:y,delta:b,target:_,should:C,shadowParent:ROe(_)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(T){return T!==k})},1)},[]),d=S.useCallback(function(y){t.current=pj(y),r.current=void 0},[]),h=S.useCallback(function(y){u(y.type,MY(y),y.target,a(y,n.lockRef.current))},[]),f=S.useCallback(function(y){u(y.type,pj(y),y.target,a(y,n.lockRef.current))},[]);S.useEffect(function(){return cb.push(s),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,lb),document.addEventListener("touchmove",c,lb),document.addEventListener("touchstart",d,lb),function(){cb=cb.filter(function(y){return y!==s}),document.removeEventListener("wheel",c,lb),document.removeEventListener("touchmove",c,lb),document.removeEventListener("touchstart",d,lb)}},[]);var p=n.removeScrollBar,x=n.inert;return S.createElement(S.Fragment,null,x?S.createElement(s,{styles:POe(i)}):null,p?S.createElement(_Oe,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function ROe(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const MOe=cOe(vue,OOe);var vA=S.forwardRef(function(n,e){return S.createElement(hM,Kd({},n,{ref:e,sideCar:MOe}))});vA.classNames=hM.classNames;var DOe=[" ","Enter","ArrowUp","ArrowDown"],LOe=[" ","Enter"],W0="Select",[fM,mM,FOe]=uA(W0),[uS]=_o(W0,[FOe,tv]),pM=tv(),[BOe,nv]=uS(W0),[$Oe,VOe]=uS(W0),_ue=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:x}=n,y=pM(e),[b,_]=S.useState(null),[C,k]=S.useState(null),[T,E]=S.useState(!1),N=pA(u),[P,M]=Pu({prop:r,defaultProp:i??!1,onChange:s,caller:W0}),[O,q]=Pu({prop:o,defaultProp:a,onChange:c,caller:W0}),D=S.useRef(null),F=b?x||!!b.closest("form"):!0,[K,ee]=S.useState(new Set),Y=Array.from(K).map(U=>U.props.value).join(";");return l.jsx(pU,{...y,children:l.jsxs(BOe,{required:p,scope:e,trigger:b,onTriggerChange:_,valueNode:C,onValueNodeChange:k,valueNodeHasChildren:T,onValueNodeHasChildrenChange:E,contentId:Ys(),value:O,onValueChange:q,open:P,onOpenChange:M,dir:N,triggerPointerDownPosRef:D,disabled:f,children:[l.jsx(fM.Provider,{scope:e,children:l.jsx($Oe,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(U=>{ee(R=>new Set(R).add(U))},[]),onNativeOptionRemove:S.useCallback(U=>{ee(R=>{const z=new Set(R);return z.delete(U),z})},[]),children:t})}),F?l.jsxs(que,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:O,onChange:U=>q(U.target.value),disabled:f,form:x,children:[O===void 0?l.jsx("option",{value:""}):null,Array.from(K)]},Y):null]})})};_ue.displayName=W0;var Sue="SelectTrigger",kue=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=pM(t),o=nv(Sue,t),a=o.disabled||r,c=an(e,o.onTriggerChange),u=mM(t),d=S.useRef("touch"),[h,f,p]=Kue(y=>{const b=u().filter(k=>!k.disabled),_=b.find(k=>k.value===o.value),C=Yue(b,y,_);C!==void 0&&o.onValueChange(C.value)}),x=y=>{a||(o.onOpenChange(!0),p()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return l.jsx(mA,{asChild:!0,...s,children:l.jsx(kt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Gue(o.value)?"":void 0,...i,ref:c,onClick:st(i.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&x(y)}),onPointerDown:st(i.onPointerDown,y=>{d.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:st(i.onKeyDown,y=>{const b=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(b&&y.key===" ")&&DOe.includes(y.key)&&(x(),y.preventDefault())})})})});kue.displayName=Sue;var Cue="SelectValue",Eue=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:o="",...a}=n,c=nv(Cue,t),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,h=an(e,c.onValueNodeChange);return Wi(()=>{u(d)},[u,d]),l.jsx(kt.span,{...a,ref:h,style:{pointerEvents:"none"},children:Gue(c.value)?l.jsx(l.Fragment,{children:o}):s})});Eue.displayName=Cue;var UOe="SelectIcon",Tue=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return l.jsx(kt.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});Tue.displayName=UOe;var zOe="SelectPortal",Aue=n=>l.jsx(oS,{asChild:!0,...n});Aue.displayName=zOe;var q0="SelectContent",Nue=S.forwardRef((n,e)=>{const t=nv(q0,n.__scopeSelect),[r,i]=S.useState();if(Wi(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?tS.createPortal(l.jsx(jue,{scope:n.__scopeSelect,children:l.jsx(fM.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),s):null}return l.jsx(Pue,{...n,ref:e})});Nue.displayName=q0;var Xc=10,[jue,rv]=uS(q0),HOe="SelectContentImpl",WOe=Rg("SelectContent.RemoveScroll"),Pue=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:x,hideWhenDetached:y,avoidCollisions:b,..._}=n,C=nv(q0,t),[k,T]=S.useState(null),[E,N]=S.useState(null),P=an(e,ve=>T(ve)),[M,O]=S.useState(null),[q,D]=S.useState(null),F=mM(t),[K,ee]=S.useState(!1),Y=S.useRef(!1);S.useEffect(()=>{if(k)return dM(k)},[k]),cM();const U=S.useCallback(ve=>{const[be,...fe]=F().map(Z=>Z.ref.current),[we]=fe.slice(-1),ue=document.activeElement;for(const Z of ve)if(Z===ue||(Z==null||Z.scrollIntoView({block:"nearest"}),Z===be&&E&&(E.scrollTop=0),Z===we&&E&&(E.scrollTop=E.scrollHeight),Z==null||Z.focus(),document.activeElement!==ue))return},[F,E]),R=S.useCallback(()=>U([M,k]),[U,M,k]);S.useEffect(()=>{K&&R()},[K,R]);const{onOpenChange:z,triggerPointerDownPosRef:W}=C;S.useEffect(()=>{if(k){let ve={x:0,y:0};const be=we=>{var ue,Z;ve={x:Math.abs(Math.round(we.pageX)-(((ue=W.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(we.pageY)-(((Z=W.current)==null?void 0:Z.y)??0))}},fe=we=>{ve.x<=10&&ve.y<=10?we.preventDefault():k.contains(we.target)||z(!1),document.removeEventListener("pointermove",be),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",fe,{capture:!0})}}},[k,z,W]),S.useEffect(()=>{const ve=()=>z(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[z]);const[se,ne]=Kue(ve=>{const be=F().filter(ue=>!ue.disabled),fe=be.find(ue=>ue.ref.current===document.activeElement),we=Yue(be,ve,fe);we&&setTimeout(()=>we.ref.current.focus())}),te=S.useCallback((ve,be,fe)=>{const we=!Y.current&&!fe;(C.value!==void 0&&C.value===be||we)&&(O(ve),we&&(Y.current=!0))},[C.value]),H=S.useCallback(()=>k==null?void 0:k.focus(),[k]),ce=S.useCallback((ve,be,fe)=>{const we=!Y.current&&!fe;(C.value!==void 0&&C.value===be||we)&&D(ve)},[C.value]),pe=r==="popper"?OB:Iue,oe=pe===OB?{side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:x,hideWhenDetached:y,avoidCollisions:b}:{};return l.jsx(jue,{scope:t,content:k,viewport:E,onViewportChange:N,itemRefCallback:te,selectedItem:M,onItemLeave:H,itemTextRefCallback:ce,focusSelectedItem:R,selectedItemText:q,position:r,isPositioned:K,searchRef:se,children:l.jsx(vA,{as:WOe,allowPinchZoom:!0,children:l.jsx(gA,{asChild:!0,trapped:C.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:st(i,ve=>{var be;(be=C.trigger)==null||be.focus({preventScroll:!0}),ve.preventDefault()}),children:l.jsx(cx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:l.jsx(pe,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ve=>ve.preventDefault(),..._,...oe,onPlaced:()=>ee(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:st(_.onKeyDown,ve=>{const be=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!be&&ve.key.length===1&&ne(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let we=F().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const ue=ve.target,Z=we.indexOf(ue);we=we.slice(Z+1)}setTimeout(()=>U(we)),ve.preventDefault()}})})})})})})});Pue.displayName=HOe;var qOe="SelectItemAlignedPosition",Iue=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=nv(q0,t),o=rv(q0,t),[a,c]=S.useState(null),[u,d]=S.useState(null),h=an(e,P=>d(P)),f=mM(t),p=S.useRef(!1),x=S.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:_,focusSelectedItem:C}=o,k=S.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&y&&b&&_){const P=s.trigger.getBoundingClientRect(),M=u.getBoundingClientRect(),O=s.valueNode.getBoundingClientRect(),q=_.getBoundingClientRect();if(s.dir!=="rtl"){const ue=q.left-M.left,Z=O.left-ue,ge=P.left-Z,he=P.width+ge,Ee=Math.max(he,M.width),Be=window.innerWidth-Xc,vt=SI(Z,[Xc,Math.max(Xc,Be-Ee)]);a.style.minWidth=he+"px",a.style.left=vt+"px"}else{const ue=M.right-q.right,Z=window.innerWidth-O.right-ue,ge=window.innerWidth-P.right-Z,he=P.width+ge,Ee=Math.max(he,M.width),Be=window.innerWidth-Xc,vt=SI(Z,[Xc,Math.max(Xc,Be-Ee)]);a.style.minWidth=he+"px",a.style.right=vt+"px"}const D=f(),F=window.innerHeight-Xc*2,K=y.scrollHeight,ee=window.getComputedStyle(u),Y=parseInt(ee.borderTopWidth,10),U=parseInt(ee.paddingTop,10),R=parseInt(ee.borderBottomWidth,10),z=parseInt(ee.paddingBottom,10),W=Y+U+K+z+R,se=Math.min(b.offsetHeight*5,W),ne=window.getComputedStyle(y),te=parseInt(ne.paddingTop,10),H=parseInt(ne.paddingBottom,10),ce=P.top+P.height/2-Xc,pe=F-ce,oe=b.offsetHeight/2,ve=b.offsetTop+oe,be=Y+U+ve,fe=W-be;if(be<=ce){const ue=D.length>0&&b===D[D.length-1].ref.current;a.style.bottom="0px";const Z=u.clientHeight-y.offsetTop-y.offsetHeight,ge=Math.max(pe,oe+(ue?H:0)+Z+R),he=be+ge;a.style.height=he+"px"}else{const ue=D.length>0&&b===D[0].ref.current;a.style.top="0px";const ge=Math.max(ce,Y+y.offsetTop+(ue?te:0)+oe)+fe;a.style.height=ge+"px",y.scrollTop=be-ce+y.offsetTop}a.style.margin=`${Xc}px 0`,a.style.minHeight=se+"px",a.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,u,y,b,_,s.dir,r]);Wi(()=>k(),[k]);const[T,E]=S.useState();Wi(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const N=S.useCallback(P=>{P&&x.current===!0&&(k(),C==null||C(),x.current=!1)},[k,C]);return l.jsx(KOe,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:l.jsx(kt.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Iue.displayName=qOe;var GOe="SelectPopperPosition",OB=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=Xc,...s}=n,o=pM(t);return l.jsx(rM,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});OB.displayName=GOe;var[KOe,bU]=uS(q0,{}),RB="SelectViewport",Oue=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,s=rv(RB,t),o=bU(RB,t),a=an(e,s.onViewportChange),c=S.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(fM.Slot,{scope:t,children:l.jsx(kt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:st(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const x=window.innerHeight-Xc*2,y=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),_=Math.max(y,b);if(_<x){const C=_+p,k=Math.min(x,C),T=C-k;h.style.height=k+"px",h.style.bottom==="0px"&&(d.scrollTop=T>0?T:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Oue.displayName=RB;var Rue="SelectGroup",[YOe,XOe]=uS(Rue),JOe=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Ys();return l.jsx(YOe,{scope:t,id:i,children:l.jsx(kt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});JOe.displayName=Rue;var Mue="SelectLabel",Due=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=XOe(Mue,t);return l.jsx(kt.div,{id:i.id,...r,ref:e})});Due.displayName=Mue;var kI="SelectItem",[QOe,Lue]=uS(kI),Fue=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...o}=n,a=nv(kI,t),c=rv(kI,t),u=a.value===r,[d,h]=S.useState(s??""),[f,p]=S.useState(!1),x=an(e,C=>{var k;return(k=c.itemRefCallback)==null?void 0:k.call(c,C,r,i)}),y=Ys(),b=S.useRef("touch"),_=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(QOe,{scope:t,value:r,disabled:i,textId:y,isSelected:u,onItemTextChange:S.useCallback(C=>{h(k=>k||((C==null?void 0:C.textContent)??"").trim())},[]),children:l.jsx(fM.ItemSlot,{scope:t,value:r,disabled:i,textValue:d,children:l.jsx(kt.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:st(o.onFocus,()=>p(!0)),onBlur:st(o.onBlur,()=>p(!1)),onClick:st(o.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:st(o.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:st(o.onPointerDown,C=>{b.current=C.pointerType}),onPointerMove:st(o.onPointerMove,C=>{var k;b.current=C.pointerType,i?(k=c.onItemLeave)==null||k.call(c):b.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:st(o.onPointerLeave,C=>{var k;C.currentTarget===document.activeElement&&((k=c.onItemLeave)==null||k.call(c))}),onKeyDown:st(o.onKeyDown,C=>{var T;((T=c.searchRef)==null?void 0:T.current)!==""&&C.key===" "||(LOe.includes(C.key)&&_(),C.key===" "&&C.preventDefault())})})})})});Fue.displayName=kI;var Bk="SelectItemText",Bue=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,o=nv(Bk,t),a=rv(Bk,t),c=Lue(Bk,t),u=VOe(Bk,t),[d,h]=S.useState(null),f=an(e,_=>h(_),c.onItemTextChange,_=>{var C;return(C=a.itemTextRefCallback)==null?void 0:C.call(a,_,c.value,c.disabled)}),p=d==null?void 0:d.textContent,x=S.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=u;return Wi(()=>(y(x),()=>b(x)),[y,b,x]),l.jsxs(l.Fragment,{children:[l.jsx(kt.span,{id:c.textId,...s,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?tS.createPortal(s.children,o.valueNode):null]})});Bue.displayName=Bk;var $ue="SelectItemIndicator",Vue=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return Lue($ue,t).isSelected?l.jsx(kt.span,{"aria-hidden":!0,...r,ref:e}):null});Vue.displayName=$ue;var MB="SelectScrollUpButton",Uue=S.forwardRef((n,e)=>{const t=rv(MB,n.__scopeSelect),r=bU(MB,n.__scopeSelect),[i,s]=S.useState(!1),o=an(e,r.onScrollButtonChange);return Wi(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollTop>0;s(u)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?l.jsx(Hue,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});Uue.displayName=MB;var DB="SelectScrollDownButton",zue=S.forwardRef((n,e)=>{const t=rv(DB,n.__scopeSelect),r=bU(DB,n.__scopeSelect),[i,s]=S.useState(!1),o=an(e,r.onScrollButtonChange);return Wi(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?l.jsx(Hue,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});zue.displayName=DB;var Hue=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,s=rv("SelectScrollButton",t),o=S.useRef(null),a=mM(t),c=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>c(),[c]),Wi(()=>{var d;const u=a().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),l.jsx(kt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:st(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:st(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:st(i.onPointerLeave,()=>{c()})})}),ZOe="SelectSeparator",Wue=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(kt.div,{"aria-hidden":!0,...r,ref:e})});Wue.displayName=ZOe;var LB="SelectArrow",eRe=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=pM(t),s=nv(LB,t),o=rv(LB,t);return s.open&&o.position==="popper"?l.jsx(iM,{...i,...r,ref:e}):null});eRe.displayName=LB;var tRe="SelectBubbleInput",que=S.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=S.useRef(null),s=an(r,i),o=uM(e);return S.useEffect(()=>{const a=i.current;if(!a)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),l.jsx(kt.select,{...t,style:{...Zle,...t.style},ref:s,defaultValue:e})});que.displayName=tRe;function Gue(n){return n===""||n===void 0}function Kue(n){const e=Yo(n),t=S.useRef(""),r=S.useRef(0),i=S.useCallback(o=>{const a=t.current+o;e(a),(function c(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(a)},[e]),s=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function Yue(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=nRe(n,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==t?c:void 0}function nRe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var rRe=_ue,Xue=kue,iRe=Eue,sRe=Tue,oRe=Aue,Jue=Nue,aRe=Oue,Que=Due,Zue=Fue,lRe=Bue,cRe=Vue,ede=Uue,tde=zue,nde=Wue;const Cn=rRe,En=iRe,wn=S.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(Xue,{ref:r,className:Qe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(sRe,{asChild:!0,children:l.jsx(nA,{className:"h-4 w-4 opacity-50"})})]}));wn.displayName=Xue.displayName;const rde=S.forwardRef(({className:n,...e},t)=>l.jsx(ede,{ref:t,className:Qe("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx($ae,{className:"h-4 w-4"})}));rde.displayName=ede.displayName;const ide=S.forwardRef(({className:n,...e},t)=>l.jsx(tde,{ref:t,className:Qe("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(nA,{className:"h-4 w-4"})}));ide.displayName=tde.displayName;const _n=S.forwardRef(({className:n,children:e,position:t="popper",searchable:r=!1,searchPlaceholder:i="Search...",onSearchChange:s,...o},a)=>{const[c,u]=S.useState(""),d=h=>{const f=h.target.value;u(f),s==null||s(f)};return l.jsx(oRe,{children:l.jsxs(Jue,{ref:a,className:Qe("relative z-[100] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...o,children:[l.jsx(rde,{}),r&&l.jsx("div",{className:"sticky top-0 z-[110] bg-popover border-b p-2",children:l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),l.jsx("input",{type:"text",placeholder:i,value:c,onChange:d,className:"w-full rounded-md border border-input bg-background px-8 py-1.5 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:h=>{h.stopPropagation()}})]})}),l.jsx(aRe,{className:Qe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(ide,{})]})})});_n.displayName=Jue.displayName;const uRe=S.forwardRef(({className:n,...e},t)=>l.jsx(Que,{ref:t,className:Qe("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));uRe.displayName=Que.displayName;const ze=S.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(Zue,{ref:r,className:Qe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(cRe,{children:l.jsx(Fr,{className:"h-4 w-4"})})}),l.jsx(lRe,{children:e})]}));ze.displayName=Zue.displayName;const dRe=S.forwardRef(({className:n,...e},t)=>l.jsx(nde,{ref:t,className:Qe("-mx-1 my-1 h-px bg-muted",n),...e}));dRe.displayName=nde.displayName;const fh=S.forwardRef(({value:n,onValueChange:e,placeholder:t,searchPlaceholder:r,options:i,className:s,disabled:o,...a},c)=>{const[u,d]=S.useState(""),h=i.filter(b=>b.value&&b.value.trim()!==""),f=i.some(b=>!b.value||b.value.trim()===""),p=S.useMemo(()=>u?h.filter(b=>b.label.toLowerCase().includes(u.toLowerCase())||b.value.toLowerCase().includes(u.toLowerCase())):h,[h,u]),x=b=>{d(b)},y=b=>{const _=b==="none"?"":b;e==null||e(_)};return l.jsxs(Cn,{value:n||"none",onValueChange:y,disabled:o,children:[l.jsx(wn,{ref:c,className:s,...a,children:l.jsx(En,{placeholder:t})}),l.jsxs(_n,{searchable:!0,searchPlaceholder:r,onSearchChange:x,children:[f&&l.jsx(ze,{value:"none",children:"Không chọn"},"none"),p.map(b=>l.jsx(ze,{value:b.value,children:b.label},b.value)),p.length===0&&u&&l.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"Không tìm thấy kết quả nào"})]})]})});fh.displayName="SearchableSelect";function Bn(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Bl(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Mo(n,e){const t=Bn(n);return isNaN(e)?Bl(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function Ru(n,e){const t=Bn(n);if(isNaN(e))return Bl(n,NaN);if(!e)return t;const r=t.getDate(),i=Bl(n,t.getTime());i.setMonth(t.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(t.setFullYear(i.getFullYear(),i.getMonth(),r),t)}const wU=6048e5,hRe=864e5;let fRe={};function yA(){return fRe}function mh(n,e){var a,c,u,d;const t=yA(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Bn(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function G0(n){return mh(n,{weekStartsOn:1})}function sde(n){const e=Bn(n),t=e.getFullYear(),r=Bl(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=G0(r),s=Bl(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=G0(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function d_(n){const e=Bn(n);return e.setHours(0,0,0,0),e}function CI(n){const e=Bn(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function th(n,e){const t=d_(n),r=d_(e),i=+t-CI(t),s=+r-CI(r);return Math.round((i-s)/hRe)}function mRe(n){const e=sde(n),t=Bl(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),G0(t)}function FB(n,e){const t=e*7;return Mo(n,t)}function pRe(n,e){return Ru(n,e*12)}function gRe(n){let e;return n.forEach(function(t){const r=Bn(t);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function vRe(n){let e;return n.forEach(t=>{const r=Bn(t);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Na(n,e){const t=d_(n),r=d_(e);return+t==+r}function _U(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function yRe(n){if(!_U(n)&&typeof n!="number")return!1;const e=Bn(n);return!isNaN(Number(e))}function rE(n,e){const t=Bn(n),r=Bn(e),i=t.getFullYear()-r.getFullYear(),s=t.getMonth()-r.getMonth();return i*12+s}function xRe(n,e,t){const r=mh(n,t),i=mh(e,t),s=+r-CI(r),o=+i-CI(i);return Math.round((s-o)/wU)}function SU(n){const e=Bn(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function Pa(n){const e=Bn(n);return e.setDate(1),e.setHours(0,0,0,0),e}function ode(n){const e=Bn(n),t=Bl(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function kU(n,e){var a,c,u,d;const t=yA(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Bn(n),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function ade(n){return kU(n,{weekStartsOn:1})}const bRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wRe=(n,e,t)=>{let r;const i=bRe[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function dw(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const _Re={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SRe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},CRe={date:dw({formats:_Re,defaultWidth:"full"}),time:dw({formats:SRe,defaultWidth:"full"}),dateTime:dw({formats:kRe,defaultWidth:"full"})},ERe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TRe=(n,e,t,r)=>ERe[n];function Yd(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const ARe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},NRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jRe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},PRe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},IRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ORe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RRe=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},MRe={ordinalNumber:RRe,era:Yd({values:ARe,defaultWidth:"wide"}),quarter:Yd({values:NRe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Yd({values:jRe,defaultWidth:"wide"}),day:Yd({values:PRe,defaultWidth:"wide"}),dayPeriod:Yd({values:IRe,defaultWidth:"wide",formattingValues:ORe,defaultFormattingWidth:"wide"})};function Xd(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?LRe(a,h=>h.test(o)):DRe(a,h=>h.test(o));let u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function DRe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function LRe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function lde(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const FRe=/^(\d+)(th|st|nd|rd)?/i,BRe=/\d+/i,$Re={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VRe={any:[/^b/i,/^(a|c)/i]},URe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zRe={any:[/1/i,/2/i,/3/i,/4/i]},HRe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},WRe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},GRe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},KRe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},YRe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XRe={ordinalNumber:lde({matchPattern:FRe,parsePattern:BRe,valueCallback:n=>parseInt(n,10)}),era:Xd({matchPatterns:$Re,defaultMatchWidth:"wide",parsePatterns:VRe,defaultParseWidth:"any"}),quarter:Xd({matchPatterns:URe,defaultMatchWidth:"wide",parsePatterns:zRe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Xd({matchPatterns:HRe,defaultMatchWidth:"wide",parsePatterns:WRe,defaultParseWidth:"any"}),day:Xd({matchPatterns:qRe,defaultMatchWidth:"wide",parsePatterns:GRe,defaultParseWidth:"any"}),dayPeriod:Xd({matchPatterns:KRe,defaultMatchWidth:"any",parsePatterns:YRe,defaultParseWidth:"any"})},cde={code:"en-US",formatDistance:wRe,formatLong:CRe,formatRelative:TRe,localize:MRe,match:XRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function JRe(n){const e=Bn(n);return th(e,ode(e))+1}function ude(n){const e=Bn(n),t=+G0(e)-+mRe(e);return Math.round(t/wU)+1}function dde(n,e){var d,h,f,p;const t=Bn(n),r=t.getFullYear(),i=yA(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Bl(n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=mh(o,e),c=Bl(n,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=mh(c,e);return t.getTime()>=a.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function QRe(n,e){var a,c,u,d;const t=yA(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=dde(n,e),s=Bl(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),mh(s,e)}function hde(n,e){const t=Bn(n),r=+mh(t,e)-+QRe(t,e);return Math.round(r/wU)+1}function Zn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const rp={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Zn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Zn(t+1,2)},d(n,e){return Zn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Zn(n.getHours()%12||12,e.length)},H(n,e){return Zn(n.getHours(),e.length)},m(n,e){return Zn(n.getMinutes(),e.length)},s(n,e){return Zn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Zn(i,e.length)}},ub={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LY={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return rp.y(n,e)},Y:function(n,e,t,r){const i=dde(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Zn(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Zn(s,e.length)},R:function(n,e){const t=sde(n);return Zn(t,e.length)},u:function(n,e){const t=n.getFullYear();return Zn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Zn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Zn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return rp.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Zn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=hde(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Zn(i,e.length)},I:function(n,e,t){const r=ude(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Zn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):rp.d(n,e)},D:function(n,e,t){const r=JRe(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Zn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Zn(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Zn(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Zn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=ub.noon:r===0?i=ub.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=ub.evening:r>=12?i=ub.afternoon:r>=4?i=ub.morning:i=ub.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return rp.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):rp.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Zn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Zn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):rp.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):rp.s(n,e)},S:function(n,e){return rp.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return BY(r);case"XXXX":case"XX":return Xv(r);case"XXXXX":case"XXX":default:return Xv(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return BY(r);case"xxxx":case"xx":return Xv(r);case"xxxxx":case"xxx":default:return Xv(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+FY(r,":");case"OOOO":default:return"GMT"+Xv(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+FY(r,":");case"zzzz":default:return"GMT"+Xv(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Zn(r,e.length)},T:function(n,e,t){const r=n.getTime();return Zn(r,e.length)}};function FY(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Zn(s,2)}function BY(n,e){return n%60===0?(n>0?"-":"+")+Zn(Math.abs(n)/60,2):Xv(n,e)}function Xv(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Zn(Math.trunc(r/60),2),s=Zn(r%60,2);return t+i+e+s}const $Y=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},fde=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ZRe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return $Y(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",$Y(r,e)).replace("{{time}}",fde(i,e))},eMe={p:fde,P:ZRe},tMe=/^D+$/,nMe=/^Y+$/,rMe=["D","DD","YY","YYYY"];function iMe(n){return tMe.test(n)}function sMe(n){return nMe.test(n)}function oMe(n,e,t){const r=aMe(n,e,t);if(console.warn(r),rMe.includes(n))throw new RangeError(r)}function aMe(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uMe=/^'([^]*?)'?$/,dMe=/''/g,hMe=/[a-zA-Z]/;function Wo(n,e,t){var d,h,f,p,x,y,b,_;const r=yA(),i=(t==null?void 0:t.locale)??r.locale??cde,s=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((y=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((_=(b=r.locale)==null?void 0:b.options)==null?void 0:_.weekStartsOn)??0,a=Bn(n);if(!yRe(a))throw new RangeError("Invalid time value");let c=e.match(cMe).map(C=>{const k=C[0];if(k==="p"||k==="P"){const T=eMe[k];return T(C,i.formatLong)}return C}).join("").match(lMe).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const k=C[0];if(k==="'")return{isToken:!1,value:fMe(C)};if(LY[k])return{isToken:!0,value:C};if(k.match(hMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:C}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(C=>{if(!C.isToken)return C.value;const k=C.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&sMe(k)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&iMe(k))&&oMe(k,e,String(n));const T=LY[k[0]];return T(a,k,i.localize,u)}).join("")}function fMe(n){const e=n.match(uMe);return e?e[1].replace(dMe,"'"):n}function mMe(n){const e=Bn(n),t=e.getFullYear(),r=e.getMonth(),i=Bl(n,0);return i.setFullYear(t,r+1,0),i.setHours(0,0,0,0),i.getDate()}function pMe(n){return Math.trunc(+Bn(n)/1e3)}function gMe(n){const e=Bn(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function vMe(n,e){return xRe(gMe(n),Pa(n),e)+1}function BB(n,e){const t=Bn(n),r=Bn(e);return t.getTime()>r.getTime()}function mde(n,e){const t=Bn(n),r=Bn(e);return+t<+r}function CU(n,e){const t=Bn(n),r=Bn(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function yMe(n,e){const t=Bn(n),r=Bn(e);return t.getFullYear()===r.getFullYear()}function X4(n,e){return Mo(n,-e)}function J4(n,e){const t=Bn(n),r=t.getFullYear(),i=t.getDate(),s=Bl(n,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const o=mMe(s);return t.setMonth(e,Math.min(i,o)),t}function VY(n,e){const t=Bn(n);return isNaN(+t)?Bl(n,NaN):(t.setFullYear(e),t)}const xMe={lessThanXSeconds:{one:"dưới 1 giây",other:"dưới {{count}} giây"},xSeconds:{one:"1 giây",other:"{{count}} giây"},halfAMinute:"nửa phút",lessThanXMinutes:{one:"dưới 1 phút",other:"dưới {{count}} phút"},xMinutes:{one:"1 phút",other:"{{count}} phút"},aboutXHours:{one:"khoảng 1 giờ",other:"khoảng {{count}} giờ"},xHours:{one:"1 giờ",other:"{{count}} giờ"},xDays:{one:"1 ngày",other:"{{count}} ngày"},aboutXWeeks:{one:"khoảng 1 tuần",other:"khoảng {{count}} tuần"},xWeeks:{one:"1 tuần",other:"{{count}} tuần"},aboutXMonths:{one:"khoảng 1 tháng",other:"khoảng {{count}} tháng"},xMonths:{one:"1 tháng",other:"{{count}} tháng"},aboutXYears:{one:"khoảng 1 năm",other:"khoảng {{count}} năm"},xYears:{one:"1 năm",other:"{{count}} năm"},overXYears:{one:"hơn 1 năm",other:"hơn {{count}} năm"},almostXYears:{one:"gần 1 năm",other:"gần {{count}} năm"}},bMe=(n,e,t)=>{let r;const i=xMe[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?r+" nữa":r+" trước":r},wMe={full:"EEEE, 'ngày' d MMMM 'năm' y",long:"'ngày' d MMMM 'năm' y",medium:"d MMM 'năm' y",short:"dd/MM/y"},_Me={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},SMe={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},kMe={date:dw({formats:wMe,defaultWidth:"full"}),time:dw({formats:_Me,defaultWidth:"full"}),dateTime:dw({formats:SMe,defaultWidth:"full"})},CMe={lastWeek:"eeee 'tuần trước vào lúc' p",yesterday:"'hôm qua vào lúc' p",today:"'hôm nay vào lúc' p",tomorrow:"'ngày mai vào lúc' p",nextWeek:"eeee 'tới vào lúc' p",other:"P"},EMe=(n,e,t,r)=>CMe[n],TMe={narrow:["TCN","SCN"],abbreviated:["trước CN","sau CN"],wide:["trước Công Nguyên","sau Công Nguyên"]},AMe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Quý 1","Quý 2","Quý 3","Quý 4"]},NMe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["quý I","quý II","quý III","quý IV"]},jMe={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"]},PMe={narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["tháng 01","tháng 02","tháng 03","tháng 04","tháng 05","tháng 06","tháng 07","tháng 08","tháng 09","tháng 10","tháng 11","tháng 12"]},IMe={narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],wide:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"]},OMe={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"}},RMe={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"giữa trưa",morning:"vào buổi sáng",afternoon:"vào buổi chiều",evening:"vào buổi tối",night:"vào ban đêm"}},MMe=(n,e)=>{const t=Number(n),r=e==null?void 0:e.unit;if(r==="quarter")switch(t){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if(r==="day")switch(t){case 1:return"thứ 2";case 2:return"thứ 3";case 3:return"thứ 4";case 4:return"thứ 5";case 5:return"thứ 6";case 6:return"thứ 7";case 7:return"chủ nhật"}else{if(r==="week")return t===1?"thứ nhất":"thứ "+t;if(r==="dayOfYear")return t===1?"đầu tiên":"thứ "+t}return String(t)},DMe={ordinalNumber:MMe,era:Yd({values:TMe,defaultWidth:"wide"}),quarter:Yd({values:AMe,defaultWidth:"wide",formattingValues:NMe,defaultFormattingWidth:"wide",argumentCallback:n=>n-1}),month:Yd({values:jMe,defaultWidth:"wide",formattingValues:PMe,defaultFormattingWidth:"wide"}),day:Yd({values:IMe,defaultWidth:"wide"}),dayPeriod:Yd({values:OMe,defaultWidth:"wide",formattingValues:RMe,defaultFormattingWidth:"wide"})},LMe=/^(\d+)/i,FMe=/\d+/i,BMe={narrow:/^(tcn|scn)/i,abbreviated:/^(trước CN|sau CN)/i,wide:/^(trước Công Nguyên|sau Công Nguyên)/i},$Me={any:[/^t/i,/^s/i]},VMe={narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^quý ([1234]|i{1,3}v?)/i},UMe={any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},zMe={narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^tháng ?(Một|Hai|Ba|Tư|Năm|Sáu|Bảy|Tám|Chín|Mười|Mười ?Một|Mười ?Hai|0?[1-9](?!\d)|10|11|12)/i},HMe={narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^tháng ?(Một|0?1(?!\d))/i,/^tháng ?(Hai|0?2)/i,/^tháng ?(Ba|0?3)/i,/^tháng ?(Tư|0?4)/i,/^tháng ?(Năm|0?5)/i,/^tháng ?(Sáu|0?6)/i,/^tháng ?(Bảy|0?7)/i,/^tháng ?(Tám|0?8)/i,/^tháng ?(Chín|0?9)/i,/^tháng ?(Mười|10)/i,/^tháng ?(Mười ?Một|11)/i,/^tháng ?(Mười ?Hai|12)/i]},WMe={narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Chủ ?Nhật|Chúa ?Nhật|thứ ?Hai|thứ ?Ba|thứ ?Tư|thứ ?Năm|thứ ?Sáu|thứ ?Bảy)/i},qMe={narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Chủ|Chúa) ?Nhật/i,/Hai/i,/Ba/i,/Tư/i,/Năm/i,/Sáu/i,/Bảy/i]},GMe={narrow:/^(a|p|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,abbreviated:/^(am|pm|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,wide:/^(ch[^i]*|sa|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i},KMe={any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/nửa đêm/i,noon:/trưa/i,morning:/sáng/i,afternoon:/chiều/i,evening:/tối/i,night:/^đêm/i}},YMe={ordinalNumber:lde({matchPattern:LMe,parsePattern:FMe,valueCallback:n=>parseInt(n,10)}),era:Xd({matchPatterns:BMe,defaultMatchWidth:"wide",parsePatterns:$Me,defaultParseWidth:"any"}),quarter:Xd({matchPatterns:VMe,defaultMatchWidth:"wide",parsePatterns:UMe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Xd({matchPatterns:zMe,defaultMatchWidth:"wide",parsePatterns:HMe,defaultParseWidth:"wide"}),day:Xd({matchPatterns:WMe,defaultMatchWidth:"wide",parsePatterns:qMe,defaultParseWidth:"wide"}),dayPeriod:Xd({matchPatterns:GMe,defaultMatchWidth:"wide",parsePatterns:KMe,defaultParseWidth:"any"})},Yf={code:"vi",formatDistance:bMe,formatLong:kMe,formatRelative:EMe,localize:DMe,match:YMe,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Zt=function(){return Zt=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Zt.apply(this,arguments)};function XMe(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function pde(n,e,t){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function xA(n){return n.mode==="multiple"}function bA(n){return n.mode==="range"}function gM(n){return n.mode==="single"}var JMe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function QMe(n,e){return Wo(n,"LLLL y",e)}function ZMe(n,e){return Wo(n,"d",e)}function e3e(n,e){return Wo(n,"LLLL",e)}function t3e(n){return"".concat(n)}function n3e(n,e){return Wo(n,"cccccc",e)}function r3e(n,e){return Wo(n,"yyyy",e)}var i3e=Object.freeze({__proto__:null,formatCaption:QMe,formatDay:ZMe,formatMonthCaption:e3e,formatWeekNumber:t3e,formatWeekdayName:n3e,formatYearCaption:r3e}),s3e=function(n,e,t){return Wo(n,"do MMMM (EEEE)",t)},o3e=function(){return"Month: "},a3e=function(){return"Go to next month"},l3e=function(){return"Go to previous month"},c3e=function(n,e){return Wo(n,"cccc",e)},u3e=function(n){return"Week n. ".concat(n)},d3e=function(){return"Year: "},h3e=Object.freeze({__proto__:null,labelDay:s3e,labelMonthDropdown:o3e,labelNext:a3e,labelPrevious:l3e,labelWeekNumber:u3e,labelWeekday:c3e,labelYearDropdown:d3e});function f3e(){var n="buttons",e=JMe,t=cde,r={},i={},s=1,o={},a=new Date;return{captionLayout:n,classNames:e,formatters:i3e,labels:h3e,locale:t,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:o,today:a,mode:"default"}}function m3e(n){var e=n.fromYear,t=n.toYear,r=n.fromMonth,i=n.toMonth,s=n.fromDate,o=n.toDate;return r?s=Pa(r):e&&(s=new Date(e,0,1)),i?o=SU(i):t&&(o=new Date(t,11,31)),{fromDate:s?d_(s):void 0,toDate:o?d_(o):void 0}}var gde=S.createContext(void 0);function p3e(n){var e,t=n.initialProps,r=f3e(),i=m3e(t),s=i.fromDate,o=i.toDate,a=(e=t.captionLayout)!==null&&e!==void 0?e:r.captionLayout;a!=="buttons"&&(!s||!o)&&(a="buttons");var c;(gM(t)||xA(t)||bA(t))&&(c=t.onSelect);var u=Zt(Zt(Zt({},r),t),{captionLayout:a,classNames:Zt(Zt({},r.classNames),t.classNames),components:Zt({},t.components),formatters:Zt(Zt({},r.formatters),t.formatters),fromDate:s,labels:Zt(Zt({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:Zt(Zt({},r.modifiers),t.modifiers),modifiersClassNames:Zt(Zt({},r.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:Zt(Zt({},r.styles),t.styles),toDate:o});return l.jsx(gde.Provider,{value:u,children:n.children})}function Pr(){var n=S.useContext(gde);if(!n)throw new Error("useDayPicker must be used within a DayPickerProvider.");return n}function vde(n){var e=Pr(),t=e.locale,r=e.classNames,i=e.styles,s=e.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:n.id,children:s(n.displayMonth,{locale:t})})}function g3e(n){return l.jsx("svg",Zt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},n,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yde(n){var e,t,r=n.onChange,i=n.value,s=n.children,o=n.caption,a=n.className,c=n.style,u=Pr(),d=(t=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:g3e;return l.jsxs("div",{className:a,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:n["aria-label"]}),l.jsx("select",{name:n.name,"aria-label":n["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:s}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,l.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function v3e(n){var e,t=Pr(),r=t.fromDate,i=t.toDate,s=t.styles,o=t.locale,a=t.formatters.formatMonthCaption,c=t.classNames,u=t.components,d=t.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!i)return l.jsx(l.Fragment,{});var h=[];if(yMe(r,i))for(var f=Pa(r),p=r.getMonth();p<=i.getMonth();p++)h.push(J4(f,p));else for(var f=Pa(new Date),p=0;p<=11;p++)h.push(J4(f,p));var x=function(b){var _=Number(b.target.value),C=J4(Pa(n.displayMonth),_);n.onChange(C)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:yde;return l.jsx(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:x,value:n.displayMonth.getMonth(),caption:a(n.displayMonth,{locale:o}),children:h.map(function(b){return l.jsx("option",{value:b.getMonth(),children:a(b,{locale:o})},b.getMonth())})})}function y3e(n){var e,t=n.displayMonth,r=Pr(),i=r.fromDate,s=r.toDate,o=r.locale,a=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,f=[];if(!i)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});for(var p=i.getFullYear(),x=s.getFullYear(),y=p;y<=x;y++)f.push(VY(ode(new Date),y));var b=function(C){var k=VY(Pa(t),Number(C.target.value));n.onChange(k)},_=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:yde;return l.jsx(_,{name:"years","aria-label":h(),className:c.dropdown_year,style:a.dropdown_year,onChange:b,value:t.getFullYear(),caption:d(t,{locale:o}),children:f.map(function(C){return l.jsx("option",{value:C.getFullYear(),children:d(C,{locale:o})},C.getFullYear())})})}function x3e(n,e){var t=S.useState(n),r=t[0],i=t[1],s=e===void 0?r:e;return[s,i]}function b3e(n){var e=n.month,t=n.defaultMonth,r=n.today,i=e||t||r||new Date,s=n.toDate,o=n.fromDate,a=n.numberOfMonths,c=a===void 0?1:a;if(s&&rE(s,i)<0){var u=-1*(c-1);i=Ru(s,u)}return o&&rE(i,o)<0&&(i=o),Pa(i)}function w3e(){var n=Pr(),e=b3e(n),t=x3e(e,n.month),r=t[0],i=t[1],s=function(o){var a;if(!n.disableNavigation){var c=Pa(o);i(c),(a=n.onMonthChange)===null||a===void 0||a.call(n,c)}};return[r,s]}function _3e(n,e){for(var t=e.reverseMonths,r=e.numberOfMonths,i=Pa(n),s=Pa(Ru(i,r)),o=rE(s,i),a=[],c=0;c<o;c++){var u=Ru(i,c);a.push(u)}return t&&(a=a.reverse()),a}function S3e(n,e){if(!e.disableNavigation){var t=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=r?s:1,a=Pa(n);if(!t)return Ru(a,o);var c=rE(t,n);if(!(c<s))return Ru(a,o)}}function k3e(n,e){if(!e.disableNavigation){var t=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=r?s:1,a=Pa(n);if(!t)return Ru(a,-o);var c=rE(a,t);if(!(c<=0))return Ru(a,-o)}}var xde=S.createContext(void 0);function C3e(n){var e=Pr(),t=w3e(),r=t[0],i=t[1],s=_3e(r,e),o=S3e(r,e),a=k3e(r,e),c=function(h){return s.some(function(f){return CU(h,f)})},u=function(h,f){c(h)||(f&&mde(h,f)?i(Ru(h,1+e.numberOfMonths*-1)):i(h))},d={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:u,previousMonth:a,nextMonth:o,isDateDisplayed:c};return l.jsx(xde.Provider,{value:d,children:n.children})}function wA(){var n=S.useContext(xde);if(!n)throw new Error("useNavigation must be used within a NavigationProvider");return n}function UY(n){var e,t=Pr(),r=t.classNames,i=t.styles,s=t.components,o=wA().goToMonth,a=function(d){o(Ru(d,n.displayIndex?-n.displayIndex:0))},c=(e=s==null?void 0:s.CaptionLabel)!==null&&e!==void 0?e:vde,u=l.jsx(c,{id:n.id,displayMonth:n.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:u}),l.jsx(v3e,{onChange:a,displayMonth:n.displayMonth}),l.jsx(y3e,{onChange:a,displayMonth:n.displayMonth})]})}function E3e(n){return l.jsx("svg",Zt({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function T3e(n){return l.jsx("svg",Zt({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var EI=S.forwardRef(function(n,e){var t=Pr(),r=t.classNames,i=t.styles,s=[r.button_reset,r.button];n.className&&s.push(n.className);var o=s.join(" "),a=Zt(Zt({},i.button_reset),i.button);return n.style&&Object.assign(a,n.style),l.jsx("button",Zt({},n,{ref:e,type:"button",className:o,style:a}))});function A3e(n){var e,t,r=Pr(),i=r.dir,s=r.locale,o=r.classNames,a=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,h=r.components;if(!n.nextMonth&&!n.previousMonth)return l.jsx(l.Fragment,{});var f=u(n.previousMonth,{locale:s}),p=[o.nav_button,o.nav_button_previous].join(" "),x=d(n.nextMonth,{locale:s}),y=[o.nav_button,o.nav_button_next].join(" "),b=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:T3e,_=(t=h==null?void 0:h.IconLeft)!==null&&t!==void 0?t:E3e;return l.jsxs("div",{className:o.nav,style:a.nav,children:[!n.hidePrevious&&l.jsx(EI,{name:"previous-month","aria-label":f,className:p,style:a.nav_button_previous,disabled:!n.previousMonth,onClick:n.onPreviousClick,children:i==="rtl"?l.jsx(b,{className:o.nav_icon,style:a.nav_icon}):l.jsx(_,{className:o.nav_icon,style:a.nav_icon})}),!n.hideNext&&l.jsx(EI,{name:"next-month","aria-label":x,className:y,style:a.nav_button_next,disabled:!n.nextMonth,onClick:n.onNextClick,children:i==="rtl"?l.jsx(_,{className:o.nav_icon,style:a.nav_icon}):l.jsx(b,{className:o.nav_icon,style:a.nav_icon})})]})}function zY(n){var e=Pr().numberOfMonths,t=wA(),r=t.previousMonth,i=t.nextMonth,s=t.goToMonth,o=t.displayMonths,a=o.findIndex(function(x){return CU(n.displayMonth,x)}),c=a===0,u=a===o.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),f=function(){r&&s(r)},p=function(){i&&s(i)};return l.jsx(A3e,{displayMonth:n.displayMonth,hideNext:d,hidePrevious:h,nextMonth:i,previousMonth:r,onPreviousClick:f,onNextClick:p})}function N3e(n){var e,t=Pr(),r=t.classNames,i=t.disableNavigation,s=t.styles,o=t.captionLayout,a=t.components,c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:vde,u;return i?u=l.jsx(c,{id:n.id,displayMonth:n.displayMonth}):o==="dropdown"?u=l.jsx(UY,{displayMonth:n.displayMonth,id:n.id}):o==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(UY,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id}),l.jsx(zY,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:n.id,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),l.jsx(zY,{displayMonth:n.displayMonth,id:n.id})]}),l.jsx("div",{className:r.caption,style:s.caption,children:u})}function j3e(n){var e=Pr(),t=e.footer,r=e.styles,i=e.classNames.tfoot;return t?l.jsx("tfoot",{className:i,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:t})})}):l.jsx(l.Fragment,{})}function P3e(n,e,t){for(var r=t?G0(new Date):mh(new Date,{locale:n,weekStartsOn:e}),i=[],s=0;s<7;s++){var o=Mo(r,s);i.push(o)}return i}function I3e(){var n=Pr(),e=n.classNames,t=n.styles,r=n.showWeekNumber,i=n.locale,s=n.weekStartsOn,o=n.ISOWeek,a=n.formatters.formatWeekdayName,c=n.labels.labelWeekday,u=P3e(i,s,o);return l.jsxs("tr",{style:t.head_row,className:e.head_row,children:[r&&l.jsx("td",{style:t.head_cell,className:e.head_cell}),u.map(function(d,h){return l.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":c(d,{locale:i}),children:a(d,{locale:i})},h)})]})}function O3e(){var n,e=Pr(),t=e.classNames,r=e.styles,i=e.components,s=(n=i==null?void 0:i.HeadRow)!==null&&n!==void 0?n:I3e;return l.jsx("thead",{style:r.head,className:t.head,children:l.jsx(s,{})})}function R3e(n){var e=Pr(),t=e.locale,r=e.formatters.formatDay;return l.jsx(l.Fragment,{children:r(n.date,{locale:t})})}var EU=S.createContext(void 0);function M3e(n){if(!xA(n.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(EU.Provider,{value:e,children:n.children})}return l.jsx(D3e,{initialProps:n.initialProps,children:n.children})}function D3e(n){var e=n.initialProps,t=n.children,r=e.selected,i=e.min,s=e.max,o=function(u,d,h){var f,p;(f=e.onDayClick)===null||f===void 0||f.call(e,u,d,h);var x=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!x){var y=!!(!d.selected&&s&&(r==null?void 0:r.length)===s);if(!y){var b=r?pde([],r):[];if(d.selected){var _=b.findIndex(function(C){return Na(u,C)});b.splice(_,1)}else b.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,b,u,d,h)}}},a={disabled:[]};r&&a.disabled.push(function(u){var d=s&&r.length>s-1,h=r.some(function(f){return Na(f,u)});return!!(d&&!h)});var c={selected:r,onDayClick:o,modifiers:a};return l.jsx(EU.Provider,{value:c,children:t})}function TU(){var n=S.useContext(EU);if(!n)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return n}function L3e(n,e){var t=e||{},r=t.from,i=t.to;return r&&i?Na(i,n)&&Na(r,n)?void 0:Na(i,n)?{from:i,to:void 0}:Na(r,n)?void 0:BB(r,n)?{from:n,to:i}:{from:r,to:n}:i?BB(n,i)?{from:i,to:n}:{from:n,to:i}:r?mde(n,r)?{from:n,to:r}:{from:r,to:n}:{from:n,to:void 0}}var AU=S.createContext(void 0);function F3e(n){if(!bA(n.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(AU.Provider,{value:e,children:n.children})}return l.jsx(B3e,{initialProps:n.initialProps,children:n.children})}function B3e(n){var e=n.initialProps,t=n.children,r=e.selected,i=r||{},s=i.from,o=i.to,a=e.min,c=e.max,u=function(p,x,y){var b,_;(b=e.onDayClick)===null||b===void 0||b.call(e,p,x,y);var C=L3e(p,r);(_=e.onSelect)===null||_===void 0||_.call(e,C,p,x,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],Na(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),a&&(s&&!o&&d.disabled.push({after:X4(s,a-1),before:Mo(s,a-1)}),s&&o&&d.disabled.push({after:s,before:Mo(s,a-1)}),!s&&o&&d.disabled.push({after:X4(o,a-1),before:Mo(o,a-1)})),c){if(s&&!o&&(d.disabled.push({before:Mo(s,-c+1)}),d.disabled.push({after:Mo(s,c-1)})),s&&o){var h=th(o,s)+1,f=c-h;d.disabled.push({before:X4(s,f)}),d.disabled.push({after:Mo(o,f)})}!s&&o&&(d.disabled.push({before:Mo(o,-c+1)}),d.disabled.push({after:Mo(o,c-1)}))}return l.jsx(AU.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:t})}function NU(){var n=S.useContext(AU);if(!n)throw new Error("useSelectRange must be used within a SelectRangeProvider");return n}function fP(n){return Array.isArray(n)?pde([],n):n!==void 0?[n]:[]}function $3e(n){var e={};return Object.entries(n).forEach(function(t){var r=t[0],i=t[1];e[r]=fP(i)}),e}var Mu;(function(n){n.Outside="outside",n.Disabled="disabled",n.Selected="selected",n.Hidden="hidden",n.Today="today",n.RangeStart="range_start",n.RangeEnd="range_end",n.RangeMiddle="range_middle"})(Mu||(Mu={}));var V3e=Mu.Selected,zh=Mu.Disabled,U3e=Mu.Hidden,z3e=Mu.Today,Q4=Mu.RangeEnd,Z4=Mu.RangeMiddle,e5=Mu.RangeStart,H3e=Mu.Outside;function W3e(n,e,t){var r,i=(r={},r[V3e]=fP(n.selected),r[zh]=fP(n.disabled),r[U3e]=fP(n.hidden),r[z3e]=[n.today],r[Q4]=[],r[Z4]=[],r[e5]=[],r[H3e]=[],r);return n.fromDate&&i[zh].push({before:n.fromDate}),n.toDate&&i[zh].push({after:n.toDate}),xA(n)?i[zh]=i[zh].concat(e.modifiers[zh]):bA(n)&&(i[zh]=i[zh].concat(t.modifiers[zh]),i[e5]=t.modifiers[e5],i[Z4]=t.modifiers[Z4],i[Q4]=t.modifiers[Q4]),i}var bde=S.createContext(void 0);function q3e(n){var e=Pr(),t=TU(),r=NU(),i=W3e(e,t,r),s=$3e(e.modifiers),o=Zt(Zt({},i),s);return l.jsx(bde.Provider,{value:o,children:n.children})}function wde(){var n=S.useContext(bde);if(!n)throw new Error("useModifiers must be used within a ModifiersProvider");return n}function G3e(n){return!!(n&&typeof n=="object"&&"before"in n&&"after"in n)}function K3e(n){return!!(n&&typeof n=="object"&&"from"in n)}function Y3e(n){return!!(n&&typeof n=="object"&&"after"in n)}function X3e(n){return!!(n&&typeof n=="object"&&"before"in n)}function J3e(n){return!!(n&&typeof n=="object"&&"dayOfWeek"in n)}function Q3e(n,e){var t,r=e.from,i=e.to;if(r&&i){var s=th(i,r)<0;s&&(t=[i,r],r=t[0],i=t[1]);var o=th(n,r)>=0&&th(i,n)>=0;return o}return i?Na(i,n):r?Na(r,n):!1}function Z3e(n){return _U(n)}function eDe(n){return Array.isArray(n)&&n.every(_U)}function tDe(n,e){return e.some(function(t){if(typeof t=="boolean")return t;if(Z3e(t))return Na(n,t);if(eDe(t))return t.includes(n);if(K3e(t))return Q3e(n,t);if(J3e(t))return t.dayOfWeek.includes(n.getDay());if(G3e(t)){var r=th(t.before,n),i=th(t.after,n),s=r>0,o=i<0,a=BB(t.before,t.after);return a?o&&s:s||o}return Y3e(t)?th(n,t.after)>0:X3e(t)?th(t.before,n)>0:typeof t=="function"?t(n):!1})}function jU(n,e,t){var r=Object.keys(e).reduce(function(s,o){var a=e[o];return tDe(n,a)&&s.push(o),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),t&&!CU(n,t)&&(i.outside=!0),i}function nDe(n,e){for(var t=Pa(n[0]),r=SU(n[n.length-1]),i,s,o=t;o<=r;){var a=jU(o,e),c=!a.disabled&&!a.hidden;if(!c){o=Mo(o,1);continue}if(a.selected)return o;a.today&&!s&&(s=o),i||(i=o),o=Mo(o,1)}return s||i}var rDe=365;function _de(n,e){var t=e.moveBy,r=e.direction,i=e.context,s=e.modifiers,o=e.retry,a=o===void 0?{count:0,lastFocused:n}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,h=i.locale,f={day:Mo,week:FB,month:Ru,year:pRe,startOfWeek:function(b){return i.ISOWeek?G0(b):mh(b,{locale:h,weekStartsOn:c})},endOfWeek:function(b){return i.ISOWeek?ade(b):kU(b,{locale:h,weekStartsOn:c})}},p=f[t](n,r==="after"?1:-1);r==="before"&&u?p=gRe([u,p]):r==="after"&&d&&(p=vRe([d,p]));var x=!0;if(s){var y=jU(p,s);x=!y.disabled&&!y.hidden}return x?p:a.count>rDe?a.lastFocused:_de(p,{moveBy:t,direction:r,context:i,modifiers:s,retry:Zt(Zt({},a),{count:a.count+1})})}var Sde=S.createContext(void 0);function iDe(n){var e=wA(),t=wde(),r=S.useState(),i=r[0],s=r[1],o=S.useState(),a=o[0],c=o[1],u=nDe(e.displayMonths,t),d=i??(a&&e.isDateDisplayed(a))?a:u,h=function(){c(i),s(void 0)},f=function(b){s(b)},p=Pr(),x=function(b,_){if(i){var C=_de(i,{moveBy:b,direction:_,context:p,modifiers:t});Na(i,C)||(e.goToDate(C,i),f(C))}},y={focusedDay:i,focusTarget:d,blur:h,focus:f,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return l.jsx(Sde.Provider,{value:y,children:n.children})}function PU(){var n=S.useContext(Sde);if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n}function sDe(n,e){var t=wde(),r=jU(n,t,e);return r}var IU=S.createContext(void 0);function oDe(n){if(!gM(n.initialProps)){var e={selected:void 0};return l.jsx(IU.Provider,{value:e,children:n.children})}return l.jsx(aDe,{initialProps:n.initialProps,children:n.children})}function aDe(n){var e=n.initialProps,t=n.children,r=function(s,o,a){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,s,o,a),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,s,o,a);return}(d=e.onSelect)===null||d===void 0||d.call(e,s,s,o,a)},i={selected:e.selected,onDayClick:r};return l.jsx(IU.Provider,{value:i,children:t})}function kde(){var n=S.useContext(IU);if(!n)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return n}function lDe(n,e){var t=Pr(),r=kde(),i=TU(),s=NU(),o=PU(),a=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,f=o.focus,p=o.focusMonthBefore,x=o.focusMonthAfter,y=o.focusYearBefore,b=o.focusYearAfter,_=o.focusStartOfWeek,C=o.focusEndOfWeek,k=function(R){var z,W,se,ne;gM(t)?(z=r.onDayClick)===null||z===void 0||z.call(r,n,e,R):xA(t)?(W=i.onDayClick)===null||W===void 0||W.call(i,n,e,R):bA(t)?(se=s.onDayClick)===null||se===void 0||se.call(s,n,e,R):(ne=t.onDayClick)===null||ne===void 0||ne.call(t,n,e,R)},T=function(R){var z;f(n),(z=t.onDayFocus)===null||z===void 0||z.call(t,n,e,R)},E=function(R){var z;h(),(z=t.onDayBlur)===null||z===void 0||z.call(t,n,e,R)},N=function(R){var z;(z=t.onDayMouseEnter)===null||z===void 0||z.call(t,n,e,R)},P=function(R){var z;(z=t.onDayMouseLeave)===null||z===void 0||z.call(t,n,e,R)},M=function(R){var z;(z=t.onDayPointerEnter)===null||z===void 0||z.call(t,n,e,R)},O=function(R){var z;(z=t.onDayPointerLeave)===null||z===void 0||z.call(t,n,e,R)},q=function(R){var z;(z=t.onDayTouchCancel)===null||z===void 0||z.call(t,n,e,R)},D=function(R){var z;(z=t.onDayTouchEnd)===null||z===void 0||z.call(t,n,e,R)},F=function(R){var z;(z=t.onDayTouchMove)===null||z===void 0||z.call(t,n,e,R)},K=function(R){var z;(z=t.onDayTouchStart)===null||z===void 0||z.call(t,n,e,R)},ee=function(R){var z;(z=t.onDayKeyUp)===null||z===void 0||z.call(t,n,e,R)},Y=function(R){var z;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),t.dir==="rtl"?a():c();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),t.dir==="rtl"?c():a();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),u();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),d();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?y():p();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?b():x();break;case"Home":R.preventDefault(),R.stopPropagation(),_();break;case"End":R.preventDefault(),R.stopPropagation(),C();break}(z=t.onDayKeyDown)===null||z===void 0||z.call(t,n,e,R)},U={onClick:k,onFocus:T,onBlur:E,onKeyDown:Y,onKeyUp:ee,onMouseEnter:N,onMouseLeave:P,onPointerEnter:M,onPointerLeave:O,onTouchCancel:q,onTouchEnd:D,onTouchMove:F,onTouchStart:K};return U}function cDe(){var n=Pr(),e=kde(),t=TU(),r=NU(),i=gM(n)?e.selected:xA(n)?t.selected:bA(n)?r.selected:void 0;return i}function uDe(n){return Object.values(Mu).includes(n)}function dDe(n,e){var t=[n.classNames.day];return Object.keys(e).forEach(function(r){var i=n.modifiersClassNames[r];if(i)t.push(i);else if(uDe(r)){var s=n.classNames["day_".concat(r)];s&&t.push(s)}}),t}function hDe(n,e){var t=Zt({},n.styles.day);return Object.keys(e).forEach(function(r){var i;t=Zt(Zt({},t),(i=n.modifiersStyles)===null||i===void 0?void 0:i[r])}),t}function fDe(n,e,t){var r,i,s,o=Pr(),a=PU(),c=sDe(n,e),u=lDe(n,c),d=cDe(),h=!!(o.onDayClick||o.mode!=="default");S.useEffect(function(){var N;c.outside||a.focusedDay&&h&&Na(a.focusedDay,n)&&((N=t.current)===null||N===void 0||N.focus())},[a.focusedDay,n,t,h,c.outside]);var f=dDe(o,c).join(" "),p=hDe(o,c),x=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(s=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:R3e,b=l.jsx(y,{date:n,displayMonth:e,activeModifiers:c}),_={style:p,className:f,children:b,role:"gridcell"},C=a.focusTarget&&Na(a.focusTarget,n)&&!c.outside,k=a.focusedDay&&Na(a.focusedDay,n),T=Zt(Zt(Zt({},_),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=k||C?0:-1,r)),u),E={isButton:h,isHidden:x,activeModifiers:c,selectedDays:d,buttonProps:T,divProps:_};return E}function mDe(n){var e=S.useRef(null),t=fDe(n.date,n.displayMonth,e);return t.isHidden?l.jsx("div",{role:"gridcell"}):t.isButton?l.jsx(EI,Zt({name:"day",ref:e},t.buttonProps)):l.jsx("div",Zt({},t.divProps))}function pDe(n){var e=n.number,t=n.dates,r=Pr(),i=r.onWeekNumberClick,s=r.styles,o=r.classNames,a=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:a});if(!i)return l.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var h=c(Number(e),{locale:a}),f=function(p){i(e,t,p)};return l.jsx(EI,{name:"week-number","aria-label":h,className:o.weeknumber,style:s.weeknumber,onClick:f,children:d})}function gDe(n){var e,t,r=Pr(),i=r.styles,s=r.classNames,o=r.showWeekNumber,a=r.components,c=(e=a==null?void 0:a.Day)!==null&&e!==void 0?e:mDe,u=(t=a==null?void 0:a.WeekNumber)!==null&&t!==void 0?t:pDe,d;return o&&(d=l.jsx("td",{className:s.cell,style:i.cell,children:l.jsx(u,{number:n.weekNumber,dates:n.dates})})),l.jsxs("tr",{className:s.row,style:i.row,children:[d,n.dates.map(function(h){return l.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:l.jsx(c,{displayMonth:n.displayMonth,date:h})},pMe(h))})]})}function HY(n,e,t){for(var r=t!=null&&t.ISOWeek?ade(e):kU(e,t),i=t!=null&&t.ISOWeek?G0(n):mh(n,t),s=th(r,i),o=[],a=0;a<=s;a++)o.push(Mo(i,a));var c=o.reduce(function(u,d){var h=t!=null&&t.ISOWeek?ude(d):hde(d,t),f=u.find(function(p){return p.weekNumber===h});return f?(f.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function vDe(n,e){var t=HY(Pa(n),SU(n),e);if(e!=null&&e.useFixedWeeks){var r=vMe(n,e);if(r<6){var i=t[t.length-1],s=i.dates[i.dates.length-1],o=FB(s,6-r),a=HY(FB(s,1),o,e);t.push.apply(t,a)}}return t}function yDe(n){var e,t,r,i=Pr(),s=i.locale,o=i.classNames,a=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,h=i.weekStartsOn,f=i.firstWeekContainsDate,p=i.ISOWeek,x=vDe(n.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:s,weekStartsOn:h,firstWeekContainsDate:f}),y=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:O3e,b=(t=d==null?void 0:d.Row)!==null&&t!==void 0?t:gDe,_=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:j3e;return l.jsxs("table",{id:n.id,className:o.table,style:a.table,role:"grid","aria-labelledby":n["aria-labelledby"],children:[!c&&l.jsx(y,{}),l.jsx("tbody",{className:o.tbody,style:a.tbody,children:x.map(function(C){return l.jsx(b,{displayMonth:n.displayMonth,dates:C.dates,weekNumber:C.weekNumber},C.weekNumber)})}),l.jsx(_,{displayMonth:n.displayMonth})]})}function xDe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var bDe=xDe()?S.useLayoutEffect:S.useEffect,t5=!1,wDe=0;function WY(){return"react-day-picker-".concat(++wDe)}function _De(n){var e,t=n??(t5?WY():null),r=S.useState(t),i=r[0],s=r[1];return bDe(function(){i===null&&s(WY())},[]),S.useEffect(function(){t5===!1&&(t5=!0)},[]),(e=n??i)!==null&&e!==void 0?e:void 0}function SDe(n){var e,t,r=Pr(),i=r.dir,s=r.classNames,o=r.styles,a=r.components,c=wA().displayMonths,u=_De(r.id?"".concat(r.id,"-").concat(n.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(n.displayIndex):void 0,h=[s.month],f=o.month,p=n.displayIndex===0,x=n.displayIndex===c.length-1,y=!p&&!x;i==="rtl"&&(e=[p,x],x=e[0],p=e[1]),p&&(h.push(s.caption_start),f=Zt(Zt({},f),o.caption_start)),x&&(h.push(s.caption_end),f=Zt(Zt({},f),o.caption_end)),y&&(h.push(s.caption_between),f=Zt(Zt({},f),o.caption_between));var b=(t=a==null?void 0:a.Caption)!==null&&t!==void 0?t:N3e;return l.jsxs("div",{className:h.join(" "),style:f,children:[l.jsx(b,{id:u,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),l.jsx(yDe,{id:d,"aria-labelledby":u,displayMonth:n.displayMonth})]},n.displayIndex)}function kDe(n){var e=Pr(),t=e.classNames,r=e.styles;return l.jsx("div",{className:t.months,style:r.months,children:n.children})}function CDe(n){var e,t,r=n.initialProps,i=Pr(),s=PU(),o=wA(),a=S.useState(!1),c=a[0],u=a[1];S.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var h=Zt(Zt({},i.styles.root),i.style),f=Object.keys(r).filter(function(x){return x.startsWith("data-")}).reduce(function(x,y){var b;return Zt(Zt({},x),(b={},b[y]=r[y],b))},{}),p=(t=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:kDe;return l.jsx("div",Zt({className:d.join(" "),style:h,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},f,{children:l.jsx(p,{children:o.displayMonths.map(function(x,y){return l.jsx(SDe,{displayIndex:y,displayMonth:x},y)})})}))}function EDe(n){var e=n.children,t=XMe(n,["children"]);return l.jsx(p3e,{initialProps:t,children:l.jsx(C3e,{children:l.jsx(oDe,{initialProps:t,children:l.jsx(M3e,{initialProps:t,children:l.jsx(F3e,{initialProps:t,children:l.jsx(q3e,{children:l.jsx(iDe,{children:e})})})})})})})}function TDe(n){return l.jsx(EDe,Zt({},n,{children:l.jsx(CDe,{initialProps:n})}))}function _A({className:n,classNames:e,showOutsideDays:t=!0,...r}){const[i,s]=S.useState(r.defaultMonth||new Date),o=new Date().getFullYear(),a=Array.from({length:o-1900+11},(h,f)=>1900+f).reverse().map(h=>({value:h.toString(),label:h.toString()})),c=[{value:"0",label:"Tháng 1"},{value:"1",label:"Tháng 2"},{value:"2",label:"Tháng 3"},{value:"3",label:"Tháng 4"},{value:"4",label:"Tháng 5"},{value:"5",label:"Tháng 6"},{value:"6",label:"Tháng 7"},{value:"7",label:"Tháng 8"},{value:"8",label:"Tháng 9"},{value:"9",label:"Tháng 10"},{value:"10",label:"Tháng 11"},{value:"11",label:"Tháng 12"}],u=h=>{const f=new Date(i);f.setFullYear(parseInt(h)),s(f)},d=h=>{const f=new Date(i);f.setMonth(parseInt(h)),s(f)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[l.jsxs(Cn,{value:i.getFullYear().toString(),onValueChange:u,children:[l.jsx(wn,{className:"w-20 h-8",children:l.jsx(En,{})}),l.jsx(_n,{children:a.map(h=>l.jsx(ze,{value:h.value,children:h.label},h.value))})]}),l.jsxs(Cn,{value:i.getMonth().toString(),onValueChange:d,children:[l.jsx(wn,{className:"w-24 h-8",children:l.jsx(En,{})}),l.jsx(_n,{children:c.map(h=>l.jsx(ze,{value:h.value,children:h.label},h.value))})]})]}),l.jsx(TDe,{showOutsideDays:t,month:i,onMonthChange:s,className:Qe("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Qe(nE({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Qe(nE({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...h})=>l.jsx(zR,{className:"h-4 w-4"}),IconRight:({...h})=>l.jsx(kg,{className:"h-4 w-4"})},...r})]})}_A.displayName="Calendar";var vM="Popover",[Cde]=_o(vM,[tv]),SA=tv(),[ADe,iv]=Cde(vM),Ede=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=n,a=SA(e),c=S.useRef(null),[u,d]=S.useState(!1),[h,f]=Pu({prop:r,defaultProp:i??!1,onChange:s,caller:vM});return l.jsx(pU,{...a,children:l.jsx(ADe,{scope:e,contentId:Ys(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:S.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:u,onCustomAnchorAdd:S.useCallback(()=>d(!0),[]),onCustomAnchorRemove:S.useCallback(()=>d(!1),[]),modal:o,children:t})})};Ede.displayName=vM;var Tde="PopoverAnchor",NDe=S.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=iv(Tde,t),s=SA(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return S.useEffect(()=>(o(),()=>a()),[o,a]),l.jsx(mA,{...s,...r,ref:e})});NDe.displayName=Tde;var Ade="PopoverTrigger",Nde=S.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=iv(Ade,t),s=SA(t),o=an(e,i.triggerRef),a=l.jsx(kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Rde(i.open),...r,ref:o,onClick:st(n.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:l.jsx(mA,{asChild:!0,...s,children:a})});Nde.displayName=Ade;var OU="PopoverPortal",[jDe,PDe]=Cde(OU,{forceMount:void 0}),jde=n=>{const{__scopePopover:e,forceMount:t,children:r,container:i}=n,s=iv(OU,e);return l.jsx(jDe,{scope:e,forceMount:t,children:l.jsx(Da,{present:t||s.open,children:l.jsx(oS,{asChild:!0,container:i,children:r})})})};jde.displayName=OU;var h_="PopoverContent",Pde=S.forwardRef((n,e)=>{const t=PDe(h_,n.__scopePopover),{forceMount:r=t.forceMount,...i}=n,s=iv(h_,n.__scopePopover);return l.jsx(Da,{present:r||s.open,children:s.modal?l.jsx(ODe,{...i,ref:e}):l.jsx(RDe,{...i,ref:e})})});Pde.displayName=h_;var IDe=Rg("PopoverContent.RemoveScroll"),ODe=S.forwardRef((n,e)=>{const t=iv(h_,n.__scopePopover),r=S.useRef(null),i=an(e,r),s=S.useRef(!1);return S.useEffect(()=>{const o=r.current;if(o)return dM(o)},[]),l.jsx(vA,{as:IDe,allowPinchZoom:!0,children:l.jsx(Ide,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:st(n.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:st(n.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,u=a.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:st(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),RDe=S.forwardRef((n,e)=>{const t=iv(h_,n.__scopePopover),r=S.useRef(!1),i=S.useRef(!1);return l.jsx(Ide,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=n.onInteractOutside)==null||c.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=t.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Ide=S.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=n,f=iv(h_,t),p=SA(t);return cM(),l.jsx(gA,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:l.jsx(cx,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:l.jsx(rM,{"data-state":Rde(f.open),role:"dialog",id:f.contentId,...p,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ode="PopoverClose",MDe=S.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=iv(Ode,t);return l.jsx(kt.button,{type:"button",...r,ref:e,onClick:st(n.onClick,()=>i.onOpenChange(!1))})});MDe.displayName=Ode;var DDe="PopoverArrow",LDe=S.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=SA(t);return l.jsx(iM,{...i,...r,ref:e})});LDe.displayName=DDe;function Rde(n){return n?"open":"closed"}var FDe=Ede,BDe=Nde,$De=jde,Mde=Pde;const f_=FDe,m_=BDe,K0=S.forwardRef(({className:n,align:e="center",sideOffset:t=4,...r},i)=>l.jsx($De,{children:l.jsx(Mde,{ref:i,align:e,sideOffset:t,className:Qe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}));K0.displayName=Mde.displayName;const VDe=hA("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ct({className:n,variant:e,...t}){return l.jsx("div",{className:Qe(VDe({variant:e}),n),...t})}const tt=S.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Qe("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));tt.displayName="Card";const dt=S.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Qe("flex flex-col space-y-1.5 p-6",n),...e}));dt.displayName="CardHeader";const pt=S.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:Qe("text-2xl font-semibold leading-none tracking-tight",n),...e}));pt.displayName="CardTitle";const Lg=S.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:Qe("text-sm text-muted-foreground",n),...e}));Lg.displayName="CardDescription";const nt=S.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Qe("p-6 pt-0",n),...e}));nt.displayName="CardContent";const UDe=S.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Qe("flex items-center p-6 pt-0",n),...e}));UDe.displayName="CardFooter";var zDe="Separator",qY="horizontal",HDe=["horizontal","vertical"],Dde=S.forwardRef((n,e)=>{const{decorative:t,orientation:r=qY,...i}=n,s=WDe(r)?r:qY,a=t?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return l.jsx(kt.div,{"data-orientation":s,...a,...i,ref:e})});Dde.displayName=zDe;function WDe(n){return HDe.includes(n)}var Lde=Dde;const Xf=S.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},i)=>l.jsx(Lde,{ref:i,decorative:t,orientation:e,className:Qe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));Xf.displayName=Lde.displayName;var Fde=["PageUp","PageDown"],Bde=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$de={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},dS="Slider",[$B,qDe,GDe]=uA(dS),[Vde]=_o(dS,[GDe]),[KDe,yM]=Vde(dS),Ude=S.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:x,...y}=n,b=S.useRef(new Set),_=S.useRef(0),k=o==="horizontal"?YDe:XDe,[T=[],E]=Pu({prop:d,defaultProp:u,onChange:D=>{var K;(K=[...b.current][_.current])==null||K.focus(),h(D)}}),N=S.useRef(T);function P(D){const F=t4e(T,D);q(D,F)}function M(D){q(D,_.current)}function O(){const D=N.current[_.current];T[_.current]!==D&&f(T)}function q(D,F,{commit:K}={commit:!1}){const ee=s4e(s),Y=o4e(Math.round((D-r)/s)*s+r,ee),U=SI(Y,[r,i]);E((R=[])=>{const z=ZDe(R,U,F);if(i4e(z,c*s)){_.current=z.indexOf(U);const W=String(z)!==String(R);return W&&K&&f(z),W?z:R}else return R})}return l.jsx(KDe,{scope:n.__scopeSlider,name:t,disabled:a,min:r,max:i,valueIndexToChangeRef:_,thumbs:b.current,values:T,orientation:o,form:x,children:l.jsx($B.Provider,{scope:n.__scopeSlider,children:l.jsx($B.Slot,{scope:n.__scopeSlider,children:l.jsx(k,{"aria-disabled":a,"data-disabled":a?"":void 0,...y,ref:e,onPointerDown:st(y.onPointerDown,()=>{a||(N.current=T)}),min:r,max:i,inverted:p,onSlideStart:a?void 0:P,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:O,onHomeKeyDown:()=>!a&&q(r,0,{commit:!0}),onEndKeyDown:()=>!a&&q(i,T.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:F})=>{if(!a){const Y=Fde.includes(D.key)||D.shiftKey&&Bde.includes(D.key)?10:1,U=_.current,R=T[U],z=s*Y*F;q(R+z,U,{commit:!0})}}})})})})});Ude.displayName=dS;var[zde,Hde]=Vde(dS,{startEdge:"left",endEdge:"right",size:"width",direction:1}),YDe=S.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...d}=n,[h,f]=S.useState(null),p=an(e,k=>f(k)),x=S.useRef(void 0),y=pA(i),b=y==="ltr",_=b&&!s||!b&&s;function C(k){const T=x.current||h.getBoundingClientRect(),E=[0,T.width],P=RU(E,_?[t,r]:[r,t]);return x.current=T,P(k-T.left)}return l.jsx(zde,{scope:n.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:l.jsx(Wde,{dir:y,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const T=C(k.clientX);o==null||o(T)},onSlideMove:k=>{const T=C(k.clientX);a==null||a(T)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:k=>{const E=$de[_?"from-left":"from-right"].includes(k.key);u==null||u({event:k,direction:E?-1:1})}})})}),XDe=S.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:c,...u}=n,d=S.useRef(null),h=an(e,d),f=S.useRef(void 0),p=!i;function x(y){const b=f.current||d.current.getBoundingClientRect(),_=[0,b.height],k=RU(_,p?[r,t]:[t,r]);return f.current=b,k(y-b.top)}return l.jsx(zde,{scope:n.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:l.jsx(Wde,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const b=x(y.clientY);s==null||s(b)},onSlideMove:y=>{const b=x(y.clientY);o==null||o(b)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:y=>{const _=$de[p?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:_?-1:1})}})})}),Wde=S.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:c,...u}=n,d=yM(dS,t);return l.jsx(kt.span,{...u,ref:e,onKeyDown:st(n.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(a(h),h.preventDefault()):Fde.concat(Bde).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:st(n.onPointerDown,h=>{const f=h.target;f.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(f)?f.focus():r(h)}),onPointerMove:st(n.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:st(n.onPointerUp,h=>{const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),s(h))})})}),qde="SliderTrack",Gde=S.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=yM(qde,t);return l.jsx(kt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});Gde.displayName=qde;var VB="SliderRange",Kde=S.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=yM(VB,t),s=Hde(VB,t),o=S.useRef(null),a=an(e,o),c=i.values.length,u=i.values.map(f=>Jde(f,i.min,i.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return l.jsx(kt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...n.style,[s.startEdge]:d+"%",[s.endEdge]:h+"%"}})});Kde.displayName=VB;var UB="SliderThumb",Yde=S.forwardRef((n,e)=>{const t=qDe(n.__scopeSlider),[r,i]=S.useState(null),s=an(e,a=>i(a)),o=S.useMemo(()=>r?t().findIndex(a=>a.ref.current===r):-1,[t,r]);return l.jsx(JDe,{...n,ref:s,index:o})}),JDe=S.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...s}=n,o=yM(UB,t),a=Hde(UB,t),[c,u]=S.useState(null),d=an(e,C=>u(C)),h=c?o.form||!!c.closest("form"):!0,f=nM(c),p=o.values[r],x=p===void 0?0:Jde(p,o.min,o.max),y=e4e(r,o.values.length),b=f==null?void 0:f[a.size],_=b?n4e(b,x,a.direction):0;return S.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),l.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${x}% + ${_}px)`},children:[l.jsx($B.ItemSlot,{scope:n.__scopeSlider,children:l.jsx(kt.span,{role:"slider","aria-label":n["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:d,style:p===void 0?{display:"none"}:n.style,onFocus:st(n.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&l.jsx(Xde,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},r)]})});Yde.displayName=UB;var QDe="RadioBubbleInput",Xde=S.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=S.useRef(null),s=an(i,r),o=uM(e);return S.useEffect(()=>{const a=i.current;if(!a)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("input",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),l.jsx(kt.input,{style:{display:"none"},...t,ref:s,defaultValue:e})});Xde.displayName=QDe;function ZDe(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,s)=>i-s)}function Jde(n,e,t){const s=100/(t-e)*(n-e);return SI(s,[0,100])}function e4e(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function t4e(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function n4e(n,e,t){const r=n/2,s=RU([0,50],[0,r]);return(r-s(e)*t)*t}function r4e(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function i4e(n,e){if(e>0){const t=r4e(n);return Math.min(...t)>=e}return!0}function RU(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function s4e(n){return(String(n).split(".")[1]||"").length}function o4e(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var Qde=Ude,a4e=Gde,l4e=Kde,c4e=Yde;const Zde=S.forwardRef(({className:n,...e},t)=>l.jsxs(Qde,{ref:t,className:Qe("relative flex w-full touch-none select-none items-center",n),...e,children:[l.jsx(a4e,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:l.jsx(l4e,{className:"absolute h-full bg-primary"})}),l.jsx(c4e,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Zde.displayName=Qde.displayName;const u4e=[{value:"createdat",label:"Mới nhất"},{value:"price",label:"Giá"},{value:"rating",label:"Đánh giá"},{value:"bookings",label:"Phổ biến"},{value:"title",label:"Tên tour"},{value:"duration",label:"Thời gian"}];function d4e(){const n=li(),{toast:e}=tU(),{user:t}=Zr(),[r,i]=S.useState([]),[s,o]=S.useState(!0),[a,c]=S.useState(0),[u,d]=S.useState(0),[h,f]=S.useState([]),[p,x]=S.useState([]),[y,b]=S.useState([]),[_,C]=S.useState(void 0),[k,T]=S.useState(!0),[E,N]=S.useState([0,1e7]),[P,M]=S.useState(1e7),[O,q]=S.useState(!1),[D,F]=S.useState({searchTerm:"",location:"",category:"",minPrice:void 0,maxPrice:void 0,minDuration:void 0,maxDuration:void 0,isActive:!0,isFeatured:void 0,status:"Approved",sortBy:"createdat",sortDirection:"desc",page:1,pageSize:12}),K=u4e,ee=async()=>{try{o(!0);const H=await D0.getTours(D);if(i(H.tours),c(H.totalPages),d(H.totalCount),H.tours.length>0){const ce=Math.max(...H.tours.map(pe=>pe.price));ce>P&&M(Math.ceil(ce/1e5)*1e5)}}catch(H){console.error("Error fetching tours:",H),e({title:"Lỗi",description:"Không thể tải danh sách tour. Vui lòng thử lại sau.",variant:"destructive"})}finally{o(!1)}},Y=async()=>{try{T(!0);const H=await D0.getTourCategories();f(H)}catch(H){console.error("Error fetching categories:",H),e({title:"Lỗi",description:"Không thể tải danh mục tour. Vui lòng thử lại sau.",variant:"destructive"})}finally{T(!1)}};S.useEffect(()=>{ee()},[D]),S.useEffect(()=>{Y(),(async()=>{try{const ce=(await ot(`${Ge()}/api/divisions/provinces`,{skipAuth:!0})||[]).map(pe=>({code:pe.code??pe.Code,name:pe.fullName??pe.FullName??pe.name??pe.Name}));x(ce),b(ce)}catch{}})()},[]),S.useEffect(()=>{N([D.minPrice||0,D.maxPrice||P])},[D.minPrice,D.maxPrice,P]);const U=()=>{F(H=>({...H,page:1}))},R=(H,ce)=>{F(pe=>({...pe,[H]:ce,page:1}))},z=H=>{N([H[0],H[1]]),F(ce=>({...ce,minAvailPrice:H[0]===0?void 0:H[0],maxAvailPrice:H[1]===P?void 0:H[1],page:1}))},W=()=>{F({searchTerm:"",location:"",category:"",minAvailPrice:void 0,maxAvailPrice:void 0,destinationProvinceCode:void 0,departureDivisionCode:void 0,startDate:void 0,isActive:!0,isFeatured:void 0,status:"Approved",sortBy:"createdat",sortDirection:"desc",page:1,pageSize:12}),N([0,P])},se=(H,ce="VND")=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:ce==="VND"?"VND":ce}).format(H),ne=H=>{if(H<24)return`${H} giờ`;const ce=Math.floor(H/24),pe=H%24;return pe===0?`${ce} ngày`:`${ce} ngày ${pe} giờ`},te=H=>{F(ce=>({...ce,page:H}))};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Khám phá các tour du lịch"}),l.jsx("p",{className:"text-gray-600",children:"Tìm kiếm và khám phá những trải nghiệm du lịch tuyệt vời"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx(We,{placeholder:"Tìm kiếm tour, địa điểm, hướng dẫn viên...",value:D.searchTerm,onChange:H=>R("searchTerm",H.target.value),className:"pl-10"})]}),l.jsxs(Ce,{onClick:U,className:"px-8",children:[l.jsx(as,{className:"w-4 h-4 mr-2"}),"Tìm kiếm"]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(Ce,{variant:"outline",onClick:()=>q(!O),className:"flex items-center gap-2",children:[l.jsx(HR,{className:"w-4 h-4"}),"Bộ lọc",O?l.jsx($ae,{className:"w-4 h-4"}):l.jsx(nA,{className:"w-4 h-4"})]}),u>0&&l.jsxs("span",{className:"text-sm text-gray-600",children:["Tìm thấy ",u," tour"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Sắp xếp:"}),l.jsxs(Cn,{value:`${D.sortBy}-${D.sortDirection}`,onValueChange:H=>{const[ce,pe]=H.split("-");R("sortBy",ce),R("sortDirection",pe)},children:[l.jsx(wn,{className:"w-40",children:l.jsx(En,{})}),l.jsx(_n,{children:K.map(H=>l.jsxs("div",{children:[l.jsxs(ze,{value:`${H.value}-desc`,children:[H.label," (Mới → Cũ)"]}),l.jsxs(ze,{value:`${H.value}-asc`,children:[H.label," (Cũ → Mới)"]})]},H.value))})]})]})]}),O&&l.jsxs("div",{className:"mt-6 pt-6 border-t",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Danh mục"}),l.jsxs(Cn,{value:D.category||"all",onValueChange:H=>R("category",H==="all"?"":H),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Tất cả danh mục"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả danh mục"}),h.map(H=>l.jsx(ze,{value:H.name,children:H.name},H.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Điểm đến"}),l.jsx(fh,{value:D.destinationProvinceCode?String(D.destinationProvinceCode):"",onValueChange:H=>R("destinationProvinceCode",H?Number(H):void 0),placeholder:"Tất cả tỉnh/thành",searchPlaceholder:"Tìm kiếm tỉnh/thành...",options:[{value:"",label:"Tất cả"},...p.map(H=>({value:String(H.code),label:H.name}))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Điểm đi"}),l.jsx(fh,{value:D.departureDivisionCode?String(D.departureDivisionCode):"",onValueChange:H=>R("departureDivisionCode",H?Number(H):void 0),placeholder:"Tất cả điểm đi",searchPlaceholder:"Tìm kiếm điểm đi...",options:[{value:"",label:"Tất cả"},...y.map(H=>({value:String(H.code),label:H.name}))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Ngày khởi hành"}),l.jsxs(f_,{children:[l.jsx(m_,{asChild:!0,children:l.jsxs(Ce,{variant:"outline",className:"w-full justify-start text-left font-normal"+(_?"":" text-muted-foreground"),children:[l.jsx(er,{className:"mr-2 h-4 w-4"}),_?Wo(_,"dd/MM/yyyy",{locale:Yf}):l.jsx("span",{children:"Chọn ngày"})]})}),l.jsx(K0,{className:"w-auto p-0 z-[100]",align:"start",children:l.jsx(_A,{mode:"single",selected:_,onSelect:H=>{C(H),R("startDate",H?new Date(H.setHours(0,0,0,0)).toISOString():void 0)},locale:Yf,initialFocus:!0})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Khoảng giá (VND)"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"px-3",children:l.jsx(Zde,{value:E,onValueChange:z,max:P,min:0,step:1e5,className:"w-full"})}),l.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[l.jsx("span",{children:se(E[0])}),l.jsx("span",{children:se(E[1])})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Đặc biệt"}),l.jsx("div",{className:"space-y-2",children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:D.isFeatured===!0,onChange:H=>R("isFeatured",H.target.checked?!0:void 0),className:"mr-2"}),l.jsx("span",{className:"text-sm",children:"Tour nổi bật"})]})})]})]}),l.jsx("div",{className:"flex justify-end mt-4",children:l.jsx(Ce,{variant:"outline",onClick:W,children:"Xóa bộ lọc"})})]})]}),s?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((H,ce)=>l.jsx(tt,{className:"animate-pulse",children:l.jsxs(nt,{className:"p-0",children:[l.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),l.jsxs("div",{className:"p-4 space-y-2",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},ce))}):r.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:r.map(H=>l.jsx(tt,{className:"group hover:shadow-lg transition-shadow duration-200 h-full flex flex-col",children:l.jsxs(nt,{className:"p-0 flex flex-col h-full",children:[l.jsxs("div",{className:"relative h-48 overflow-hidden rounded-t-lg",children:[H.imageUrls&&H.imageUrls.length>0?l.jsx("img",{src:H.imageUrls[0],alt:H.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):l.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:l.jsx("span",{className:"text-gray-400",children:"Không có hình ảnh"})}),l.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[H.isFeatured&&l.jsx(ct,{className:"bg-yellow-500 text-white",children:"Nổi bật"}),l.jsx(ct,{variant:"secondary",children:(()=>{const ce=h.find(pe=>pe.code===H.category||pe.name===H.category);return ce?ce.name:H.category})()})]}),typeof H.recentAdultPrice=="number"&&l.jsxs("div",{className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-1",children:[l.jsx("span",{className:"text-xs text-gray-600 mr-1",children:"Chỉ từ"}),l.jsx("span",{className:"font-bold text-lg text-gray-900",children:se(H.recentAdultPrice,"VND")})]})]}),l.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:"font-semibold text-lg text-gray-900 line-clamp-2 mb-1 hover:underline cursor-pointer",onClick:()=>n(`/tour/${H.id}`),role:"button",tabIndex:0,onKeyDown:ce=>{ce.key==="Enter"&&n(`/tour/${H.id}`)},"aria-label":`Xem chi tiết ${H.title}`,children:H.title}),l.jsx("div",{className:"text-sm text-gray-600 max-h-12 overflow-hidden [display:-webkit-box] [-webkit-line-clamp:2] [-webkit-box-orient:vertical]",dangerouslySetInnerHTML:{__html:H.shortDescription||""}})]}),l.jsxs("div",{className:"space-y-3 mt-3",children:[l.jsxs("div",{className:"flex items-start gap-4 text-sm text-gray-500 flex-col",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Xr,{className:"w-4 h-4"}),l.jsxs("span",{className:"truncate",children:[H.location,H.wardName?`, ${H.wardName}`:"",H.provinceName?`, ${H.provinceName}`:""]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(_m,{className:"w-4 h-4"}),l.jsx("span",{children:H.recentTripTime&&H.recentTripTime.trim().length>0?H.recentTripTime:ne(H.duration)})]})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ki,{className:"w-4 h-4 text-yellow-500 fill-current"}),l.jsxs("span",{children:[H.averageRating.toFixed(1)," (",H.totalReviews,")"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Bo,{className:"w-4 h-4"}),l.jsx("span",{children:H.totalBookings})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ts,{className:"w-4 h-4"}),l.jsx("span",{children:H.viewCount})]})]}),l.jsxs("div",{className:"pt-2 space-y-1",children:[l.jsxs("p",{className:"text-xs text-gray-500",children:["Hướng dẫn viên: ",H.tourGuideName]}),H.recentDepartureDivisionName&&l.jsxs("p",{className:"text-xs text-gray-500",children:["Điểm đi: ",H.recentDepartureDivisionName]})]})]}),l.jsx(Xf,{className:"my-4"}),l.jsxs("div",{className:"flex gap-2 mt-auto",children:[l.jsx(Ce,{onClick:()=>n(`/tour/${H.id}`),className:"flex-1",children:"Chi tiết"}),!(t&&t.role==="TourGuide"&&H.tourGuideId===t.id)&&l.jsx(Ce,{variant:"outline",onClick:()=>n(`/tour/${H.id}/book`),className:"flex-1",children:"Đặt tour"})]})]})]})},H.id))}),a>1&&l.jsxs("div",{className:"flex justify-center items-center gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>te(D.page-1),disabled:D.page<=1,children:"Trước"}),Array.from({length:Math.min(5,a)},(H,ce)=>{const pe=ce+1;return l.jsx(Ce,{variant:D.page===pe?"default":"outline",onClick:()=>te(pe),className:"w-10",children:pe},pe)}),l.jsx(Ce,{variant:"outline",onClick:()=>te(D.page+1),disabled:D.page>=a,children:"Sau"})]})]}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-gray-400 mb-4",children:l.jsx(as,{className:"w-16 h-16 mx-auto"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không tìm thấy tour nào"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Thử điều chỉnh bộ lọc hoặc từ khóa tìm kiếm của bạn"}),l.jsx(Ce,{onClick:W,variant:"outline",children:"Xóa bộ lọc"})]})]})]})}var n5="rovingFocusGroup.onEntryFocus",h4e={bubbles:!1,cancelable:!0},kA="RovingFocusGroup",[zB,ehe,f4e]=uA(kA),[m4e,xM]=_o(kA,[f4e]),[p4e,g4e]=m4e(kA),the=S.forwardRef((n,e)=>l.jsx(zB.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(zB.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(v4e,{...n,ref:e})})}));the.displayName=kA;var v4e=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=n,f=S.useRef(null),p=an(e,f),x=pA(s),[y,b]=Pu({prop:o,defaultProp:a??null,onChange:c,caller:kA}),[_,C]=S.useState(!1),k=Yo(u),T=ehe(t),E=S.useRef(!1),[N,P]=S.useState(0);return S.useEffect(()=>{const M=f.current;if(M)return M.addEventListener(n5,k),()=>M.removeEventListener(n5,k)},[k]),l.jsx(p4e,{scope:t,orientation:r,dir:x,loop:i,currentTabStopId:y,onItemFocus:S.useCallback(M=>b(M),[b]),onItemShiftTab:S.useCallback(()=>C(!0),[]),onFocusableItemAdd:S.useCallback(()=>P(M=>M+1),[]),onFocusableItemRemove:S.useCallback(()=>P(M=>M-1),[]),children:l.jsx(kt.div,{tabIndex:_||N===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...n.style},onMouseDown:st(n.onMouseDown,()=>{E.current=!0}),onFocus:st(n.onFocus,M=>{const O=!E.current;if(M.target===M.currentTarget&&O&&!_){const q=new CustomEvent(n5,h4e);if(M.currentTarget.dispatchEvent(q),!q.defaultPrevented){const D=T().filter(U=>U.focusable),F=D.find(U=>U.active),K=D.find(U=>U.id===y),Y=[F,K,...D].filter(Boolean).map(U=>U.ref.current);ihe(Y,d)}}E.current=!1}),onBlur:st(n.onBlur,()=>C(!1))})})}),nhe="RovingFocusGroupItem",rhe=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=n,c=Ys(),u=s||c,d=g4e(nhe,t),h=d.currentTabStopId===u,f=ehe(t),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:y}=d;return S.useEffect(()=>{if(r)return p(),()=>x()},[r,p,x]),l.jsx(zB.ItemSlot,{scope:t,id:u,focusable:r,active:i,children:l.jsx(kt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:st(n.onMouseDown,b=>{r?d.onItemFocus(u):b.preventDefault()}),onFocus:st(n.onFocus,()=>d.onItemFocus(u)),onKeyDown:st(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const _=b4e(b,d.orientation,d.dir);if(_!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let k=f().filter(T=>T.focusable).map(T=>T.ref.current);if(_==="last")k.reverse();else if(_==="prev"||_==="next"){_==="prev"&&k.reverse();const T=k.indexOf(b.currentTarget);k=d.loop?w4e(k,T+1):k.slice(T+1)}setTimeout(()=>ihe(k))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});rhe.displayName=nhe;var y4e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function x4e(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function b4e(n,e,t){const r=x4e(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return y4e[r]}function ihe(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function w4e(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var she=the,ohe=rhe,bM="Tabs",[_4e]=_o(bM,[xM]),ahe=xM(),[S4e,MU]=_4e(bM),lhe=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...u}=n,d=pA(a),[h,f]=Pu({prop:r,onChange:i,defaultProp:s??"",caller:bM});return l.jsx(S4e,{scope:t,baseId:Ys(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:l.jsx(kt.div,{dir:d,"data-orientation":o,...u,ref:e})})});lhe.displayName=bM;var che="TabsList",uhe=S.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,s=MU(che,t),o=ahe(t);return l.jsx(she,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:l.jsx(kt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});uhe.displayName=che;var dhe="TabsTrigger",hhe=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...s}=n,o=MU(dhe,t),a=ahe(t),c=phe(o.baseId,r),u=ghe(o.baseId,r),d=r===o.value;return l.jsx(ohe,{asChild:!0,...a,focusable:!i,active:d,children:l.jsx(kt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:st(n.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:st(n.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:st(n.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(r)})})})});hhe.displayName=dhe;var fhe="TabsContent",mhe=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:s,...o}=n,a=MU(fhe,t),c=phe(a.baseId,r),u=ghe(a.baseId,r),d=r===a.value,h=S.useRef(d);return S.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),l.jsx(Da,{present:i||d,children:({present:f})=>l.jsx(kt.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});mhe.displayName=fhe;function phe(n,e){return`${n}-trigger-${e}`}function ghe(n,e){return`${n}-content-${e}`}var k4e=lhe,vhe=uhe,yhe=hhe,xhe=mhe;const bhe=k4e,DU=S.forwardRef(({className:n,...e},t)=>l.jsx(vhe,{ref:t,className:Qe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));DU.displayName=vhe.displayName;const Uf=S.forwardRef(({className:n,...e},t)=>l.jsx(yhe,{ref:t,className:Qe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));Uf.displayName=yhe.displayName;const zf=S.forwardRef(({className:n,...e},t)=>l.jsx(xhe,{ref:t,className:Qe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));zf.displayName=xhe.displayName;class $b{static async getTourAvailabilities(e={}){const t=new URLSearchParams;return e.tourId&&t.append("tourId",e.tourId),e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate),e.isAvailable!==void 0&&t.append("isAvailable",e.isAvailable.toString()),e.minPrice!==void 0&&t.append("minPrice",e.minPrice.toString()),e.maxPrice!==void 0&&t.append("maxPrice",e.maxPrice.toString()),e.departureDivisionCode&&t.append("departureDivisionCode",e.departureDivisionCode.toString()),e.vehicle&&t.append("vehicle",e.vehicle),e.page&&t.append("page",e.page.toString()),e.pageSize&&t.append("pageSize",e.pageSize.toString()),e.sortBy&&t.append("sortBy",e.sortBy),e.sortDirection&&t.append("sortDirection",e.sortDirection),ot(`${Ge()}/api/touravailability?${t.toString()}`)}static async getTourAvailability(e){return ot(`${Ge()}/api/touravailability/${e}`)}static async getTourAvailabilitiesByTour(e){return ot(`${Ge()}/api/touravailability/tour/${e}`)}static async createTourAvailability(e){return ot(`${Ge()}/api/touravailability`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}static async updateTourAvailability(e,t){return ot(`${Ge()}/api/touravailability/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}static async deleteTourAvailability(e){return ot(`${Ge()}/api/touravailability/${e}`,{method:"DELETE"})}static async getDivisions(){return ot(`${Ge()}/api/divisions`,{skipAuth:!0})}}var r5={exports:{}},i5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GY;function C4e(){if(GY)return i5;GY=1;var n=eS();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(h,f){var p=f(),x=r({inst:{value:p,getSnapshot:f}}),y=x[0].inst,b=x[1];return s(function(){y.value=p,y.getSnapshot=f,c(y)&&b({inst:y})},[h,p,f]),i(function(){return c(y)&&b({inst:y}),h(function(){c(y)&&b({inst:y})})},[h]),o(p),p}function c(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!t(h,p)}catch{return!0}}function u(h,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return i5.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,i5}var KY;function E4e(){return KY||(KY=1,r5.exports=C4e()),r5.exports}var T4e=E4e();function A4e(){return T4e.useSyncExternalStore(N4e,()=>!0,()=>!1)}function N4e(){return()=>{}}var LU="Avatar",[j4e]=_o(LU),[P4e,whe]=j4e(LU),_he=S.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,s]=S.useState("idle");return l.jsx(P4e,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:l.jsx(kt.span,{...r,ref:e})})});_he.displayName=LU;var She="AvatarImage",khe=S.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...s}=n,o=whe(She,t),a=I4e(r,s),c=Yo(u=>{i(u),o.onImageLoadingStatusChange(u)});return Wi(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?l.jsx(kt.img,{...s,ref:e,src:r}):null});khe.displayName=She;var Che="AvatarFallback",Ehe=S.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,s=whe(Che,t),[o,a]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?l.jsx(kt.span,{...i,ref:e}):null});Ehe.displayName=Che;function YY(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function I4e(n,{referrerPolicy:e,crossOrigin:t}){const r=A4e(),i=S.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=S.useState(()=>YY(s,n));return Wi(()=>{a(YY(s,n))},[s,n]),Wi(()=>{const c=h=>()=>{a(h)};if(!s)return;const u=c("loaded"),d=c("error");return s.addEventListener("load",u),s.addEventListener("error",d),e&&(s.referrerPolicy=e),typeof t=="string"&&(s.crossOrigin=t),()=>{s.removeEventListener("load",u),s.removeEventListener("error",d)}},[s,t,e]),o}var The=_he,Ahe=khe,Nhe=Ehe;const p_=S.forwardRef(({className:n,...e},t)=>l.jsx(The,{ref:t,className:Qe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));p_.displayName=The.displayName;const iE=S.forwardRef(({className:n,...e},t)=>l.jsx(Ahe,{ref:t,className:Qe("aspect-square h-full w-full",n),...e}));iE.displayName=Ahe.displayName;const g_=S.forwardRef(({className:n,...e},t)=>l.jsx(Nhe,{ref:t,className:Qe("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));g_.displayName=Nhe.displayName;var wM="Dialog",[jhe,Phe]=_o(wM),[O4e,Hu]=jhe(wM),Ihe=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=S.useRef(null),c=S.useRef(null),[u,d]=Pu({prop:r,defaultProp:i??!1,onChange:s,caller:wM});return l.jsx(O4e,{scope:e,triggerRef:a,contentRef:c,contentId:Ys(),titleId:Ys(),descriptionId:Ys(),open:u,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:t})};Ihe.displayName=wM;var Ohe="DialogTrigger",Rhe=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Hu(Ohe,t),s=an(e,i.triggerRef);return l.jsx(kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":$U(i.open),...r,ref:s,onClick:st(n.onClick,i.onOpenToggle)})});Rhe.displayName=Ohe;var FU="DialogPortal",[R4e,Mhe]=jhe(FU,{forceMount:void 0}),Dhe=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=Hu(FU,e);return l.jsx(R4e,{scope:e,forceMount:t,children:S.Children.map(r,o=>l.jsx(Da,{present:t||s.open,children:l.jsx(oS,{asChild:!0,container:i,children:o})}))})};Dhe.displayName=FU;var TI="DialogOverlay",Lhe=S.forwardRef((n,e)=>{const t=Mhe(TI,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Hu(TI,n.__scopeDialog);return s.modal?l.jsx(Da,{present:r||s.open,children:l.jsx(D4e,{...i,ref:e})}):null});Lhe.displayName=TI;var M4e=Rg("DialogOverlay.RemoveScroll"),D4e=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Hu(TI,t);return l.jsx(vA,{as:M4e,allowPinchZoom:!0,shards:[i.contentRef],children:l.jsx(kt.div,{"data-state":$U(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Y0="DialogContent",Fhe=S.forwardRef((n,e)=>{const t=Mhe(Y0,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Hu(Y0,n.__scopeDialog);return l.jsx(Da,{present:r||s.open,children:s.modal?l.jsx(L4e,{...i,ref:e}):l.jsx(F4e,{...i,ref:e})})});Fhe.displayName=Y0;var L4e=S.forwardRef((n,e)=>{const t=Hu(Y0,n.__scopeDialog),r=S.useRef(null),i=an(e,t.contentRef,r);return S.useEffect(()=>{const s=r.current;if(s)return dM(s)},[]),l.jsx(Bhe,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:st(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:st(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:st(n.onFocusOutside,s=>s.preventDefault())})}),F4e=S.forwardRef((n,e)=>{const t=Hu(Y0,n.__scopeDialog),r=S.useRef(!1),i=S.useRef(!1);return l.jsx(Bhe,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=n.onInteractOutside)==null||c.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=t.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Bhe=S.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=Hu(Y0,t),c=S.useRef(null),u=an(e,c);return cM(),l.jsxs(l.Fragment,{children:[l.jsx(gA,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:l.jsx(cx,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":$U(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx($4e,{titleId:a.titleId}),l.jsx(U4e,{contentRef:c,descriptionId:a.descriptionId})]})]})}),BU="DialogTitle",$he=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Hu(BU,t);return l.jsx(kt.h2,{id:i.titleId,...r,ref:e})});$he.displayName=BU;var Vhe="DialogDescription",Uhe=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Hu(Vhe,t);return l.jsx(kt.p,{id:i.descriptionId,...r,ref:e})});Uhe.displayName=Vhe;var zhe="DialogClose",Hhe=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Hu(zhe,t);return l.jsx(kt.button,{type:"button",...r,ref:e,onClick:st(n.onClick,()=>i.onOpenChange(!1))})});Hhe.displayName=zhe;function $U(n){return n?"open":"closed"}var Whe="DialogTitleWarning",[B4e,qhe]=KAe(Whe,{contentName:Y0,titleName:BU,docsSlug:"dialog"}),$4e=({titleId:n})=>{const e=qhe(Whe),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},V4e="DialogDescriptionWarning",U4e=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qhe(V4e).contentName}}.`;return S.useEffect(()=>{var s;const i=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},VU=Ihe,Ghe=Rhe,UU=Dhe,_M=Lhe,SM=Fhe,zU=$he,HU=Uhe,WU=Hhe,Khe="AlertDialog",[z4e]=_o(Khe,[Phe]),Cm=Phe(),Yhe=n=>{const{__scopeAlertDialog:e,...t}=n,r=Cm(e);return l.jsx(VU,{...r,...t,modal:!0})};Yhe.displayName=Khe;var H4e="AlertDialogTrigger",Xhe=S.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Cm(t);return l.jsx(Ghe,{...i,...r,ref:e})});Xhe.displayName=H4e;var W4e="AlertDialogPortal",Jhe=n=>{const{__scopeAlertDialog:e,...t}=n,r=Cm(e);return l.jsx(UU,{...r,...t})};Jhe.displayName=W4e;var q4e="AlertDialogOverlay",Qhe=S.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Cm(t);return l.jsx(_M,{...i,...r,ref:e})});Qhe.displayName=q4e;var hw="AlertDialogContent",[G4e,K4e]=z4e(hw),Y4e=Yle("AlertDialogContent"),Zhe=S.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...i}=n,s=Cm(t),o=S.useRef(null),a=an(e,o),c=S.useRef(null);return l.jsx(B4e,{contentName:hw,titleName:efe,docsSlug:"alert-dialog",children:l.jsx(G4e,{scope:t,cancelRef:c,children:l.jsxs(SM,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:st(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(Y4e,{children:r}),l.jsx(J4e,{contentRef:o})]})})})});Zhe.displayName=hw;var efe="AlertDialogTitle",tfe=S.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Cm(t);return l.jsx(zU,{...i,...r,ref:e})});tfe.displayName=efe;var nfe="AlertDialogDescription",rfe=S.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Cm(t);return l.jsx(HU,{...i,...r,ref:e})});rfe.displayName=nfe;var X4e="AlertDialogAction",ife=S.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,i=Cm(t);return l.jsx(WU,{...i,...r,ref:e})});ife.displayName=X4e;var sfe="AlertDialogCancel",ofe=S.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:i}=K4e(sfe,t),s=Cm(t),o=an(e,i);return l.jsx(WU,{...s,...r,ref:o})});ofe.displayName=sfe;var J4e=({contentRef:n})=>{const e=`\`${hw}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${hw}\` by passing a \`${nfe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${hw}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return S.useEffect(()=>{var r;document.getElementById((r=n.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},Q4e=Yhe,Z4e=Xhe,e5e=Jhe,afe=Qhe,lfe=Zhe,cfe=ife,ufe=ofe,dfe=tfe,hfe=rfe;const Hl=Q4e,ux=Z4e,t5e=e5e,ffe=S.forwardRef(({className:n,...e},t)=>l.jsx(afe,{className:Qe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));ffe.displayName=afe.displayName;const La=S.forwardRef(({className:n,...e},t)=>l.jsxs(t5e,{children:[l.jsx(ffe,{}),l.jsx(lfe,{ref:t,className:Qe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...e})]}));La.displayName=lfe.displayName;const Fa=({className:n,...e})=>l.jsx("div",{className:Qe("flex flex-col space-y-2 text-center sm:text-left",n),...e});Fa.displayName="AlertDialogHeader";const Ba=({className:n,...e})=>l.jsx("div",{className:Qe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Ba.displayName="AlertDialogFooter";const $a=S.forwardRef(({className:n,...e},t)=>l.jsx(dfe,{ref:t,className:Qe("text-lg font-semibold",n),...e}));$a.displayName=dfe.displayName;const Wu=S.forwardRef(({className:n,...e},t)=>l.jsx(hfe,{ref:t,className:Qe("text-sm text-muted-foreground",n),...e}));Wu.displayName=hfe.displayName;const qu=S.forwardRef(({className:n,...e},t)=>l.jsx(cfe,{ref:t,className:Qe(nE(),n),...e}));qu.displayName=cfe.displayName;const Wl=S.forwardRef(({className:n,...e},t)=>l.jsx(ufe,{ref:t,className:Qe(nE({variant:"outline"}),"mt-2 sm:mt-0",n),...e}));Wl.displayName=ufe.displayName;const is=S.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:Qe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));is.displayName="Textarea";var ip={},Lv={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XY;function n5e(){if(XY)return Lv;XY=1;var n=eS();function e(B){for(var Q="https://reactjs.org/docs/error-decoder.html?invariant="+B,le=1;le<arguments.length;le++)Q+="&args[]="+encodeURIComponent(arguments[le]);return"Minified React error #"+B+"; visit "+Q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t=Object.prototype.hasOwnProperty,r=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i={},s={};function o(B){return t.call(s,B)?!0:t.call(i,B)?!1:r.test(B)?s[B]=!0:(i[B]=!0,!1)}function a(B,Q,le,me,Re,je,Ve){this.acceptsBooleans=Q===2||Q===3||Q===4,this.attributeName=me,this.attributeNamespace=Re,this.mustUseProperty=le,this.propertyName=B,this.type=Q,this.sanitizeURL=je,this.removeEmptyString=Ve}var c={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(B){c[B]=new a(B,0,!1,B,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(B){var Q=B[0];c[Q]=new a(Q,1,!1,B[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(B){c[B]=new a(B,2,!1,B.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(B){c[B]=new a(B,2,!1,B,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(B){c[B]=new a(B,3,!1,B.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(B){c[B]=new a(B,3,!0,B,null,!1,!1)}),["capture","download"].forEach(function(B){c[B]=new a(B,4,!1,B,null,!1,!1)}),["cols","rows","size","span"].forEach(function(B){c[B]=new a(B,6,!1,B,null,!1,!1)}),["rowSpan","start"].forEach(function(B){c[B]=new a(B,5,!1,B.toLowerCase(),null,!1,!1)});var u=/[\-:]([a-z])/g;function d(B){return B[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(B){var Q=B.replace(u,d);c[Q]=new a(Q,1,!1,B,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(B){var Q=B.replace(u,d);c[Q]=new a(Q,1,!1,B,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(B){var Q=B.replace(u,d);c[Q]=new a(Q,1,!1,B,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(B){c[B]=new a(B,1,!1,B.toLowerCase(),null,!1,!1)}),c.xlinkHref=new a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(B){c[B]=new a(B,1,!1,B.toLowerCase(),null,!0,!0)});var h={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f=["Webkit","ms","Moz","O"];Object.keys(h).forEach(function(B){f.forEach(function(Q){Q=Q+B.charAt(0).toUpperCase()+B.substring(1),h[Q]=h[B]})});var p=/["'&<>]/;function x(B){if(typeof B=="boolean"||typeof B=="number")return""+B;B=""+B;var Q=p.exec(B);if(Q){var le="",me,Re=0;for(me=Q.index;me<B.length;me++){switch(B.charCodeAt(me)){case 34:Q="&quot;";break;case 38:Q="&amp;";break;case 39:Q="&#x27;";break;case 60:Q="&lt;";break;case 62:Q="&gt;";break;default:continue}Re!==me&&(le+=B.substring(Re,me)),Re=me+1,le+=Q}B=Re!==me?le+B.substring(Re,me):le}return B}var y=/([A-Z])/g,b=/^ms-/,_=Array.isArray;function C(B,Q){return{insertionMode:B,selectedValue:Q}}function k(B,Q,le){switch(Q){case"select":return C(1,le.value!=null?le.value:le.defaultValue);case"svg":return C(2,null);case"math":return C(3,null);case"foreignObject":return C(1,null);case"table":return C(4,null);case"thead":case"tbody":case"tfoot":return C(5,null);case"colgroup":return C(7,null);case"tr":return C(6,null)}return 4<=B.insertionMode||B.insertionMode===0?C(1,null):B}var T=new Map;function E(B,Q,le){if(typeof le!="object")throw Error(e(62));Q=!0;for(var me in le)if(t.call(le,me)){var Re=le[me];if(Re!=null&&typeof Re!="boolean"&&Re!==""){if(me.indexOf("--")===0){var je=x(me);Re=x((""+Re).trim())}else{je=me;var Ve=T.get(je);Ve!==void 0||(Ve=x(je.replace(y,"-$1").toLowerCase().replace(b,"-ms-")),T.set(je,Ve)),je=Ve,Re=typeof Re=="number"?Re===0||t.call(h,me)?""+Re:Re+"px":x((""+Re).trim())}Q?(Q=!1,B.push(' style="',je,":",Re)):B.push(";",je,":",Re)}}Q||B.push('"')}function N(B,Q,le,me){switch(le){case"style":E(B,Q,me);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<le.length)||le[0]!=="o"&&le[0]!=="O"||le[1]!=="n"&&le[1]!=="N"){if(Q=c.hasOwnProperty(le)?c[le]:null,Q!==null){switch(typeof me){case"function":case"symbol":return;case"boolean":if(!Q.acceptsBooleans)return}switch(le=Q.attributeName,Q.type){case 3:me&&B.push(" ",le,'=""');break;case 4:me===!0?B.push(" ",le,'=""'):me!==!1&&B.push(" ",le,'="',x(me),'"');break;case 5:isNaN(me)||B.push(" ",le,'="',x(me),'"');break;case 6:!isNaN(me)&&1<=me&&B.push(" ",le,'="',x(me),'"');break;default:Q.sanitizeURL&&(me=""+me),B.push(" ",le,'="',x(me),'"')}}else if(o(le)){switch(typeof me){case"function":case"symbol":return;case"boolean":if(Q=le.toLowerCase().slice(0,5),Q!=="data-"&&Q!=="aria-")return}B.push(" ",le,'="',x(me),'"')}}}function P(B,Q,le){if(Q!=null){if(le!=null)throw Error(e(60));if(typeof Q!="object"||!("__html"in Q))throw Error(e(61));Q=Q.__html,Q!=null&&B.push(""+Q)}}function M(B){var Q="";return n.Children.forEach(B,function(le){le!=null&&(Q+=le)}),Q}function O(B,Q,le,me){B.push(F(le));var Re=le=null,je;for(je in Q)if(t.call(Q,je)){var Ve=Q[je];if(Ve!=null)switch(je){case"children":le=Ve;break;case"dangerouslySetInnerHTML":Re=Ve;break;default:N(B,me,je,Ve)}}return B.push(">"),P(B,Re,le),typeof le=="string"?(B.push(x(le)),null):le}var q=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,D=new Map;function F(B){var Q=D.get(B);if(Q===void 0){if(!q.test(B))throw Error(e(65,B));Q="<"+B,D.set(B,Q)}return Q}function K(B,Q,le,me,Re){switch(Q){case"select":B.push(F("select"));var je=null,Ve=null;for(on in le)if(t.call(le,on)){var lt=le[on];if(lt!=null)switch(on){case"children":je=lt;break;case"dangerouslySetInnerHTML":Ve=lt;break;case"defaultValue":case"value":break;default:N(B,me,on,lt)}}return B.push(">"),P(B,Ve,je),je;case"option":Ve=Re.selectedValue,B.push(F("option"));var ft=lt=null,Yt=null,on=null;for(je in le)if(t.call(le,je)){var tr=le[je];if(tr!=null)switch(je){case"children":lt=tr;break;case"selected":Yt=tr;break;case"dangerouslySetInnerHTML":on=tr;break;case"value":ft=tr;default:N(B,me,je,tr)}}if(Ve!=null)if(le=ft!==null?""+ft:M(lt),_(Ve)){for(me=0;me<Ve.length;me++)if(""+Ve[me]===le){B.push(' selected=""');break}}else""+Ve===le&&B.push(' selected=""');else Yt&&B.push(' selected=""');return B.push(">"),P(B,on,lt),lt;case"textarea":B.push(F("textarea")),on=Ve=je=null;for(lt in le)if(t.call(le,lt)&&(ft=le[lt],ft!=null))switch(lt){case"children":on=ft;break;case"value":je=ft;break;case"defaultValue":Ve=ft;break;case"dangerouslySetInnerHTML":throw Error(e(91));default:N(B,me,lt,ft)}if(je===null&&Ve!==null&&(je=Ve),B.push(">"),on!=null){if(je!=null)throw Error(e(92));if(_(on)&&1<on.length)throw Error(e(93));je=""+on}return typeof je=="string"&&je[0]===`
`&&B.push(`
`),je!==null&&B.push(x(""+je)),null;case"input":B.push(F("input")),ft=on=lt=je=null;for(Ve in le)if(t.call(le,Ve)&&(Yt=le[Ve],Yt!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":throw Error(e(399,"input"));case"defaultChecked":ft=Yt;break;case"defaultValue":lt=Yt;break;case"checked":on=Yt;break;case"value":je=Yt;break;default:N(B,me,Ve,Yt)}return on!==null?N(B,me,"checked",on):ft!==null&&N(B,me,"checked",ft),je!==null?N(B,me,"value",je):lt!==null&&N(B,me,"value",lt),B.push("/>"),null;case"menuitem":B.push(F("menuitem"));for(var ea in le)if(t.call(le,ea)&&(je=le[ea],je!=null))switch(ea){case"children":case"dangerouslySetInnerHTML":throw Error(e(400));default:N(B,me,ea,je)}return B.push(">"),null;case"title":B.push(F("title")),je=null;for(tr in le)if(t.call(le,tr)&&(Ve=le[tr],Ve!=null))switch(tr){case"children":je=Ve;break;case"dangerouslySetInnerHTML":throw Error(e(434));default:N(B,me,tr,Ve)}return B.push(">"),je;case"listing":case"pre":B.push(F(Q)),Ve=je=null;for(ft in le)if(t.call(le,ft)&&(lt=le[ft],lt!=null))switch(ft){case"children":je=lt;break;case"dangerouslySetInnerHTML":Ve=lt;break;default:N(B,me,ft,lt)}if(B.push(">"),Ve!=null){if(je!=null)throw Error(e(60));if(typeof Ve!="object"||!("__html"in Ve))throw Error(e(61));le=Ve.__html,le!=null&&(typeof le=="string"&&0<le.length&&le[0]===`
`?B.push(`
`,le):B.push(""+le))}return typeof je=="string"&&je[0]===`
`&&B.push(`
`),je;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":B.push(F(Q));for(var ta in le)if(t.call(le,ta)&&(je=le[ta],je!=null))switch(ta){case"children":case"dangerouslySetInnerHTML":throw Error(e(399,Q));default:N(B,me,ta,je)}return B.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return O(B,le,Q,me);case"html":return Re.insertionMode===0&&B.push("<!DOCTYPE html>"),O(B,le,Q,me);default:if(Q.indexOf("-")===-1&&typeof le.is!="string")return O(B,le,Q,me);B.push(F(Q)),Ve=je=null;for(Yt in le)if(t.call(le,Yt)&&(lt=le[Yt],lt!=null))switch(Yt){case"children":je=lt;break;case"dangerouslySetInnerHTML":Ve=lt;break;case"style":E(B,me,lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:o(Yt)&&typeof lt!="function"&&typeof lt!="symbol"&&B.push(" ",Yt,'="',x(lt),'"')}return B.push(">"),P(B,Ve,je),je}}function ee(B,Q,le){if(B.push('<!--$?--><template id="'),le===null)throw Error(e(395));return B.push(le),B.push('"></template>')}function Y(B,Q,le,me){switch(le.insertionMode){case 0:case 1:return B.push('<div hidden id="'),B.push(Q.segmentPrefix),Q=me.toString(16),B.push(Q),B.push('">');case 2:return B.push('<svg aria-hidden="true" style="display:none" id="'),B.push(Q.segmentPrefix),Q=me.toString(16),B.push(Q),B.push('">');case 3:return B.push('<math aria-hidden="true" style="display:none" id="'),B.push(Q.segmentPrefix),Q=me.toString(16),B.push(Q),B.push('">');case 4:return B.push('<table hidden id="'),B.push(Q.segmentPrefix),Q=me.toString(16),B.push(Q),B.push('">');case 5:return B.push('<table hidden><tbody id="'),B.push(Q.segmentPrefix),Q=me.toString(16),B.push(Q),B.push('">');case 6:return B.push('<table hidden><tr id="'),B.push(Q.segmentPrefix),Q=me.toString(16),B.push(Q),B.push('">');case 7:return B.push('<table hidden><colgroup id="'),B.push(Q.segmentPrefix),Q=me.toString(16),B.push(Q),B.push('">');default:throw Error(e(397))}}function U(B,Q){switch(Q.insertionMode){case 0:case 1:return B.push("</div>");case 2:return B.push("</svg>");case 3:return B.push("</math>");case 4:return B.push("</table>");case 5:return B.push("</tbody></table>");case 6:return B.push("</tr></table>");case 7:return B.push("</colgroup></table>");default:throw Error(e(397))}}var R=/[<\u2028\u2029]/g;function z(B){return JSON.stringify(B).replace(R,function(Q){switch(Q){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function W(B,Q){return Q=Q===void 0?"":Q,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:Q+"P:",segmentPrefix:Q+"S:",boundaryPrefix:Q+"B:",idPrefix:Q,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:B}}function se(B,Q,le,me){return le.generateStaticMarkup?(B.push(x(Q)),!1):(Q===""?B=me:(me&&B.push("<!-- -->"),B.push(x(Q)),B=!0),B)}var ne=Object.assign,te=Symbol.for("react.element"),H=Symbol.for("react.portal"),ce=Symbol.for("react.fragment"),pe=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),be=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),he=Symbol.for("react.scope"),Ee=Symbol.for("react.debug_trace_mode"),Be=Symbol.for("react.legacy_hidden"),vt=Symbol.for("react.default_value"),xt=Symbol.iterator;function Rt(B){if(B==null)return null;if(typeof B=="function")return B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case ce:return"Fragment";case H:return"Portal";case oe:return"Profiler";case pe:return"StrictMode";case we:return"Suspense";case ue:return"SuspenseList"}if(typeof B=="object")switch(B.$$typeof){case be:return(B.displayName||"Context")+".Consumer";case ve:return(B._context.displayName||"Context")+".Provider";case fe:var Q=B.render;return B=B.displayName,B||(B=Q.displayName||Q.name||"",B=B!==""?"ForwardRef("+B+")":"ForwardRef"),B;case Z:return Q=B.displayName||null,Q!==null?Q:Rt(B.type)||"Memo";case ge:Q=B._payload,B=B._init;try{return Rt(B(Q))}catch{}}return null}var xe={};function Ne(B,Q){if(B=B.contextTypes,!B)return xe;var le={},me;for(me in B)le[me]=Q[me];return le}var Oe=null;function qe(B,Q){if(B!==Q){B.context._currentValue2=B.parentValue,B=B.parent;var le=Q.parent;if(B===null){if(le!==null)throw Error(e(401))}else{if(le===null)throw Error(e(401));qe(B,le)}Q.context._currentValue2=Q.value}}function Ze(B){B.context._currentValue2=B.parentValue,B=B.parent,B!==null&&Ze(B)}function Ye(B){var Q=B.parent;Q!==null&&Ye(Q),B.context._currentValue2=B.value}function ht(B,Q){if(B.context._currentValue2=B.parentValue,B=B.parent,B===null)throw Error(e(402));B.depth===Q.depth?qe(B,Q):ht(B,Q)}function Bt(B,Q){var le=Q.parent;if(le===null)throw Error(e(402));B.depth===le.depth?qe(B,le):Bt(B,le),Q.context._currentValue2=Q.value}function Jt(B){var Q=Oe;Q!==B&&(Q===null?Ye(B):B===null?Ze(Q):Q.depth===B.depth?qe(Q,B):Q.depth>B.depth?ht(Q,B):Bt(Q,B),Oe=B)}var Pn={isMounted:function(){return!1},enqueueSetState:function(B,Q){B=B._reactInternals,B.queue!==null&&B.queue.push(Q)},enqueueReplaceState:function(B,Q){B=B._reactInternals,B.replace=!0,B.queue=[Q]},enqueueForceUpdate:function(){}};function Hn(B,Q,le,me){var Re=B.state!==void 0?B.state:null;B.updater=Pn,B.props=le,B.state=Re;var je={queue:[],replace:!1};B._reactInternals=je;var Ve=Q.contextType;if(B.context=typeof Ve=="object"&&Ve!==null?Ve._currentValue2:me,Ve=Q.getDerivedStateFromProps,typeof Ve=="function"&&(Ve=Ve(le,Re),Re=Ve==null?Re:ne({},Re,Ve),B.state=Re),typeof Q.getDerivedStateFromProps!="function"&&typeof B.getSnapshotBeforeUpdate!="function"&&(typeof B.UNSAFE_componentWillMount=="function"||typeof B.componentWillMount=="function"))if(Q=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),Q!==B.state&&Pn.enqueueReplaceState(B,B.state,null),je.queue!==null&&0<je.queue.length)if(Q=je.queue,Ve=je.replace,je.queue=null,je.replace=!1,Ve&&Q.length===1)B.state=Q[0];else{for(je=Ve?Q[0]:B.state,Re=!0,Ve=Ve?1:0;Ve<Q.length;Ve++){var lt=Q[Ve];lt=typeof lt=="function"?lt.call(B,je,le,me):lt,lt!=null&&(Re?(Re=!1,je=ne({},je,lt)):ne(je,lt))}B.state=je}else je.queue=null}var zr={id:1,overflow:""};function Js(B,Q,le){var me=B.id;B=B.overflow;var Re=32-ui(me)-1;me&=~(1<<Re),le+=1;var je=32-ui(Q)+Re;if(30<je){var Ve=Re-Re%5;return je=(me&(1<<Ve)-1).toString(32),me>>=Ve,Re-=Ve,{id:1<<32-ui(Q)+Re|le<<Re|me,overflow:je+B}}return{id:1<<je|le<<Re|me,overflow:B}}var ui=Math.clz32?Math.clz32:Gi,qi=Math.log,ql=Math.LN2;function Gi(B){return B>>>=0,B===0?32:31-(qi(B)/ql|0)|0}function Wa(B,Q){return B===Q&&(B!==0||1/B===1/Q)||B!==B&&Q!==Q}var Qo=typeof Object.is=="function"?Object.is:Wa,di=null,Zo=null,us=null,fn=null,hi=!1,qa=!1,$t=0,sn=null,An=0;function Ir(){if(di===null)throw Error(e(321));return di}function Ki(){if(0<An)throw Error(e(312));return{memoizedState:null,queue:null,next:null}}function Ri(){return fn===null?us===null?(hi=!1,us=fn=Ki()):(hi=!0,fn=us):fn.next===null?(hi=!1,fn=fn.next=Ki()):(hi=!0,fn=fn.next),fn}function Ps(){Zo=di=null,qa=!1,us=null,An=0,fn=sn=null}function fi(B,Q){return typeof Q=="function"?Q(B):Q}function So(B,Q,le){if(di=Ir(),fn=Ri(),hi){var me=fn.queue;if(Q=me.dispatch,sn!==null&&(le=sn.get(me),le!==void 0)){sn.delete(me),me=fn.memoizedState;do me=B(me,le.action),le=le.next;while(le!==null);return fn.memoizedState=me,[me,Q]}return[fn.memoizedState,Q]}return B=B===fi?typeof Q=="function"?Q():Q:le!==void 0?le(Q):Q,fn.memoizedState=B,B=fn.queue={last:null,dispatch:null},B=B.dispatch=Pm.bind(null,di,B),[fn.memoizedState,B]}function Qu(B,Q){if(di=Ir(),fn=Ri(),Q=Q===void 0?null:Q,fn!==null){var le=fn.memoizedState;if(le!==null&&Q!==null){var me=le[1];e:if(me===null)me=!1;else{for(var Re=0;Re<me.length&&Re<Q.length;Re++)if(!Qo(Q[Re],me[Re])){me=!1;break e}me=!0}if(me)return le[0]}}return B=B(),fn.memoizedState=[B,Q],B}function Pm(B,Q,le){if(25<=An)throw Error(e(301));if(B===di)if(qa=!0,B={action:le,next:null},sn===null&&(sn=new Map),le=sn.get(Q),le===void 0)sn.set(Q,B);else{for(Q=le;Q.next!==null;)Q=Q.next;Q.next=B}}function Im(){throw Error(e(394))}function Zu(){}var Ex={readContext:function(B){return B._currentValue2},useContext:function(B){return Ir(),B._currentValue2},useMemo:Qu,useReducer:So,useRef:function(B){di=Ir(),fn=Ri();var Q=fn.memoizedState;return Q===null?(B={current:B},fn.memoizedState=B):Q},useState:function(B){return So(fi,B)},useInsertionEffect:Zu,useLayoutEffect:function(){},useCallback:function(B,Q){return Qu(function(){return B},Q)},useImperativeHandle:Zu,useEffect:Zu,useDebugValue:Zu,useDeferredValue:function(B){return Ir(),B},useTransition:function(){return Ir(),[!1,Im]},useId:function(){var B=Zo.treeContext,Q=B.overflow;B=B.id,B=(B&~(1<<32-ui(B)-1)).toString(32)+Q;var le=Om;if(le===null)throw Error(e(404));return Q=$t++,B=":"+le.idPrefix+"R"+B,0<Q&&(B+="H"+Q.toString(32)),B+":"},useMutableSource:function(B,Q){return Ir(),Q(B._source)},useSyncExternalStore:function(B,Q,le){if(le===void 0)throw Error(e(407));return le()}},Om=null,uv=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Mc(B){return console.error(B),null}function ed(){}function Tx(B,Q,le,me,Re,je,Ve,lt,ft){var Yt=[],on=new Set;return Q={destination:null,responseState:Q,progressiveChunkSize:me===void 0?12800:me,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:on,pingedTasks:Yt,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:Re===void 0?Mc:Re,onAllReady:ed,onShellReady:Ve===void 0?ed:Ve,onShellError:ed,onFatalError:ed},le=Ch(Q,0,null,le,!1,!1),le.parentFlushed=!0,B=dv(Q,B,null,le,on,xe,null,zr),Yt.push(B),Q}function dv(B,Q,le,me,Re,je,Ve,lt){B.allPendingTasks++,le===null?B.pendingRootTasks++:le.pendingTasks++;var ft={node:Q,ping:function(){var Yt=B.pingedTasks;Yt.push(ft),Yt.length===1&&ko(B)},blockedBoundary:le,blockedSegment:me,abortSet:Re,legacyContext:je,context:Ve,treeContext:lt};return Re.add(ft),ft}function Ch(B,Q,le,me,Re,je){return{status:0,id:-1,index:Q,parentFlushed:!1,chunks:[],children:[],formatContext:me,boundary:le,lastPushedText:Re,textEmbedded:je}}function td(B,Q){if(B=B.onError(Q),B!=null&&typeof B!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof B+'" instead');return B}function Eh(B,Q){var le=B.onShellError;le(Q),le=B.onFatalError,le(Q),B.destination!==null?(B.status=2,B.destination.destroy(Q)):(B.status=1,B.fatalError=Q)}function hv(B,Q,le,me,Re){for(di={},Zo=Q,$t=0,B=le(me,Re);qa;)qa=!1,$t=0,An+=1,fn=null,B=le(me,Re);return Ps(),B}function Ax(B,Q,le,me){var Re=le.render(),je=me.childContextTypes;if(je!=null){var Ve=Q.legacyContext;if(typeof le.getChildContext!="function")me=Ve;else{le=le.getChildContext();for(var lt in le)if(!(lt in je))throw Error(e(108,Rt(me)||"Unknown",lt));me=ne({},Ve,le)}Q.legacyContext=me,Is(B,Q,Re),Q.legacyContext=Ve}else Is(B,Q,Re)}function Nx(B,Q){if(B&&B.defaultProps){Q=ne({},Q),B=B.defaultProps;for(var le in B)Q[le]===void 0&&(Q[le]=B[le]);return Q}return Q}function hr(B,Q,le,me,Re){if(typeof le=="function")if(le.prototype&&le.prototype.isReactComponent){Re=Ne(le,Q.legacyContext);var je=le.contextType;je=new le(me,typeof je=="object"&&je!==null?je._currentValue2:Re),Hn(je,le,me,Re),Ax(B,Q,je,le)}else{je=Ne(le,Q.legacyContext),Re=hv(B,Q,le,me,je);var Ve=$t!==0;if(typeof Re=="object"&&Re!==null&&typeof Re.render=="function"&&Re.$$typeof===void 0)Hn(Re,le,me,je),Ax(B,Q,Re,le);else if(Ve){me=Q.treeContext,Q.treeContext=Js(me,1,0);try{Is(B,Q,Re)}finally{Q.treeContext=me}}else Is(B,Q,Re)}else if(typeof le=="string"){switch(Re=Q.blockedSegment,je=K(Re.chunks,le,me,B.responseState,Re.formatContext),Re.lastPushedText=!1,Ve=Re.formatContext,Re.formatContext=k(Ve,le,me),Mm(B,Q,je),Re.formatContext=Ve,le){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:Re.chunks.push("</",le,">")}Re.lastPushedText=!1}else{switch(le){case Be:case Ee:case pe:case oe:case ce:Is(B,Q,me.children);return;case ue:Is(B,Q,me.children);return;case he:throw Error(e(343));case we:e:{le=Q.blockedBoundary,Re=Q.blockedSegment,je=me.fallback,me=me.children,Ve=new Set;var lt={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Ve,errorDigest:null},ft=Ch(B,Re.chunks.length,lt,Re.formatContext,!1,!1);Re.children.push(ft),Re.lastPushedText=!1;var Yt=Ch(B,0,null,Re.formatContext,!1,!1);Yt.parentFlushed=!0,Q.blockedBoundary=lt,Q.blockedSegment=Yt;try{if(Mm(B,Q,me),B.responseState.generateStaticMarkup||Yt.lastPushedText&&Yt.textEmbedded&&Yt.chunks.push("<!-- -->"),Yt.status=1,Dc(lt,Yt),lt.pendingTasks===0)break e}catch(on){Yt.status=4,lt.forceClientRender=!0,lt.errorDigest=td(B,on)}finally{Q.blockedBoundary=le,Q.blockedSegment=Re}Q=dv(B,je,le,ft,Ve,Q.legacyContext,Q.context,Q.treeContext),B.pingedTasks.push(Q)}return}if(typeof le=="object"&&le!==null)switch(le.$$typeof){case fe:if(me=hv(B,Q,le.render,me,Re),$t!==0){le=Q.treeContext,Q.treeContext=Js(le,1,0);try{Is(B,Q,me)}finally{Q.treeContext=le}}else Is(B,Q,me);return;case Z:le=le.type,me=Nx(le,me),hr(B,Q,le,me,Re);return;case ve:if(Re=me.children,le=le._context,me=me.value,je=le._currentValue2,le._currentValue2=me,Ve=Oe,Oe=me={parent:Ve,depth:Ve===null?0:Ve.depth+1,context:le,parentValue:je,value:me},Q.context=me,Is(B,Q,Re),B=Oe,B===null)throw Error(e(403));me=B.parentValue,B.context._currentValue2=me===vt?B.context._defaultValue:me,B=Oe=B.parent,Q.context=B;return;case be:me=me.children,me=me(le._currentValue2),Is(B,Q,me);return;case ge:Re=le._init,le=Re(le._payload),me=Nx(le,me),hr(B,Q,le,me,void 0);return}throw Error(e(130,le==null?le:typeof le,""))}}function Is(B,Q,le){if(Q.node=le,typeof le=="object"&&le!==null){switch(le.$$typeof){case te:hr(B,Q,le.type,le.props,le.ref);return;case H:throw Error(e(257));case ge:var me=le._init;le=me(le._payload),Is(B,Q,le);return}if(_(le)){Rm(B,Q,le);return}if(le===null||typeof le!="object"?me=null:(me=xt&&le[xt]||le["@@iterator"],me=typeof me=="function"?me:null),me&&(me=me.call(le))){if(le=me.next(),!le.done){var Re=[];do Re.push(le.value),le=me.next();while(!le.done);Rm(B,Q,Re)}return}throw B=Object.prototype.toString.call(le),Error(e(31,B==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":B))}typeof le=="string"?(me=Q.blockedSegment,me.lastPushedText=se(Q.blockedSegment.chunks,le,B.responseState,me.lastPushedText)):typeof le=="number"&&(me=Q.blockedSegment,me.lastPushedText=se(Q.blockedSegment.chunks,""+le,B.responseState,me.lastPushedText))}function Rm(B,Q,le){for(var me=le.length,Re=0;Re<me;Re++){var je=Q.treeContext;Q.treeContext=Js(je,me,Re);try{Mm(B,Q,le[Re])}finally{Q.treeContext=je}}}function Mm(B,Q,le){var me=Q.blockedSegment.formatContext,Re=Q.legacyContext,je=Q.context;try{return Is(B,Q,le)}catch(ft){if(Ps(),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"){le=ft;var Ve=Q.blockedSegment,lt=Ch(B,Ve.chunks.length,null,Ve.formatContext,Ve.lastPushedText,!0);Ve.children.push(lt),Ve.lastPushedText=!1,B=dv(B,Q.node,Q.blockedBoundary,lt,Q.abortSet,Q.legacyContext,Q.context,Q.treeContext).ping,le.then(B,B),Q.blockedSegment.formatContext=me,Q.legacyContext=Re,Q.context=je,Jt(je)}else throw Q.blockedSegment.formatContext=me,Q.legacyContext=Re,Q.context=je,Jt(je),ft}}function nd(B){var Q=B.blockedBoundary;B=B.blockedSegment,B.status=3,Ga(this,Q,B)}function jx(B,Q,le){var me=B.blockedBoundary;B.blockedSegment.status=3,me===null?(Q.allPendingTasks--,Q.status!==2&&(Q.status=2,Q.destination!==null&&Q.destination.push(null))):(me.pendingTasks--,me.forceClientRender||(me.forceClientRender=!0,B=le===void 0?Error(e(432)):le,me.errorDigest=Q.onError(B),me.parentFlushed&&Q.clientRenderedBoundaries.push(me)),me.fallbackAbortableTasks.forEach(function(Re){return jx(Re,Q,le)}),me.fallbackAbortableTasks.clear(),Q.allPendingTasks--,Q.allPendingTasks===0&&(me=Q.onAllReady,me()))}function Dc(B,Q){if(Q.chunks.length===0&&Q.children.length===1&&Q.children[0].boundary===null){var le=Q.children[0];le.id=Q.id,le.parentFlushed=!0,le.status===1&&Dc(B,le)}else B.completedSegments.push(Q)}function Ga(B,Q,le){if(Q===null){if(le.parentFlushed){if(B.completedRootSegment!==null)throw Error(e(389));B.completedRootSegment=le}B.pendingRootTasks--,B.pendingRootTasks===0&&(B.onShellError=ed,Q=B.onShellReady,Q())}else Q.pendingTasks--,Q.forceClientRender||(Q.pendingTasks===0?(le.parentFlushed&&le.status===1&&Dc(Q,le),Q.parentFlushed&&B.completedBoundaries.push(Q),Q.fallbackAbortableTasks.forEach(nd,B),Q.fallbackAbortableTasks.clear()):le.parentFlushed&&le.status===1&&(Dc(Q,le),Q.completedSegments.length===1&&Q.parentFlushed&&B.partialBoundaries.push(Q)));B.allPendingTasks--,B.allPendingTasks===0&&(B=B.onAllReady,B())}function ko(B){if(B.status!==2){var Q=Oe,le=uv.current;uv.current=Ex;var me=Om;Om=B.responseState;try{var Re=B.pingedTasks,je;for(je=0;je<Re.length;je++){var Ve=Re[je],lt=B,ft=Ve.blockedSegment;if(ft.status===0){Jt(Ve.context);try{Is(lt,Ve,Ve.node),lt.responseState.generateStaticMarkup||ft.lastPushedText&&ft.textEmbedded&&ft.chunks.push("<!-- -->"),Ve.abortSet.delete(Ve),ft.status=1,Ga(lt,Ve.blockedBoundary,ft)}catch(Qs){if(Ps(),typeof Qs=="object"&&Qs!==null&&typeof Qs.then=="function"){var Yt=Ve.ping;Qs.then(Yt,Yt)}else{Ve.abortSet.delete(Ve),ft.status=4;var on=Ve.blockedBoundary,tr=Qs,ea=td(lt,tr);if(on===null?Eh(lt,tr):(on.pendingTasks--,on.forceClientRender||(on.forceClientRender=!0,on.errorDigest=ea,on.parentFlushed&&lt.clientRenderedBoundaries.push(on))),lt.allPendingTasks--,lt.allPendingTasks===0){var ta=lt.onAllReady;ta()}}}finally{}}}Re.splice(0,je),B.destination!==null&&Lc(B,B.destination)}catch(Qs){td(B,Qs),Eh(B,Qs)}finally{Om=me,uv.current=le,le===Ex&&Jt(Q)}}}function Th(B,Q,le){switch(le.parentFlushed=!0,le.status){case 0:var me=le.id=B.nextSegmentId++;return le.lastPushedText=!1,le.textEmbedded=!1,B=B.responseState,Q.push('<template id="'),Q.push(B.placeholderPrefix),B=me.toString(16),Q.push(B),Q.push('"></template>');case 1:le.status=2;var Re=!0;me=le.chunks;var je=0;le=le.children;for(var Ve=0;Ve<le.length;Ve++){for(Re=le[Ve];je<Re.index;je++)Q.push(me[je]);Re=Yi(B,Q,Re)}for(;je<me.length-1;je++)Q.push(me[je]);return je<me.length&&(Re=Q.push(me[je])),Re;default:throw Error(e(390))}}function Yi(B,Q,le){var me=le.boundary;if(me===null)return Th(B,Q,le);if(me.parentFlushed=!0,me.forceClientRender)return B.responseState.generateStaticMarkup||(me=me.errorDigest,Q.push("<!--$!-->"),Q.push("<template"),me&&(Q.push(' data-dgst="'),me=x(me),Q.push(me),Q.push('"')),Q.push("></template>")),Th(B,Q,le),B=B.responseState.generateStaticMarkup?!0:Q.push("<!--/$-->"),B;if(0<me.pendingTasks){me.rootSegmentID=B.nextSegmentId++,0<me.completedSegments.length&&B.partialBoundaries.push(me);var Re=B.responseState,je=Re.nextSuspenseID++;return Re=Re.boundaryPrefix+je.toString(16),me=me.id=Re,ee(Q,B.responseState,me),Th(B,Q,le),Q.push("<!--/$-->")}if(me.byteSize>B.progressiveChunkSize)return me.rootSegmentID=B.nextSegmentId++,B.completedBoundaries.push(me),ee(Q,B.responseState,me.id),Th(B,Q,le),Q.push("<!--/$-->");if(B.responseState.generateStaticMarkup||Q.push("<!--$-->"),le=me.completedSegments,le.length!==1)throw Error(e(391));return Yi(B,Q,le[0]),B=B.responseState.generateStaticMarkup?!0:Q.push("<!--/$-->"),B}function fv(B,Q,le){return Y(Q,B.responseState,le.formatContext,le.id),Yi(B,Q,le),U(Q,le.formatContext)}function mv(B,Q,le){for(var me=le.completedSegments,Re=0;Re<me.length;Re++)pv(B,Q,le,me[Re]);if(me.length=0,B=B.responseState,me=le.id,le=le.rootSegmentID,Q.push(B.startInlineScript),B.sentCompleteBoundaryFunction?Q.push('$RC("'):(B.sentCompleteBoundaryFunction=!0,Q.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),me===null)throw Error(e(395));return le=le.toString(16),Q.push(me),Q.push('","'),Q.push(B.segmentPrefix),Q.push(le),Q.push('")<\/script>')}function pv(B,Q,le,me){if(me.status===2)return!0;var Re=me.id;if(Re===-1){if((me.id=le.rootSegmentID)===-1)throw Error(e(392));return fv(B,Q,me)}return fv(B,Q,me),B=B.responseState,Q.push(B.startInlineScript),B.sentCompleteSegmentFunction?Q.push('$RS("'):(B.sentCompleteSegmentFunction=!0,Q.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),Q.push(B.segmentPrefix),Re=Re.toString(16),Q.push(Re),Q.push('","'),Q.push(B.placeholderPrefix),Q.push(Re),Q.push('")<\/script>')}function Lc(B,Q){try{var le=B.completedRootSegment;if(le!==null&&B.pendingRootTasks===0){Yi(B,Q,le),B.completedRootSegment=null;var me=B.responseState.bootstrapChunks;for(le=0;le<me.length-1;le++)Q.push(me[le]);le<me.length&&Q.push(me[le])}var Re=B.clientRenderedBoundaries,je;for(je=0;je<Re.length;je++){var Ve=Re[je];me=Q;var lt=B.responseState,ft=Ve.id,Yt=Ve.errorDigest,on=Ve.errorMessage,tr=Ve.errorComponentStack;if(me.push(lt.startInlineScript),lt.sentClientRenderFunction?me.push('$RX("'):(lt.sentClientRenderFunction=!0,me.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),ft===null)throw Error(e(395));if(me.push(ft),me.push('"'),Yt||on||tr){me.push(",");var ea=z(Yt||"");me.push(ea)}if(on||tr){me.push(",");var ta=z(on||"");me.push(ta)}if(tr){me.push(",");var Qs=z(tr);me.push(Qs)}if(!me.push(")<\/script>")){B.destination=null,je++,Re.splice(0,je);return}}Re.splice(0,je);var Fc=B.completedBoundaries;for(je=0;je<Fc.length;je++)if(!mv(B,Q,Fc[je])){B.destination=null,je++,Fc.splice(0,je);return}Fc.splice(0,je);var na=B.partialBoundaries;for(je=0;je<na.length;je++){var ra=na[je];e:{Re=B,Ve=Q;var Zs=ra.completedSegments;for(lt=0;lt<Zs.length;lt++)if(!pv(Re,Ve,ra,Zs[lt])){lt++,Zs.splice(0,lt);var Ka=!1;break e}Zs.splice(0,lt),Ka=!0}if(!Ka){B.destination=null,je++,na.splice(0,je);return}}na.splice(0,je);var ia=B.completedBoundaries;for(je=0;je<ia.length;je++)if(!mv(B,Q,ia[je])){B.destination=null,je++,ia.splice(0,je);return}ia.splice(0,je)}finally{B.allPendingTasks===0&&B.pingedTasks.length===0&&B.clientRenderedBoundaries.length===0&&B.completedBoundaries.length===0&&Q.push(null)}}function Ah(B,Q){try{var le=B.abortableTasks;le.forEach(function(me){return jx(me,B,Q)}),le.clear(),B.destination!==null&&Lc(B,B.destination)}catch(me){td(B,me),Eh(B,me)}}function rd(){}function id(B,Q,le,me){var Re=!1,je=null,Ve="",lt={push:function(Yt){return Yt!==null&&(Ve+=Yt),!0},destroy:function(Yt){Re=!0,je=Yt}},ft=!1;if(B=Tx(B,W(le,Q?Q.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,rd,void 0,function(){ft=!0}),ko(B),Ah(B,me),B.status===1)B.status=2,lt.destroy(B.fatalError);else if(B.status!==2&&B.destination===null){B.destination=lt;try{Lc(B,lt)}catch(Yt){td(B,Yt),Eh(B,Yt)}}if(Re)throw je;if(!ft)throw Error(e(426));return Ve}return Lv.renderToNodeStream=function(){throw Error(e(207))},Lv.renderToStaticMarkup=function(B,Q){return id(B,Q,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Lv.renderToStaticNodeStream=function(){throw Error(e(208))},Lv.renderToString=function(B,Q){return id(B,Q,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Lv.version="18.3.1",Lv}var gj={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JY;function r5e(){if(JY)return gj;JY=1;var n=eS();function e($){for(var X="https://reactjs.org/docs/error-decoder.html?invariant="+$,ae=1;ae<arguments.length;ae++)X+="&args[]="+encodeURIComponent(arguments[ae]);return"Minified React error #"+$+"; visit "+X+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t=null,r=0;function i($,X){if(X.length!==0)if(512<X.length)0<r&&($.enqueue(new Uint8Array(t.buffer,0,r)),t=new Uint8Array(512),r=0),$.enqueue(X);else{var ae=t.length-r;ae<X.length&&(ae===0?$.enqueue(t):(t.set(X.subarray(0,ae),r),$.enqueue(t),X=X.subarray(ae)),t=new Uint8Array(512),r=0),t.set(X,r),r+=X.length}}function s($,X){return i($,X),!0}function o($){t&&0<r&&($.enqueue(new Uint8Array(t.buffer,0,r)),t=null,r=0)}var a=new TextEncoder;function c($){return a.encode($)}function u($){return a.encode($)}function d($,X){typeof $.error=="function"?$.error(X):$.close()}var h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},x={};function y($){return h.call(x,$)?!0:h.call(p,$)?!1:f.test($)?x[$]=!0:(p[$]=!0,!1)}function b($,X,ae,de,De,Ie,Ue){this.acceptsBooleans=X===2||X===3||X===4,this.attributeName=de,this.attributeNamespace=De,this.mustUseProperty=ae,this.propertyName=$,this.type=X,this.sanitizeURL=Ie,this.removeEmptyString=Ue}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){_[$]=new b($,0,!1,$,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var X=$[0];_[X]=new b(X,1,!1,$[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function($){_[$]=new b($,2,!1,$.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){_[$]=new b($,2,!1,$,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){_[$]=new b($,3,!1,$.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function($){_[$]=new b($,3,!0,$,null,!1,!1)}),["capture","download"].forEach(function($){_[$]=new b($,4,!1,$,null,!1,!1)}),["cols","rows","size","span"].forEach(function($){_[$]=new b($,6,!1,$,null,!1,!1)}),["rowSpan","start"].forEach(function($){_[$]=new b($,5,!1,$.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function k($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var X=$.replace(C,k);_[X]=new b(X,1,!1,$,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var X=$.replace(C,k);_[X]=new b(X,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function($){var X=$.replace(C,k);_[X]=new b(X,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function($){_[$]=new b($,1,!1,$.toLowerCase(),null,!1,!1)}),_.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function($){_[$]=new b($,1,!1,$.toLowerCase(),null,!0,!0)});var T={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E=["Webkit","ms","Moz","O"];Object.keys(T).forEach(function($){E.forEach(function(X){X=X+$.charAt(0).toUpperCase()+$.substring(1),T[X]=T[$]})});var N=/["'&<>]/;function P($){if(typeof $=="boolean"||typeof $=="number")return""+$;$=""+$;var X=N.exec($);if(X){var ae="",de,De=0;for(de=X.index;de<$.length;de++){switch($.charCodeAt(de)){case 34:X="&quot;";break;case 38:X="&amp;";break;case 39:X="&#x27;";break;case 60:X="&lt;";break;case 62:X="&gt;";break;default:continue}De!==de&&(ae+=$.substring(De,de)),De=de+1,ae+=X}$=De!==de?ae+$.substring(De,de):ae}return $}var M=/([A-Z])/g,O=/^ms-/,q=Array.isArray,D=u("<script>"),F=u("<\/script>"),K=u('<script src="'),ee=u('<script type="module" src="'),Y=u('" async=""><\/script>'),U=/(<\/|<)(s)(cript)/gi;function R($,X,ae,de){return""+X+(ae==="s"?"\\u0073":"\\u0053")+de}function z($,X,ae,de,De){$=$===void 0?"":$,X=X===void 0?D:u('<script nonce="'+P(X)+'">');var Ie=[];if(ae!==void 0&&Ie.push(X,c((""+ae).replace(U,R)),F),de!==void 0)for(ae=0;ae<de.length;ae++)Ie.push(K,c(P(de[ae])),Y);if(De!==void 0)for(de=0;de<De.length;de++)Ie.push(ee,c(P(De[de])),Y);return{bootstrapChunks:Ie,startInlineScript:X,placeholderPrefix:u($+"P:"),segmentPrefix:u($+"S:"),boundaryPrefix:$+"B:",idPrefix:$,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function W($,X){return{insertionMode:$,selectedValue:X}}function se($){return W($==="http://www.w3.org/2000/svg"?2:$==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function ne($,X,ae){switch(X){case"select":return W(1,ae.value!=null?ae.value:ae.defaultValue);case"svg":return W(2,null);case"math":return W(3,null);case"foreignObject":return W(1,null);case"table":return W(4,null);case"thead":case"tbody":case"tfoot":return W(5,null);case"colgroup":return W(7,null);case"tr":return W(6,null)}return 4<=$.insertionMode||$.insertionMode===0?W(1,null):$}var te=u("<!-- -->");function H($,X,ae,de){return X===""?de:(de&&$.push(te),$.push(c(P(X))),!0)}var ce=new Map,pe=u(' style="'),oe=u(":"),ve=u(";");function be($,X,ae){if(typeof ae!="object")throw Error(e(62));X=!0;for(var de in ae)if(h.call(ae,de)){var De=ae[de];if(De!=null&&typeof De!="boolean"&&De!==""){if(de.indexOf("--")===0){var Ie=c(P(de));De=c(P((""+De).trim()))}else{Ie=de;var Ue=ce.get(Ie);Ue!==void 0||(Ue=u(P(Ie.replace(M,"-$1").toLowerCase().replace(O,"-ms-"))),ce.set(Ie,Ue)),Ie=Ue,De=typeof De=="number"?De===0||h.call(T,de)?c(""+De):c(De+"px"):c(P((""+De).trim()))}X?(X=!1,$.push(pe,Ie,oe,De)):$.push(ve,Ie,oe,De)}}X||$.push(ue)}var fe=u(" "),we=u('="'),ue=u('"'),Z=u('=""');function ge($,X,ae,de){switch(ae){case"style":be($,X,de);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<ae.length)||ae[0]!=="o"&&ae[0]!=="O"||ae[1]!=="n"&&ae[1]!=="N"){if(X=_.hasOwnProperty(ae)?_[ae]:null,X!==null){switch(typeof de){case"function":case"symbol":return;case"boolean":if(!X.acceptsBooleans)return}switch(ae=c(X.attributeName),X.type){case 3:de&&$.push(fe,ae,Z);break;case 4:de===!0?$.push(fe,ae,Z):de!==!1&&$.push(fe,ae,we,c(P(de)),ue);break;case 5:isNaN(de)||$.push(fe,ae,we,c(P(de)),ue);break;case 6:!isNaN(de)&&1<=de&&$.push(fe,ae,we,c(P(de)),ue);break;default:X.sanitizeURL&&(de=""+de),$.push(fe,ae,we,c(P(de)),ue)}}else if(y(ae)){switch(typeof de){case"function":case"symbol":return;case"boolean":if(X=ae.toLowerCase().slice(0,5),X!=="data-"&&X!=="aria-")return}$.push(fe,c(ae),we,c(P(de)),ue)}}}var he=u(">"),Ee=u("/>");function Be($,X,ae){if(X!=null){if(ae!=null)throw Error(e(60));if(typeof X!="object"||!("__html"in X))throw Error(e(61));X=X.__html,X!=null&&$.push(c(""+X))}}function vt($){var X="";return n.Children.forEach($,function(ae){ae!=null&&(X+=ae)}),X}var xt=u(' selected=""');function Rt($,X,ae,de){$.push(qe(ae));var De=ae=null,Ie;for(Ie in X)if(h.call(X,Ie)){var Ue=X[Ie];if(Ue!=null)switch(Ie){case"children":ae=Ue;break;case"dangerouslySetInnerHTML":De=Ue;break;default:ge($,de,Ie,Ue)}}return $.push(he),Be($,De,ae),typeof ae=="string"?($.push(c(P(ae))),null):ae}var xe=u(`
`),Ne=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Oe=new Map;function qe($){var X=Oe.get($);if(X===void 0){if(!Ne.test($))throw Error(e(65,$));X=u("<"+$),Oe.set($,X)}return X}var Ze=u("<!DOCTYPE html>");function Ye($,X,ae,de,De){switch(X){case"select":$.push(qe("select"));var Ie=null,Ue=null;for(en in ae)if(h.call(ae,en)){var rt=ae[en];if(rt!=null)switch(en){case"children":Ie=rt;break;case"dangerouslySetInnerHTML":Ue=rt;break;case"defaultValue":case"value":break;default:ge($,de,en,rt)}}return $.push(he),Be($,Ue,Ie),Ie;case"option":Ue=De.selectedValue,$.push(qe("option"));var qt=rt=null,dn=null,en=null;for(Ie in ae)if(h.call(ae,Ie)){var fr=ae[Ie];if(fr!=null)switch(Ie){case"children":rt=fr;break;case"selected":dn=fr;break;case"dangerouslySetInnerHTML":en=fr;break;case"value":qt=fr;default:ge($,de,Ie,fr)}}if(Ue!=null)if(ae=qt!==null?""+qt:vt(rt),q(Ue)){for(de=0;de<Ue.length;de++)if(""+Ue[de]===ae){$.push(xt);break}}else""+Ue===ae&&$.push(xt);else dn&&$.push(xt);return $.push(he),Be($,en,rt),rt;case"textarea":$.push(qe("textarea")),en=Ue=Ie=null;for(rt in ae)if(h.call(ae,rt)&&(qt=ae[rt],qt!=null))switch(rt){case"children":en=qt;break;case"value":Ie=qt;break;case"defaultValue":Ue=qt;break;case"dangerouslySetInnerHTML":throw Error(e(91));default:ge($,de,rt,qt)}if(Ie===null&&Ue!==null&&(Ie=Ue),$.push(he),en!=null){if(Ie!=null)throw Error(e(92));if(q(en)&&1<en.length)throw Error(e(93));Ie=""+en}return typeof Ie=="string"&&Ie[0]===`
`&&$.push(xe),Ie!==null&&$.push(c(P(""+Ie))),null;case"input":$.push(qe("input")),qt=en=rt=Ie=null;for(Ue in ae)if(h.call(ae,Ue)&&(dn=ae[Ue],dn!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(e(399,"input"));case"defaultChecked":qt=dn;break;case"defaultValue":rt=dn;break;case"checked":en=dn;break;case"value":Ie=dn;break;default:ge($,de,Ue,dn)}return en!==null?ge($,de,"checked",en):qt!==null&&ge($,de,"checked",qt),Ie!==null?ge($,de,"value",Ie):rt!==null&&ge($,de,"value",rt),$.push(Ee),null;case"menuitem":$.push(qe("menuitem"));for(var eo in ae)if(h.call(ae,eo)&&(Ie=ae[eo],Ie!=null))switch(eo){case"children":case"dangerouslySetInnerHTML":throw Error(e(400));default:ge($,de,eo,Ie)}return $.push(he),null;case"title":$.push(qe("title")),Ie=null;for(fr in ae)if(h.call(ae,fr)&&(Ue=ae[fr],Ue!=null))switch(fr){case"children":Ie=Ue;break;case"dangerouslySetInnerHTML":throw Error(e(434));default:ge($,de,fr,Ue)}return $.push(he),Ie;case"listing":case"pre":$.push(qe(X)),Ue=Ie=null;for(qt in ae)if(h.call(ae,qt)&&(rt=ae[qt],rt!=null))switch(qt){case"children":Ie=rt;break;case"dangerouslySetInnerHTML":Ue=rt;break;default:ge($,de,qt,rt)}if($.push(he),Ue!=null){if(Ie!=null)throw Error(e(60));if(typeof Ue!="object"||!("__html"in Ue))throw Error(e(61));ae=Ue.__html,ae!=null&&(typeof ae=="string"&&0<ae.length&&ae[0]===`
`?$.push(xe,c(ae)):$.push(c(""+ae)))}return typeof Ie=="string"&&Ie[0]===`
`&&$.push(xe),Ie;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":$.push(qe(X));for(var sa in ae)if(h.call(ae,sa)&&(Ie=ae[sa],Ie!=null))switch(sa){case"children":case"dangerouslySetInnerHTML":throw Error(e(399,X));default:ge($,de,sa,Ie)}return $.push(Ee),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Rt($,ae,X,de);case"html":return De.insertionMode===0&&$.push(Ze),Rt($,ae,X,de);default:if(X.indexOf("-")===-1&&typeof ae.is!="string")return Rt($,ae,X,de);$.push(qe(X)),Ue=Ie=null;for(dn in ae)if(h.call(ae,dn)&&(rt=ae[dn],rt!=null))switch(dn){case"children":Ie=rt;break;case"dangerouslySetInnerHTML":Ue=rt;break;case"style":be($,de,rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:y(dn)&&typeof rt!="function"&&typeof rt!="symbol"&&$.push(fe,c(dn),we,c(P(rt)),ue)}return $.push(he),Be($,Ue,Ie),Ie}}var ht=u("</"),Bt=u(">"),Jt=u('<template id="'),Pn=u('"></template>'),Hn=u("<!--$-->"),zr=u('<!--$?--><template id="'),Js=u('"></template>'),ui=u("<!--$!-->"),qi=u("<!--/$-->"),ql=u("<template"),Gi=u('"'),Wa=u(' data-dgst="');u(' data-msg="'),u(' data-stck="');var Qo=u("></template>");function di($,X,ae){if(i($,zr),ae===null)throw Error(e(395));return i($,ae),s($,Js)}var Zo=u('<div hidden id="'),us=u('">'),fn=u("</div>"),hi=u('<svg aria-hidden="true" style="display:none" id="'),qa=u('">'),$t=u("</svg>"),sn=u('<math aria-hidden="true" style="display:none" id="'),An=u('">'),Ir=u("</math>"),Ki=u('<table hidden id="'),Ri=u('">'),Ps=u("</table>"),fi=u('<table hidden><tbody id="'),So=u('">'),Qu=u("</tbody></table>"),Pm=u('<table hidden><tr id="'),Im=u('">'),Zu=u("</tr></table>"),Ex=u('<table hidden><colgroup id="'),Om=u('">'),uv=u("</colgroup></table>");function Mc($,X,ae,de){switch(ae.insertionMode){case 0:case 1:return i($,Zo),i($,X.segmentPrefix),i($,c(de.toString(16))),s($,us);case 2:return i($,hi),i($,X.segmentPrefix),i($,c(de.toString(16))),s($,qa);case 3:return i($,sn),i($,X.segmentPrefix),i($,c(de.toString(16))),s($,An);case 4:return i($,Ki),i($,X.segmentPrefix),i($,c(de.toString(16))),s($,Ri);case 5:return i($,fi),i($,X.segmentPrefix),i($,c(de.toString(16))),s($,So);case 6:return i($,Pm),i($,X.segmentPrefix),i($,c(de.toString(16))),s($,Im);case 7:return i($,Ex),i($,X.segmentPrefix),i($,c(de.toString(16))),s($,Om);default:throw Error(e(397))}}function ed($,X){switch(X.insertionMode){case 0:case 1:return s($,fn);case 2:return s($,$t);case 3:return s($,Ir);case 4:return s($,Ps);case 5:return s($,Qu);case 6:return s($,Zu);case 7:return s($,uv);default:throw Error(e(397))}}var Tx=u('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),dv=u('$RS("'),Ch=u('","'),td=u('")<\/script>'),Eh=u('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),hv=u('$RC("'),Ax=u('","'),Nx=u('")<\/script>'),hr=u('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Is=u('$RX("'),Rm=u('"'),Mm=u(")<\/script>"),nd=u(","),jx=/[<\u2028\u2029]/g;function Dc($){return JSON.stringify($).replace(jx,function(X){switch(X){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Ga=Object.assign,ko=Symbol.for("react.element"),Th=Symbol.for("react.portal"),Yi=Symbol.for("react.fragment"),fv=Symbol.for("react.strict_mode"),mv=Symbol.for("react.profiler"),pv=Symbol.for("react.provider"),Lc=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),rd=Symbol.for("react.suspense"),id=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),le=Symbol.for("react.scope"),me=Symbol.for("react.debug_trace_mode"),Re=Symbol.for("react.legacy_hidden"),je=Symbol.for("react.default_value"),Ve=Symbol.iterator;function lt($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case Yi:return"Fragment";case Th:return"Portal";case mv:return"Profiler";case fv:return"StrictMode";case rd:return"Suspense";case id:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case Lc:return($.displayName||"Context")+".Consumer";case pv:return($._context.displayName||"Context")+".Provider";case Ah:var X=$.render;return $=$.displayName,$||($=X.displayName||X.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case B:return X=$.displayName||null,X!==null?X:lt($.type)||"Memo";case Q:X=$._payload,$=$._init;try{return lt($(X))}catch{}}return null}var ft={};function Yt($,X){if($=$.contextTypes,!$)return ft;var ae={},de;for(de in $)ae[de]=X[de];return ae}var on=null;function tr($,X){if($!==X){$.context._currentValue=$.parentValue,$=$.parent;var ae=X.parent;if($===null){if(ae!==null)throw Error(e(401))}else{if(ae===null)throw Error(e(401));tr($,ae)}X.context._currentValue=X.value}}function ea($){$.context._currentValue=$.parentValue,$=$.parent,$!==null&&ea($)}function ta($){var X=$.parent;X!==null&&ta(X),$.context._currentValue=$.value}function Qs($,X){if($.context._currentValue=$.parentValue,$=$.parent,$===null)throw Error(e(402));$.depth===X.depth?tr($,X):Qs($,X)}function Fc($,X){var ae=X.parent;if(ae===null)throw Error(e(402));$.depth===ae.depth?tr($,ae):Fc($,ae),X.context._currentValue=X.value}function na($){var X=on;X!==$&&(X===null?ta($):$===null?ea(X):X.depth===$.depth?tr(X,$):X.depth>$.depth?Qs(X,$):Fc(X,$),on=$)}var ra={isMounted:function(){return!1},enqueueSetState:function($,X){$=$._reactInternals,$.queue!==null&&$.queue.push(X)},enqueueReplaceState:function($,X){$=$._reactInternals,$.replace=!0,$.queue=[X]},enqueueForceUpdate:function(){}};function Zs($,X,ae,de){var De=$.state!==void 0?$.state:null;$.updater=ra,$.props=ae,$.state=De;var Ie={queue:[],replace:!1};$._reactInternals=Ie;var Ue=X.contextType;if($.context=typeof Ue=="object"&&Ue!==null?Ue._currentValue:de,Ue=X.getDerivedStateFromProps,typeof Ue=="function"&&(Ue=Ue(ae,De),De=Ue==null?De:Ga({},De,Ue),$.state=De),typeof X.getDerivedStateFromProps!="function"&&typeof $.getSnapshotBeforeUpdate!="function"&&(typeof $.UNSAFE_componentWillMount=="function"||typeof $.componentWillMount=="function"))if(X=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),X!==$.state&&ra.enqueueReplaceState($,$.state,null),Ie.queue!==null&&0<Ie.queue.length)if(X=Ie.queue,Ue=Ie.replace,Ie.queue=null,Ie.replace=!1,Ue&&X.length===1)$.state=X[0];else{for(Ie=Ue?X[0]:$.state,De=!0,Ue=Ue?1:0;Ue<X.length;Ue++){var rt=X[Ue];rt=typeof rt=="function"?rt.call($,Ie,ae,de):rt,rt!=null&&(De?(De=!1,Ie=Ga({},Ie,rt)):Ga(Ie,rt))}$.state=Ie}else Ie.queue=null}var Ka={id:1,overflow:""};function ia($,X,ae){var de=$.id;$=$.overflow;var De=32-sd(de)-1;de&=~(1<<De),ae+=1;var Ie=32-sd(X)+De;if(30<Ie){var Ue=De-De%5;return Ie=(de&(1<<Ue)-1).toString(32),de>>=Ue,De-=Ue,{id:1<<32-sd(X)+De|ae<<De|de,overflow:Ie+$}}return{id:1<<Ie|ae<<De|de,overflow:$}}var sd=Math.clz32?Math.clz32:nN,od=Math.log,Y3=Math.LN2;function nN($){return $>>>=0,$===0?32:31-(od($)/Y3|0)|0}function gv($,X){return $===X&&($!==0||1/$===1/X)||$!==$&&X!==X}var X3=typeof Object.is=="function"?Object.is:gv,Gl=null,Dm=null,vv=null,nr=null,Bc=!1,ad=!1,Kl=0,Ya=null,Px=0;function Nh(){if(Gl===null)throw Error(e(321));return Gl}function Ix(){if(0<Px)throw Error(e(312));return{memoizedState:null,queue:null,next:null}}function Lm(){return nr===null?vv===null?(Bc=!1,vv=nr=Ix()):(Bc=!0,nr=vv):nr.next===null?(Bc=!1,nr=nr.next=Ix()):(Bc=!0,nr=nr.next),nr}function yv(){Dm=Gl=null,ad=!1,vv=null,Px=0,nr=Ya=null}function TS($,X){return typeof X=="function"?X($):X}function $c($,X,ae){if(Gl=Nh(),nr=Lm(),Bc){var de=nr.queue;if(X=de.dispatch,Ya!==null&&(ae=Ya.get(de),ae!==void 0)){Ya.delete(de),de=nr.memoizedState;do de=$(de,ae.action),ae=ae.next;while(ae!==null);return nr.memoizedState=de,[de,X]}return[nr.memoizedState,X]}return $=$===TS?typeof X=="function"?X():X:ae!==void 0?ae(X):X,nr.memoizedState=$,$=nr.queue={last:null,dispatch:null},$=$.dispatch=Rx.bind(null,Gl,$),[nr.memoizedState,$]}function Ox($,X){if(Gl=Nh(),nr=Lm(),X=X===void 0?null:X,nr!==null){var ae=nr.memoizedState;if(ae!==null&&X!==null){var de=ae[1];e:if(de===null)de=!1;else{for(var De=0;De<de.length&&De<X.length;De++)if(!X3(X[De],de[De])){de=!1;break e}de=!0}if(de)return ae[0]}}return $=$(),nr.memoizedState=[$,X],$}function Rx($,X,ae){if(25<=Px)throw Error(e(301));if($===Gl)if(ad=!0,$={action:ae,next:null},Ya===null&&(Ya=new Map),ae=Ya.get(X),ae===void 0)Ya.set(X,$);else{for(X=ae;X.next!==null;)X=X.next;X.next=$}}function rN(){throw Error(e(394))}function jh(){}var xv={readContext:function($){return $._currentValue},useContext:function($){return Nh(),$._currentValue},useMemo:Ox,useReducer:$c,useRef:function($){Gl=Nh(),nr=Lm();var X=nr.memoizedState;return X===null?($={current:$},nr.memoizedState=$):X},useState:function($){return $c(TS,$)},useInsertionEffect:jh,useLayoutEffect:function(){},useCallback:function($,X){return Ox(function(){return $},X)},useImperativeHandle:jh,useEffect:jh,useDebugValue:jh,useDeferredValue:function($){return Nh(),$},useTransition:function(){return Nh(),[!1,rN]},useId:function(){var $=Dm.treeContext,X=$.overflow;$=$.id,$=($&~(1<<32-sd($)-1)).toString(32)+X;var ae=bv;if(ae===null)throw Error(e(404));return X=Kl++,$=":"+ae.idPrefix+"R"+$,0<X&&($+="H"+X.toString(32)),$+":"},useMutableSource:function($,X){return Nh(),X($._source)},useSyncExternalStore:function($,X,ae){if(ae===void 0)throw Error(e(407));return ae()}},bv=null,Os=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Fm($){return console.error($),null}function Ph(){}function wv($,X,ae,de,De,Ie,Ue,rt,qt){var dn=[],en=new Set;return X={destination:null,responseState:X,progressiveChunkSize:de===void 0?12800:de,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:en,pingedTasks:dn,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:De===void 0?Fm:De,onAllReady:Ie===void 0?Ph:Ie,onShellReady:Ue===void 0?Ph:Ue,onShellError:rt===void 0?Ph:rt,onFatalError:qt===void 0?Ph:qt},ae=Bm(X,0,null,ae,!1,!1),ae.parentFlushed=!0,$=AS(X,$,null,ae,en,ft,null,Ka),dn.push($),X}function AS($,X,ae,de,De,Ie,Ue,rt){$.allPendingTasks++,ae===null?$.pendingRootTasks++:ae.pendingTasks++;var qt={node:X,ping:function(){var dn=$.pingedTasks;dn.push(qt),dn.length===1&&IS($)},blockedBoundary:ae,blockedSegment:de,abortSet:De,legacyContext:Ie,context:Ue,treeContext:rt};return De.add(qt),qt}function Bm($,X,ae,de,De,Ie){return{status:0,id:-1,index:X,parentFlushed:!1,chunks:[],children:[],formatContext:de,boundary:ae,lastPushedText:De,textEmbedded:Ie}}function Ih($,X){if($=$.onError(X),$!=null&&typeof $!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof $+'" instead');return $}function ld($,X){var ae=$.onShellError;ae(X),ae=$.onFatalError,ae(X),$.destination!==null?($.status=2,d($.destination,X)):($.status=1,$.fatalError=X)}function _v($,X,ae,de,De){for(Gl={},Dm=X,Kl=0,$=ae(de,De);ad;)ad=!1,Kl=0,Px+=1,nr=null,$=ae(de,De);return yv(),$}function NS($,X,ae,de){var De=ae.render(),Ie=de.childContextTypes;if(Ie!=null){var Ue=X.legacyContext;if(typeof ae.getChildContext!="function")de=Ue;else{ae=ae.getChildContext();for(var rt in ae)if(!(rt in Ie))throw Error(e(108,lt(de)||"Unknown",rt));de=Ga({},Ue,ae)}X.legacyContext=de,Co($,X,De),X.legacyContext=Ue}else Co($,X,De)}function iN($,X){if($&&$.defaultProps){X=Ga({},X),$=$.defaultProps;for(var ae in $)X[ae]===void 0&&(X[ae]=$[ae]);return X}return X}function jS($,X,ae,de,De){if(typeof ae=="function")if(ae.prototype&&ae.prototype.isReactComponent){De=Yt(ae,X.legacyContext);var Ie=ae.contextType;Ie=new ae(de,typeof Ie=="object"&&Ie!==null?Ie._currentValue:De),Zs(Ie,ae,de,De),NS($,X,Ie,ae)}else{Ie=Yt(ae,X.legacyContext),De=_v($,X,ae,de,Ie);var Ue=Kl!==0;if(typeof De=="object"&&De!==null&&typeof De.render=="function"&&De.$$typeof===void 0)Zs(De,ae,de,Ie),NS($,X,De,ae);else if(Ue){de=X.treeContext,X.treeContext=ia(de,1,0);try{Co($,X,De)}finally{X.treeContext=de}}else Co($,X,De)}else if(typeof ae=="string"){switch(De=X.blockedSegment,Ie=Ye(De.chunks,ae,de,$.responseState,De.formatContext),De.lastPushedText=!1,Ue=De.formatContext,De.formatContext=ne(Ue,ae,de),PS($,X,Ie),De.formatContext=Ue,ae){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:De.chunks.push(ht,c(ae),Bt)}De.lastPushedText=!1}else{switch(ae){case Re:case me:case fv:case mv:case Yi:Co($,X,de.children);return;case id:Co($,X,de.children);return;case le:throw Error(e(343));case rd:e:{ae=X.blockedBoundary,De=X.blockedSegment,Ie=de.fallback,de=de.children,Ue=new Set;var rt={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Ue,errorDigest:null},qt=Bm($,De.chunks.length,rt,De.formatContext,!1,!1);De.children.push(qt),De.lastPushedText=!1;var dn=Bm($,0,null,De.formatContext,!1,!1);dn.parentFlushed=!0,X.blockedBoundary=rt,X.blockedSegment=dn;try{if(PS($,X,de),dn.lastPushedText&&dn.textEmbedded&&dn.chunks.push(te),dn.status=1,Dx(rt,dn),rt.pendingTasks===0)break e}catch(en){dn.status=4,rt.forceClientRender=!0,rt.errorDigest=Ih($,en)}finally{X.blockedBoundary=ae,X.blockedSegment=De}X=AS($,Ie,ae,qt,Ue,X.legacyContext,X.context,X.treeContext),$.pingedTasks.push(X)}return}if(typeof ae=="object"&&ae!==null)switch(ae.$$typeof){case Ah:if(de=_v($,X,ae.render,de,De),Kl!==0){ae=X.treeContext,X.treeContext=ia(ae,1,0);try{Co($,X,de)}finally{X.treeContext=ae}}else Co($,X,de);return;case B:ae=ae.type,de=iN(ae,de),jS($,X,ae,de,De);return;case pv:if(De=de.children,ae=ae._context,de=de.value,Ie=ae._currentValue,ae._currentValue=de,Ue=on,on=de={parent:Ue,depth:Ue===null?0:Ue.depth+1,context:ae,parentValue:Ie,value:de},X.context=de,Co($,X,De),$=on,$===null)throw Error(e(403));de=$.parentValue,$.context._currentValue=de===je?$.context._defaultValue:de,$=on=$.parent,X.context=$;return;case Lc:de=de.children,de=de(ae._currentValue),Co($,X,de);return;case Q:De=ae._init,ae=De(ae._payload),de=iN(ae,de),jS($,X,ae,de,void 0);return}throw Error(e(130,ae==null?ae:typeof ae,""))}}function Co($,X,ae){if(X.node=ae,typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case ko:jS($,X,ae.type,ae.props,ae.ref);return;case Th:throw Error(e(257));case Q:var de=ae._init;ae=de(ae._payload),Co($,X,ae);return}if(q(ae)){Mx($,X,ae);return}if(ae===null||typeof ae!="object"?de=null:(de=Ve&&ae[Ve]||ae["@@iterator"],de=typeof de=="function"?de:null),de&&(de=de.call(ae))){if(ae=de.next(),!ae.done){var De=[];do De.push(ae.value),ae=de.next();while(!ae.done);Mx($,X,De)}return}throw $=Object.prototype.toString.call(ae),Error(e(31,$==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":$))}typeof ae=="string"?(de=X.blockedSegment,de.lastPushedText=H(X.blockedSegment.chunks,ae,$.responseState,de.lastPushedText)):typeof ae=="number"&&(de=X.blockedSegment,de.lastPushedText=H(X.blockedSegment.chunks,""+ae,$.responseState,de.lastPushedText))}function Mx($,X,ae){for(var de=ae.length,De=0;De<de;De++){var Ie=X.treeContext;X.treeContext=ia(Ie,de,De);try{PS($,X,ae[De])}finally{X.treeContext=Ie}}}function PS($,X,ae){var de=X.blockedSegment.formatContext,De=X.legacyContext,Ie=X.context;try{return Co($,X,ae)}catch(qt){if(yv(),typeof qt=="object"&&qt!==null&&typeof qt.then=="function"){ae=qt;var Ue=X.blockedSegment,rt=Bm($,Ue.chunks.length,null,Ue.formatContext,Ue.lastPushedText,!0);Ue.children.push(rt),Ue.lastPushedText=!1,$=AS($,X.node,X.blockedBoundary,rt,X.abortSet,X.legacyContext,X.context,X.treeContext).ping,ae.then($,$),X.blockedSegment.formatContext=de,X.legacyContext=De,X.context=Ie,na(Ie)}else throw X.blockedSegment.formatContext=de,X.legacyContext=De,X.context=Ie,na(Ie),qt}}function J3($){var X=$.blockedBoundary;$=$.blockedSegment,$.status=3,oN(this,X,$)}function sN($,X,ae){var de=$.blockedBoundary;$.blockedSegment.status=3,de===null?(X.allPendingTasks--,X.status!==2&&(X.status=2,X.destination!==null&&X.destination.close())):(de.pendingTasks--,de.forceClientRender||(de.forceClientRender=!0,$=ae===void 0?Error(e(432)):ae,de.errorDigest=X.onError($),de.parentFlushed&&X.clientRenderedBoundaries.push(de)),de.fallbackAbortableTasks.forEach(function(De){return sN(De,X,ae)}),de.fallbackAbortableTasks.clear(),X.allPendingTasks--,X.allPendingTasks===0&&(de=X.onAllReady,de()))}function Dx($,X){if(X.chunks.length===0&&X.children.length===1&&X.children[0].boundary===null){var ae=X.children[0];ae.id=X.id,ae.parentFlushed=!0,ae.status===1&&Dx($,ae)}else $.completedSegments.push(X)}function oN($,X,ae){if(X===null){if(ae.parentFlushed){if($.completedRootSegment!==null)throw Error(e(389));$.completedRootSegment=ae}$.pendingRootTasks--,$.pendingRootTasks===0&&($.onShellError=Ph,X=$.onShellReady,X())}else X.pendingTasks--,X.forceClientRender||(X.pendingTasks===0?(ae.parentFlushed&&ae.status===1&&Dx(X,ae),X.parentFlushed&&$.completedBoundaries.push(X),X.fallbackAbortableTasks.forEach(J3,$),X.fallbackAbortableTasks.clear()):ae.parentFlushed&&ae.status===1&&(Dx(X,ae),X.completedSegments.length===1&&X.parentFlushed&&$.partialBoundaries.push(X)));$.allPendingTasks--,$.allPendingTasks===0&&($=$.onAllReady,$())}function IS($){if($.status!==2){var X=on,ae=Os.current;Os.current=xv;var de=bv;bv=$.responseState;try{var De=$.pingedTasks,Ie;for(Ie=0;Ie<De.length;Ie++){var Ue=De[Ie],rt=$,qt=Ue.blockedSegment;if(qt.status===0){na(Ue.context);try{Co(rt,Ue,Ue.node),qt.lastPushedText&&qt.textEmbedded&&qt.chunks.push(te),Ue.abortSet.delete(Ue),qt.status=1,oN(rt,Ue.blockedBoundary,qt)}catch(oa){if(yv(),typeof oa=="object"&&oa!==null&&typeof oa.then=="function"){var dn=Ue.ping;oa.then(dn,dn)}else{Ue.abortSet.delete(Ue),qt.status=4;var en=Ue.blockedBoundary,fr=oa,eo=Ih(rt,fr);if(en===null?ld(rt,fr):(en.pendingTasks--,en.forceClientRender||(en.forceClientRender=!0,en.errorDigest=eo,en.parentFlushed&&rt.clientRenderedBoundaries.push(en))),rt.allPendingTasks--,rt.allPendingTasks===0){var sa=rt.onAllReady;sa()}}}finally{}}}De.splice(0,Ie),$.destination!==null&&OS($,$.destination)}catch(oa){Ih($,oa),ld($,oa)}finally{bv=de,Os.current=ae,ae===xv&&na(X)}}}function Lx($,X,ae){switch(ae.parentFlushed=!0,ae.status){case 0:var de=ae.id=$.nextSegmentId++;return ae.lastPushedText=!1,ae.textEmbedded=!1,$=$.responseState,i(X,Jt),i(X,$.placeholderPrefix),$=c(de.toString(16)),i(X,$),s(X,Pn);case 1:ae.status=2;var De=!0;de=ae.chunks;var Ie=0;ae=ae.children;for(var Ue=0;Ue<ae.length;Ue++){for(De=ae[Ue];Ie<De.index;Ie++)i(X,de[Ie]);De=Fx($,X,De)}for(;Ie<de.length-1;Ie++)i(X,de[Ie]);return Ie<de.length&&(De=s(X,de[Ie])),De;default:throw Error(e(390))}}function Fx($,X,ae){var de=ae.boundary;if(de===null)return Lx($,X,ae);if(de.parentFlushed=!0,de.forceClientRender)de=de.errorDigest,s(X,ui),i(X,ql),de&&(i(X,Wa),i(X,c(P(de))),i(X,Gi)),s(X,Qo),Lx($,X,ae);else if(0<de.pendingTasks){de.rootSegmentID=$.nextSegmentId++,0<de.completedSegments.length&&$.partialBoundaries.push(de);var De=$.responseState,Ie=De.nextSuspenseID++;De=u(De.boundaryPrefix+Ie.toString(16)),de=de.id=De,di(X,$.responseState,de),Lx($,X,ae)}else if(de.byteSize>$.progressiveChunkSize)de.rootSegmentID=$.nextSegmentId++,$.completedBoundaries.push(de),di(X,$.responseState,de.id),Lx($,X,ae);else{if(s(X,Hn),ae=de.completedSegments,ae.length!==1)throw Error(e(391));Fx($,X,ae[0])}return s(X,qi)}function aN($,X,ae){return Mc(X,$.responseState,ae.formatContext,ae.id),Fx($,X,ae),ed(X,ae.formatContext)}function lN($,X,ae){for(var de=ae.completedSegments,De=0;De<de.length;De++)Bx($,X,ae,de[De]);if(de.length=0,$=$.responseState,de=ae.id,ae=ae.rootSegmentID,i(X,$.startInlineScript),$.sentCompleteBoundaryFunction?i(X,hv):($.sentCompleteBoundaryFunction=!0,i(X,Eh)),de===null)throw Error(e(395));return ae=c(ae.toString(16)),i(X,de),i(X,Ax),i(X,$.segmentPrefix),i(X,ae),s(X,Nx)}function Bx($,X,ae,de){if(de.status===2)return!0;var De=de.id;if(De===-1){if((de.id=ae.rootSegmentID)===-1)throw Error(e(392));return aN($,X,de)}return aN($,X,de),$=$.responseState,i(X,$.startInlineScript),$.sentCompleteSegmentFunction?i(X,dv):($.sentCompleteSegmentFunction=!0,i(X,Tx)),i(X,$.segmentPrefix),De=c(De.toString(16)),i(X,De),i(X,Ch),i(X,$.placeholderPrefix),i(X,De),s(X,td)}function OS($,X){t=new Uint8Array(512),r=0;try{var ae=$.completedRootSegment;if(ae!==null&&$.pendingRootTasks===0){Fx($,X,ae),$.completedRootSegment=null;var de=$.responseState.bootstrapChunks;for(ae=0;ae<de.length-1;ae++)i(X,de[ae]);ae<de.length&&s(X,de[ae])}var De=$.clientRenderedBoundaries,Ie;for(Ie=0;Ie<De.length;Ie++){var Ue=De[Ie];de=X;var rt=$.responseState,qt=Ue.id,dn=Ue.errorDigest,en=Ue.errorMessage,fr=Ue.errorComponentStack;if(i(de,rt.startInlineScript),rt.sentClientRenderFunction?i(de,Is):(rt.sentClientRenderFunction=!0,i(de,hr)),qt===null)throw Error(e(395));i(de,qt),i(de,Rm),(dn||en||fr)&&(i(de,nd),i(de,c(Dc(dn||"")))),(en||fr)&&(i(de,nd),i(de,c(Dc(en||"")))),fr&&(i(de,nd),i(de,c(Dc(fr)))),s(de,Mm)}De.splice(0,Ie);var eo=$.completedBoundaries;for(Ie=0;Ie<eo.length;Ie++)lN($,X,eo[Ie]);eo.splice(0,Ie),o(X),t=new Uint8Array(512),r=0;var sa=$.partialBoundaries;for(Ie=0;Ie<sa.length;Ie++){var oa=sa[Ie];e:{De=$,Ue=X;var Sv=oa.completedSegments;for(rt=0;rt<Sv.length;rt++)if(!Bx(De,Ue,oa,Sv[rt])){rt++,Sv.splice(0,rt);var RS=!1;break e}Sv.splice(0,rt),RS=!0}if(!RS){$.destination=null,Ie++,sa.splice(0,Ie);return}}sa.splice(0,Ie);var cd=$.completedBoundaries;for(Ie=0;Ie<cd.length;Ie++)lN($,X,cd[Ie]);cd.splice(0,Ie)}finally{o(X),$.allPendingTasks===0&&$.pingedTasks.length===0&&$.clientRenderedBoundaries.length===0&&$.completedBoundaries.length===0&&X.close()}}function cN($,X){try{var ae=$.abortableTasks;ae.forEach(function(de){return sN(de,$,X)}),ae.clear(),$.destination!==null&&OS($,$.destination)}catch(de){Ih($,de),ld($,de)}}return gj.renderToReadableStream=function($,X){return new Promise(function(ae,de){var De,Ie,Ue=new Promise(function(en,fr){Ie=en,De=fr}),rt=wv($,z(X?X.identifierPrefix:void 0,X?X.nonce:void 0,X?X.bootstrapScriptContent:void 0,X?X.bootstrapScripts:void 0,X?X.bootstrapModules:void 0),se(X?X.namespaceURI:void 0),X?X.progressiveChunkSize:void 0,X?X.onError:void 0,Ie,function(){var en=new ReadableStream({type:"bytes",pull:function(fr){if(rt.status===1)rt.status=2,d(fr,rt.fatalError);else if(rt.status!==2&&rt.destination===null){rt.destination=fr;try{OS(rt,fr)}catch(eo){Ih(rt,eo),ld(rt,eo)}}},cancel:function(){cN(rt)}},{highWaterMark:0});en.allReady=Ue,ae(en)},function(en){Ue.catch(function(){}),de(en)},De);if(X&&X.signal){var qt=X.signal,dn=function(){cN(rt,qt.reason),qt.removeEventListener("abort",dn)};qt.addEventListener("abort",dn)}IS(rt)})},gj.version="18.3.1",gj}var QY;function i5e(){if(QY)return ip;QY=1;var n,e;return n=n5e(),e=r5e(),ip.version=n.version,ip.renderToString=n.renderToString,ip.renderToStaticMarkup=n.renderToStaticMarkup,ip.renderToNodeStream=n.renderToNodeStream,ip.renderToStaticNodeStream=n.renderToStaticNodeStream,ip.renderToReadableStream=e.renderToReadableStream,ip}var s5e=i5e();function o5e(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var a5e=`.react-input-emoji--container {
  color: #4b4b4b;
  text-rendering: optimizeLegibility;
  background-color: #fff;
  border: 1px solid #fff;
  border-radius: 21px;
  margin: 5px 10px;
  box-sizing: border-box;
  flex: 1 1 auto;
  font-size: 15px;
  font-family: sans-serif;
  font-weight: 400;
  line-height: 20px;
  min-height: 20px;
  min-width: 0;
  outline: none;
  width: inherit;
  will-change: width;
  vertical-align: baseline;
  border: 1px solid #eaeaea;
  margin-right: 0;
}

.react-input-emoji--wrapper {
  display: flex;
  overflow: hidden;
  flex: 1;
  position: relative;
  padding-right: 0;
  vertical-align: baseline;
  outline: none;
  margin: 0;
  padding: 0;
  border: 0;
}

.react-input-emoji--input {
  font-weight: 400;
  max-height: 100px;
  min-height: 20px;
  outline: none;
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
  white-space: pre-wrap;
  word-wrap: break-word;
  z-index: 1;
  width: 100%;
  user-select: text;
  padding: 9px 12px 11px;
  text-align: left;
}

.react-input-emoji--input img {
  vertical-align: middle;
  width: 18px !important;
  height: 18px !important;
  display: inline !important;
  margin-left: 1px;
  margin-right: 1px;
}

.react-input-emoji--overlay {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 9;
}

.react-input-emoji--placeholder {
  color: #a0a0a0;
  pointer-events: none;
  position: absolute;
  user-select: none;
  z-index: 2;
  left: 16px;
  top: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  width: calc(100% - 22px);
}

.react-input-emoji--button {
  position: relative;
  display: block;
  text-align: center;
  padding: 0 10px;
  overflow: hidden;
  transition: color 0.1s ease-out;
  margin: 0;
  box-shadow: none;
  background: none;
  border: none;
  outline: none;
  cursor: pointer;
  flex-shrink: 0;
}

.react-input-emoji--button svg {
  fill: #858585;
}

.react-input-emoji--button__show svg {
  fill: #128b7e;
}

.react-emoji {
  display: flex;
  align-items: center;
  position: relative;
  width: 100%;
}

.react-emoji-picker--container {
  position: absolute;
  top: 0;
  width: 100%;
}

.react-emoji-picker--wrapper {
  position: absolute;
  bottom: 0;
  right: 0;
  height: 435px;
  width: 352px;
  overflow: hidden;
  z-index: 10;
}

.react-emoji-picker {
  position: absolute;
  top: 0;
  left: 0;
  animation: slidein 0.1s ease-in-out;
}

.react-emoji-picker__show {
  top: 0;
}

.react-input-emoji--mention--container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 10;
}

.react-input-emoji--mention--list {
  background-color: #fafafa;
  border: 1px solid #eaeaea;
  border-radius: 4px;
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  gap: 5px;
  flex-direction: column;
  position: absolute;
  bottom: 0;
  width: 100%;
  left: 0;
}

.react-input-emoji--mention--item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 5px 10px;
  background-color: transparent;
  width: 100%;
  margin: 0;
  border: 0;
}

.react-input-emoji--mention--item__selected {
  background-color: #eeeeee;
}

.react-input-emoji--mention--item--img {
  width: 34px;
  height: 34px;
  border-radius: 50%;
}

.react-input-emoji--mention--item--name {
  font-size: 16px;
  color: #333;
}

.react-input-emoji--mention--item--name__selected {
  color: green;
}

.react-input-emoji--mention--text {
  color: #039be5;
}

.react-input-emoji--mention--loading {
  background-color: #fafafa;
  border: 1px solid #eaeaea;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 0;
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
}

.react-input-emoji--mention--loading--spinner,
.react-input-emoji--mention--loading--spinner::after {
  border-radius: 50%;
  width: 10em;
  height: 10em;
}

.react-input-emoji--mention--loading--spinner {
  margin: 1px auto;
  font-size: 2px;
  position: relative;
  text-indent: -9999em;
  border-top: 1.1em solid rgba(0, 0, 0, 0.1);
  border-right: 1.1em solid rgba(0, 0, 0, 0.1);
  border-bottom: 1.1em solid rgba(0, 0, 0, 0.1);
  border-left: 1.1em solid rgba(0, 0, 0, 0.4);
  transform: translateZ(0);
  animation: load8 1.1s infinite linear;
}

@keyframes load8 {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes slidein {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}
`;o5e(a5e);function l5e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function ZY(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function eX(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZY(Object(t),!0).forEach(function(r){c5e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZY(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hf(){Hf=function(){return e};var n,e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(U,R,z){U[R]=z.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(U,R,z){return Object.defineProperty(U,R,{value:z,enumerable:!0,configurable:!0,writable:!0}),U[R]}try{u({},"")}catch{u=function(R,z,W){return R[z]=W}}function d(U,R,z,W){var se=R&&R.prototype instanceof _?R:_,ne=Object.create(se.prototype),te=new ee(W||[]);return i(ne,"_invoke",{value:q(U,z,te)}),ne}function h(U,R,z){try{return{type:"normal",arg:U.call(R,z)}}catch(W){return{type:"throw",arg:W}}}e.wrap=d;var f="suspendedStart",p="suspendedYield",x="executing",y="completed",b={};function _(){}function C(){}function k(){}var T={};u(T,o,function(){return this});var E=Object.getPrototypeOf,N=E&&E(E(Y([])));N&&N!==t&&r.call(N,o)&&(T=N);var P=k.prototype=_.prototype=Object.create(T);function M(U){["next","throw","return"].forEach(function(R){u(U,R,function(z){return this._invoke(R,z)})})}function O(U,R){function z(se,ne,te,H){var ce=h(U[se],U,ne);if(ce.type!=="throw"){var pe=ce.arg,oe=pe.value;return oe&&typeof oe=="object"&&r.call(oe,"__await")?R.resolve(oe.__await).then(function(ve){z("next",ve,te,H)},function(ve){z("throw",ve,te,H)}):R.resolve(oe).then(function(ve){pe.value=ve,te(pe)},function(ve){return z("throw",ve,te,H)})}H(ce.arg)}var W;i(this,"_invoke",{value:function(se,ne){function te(){return new R(function(H,ce){z(se,ne,H,ce)})}return W=W?W.then(te,te):te()}})}function q(U,R,z){var W=f;return function(se,ne){if(W===x)throw new Error("Generator is already running");if(W===y){if(se==="throw")throw ne;return{value:n,done:!0}}for(z.method=se,z.arg=ne;;){var te=z.delegate;if(te){var H=D(te,z);if(H){if(H===b)continue;return H}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(W===f)throw W=y,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);W=x;var ce=h(U,R,z);if(ce.type==="normal"){if(W=z.done?y:p,ce.arg===b)continue;return{value:ce.arg,done:z.done}}ce.type==="throw"&&(W=y,z.method="throw",z.arg=ce.arg)}}}function D(U,R){var z=R.method,W=U.iterator[z];if(W===n)return R.delegate=null,z==="throw"&&U.iterator.return&&(R.method="return",R.arg=n,D(U,R),R.method==="throw")||z!=="return"&&(R.method="throw",R.arg=new TypeError("The iterator does not provide a '"+z+"' method")),b;var se=h(W,U.iterator,R.arg);if(se.type==="throw")return R.method="throw",R.arg=se.arg,R.delegate=null,b;var ne=se.arg;return ne?ne.done?(R[U.resultName]=ne.value,R.next=U.nextLoc,R.method!=="return"&&(R.method="next",R.arg=n),R.delegate=null,b):ne:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,b)}function F(U){var R={tryLoc:U[0]};1 in U&&(R.catchLoc=U[1]),2 in U&&(R.finallyLoc=U[2],R.afterLoc=U[3]),this.tryEntries.push(R)}function K(U){var R=U.completion||{};R.type="normal",delete R.arg,U.completion=R}function ee(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(F,this),this.reset(!0)}function Y(U){if(U||U===""){var R=U[o];if(R)return R.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var z=-1,W=function se(){for(;++z<U.length;)if(r.call(U,z))return se.value=U[z],se.done=!1,se;return se.value=n,se.done=!0,se};return W.next=W}}throw new TypeError(typeof U+" is not iterable")}return C.prototype=k,i(P,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:C,configurable:!0}),C.displayName=u(k,c,"GeneratorFunction"),e.isGeneratorFunction=function(U){var R=typeof U=="function"&&U.constructor;return!!R&&(R===C||(R.displayName||R.name)==="GeneratorFunction")},e.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,k):(U.__proto__=k,u(U,c,"GeneratorFunction")),U.prototype=Object.create(P),U},e.awrap=function(U){return{__await:U}},M(O.prototype),u(O.prototype,a,function(){return this}),e.AsyncIterator=O,e.async=function(U,R,z,W,se){se===void 0&&(se=Promise);var ne=new O(d(U,R,z,W),se);return e.isGeneratorFunction(R)?ne:ne.next().then(function(te){return te.done?te.value:ne.next()})},M(P),u(P,c,"Generator"),u(P,o,function(){return this}),u(P,"toString",function(){return"[object Generator]"}),e.keys=function(U){var R=Object(U),z=[];for(var W in R)z.push(W);return z.reverse(),function se(){for(;z.length;){var ne=z.pop();if(ne in R)return se.value=ne,se.done=!1,se}return se.done=!0,se}},e.values=Y,ee.prototype={constructor:ee,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(K),!U)for(var R in this)R.charAt(0)==="t"&&r.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=n)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var R=this;function z(ce,pe){return ne.type="throw",ne.arg=U,R.next=ce,pe&&(R.method="next",R.arg=n),!!pe}for(var W=this.tryEntries.length-1;W>=0;--W){var se=this.tryEntries[W],ne=se.completion;if(se.tryLoc==="root")return z("end");if(se.tryLoc<=this.prev){var te=r.call(se,"catchLoc"),H=r.call(se,"finallyLoc");if(te&&H){if(this.prev<se.catchLoc)return z(se.catchLoc,!0);if(this.prev<se.finallyLoc)return z(se.finallyLoc)}else if(te){if(this.prev<se.catchLoc)return z(se.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return z(se.finallyLoc)}}}},abrupt:function(U,R){for(var z=this.tryEntries.length-1;z>=0;--z){var W=this.tryEntries[z];if(W.tryLoc<=this.prev&&r.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var se=W;break}}se&&(U==="break"||U==="continue")&&se.tryLoc<=R&&R<=se.finallyLoc&&(se=null);var ne=se?se.completion:{};return ne.type=U,ne.arg=R,se?(this.method="next",this.next=se.finallyLoc,b):this.complete(ne)},complete:function(U,R){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&R&&(this.next=R),b},finish:function(U){for(var R=this.tryEntries.length-1;R>=0;--R){var z=this.tryEntries[R];if(z.finallyLoc===U)return this.complete(z.completion,z.afterLoc),K(z),b}},catch:function(U){for(var R=this.tryEntries.length-1;R>=0;--R){var z=this.tryEntries[R];if(z.tryLoc===U){var W=z.completion;if(W.type==="throw"){var se=W.arg;K(z)}return se}}throw new Error("illegal catch attempt")},delegateYield:function(U,R,z){return this.delegate={iterator:Y(U),resultName:R,nextLoc:z},this.method==="next"&&(this.arg=n),b}},e}function tX(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(u){t(u);return}a.done?e(c):Promise.resolve(c).then(r,i)}function AI(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){tX(s,r,i,o,a,"next",c)}function a(c){tX(s,r,i,o,a,"throw",c)}o(void 0)})}}function c5e(n,e,t){return e=y5e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u5e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function d5e(n,e){if(n==null)return{};var t=u5e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function sh(n,e){return f5e(n)||l5e(n,e)||pfe(n,e)||g5e()}function mfe(n){return h5e(n)||m5e(n)||pfe(n)||p5e()}function h5e(n){if(Array.isArray(n))return HB(n)}function f5e(n){if(Array.isArray(n))return n}function m5e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pfe(n,e){if(n){if(typeof n=="string")return HB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return HB(n,e)}}function HB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function p5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v5e(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function y5e(n){var e=v5e(n,"string");return typeof e=="symbol"?e:String(e)}var x5e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function gfe(n){var e=b5e(n);return e&&(e=mfe(new Set(e)),e.forEach(function(t){n=vfe(n,t,yfe("",t))})),n}function vfe(n,e,t){return n.replace(new RegExp(e,"g"),t)}function b5e(n){return n.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g)}function w5e(n){var e,t=document.querySelector("em-emoji-picker");if(!t)return nX(n.native);var r=t==null||(e=t.shadowRoot)===null||e===void 0?void 0:e.querySelector('[title="'.concat(n.name,'"] > span > span'));if(!r)return nX(n.native);var i=vfe(r.style.cssText,'"',"'");return yfe(i,n.native)}function yfe(n,e){return'<img style="'.concat(n,'; display: inline-block" data-emoji="').concat(e,'" src="').concat(x5e,'" />')}function nX(n){return'<span class="width: 18px; height: 18px; display: inline-block; margin: 0 1px;">'.concat(n,"</span>")}function mP(n){var e=document.createElement("div");e.innerHTML=n;var t=Array.prototype.slice.call(e.querySelectorAll("img"));return t.forEach(function(r){e.innerHTML=e.innerHTML.replace(r.outerHTML,r.dataset.emoji)}),e.innerHTML}function _5e(n){var e=window.getSelection();if(e!==null){for(var t=document.createElement("div"),r=0,i=e.rangeCount;r<i;++r)t.appendChild(e.getRangeAt(r).cloneContents());t=C5e(t),n.clipboardData.setData("text",t.innerText),n.preventDefault()}}var WB;function S5e(){var n=window.getSelection();if(!(!n.rangeCount||(n==null?void 0:n.anchorNode.className)!=="react-input-emoji--input"&&n.anchorNode.parentNode.className!=="react-input-emoji--input")){var e=n.getRangeAt(0);WB=e.cloneRange()}}function k5e(n){var e,t;if(window.getSelection){if(e=window.getSelection(),e===null)return;if(e.getRangeAt&&e.rangeCount){var r;t=(r=WB)!==null&&r!==void 0?r:e.getRangeAt(0),t.deleteContents();var i=document.createElement("div");i.innerHTML=n;for(var s=document.createDocumentFragment(),o,a;o=i.firstChild;)a=s.appendChild(o);t.insertNode(s),a&&(t=t.cloneRange(),WB=t,t.setStartAfter(a),t.collapse(!0),e.removeAllRanges(),e.addRange(t))}}}function C5e(n){var e=Array.prototype.slice.call(n.querySelectorAll("img"));return e.forEach(function(t){t.outerHTML=t.dataset.emoji}),n}function rX(n){var e=n.text,t=n.html,r=e.length,i=(t.match(/<img/g)||[]).length;return r+i}function E5e(n){var e=n.innerHTML.replaceAll(/<br\s*\/?>/gi,"[BR]"),t=document.createElement("div");t.innerHTML=e;var r=t.innerText,i=r.replaceAll(/\[BR\]/gi,"</br>");return i}function T5e(n){var e=n.startContainer,t=n.startOffset;if(e.nodeType!==Node.TEXT_NODE){for(;e.nodeType!==Node.TEXT_NODE&&(e=e.nextSibling,!!e););if(!e)for(e=n.commonAncestorContainer;e.nodeType!==Node.TEXT_NODE;)e=e.firstChild;t=0}return{node:e,offset:t}}function A5e(){var n=window.getSelection(),e=n.getRangeAt(0),t=T5e(e);return{selection:n,range:e,selectionStart:t}}function N5e(){var n=A5e(),e=n.selection,t=n.range,r=n.selectionStart;if(e.isCollapsed&&r.offset===r.node.textContent.length){var i=document.createElement("br");t.insertNode(i),t.setStartAfter(i),t.setEndAfter(i),e.removeAllRanges(),e.addRange(t);var s=document.createElement("br");t.insertNode(s),t.setStartAfter(s),t.setEndAfter(s),e.removeAllRanges(),e.addRange(t)}else{var o=document.createElement("br");t.insertNode(o),t.setStartAfter(o),t.setEndAfter(o),e.removeAllRanges(),e.addRange(t),r.node.nextSibling&&r.node.nextSibling.nodeType===Node.TEXT_NODE&&(t.setStart(r.node.nextSibling,1),t.setEnd(r.node.nextSibling,1)),e.removeAllRanges(),e.addRange(t)}}function iX(n,e,t,r){if(typeof n!="string")throw new Error("First param must be a string");if(typeof e!="string"&&!(e instanceof RegExp))throw new Error("Second param must be a string pattern or a regular expression");var i=typeof e=="string"?j5e:P5e;return i(n,e,t,r)}function j5e(n,e,t,r){var i=n.indexOf(e);if(i>=0){var s=[],o=i+e.length;return i>0&&s.push(n.substring(0,i)),s.push(typeof t=="function"?t(n.substring(i,o),i+r,n):t),o<n.length&&s.push(n.substring(o)),s}else return[n]}function P5e(n,e,t,r){var i=[],s=typeof t=="function",o=e.lastIndex;e.lastIndex=0;for(var a,c=0;a=e.exec(n);){var u=a.index;a[0]===""&&e.lastIndex++,u!==c&&i.push(n.substring(c,u));var d=a[0];c=u+d.length;var h=s?t.apply(this,a.concat(u+r,a.input)):t;if(i.push(h),!e.global)break}return c<n.length&&i.push(n.substring(c)),e.lastIndex=o,i}var I5e=function(e,t,r){if(typeof e=="string")return iX(e,t,r,0);if(!Array.isArray(e)||!e[0])throw new TypeError("First argument must be an array or non-empty string");for(var i=e.length,s=[],o=0,a=0;a<i;++a){var c=e[a];typeof c=="string"?(s.push.apply(s,iX(c,t,r,o)),o+=c.length):s.push(c)}return s},O5e=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;function R5e(n,e){for(var t=[],r=0,i=0,s=0;s<n.length;)r=n.charCodeAt(s++),i?(t.push((65536+(i-55296<<10)+(r-56320)).toString(16)),i=0):55296<=r&&r<=56319?i=r:t.push(r.toString(16));return t.join("-")}var M5e=/\uFE0F/g,D5e="‍";function L5e(n){return R5e(n.indexOf(D5e)<0?n.replace(M5e,""):n)}var F5e=function(e,t){return I5e(e,O5e,function(i,s,o){var a=L5e(i);return t(a,i,o)})},B5e=re.createElement,$5e=typeof location>"u"?"":location.protocol==="https:"?"https:":"http:",V5e={height:"1em",width:"1em",margin:"0 .05em 0 .1em",verticalAlign:"-0.1em"};function U5e(n){return n&&n.length>0&&n.charAt(n.length-1)!==":"?n+":":n}var z5e=function(e){return e=sX({protocol:$5e,baseUrl:"//cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/",size:"72x72",ext:".png",props:null},e),function(r,i,s){var o="";return e.baseUrl.indexOf("http")!==0&&(o+=U5e(e.protocol)),o+=e.baseUrl+e.size+"/"+r+e.ext,B5e("img",sX({key:s,alt:i,draggable:!1,src:o,style:V5e},e.props))}};function sX(){for(var n={},e=arguments.length,t=0;t<e;++t){var r=arguments[t];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n}var H5e=F5e,W5e=z5e,q5e=function(e,t){var r=typeof t=="function"?t:W5e(t);return H5e(e,r)},G5e=q5e,K5e=new RegExp(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g);function xfe(n,e){var t=S.useRef([]),r=S.useRef(""),i=S.useCallback(function(o){t.current.push(o)},[]),s=S.useCallback(function(o){var a=t.current.reduce(function(c,u){return u(c)},o);return a=Y5e(a,n),e&&(a=X5e(a)),r.current=a,a},[n,e]);return{addSanitizeFn:i,sanitize:s,sanitizedTextRef:r}}function Y5e(n,e){var t=document.createElement("div");t.innerHTML=n;var r;return e?r=E5e(t):r=t.innerText||"",r=r.replace(/\n/gi,""),r}function X5e(n){return n=J5e(n),n=s5e.renderToString(G5e(n)),n=n.replace(new RegExp("&lt;span class=&quot;message-emoji&quot;&gt;","g"),'<span class="message-emoji">'),n=n.replace(new RegExp("&lt;/span&gt;","g"),"</span>"),n}function J5e(n){return n.replace(K5e,'<span class="message-emoji">$&</span>')}function Q5e(n){var e=n.ref,t=n.textInputRef,r=n.setValue,i=n.emitChange,s=n.shouldConvertEmojiToImage,o=xfe(!1,s),a=o.sanitize,c=o.sanitizedTextRef;S.useImperativeHandle(e,function(){return{get value(){return c.current},set value(u){r(u)},focus:function(){t.current!==null&&t.current.focus()},blur:function(){t.current!==null&&a(t.current.html),i()}}})}function Z5e(n,e,t){var r=S.useRef(null),i=S.useRef(t),s=S.useCallback(function(){if(n.current!==null){var a=r.current,c=n.current.size;(!a||a.width!==c.width||a.height!==c.height)&&typeof e=="function"&&e(c),r.current=c}},[e,n]),o=S.useCallback(function(a){typeof i.current=="function"&&i.current(a),typeof e=="function"&&s()},[s,e]);return S.useEffect(function(){n.current&&s()},[s,n]),o}var eLe=["placeholder","style","tabIndex","className","onChange"],tLe=function(e,t){var r=e.placeholder,i=e.style,s=e.tabIndex,o=e.className,a=e.onChange,c=d5e(e,eLe);S.useImperativeHandle(t,function(){return{appendContent:function(_){f.current&&f.current.focus(),k5e(_),f.current&&f.current.focus(),f.current&&h.current&&mP(f.current.innerHTML)===""?h.current.style.visibility="visible":h.current&&(h.current.style.visibility="hidden"),f.current&&typeof a=="function"&&a(f.current.innerHTML)},set html(b){if(f.current&&(f.current.innerHTML=b),h.current){var _=mP(b);_===""?h.current.style.visibility="visible":h.current.style.visibility="hidden"}typeof a=="function"&&f.current&&a(f.current.innerHTML)},get html(){return f.current?f.current.innerHTML:""},get text(){return f.current?f.current.innerText:""},get size(){return f.current?{width:f.current.offsetWidth,height:f.current.offsetHeight}:{width:0,height:0}},focus:function(){f.current&&f.current.focus()}}});var u=S.useMemo(function(){var b={};return i.placeholderColor&&(b.color=i.placeholderColor),b},[i==null?void 0:i.placeholderColor]),d=S.useMemo(function(){var b={};return i.color&&(b.color=i.color),b},[i==null?void 0:i.color]),h=S.useRef(null),f=S.useRef(null);function p(b){if(b.key==="Enter"&&(b.shiftKey===!0||b.ctrlKey===!0)&&c.shouldReturn&&(b.preventDefault(),f.current)){N5e();return}b.key==="Enter"?c.onEnter(b):b.key==="ArrowUp"?c.onArrowUp(b):b.key==="ArrowDown"?c.onArrowDown(b):b.key.length===1&&h.current&&(h.current.style.visibility="hidden"),c.onKeyDown(b)}function x(){c.onFocus()}function y(b){c.onKeyUp(b);var _=f.current;if(h.current&&_){var C=mP(_.innerHTML);C===""?h.current.style.visibility="visible":h.current.style.visibility="hidden"}typeof a=="function"&&f.current&&a(f.current.innerHTML)}return re.createElement("div",{className:"react-input-emoji--container",style:i},re.createElement("div",{className:"react-input-emoji--wrapper",onClick:x},re.createElement("div",{ref:h,className:"react-input-emoji--placeholder",style:u},r),re.createElement("div",{ref:f,onKeyDown:p,onKeyUp:y,tabIndex:s,contentEditable:!0,className:"react-input-emoji--input".concat(o?" ".concat(o):""),onBlur:c.onBlur,onCopy:c.onCopy,onPaste:c.onPaste,"data-testid":"react-input-emoji--input",style:d})))},nLe=S.forwardRef(tLe);function oX(n){var e=n.showPicker,t=n.toggleShowPicker,r=n.buttonElement,i=n.buttonRef,s=S.useRef(null),o=S.useState(!1),a=sh(o,2),c=a[0],u=a[1];return S.useEffect(function(){var d,h,f,p;((d=i==null||(h=i.current)===null||h===void 0||(h=h.childNodes)===null||h===void 0?void 0:h.length)!==null&&d!==void 0?d:0)>2?(s.current.appendChild(i.current.childNodes[0]),u(!0)):((f=r==null||(p=r.childNodes)===null||p===void 0?void 0:p.length)!==null&&f!==void 0?f:0)>2&&(s.current.appendChild(r==null?void 0:r.childNodes[0]),u(!0))},[r==null?void 0:r.childNodes]),re.createElement("button",{ref:s,type:"button",className:"react-input-emoji--button".concat(e?" react-input-emoji--button__show":""),onClick:t},!c&&re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",className:"react-input-emoji--button--icon"},re.createElement("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"}),re.createElement("path",{d:"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0"})))}function bfe(n){return n&&n.__esModule?n.default:n}function ac(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var kM,Gt,wfe,kC,_fe,aX,NI={},Sfe=[],rLe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function wg(n,e){for(var t in e)n[t]=e[t];return n}function kfe(n){var e=n.parentNode;e&&e.removeChild(n)}function qB(n,e,t){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?kM.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]===void 0&&(o[s]=n.defaultProps[s]);return pP(n,o,r,i,null)}function pP(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++wfe};return i==null&&Gt.vnode!=null&&Gt.vnode(s),s}function Hh(){return{current:null}}function v_(n){return n.children}function oh(n,e){this.props=n,this.context=e}function y_(n,e){if(e==null)return n.__?y_(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?y_(n):null}function Cfe(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Cfe(n)}}function lX(n){(!n.__d&&(n.__d=!0)&&kC.push(n)&&!jI.__r++||aX!==Gt.debounceRendering)&&((aX=Gt.debounceRendering)||_fe)(jI)}function jI(){for(var n;jI.__r=kC.length;)n=kC.sort(function(e,t){return e.__v.__b-t.__v.__b}),kC=[],n.some(function(e){var t,r,i,s,o,a;e.__d&&(o=(s=(t=e).__v).__e,(a=t.__P)&&(r=[],(i=wg({},s)).__v=s.__v+1,qU(a,s,i,t.__n,a.ownerSVGElement!==void 0,s.__h!=null?[o]:null,r,o??y_(s),s.__h),Nfe(r,s),s.__e!=o&&Cfe(s)))})}function Efe(n,e,t,r,i,s,o,a,c,u){var d,h,f,p,x,y,b,_=r&&r.__k||Sfe,C=_.length;for(t.__k=[],d=0;d<e.length;d++)if((p=t.__k[d]=(p=e[d])==null||typeof p=="boolean"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?pP(null,p,null,null,p):Array.isArray(p)?pP(v_,{children:p},null,null,null):p.__b>0?pP(p.type,p.props,p.key,null,p.__v):p)!=null){if(p.__=t,p.__b=t.__b+1,(f=_[d])===null||f&&p.key==f.key&&p.type===f.type)_[d]=void 0;else for(h=0;h<C;h++){if((f=_[h])&&p.key==f.key&&p.type===f.type){_[h]=void 0;break}f=null}qU(n,p,f=f||NI,i,s,o,a,c,u),x=p.__e,(h=p.ref)&&f.ref!=h&&(b||(b=[]),f.ref&&b.push(f.ref,null,p),b.push(h,p.__c||x,p)),x!=null?(y==null&&(y=x),typeof p.type=="function"&&p.__k===f.__k?p.__d=c=Tfe(p,c,n):c=Afe(n,p,f,_,x,c),typeof t.type=="function"&&(t.__d=c)):c&&f.__e==c&&c.parentNode!=n&&(c=y_(f))}for(t.__e=y,d=C;d--;)_[d]!=null&&(typeof t.type=="function"&&_[d].__e!=null&&_[d].__e==t.__d&&(t.__d=y_(r,d+1)),Pfe(_[d],_[d]));if(b)for(d=0;d<b.length;d++)jfe(b[d],b[++d],b[++d])}function Tfe(n,e,t){for(var r,i=n.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=n,e=typeof r.type=="function"?Tfe(r,e,t):Afe(t,r,r,i,r.__e,e));return e}function PI(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){PI(t,e)}):e.push(n)),e}function Afe(n,e,t,r,i,s){var o,a,c;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==n)n.appendChild(i),o=null;else{for(a=s,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==i)break e;n.insertBefore(i,s),o=s}return o!==void 0?o:i.nextSibling}function iLe(n,e,t,r,i){var s;for(s in t)s==="children"||s==="key"||s in e||II(n,s,null,t[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===e[s]||II(n,s,e[s],t[s],r)}function cX(n,e,t){e[0]==="-"?n.setProperty(e,t):n[e]=t==null?"":typeof t!="number"||rLe.test(e)?t:t+"px"}function II(n,e,t,r,i){var s;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||cX(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||cX(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r||n.addEventListener(e,s?dX:uX,s):n.removeEventListener(e,s?dX:uX,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t!=null&&(t!==!1||e[0]==="a"&&e[1]==="r")?n.setAttribute(e,t):n.removeAttribute(e))}}function uX(n){this.l[n.type+!1](Gt.event?Gt.event(n):n)}function dX(n){this.l[n.type+!0](Gt.event?Gt.event(n):n)}function qU(n,e,t,r,i,s,o,a,c){var u,d,h,f,p,x,y,b,_,C,k,T=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(c=t.__h,a=e.__e=t.__e,e.__h=null,s=[a]),(u=Gt.__b)&&u(e);try{e:if(typeof T=="function"){if(b=e.props,_=(u=T.contextType)&&r[u.__c],C=u?_?_.props.value:u.__:r,t.__c?y=(d=e.__c=t.__c).__=d.__E:("prototype"in T&&T.prototype.render?e.__c=d=new T(b,C):(e.__c=d=new oh(b,C),d.constructor=T,d.render=oLe),_&&_.sub(d),d.props=b,d.state||(d.state={}),d.context=C,d.__n=r,h=d.__d=!0,d.__h=[]),d.__s==null&&(d.__s=d.state),T.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=wg({},d.__s)),wg(d.__s,T.getDerivedStateFromProps(b,d.__s))),f=d.props,p=d.state,h)T.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(T.getDerivedStateFromProps==null&&b!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,C),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,C)===!1||e.__v===t.__v){d.props=b,d.state=d.__s,e.__v!==t.__v&&(d.__d=!1),d.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(E){E&&(E.__=e)}),d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,C),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,x)})}d.context=C,d.props=b,d.state=d.__s,(u=Gt.__r)&&u(e),d.__d=!1,d.__v=e,d.__P=n,u=d.render(d.props,d.state,d.context),d.state=d.__s,d.getChildContext!=null&&(r=wg(wg({},r),d.getChildContext())),h||d.getSnapshotBeforeUpdate==null||(x=d.getSnapshotBeforeUpdate(f,p)),k=u!=null&&u.type===v_&&u.key==null?u.props.children:u,Efe(n,Array.isArray(k)?k:[k],e,t,r,i,s,o,a,c),d.base=e.__e,e.__h=null,d.__h.length&&o.push(d),y&&(d.__E=d.__=null),d.__e=!1}else s==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=sLe(t.__e,e,t,r,i,s,o,c);(u=Gt.diffed)&&u(e)}catch(E){e.__v=null,(c||s!=null)&&(e.__e=a,e.__h=!!c,s[s.indexOf(a)]=null),Gt.__e(E,e,t)}}function Nfe(n,e){Gt.__c&&Gt.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(r){r.call(t)})}catch(r){Gt.__e(r,t.__v)}})}function sLe(n,e,t,r,i,s,o,a){var c,u,d,h=t.props,f=e.props,p=e.type,x=0;if(p==="svg"&&(i=!0),s!=null){for(;x<s.length;x++)if((c=s[x])&&"setAttribute"in c==!!p&&(p?c.localName===p:c.nodeType===3)){n=c,s[x]=null;break}}if(n==null){if(p===null)return document.createTextNode(f);n=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,f.is&&f),s=null,a=!1}if(p===null)h===f||a&&n.data===f||(n.data=f);else{if(s=s&&kM.call(n.childNodes),u=(h=t.props||NI).dangerouslySetInnerHTML,d=f.dangerouslySetInnerHTML,!a){if(s!=null)for(h={},x=0;x<n.attributes.length;x++)h[n.attributes[x].name]=n.attributes[x].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===n.innerHTML)||(n.innerHTML=d&&d.__html||""))}if(iLe(n,f,h,i,a),d)e.__k=[];else if(x=e.props.children,Efe(n,Array.isArray(x)?x:[x],e,t,r,i&&p!=="foreignObject",s,o,s?s[0]:t.__k&&y_(t,0),a),s!=null)for(x=s.length;x--;)s[x]!=null&&kfe(s[x]);a||("value"in f&&(x=f.value)!==void 0&&(x!==h.value||x!==n.value||p==="progress"&&!x)&&II(n,"value",x,h.value,!1),"checked"in f&&(x=f.checked)!==void 0&&x!==n.checked&&II(n,"checked",x,h.checked,!1))}return n}function jfe(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){Gt.__e(r,t)}}function Pfe(n,e,t){var r,i;if(Gt.unmount&&Gt.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||jfe(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Gt.__e(s,e)}r.base=r.__P=null}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&Pfe(r[i],e,typeof n.type!="function");t||n.__e==null||kfe(n.__e),n.__e=n.__d=void 0}function oLe(n,e,t){return this.constructor(n,t)}function Ife(n,e,t){var r,i,s;Gt.__&&Gt.__(n,e),i=(r=!1)?null:e.__k,s=[],qU(e,n=e.__k=qB(v_,null,[n]),i||NI,NI,e.ownerSVGElement!==void 0,i?null:e.firstChild?kM.call(e.childNodes):null,s,i?i.__e:e.firstChild,r),Nfe(s,n)}kM=Sfe.slice,Gt={__e:function(n,e){for(var t,r,i;e=e.__;)if((t=e.__c)&&!t.__)try{if((r=t.constructor)&&r.getDerivedStateFromError!=null&&(t.setState(r.getDerivedStateFromError(n)),i=t.__d),t.componentDidCatch!=null&&(t.componentDidCatch(n),i=t.__d),i)return t.__E=t}catch(s){n=s}throw n}},wfe=0,oh.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=wg({},this.state),typeof n=="function"&&(n=n(wg({},t),this.props)),n&&wg(t,n),n!=null&&this.__v&&(e&&this.__h.push(e),lX(this))},oh.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),lX(this))},oh.prototype.render=v_,kC=[],_fe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,jI.__r=0;var aLe=0;function Ke(n,e,t,r,i){var s,o,a={};for(o in e)o=="ref"?s=e[o]:a[o]=e[o];var c={type:n,props:a,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--aLe,__source:r,__self:i};if(typeof n=="function"&&(s=n.defaultProps))for(o in s)a[o]===void 0&&(a[o]=s[o]);return Gt.vnode&&Gt.vnode(c),c}function lLe(n,e){try{window.localStorage[`emoji-mart.${n}`]=JSON.stringify(e)}catch{}}function cLe(n){try{const e=window.localStorage[`emoji-mart.${n}`];if(e)return JSON.parse(e)}catch{}}var Ag={set:lLe,get:cLe};const s5=new Map,uLe=[{v:15,emoji:"🫨"},{v:14,emoji:"🫠"},{v:13.1,emoji:"😶‍🌫️"},{v:13,emoji:"🥸"},{v:12.1,emoji:"🧑‍🦰"},{v:12,emoji:"🥱"},{v:11,emoji:"🥰"},{v:5,emoji:"🤩"},{v:4,emoji:"👱‍♀️"},{v:3,emoji:"🤣"},{v:2,emoji:"👋🏻"},{v:1,emoji:"🙃"}];function dLe(){for(const{v:n,emoji:e}of uLe)if(Ofe(e))return n}function hLe(){return!Ofe("🇨🇦")}function Ofe(n){if(s5.has(n))return s5.get(n);const e=fLe(n);return s5.set(n,e),e}const fLe=(()=>{let n=null;try{navigator.userAgent.includes("jsdom")||(n=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}))}catch{}if(!n)return()=>!1;const e=25,t=20,r=Math.floor(e/2);return n.font=r+"px Arial, Sans-Serif",n.textBaseline="top",n.canvas.width=t*2,n.canvas.height=e,i=>{n.clearRect(0,0,t*2,e),n.fillStyle="#FF0000",n.fillText(i,0,22),n.fillStyle="#0000FF",n.fillText(i,t,22);const s=n.getImageData(0,0,t,e).data,o=s.length;let a=0;for(;a<o&&!s[a+3];a+=4);if(a>=o)return!1;const c=t+a/4%t,u=Math.floor(a/4/t),d=n.getImageData(c,u,1,1).data;return!(s[a]!==d[0]||s[a+2]!==d[2]||n.measureText(i).width>=t)}})();var hX={latestVersion:dLe,noCountryFlags:hLe};const GB=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","scream","disappointed","unamused","weary","sob","sunglasses","heart"];let zs=null;function mLe(n){zs||(zs=Ag.get("frequently")||{});const e=n.id||n;e&&(zs[e]||(zs[e]=0),zs[e]+=1,Ag.set("last",e),Ag.set("frequently",zs))}function pLe({maxFrequentRows:n,perLine:e}){if(!n)return[];zs||(zs=Ag.get("frequently"));let t=[];if(!zs){zs={};for(let s in GB.slice(0,e)){const o=GB[s];zs[o]=e-s,t.push(o)}return t}const r=n*e,i=Ag.get("last");for(let s in zs)t.push(s);if(t.sort((s,o)=>{const a=zs[o],c=zs[s];return a==c?s.localeCompare(o):a-c}),t.length>r){const s=t.slice(r);t=t.slice(0,r);for(let o of s)o!=i&&delete zs[o];i&&t.indexOf(i)==-1&&(delete zs[t[t.length-1]],t.splice(-1,1,i)),Ag.set("frequently",zs)}return t}var Rfe={add:mLe,get:pLe,DEFAULTS:GB},Mfe={};Mfe=JSON.parse('{"search":"Search","search_no_results_1":"Oh no!","search_no_results_2":"That emoji couldn’t be found","pick":"Pick an emoji…","add_custom":"Add custom emoji","categories":{"activity":"Activity","custom":"Custom","flags":"Flags","foods":"Food & Drink","frequent":"Frequently used","nature":"Animals & Nature","objects":"Objects","people":"Smileys & People","places":"Travel & Places","search":"Search Results","symbols":"Symbols"},"skins":{"1":"Default","2":"Light","3":"Medium-Light","4":"Medium","5":"Medium-Dark","6":"Dark","choose":"Choose default skin tone"}}');var Bf={autoFocus:{value:!1},dynamicWidth:{value:!1},emojiButtonColors:{value:null},emojiButtonRadius:{value:"100%"},emojiButtonSize:{value:36},emojiSize:{value:24},emojiVersion:{value:15,choices:[1,2,3,4,5,11,12,12.1,13,13.1,14,15]},exceptEmojis:{value:[]},icons:{value:"auto",choices:["auto","outline","solid"]},locale:{value:"en",choices:["en","ar","be","cs","de","es","fa","fi","fr","hi","it","ja","ko","nl","pl","pt","ru","sa","tr","uk","vi","zh"]},maxFrequentRows:{value:4},navPosition:{value:"top",choices:["top","bottom","none"]},noCountryFlags:{value:!1},noResultsEmoji:{value:null},perLine:{value:9},previewEmoji:{value:null},previewPosition:{value:"bottom",choices:["top","bottom","none"]},searchPosition:{value:"sticky",choices:["sticky","static","none"]},set:{value:"native",choices:["native","apple","facebook","google","twitter"]},skin:{value:1,choices:[1,2,3,4,5,6]},skinTonePosition:{value:"preview",choices:["preview","search","none"]},theme:{value:"auto",choices:["auto","light","dark"]},categories:null,categoryIcons:null,custom:null,data:null,i18n:null,getImageURL:null,getSpritesheetURL:null,onAddCustomEmoji:null,onClickOutside:null,onEmojiSelect:null,stickySearch:{deprecated:!0,value:!0}};let co=null,Tn=null;const o5={};async function fX(n){if(o5[n])return o5[n];const t=await(await fetch(n)).json();return o5[n]=t,t}let a5=null,Dfe=null,Lfe=!1;function CM(n,{caller:e}={}){return a5||(a5=new Promise(t=>{Dfe=t})),n?gLe(n):e&&!Lfe&&console.warn(`\`${e}\` requires data to be initialized first. Promise will be pending until \`init\` is called.`),a5}async function gLe(n){Lfe=!0;let{emojiVersion:e,set:t,locale:r}=n;if(e||(e=Bf.emojiVersion.value),t||(t=Bf.set.value),r||(r=Bf.locale.value),Tn)Tn.categories=Tn.categories.filter(c=>!c.name);else{Tn=(typeof n.data=="function"?await n.data():n.data)||await fX(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/sets/${e}/${t}.json`),Tn.emoticons={},Tn.natives={},Tn.categories.unshift({id:"frequent",emojis:[]});for(const c in Tn.aliases){const u=Tn.aliases[c],d=Tn.emojis[u];d&&(d.aliases||(d.aliases=[]),d.aliases.push(c))}Tn.originalCategories=Tn.categories}if(co=(typeof n.i18n=="function"?await n.i18n():n.i18n)||(r=="en"?bfe(Mfe):await fX(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/i18n/${r}.json`)),n.custom)for(let c in n.custom){c=parseInt(c);const u=n.custom[c],d=n.custom[c-1];if(!(!u.emojis||!u.emojis.length)){u.id||(u.id=`custom_${c+1}`),u.name||(u.name=co.categories.custom),d&&!u.icon&&(u.target=d.target||d),Tn.categories.push(u);for(const h of u.emojis)Tn.emojis[h.id]=h}}n.categories&&(Tn.categories=Tn.originalCategories.filter(c=>n.categories.indexOf(c.id)!=-1).sort((c,u)=>{const d=n.categories.indexOf(c.id),h=n.categories.indexOf(u.id);return d-h}));let i=null,s=null;t=="native"&&(i=hX.latestVersion(),s=n.noCountryFlags||hX.noCountryFlags());let o=Tn.categories.length,a=!1;for(;o--;){const c=Tn.categories[o];if(c.id=="frequent"){let{maxFrequentRows:h,perLine:f}=n;h=h>=0?h:Bf.maxFrequentRows.value,f||(f=Bf.perLine.value),c.emojis=Rfe.get({maxFrequentRows:h,perLine:f})}if(!c.emojis||!c.emojis.length){Tn.categories.splice(o,1);continue}const{categoryIcons:u}=n;if(u){const h=u[c.id];h&&!c.icon&&(c.icon=h)}let d=c.emojis.length;for(;d--;){const h=c.emojis[d],f=h.id?h:Tn.emojis[h],p=()=>{c.emojis.splice(d,1)};if(!f||n.exceptEmojis&&n.exceptEmojis.includes(f.id)){p();continue}if(i&&f.version>i){p();continue}if(s&&c.id=="flags"&&!wLe.includes(f.id)){p();continue}if(!f.search){if(a=!0,f.search=","+[[f.id,!1],[f.name,!0],[f.keywords,!1],[f.emoticons,!1]].map(([y,b])=>{if(y)return(Array.isArray(y)?y:[y]).map(_=>(b?_.split(/[-|_|\s]+/):[_]).map(C=>C.toLowerCase())).flat()}).flat().filter(y=>y&&y.trim()).join(","),f.emoticons)for(const y of f.emoticons)Tn.emoticons[y]||(Tn.emoticons[y]=f.id);let x=0;for(const y of f.skins){if(!y)continue;x++;const{native:b}=y;b&&(Tn.natives[b]=f.id,f.search+=`,${b}`);const _=x==1?"":`:skin-tone-${x}:`;y.shortcodes=`:${f.id}:${_}`}}}}a&&fw.reset(),Dfe()}function Ffe(n,e,t){n||(n={});const r={};for(let i in e)r[i]=Bfe(i,n,e,t);return r}function Bfe(n,e,t,r){const i=t[n];let s=r&&r.getAttribute(n)||(e[n]!=null&&e[n]!=null?e[n]:null);return i&&(s!=null&&i.value&&typeof i.value!=typeof s&&(typeof i.value=="boolean"?s=s!="false":s=i.value.constructor(s)),i.transform&&s&&(s=i.transform(s)),(s==null||i.choices&&i.choices.indexOf(s)==-1)&&(s=i.value)),s}const vLe=/^(?:\:([^\:]+)\:)(?:\:skin-tone-(\d)\:)?$/;let KB=null;function yLe(n){return n.id?n:Tn.emojis[n]||Tn.emojis[Tn.aliases[n]]||Tn.emojis[Tn.natives[n]]}function xLe(){KB=null}async function bLe(n,{maxResults:e,caller:t}={}){if(!n||!n.trim().length)return null;e||(e=90),await CM(null,{caller:t||"SearchIndex.search"});const r=n.toLowerCase().replace(/(\w)-/,"$1 ").split(/[\s|,]+/).filter((a,c,u)=>a.trim()&&u.indexOf(a)==c);if(!r.length)return;let i=KB||(KB=Object.values(Tn.emojis)),s,o;for(const a of r){if(!i.length)break;s=[],o={};for(const c of i){if(!c.search)continue;const u=c.search.indexOf(`,${a}`);u!=-1&&(s.push(c),o[c.id]||(o[c.id]=0),o[c.id]+=c.id==a?0:u+1)}i=s}return s.length<2||(s.sort((a,c)=>{const u=o[a.id],d=o[c.id];return u==d?a.id.localeCompare(c.id):u-d}),s.length>e&&(s=s.slice(0,e))),s}var fw={search:bLe,get:yLe,reset:xLe,SHORTCODES_REGEX:vLe};const wLe=["checkered_flag","crossed_flags","pirate_flag","rainbow-flag","transgender_flag","triangular_flag_on_post","waving_black_flag","waving_white_flag"];function _Le(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===e.length&&n.every((t,r)=>t==e[r])}async function SLe(n=1){for(let e in[...Array(n).keys()])await new Promise(requestAnimationFrame)}function kLe(n,{skinIndex:e=0}={}){const t=n.skins[e]||(e=0,n.skins[e]),r={id:n.id,name:n.name,native:t.native,unified:t.unified,keywords:n.keywords,shortcodes:t.shortcodes||n.shortcodes};return n.skins.length>1&&(r.skin=e+1),t.src&&(r.src=t.src),n.aliases&&n.aliases.length&&(r.aliases=n.aliases),n.emoticons&&n.emoticons.length&&(r.emoticons=n.emoticons),r}const CLe={activity:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Ke("path",{d:"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113"})}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Ke("path",{d:"M16.17 337.5c0 44.98 7.565 83.54 13.98 107.9C35.22 464.3 50.46 496 174.9 496c9.566 0 19.59-.4707 29.84-1.271L17.33 307.3C16.53 317.6 16.17 327.7 16.17 337.5zM495.8 174.5c0-44.98-7.565-83.53-13.98-107.9c-4.688-17.54-18.34-31.23-36.04-35.95C435.5 27.91 392.9 16 337 16c-9.564 0-19.59 .4707-29.84 1.271l187.5 187.5C495.5 194.4 495.8 184.3 495.8 174.5zM26.77 248.8l236.3 236.3c142-36.1 203.9-150.4 222.2-221.1L248.9 26.87C106.9 62.96 45.07 177.2 26.77 248.8zM256 335.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L164.7 283.3C161.6 280.2 160 276.1 160 271.1c0-8.529 6.865-16 16-16c4.095 0 8.189 1.562 11.31 4.688l64.01 64C254.4 327.8 256 331.9 256 335.1zM304 287.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L212.7 235.3C209.6 232.2 208 228.1 208 223.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01C302.5 279.8 304 283.9 304 287.1zM256 175.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01c3.125 3.125 4.688 7.219 4.688 11.31c0 9.133-7.468 16-16 16c-4.094 0-8.189-1.562-11.31-4.688l-64.01-64.01C257.6 184.2 256 180.1 256 175.1z"})})},custom:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:Ke("path",{d:"M417.1 368c-5.937 10.27-16.69 16-27.75 16c-5.422 0-10.92-1.375-15.97-4.281L256 311.4V448c0 17.67-14.33 32-31.1 32S192 465.7 192 448V311.4l-118.3 68.29C68.67 382.6 63.17 384 57.75 384c-11.06 0-21.81-5.734-27.75-16c-8.828-15.31-3.594-34.88 11.72-43.72L159.1 256L41.72 187.7C26.41 178.9 21.17 159.3 29.1 144C36.63 132.5 49.26 126.7 61.65 128.2C65.78 128.7 69.88 130.1 73.72 132.3L192 200.6V64c0-17.67 14.33-32 32-32S256 46.33 256 64v136.6l118.3-68.29c3.838-2.213 7.939-3.539 12.07-4.051C398.7 126.7 411.4 132.5 417.1 144c8.828 15.31 3.594 34.88-11.72 43.72L288 256l118.3 68.28C421.6 333.1 426.8 352.7 417.1 368z"})}),flags:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Ke("path",{d:"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z"})}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Ke("path",{d:"M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"})})},foods:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Ke("path",{d:"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9"})}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Ke("path",{d:"M481.9 270.1C490.9 279.1 496 291.3 496 304C496 316.7 490.9 328.9 481.9 337.9C472.9 346.9 460.7 352 448 352H64C51.27 352 39.06 346.9 30.06 337.9C21.06 328.9 16 316.7 16 304C16 291.3 21.06 279.1 30.06 270.1C39.06 261.1 51.27 256 64 256H448C460.7 256 472.9 261.1 481.9 270.1zM475.3 388.7C478.3 391.7 480 395.8 480 400V416C480 432.1 473.3 449.3 461.3 461.3C449.3 473.3 432.1 480 416 480H96C79.03 480 62.75 473.3 50.75 461.3C38.74 449.3 32 432.1 32 416V400C32 395.8 33.69 391.7 36.69 388.7C39.69 385.7 43.76 384 48 384H464C468.2 384 472.3 385.7 475.3 388.7zM50.39 220.8C45.93 218.6 42.03 215.5 38.97 211.6C35.91 207.7 33.79 203.2 32.75 198.4C31.71 193.5 31.8 188.5 32.99 183.7C54.98 97.02 146.5 32 256 32C365.5 32 457 97.02 479 183.7C480.2 188.5 480.3 193.5 479.2 198.4C478.2 203.2 476.1 207.7 473 211.6C469.1 215.5 466.1 218.6 461.6 220.8C457.2 222.9 452.3 224 447.3 224H64.67C59.73 224 54.84 222.9 50.39 220.8zM372.7 116.7C369.7 119.7 368 123.8 368 128C368 131.2 368.9 134.3 370.7 136.9C372.5 139.5 374.1 141.6 377.9 142.8C380.8 143.1 384 144.3 387.1 143.7C390.2 143.1 393.1 141.6 395.3 139.3C397.6 137.1 399.1 134.2 399.7 131.1C400.3 128 399.1 124.8 398.8 121.9C397.6 118.1 395.5 116.5 392.9 114.7C390.3 112.9 387.2 111.1 384 111.1C379.8 111.1 375.7 113.7 372.7 116.7V116.7zM244.7 84.69C241.7 87.69 240 91.76 240 96C240 99.16 240.9 102.3 242.7 104.9C244.5 107.5 246.1 109.6 249.9 110.8C252.8 111.1 256 112.3 259.1 111.7C262.2 111.1 265.1 109.6 267.3 107.3C269.6 105.1 271.1 102.2 271.7 99.12C272.3 96.02 271.1 92.8 270.8 89.88C269.6 86.95 267.5 84.45 264.9 82.7C262.3 80.94 259.2 79.1 256 79.1C251.8 79.1 247.7 81.69 244.7 84.69V84.69zM116.7 116.7C113.7 119.7 112 123.8 112 128C112 131.2 112.9 134.3 114.7 136.9C116.5 139.5 118.1 141.6 121.9 142.8C124.8 143.1 128 144.3 131.1 143.7C134.2 143.1 137.1 141.6 139.3 139.3C141.6 137.1 143.1 134.2 143.7 131.1C144.3 128 143.1 124.8 142.8 121.9C141.6 118.1 139.5 116.5 136.9 114.7C134.3 112.9 131.2 111.1 128 111.1C123.8 111.1 119.7 113.7 116.7 116.7L116.7 116.7z"})})},frequent:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Ke("path",{d:"M13 4h-2l-.001 7H9v2h2v2h2v-2h4v-2h-4z"}),Ke("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"})]}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Ke("path",{d:"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"})})},nature:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Ke("path",{d:"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8"}),Ke("path",{d:"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235"})]}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:Ke("path",{d:"M332.7 19.85C334.6 8.395 344.5 0 356.1 0C363.6 0 370.6 3.52 375.1 9.502L392 32H444.1C456.8 32 469.1 37.06 478.1 46.06L496 64H552C565.3 64 576 74.75 576 88V112C576 156.2 540.2 192 496 192H426.7L421.6 222.5L309.6 158.5L332.7 19.85zM448 64C439.2 64 432 71.16 432 80C432 88.84 439.2 96 448 96C456.8 96 464 88.84 464 80C464 71.16 456.8 64 448 64zM416 256.1V480C416 497.7 401.7 512 384 512H352C334.3 512 320 497.7 320 480V364.8C295.1 377.1 268.8 384 240 384C211.2 384 184 377.1 160 364.8V480C160 497.7 145.7 512 128 512H96C78.33 512 64 497.7 64 480V249.8C35.23 238.9 12.64 214.5 4.836 183.3L.9558 167.8C-3.331 150.6 7.094 133.2 24.24 128.1C41.38 124.7 58.76 135.1 63.05 152.2L66.93 167.8C70.49 182 83.29 191.1 97.97 191.1H303.8L416 256.1z"})})},objects:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Ke("path",{d:"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z"}),Ke("path",{d:"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789"})]}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:Ke("path",{d:"M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"})})},people:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Ke("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"}),Ke("path",{d:"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0"})]}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Ke("path",{d:"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256 432C332.1 432 396.2 382 415.2 314.1C419.1 300.4 407.8 288 393.6 288H118.4C104.2 288 92.92 300.4 96.76 314.1C115.8 382 179.9 432 256 432V432zM176.4 160C158.7 160 144.4 174.3 144.4 192C144.4 209.7 158.7 224 176.4 224C194 224 208.4 209.7 208.4 192C208.4 174.3 194 160 176.4 160zM336.4 224C354 224 368.4 209.7 368.4 192C368.4 174.3 354 160 336.4 160C318.7 160 304.4 174.3 304.4 192C304.4 209.7 318.7 224 336.4 224z"})})},places:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Ke("path",{d:"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5"}),Ke("path",{d:"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z"})]}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Ke("path",{d:"M39.61 196.8L74.8 96.29C88.27 57.78 124.6 32 165.4 32H346.6C387.4 32 423.7 57.78 437.2 96.29L472.4 196.8C495.6 206.4 512 229.3 512 256V448C512 465.7 497.7 480 480 480H448C430.3 480 416 465.7 416 448V400H96V448C96 465.7 81.67 480 64 480H32C14.33 480 0 465.7 0 448V256C0 229.3 16.36 206.4 39.61 196.8V196.8zM109.1 192H402.9L376.8 117.4C372.3 104.6 360.2 96 346.6 96H165.4C151.8 96 139.7 104.6 135.2 117.4L109.1 192zM96 256C78.33 256 64 270.3 64 288C64 305.7 78.33 320 96 320C113.7 320 128 305.7 128 288C128 270.3 113.7 256 96 256zM416 320C433.7 320 448 305.7 448 288C448 270.3 433.7 256 416 256C398.3 256 384 270.3 384 288C384 305.7 398.3 320 416 320z"})})},symbols:{outline:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Ke("path",{d:"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76"})}),solid:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Ke("path",{d:"M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"})})}},ELe={loupe:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Ke("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})}),delete:Ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Ke("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"})})};var OI={categories:CLe,search:ELe};function YB(n){let{id:e,skin:t,emoji:r}=n;if(n.shortcodes){const a=n.shortcodes.match(fw.SHORTCODES_REGEX);a&&(e=a[1],a[2]&&(t=a[2]))}if(r||(r=fw.get(e||n.native)),!r)return n.fallback;const i=r.skins[t-1]||r.skins[0],s=i.src||(n.set!="native"&&!n.spritesheet?typeof n.getImageURL=="function"?n.getImageURL(n.set,i.unified):`https://cdn.jsdelivr.net/npm/emoji-datasource-${n.set}@15.0.1/img/${n.set}/64/${i.unified}.png`:void 0),o=typeof n.getSpritesheetURL=="function"?n.getSpritesheetURL(n.set):`https://cdn.jsdelivr.net/npm/emoji-datasource-${n.set}@15.0.1/img/${n.set}/sheets-256/64.png`;return Ke("span",{class:"emoji-mart-emoji","data-emoji-set":n.set,children:s?Ke("img",{style:{maxWidth:n.size||"1em",maxHeight:n.size||"1em",display:"inline-block"},alt:i.native||i.shortcodes,src:s}):n.set=="native"?Ke("span",{style:{fontSize:n.size,fontFamily:'"EmojiMart", "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "Android Emoji"'},children:i.native}):Ke("span",{style:{display:"block",width:n.size,height:n.size,backgroundImage:`url(${o})`,backgroundSize:`${100*Tn.sheet.cols}% ${100*Tn.sheet.rows}%`,backgroundPosition:`${100/(Tn.sheet.cols-1)*i.x}% ${100/(Tn.sheet.rows-1)*i.y}%`}})})}const TLe=typeof window<"u"&&window.HTMLElement?window.HTMLElement:Object;class $fe extends TLe{static get observedAttributes(){return Object.keys(this.Props)}update(e={}){for(let t in e)this.attributeChangedCallback(t,null,e[t])}attributeChangedCallback(e,t,r){if(!this.component)return;const i=Bfe(e,{[e]:r},this.constructor.Props,this);this.component.componentWillReceiveProps?this.component.componentWillReceiveProps({[e]:i}):(this.component.props[e]=i,this.component.forceUpdate())}disconnectedCallback(){this.disconnected=!0,this.component&&this.component.unregister&&this.component.unregister()}constructor(e={}){if(super(),this.props=e,e.parent||e.ref){let t=null;const r=e.parent||(t=e.ref&&e.ref.current);t&&(t.innerHTML=""),r&&r.appendChild(this)}}}class ALe extends $fe{setShadow(){this.attachShadow({mode:"open"})}injectStyles(e){if(!e)return;const t=document.createElement("style");t.textContent=e,this.shadowRoot.insertBefore(t,this.shadowRoot.firstChild)}constructor(e,{styles:t}={}){super(e),this.setShadow(),this.injectStyles(t)}}var Vfe={fallback:"",id:"",native:"",shortcodes:"",size:{value:"",transform:n=>/\D/.test(n)?n:`${n}px`},set:Bf.set,skin:Bf.skin};class Ufe extends $fe{async connectedCallback(){const e=Ffe(this.props,Vfe,this);e.element=this,e.ref=t=>{this.component=t},await CM(),!this.disconnected&&Ife(Ke(YB,{...e}),this)}constructor(e){super(e)}}ac(Ufe,"Props",Vfe);typeof customElements<"u"&&!customElements.get("em-emoji")&&customElements.define("em-emoji",Ufe);var mX,XB=[],pX=Gt.__b,gX=Gt.__r,vX=Gt.diffed,yX=Gt.__c,xX=Gt.unmount;function NLe(){var n;for(XB.sort(function(e,t){return e.__v.__b-t.__v.__b});n=XB.pop();)if(n.__P)try{n.__H.__h.forEach(gP),n.__H.__h.forEach(JB),n.__H.__h=[]}catch(e){n.__H.__h=[],Gt.__e(e,n.__v)}}Gt.__b=function(n){pX&&pX(n)},Gt.__r=function(n){gX&&gX(n);var e=n.__c.__H;e&&(e.__h.forEach(gP),e.__h.forEach(JB),e.__h=[])},Gt.diffed=function(n){vX&&vX(n);var e=n.__c;e&&e.__H&&e.__H.__h.length&&(XB.push(e)!==1&&mX===Gt.requestAnimationFrame||((mX=Gt.requestAnimationFrame)||function(t){var r,i=function(){clearTimeout(s),bX&&cancelAnimationFrame(r),setTimeout(t)},s=setTimeout(i,100);bX&&(r=requestAnimationFrame(i))})(NLe))},Gt.__c=function(n,e){e.some(function(t){try{t.__h.forEach(gP),t.__h=t.__h.filter(function(r){return!r.__||JB(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Gt.__e(r,t.__v)}}),yX&&yX(n,e)},Gt.unmount=function(n){xX&&xX(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{gP(r)}catch(i){e=i}}),e&&Gt.__e(e,t.__v))};var bX=typeof requestAnimationFrame=="function";function gP(n){var e=n.__c;typeof e=="function"&&(n.__c=void 0,e())}function JB(n){n.__c=n.__()}function jLe(n,e){for(var t in e)n[t]=e[t];return n}function wX(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function RI(n){this.props=n}(RI.prototype=new oh).isPureReactComponent=!0,RI.prototype.shouldComponentUpdate=function(n,e){return wX(this.props,n)||wX(this.state,e)};var _X=Gt.__b;Gt.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),_X&&_X(n)};var PLe=Gt.__e;Gt.__e=function(n,e,t){if(n.then){for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(n,e)}PLe(n,e,t)};var SX=Gt.unmount;function l5(){this.__u=0,this.t=null,this.__b=null}function zfe(n){var e=n.__.__c;return e&&e.__e&&e.__e(n)}function vj(){this.u=null,this.o=null}Gt.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),SX&&SX(n)},(l5.prototype=new oh).__c=function(n,e){var t=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(t);var i=zfe(r.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--r.__u){if(r.state.__e){var u=r.state.__e;r.__v.__k[0]=(function h(f,p,x){return f&&(f.__v=null,f.__k=f.__k&&f.__k.map(function(y){return h(y,p,x)}),f.__c&&f.__c.__P===p&&(f.__e&&x.insertBefore(f.__e,f.__d),f.__c.__e=!0,f.__c.__P=x)),f})(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__e:r.__b=null});d=r.t.pop();)d.forceUpdate()}},c=e.__h===!0;r.__u++||c||r.setState({__e:r.__b=r.__v.__k[0]}),n.then(o,o)},l5.prototype.componentWillUnmount=function(){this.t=[]},l5.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=(function s(o,a,c){return o&&(o.__c&&o.__c.__H&&(o.__c.__H.__.forEach(function(u){typeof u.__c=="function"&&u.__c()}),o.__c.__H=null),(o=jLe({},o)).__c!=null&&(o.__c.__P===c&&(o.__c.__P=a),o.__c=null),o.__k=o.__k&&o.__k.map(function(u){return s(u,a,c)})),o})(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__e&&qB(v_,null,n.fallback);return i&&(i.__h=null),[qB(v_,null,e.__e?null:n.children),i]};var kX=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};(vj.prototype=new oh).__e=function(n){var e=this,t=zfe(e.__v),r=e.o.get(n);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),kX(e,n,r)):i()};t?t(s):s()}},vj.prototype.render=function(n){this.u=null,this.o=new Map;var e=PI(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},vj.prototype.componentDidUpdate=vj.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){kX(n,t,e)})};var ILe=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,OLe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,RLe=typeof document<"u",MLe=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};oh.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(oh.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var CX=Gt.event;function DLe(){}function LLe(){return this.cancelBubble}function FLe(){return this.defaultPrevented}Gt.event=function(n){return CX&&(n=CX(n)),n.persist=DLe,n.isPropagationStopped=LLe,n.isDefaultPrevented=FLe,n.nativeEvent=n};var EX={configurable:!0,get:function(){return this.class}},TX=Gt.vnode;Gt.vnode=function(n){var e=n.type,t=n.props,r=t;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var s in r={},t){var o=t[s];RLe&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in t&&o==null||(s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!MLe(t.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(s)?s=s.toLowerCase():i&&OLe.test(s)?s=s.replace(/[A-Z0-9]/,"-$&").toLowerCase():o===null&&(o=void 0),r[s]=o)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=PI(t.children).forEach(function(a){a.props.selected=r.value.indexOf(a.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=PI(t.children).forEach(function(a){a.props.selected=r.multiple?r.defaultValue.indexOf(a.props.value)!=-1:r.defaultValue==a.props.value})),n.props=r,t.class!=t.className&&(EX.enumerable="className"in t,t.className!=null&&(r.class=t.className),Object.defineProperty(r,"className",EX))}n.$$typeof=ILe,TX&&TX(n)};var AX=Gt.__r;Gt.__r=function(n){AX&&AX(n),n.__c};const BLe={light:"outline",dark:"solid"};class $Le extends RI{renderIcon(e){const{icon:t}=e;if(t){if(t.svg)return Ke("span",{class:"flex",dangerouslySetInnerHTML:{__html:t.svg}});if(t.src)return Ke("img",{src:t.src})}const r=OI.categories[e.id]||OI.categories.custom,i=this.props.icons=="auto"?BLe[this.props.theme]:this.props.icons;return r[i]||r}render(){let e=null;return Ke("nav",{id:"nav",class:"padding","data-position":this.props.position,dir:this.props.dir,children:Ke("div",{class:"flex relative",children:[this.categories.map((t,r)=>{const i=t.name||co.categories[t.id],s=!this.props.unfocused&&t.id==this.state.categoryId;return s&&(e=r),Ke("button",{"aria-label":i,"aria-selected":s||void 0,title:i,type:"button",class:"flex flex-grow flex-center",onMouseDown:o=>o.preventDefault(),onClick:()=>{this.props.onClick({category:t,i:r})},children:this.renderIcon(t)})}),Ke("div",{class:"bar",style:{width:`${100/this.categories.length}%`,opacity:e==null?0:1,transform:this.props.dir==="rtl"?`scaleX(-1) translateX(${e*100}%)`:`translateX(${e*100}%)`}})]})})}constructor(){super(),this.categories=Tn.categories.filter(e=>!e.target),this.state={categoryId:this.categories[0].id}}}class VLe extends RI{shouldComponentUpdate(e){for(let t in e)if(t!="children"&&e[t]!=this.props[t])return!0;return!1}render(){return this.props.children}}const yj={rowsPerRender:10};class ULe extends oh{getInitialState(e=this.props){return{skin:Ag.get("skin")||e.skin,theme:this.initTheme(e.theme)}}componentWillMount(){this.dir=co.rtl?"rtl":"ltr",this.refs={menu:Hh(),navigation:Hh(),scroll:Hh(),search:Hh(),searchInput:Hh(),skinToneButton:Hh(),skinToneRadio:Hh()},this.initGrid(),this.props.stickySearch==!1&&this.props.searchPosition=="sticky"&&(console.warn("[EmojiMart] Deprecation warning: `stickySearch` has been renamed `searchPosition`."),this.props.searchPosition="static")}componentDidMount(){if(this.register(),this.shadowRoot=this.base.parentNode,this.props.autoFocus){const{searchInput:e}=this.refs;e.current&&e.current.focus()}}componentWillReceiveProps(e){this.nextState||(this.nextState={});for(const t in e)this.nextState[t]=e[t];clearTimeout(this.nextStateTimer),this.nextStateTimer=setTimeout(()=>{let t=!1;for(const i in this.nextState)this.props[i]=this.nextState[i],(i==="custom"||i==="categories")&&(t=!0);delete this.nextState;const r=this.getInitialState();if(t)return this.reset(r);this.setState(r)})}componentWillUnmount(){this.unregister()}async reset(e={}){await CM(this.props),this.initGrid(),this.unobserve(),this.setState(e,()=>{this.observeCategories(),this.observeRows()})}register(){document.addEventListener("click",this.handleClickOutside),this.observe()}unregister(){var e;document.removeEventListener("click",this.handleClickOutside),(e=this.darkMedia)==null||e.removeEventListener("change",this.darkMediaCallback),this.unobserve()}observe(){this.observeCategories(),this.observeRows()}unobserve({except:e=[]}={}){Array.isArray(e)||(e=[e]);for(const t of this.observers)e.includes(t)||t.disconnect();this.observers=[].concat(e)}initGrid(){const{categories:e}=Tn;this.refs.categories=new Map;const t=Tn.categories.map(i=>i.id).join(",");this.navKey&&this.navKey!=t&&this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0),this.navKey=t,this.grid=[],this.grid.setsize=0;const r=(i,s)=>{const o=[];o.__categoryId=s.id,o.__index=i.length,this.grid.push(o);const a=this.grid.length-1,c=a%yj.rowsPerRender?{}:Hh();return c.index=a,c.posinset=this.grid.setsize+1,i.push(c),o};for(let i of e){const s=[];let o=r(s,i);for(let a of i.emojis)o.length==this.getPerLine()&&(o=r(s,i)),this.grid.setsize+=1,o.push(a);this.refs.categories.set(i.id,{root:Hh(),rows:s})}}initTheme(e){if(e!="auto")return e;if(!this.darkMedia){if(this.darkMedia=matchMedia("(prefers-color-scheme: dark)"),this.darkMedia.media.match(/^not/))return"light";this.darkMedia.addEventListener("change",this.darkMediaCallback)}return this.darkMedia.matches?"dark":"light"}initDynamicPerLine(e=this.props){if(!e.dynamicWidth)return;const{element:t,emojiButtonSize:r}=e,i=()=>{const{width:o}=t.getBoundingClientRect();return Math.floor(o/r)},s=new ResizeObserver(()=>{this.unobserve({except:s}),this.setState({perLine:i()},()=>{this.initGrid(),this.forceUpdate(()=>{this.observeCategories(),this.observeRows()})})});return s.observe(t),this.observers.push(s),i()}getPerLine(){return this.state.perLine||this.props.perLine}getEmojiByPos([e,t]){const r=this.state.searchResults||this.grid,i=r[e]&&r[e][t];if(i)return fw.get(i)}observeCategories(){const e=this.refs.navigation.current;if(!e)return;const t=new Map,r=o=>{o!=e.state.categoryId&&e.setState({categoryId:o})},i={root:this.refs.scroll.current,threshold:[0,1]},s=new IntersectionObserver(o=>{for(const c of o){const u=c.target.dataset.id;t.set(u,c.intersectionRatio)}const a=[...t];for(const[c,u]of a)if(u){r(c);break}},i);for(const{root:o}of this.refs.categories.values())s.observe(o.current);this.observers.push(s)}observeRows(){const e={...this.state.visibleRows},t=new IntersectionObserver(r=>{for(const i of r){const s=parseInt(i.target.dataset.index);i.isIntersecting?e[s]=!0:delete e[s]}this.setState({visibleRows:e})},{root:this.refs.scroll.current,rootMargin:`${this.props.emojiButtonSize*(yj.rowsPerRender+5)}px 0px ${this.props.emojiButtonSize*yj.rowsPerRender}px`});for(const{rows:r}of this.refs.categories.values())for(const i of r)i.current&&t.observe(i.current);this.observers.push(t)}preventDefault(e){e.preventDefault()}unfocusSearch(){const e=this.refs.searchInput.current;e&&e.blur()}navigate({e,input:t,left:r,right:i,up:s,down:o}){const a=this.state.searchResults||this.grid;if(!a.length)return;let[c,u]=this.state.pos;const d=(()=>{if(c==0&&u==0&&!e.repeat&&(r||s))return null;if(c==-1)return!e.repeat&&(i||o)&&t.selectionStart==t.value.length?[0,0]:null;if(r||i){let h=a[c];const f=r?-1:1;if(u+=f,!h[u]){if(c+=f,h=a[c],!h)return c=r?0:a.length-1,u=r?0:a[c].length-1,[c,u];u=r?h.length-1:0}return[c,u]}if(s||o){c+=s?-1:1;const h=a[c];return h?(h[u]||(u=h.length-1),[c,u]):(c=s?0:a.length-1,u=s?0:a[c].length-1,[c,u])}})();if(d)e.preventDefault();else{this.state.pos[0]>-1&&this.setState({pos:[-1,-1]});return}this.setState({pos:d,keyboard:!0},()=>{this.scrollTo({row:d[0]})})}scrollTo({categoryId:e,row:t}){const r=this.state.searchResults||this.grid;if(!r.length)return;const i=this.refs.scroll.current,s=i.getBoundingClientRect();let o=0;if(t>=0&&(e=r[t].__categoryId),e&&(o=(this.refs[e]||this.refs.categories.get(e).root).current.getBoundingClientRect().top-(s.top-i.scrollTop)+1),t>=0)if(!t)o=0;else{const a=r[t].__index,c=o+a*this.props.emojiButtonSize,u=c+this.props.emojiButtonSize+this.props.emojiButtonSize*.88;if(c<i.scrollTop)o=c;else if(u>i.scrollTop+s.height)o=u-s.height;else return}this.ignoreMouse(),i.scrollTop=o}ignoreMouse(){this.mouseIsIgnored=!0,clearTimeout(this.ignoreMouseTimer),this.ignoreMouseTimer=setTimeout(()=>{delete this.mouseIsIgnored},100)}handleEmojiOver(e){this.mouseIsIgnored||this.state.showSkins||this.setState({pos:e||[-1,-1],keyboard:!1})}handleEmojiClick({e,emoji:t,pos:r}){if(this.props.onEmojiSelect&&(!t&&r&&(t=this.getEmojiByPos(r)),t)){const i=kLe(t,{skinIndex:this.state.skin-1});this.props.maxFrequentRows&&Rfe.add(i,this.props),this.props.onEmojiSelect(i,e)}}closeSkins(){this.state.showSkins&&(this.setState({showSkins:null,tempSkin:null}),this.base.removeEventListener("click",this.handleBaseClick),this.base.removeEventListener("keydown",this.handleBaseKeydown))}handleSkinMouseOver(e){this.setState({tempSkin:e})}handleSkinClick(e){this.ignoreMouse(),this.closeSkins(),this.setState({skin:e,tempSkin:null}),Ag.set("skin",e)}renderNav(){return Ke($Le,{ref:this.refs.navigation,icons:this.props.icons,theme:this.state.theme,dir:this.dir,unfocused:!!this.state.searchResults,position:this.props.navPosition,onClick:this.handleCategoryClick},this.navKey)}renderPreview(){const e=this.getEmojiByPos(this.state.pos),t=this.state.searchResults&&!this.state.searchResults.length;return Ke("div",{id:"preview",class:"flex flex-middle",dir:this.dir,"data-position":this.props.previewPosition,children:[Ke("div",{class:"flex flex-middle flex-grow",children:[Ke("div",{class:"flex flex-auto flex-middle flex-center",style:{height:this.props.emojiButtonSize,fontSize:this.props.emojiButtonSize},children:Ke(YB,{emoji:e,id:t?this.props.noResultsEmoji||"cry":this.props.previewEmoji||(this.props.previewPosition=="top"?"point_down":"point_up"),set:this.props.set,size:this.props.emojiButtonSize,skin:this.state.tempSkin||this.state.skin,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})}),Ke("div",{class:`margin-${this.dir[0]}`,children:e||t?Ke("div",{class:`padding-${this.dir[2]} align-${this.dir[0]}`,children:[Ke("div",{class:"preview-title ellipsis",children:e?e.name:co.search_no_results_1}),Ke("div",{class:"preview-subtitle ellipsis color-c",children:e?e.skins[0].shortcodes:co.search_no_results_2})]}):Ke("div",{class:"preview-placeholder color-c",children:co.pick})})]}),!e&&this.props.skinTonePosition=="preview"&&this.renderSkinToneButton()]})}renderEmojiButton(e,{pos:t,posinset:r,grid:i}){const s=this.props.emojiButtonSize,o=this.state.tempSkin||this.state.skin,c=(e.skins[o-1]||e.skins[0]).native,u=_Le(this.state.pos,t),d=t.concat(e.id).join("");return Ke(VLe,{selected:u,skin:o,size:s,children:Ke("button",{"aria-label":c,"aria-selected":u||void 0,"aria-posinset":r,"aria-setsize":i.setsize,"data-keyboard":this.state.keyboard,title:this.props.previewPosition=="none"?e.name:void 0,type:"button",class:"flex flex-center flex-middle",tabindex:"-1",onClick:h=>this.handleEmojiClick({e:h,emoji:e}),onMouseEnter:()=>this.handleEmojiOver(t),onMouseLeave:()=>this.handleEmojiOver(),style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize,fontSize:this.props.emojiSize,lineHeight:0},children:[Ke("div",{"aria-hidden":"true",class:"background",style:{borderRadius:this.props.emojiButtonRadius,backgroundColor:this.props.emojiButtonColors?this.props.emojiButtonColors[(r-1)%this.props.emojiButtonColors.length]:void 0}}),Ke(YB,{emoji:e,set:this.props.set,size:this.props.emojiSize,skin:o,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})]})},d)}renderSearch(){const e=this.props.previewPosition=="none"||this.props.skinTonePosition=="search";return Ke("div",{children:[Ke("div",{class:"spacer"}),Ke("div",{class:"flex flex-middle",children:[Ke("div",{class:"search relative flex-grow",children:[Ke("input",{type:"search",ref:this.refs.searchInput,placeholder:co.search,onClick:this.handleSearchClick,onInput:this.handleSearchInput,onKeyDown:this.handleSearchKeyDown,autoComplete:"off"}),Ke("span",{class:"icon loupe flex",children:OI.search.loupe}),this.state.searchResults&&Ke("button",{title:"Clear","aria-label":"Clear",type:"button",class:"icon delete flex",onClick:this.clearSearch,onMouseDown:this.preventDefault,children:OI.search.delete})]}),e&&this.renderSkinToneButton()]})]})}renderSearchResults(){const{searchResults:e}=this.state;return e?Ke("div",{class:"category",ref:this.refs.search,children:[Ke("div",{class:`sticky padding-small align-${this.dir[0]}`,children:co.categories.search}),Ke("div",{children:e.length?e.map((t,r)=>Ke("div",{class:"flex",children:t.map((i,s)=>this.renderEmojiButton(i,{pos:[r,s],posinset:r*this.props.perLine+s+1,grid:e}))})):Ke("div",{class:`padding-small align-${this.dir[0]}`,children:this.props.onAddCustomEmoji&&Ke("a",{onClick:this.props.onAddCustomEmoji,children:co.add_custom})})})]}):null}renderCategories(){const{categories:e}=Tn,t=!!this.state.searchResults,r=this.getPerLine();return Ke("div",{style:{visibility:t?"hidden":void 0,display:t?"none":void 0,height:"100%"},children:e.map(i=>{const{root:s,rows:o}=this.refs.categories.get(i.id);return Ke("div",{"data-id":i.target?i.target.id:i.id,class:"category",ref:s,children:[Ke("div",{class:`sticky padding-small align-${this.dir[0]}`,children:i.name||co.categories[i.id]}),Ke("div",{class:"relative",style:{height:o.length*this.props.emojiButtonSize},children:o.map((a,c)=>{const u=a.index-a.index%yj.rowsPerRender,d=this.state.visibleRows[u],h="current"in a?a:void 0;if(!d&&!h)return null;const f=c*r,p=f+r,x=i.emojis.slice(f,p);return x.length<r&&x.push(...new Array(r-x.length)),Ke("div",{"data-index":a.index,ref:h,class:"flex row",style:{top:c*this.props.emojiButtonSize},children:d&&x.map((y,b)=>{if(!y)return Ke("div",{style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize}});const _=fw.get(y);return this.renderEmojiButton(_,{pos:[a.index,b],posinset:a.posinset+b,grid:this.grid})})},a.index)})})]})})})}renderSkinToneButton(){return this.props.skinTonePosition=="none"?null:Ke("div",{class:"flex flex-auto flex-center flex-middle",style:{position:"relative",width:this.props.emojiButtonSize,height:this.props.emojiButtonSize},children:Ke("button",{type:"button",ref:this.refs.skinToneButton,class:"skin-tone-button flex flex-auto flex-center flex-middle","aria-selected":this.state.showSkins?"":void 0,"aria-label":co.skins.choose,title:co.skins.choose,onClick:this.openSkins,style:{width:this.props.emojiSize,height:this.props.emojiSize},children:Ke("span",{class:`skin-tone skin-tone-${this.state.skin}`})})})}renderLiveRegion(){const e=this.getEmojiByPos(this.state.pos),t=e?e.name:"";return Ke("div",{"aria-live":"polite",class:"sr-only",children:t})}renderSkins(){const t=this.refs.skinToneButton.current.getBoundingClientRect(),r=this.base.getBoundingClientRect(),i={};return this.dir=="ltr"?i.right=r.right-t.right-3:i.left=t.left-r.left-3,this.props.previewPosition=="bottom"&&this.props.skinTonePosition=="preview"?i.bottom=r.bottom-t.top+6:(i.top=t.bottom-r.top+3,i.bottom="auto"),Ke("div",{ref:this.refs.menu,role:"radiogroup",dir:this.dir,"aria-label":co.skins.choose,class:"menu hidden","data-position":i.top?"top":"bottom",style:i,children:[...Array(6).keys()].map(s=>{const o=s+1,a=this.state.skin==o;return Ke("div",{children:[Ke("input",{type:"radio",name:"skin-tone",value:o,"aria-label":co.skins[o],ref:a?this.refs.skinToneRadio:null,defaultChecked:a,onChange:()=>this.handleSkinMouseOver(o),onKeyDown:c=>{(c.code=="Enter"||c.code=="Space"||c.code=="Tab")&&(c.preventDefault(),this.handleSkinClick(o))}}),Ke("button",{"aria-hidden":"true",tabindex:"-1",onClick:()=>this.handleSkinClick(o),onMouseEnter:()=>this.handleSkinMouseOver(o),onMouseLeave:()=>this.handleSkinMouseOver(),class:"option flex flex-grow flex-middle",children:[Ke("span",{class:`skin-tone skin-tone-${o}`}),Ke("span",{class:"margin-small-lr",children:co.skins[o]})]})]})})})}render(){const e=this.props.perLine*this.props.emojiButtonSize;return Ke("section",{id:"root",class:"flex flex-column",dir:this.dir,style:{width:this.props.dynamicWidth?"100%":`calc(${e}px + (var(--padding) + var(--sidebar-width)))`},"data-emoji-set":this.props.set,"data-theme":this.state.theme,"data-menu":this.state.showSkins?"":void 0,children:[this.props.previewPosition=="top"&&this.renderPreview(),this.props.navPosition=="top"&&this.renderNav(),this.props.searchPosition=="sticky"&&Ke("div",{class:"padding-lr",children:this.renderSearch()}),Ke("div",{ref:this.refs.scroll,class:"scroll flex-grow padding-lr",children:Ke("div",{style:{width:this.props.dynamicWidth?"100%":e,height:"100%"},children:[this.props.searchPosition=="static"&&this.renderSearch(),this.renderSearchResults(),this.renderCategories()]})}),this.props.navPosition=="bottom"&&this.renderNav(),this.props.previewPosition=="bottom"&&this.renderPreview(),this.state.showSkins&&this.renderSkins(),this.renderLiveRegion()]})}constructor(e){super(),ac(this,"darkMediaCallback",()=>{this.props.theme=="auto"&&this.setState({theme:this.darkMedia.matches?"dark":"light"})}),ac(this,"handleClickOutside",t=>{const{element:r}=this.props;t.target!=r&&(this.state.showSkins&&this.closeSkins(),this.props.onClickOutside&&this.props.onClickOutside(t))}),ac(this,"handleBaseClick",t=>{this.state.showSkins&&(t.target.closest(".menu")||(t.preventDefault(),t.stopImmediatePropagation(),this.closeSkins()))}),ac(this,"handleBaseKeydown",t=>{this.state.showSkins&&t.key=="Escape"&&(t.preventDefault(),t.stopImmediatePropagation(),this.closeSkins())}),ac(this,"handleSearchClick",()=>{this.getEmojiByPos(this.state.pos)&&this.setState({pos:[-1,-1]})}),ac(this,"handleSearchInput",async()=>{const t=this.refs.searchInput.current;if(!t)return;const{value:r}=t,i=await fw.search(r),s=()=>{this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0)};if(!i)return this.setState({searchResults:i,pos:[-1,-1]},s);const o=t.selectionStart==t.value.length?[0,0]:[-1,-1],a=[];a.setsize=i.length;let c=null;for(let u of i)(!a.length||c.length==this.getPerLine())&&(c=[],c.__categoryId="search",c.__index=a.length,a.push(c)),c.push(u);this.ignoreMouse(),this.setState({searchResults:a,pos:o},s)}),ac(this,"handleSearchKeyDown",t=>{const r=t.currentTarget;switch(t.stopImmediatePropagation(),t.key){case"ArrowLeft":this.navigate({e:t,input:r,left:!0});break;case"ArrowRight":this.navigate({e:t,input:r,right:!0});break;case"ArrowUp":this.navigate({e:t,input:r,up:!0});break;case"ArrowDown":this.navigate({e:t,input:r,down:!0});break;case"Enter":t.preventDefault(),this.handleEmojiClick({e:t,pos:this.state.pos});break;case"Escape":t.preventDefault(),this.state.searchResults?this.clearSearch():this.unfocusSearch();break}}),ac(this,"clearSearch",()=>{const t=this.refs.searchInput.current;t&&(t.value="",t.focus(),this.handleSearchInput())}),ac(this,"handleCategoryClick",({category:t,i:r})=>{this.scrollTo(r==0?{row:-1}:{categoryId:t.id})}),ac(this,"openSkins",t=>{const{currentTarget:r}=t,i=r.getBoundingClientRect();this.setState({showSkins:i},async()=>{await SLe(2);const s=this.refs.menu.current;s&&(s.classList.remove("hidden"),this.refs.skinToneRadio.current.focus(),this.base.addEventListener("click",this.handleBaseClick,!0),this.base.addEventListener("keydown",this.handleBaseKeydown,!0))})}),this.observers=[],this.state={pos:[-1,-1],perLine:this.initDynamicPerLine(e),visibleRows:{0:!0},...this.getInitialState(e)}}}class GU extends ALe{async connectedCallback(){const e=Ffe(this.props,Bf,this);e.element=this,e.ref=t=>{this.component=t},await CM(e),!this.disconnected&&Ife(Ke(ULe,{...e}),this.shadowRoot)}constructor(e){super(e,{styles:bfe(Hfe)})}}ac(GU,"Props",Bf);typeof customElements<"u"&&!customElements.get("em-emoji-picker")&&customElements.define("em-emoji-picker",GU);var Hfe={};Hfe=`:host {
  width: min-content;
  height: 435px;
  min-height: 230px;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  --border-radius: 10px;
  --category-icon-size: 18px;
  --font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
  --font-size: 15px;
  --preview-placeholder-size: 21px;
  --preview-title-size: 1.1em;
  --preview-subtitle-size: .9em;
  --shadow-color: 0deg 0% 0%;
  --shadow: .3px .5px 2.7px hsl(var(--shadow-color) / .14), .4px .8px 1px -3.2px hsl(var(--shadow-color) / .14), 1px 2px 2.5px -4.5px hsl(var(--shadow-color) / .14);
  display: flex;
}

[data-theme="light"] {
  --em-rgb-color: var(--rgb-color, 34, 36, 39);
  --em-rgb-accent: var(--rgb-accent, 34, 102, 237);
  --em-rgb-background: var(--rgb-background, 255, 255, 255);
  --em-rgb-input: var(--rgb-input, 255, 255, 255);
  --em-color-border: var(--color-border, rgba(0, 0, 0, .05));
  --em-color-border-over: var(--color-border-over, rgba(0, 0, 0, .1));
}

[data-theme="dark"] {
  --em-rgb-color: var(--rgb-color, 222, 222, 221);
  --em-rgb-accent: var(--rgb-accent, 58, 130, 247);
  --em-rgb-background: var(--rgb-background, 21, 22, 23);
  --em-rgb-input: var(--rgb-input, 0, 0, 0);
  --em-color-border: var(--color-border, rgba(255, 255, 255, .1));
  --em-color-border-over: var(--color-border-over, rgba(255, 255, 255, .2));
}

#root {
  --color-a: rgb(var(--em-rgb-color));
  --color-b: rgba(var(--em-rgb-color), .65);
  --color-c: rgba(var(--em-rgb-color), .45);
  --padding: 12px;
  --padding-small: calc(var(--padding) / 2);
  --sidebar-width: 16px;
  --duration: 225ms;
  --duration-fast: 125ms;
  --duration-instant: 50ms;
  --easing: cubic-bezier(.4, 0, .2, 1);
  width: 100%;
  text-align: left;
  border-radius: var(--border-radius);
  background-color: rgb(var(--em-rgb-background));
  position: relative;
}

@media (prefers-reduced-motion) {
  #root {
    --duration: 0;
    --duration-fast: 0;
    --duration-instant: 0;
  }
}

#root[data-menu] button {
  cursor: auto;
}

#root[data-menu] .menu button {
  cursor: pointer;
}

:host, #root, input, button {
  color: rgb(var(--em-rgb-color));
  font-family: var(--font-family);
  font-size: var(--font-size);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: normal;
}

*, :before, :after {
  box-sizing: border-box;
  min-width: 0;
  margin: 0;
  padding: 0;
}

.relative {
  position: relative;
}

.flex {
  display: flex;
}

.flex-auto {
  flex: none;
}

.flex-center {
  justify-content: center;
}

.flex-column {
  flex-direction: column;
}

.flex-grow {
  flex: auto;
}

.flex-middle {
  align-items: center;
}

.flex-wrap {
  flex-wrap: wrap;
}

.padding {
  padding: var(--padding);
}

.padding-t {
  padding-top: var(--padding);
}

.padding-lr {
  padding-left: var(--padding);
  padding-right: var(--padding);
}

.padding-r {
  padding-right: var(--padding);
}

.padding-small {
  padding: var(--padding-small);
}

.padding-small-b {
  padding-bottom: var(--padding-small);
}

.padding-small-lr {
  padding-left: var(--padding-small);
  padding-right: var(--padding-small);
}

.margin {
  margin: var(--padding);
}

.margin-r {
  margin-right: var(--padding);
}

.margin-l {
  margin-left: var(--padding);
}

.margin-small-l {
  margin-left: var(--padding-small);
}

.margin-small-lr {
  margin-left: var(--padding-small);
  margin-right: var(--padding-small);
}

.align-l {
  text-align: left;
}

.align-r {
  text-align: right;
}

.color-a {
  color: var(--color-a);
}

.color-b {
  color: var(--color-b);
}

.color-c {
  color: var(--color-c);
}

.ellipsis {
  white-space: nowrap;
  max-width: 100%;
  width: auto;
  text-overflow: ellipsis;
  overflow: hidden;
}

.sr-only {
  width: 1px;
  height: 1px;
  position: absolute;
  top: auto;
  left: -10000px;
  overflow: hidden;
}

a {
  cursor: pointer;
  color: rgb(var(--em-rgb-accent));
}

a:hover {
  text-decoration: underline;
}

.spacer {
  height: 10px;
}

[dir="rtl"] .scroll {
  padding-left: 0;
  padding-right: var(--padding);
}

.scroll {
  padding-right: 0;
  overflow-x: hidden;
  overflow-y: auto;
}

.scroll::-webkit-scrollbar {
  width: var(--sidebar-width);
  height: var(--sidebar-width);
}

.scroll::-webkit-scrollbar-track {
  border: 0;
}

.scroll::-webkit-scrollbar-button {
  width: 0;
  height: 0;
  display: none;
}

.scroll::-webkit-scrollbar-corner {
  background-color: rgba(0, 0, 0, 0);
}

.scroll::-webkit-scrollbar-thumb {
  min-height: 20%;
  min-height: 65px;
  border: 4px solid rgb(var(--em-rgb-background));
  border-radius: 8px;
}

.scroll::-webkit-scrollbar-thumb:hover {
  background-color: var(--em-color-border-over) !important;
}

.scroll:hover::-webkit-scrollbar-thumb {
  background-color: var(--em-color-border);
}

.sticky {
  z-index: 1;
  background-color: rgba(var(--em-rgb-background), .9);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  font-weight: 500;
  position: sticky;
  top: -1px;
}

[dir="rtl"] .search input[type="search"] {
  padding: 10px 2.2em 10px 2em;
}

[dir="rtl"] .search .loupe {
  left: auto;
  right: .7em;
}

[dir="rtl"] .search .delete {
  left: .7em;
  right: auto;
}

.search {
  z-index: 2;
  position: relative;
}

.search input, .search button {
  font-size: calc(var(--font-size)  - 1px);
}

.search input[type="search"] {
  width: 100%;
  background-color: var(--em-color-border);
  transition-duration: var(--duration);
  transition-property: background-color, box-shadow;
  transition-timing-function: var(--easing);
  border: 0;
  border-radius: 10px;
  outline: 0;
  padding: 10px 2em 10px 2.2em;
  display: block;
}

.search input[type="search"]::-ms-input-placeholder {
  color: inherit;
  opacity: .6;
}

.search input[type="search"]::placeholder {
  color: inherit;
  opacity: .6;
}

.search input[type="search"], .search input[type="search"]::-webkit-search-decoration, .search input[type="search"]::-webkit-search-cancel-button, .search input[type="search"]::-webkit-search-results-button, .search input[type="search"]::-webkit-search-results-decoration {
  -webkit-appearance: none;
  -ms-appearance: none;
  appearance: none;
}

.search input[type="search"]:focus {
  background-color: rgb(var(--em-rgb-input));
  box-shadow: inset 0 0 0 1px rgb(var(--em-rgb-accent)), 0 1px 3px rgba(65, 69, 73, .2);
}

.search .icon {
  z-index: 1;
  color: rgba(var(--em-rgb-color), .7);
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}

.search .loupe {
  pointer-events: none;
  left: .7em;
}

.search .delete {
  right: .7em;
}

svg {
  fill: currentColor;
  width: 1em;
  height: 1em;
}

button {
  -webkit-appearance: none;
  -ms-appearance: none;
  appearance: none;
  cursor: pointer;
  color: currentColor;
  background-color: rgba(0, 0, 0, 0);
  border: 0;
}

#nav {
  z-index: 2;
  padding-top: 12px;
  padding-bottom: 12px;
  padding-right: var(--sidebar-width);
  position: relative;
}

#nav button {
  color: var(--color-b);
  transition: color var(--duration) var(--easing);
}

#nav button:hover {
  color: var(--color-a);
}

#nav svg, #nav img {
  width: var(--category-icon-size);
  height: var(--category-icon-size);
}

#nav[dir="rtl"] .bar {
  left: auto;
  right: 0;
}

#nav .bar {
  width: 100%;
  height: 3px;
  background-color: rgb(var(--em-rgb-accent));
  transition: transform var(--duration) var(--easing);
  border-radius: 3px 3px 0 0;
  position: absolute;
  bottom: -12px;
  left: 0;
}

#nav button[aria-selected] {
  color: rgb(var(--em-rgb-accent));
}

#preview {
  z-index: 2;
  padding: calc(var(--padding)  + 4px) var(--padding);
  padding-right: var(--sidebar-width);
  position: relative;
}

#preview .preview-placeholder {
  font-size: var(--preview-placeholder-size);
}

#preview .preview-title {
  font-size: var(--preview-title-size);
}

#preview .preview-subtitle {
  font-size: var(--preview-subtitle-size);
}

#nav:before, #preview:before {
  content: "";
  height: 2px;
  position: absolute;
  left: 0;
  right: 0;
}

#nav[data-position="top"]:before, #preview[data-position="top"]:before {
  background: linear-gradient(to bottom, var(--em-color-border), transparent);
  top: 100%;
}

#nav[data-position="bottom"]:before, #preview[data-position="bottom"]:before {
  background: linear-gradient(to top, var(--em-color-border), transparent);
  bottom: 100%;
}

.category:last-child {
  min-height: calc(100% + 1px);
}

.category button {
  font-family: -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;
  position: relative;
}

.category button > * {
  position: relative;
}

.category button .background {
  opacity: 0;
  background-color: var(--em-color-border);
  transition: opacity var(--duration-fast) var(--easing) var(--duration-instant);
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}

.category button:hover .background {
  transition-duration: var(--duration-instant);
  transition-delay: 0s;
}

.category button[aria-selected] .background {
  opacity: 1;
}

.category button[data-keyboard] .background {
  transition: none;
}

.row {
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

.skin-tone-button {
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 100%;
}

.skin-tone-button:hover {
  border-color: var(--em-color-border);
}

.skin-tone-button:active .skin-tone {
  transform: scale(.85) !important;
}

.skin-tone-button .skin-tone {
  transition: transform var(--duration) var(--easing);
}

.skin-tone-button[aria-selected] {
  background-color: var(--em-color-border);
  border-top-color: rgba(0, 0, 0, .05);
  border-bottom-color: rgba(0, 0, 0, 0);
  border-left-width: 0;
  border-right-width: 0;
}

.skin-tone-button[aria-selected] .skin-tone {
  transform: scale(.9);
}

.menu {
  z-index: 2;
  white-space: nowrap;
  border: 1px solid var(--em-color-border);
  background-color: rgba(var(--em-rgb-background), .9);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  transition-property: opacity, transform;
  transition-duration: var(--duration);
  transition-timing-function: var(--easing);
  border-radius: 10px;
  padding: 4px;
  position: absolute;
  box-shadow: 1px 1px 5px rgba(0, 0, 0, .05);
}

.menu.hidden {
  opacity: 0;
}

.menu[data-position="bottom"] {
  transform-origin: 100% 100%;
}

.menu[data-position="bottom"].hidden {
  transform: scale(.9)rotate(-3deg)translateY(5%);
}

.menu[data-position="top"] {
  transform-origin: 100% 0;
}

.menu[data-position="top"].hidden {
  transform: scale(.9)rotate(3deg)translateY(-5%);
}

.menu input[type="radio"] {
  clip: rect(0 0 0 0);
  width: 1px;
  height: 1px;
  border: 0;
  margin: 0;
  padding: 0;
  position: absolute;
  overflow: hidden;
}

.menu input[type="radio"]:checked + .option {
  box-shadow: 0 0 0 2px rgb(var(--em-rgb-accent));
}

.option {
  width: 100%;
  border-radius: 6px;
  padding: 4px 6px;
}

.option:hover {
  color: #fff;
  background-color: rgb(var(--em-rgb-accent));
}

.skin-tone {
  width: 16px;
  height: 16px;
  border-radius: 100%;
  display: inline-block;
  position: relative;
  overflow: hidden;
}

.skin-tone:after {
  content: "";
  mix-blend-mode: overlay;
  background: linear-gradient(rgba(255, 255, 255, .2), rgba(0, 0, 0, 0));
  border: 1px solid rgba(0, 0, 0, .8);
  border-radius: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  box-shadow: inset 0 -2px 3px #000, inset 0 1px 2px #fff;
}

.skin-tone-1 {
  background-color: #ffc93a;
}

.skin-tone-2 {
  background-color: #ffdab7;
}

.skin-tone-3 {
  background-color: #e7b98f;
}

.skin-tone-4 {
  background-color: #c88c61;
}

.skin-tone-5 {
  background-color: #a46134;
}

.skin-tone-6 {
  background-color: #5d4437;
}

[data-index] {
  justify-content: space-between;
}

[data-emoji-set="twitter"] .skin-tone:after {
  box-shadow: none;
  border-color: rgba(0, 0, 0, .5);
}

[data-emoji-set="twitter"] .skin-tone-1 {
  background-color: #fade72;
}

[data-emoji-set="twitter"] .skin-tone-2 {
  background-color: #f3dfd0;
}

[data-emoji-set="twitter"] .skin-tone-3 {
  background-color: #eed3a8;
}

[data-emoji-set="twitter"] .skin-tone-4 {
  background-color: #cfad8d;
}

[data-emoji-set="twitter"] .skin-tone-5 {
  background-color: #a8805d;
}

[data-emoji-set="twitter"] .skin-tone-6 {
  background-color: #765542;
}

[data-emoji-set="google"] .skin-tone:after {
  box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, .4);
}

[data-emoji-set="google"] .skin-tone-1 {
  background-color: #f5c748;
}

[data-emoji-set="google"] .skin-tone-2 {
  background-color: #f1d5aa;
}

[data-emoji-set="google"] .skin-tone-3 {
  background-color: #d4b48d;
}

[data-emoji-set="google"] .skin-tone-4 {
  background-color: #aa876b;
}

[data-emoji-set="google"] .skin-tone-5 {
  background-color: #916544;
}

[data-emoji-set="google"] .skin-tone-6 {
  background-color: #61493f;
}

[data-emoji-set="facebook"] .skin-tone:after {
  border-color: rgba(0, 0, 0, .4);
  box-shadow: inset 0 -2px 3px #000, inset 0 1px 4px #fff;
}

[data-emoji-set="facebook"] .skin-tone-1 {
  background-color: #f5c748;
}

[data-emoji-set="facebook"] .skin-tone-2 {
  background-color: #f1d5aa;
}

[data-emoji-set="facebook"] .skin-tone-3 {
  background-color: #d4b48d;
}

[data-emoji-set="facebook"] .skin-tone-4 {
  background-color: #aa876b;
}

[data-emoji-set="facebook"] .skin-tone-5 {
  background-color: #916544;
}

[data-emoji-set="facebook"] .skin-tone-6 {
  background-color: #61493f;
}

`;function zLe(n){const e=S.useRef(null),t=S.useRef(null);return t.current&&t.current.update(n),S.useEffect(()=>(t.current=new GU({...n,ref:e}),()=>{t.current=null}),[]),re.createElement("div",{ref:e})}var NX="https://cdn.jsdelivr.net/npm/@emoji-mart/data",db={};function HLe(n){var e=n.theme,t=n.onSelectEmoji,r=n.disableRecent,i=n.customEmojis,s=n.language,o=S.useMemo(function(){var h=[];return r||h.push("frequent"),h=[].concat(mfe(h),["people","nature","foods","activity","places","objects","symbols","flags"]),h},[r]),a=S.useState(void 0),c=sh(a,2),u=c[0],d=c[1];return S.useEffect(function(){var h;if(!s){var f;if(db.en){d(db.en);return}fetch("".concat(NX,"/i18n/en.json")).then(function(p){return(f=f||AI(Hf().mark(function x(y){var b;return Hf().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,y.json();case 2:b=C.sent,d(b),db.en=b;case 5:case"end":return C.stop()}},x)}))).apply(this,arguments)}).catch(function(p){console.error("Failed to load translations:",p)});return}if(db[s]){d(db[s]);return}fetch("".concat(NX,"/i18n/").concat(s,".json")).then(function(p){return(h=h||AI(Hf().mark(function x(y){var b;return Hf().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,y.json();case 2:b=C.sent,d(b),db[s]=b;case 5:case"end":return C.stop()}},x)}))).apply(this,arguments)}).catch(function(p){console.error("Failed to load translations:",p)})},[s]),u?re.createElement(zLe,{data:void 0,theme:e,previewPosition:"none",onEmojiSelect:t,custom:i,categories:o,set:"apple",i18n:u}):null}var WLe=S.memo(HLe);function jX(n){var e=n.showPicker,t=n.theme,r=n.handleSelectEmoji,i=n.disableRecent,s=n.customEmojis,o=n.position,a=n.language;return re.createElement("div",{className:"react-emoji-picker--container"},e&&re.createElement("div",{className:"react-emoji-picker--wrapper",onClick:function(u){return u.stopPropagation()},style:o==="below"?{top:"40px"}:{}},re.createElement("div",{className:"react-emoji-picker"},re.createElement(WLe,{theme:t,onSelectEmoji:r,disableRecent:i,customEmojis:s,language:a}))))}var qLe=435,GLe=function(e){var t=e.theme,r=e.keepOpened,i=e.disableRecent,s=e.customEmojis,o=e.addSanitizeFn,a=e.addPolluteFn,c=e.appendContent,u=e.buttonElement,d=e.buttonRef,h=e.language,f=S.useState(!1),p=sh(f,2),x=p[0],y=p[1],b=S.useState(),_=sh(b,2),C=_[0],k=_[1],T=S.useState(),E=sh(T,2),N=E[0],P=E[1];S.useEffect(function(){x&&S5e()},[x]),S.useEffect(function(){o(mP)},[o]),S.useEffect(function(){a(gfe)},[a]),S.useEffect(function(){function D(F){var K=F.target;K.classList.contains("react-input-emoji--button")||K.classList.contains("react-input-emoji--button--icon")||y(!1)}return document.addEventListener("click",D),function(){document.removeEventListener("click",D)}},[]);function M(D){D.stopPropagation(),D.preventDefault(),P(O(D)),y(function(F){return!F})}function O(D){var F=D.currentTarget,K=F.getBoundingClientRect(),ee=qLe;return K.top>=ee?"above":"below"}function q(D){c(w5e(D)),r||y(function(F){return!F})}return S.useEffect(function(){var D;d!=null&&(D=d.current)!==null&&D!==void 0&&D.style?(d.current.style.position="relative",k(d.current)):u!=null&&u.style&&(u.style.position="relative",k(u))},[d,u]),C?R9.createPortal(re.createElement(re.Fragment,null,re.createElement(jX,{showPicker:x,theme:t,handleSelectEmoji:q,disableRecent:i,customEmojis:s,position:N,language:h}),re.createElement(oX,{showPicker:x,toggleShowPicker:M,buttonElement:C,buttonRef:d})),C):re.createElement(re.Fragment,null,re.createElement(jX,{showPicker:x,theme:t,handleSelectEmoji:q,disableRecent:i,customEmojis:s,position:N,language:h}),re.createElement(oX,{showPicker:x,toggleShowPicker:M}))};function KLe(){var n=Wfe();if(!n)return null;var e=n.text.substring(n.begin,n.end);return e||null}function YLe(){var n=Wfe();n&&n.element.deleteData(n.begin,n.end-n.begin)}function Wfe(){var n=QB();if(!n)return null;var e=n.element,t=n.caretOffset,r=e.textContent,i=r.lastIndexOf("@");return i===-1||i>=t||i!==0&&r[i-1]!==" "?null:{begin:i,end:t,text:r,element:e}}function QB(){var n=XLe();if(n===null)return null;var e=0;if(typeof window.getSelection<"u"){var t=window.getSelection().getRangeAt(0),r=t.cloneRange();r.selectNodeContents(n),r.setEnd(t.endContainer,t.endOffset),e=r.toString().length}else if(typeof document.selection<"u"&&document.selection.type!="Control"){var i=document.selection.createRange(),s=document.body.createTextRange();s.moveToElementText(n),s.setEndPoint("EndToEnd",i),e=s.text.length}return{element:n,caretOffset:e}}function XLe(){var n=document.getSelection().anchorNode;return(n==null?void 0:n.nodeType)==3?n:null}function JLe(n){var e,t=S.useState(!1),r=sh(t,2),i=r[0],s=r[1],o=S.useState([]),a=sh(o,2),c=a[0],u=a[1],d=S.useState(null),h=sh(d,2),f=h[0],p=h[1],x=S.useCallback(function(){YLe(),u([])},[]),y=S.useCallback(AI(Hf().mark(function C(){var k,T;return Hf().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(k=KLe(),p(k),k!==null){N.next=6;break}u([]),N.next=12;break;case 6:return s(!0),N.next=9,n(k);case 9:T=N.sent,s(!1),u(T);case 12:case"end":return N.stop()}},C)})),[n]),b=S.useCallback(function(C){return(e=e||AI(Hf().mark(function k(T){var E,N;return Hf().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(typeof n=="function"){M.next=2;break}return M.abrupt("return");case 2:T.key==="Backspace"&&(E=QB())!==null&&E!==void 0&&E.element.parentElement.hasAttribute("data-mention-id")?(N=QB(),N.element.parentElement.remove()):["ArrowUp","ArrowDown","Esc","Escape"].includes(T.key)||y();case 3:case"end":return M.stop()}},k)}))).apply(this,arguments)},[y,n]),_=S.useCallback(function(){y()},[y]);return{mentionSearchText:f,mentionUsers:c,onKeyUp:b,onFocus:_,onSelectUser:x,loading:i}}var QLe=function(e,t){var r=e.users,i=e.mentionSearchText,s=e.onSelect,o=e.addEventListener,a=S.useState(0),c=sh(a,2),u=c[0],d=c[1];S.useImperativeHandle(t,function(){return{prevUser:function(){d(function(y){return y===0?0:y-1})},nextUser:function(){d(function(y){return y===r.length-1?r.length-1:y+1})}}}),S.useEffect(function(){d(0)},[r]);function h(x,y){return'<span class="react-input-emoji--mention--item--name__selected" data-testid="metion-selected-word">'.concat(x,"</span>").concat(y)}var f=S.useMemo(function(){var x=i?i.substring(1).toLocaleLowerCase():"";return r.map(function(y){var b=y.name;if(i&&i.length>1)if(y.name.toLowerCase().startsWith(x))b=h(y.name.substring(0,x.length),y.name.substring(x.length));else{var _=y.name.split(" ");b=_.map(function(C){return C.toLocaleLowerCase().startsWith(x)?h(C.substring(0,x.length),C.substring(x.length)):C}).join(" ")}return eX(eX({},y),{},{nameHtml:b})})},[i,r]);function p(x){return function(y){y.stopPropagation(),y.preventDefault(),s(x)}}return S.useEffect(function(){var x=o("enter",function(y){y.stopPropagation(),y.preventDefault(),s(f[u])});return function(){x()}},[o,s,u,f]),re.createElement("ul",{className:"react-input-emoji--mention--list","data-testid":"mention-user-list"},f.map(function(x,y){return re.createElement("li",{key:x.id},re.createElement("button",{type:"button",onClick:p(x),className:"react-input-emoji--mention--item".concat(u===y?" react-input-emoji--mention--item__selected":""),onMouseOver:function(){return d(y)}},re.createElement("img",{className:"react-input-emoji--mention--item--img",src:x.image}),re.createElement("div",{className:"react-input-emoji--mention--item--name",dangerouslySetInnerHTML:{__html:x.nameHtml}})))}))},ZLe=S.forwardRef(QLe),e6e=function(e){var t=e.searchMention,r=e.addEventListener,i=e.appendContent,s=e.addSanitizeFn,o=S.useRef(null),a=S.useState(!1),c=sh(a,2),u=c[0],d=c[1],h=JLe(t),f=h.mentionSearchText,p=h.mentionUsers,x=h.loading,y=h.onKeyUp,b=h.onFocus,_=h.onSelectUser;S.useEffect(function(){s(function(k){var T=document.createElement("div");T.innerHTML=k;var E=Array.prototype.slice.call(T.querySelectorAll(".react-input-emoji--mention--text"));return E.forEach(function(N){T.innerHTML=T.innerHTML.replace(N.outerHTML,"@[".concat(N.dataset.mentionName,"](userId:").concat(N.dataset.mentionId,")"))}),T.innerHTML})},[s]),S.useEffect(function(){d(p.length>0)},[p]),S.useEffect(function(){function k(){d(!1)}return document.addEventListener("click",k),function(){document.removeEventListener("click",k)}},[]),S.useEffect(function(){var k=r("keyUp",y);return function(){k()}},[r,y]),S.useEffect(function(){function k(E){switch(E.key){case"Esc":case"Escape":d(!1);break}}var T=r("keyDown",k);return function(){T()}},[r]),S.useEffect(function(){var k=r("focus",b);return function(){k()}},[r,b]),S.useEffect(function(){if(u){var k=r("arrowUp",function(E){E.stopPropagation(),E.preventDefault(),o.current.prevUser()}),T=r("arrowDown",function(E){E.stopPropagation(),E.preventDefault(),o.current.nextUser()});return function(){k(),T()}}},[r,u]);function C(k){_(),i('<span class="react-input-emoji--mention--text" data-mention-id="'.concat(k.id,'" data-mention-name="').concat(k.name,'">@').concat(k.name,"</span> "))}return re.createElement(re.Fragment,null,x?re.createElement("div",{className:"react-input-emoji--mention--container"},re.createElement("div",{className:"react-input-emoji--mention--loading"},re.createElement("div",{className:"react-input-emoji--mention--loading--spinner"},"Loading..."))):u&&re.createElement("div",{className:"react-input-emoji--mention--container",onClick:function(T){return T.stopPropagation()}},re.createElement(ZLe,{ref:o,mentionSearchText:f,users:p,onSelect:C,addEventListener:r})))};function Fv(){var n=[];return{subscribe:function(t){return n.push(t),function(){n=n.filter(function(r){return r!==t})}},publish:function(t){n.forEach(function(r){return r(t)})},get currentListerners(){return n}}}function t6e(){var n=S.useMemo(function(){return{keyDown:Fv(),keyUp:Fv(),arrowUp:Fv(),arrowDown:Fv(),enter:Fv(),focus:Fv(),blur:Fv()}},[]),e=S.useCallback(function(t,r){return n[t].subscribe(r)},[n]);return{addEventListener:e,listeners:n}}function n6e(){var n=S.useRef([]),e=S.useCallback(function(r){n.current.push(r)},[]),t=S.useCallback(function(r){var i=n.current.reduce(function(s,o){return o(s)},r);return i},[]);return{addPolluteFn:e,pollute:t}}function r6e(n,e){var t=n.onChange,r=n.onEnter,i=n.onResize,s=n.onClick,o=n.onFocus,a=n.onBlur,c=n.onKeyDown,u=n.theme,d=n.cleanOnEnter,h=n.placeholder,f=n.maxLength,p=n.keepOpened,x=n.inputClass,y=n.disableRecent,b=n.tabIndex,_=n.value,C=n.customEmojis,k=n.language,T=n.searchMention,E=n.buttonElement,N=n.buttonRef,P=n.shouldReturn,M=n.shouldConvertEmojiToImage,O=n.borderRadius,q=n.borderColor,D=n.fontSize,F=n.fontFamily,K=n.background,ee=n.placeholderColor,Y=n.color,U=S.useRef(null),R=t6e(),z=R.addEventListener,W=R.listeners,se=xfe(P,M),ne=se.addSanitizeFn,te=se.sanitize,H=se.sanitizedTextRef,ce=n6e(),pe=ce.addPolluteFn,oe=ce.pollute,ve=S.useCallback(function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";U.current!==null&&(U.current.html=gfe(ge),H.current=ge)},[H]),be=S.useCallback(function(ge){ve(ge)},[ve]),fe=Z5e(U,i,t);Q5e({ref:e,setValue:be,textInputRef:U,emitChange:fe,shouldConvertEmojiToImage:M}),S.useEffect(function(){H.current!==_&&be(_)},[H,be,_]),S.useEffect(function(){function ge(Ee){if(typeof f<"u"&&Ee.key!=="Backspace"&&U.current!==null&&rX(U.current)>=f&&Ee.preventDefault(),Ee.key==="Enter"&&U.current){Ee.preventDefault();var Be=te(U.current.html);return fe(H.current),typeof r=="function"&&W.enter.currentListerners.length===0&&r(Be),d&&W.enter.currentListerners.length===0&&ve(""),typeof c=="function"&&c(Ee.nativeEvent),!1}return typeof c=="function"&&c(Ee.nativeEvent),!0}var he=z("keyDown",ge);return function(){he()}},[z,d,fe,W.enter.currentListerners.length,f,r,c,te,H,ve]),S.useEffect(function(){function ge(){typeof s=="function"&&s(),typeof o=="function"&&o()}var he=z("focus",ge);return function(){he()}},[z,s,o]),S.useEffect(function(){function ge(){typeof a=="function"&&a()}var he=z("blur",ge);return function(){he()}},[z,a]);function we(ge){te(ge),_!==H.current&&fe(H.current)}function ue(ge){typeof f<"u"&&U.current!==null&&rX(U.current)>=f||U.current!==null&&U.current.appendContent(ge)}function Z(ge){ge.preventDefault();var he;ge.clipboardData&&(he=ge.clipboardData.getData("text/plain"),he=oe(he),document.execCommand("insertHTML",!1,he))}return re.createElement("div",{className:"react-emoji"},re.createElement(e6e,{searchMention:T,addEventListener:z,appendContent:ue,addSanitizeFn:ne}),re.createElement(nLe,{ref:U,onCopy:_5e,onPaste:Z,shouldReturn:P,onBlur:W.blur.publish,onFocus:W.focus.publish,onArrowUp:W.arrowUp.publish,onArrowDown:W.arrowDown.publish,onKeyUp:W.keyUp.publish,onKeyDown:W.keyDown.publish,onEnter:W.enter.publish,placeholder:h,style:{borderRadius:O,borderColor:q,fontSize:D,fontFamily:F,background:K,placeholderColor:ee,color:Y},tabIndex:b,className:x,onChange:we}),re.createElement(GLe,{theme:u,keepOpened:p,disableRecent:y,customEmojis:C,addSanitizeFn:ne,addPolluteFn:pe,appendContent:ue,buttonElement:E,buttonRef:N,language:k}))}var qfe=S.forwardRef(r6e);qfe.defaultProps={theme:"auto",height:30,placeholder:"Type a message",borderRadius:21,borderColor:"#EAEAEA",color:"black",fontSize:15,fontFamily:"sans-serif",background:"white",tabIndex:0,shouldReturn:!1,shouldConvertEmojiToImage:!1,customEmojis:[],language:void 0};const EM=S.forwardRef(({className:n,value:e,onChange:t,placeholder:r,rows:i=3,disabled:s,maxLength:o,...a},c)=>l.jsx("div",{ref:c,className:Qe("w-full",n),...a,children:l.jsx("div",{className:Qe("border border-input rounded-md bg-background",s&&"opacity-60 cursor-not-allowed"),style:{minHeight:`${i*20+16}px`},children:l.jsx(qfe,{value:e,onChange:t,placeholder:r,cleanOnEnter:!0,onEnter:()=>{},maxLength:o,shouldReturn:!1,shouldConvertEmojiToImage:!1,inputClass:"emoji-input w-full p-3 text-sm focus:outline-none bg-transparent resize-none"})})}));EM.displayName="EmojiTextarea";function i6e({review:n,onVoteHelpful:e,onReply:t}){const[r,i]=S.useState(!1),[s,o]=S.useState(!1),[a,c]=S.useState(!1),[u,d]=S.useState(""),[h,f]=S.useState(""),[p,x]=S.useState(!1),[y,b]=S.useState(!1),[_,C]=S.useState(""),[k,T]=S.useState(!1),[E,N]=S.useState([]),[P,M]=S.useState(!1),O=async()=>{try{o(!0),await e(n.id)}catch(z){console.error("Error voting helpful:",z)}finally{o(!1)}},q=async()=>{try{x(!0),await ot(`${Ge()}/api/reviews/${n.id}/report`,{method:"POST",body:JSON.stringify({reason:u||"Inappropriate content",description:h})}),Ae.success("Báo cáo đánh giá thành công"),c(!1),d(""),f("")}catch(z){console.error("Error reporting review:",z),Ae.error(z.message||"Không thể báo cáo đánh giá")}finally{x(!1)}},D=async()=>{if(!_.trim()){Ae.error("Vui lòng nhập nội dung trả lời");return}try{T(!0),await ot(`${Ge()}/api/reviews/${n.id}/reply`,{method:"POST",body:JSON.stringify({content:_.trim()})}),Ae.success("Trả lời đánh giá thành công"),b(!1),C(""),r&&F()}catch(z){console.error("Error replying to review:",z),Ae.error(z.message||"Không thể trả lời đánh giá")}finally{T(!1)}},F=async()=>{try{M(!0);const z=await ot(`${Ge()}/api/reviews/${n.id}/replies`);N(z)}catch(z){console.error("Error fetching replies:",z)}finally{M(!1)}},K=async()=>{!r&&E.length===0&&await F(),i(!r)},ee=z=>new Date(z).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}),Y=(z,W)=>`${z.charAt(0)}${W.charAt(0)}`.toUpperCase(),U=z=>Array.from({length:5},(W,se)=>l.jsx(ki,{className:`w-4 h-4 ${se<z?"text-yellow-400 fill-current":"text-gray-300"}`},se)),R=n.images?JSON.parse(n.images):[];return l.jsxs(tt,{className:"w-full",children:[l.jsx(dt,{className:"pb-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(p_,{className:"w-10 h-10",children:[l.jsx(iE,{src:n.user.avatar}),l.jsx(g_,{className:"bg-blue-100 text-blue-600",children:Y(n.user.firstName,n.user.lastName)})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:[n.user.firstName," ",n.user.lastName]}),n.isVerified&&l.jsx(iS,{className:"w-4 h-4 text-green-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx(er,{className:"w-3 h-3"}),l.jsx("span",{children:ee(n.createdAt)})]})]})]}),l.jsx("div",{className:"flex items-center gap-1",children:U(n.rating)})]})}),l.jsxs(nt,{className:"pt-0",children:[n.title&&l.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:n.title}),l.jsx("p",{className:"text-gray-700 text-sm leading-relaxed mb-3",children:n.content}),R.length>0&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-3",children:R.map((z,W)=>l.jsx("img",{src:z,alt:`Review image ${W+1}`,className:"w-full h-24 object-cover rounded-lg"},W))}),l.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(Ce,{variant:"ghost",size:"sm",onClick:O,disabled:s,className:"text-gray-600 hover:text-blue-600",children:[l.jsx(Gae,{className:"w-4 h-4 mr-1"}),"Hữu ích (",n.helpfulVotes,")"]}),l.jsxs(Ce,{variant:"ghost",size:"sm",onClick:()=>b(!y),className:"text-gray-600 hover:text-blue-600",children:[l.jsx(_Ce,{className:"w-4 h-4 mr-1"}),y?"Hủy":"Trả lời"]}),l.jsxs(Ce,{variant:"ghost",size:"sm",onClick:()=>c(!0),className:"text-gray-600 hover:text-red-600",children:[l.jsx(bCe,{className:"w-4 h-4 mr-1"}),"Báo cáo"]})]}),n.replyCount>0&&l.jsxs(Ce,{variant:"ghost",size:"sm",onClick:K,disabled:P,className:"text-blue-600 hover:text-blue-700",children:[P?"Đang tải...":r?"Ẩn":"Xem"," ",n.replyCount," trả lời"]})]}),l.jsx(Hl,{open:a,onOpenChange:c,children:l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Báo cáo đánh giá"}),l.jsx(Wu,{children:"Vui lòng cho chúng tôi biết lý do bạn báo cáo đánh giá này."})]}),l.jsxs("div",{className:"space-y-4 py-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Lý do"}),l.jsxs("select",{className:"w-full mt-1 border rounded-md p-2",value:u,onChange:z=>d(z.target.value),children:[l.jsx("option",{value:"",children:"Chọn lý do"}),l.jsx("option",{value:"Inappropriate content",children:"Nội dung không phù hợp"}),l.jsx("option",{value:"Spam",children:"Spam"}),l.jsx("option",{value:"Fake review",children:"Đánh giá giả mạo"}),l.jsx("option",{value:"Offensive language",children:"Ngôn ngữ xúc phạm"}),l.jsx("option",{value:"Other",children:"Khác"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Mô tả chi tiết (tùy chọn)"}),l.jsx(is,{placeholder:"Nhập mô tả chi tiết về vấn đề...",value:h,onChange:z=>f(z.target.value),rows:3,className:"mt-1"})]})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{disabled:p,children:"Hủy"}),l.jsx(qu,{onClick:q,disabled:p,className:"bg-red-600 hover:bg-red-700",children:p?"Đang gửi...":"Báo cáo"})]})]})}),y&&l.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Viết phản hồi của bạn"}),l.jsx(EM,{placeholder:"Nhập phản hồi của bạn...",value:_,onChange:C,rows:3,className:"mt-1"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>{b(!1),C("")},disabled:k,children:"Hủy"}),l.jsx(Ce,{size:"sm",onClick:D,disabled:k||!_.trim(),className:"bg-blue-600 hover:bg-blue-700",children:k?"Đang gửi...":"Gửi phản hồi"})]})]})}),r&&l.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-gray-100",children:P?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Đang tải phản hồi..."})]}):E.length>0?E.map(z=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(p_,{className:"w-6 h-6",children:l.jsx(g_,{className:"bg-gray-100 text-gray-600 text-xs",children:Y(z.replyUser.firstName,z.replyUser.lastName)})}),l.jsxs("span",{className:"font-medium text-sm",children:[z.replyUser.firstName," ",z.replyUser.lastName]}),l.jsx("span",{className:"text-xs text-gray-500",children:ee(z.createdAt)})]}),l.jsx("p",{className:"text-sm text-gray-700 ml-8",children:z.content})]},z.id)):l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-sm text-gray-500",children:"Chưa có phản hồi nào"})})})]})]})}var s6e="Label",Gfe=S.forwardRef((n,e)=>l.jsx(kt.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Gfe.displayName=s6e;var Kfe=Gfe;const o6e=hA("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Se=S.forwardRef(({className:n,...e},t)=>l.jsx(Kfe,{ref:t,className:Qe(o6e(),n),...e}));Se.displayName=Kfe.displayName;function a6e({tourId:n,onReviewSubmitted:e,onCancel:t}){const[r,i]=S.useState(0),[s,o]=S.useState(0),[a,c]=S.useState(""),[u,d]=S.useState(""),[h,f]=S.useState([]),[p,x]=S.useState(!1),y=N=>{i(N)},b=N=>{o(N)},_=()=>{o(0)},C=N=>{const P=N.target.files;if(P){const M=[];Array.from(P).forEach(O=>{if(O.type.startsWith("image/")){const q=new FileReader;q.onload=D=>{var F;(F=D.target)!=null&&F.result&&(M.push(D.target.result),M.length===Array.from(P).length&&f(K=>[...K,...M]))},q.readAsDataURL(O)}})}},k=N=>{f(P=>P.filter((M,O)=>O!==N))},T=async N=>{if(N.preventDefault(),r===0){Ae.error("Vui lòng chọn đánh giá");return}if(!u.trim()){Ae.error("Vui lòng nhập nội dung đánh giá");return}try{x(!0);const P={tourId:n,rating:r,title:a.trim()||null,content:u.trim(),images:h.length>0?h:null};await ot(`${Ge()}/api/reviews`,{method:"POST",body:JSON.stringify(P)}),Ae.success("Đánh giá đã được gửi thành công!"),e()}catch(P){console.error("Error submitting review:",P),Ae.error(P.message||"Không thể gửi đánh giá. Vui lòng thử lại.")}finally{x(!1)}},E=()=>Array.from({length:5},(N,P)=>{const M=P+1,O=M<=(s||r);return l.jsx("button",{type:"button",className:"focus:outline-none",onClick:()=>y(M),onMouseEnter:()=>b(M),onMouseLeave:_,children:l.jsx(ki,{className:`w-8 h-8 transition-colors ${O?"text-yellow-400 fill-current":"text-gray-300"}`})},P)});return l.jsxs(tt,{className:"w-full",children:[l.jsx(dt,{children:l.jsx(pt,{children:"Viết đánh giá"})}),l.jsx(nt,{children:l.jsxs("form",{onSubmit:T,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{children:"Đánh giá *"}),l.jsxs("div",{className:"flex items-center gap-1",children:[E(),l.jsx("span",{className:"ml-2 text-sm text-gray-600",children:r>0&&(r===1?"Rất tệ":r===2?"Tệ":r===3?"Bình thường":r===4?"Tốt":"Rất tốt")})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"title",children:"Tiêu đề (tùy chọn)"}),l.jsx(We,{id:"title",placeholder:"Nhập tiêu đề cho đánh giá của bạn...",value:a,onChange:N=>c(N.target.value),maxLength:200})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"content",children:"Nội dung đánh giá *"}),l.jsx(EM,{placeholder:"Chia sẻ trải nghiệm của bạn về tour này...",value:u,onChange:d,rows:4,maxLength:1e3}),l.jsxs("p",{className:"text-xs text-gray-500",children:[u.length,"/1000 ký tự"]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{children:"Hình ảnh (tùy chọn)"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"file",id:"images",multiple:!0,accept:"image/*",onChange:C,className:"hidden"}),l.jsxs(Se,{htmlFor:"images",className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[l.jsx(Kae,{className:"w-4 h-4"}),"Chọn hình ảnh"]}),l.jsx("span",{className:"text-xs text-gray-500",children:"Tối đa 5 hình ảnh"})]}),h.length>0&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:h.map((N,P)=>l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:N,alt:`Review image ${P+1}`,className:"w-full h-24 object-cover rounded-lg"}),l.jsx("button",{type:"button",onClick:()=>k(P),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:l.jsx(si,{className:"w-3 h-3"})})]},P))})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx(Ce,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Hủy"}),l.jsx(Ce,{type:"submit",disabled:p||r===0||!u.trim(),className:"flex-1",children:p?"Đang gửi...":"Gửi đánh giá"})]})]})})]})}function l6e({tourId:n,averageRating:e,totalReviews:t,onRatingUpdate:r}){const[i,s]=S.useState([]),[o,a]=S.useState(!0),[c,u]=S.useState(!1),[d,h]=S.useState(1),[f,p]=S.useState(1),[x,y]=S.useState(!1),[b,_]=S.useState(null),[C,k]=S.useState(!0);S.useEffect(()=>{E(),T()},[n,d]);const T=async()=>{try{k(!0);const D=await ot(`${Ge()}/api/reviews/tour/${n}/eligibility`);_(D)}catch(D){console.error("Error checking review eligibility:",D),_({canReview:!1,reason:"error",message:"Không thể kiểm tra quyền đánh giá"})}finally{k(!1)}},E=async()=>{try{a(!0);const D=await ot(`${Ge()}/api/reviews/tour/${n}?page=${d}&pageSize=5`,{skipAuth:!0});s(D.reviews),p(D.pagination.totalPages)}catch(D){console.error("Error fetching reviews:",D),Ae.error("Không thể tải đánh giá")}finally{a(!1)}},N=async D=>{try{await ot(`${Ge()}/api/reviews/${D}/helpful`,{method:"POST"}),s(F=>F.map(K=>K.id===D?{...K,helpfulVotes:K.helpfulVotes+1}:K)),Ae.success("Cảm ơn bạn đã đánh giá!")}catch(F){console.error("Error voting helpful:",F),Ae.error(F.message||"Không thể đánh giá hữu ích")}},P=()=>{u(!1),h(1),E(),T(),r&&r(e,t+1),Ae.success("Đánh giá của bạn đã được gửi thành công!")},M=(D,F="md")=>{const K={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return Array.from({length:5},(ee,Y)=>l.jsx(ki,{className:`${K[F]} ${Y<D?"text-yellow-400 fill-current":"text-gray-300"}`},Y))},q=(()=>{const D={5:0,4:0,3:0,2:0,1:0};return i.forEach(F=>{D[F.rating]++}),D})();return l.jsxs("div",{className:"space-y-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(s_,{className:"w-5 h-5"}),"Đánh giá (",t,")"]})}),C?l.jsxs(Ce,{disabled:!0,className:"flex items-center gap-2",children:[l.jsx(Il,{className:"w-4 h-4"}),"Đang kiểm tra..."]}):b!=null&&b.canReview?l.jsxs(Ce,{onClick:()=>u(!0),className:"flex items-center gap-2",children:[l.jsx(Il,{className:"w-4 h-4"}),"Viết đánh giá"]}):l.jsxs("div",{className:"text-right",children:[l.jsxs(Ce,{disabled:!0,variant:"outline",className:"flex items-center gap-2 mb-2",children:[l.jsx(Il,{className:"w-4 h-4"}),"Viết đánh giá"]}),(b==null?void 0:b.reason)==="not_completed"&&l.jsx("div",{className:"text-xs text-gray-500 mt-1 space-y-1"}),(b==null?void 0:b.reason)==="not_authenticated"&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vui lòng đăng nhập để đánh giá tour này"}),(b==null?void 0:b.reason)==="already_reviewed"&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cảm ơn bạn đã đánh giá tour này"})]})]})}),l.jsx(nt,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:e.toFixed(1)}),l.jsx("div",{className:"flex items-center justify-center gap-1 mb-2",children:M(Math.round(e),"lg")}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Dựa trên ",t," đánh giá"]})]}),l.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(D=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm w-8",children:D}),l.jsx(ki,{className:"w-3 h-3 text-yellow-400 fill-current"}),l.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${t>0?q[D]/t*100:0}%`}})}),l.jsx("span",{className:"text-sm text-gray-600 w-8",children:q[D]})]},D))})]})})]}),c&&(b==null?void 0:b.canReview)&&l.jsx(a6e,{tourId:n,onReviewSubmitted:P,onCancel:()=>u(!1)}),l.jsx("div",{className:"space-y-4",children:o?l.jsx("div",{className:"space-y-4",children:[...Array(3)].map((D,F)=>l.jsxs(tt,{className:"animate-pulse",children:[l.jsx(dt,{children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})}),l.jsx(nt,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})]},F))}):i.length>0?l.jsxs(l.Fragment,{children:[i.map(D=>l.jsx(i6e,{review:D,onVoteHelpful:N},D.id)),f>1&&l.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>h(D=>Math.max(1,D-1)),disabled:d===1,children:"Trước"}),l.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,f)},(D,F)=>{const K=F+1;return l.jsx(Ce,{variant:d===K?"default":"outline",size:"sm",onClick:()=>h(K),className:"w-8 h-8 p-0",children:K},K)})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>h(D=>Math.min(f,D+1)),disabled:d===f,children:"Sau"})]})]}):l.jsx(tt,{children:l.jsxs(nt,{className:"text-center py-8",children:[l.jsx(s_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Chưa có đánh giá nào"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Hãy là người đầu tiên chia sẻ trải nghiệm về tour này!"}),l.jsx(Ce,{onClick:()=>u(!0),children:"Viết đánh giá đầu tiên"})]})})})]})}function c6e(){const{id:n}=tA(),e=li(),{toast:t}=tU(),{user:r}=Zr(),[i,s]=S.useState(null),[o,a]=S.useState(!0),[c,u]=S.useState(0),[d,h]=S.useState(!1),[f,p]=S.useState([]),[x,y]=S.useState(null),[b,_]=S.useState([]),[C,k]=S.useState(0),[T,E]=S.useState(0),[N,P]=S.useState(!1);S.useEffect(()=>{n&&(M(n),setTimeout(()=>O(),100))},[n]),S.useEffect(()=>{(async()=>{try{const W=await D0.getTourCategories();_(W||[])}catch{}})()},[]),S.useEffect(()=>{const W=()=>{const se=window.pageYOffset||document.documentElement.scrollTop;P(se>300)};return window.addEventListener("scroll",W),()=>window.removeEventListener("scroll",W)},[]);const M=async W=>{try{a(!0);const se=await D0.getTourById(W);s(se),k(se.averageRating),E(se.totalReviews);const ne=await $b.getTourAvailabilitiesByTour(W);p(ne||[]);const te=new Date,H=(ne||[]).filter(ce=>ce.isAvailable&&new Date(ce.date)>=new Date(te.toDateString())).sort((ce,pe)=>new Date(ce.date).getTime()-new Date(pe.date).getTime());y(H[0]||null)}catch(se){console.error("Error fetching tour details:",se),t({title:"Lỗi",description:"Không thể tải chi tiết tour. Vui lòng thử lại sau.",variant:"destructive"}),e("/tours")}finally{a(!1)}},O=async()=>{if(n)try{const W=await D0.getTourById(n);s(W),k(W.averageRating),E(W.totalReviews)}catch(W){console.error("Error refreshing tour data:",W)}},q=(W,se="VND")=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:se==="VND"?"VND":se}).format(W),D=W=>{if(W<24)return`${W} giờ`;const se=Math.floor(W/24),ne=W%24;return ne===0?`${se} ngày`:`${se} ngày ${ne} giờ`},F=()=>{i&&e(`/tour/${i.id}/book`)},K=async()=>{if(i&&navigator.share)try{await navigator.share({title:i.title,text:i.shortDescription,url:window.location.href})}catch(W){console.log("Error sharing:",W)}else navigator.clipboard.writeText(window.location.href),t({title:"Đã sao chép",description:"Link tour đã được sao chép vào clipboard"})},ee=()=>{h(!d),t({title:d?"Đã bỏ lưu":"Đã lưu",description:d?"Tour đã được bỏ khỏi danh sách yêu thích":"Tour đã được thêm vào danh sách yêu thích"})},Y=async(W,se)=>{k(W),E(se),i&&s({...i,averageRating:W,totalReviews:se}),await O()},U=()=>{window.scrollTo({top:0,behavior:"smooth"})},R=()=>{i!=null&&i.imageUrls&&i.imageUrls.length>0&&u(W=>W===i.imageUrls.length-1?0:W+1)},z=()=>{i!=null&&i.imageUrls&&i.imageUrls.length>0&&u(W=>W===0?i.imageUrls.length-1:W-1)};return o?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),l.jsx("div",{className:"h-96 bg-gray-200 rounded-lg mb-6"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"}),l.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"})]})]})]})})]}):i?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs(Ce,{variant:"ghost",onClick:()=>e("/tours"),className:"mb-6",children:[l.jsx(rh,{className:"w-4 h-4 mr-2"}),"Quay lại danh sách tour"]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.imageUrls&&i.imageUrls.length>0&&l.jsx(tt,{children:l.jsxs(nt,{className:"p-0",children:[l.jsxs("div",{className:"relative h-96 overflow-hidden rounded-t-lg",children:[l.jsx("img",{src:i.imageUrls[c],alt:i.title,className:"w-full h-full object-cover"}),i.imageUrls.length>1&&l.jsxs(l.Fragment,{children:[l.jsx(Ce,{variant:"outline",size:"icon",className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white",onClick:z,children:l.jsx(zR,{className:"w-4 h-4"})}),l.jsx(Ce,{variant:"outline",size:"icon",className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white",onClick:R,children:l.jsx(kg,{className:"w-4 h-4"})})]}),i.imageUrls.length>1&&l.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[c+1," / ",i.imageUrls.length]})]}),i.imageUrls.length>1&&l.jsx("div",{className:"p-4 flex gap-2 overflow-x-auto",children:i.imageUrls.map((W,se)=>l.jsx("button",{onClick:()=>u(se),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 ${se===c?"border-blue-500":"border-gray-200 hover:border-gray-300"}`,children:l.jsx("img",{src:W,alt:`${i.title} ${se+1}`,className:"w-full h-full object-cover"})},se))})]})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(ct,{variant:"secondary",children:(()=>{const W=b.find(se=>se.code===i.category||se.name===i.category);return W?W.name:i.category})()}),i.isFeatured&&l.jsx(ct,{className:"bg-yellow-500 text-white",children:"Nổi bật"})]}),l.jsx(pt,{className:"text-2xl font-bold",children:i.title}),l.jsx("div",{className:"text-gray-600 mt-2 prose max-w-none",dangerouslySetInnerHTML:{__html:i.shortDescription}})]}),l.jsxs("div",{className:"flex gap-2 ml-4",children:[l.jsx(Ce,{variant:"outline",size:"icon",onClick:ee,children:l.jsx(V9,{className:`w-4 h-4 ${d?"fill-red-500 text-red-500":""}`})}),l.jsx(Ce,{variant:"outline",size:"icon",onClick:K,children:l.jsx(kCe,{className:"w-4 h-4"})})]})]})}),l.jsxs(nt,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Xr,{className:"w-5 h-5 text-gray-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Địa điểm"}),l.jsx("p",{className:"font-medium",children:i.location})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_m,{className:"w-5 h-5 text-gray-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Thời gian"}),l.jsx("p",{className:"font-medium",children:(x==null?void 0:x.tripTime)||D(i.duration)})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Bo,{className:"w-5 h-5 text-gray-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Số người"}),l.jsxs("p",{className:"font-medium",children:["Tối đa ",(x==null?void 0:x.maxParticipants)||i.maxParticipants]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ki,{className:"w-5 h-5 text-yellow-500 fill-current"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Đánh giá"}),l.jsxs("p",{className:"font-medium",children:[C.toFixed(1)," (",T,")"]})]})]})]}),l.jsx(Xf,{className:"my-6"}),l.jsxs(bhe,{defaultValue:"description",className:"w-full",children:[l.jsxs(DU,{className:"grid w-full grid-cols-4",children:[l.jsx(Uf,{value:"description",children:"Mô tả"}),l.jsx(Uf,{value:"itinerary",children:"Lịch trình"}),l.jsx(Uf,{value:"details",children:"Chi tiết"}),l.jsxs(Uf,{value:"reviews",children:["Đánh giá (",T,")"]})]}),l.jsx(zf,{value:"description",className:"mt-6",children:l.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",children:l.jsx("div",{dangerouslySetInnerHTML:{__html:i.description}})})}),l.jsx(zf,{value:"itinerary",className:"mt-6",children:(()=>{if(!i.itinerary)return l.jsx("p",{className:"text-gray-500 italic",children:"Chưa có thông tin lịch trình"});try{const W=JSON.parse(i.itinerary);if(Array.isArray(W))return l.jsx("div",{className:"space-y-4",children:W.map((se,ne)=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsxs("div",{className:"font-semibold mb-1",children:["Ngày ",se.day??ne+1,": ",se.title||""]}),se.description?l.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:String(se.description)}}):null]},ne))})}catch{}return l.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:i.itinerary}})})()}),l.jsxs(zf,{value:"details",className:"mt-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[l.jsx(Fr,{className:"w-4 h-4 text-green-500"}),"Bao gồm"]}),(()=>{if(!i.includes)return l.jsx("p",{className:"text-gray-500 italic",children:"Chưa có thông tin"});try{const W=JSON.parse(i.includes);if(Array.isArray(W))return l.jsx("ul",{className:"list-disc pl-5 space-y-1 text-gray-700",children:W.map((se,ne)=>l.jsx("li",{children:String(se)},ne))})}catch{}return l.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:i.includes}})})()]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[l.jsx(si,{className:"w-4 h-4 text-red-500"}),"Không bao gồm"]}),(()=>{if(!i.excludes)return l.jsx("p",{className:"text-gray-500 italic",children:"Chưa có thông tin"});try{const W=JSON.parse(i.excludes);if(Array.isArray(W))return l.jsx("ul",{className:"list-disc pl-5 space-y-1 text-gray-700",children:W.map((se,ne)=>l.jsx("li",{children:String(se)},ne))})}catch{}return l.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:i.excludes}})})()]})]}),i.terms&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h4",{className:"font-semibold mb-3",children:"Điều khoản và điều kiện"}),l.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:i.terms}})]})]}),l.jsx(zf,{value:"reviews",className:"mt-6",children:l.jsx(l6e,{tourId:i.id,averageRating:C,totalReviews:T,onRatingUpdate:Y})})]})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{className:"text-xl",children:"Đặt tour"})}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600",children:q(i.price,i.currency)}),l.jsx("p",{className:"text-sm text-gray-500",children:"Giá cho mỗi người"})]}),l.jsx(Xf,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Đánh giá trung bình"}),l.jsxs("span",{className:"font-medium",children:[C.toFixed(1),"/5"]})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Số đánh giá"}),l.jsx("span",{className:"font-medium",children:T})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Số lượt đặt"}),l.jsx("span",{className:"font-medium",children:i.totalBookings})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Lượt xem"}),l.jsx("span",{className:"font-medium",children:i.viewCount})]})]}),r&&i&&r.id===i.tourGuideId?l.jsx("div",{className:"w-full p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center space-x-2 text-amber-800",children:[l.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),l.jsx("span",{className:"text-sm font-medium",children:"Đây là tour do bạn tạo ra. Bạn không thể đặt tour của chính mình."})]})}):l.jsx(Ce,{onClick:F,className:"w-full",size:"lg",children:"Đặt tour ngay"})]})]}),f&&f.length>0&&l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{className:"text-lg",children:"Lịch khởi hành"})}),l.jsxs(nt,{className:"space-y-3",children:[f.slice().sort((W,se)=>new Date(W.date).getTime()-new Date(se.date).getTime()).filter(W=>W.isAvailable).slice(0,8).map(W=>l.jsxs("div",{className:"flex items-center justify-between gap-3 border rounded-md p-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-sm font-medium",children:new Date(W.date).toLocaleDateString("vi-VN")}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Điểm đi: ",W.departureDivisionName]}),W.tripTime&&l.jsxs("div",{className:"text-xs text-gray-500",children:["Thời gian: ",W.tripTime]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-600",children:"Chỉ từ"}),l.jsx("div",{className:"font-semibold text-blue-600",children:q(W.adultPrice,"VND")}),r&&i&&r.id===i.tourGuideId?l.jsx("div",{className:"mt-2 text-xs text-amber-600 text-center",children:"Tour của bạn"}):l.jsx(Ce,{size:"sm",className:"mt-2",onClick:()=>e(`/tour/${i.id}/book`),children:"Chọn"})]})]},W.id)),f.filter(W=>W.isAvailable).length===0&&l.jsx("div",{className:"text-sm text-gray-500",children:"Chưa có lịch khởi hành khả dụng"})]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{className:"text-lg",children:"Hướng dẫn viên"})}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[i.tourGuideAvatar?l.jsx("img",{src:i.tourGuideAvatar,alt:i.tourGuideName,className:"w-12 h-12 rounded-full object-cover"}):l.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx(Fo,{className:"w-6 h-6 text-gray-500"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:i.tourGuideName}),l.jsx("p",{className:"text-sm text-gray-500",children:"Hướng dẫn viên"})]})]}),l.jsx(Xf,{}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(WR,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-gray-600",children:i.tourGuideEmail})]}),i.tourGuidePhone&&l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(qC,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-gray-600",children:i.tourGuidePhone})]})]}),l.jsx(Ce,{variant:"outline",className:"w-full",onClick:()=>e(`/guide/${i.tourGuideId}`),children:"Xem hồ sơ"})]})]})]})]})]}),N&&l.jsx(Ce,{onClick:U,className:"fixed bottom-6 right-6 z-50 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",size:"lg",children:l.jsx(fCe,{className:"h-5 w-5"})})]}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(B9,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không tìm thấy tour"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Tour bạn đang tìm kiếm không tồn tại hoặc đã bị xóa."}),l.jsx(Ce,{onClick:()=>e("/tours"),children:"Quay lại danh sách tour"})]})})]})}function u6e(){const n=li(),[e,t]=S.useState(null),[r,i]=S.useState(!0);S.useEffect(()=>{s()},[]);const s=async()=>{try{i(!0);const o=await ot(`${Ge()}/api/stats`,{skipAuth:!0});t(o)}catch(o){console.error("Error fetching company stats:",o),t({totalTours:0,totalGuides:0,totalCustomers:0,averageRating:0})}finally{i(!1)}};return l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx(Ks,{}),l.jsxs("section",{className:"relative h-[500px] md:h-[600px] lg:h-[700px] bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80')"},children:[l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),l.jsx("div",{className:"relative z-10 container mx-auto px-4 h-full flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"font-josefin text-4xl md:text-6xl lg:text-8xl font-bold text-white mb-6 leading-tight",children:"Về TouriMate"}),l.jsx("p",{className:"font-nunito text-xl md:text-2xl lg:text-3xl text-white max-w-4xl mx-auto",children:"Đồng hành cùng bạn khám phá vẻ đẹp Việt Nam qua từng hành trình đầy ý nghĩa"})]})})]}),l.jsx("section",{className:"py-16 md:py-24 bg-gradient-to-br from-blue-50 to-indigo-100",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("p",{className:"font-josefin text-lg md:text-2xl font-bold text-tour-blue mb-4",children:"Về chúng tôi"}),l.jsx("h2",{className:"font-itim text-4xl md:text-5xl lg:text-6xl text-gray-900 font-normal mb-6",children:"TouriMate - Người bạn đồng hành tin cậy"}),l.jsx("p",{className:"font-nunito text-lg md:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Chúng tôi kết nối bạn với những hướng dẫn viên chuyên nghiệp và những trải nghiệm du lịch đáng nhớ nhất"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-6",children:l.jsx(Bo,{className:"w-6 h-6 text-tour-blue"})}),l.jsx("h3",{className:"font-nunito text-xl font-bold text-gray-900 mb-4",children:"Hướng dẫn viên chuyên nghiệp"}),l.jsx("p",{className:"font-nunito text-gray-600 leading-relaxed",children:"Đội ngũ hướng dẫn viên giàu kinh nghiệm, am hiểu sâu sắc về văn hóa và lịch sử địa phương"})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-6",children:l.jsx(Xr,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"font-nunito text-xl font-bold text-gray-900 mb-4",children:"Điểm đến đa dạng"}),l.jsx("p",{className:"font-nunito text-gray-600 leading-relaxed",children:"Từ biển đảo xanh biếc đến núi rừng hùng vĩ, khám phá mọi vẻ đẹp của Việt Nam"})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-6",children:l.jsx(ki,{className:"w-6 h-6 text-purple-600"})}),l.jsx("h3",{className:"font-nunito text-xl font-bold text-gray-900 mb-4",children:"Trải nghiệm tuyệt vời"}),l.jsx("p",{className:"font-nunito text-gray-600 leading-relaxed",children:"Cam kết mang đến những kỷ niệm đáng nhớ với dịch vụ chất lượng cao và giá cả hợp lý"})]})]})]})}),l.jsx("section",{className:"py-12 md:py-20 bg-white",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"font-itim text-3xl md:text-4xl lg:text-5xl text-black mb-8",children:"Câu chuyện của chúng tôi"}),l.jsxs("div",{className:"space-y-6 text-lg md:text-xl leading-relaxed text-gray-700",children:[l.jsxs("p",{className:"font-nunito",children:[l.jsx("strong",{className:"text-tour-blue",children:"TouriMate"})," ","ra đời từ tình yêu sâu sắc với đất nước Việt Nam và mong muốn chia sẻ những vẻ đẹp tuyệt vời này đến với mọi người. Chúng tôi tin rằng du lịch không chỉ là việc di chuyển từ nơi này đến nơi khác, mà còn là hành trình khám phá văn hóa, con người và tạo nên những kỷ niệm đáng nhớ."]}),l.jsx("p",{className:"font-nunito",children:"Với đội ngũ hướng dẫn viên giàu kinh nghiệm và am hiểu sâu sắc về từng vùng miền, chúng tôi cam kết mang đến cho bạn những trải nghiệm du lịch chất lượng cao, an toàn và đầy cảm hứng. Từ những bãi biển hoang sơ của Phú Quốc đến những thửa ruộng bậc thang hùng vĩ của Sapa, chúng tôi sẽ dẫn bạn đi khắp 63 tỉnh thành của Việt Nam."})]})]})})}),l.jsx("section",{className:"py-12 md:py-20 bg-gray-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h2",{className:"font-itim text-3xl md:text-4xl lg:text-5xl text-black text-center mb-12",children:"Thành tựu của chúng tôi"}),r?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tour-blue"})}):l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8",children:[l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 text-center shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(Bo,{className:"w-8 h-8 text-tour-blue"})}),l.jsxs("h3",{className:"font-nunito text-2xl md:text-3xl lg:text-4xl font-bold text-tour-blue mb-2",children:[(e==null?void 0:e.totalCustomers)||0,"+"]}),l.jsx("p",{className:"font-nunito text-base md:text-lg text-gray-700",children:"Khách hàng phục vụ"})]}),l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 text-center shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(ki,{className:"w-8 h-8 text-yellow-500 fill-current"})}),l.jsx("h3",{className:"font-nunito text-2xl md:text-3xl lg:text-4xl font-bold text-tour-blue mb-2",children:e!=null&&e.averageRating?e.averageRating.toFixed(1):"0.0"}),l.jsx("p",{className:"font-nunito text-base md:text-lg text-gray-700",children:"Đánh giá trung bình"})]}),l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 text-center shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(Xr,{className:"w-8 h-8 text-tour-blue"})}),l.jsxs("h3",{className:"font-nunito text-2xl md:text-3xl lg:text-4xl font-bold text-tour-blue mb-2",children:[(e==null?void 0:e.totalTours)||0,"+"]}),l.jsx("p",{className:"font-nunito text-base md:text-lg text-gray-700",children:"Tour du lịch"})]}),l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 text-center shadow-lg hover:shadow-xl transition-shadow duration-300",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(Bo,{className:"w-8 h-8 text-tour-blue"})}),l.jsxs("h3",{className:"font-nunito text-2xl md:text-3xl lg:text-4xl font-bold text-tour-blue mb-2",children:[(e==null?void 0:e.totalGuides)||0,"+"]}),l.jsx("p",{className:"font-nunito text-base md:text-lg text-gray-700",children:"Hướng dẫn viên"})]})]})]})}),l.jsx("section",{className:"py-12 md:py-20 bg-white",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h2",{className:"font-itim text-3xl md:text-4xl lg:text-5xl text-black text-center mb-12",children:"Giá trị cốt lõi"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-tour-light-blue rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:l.jsx(V9,{className:"w-10 h-10 text-tour-blue"})}),l.jsx("h3",{className:"font-nunito text-xl md:text-2xl font-bold text-black mb-4",children:"Tận tâm"}),l.jsx("p",{className:"font-nunito text-lg text-gray-700",children:"Chúng tôi luôn đặt khách hàng làm trung tâm, tận tâm phục vụ với sự chân thành và nhiệt huyết."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-tour-light-blue rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:l.jsx(Lk,{className:"w-10 h-10 text-tour-blue"})}),l.jsx("h3",{className:"font-nunito text-xl md:text-2xl font-bold text-black mb-4",children:"An toàn"}),l.jsx("p",{className:"font-nunito text-lg text-gray-700",children:"An toàn của khách hàng là ưu tiên hàng đầu trong mọi hoạt động du lịch của chúng tôi."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-tour-light-blue rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:l.jsx(Dk,{className:"w-10 h-10 text-tour-blue"})}),l.jsx("h3",{className:"font-nunito text-xl md:text-2xl font-bold text-black mb-4",children:"Trải nghiệm"}),l.jsx("p",{className:"font-nunito text-lg text-gray-700",children:"Tạo ra những trải nghiệm độc đáo, khó quên giúp bạn hiểu sâu hơn về văn hóa Việt Nam."})]})]})]})}),l.jsxs("section",{className:"py-12 md:py-20 bg-cover bg-center bg-no-repeat relative",style:{backgroundImage:"url('https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80')"},children:[l.jsx("div",{className:"absolute inset-0 bg-blue-400 bg-opacity-50"}),l.jsxs("div",{className:"relative z-10 container mx-auto px-4 text-center",children:[l.jsx("h2",{className:"font-itim text-4xl md:text-5xl lg:text-6xl text-white font-normal",children:"Bạn đã chuẩn bị gì chưa ?"}),l.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsx("button",{onClick:()=>n("/tours"),className:"bg-white hover:bg-gray-100 text-tour-blue font-nunito text-xl font-bold py-4 px-8 rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Khám phá tour"}),l.jsx("button",{onClick:()=>n("/tour-guide-registration"),className:"bg-tour-teal hover:bg-tour-blue text-white font-nunito text-xl font-bold py-4 px-8 rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Đăng ký hướng dẫn viên"})]})]})]}),l.jsx("footer",{className:"bg-gray-300 py-12 md:py-20",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"font-nunito text-lg md:text-xl text-black",children:"© 2024 TouriMate. All rights reserved."})})})})]})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function d6e(){const n={resolve:null,promise:null};return n.promise=new Promise(e=>{n.resolve=e}),n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function h6e(n){let e=null;return(...t)=>(e||(e={current:n(...t)}),e.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const so=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function f6e(){const[n,e,t,r]=crypto.getRandomValues(new Uint32Array(4));return"e"+so[n>>0&255]+so[n>>8&255]+so[n>>16&255]+so[n>>24&255]+so[e>>0&255]+so[e>>8&255]+so[e>>16&255]+so[e>>24&255]+so[t>>0&255]+so[t>>8&255]+so[t>>16&255]+so[t>>24&255]+so[r>>0&255]+so[r>>8&255]+so[r>>16&255]+so[r>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function m6e(n,e){const t=n.extraPlugins||[];return{...n,extraPlugins:[...t,...e.filter(r=>!t.includes(r))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Yfe(n){return!!n&&/^\d+\.\d+\.\d+/.test(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Xfe(n){return n?["nightly","alpha","internal","nightly-","staging"].some(e=>n.includes(e)):!1}function p6e(n){return Yfe(n)||Xfe(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function g6e(n){if(!Yfe(n))throw new Error(`Invalid semantic version: ${n||"<blank>"}.`);const[e,t,r]=n.split(".");return{major:Number.parseInt(e,10),minor:Number.parseInt(t,10),patch:Number.parseInt(r,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function v6e(n){if(Xfe(n))return 3;const{major:e}=g6e(n);switch(!0){case e>=44:return 3;case e>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function y6e(){const{CKEDITOR_VERSION:n,CKEDITOR:e}=window;return p6e(n)?{source:e?"cdn":"npm",version:n}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function x6e(){const n=y6e();return n?v6e(n.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Jfe(n,e){switch(e||(e=x6e()||void 0),e){case 1:case 2:return n===void 0;case 3:return n==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function b6e(n,e){return function(r){Jfe(r.config.get("licenseKey"))||r.on("collectUsageData",(i,{setUsageData:s})=>{s(`integration.${n}`,e)})}}var w6e=Object.defineProperty,_6e=(n,e,t)=>e in n?w6e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ta=(n,e,t)=>_6e(n,typeof e!="symbol"?e+"":e,t);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Qfe=class Zfe{constructor(e,t){Ta(this,"_lifecycle"),Ta(this,"_element"),Ta(this,"_releaseLock",null),Ta(this,"_value",null),Ta(this,"_afterMountCallbacks",[]),Ta(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),Ta(this,"release",h6e(()=>{const{_releaseLock:r,_state:i,_element:s,_lifecycle:o}=this;i.mountingInProgress?i.mountingInProgress.then(()=>o.unmount({element:s,mountResult:this.value})).catch(a=>{console.error("CKEditor unmounting error:",a)}).then(r.resolve).then(()=>{this._value=null}):(i.destroyedBeforeInitialization=!0,r.resolve())})),this._element=e,this._lifecycle=t,this._lock()}get value(){return this._value}discard(){this._value=null,this._releaseLock=null,this._afterMountCallbacks=[],this._state={destroyedBeforeInitialization:!1,mountingInProgress:null}}unsafeSetValue(e){this._value=e,this._afterMountCallbacks.forEach(t=>{this._lifecycle.isValueValid&&!this._lifecycle.isValueValid(e)||t(e)}),this._afterMountCallbacks=[]}runAfterMount(e){const{_value:t,_afterMountCallbacks:r}=this;if(t){if(this._lifecycle.isValueValid&&!this._lifecycle.isValueValid(t))return;e(t)}else r.push(e)}_lock(){const{_semaphores:e}=Zfe,{_state:t,_element:r,_lifecycle:i}=this,s=e.get(r)||Promise.resolve(null),o=d6e();this._releaseLock=o;const a=s.then(()=>t.destroyedBeforeInitialization?Promise.resolve(void 0):(t.mountingInProgress=i.mount().then(c=>(c&&this.unsafeSetValue(c),c)),t.mountingInProgress)).then(async c=>{c&&i.afterMount&&await i.afterMount({element:r,mountResult:c})}).then(()=>o.promise).catch(c=>{console.error("CKEditor mounting error:",c)}).then(()=>{e.get(r)===a&&e.delete(r)});e.set(r,a)}};Ta(Qfe,"_semaphores",new Map);let S6e=Qfe;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const k6e="$__CKEditorReactContextMetadata";function C6e(n,e){return{...e,[k6e]:n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const E6e=re.createContext(null),T6e=n=>!!n&&typeof n=="object"&&"status"in n&&["initializing","initialized","error"].includes(n.status),eme=n=>e=>T6e(e)&&e.status===n,PX=eme("initializing"),A6e=n=>eme("initialized")(n)&&n.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const N6e=b6e("react",{version:"11.0.0",frameworkVersion:re.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function j6e(n){return Jfe(n.licenseKey)?n:m6e(n,[N6e])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const c5="Lock from React integration (@ckeditor/ckeditor5-react)";class tme extends re.Component{constructor(e){super(e),Ta(this,"domContainer",re.createRef()),Ta(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:e}=window;if(!e)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[t]=e.split(".").map(Number);t>=42||e.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:e}=this;return e?e.value:null}get watchdog(){const{_semaphoreValue:e}=this;return e?e.watchdog:null}get editor(){const{_semaphoreValue:e}=this;return e?e.instance:null}shouldComponentUpdate(e){const{props:t,editorSemaphore:r}=this;return e.id!==t.id||e.disableWatchdog!==t.disableWatchdog?!0:(r&&(r.runAfterMount(({instance:i})=>{this._shouldUpdateEditorData(t,e,i)&&i.data.set(e.data)}),"disabled"in e&&r.runAfterMount(({instance:i})=>{e.disabled?i.enableReadOnlyMode(c5):i.disableReadOnlyMode(c5)})),!1)}componentDidMount(){PX(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){PX(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new S6e(this.domContainer.current,{isValueValid:e=>e&&!!e.instance,mount:async()=>{var e,t;try{return await this._initializeEditor()}catch(r){throw(t=(e=this.props).onError)==null||t.call(e,r,{phase:"initialization",willEditorRestart:!1}),r}},afterMount:({mountResult:e})=>{const{onReady:t}=this.props;t&&this.domContainer.current!==null&&t(e.instance)},unmount:async({element:e,mountResult:t})=>{const{onAfterDestroy:r}=this.props;try{await this._destroyEditor(t),e.innerHTML=""}finally{r&&r(t.instance)}}})}render(){return re.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const e=A6e(this.context)?new P6e(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),t={current:0};return e.setCreator(async(r,i)=>{var s;const{editorSemaphore:o}=this,{onAfterDestroy:a}=this.props;t.current>0&&a&&((s=o==null?void 0:o.value)!=null&&s.instance)&&a(o.value.instance);const c=await this._createEditor(r,i);return o&&t.current>0&&(o.unsafeSetValue({instance:c,watchdog:e}),setTimeout(()=>{this.props.onReady&&this.props.onReady(e.editor)})),t.current++,c}),e.on("error",(r,{error:i,causesRestart:s})=>{(this.props.onError||console.error)(i,{phase:"runtime",willEditorRestart:s})}),await e.create(this.domContainer.current,this._getConfig()),{watchdog:e,instance:e.editor}}_createEditor(e,t){const{contextItemMetadata:r}=this.props;return r&&(t=C6e(r,t)),this.props.editor.create(e,j6e(t)).then(i=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&i.enableReadOnlyMode(c5)}const s=i.model.document,o=i.editing.view.document;return s.on("change:data",a=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(a,i)}),o.on("focus",a=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(a,i)}),o.on("blur",a=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(a,i)}),i})}async _destroyEditor(e){const{watchdog:t,instance:r}=e;return new Promise((i,s)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(t)return await t.destroy(),i();if(r)return await r.destroy(),i();i()}catch(o){console.error(o),s(o)}})})}_shouldUpdateEditorData(e,t,r){return!(e.data===t.data||r.data.get()===t.data)}_getConfig(){const e=this.props.config||{};return this.props.data&&e.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...e,initialData:e.initialData||this.props.data||""}}}Ta(tme,"contextType",E6e);class P6e{constructor(e){Ta(this,"_contextWatchdog"),Ta(this,"_id"),Ta(this,"_creator"),this._contextWatchdog=e,this._id=f6e()}setCreator(e){this._creator=e}create(e,t){return this._contextWatchdog.add({sourceElementOrData:e,config:t,creator:this._creator,id:this._id,type:"editor"})}on(e,t){this._contextWatchdog.on("itemError",(r,{itemId:i,error:s})=>{i===this._id&&t(null,{error:s,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nme(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const I6e=S.memo(S.forwardRef(({id:n,semaphore:e,rootName:t},r)=>{const i=S.useRef(null);return S.useEffect(()=>{let s,o;return e.runAfterMount(({instance:a})=>{if(!i.current)return;o=a;const{ui:c,model:u}=o,d=u.document.getRoot(t);d&&o.ui.getEditableElement(t)&&o.detachEditable(d),s=c.view.createEditable(t,i.current),c.addEditable(s),a.editing.view.forceRender()}),()=>{/* istanbul ignore next -- @preserve: It depends on the version of the React and may not happen all of the times. */if(o&&o.state!=="destroyed"&&i.current){const a=o.model.document.getRoot(t);/* istanbul ignore else -- @preserve */a&&o.detachEditable(a)}}},[e.revision]),re.createElement("div",{key:e.revision,id:n,ref:nme(r,i)})}));I6e.displayName="EditorEditable";const O6e=S.forwardRef(({editor:n},e)=>{const t=S.useRef(null);return S.useEffect(()=>{const r=t.current;if(!n||!r)return;const i=n.ui.view.toolbar.element;return r.appendChild(i),()=>{r.contains(i)&&r.removeChild(i)}},[n&&n.id]),re.createElement("div",{ref:nme(t,e)})});O6e.displayName="EditorToolbarWrapper";function R6e(n){return Number.isSafeInteger(n)&&n>=0}function M6e(n){return n!=null&&typeof n!="function"&&R6e(n.length)}function rme(n){return n}function sE(n){return n==="__proto__"}function ime(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}function KU(n){var e;return typeof n=="string"||typeof n=="symbol"?n:Object.is((e=n==null?void 0:n.valueOf)==null?void 0:e.call(n),-0)?"-0":String(n)}function YU(n){const e=[],t=n.length;if(t===0)return e;let r=0,i="",s="",o=!1;for(n.charCodeAt(0)===46&&(e.push(""),r++);r<t;){const a=n[r];s?a==="\\"&&r+1<t?(r++,i+=n[r]):a===s?s="":i+=a:o?a==='"'||a==="'"?s=a:a==="]"?(o=!1,e.push(i),i=""):i+=a:a==="["?(o=!0,i&&(e.push(i),i="")):a==="."?i&&(e.push(i),i=""):i+=a,r++}return i&&e.push(i),e}function Fg(n,e,t){if(n==null)return t;switch(typeof e){case"string":{if(sE(e))return t;const r=n[e];return r===void 0?ime(e)?Fg(n,YU(e),t):t:r}case"number":case"symbol":{typeof e=="number"&&(e=KU(e));const r=n[e];return r===void 0?t:r}default:{if(Array.isArray(e))return D6e(n,e,t);if(Object.is(e==null?void 0:e.valueOf(),-0)?e="-0":e=String(e),sE(e))return t;const r=n[e];return r===void 0?t:r}}}function D6e(n,e,t){if(e.length===0)return t;let r=n;for(let i=0;i<e.length;i++){if(r==null||sE(e[i]))return t;r=r[e[i]]}return r===void 0?t:r}function L6e(n){return function(e){return Fg(e,n)}}function Ac(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function CA(n){return n==null||typeof n!="object"&&typeof n!="function"}function oE(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function F6e(n,e,t){return typeof t!="function"?XU(n,e):ZB(n,e,function r(i,s,o,a,c,u){const d=t(i,s,o,a,c,u);return d!==void 0?!!d:ZB(i,s,r,u)},new Map)}function ZB(n,e,t,r){if(e===n)return!0;switch(typeof e){case"object":return B6e(n,e,t,r);case"function":return Object.keys(e).length>0?ZB(n,{...e},t,r):oE(n,e);default:return Ac(n)?typeof e=="string"?e==="":!0:oE(n,e)}}function B6e(n,e,t,r){if(e==null)return!0;if(Array.isArray(e))return sme(n,e,t,r);if(e instanceof Map)return $6e(n,e,t,r);if(e instanceof Set)return V6e(n,e,t,r);const i=Object.keys(e);if(n==null)return i.length===0;if(i.length===0)return!0;if(r&&r.has(e))return r.get(e)===n;r&&r.set(e,n);try{for(let s=0;s<i.length;s++){const o=i[s];if(!CA(n)&&!(o in n)||e[o]===void 0&&n[o]!==void 0||e[o]===null&&n[o]!==null||!t(n[o],e[o],o,n,e,r))return!1}return!0}finally{r&&r.delete(e)}}function $6e(n,e,t,r){if(e.size===0)return!0;if(!(n instanceof Map))return!1;for(const[i,s]of e.entries()){const o=n.get(i);if(t(o,s,i,n,e,r)===!1)return!1}return!0}function sme(n,e,t,r){if(e.length===0)return!0;if(!Array.isArray(n))return!1;const i=new Set;for(let s=0;s<e.length;s++){const o=e[s];let a=!1;for(let c=0;c<n.length;c++){if(i.has(c))continue;const u=n[c];let d=!1;if(t(u,o,s,n,e,r)&&(d=!0),d){i.add(c),a=!0;break}}if(!a)return!1}return!0}function V6e(n,e,t,r){return e.size===0?!0:n instanceof Set?sme([...n],[...e],t,r):!1}function XU(n,e){return F6e(n,e,()=>{})}function MI(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function x_(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const TM="[object RegExp]",b_="[object String]",EA="[object Number]",TA="[object Boolean]",w_="[object Arguments]",AM="[object Symbol]",NM="[object Date]",jM="[object Map]",PM="[object Set]",JU="[object Array]",U6e="[object Function]",IM="[object ArrayBuffer]",CC="[object Object]",z6e="[object Error]",OM="[object DataView]",QU="[object Uint8Array]",ZU="[object Uint8ClampedArray]",ez="[object Uint16Array]",tz="[object Uint32Array]",H6e="[object BigUint64Array]",nz="[object Int8Array]",rz="[object Int16Array]",iz="[object Int32Array]",W6e="[object BigInt64Array]",sz="[object Float32Array]",oz="[object Float64Array]";function az(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function q6e(n,e){return uy(n,void 0,n,new Map,e)}function uy(n,e,t,r=new Map,i=void 0){const s=i==null?void 0:i(n,e,t,r);if(s!=null)return s;if(CA(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let a=0;a<n.length;a++)o[a]=uy(n[a],a,t,r,i);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[a,c]of n)o.set(a,uy(c,a,t,r,i));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const a of n)o.add(uy(a,void 0,t,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(az(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let a=0;a<n.length;a++)o[a]=uy(n[a],a,t,r,i);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),ny(o,n,t,r,i),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),ny(o,n,t,r,i),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),ny(o,n,t,r,i),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,ny(o,n,t,r,i),o}if(typeof n=="object"&&G6e(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),ny(o,n,t,r,i),o}return n}function ny(n,e,t=n,r,i){const s=[...Object.keys(e),...MI(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(n,a);(c==null||c.writable)&&(n[a]=uy(e[a],a,t,r,i))}}function G6e(n){switch(x_(n)){case w_:case JU:case IM:case OM:case TA:case NM:case sz:case oz:case nz:case rz:case iz:case jM:case EA:case CC:case TM:case PM:case b_:case AM:case QU:case ZU:case ez:case tz:return!0;default:return!1}}function K6e(n){return uy(n,void 0,n,new Map,void 0)}function Y6e(n){return n=K6e(n),e=>XU(e,n)}function RM(n,e){return q6e(n,(t,r,i,s)=>{const o=e==null?void 0:e(t,r,i,s);if(o!=null)return o;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case EA:case b_:case TA:{const a=new n.constructor(n==null?void 0:n.valueOf());return ny(a,n),a}case w_:{const a={};return ny(a,n),a.length=n.length,a[Symbol.iterator]=n[Symbol.iterator],a}default:return}})}function Oa(n){return RM(n)}const X6e=/^(?:0|[1-9]\d*)$/;function ome(n,e=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<e;case"symbol":return!1;case"string":return X6e.test(n)}}function e$(n){return n!==null&&typeof n=="object"&&x_(n)==="[object Arguments]"}function J6e(n,e){let t;if(Array.isArray(e)?t=e:typeof e=="string"&&ime(e)&&(n==null?void 0:n[e])==null?t=YU(e):t=[e],t.length===0)return!1;let r=n;for(let i=0;i<t.length;i++){const s=t[i];if((r==null||!Object.hasOwn(r,s))&&!((Array.isArray(r)||e$(r))&&ome(s)&&s<r.length))return!1;r=r[s]}return!0}function Q6e(n,e){switch(typeof n){case"object":{Object.is(n==null?void 0:n.valueOf(),-0)&&(n="-0");break}case"number":{n=KU(n);break}}return e=Oa(e),function(t){const r=Fg(t,n);return r===void 0?J6e(t,n):e===void 0?r===void 0:XU(r,e)}}function Z6e(n){if(n==null)return rme;switch(typeof n){case"function":return n;case"object":return Array.isArray(n)&&n.length===2?Q6e(n[0],n[1]):Y6e(n);case"string":case"symbol":case"number":return L6e(n)}}function t$(n){return typeof n=="object"&&n!==null}function ame(n){return typeof n=="symbol"||n instanceof Symbol}function eFe(n){return ame(n)?NaN:Number(n)}function tFe(n){return n?(n=eFe(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}function nFe(n){const e=tFe(n),t=e%1;return t?e-t:e}function IX(n){return typeof n=="string"||n instanceof String}const rFe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,iFe=/^\w*$/;function sFe(n,e){return Array.isArray(n)?!1:typeof n=="number"||typeof n=="boolean"||n==null||ame(n)?!0:typeof n=="string"&&(iFe.test(n)||!rFe.test(n))||e!=null&&Object.hasOwn(e,n)}function oFe(n){return Array.isArray(n)}const aFe=(n,e,t)=>{const r=n[e];(!(Object.hasOwn(n,e)&&oE(r,t))||t===void 0&&!(e in n))&&(n[e]=t)};function lFe(n,e,t,r){if(n==null&&!Ac(n))return n;const i=sFe(e,n)?[e]:Array.isArray(e)?e:typeof e=="string"?YU(e):[e];let s=n;for(let o=0;o<i.length&&s!=null;o++){const a=KU(i[o]);if(sE(a))continue;let c;if(o===i.length-1)c=t(s[a]);else{const u=s[a],d=r==null?void 0:r(u,a,n);c=d!==void 0?d:Ac(u)?u:ome(i[o+1])?[]:{}}aFe(s,a,c),s=s[a]}return n}function lme(n,e,t){return lFe(n,e,()=>t,()=>{})}function cFe(n,e,{signal:t,edges:r}={}){let i,s=null;const o=r!=null&&r.includes("leading"),a=r==null||r.includes("trailing"),c=()=>{s!==null&&(n.apply(i,s),i=void 0,s=null)},u=()=>{a&&c(),p()};let d=null;const h=()=>{d!=null&&clearTimeout(d),d=setTimeout(()=>{d=null,u()},e)},f=()=>{d!==null&&(clearTimeout(d),d=null)},p=()=>{f(),i=void 0,s=null},x=()=>{f(),c()},y=function(...b){if(t!=null&&t.aborted)return;i=this,s=b;const _=d==null;h(),o&&_&&c()};return y.schedule=h,y.cancel=p,y.flush=x,t==null||t.addEventListener("abort",p,{once:!0}),y}function X0(n,e=0,t={}){typeof t!="object"&&(t={});const{leading:r=!1,trailing:i=!0,maxWait:s}=t,o=Array(2);r&&(o[0]="leading"),i&&(o[1]="trailing");let a,c=null;const u=cFe(function(...f){a=n.apply(this,f),c=null},e,{edges:o}),d=function(...f){return s!=null&&(c===null&&(c=Date.now()),Date.now()-c>=s)?(a=n.apply(this,f),c=Date.now(),u.cancel(),u.schedule(),a):(u.apply(this,f),a)},h=()=>(u.flush(),a);return d.cancel=u.cancel,d.flush=h,d}function DI(n,e=0,t={}){typeof t!="object"&&(t={});const{leading:r=!0,trailing:i=!0}=t;return X0(n,e,{leading:r,trailing:i,maxWait:e})}function cme(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(cme).join(",");const e=String(n);return e==="0"&&Object.is(Number(n),-0)?"-0":e}function OX(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function ume(n,e,t){return $k(n,e,void 0,void 0,void 0,void 0,t)}function $k(n,e,t,r,i,s,o){const a=o(n,e,t,r,i,s);if(a!==void 0)return a;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return EC(n,e,s,o)}return EC(n,e,s,o)}function EC(n,e,t,r){if(Object.is(n,e))return!0;let i=x_(n),s=x_(e);if(i===w_&&(i=CC),s===w_&&(s=CC),i!==s)return!1;switch(i){case b_:return n.toString()===e.toString();case EA:{const c=n.valueOf(),u=e.valueOf();return oE(c,u)}case TA:case NM:case AM:return Object.is(n.valueOf(),e.valueOf());case TM:return n.source===e.source&&n.flags===e.flags;case U6e:return n===e}t=t??new Map;const o=t.get(n),a=t.get(e);if(o!=null&&a!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(i){case jM:{if(n.size!==e.size)return!1;for(const[c,u]of n.entries())if(!e.has(c)||!$k(u,e.get(c),c,n,e,t,r))return!1;return!0}case PM:{if(n.size!==e.size)return!1;const c=Array.from(n.values()),u=Array.from(e.values());for(let d=0;d<c.length;d++){const h=c[d],f=u.findIndex(p=>$k(h,p,void 0,n,e,t,r));if(f===-1)return!1;u.splice(f,1)}return!0}case JU:case QU:case ZU:case ez:case tz:case H6e:case nz:case rz:case iz:case W6e:case sz:case oz:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let c=0;c<n.length;c++)if(!$k(n[c],e[c],c,n,e,t,r))return!1;return!0}case IM:return n.byteLength!==e.byteLength?!1:EC(new Uint8Array(n),new Uint8Array(e),t,r);case OM:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:EC(new Uint8Array(n),new Uint8Array(e),t,r);case z6e:return n.name===e.name&&n.message===e.message;case CC:{if(!(EC(n.constructor,e.constructor,t,r)||OX(n)&&OX(e)))return!1;const u=[...Object.keys(n),...MI(n)],d=[...Object.keys(e),...MI(e)];if(u.length!==d.length)return!1;for(let h=0;h<u.length;h++){const f=u[h],p=n[f];if(!Object.hasOwn(e,f))return!1;const x=e[f];if(!$k(p,x,f,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function dme(){}function RX(n,e){return ume(n,e,dme)}function uFe(n){return typeof Buffer<"u"&&Buffer.isBuffer(n)}function dFe(n){const e=n==null?void 0:n.constructor,t=typeof e=="function"?e.prototype:Object.prototype;return n===t}function lz(n){return az(n)}function hFe(n,e){if(n=nFe(n),n<1||!Number.isSafeInteger(n))return[];const t=new Array(n);for(let r=0;r<n;r++)t[r]=typeof e=="function"?e(r):r;return t}function fFe(n){if(n==null)return[];switch(typeof n){case"object":case"function":return M6e(n)?pFe(n):dFe(n)?mFe(n):LI(n);default:return LI(Object(n))}}function LI(n){const e=[];for(const t in n)e.push(t);return e}function mFe(n){return LI(n).filter(t=>t!=="constructor")}function pFe(n){const e=hFe(n.length,r=>`${r}`),t=new Set(e);return uFe(n)&&(t.add("offset"),t.add("parent")),lz(n)&&(t.add("buffer"),t.add("byteLength"),t.add("byteOffset")),[...e,...LI(n).filter(r=>!t.has(r))]}function hme(n,...e){for(let t=0;t<e.length;t++)gFe(n,e[t]);return n}function gFe(n,e){const t=fFe(e);for(let r=0;r<t.length;r++){const i=t[r];(!(i in n)||!oE(n[i],e[i]))&&(n[i]=e[i])}}function vFe(n){if(CA(n))return n;const e=x_(n);if(!yFe(n))return{};if(oFe(n)){const r=Array.from(n);return n.length>0&&typeof n[0]=="string"&&Object.hasOwn(n,"index")&&(r.index=n.index,r.input=n.input),r}if(lz(n)){const r=n,i=r.constructor;return new i(r.buffer,r.byteOffset,r.length)}if(e===IM)return new ArrayBuffer(n.byteLength);if(e===OM){const r=n,i=r.buffer,s=r.byteOffset,o=r.byteLength,a=new ArrayBuffer(o),c=new Uint8Array(i,s,o);return new Uint8Array(a).set(c),new DataView(a)}if(e===TA||e===EA||e===b_){const r=n.constructor,i=new r(n.valueOf());return e===b_?bFe(i,n):u5(i,n),i}if(e===NM)return new Date(Number(n));if(e===TM){const r=n,i=new RegExp(r.source,r.flags);return i.lastIndex=r.lastIndex,i}if(e===AM)return Object(Symbol.prototype.valueOf.call(n));if(e===jM){const r=n,i=new Map;return r.forEach((s,o)=>{i.set(o,s)}),i}if(e===PM){const r=n,i=new Set;return r.forEach(s=>{i.add(s)}),i}if(e===w_){const r=n,i={};return u5(i,r),i.length=r.length,i[Symbol.iterator]=r[Symbol.iterator],i}const t={};return wFe(t,n),u5(t,n),xFe(t,n),t}function yFe(n){switch(x_(n)){case w_:case JU:case IM:case OM:case TA:case NM:case sz:case oz:case nz:case rz:case iz:case jM:case EA:case CC:case TM:case PM:case b_:case AM:case QU:case ZU:case ez:case tz:return!0;default:return!1}}function u5(n,e){for(const t in e)Object.hasOwn(e,t)&&(n[t]=e[t])}function xFe(n,e){const t=Object.getOwnPropertySymbols(e);for(let r=0;r<t.length;r++){const i=t[r];Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}}function bFe(n,e){const t=e.valueOf().length;for(const r in e)Object.hasOwn(e,r)&&(Number.isNaN(Number(r))||Number(r)>=t)&&(n[r]=e[r])}function wFe(n,e){const t=Object.getPrototypeOf(e);t!==null&&typeof e.constructor=="function"&&Object.setPrototypeOf(n,t)}function Jd(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function _Fe(n,e){const t={},r=Object.keys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];t[s]=e(o,s,n)}return t}function SFe(n,e=rme){return n==null?{}:_Fe(n,Z6e(e))}function kFe(n){if(CA(n))return n;if(Array.isArray(n)||az(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function CFe(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let i=n;for(let s=0;s<t.length;s++){const o=t[s];i=vP(i,o,r,new Map)}return i}function vP(n,e,t,r){if(CA(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return kFe(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...MI(e)];for(let s=0;s<i.length;s++){const o=i[s];if(sE(o))continue;let a=e[o],c=n[o];if(e$(a)&&(a={...a}),e$(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Oa(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const d=[],h=Reflect.ownKeys(c);for(let f=0;f<h.length;f++){const p=h[f];d[p]=c[p]}c=d}else c=[];const u=t(c,a,o,n,e,r);u!=null?n[o]=u:Array.isArray(a)||t$(c)&&t$(a)?n[o]=vP(c,a,t,r):c==null&&Jd(a)?n[o]=vP({},a,t,r):c==null&&lz(a)?n[o]=Oa(a):(c===void 0||a!==void 0)&&(n[o]=a)}return n}function cz(n,...e){return CFe(n,...e,dme)}function FI(n){return typeof n=="function"}function Bg(n){return t$(n)&&n.nodeType===1&&!Jd(n)}function MX(n,e){if(!Number.isInteger(n)||n<0)throw new Error("n must be a non-negative integer.");let t=0;return(...r)=>{if(++t>=n)return e(...r)}}function n$(n,e,t){return typeof t!="function"&&(t=()=>{}),ume(n,e,(...r)=>{const i=t(...r);if(i!==void 0)return!!i;if(n instanceof Map&&e instanceof Map||n instanceof Set&&e instanceof Set)return n$(Array.from(n),Array.from(e),MX(2,t))})}function EFe(n){return n.substring(0,1).toUpperCase()+n.substring(1)}function TFe(n){return EFe(cme(n))}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let yt;try{yt={window,document}}catch{/* istanbul ignore next -- @preserve */yt={window:{},document:{}}}function AFe(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const Bv=AFe(),Vt={isMac:fme(Bv),isWindows:NFe(Bv),isGecko:jFe(Bv),isSafari:PFe(Bv),isiOS:IFe(Bv),isAndroid:OFe(Bv),isBlink:RFe(Bv)};function fme(n){return n.indexOf("macintosh")>-1}function NFe(n){return n.indexOf("windows")>-1}function jFe(n){return!!n.match(/gecko\/\d+/)}function PFe(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function IFe(n){return!!n.match(/iphone|ipad/i)||fme(n)&&navigator.maxTouchPoints>0}function OFe(n){return n.indexOf("android")>-1}function RFe(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mme(n,e,t,r){t=t||function(c,u){return c===u};const i=Array.isArray(n)?n:Array.prototype.slice.call(n),s=Array.isArray(e)?e:Array.prototype.slice.call(e),o=MFe(i,s,t);return r?LFe(o,s.length):DFe(s,o)}function MFe(n,e,t){const r=DX(n,e,t);if(r===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const i=LX(n,r),s=LX(e,r),o=DX(i,s,t),a=n.length-o,c=e.length-o;return{firstIndex:r,lastIndexOld:a,lastIndexNew:c}}function DX(n,e,t){for(let r=0;r<Math.max(n.length,e.length);r++)if(n[r]===void 0||e[r]===void 0||!t(n[r],e[r]))return r;return-1}function LX(n,e){return n.slice(e).reverse()}function DFe(n,e){const t=[],{firstIndex:r,lastIndexOld:i,lastIndexNew:s}=e;return s-r>0&&t.push({index:r,type:"insert",values:n.slice(r,s)}),i-r>0&&t.push({index:r+(s-r),type:"delete",howMany:i-r}),t}function LFe(n,e){const{firstIndex:t,lastIndexOld:r,lastIndexNew:i}=n;if(t===-1)return Array(e).fill("equal");let s=[];return t>0&&(s=s.concat(Array(t).fill("equal"))),i-t>0&&(s=s.concat(Array(i-t).fill("insert"))),r-t>0&&(s=s.concat(Array(r-t).fill("delete"))),i<e&&(s=s.concat(Array(e-i).fill("equal"))),s}function mw(n,e,t){t=t||function(y,b){return y===b};const r=n.length,i=e.length;if(r>200||i>200||r+i>300)return mw.fastDiff(n,e,t,!0);let s,o;if(i<r){const y=n;n=e,e=y,s="delete",o="insert"}else s="insert",o="delete";const a=n.length,c=e.length,u=c-a,d={},h={};function f(y){const b=(h[y-1]!==void 0?h[y-1]:-1)+1,_=h[y+1]!==void 0?h[y+1]:-1,C=b>_?-1:1;d[y+C]&&(d[y]=d[y+C].slice(0)),d[y]||(d[y]=[]),d[y].push(b>_?s:o);let k=Math.max(b,_),T=k-y;for(;T<a&&k<c&&t(n[T],e[k]);)T++,k++,d[y].push("equal");return k}let p=0,x;do{for(x=-p;x<u;x++)h[x]=f(x);for(x=u+p;x>u;x--)h[x]=f(x);h[u]=f(u),p++}while(h[u]!==c);return d[u].slice(1)}mw.fastDiff=mme;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function FX(){return function n(){n.called=!0}}class um{constructor(e,t){j(this,"source");j(this,"name");j(this,"path");j(this,"stop");j(this,"off");j(this,"return");this.source=e,this.name=t,this.path=[],this.stop=FX(),this.off=FX()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const oo=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function Xo(){const[n,e,t,r]=crypto.getRandomValues(new Uint32Array(4));return"e"+oo[n>>0&255]+oo[n>>8&255]+oo[n>>16&255]+oo[n>>24&255]+oo[e>>0&255]+oo[e>>8&255]+oo[e>>16&255]+oo[e>>24&255]+oo[t>>0&255]+oo[t>>8&255]+oo[t>>16&255]+oo[t>>24&255]+oo[r>>0&255]+oo[r>>8&255]+oo[r>>16&255]+oo[r>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Ng={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function FFe(n,e){const t=Ng.get(e.priority);let r=0,i=n.length;for(;r<i;){const s=r+i>>1;Ng.get(n[s].priority)<t?i=s:r=s+1}n.splice(r,0,e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const BFe="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class _e extends Error{constructor(t,r,i,s){super(VFe(t,i,s));j(this,"context");j(this,"data");this.name="CKEditorError",this.context=r,this.data=i,s&&(this.stack=s.stack)}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,r){throw t.is&&t.is("CKEditorError")?t:new _e("unexpected-error",r,void 0,t)}}function Yn(n,e){console.warn(...gme(n,e))}function $Fe(n,e){console.error(...gme(n,e))}function pme(n){return`
Read more: ${BFe}#error-${n}`}function VFe(n,e,t){const r=new WeakSet,s=e?` ${JSON.stringify(e,(c,u)=>{if(typeof u=="object"&&u!==null){if(r.has(u))return`[object ${u.constructor.name}]`;r.add(u)}return u})}`:"",o=pme(n),a=t?`
Original error: ${t.name}: ${t.message}`:"";return n+s+o+a}function gme(n,e){const t=pme(n);return e?[n,e,t]:[n,t]}const UFe="47.1.0",zFe=new Date(2025,9,16);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new _e("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=UFe;const Cb=Symbol("listeningTo"),r$=Symbol("emitterId"),Wh=Symbol("delegations"),HFe=dr(Object);function dr(n){if(!n)return HFe;class e extends n{on(r,i,s){this.listenTo(this,r,i,s)}once(r,i,s){let o=!1;const a=(c,...u)=>{o||(o=!0,c.off(),i.call(this,c,...u))};this.listenTo(this,r,a,s)}off(r,i){this.stopListening(this,r,i)}listenTo(r,i,s,o={}){let a,c;this[Cb]||(this[Cb]={});const u=this[Cb];d5(r)||vme(r);const d=d5(r);(a=u[d])||(a=u[d]={emitter:r,callbacks:{}}),(c=a.callbacks[i])||(c=a.callbacks[i]=[]),c.push(s),YFe(this,r,i,s,o)}stopListening(r,i,s){const o=this[Cb];let a=r&&d5(r);const c=o&&a?o[a]:void 0,u=c&&i?c.callbacks[i]:void 0;if(!(!o||r&&!c||i&&!u))if(s)h5(this,r,i,s),u.indexOf(s)!==-1&&(u.length===1?delete c.callbacks[i]:h5(this,r,i,s));else if(u){for(;s=u.pop();)h5(this,r,i,s);delete c.callbacks[i]}else if(c){for(i in c.callbacks)this.stopListening(r,i);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[Cb]}}fire(r,...i){try{const s=r instanceof um?r:new um(this,r),o=s.name;let a=KFe(this,o);if(s.path.push(this),a){a=a.slice();for(let u=0;u<a.length;u++){const d=a[u].callback;if(d.call(this,s,...i),s.off.called&&(delete s.off.called,this._removeEventListener(o,d)),s.stop.called)break}}const c=this[Wh];if(c){const u=c.get(o),d=c.get("*");u&&BX(u,s,i),d&&BX(d,s,i)}return s.return}catch(s){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(s,this)}}delegate(...r){return{to:(i,s)=>{this[Wh]||(this[Wh]=new Map),r.forEach(o=>{const a=this[Wh].get(o);a?a.set(i,s):this[Wh].set(o,new Map([[i,s]]))})}}}stopDelegating(r,i){if(this[Wh])if(!r)this[Wh].clear();else if(!i)this[Wh].delete(r);else{const s=this[Wh].get(r);s&&s.delete(i)}}_addEventListener(r,i,s){GFe(this,r);const o=i$(this,r),a=Ng.get(s.priority),c={callback:i,priority:a};for(const u of o)FFe(u,c)}_removeEventListener(r,i){const s=i$(this,r);for(const o of s)for(let a=0;a<o.length;a++)o[a].callback==i&&(o.splice(a,1),a--)}}return e}function WFe(n,e){const t=n[Cb];return t&&t[e]?t[e].emitter:null}function vme(n,e){n[r$]||(n[r$]=e||Xo())}function d5(n){return n[r$]}function yme(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function qFe(){return{callbacks:[],childEvents:[]}}function GFe(n,e){const t=yme(n);if(t[e])return;let r=e,i=null;const s=[];for(;r!==""&&!t[r];)t[r]=qFe(),s.push(t[r]),i&&t[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(r!==""){for(const o of s)o.callbacks=t[r].callbacks.slice();t[r].childEvents.push(i)}}function i$(n,e){const t=yme(n)[e];if(!t)return[];let r=[t.callbacks];for(let i=0;i<t.childEvents.length;i++){const s=i$(n,t.childEvents[i]);r=r.concat(s)}return r}function KFe(n,e){if(!n._events)return null;let t=e;do{const r=n._events[t];if(r&&r.callbacks&&r.callbacks.length)return r.callbacks;const i=t.lastIndexOf(":");t=i>-1?t.substring(0,i):""}while(t);return null}function BX(n,e,t){for(let[r,i]of n){i?typeof i=="function"&&(i=i(e.name)):i=e.name;const s=new um(e.source,i);s.path=[...e.path],r.fire(s,...t)}}function YFe(n,e,t,r,i){e._addEventListener?e._addEventListener(t,r,i):n._addEventListener.call(e,t,r,i)}function h5(n,e,t,r){e._removeEventListener?e._removeEventListener(t,r):n._removeEventListener.call(e,t,r)}const TC=Symbol("observableProperties"),aE=Symbol("boundObservables"),AC=Symbol("boundProperties"),$v=Symbol("decoratedMethods"),$X=Symbol("decoratedOriginal"),XFe=Tr(dr());function Tr(n){var t,r,i,s,o;if(!n)return XFe;class e extends(o=n,s=TC,i=$v,r=AC,t=aE,o){constructor(){super(...arguments);j(this,s);j(this,i);j(this,r);j(this,t)}set(u,d){if(Ac(u)){Object.keys(u).forEach(f=>{this.set(f,u[f])},this);return}f5(this);const h=this[TC];if(u in this&&!h.has(u))throw new _e("observable-set-cannot-override",this);Object.defineProperty(this,u,{enumerable:!0,configurable:!0,get(){return h.get(u)},set(f){const p=h.get(u);let x=this.fire(`set:${u}`,u,f,p);x===void 0&&(x=f),(p!==x||!h.has(u))&&(h.set(u,x),this.fire(`change:${u}`,u,x,p))}}),this[u]=d}bind(...u){if(!u.length||!VX(u))throw new _e("observable-bind-wrong-properties",this);if(new Set(u).size!==u.length)throw new _e("observable-bind-duplicate-properties",this);f5(this);const d=this[AC];u.forEach(f=>{if(d.has(f))throw new _e("observable-bind-rebind",this)});const h=new Map;return u.forEach(f=>{const p={property:f,to:[]};d.set(f,p),h.set(f,p)}),{to:JFe,toMany:QFe,_observable:this,_bindProperties:u,_to:[],_bindings:h}}unbind(...u){if(!this[TC])return;const d=this[AC],h=this[aE];if(u.length){if(!VX(u))throw new _e("observable-unbind-wrong-properties",this);u.forEach(f=>{const p=d.get(f);p&&(p.to.forEach(([x,y])=>{const b=h.get(x),_=b[y];_.delete(p),_.size||delete b[y],Object.keys(b).length||(h.delete(x),this.stopListening(x,"change"))}),d.delete(f))})}else h.forEach((f,p)=>{this.stopListening(p,"change")}),h.clear(),d.clear()}decorate(u){f5(this);const d=this[u];if(!d)throw new _e("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:u});this.on(u,(h,f)=>{h.return=d.apply(this,f)}),this[u]=function(...h){return this.fire(u,h)},this[u][$X]=d,this[$v]||(this[$v]=[]),this[$v].push(u)}stopListening(u,d,h){if(!u&&this[$v]){for(const f of this[$v])this[f]=this[f][$X];delete this[$v]}super.stopListening(u,d,h)}}return e}function f5(n){n[TC]||(Object.defineProperty(n,TC,{value:new Map}),Object.defineProperty(n,aE,{value:new Map}),Object.defineProperty(n,AC,{value:new Map}))}function JFe(...n){const e=e8e(...n),t=Array.from(this._bindings.keys()),r=t.length;if(!e.callback&&e.to.length>1)throw new _e("observable-bind-to-no-callback",this);if(r>1&&e.callback)throw new _e("observable-bind-to-extra-callback",this);e.to.forEach(i=>{if(i.properties.length&&i.properties.length!==r)throw new _e("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),r8e(this._observable,this._to),n8e(this),this._bindProperties.forEach(i=>{xme(this._observable,i)})}function QFe(n,e,t){if(this._bindings.size>1)throw new _e("observable-bind-to-many-not-one-binding",this);this.to(...ZFe(n,e),t)}function ZFe(n,e){const t=n.map(r=>[r,e]);return Array.prototype.concat.apply([],t)}function VX(n){return n.every(e=>typeof e=="string")}function e8e(...n){if(!n.length)throw new _e("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(r=>{if(typeof r=="string")t.properties.push(r);else if(typeof r=="object")t={observable:r,properties:[]},e.to.push(t);else throw new _e("observable-bind-to-parse-error",null)}),e}function t8e(n,e,t,r){const i=n[aE],s=i.get(t),o=s||{};o[r]||(o[r]=new Set),o[r].add(e),s||i.set(t,o)}function n8e(n){let e;n._bindings.forEach((t,r)=>{n._to.forEach(i=>{e=i.properties[t.callback?0:n._bindProperties.indexOf(r)],t.to.push([i.observable,e]),t8e(n._observable,t,i.observable,e)})})}function xme(n,e){const r=n[AC].get(e);let i;r.callback?i=r.callback.apply(n,r.to.map(s=>s[0][s[1]])):(i=r.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=i:n.set(e,i)}function r8e(n,e){e.forEach(t=>{const r=n[aE];let i;r.get(t.observable)||n.listenTo(t.observable,"change",(s,o)=>{i=r.get(t.observable)[o],i&&i.forEach(a=>{xme(n,a.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class bme{constructor(){j(this,"_replacedElements");this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function s$(n){let e=0;for(const t of n)e++;return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function qs(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)if(n[r]!=e[r])return r;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $l(n){return!!(n&&n[Symbol.iterator])}function wl(n,e,t={},r=[]){const i=t&&t.xmlns,s=i?n.createElementNS(i,e):n.createElement(e);for(const o in t)s.setAttribute(o,t[o]);(IX(r)||!$l(r))&&(r=[r]);for(let o of r)IX(o)&&(o=n.createTextNode(o)),s.appendChild(o);return s}class wme{constructor(e,t){j(this,"_config");this._config=Object.create(null),t&&this.define(UX(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,r,i=!1){if(Jd(t)){this._setObjectToTarget(e,t,i);return}const s=t.split(".");t=s.pop();for(const o of s)Jd(e[o])||(e[o]=Object.create(null)),e=e[o];if(Jd(r)){Jd(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,r,i);return}i&&typeof e[t]<"u"||(e[t]=r)}_getFromSource(e,t){const r=t.split(".");t=r.pop();for(const i of r){if(!Jd(e[i])){e=null;break}e=e[i]}return e?UX(e[t]):void 0}_setObjectToTarget(e,t,r){Object.keys(t).forEach(i=>{this._setToTarget(e,i,t[i],r)})}}function UX(n){return RM(n,i8e)}function i8e(n){return Bg(n)||typeof n=="function"?n:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $g(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function BI(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}const s8e=Pc(dr());function Pc(n){if(!n)return s8e;class e extends n{listenTo(r,i,s,o={}){if($g(r)||BI(r)||r instanceof yt.window.EventTarget){const a={capture:!!o.useCapture,passive:!!o.usePassive},c=this._getProxyEmitter(r,a)||new o8e(r,a);this.listenTo(c,i,s,o)}else super.listenTo(r,i,s,o)}stopListening(r,i,s){if($g(r)||BI(r)||r instanceof yt.window.EventTarget){const o=this._getAllProxyEmitters(r);for(const a of o)this.stopListening(a,i,s)}else super.stopListening(r,i,s)}_getProxyEmitter(r,i){return WFe(this,_me(r,i))}_getAllProxyEmitters(r){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(r,i)).filter(i=>!!i)}}return e}class o8e extends dr(){constructor(t,r){super();j(this,"_domNode");j(this,"_options");j(this,"_domListeners");vme(this,_me(t,r)),this._domNode=t,this._options=r}attach(t){if(this._domListeners&&this._domListeners[t])return;const r=this._createDomListener(t);this._domNode.addEventListener(t,r,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=r}detach(t){let r;this._domListeners[t]&&(!(r=this._events[t])||!r.callbacks.length)&&this._domListeners[t].removeListener()}_addEventListener(t,r,i){this.attach(t),dr().prototype._addEventListener.call(this,t,r,i)}_removeEventListener(t,r){dr().prototype._removeEventListener.call(this,t,r),this.detach(t)}_createDomListener(t){const r=i=>{this.fire(t,i)};return r.removeListener=()=>{this._domNode.removeEventListener(t,r,this._options),delete this._domListeners[t]},r}}function a8e(n){return n["data-ck-expando"]||(n["data-ck-expando"]=Xo())}function _me(n,e){let t=a8e(n);for(const r of Object.keys(e).sort())e[r]&&(t+="-"+r);return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function l8e(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function c8e(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Sme(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function kme(n){if(!n.target)return null;const e=n.target.ownerDocument,t=n.clientX,r=n.clientY;let i=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,r)?i=e.caretRangeFromPoint(t,r):n.rangeParent&&(i=e.createRange(),i.setStart(n.rangeParent,n.rangeOffset),i.collapse(!0)),i}function Cme(n){return!n||!n.parentNode||n.offsetParent===yt.document.body?null:n.offsetParent}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Yr(n){return Object.prototype.toString.call(n)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function MM(n){return Object.prototype.toString.apply(n)=="[object Range]"}const Eme=["top","right","bottom","left","width","height"];class bn{constructor(e){j(this,"top");j(this,"right");j(this,"bottom");j(this,"left");j(this,"width");j(this,"height");j(this,"_source");const t=MM(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),o$(e)||t)if(t){const r=bn.getDomRangeRects(e);xj(this,bn.getBoundingRect(r))}else xj(this,e.getBoundingClientRect());else if(BI(e)){const{innerWidth:r,innerHeight:i}=e;xj(this,{top:0,right:r,bottom:i,left:0,width:r,height:i})}else xj(this,e)}clone(){return new bn(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const r=new bn(t);return r._source=this._source,r}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(zX(e))return t;let r=e,i=e.parentNode||e.commonAncestorContainer,s;for(;i&&!zX(i);){const o=u8e(i)==="visible";r instanceof HTMLElement&&HX(r)==="absolute"&&(s=r);const a=HX(i);if(o||s&&(a==="relative"&&o||a!=="relative")){r=i,i=i.parentNode;continue}const c=new bn(i),u=t.getIntersection(c);if(u)u.getArea()<t.getArea()&&(t=u);else return null;r=i,i=i.parentNode}return t}isEqual(e){for(const t of Eme)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=yt.window,r=this.clone().moveBy(e,t);if(o$(r._source)){const i=Cme(r._source);i&&d8e(r,i)}return r}excludeScrollbarsAndBorders(){const e=this._source;let t,r,i;if(BI(e))t=e.innerWidth-e.document.documentElement.clientWidth,r=e.innerHeight-e.document.documentElement.clientHeight,i=e.getComputedStyle(e.document.documentElement).direction;else{const s=Sme(e);t=e.offsetWidth-e.clientWidth-s.left-s.right,r=e.offsetHeight-e.clientHeight-s.top-s.bottom,i=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=s.left,this.top+=s.top,this.right-=s.right,this.bottom-=s.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,i==="ltr"?this.right-=t:this.left+=t,this.height-=r,this.bottom-=r,this}static getDomRangeRects(e){const t=[],r=Array.from(e.getClientRects());if(r.length)for(const i of r)t.push(new bn(i));else{let i=e.startContainer;Yr(i)&&(i=i.parentNode);const s=new bn(i.getBoundingClientRect());s.right=s.left,s.width=0,t.push(s)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let r=0;for(const i of e)r++,t.left=Math.min(t.left,i.left),t.top=Math.min(t.top,i.top),t.right=Math.max(t.right,i.right),t.bottom=Math.max(t.bottom,i.bottom);return r==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new bn(t))}}function xj(n,e){for(const t of Eme)n[t]=e[t]}function zX(n){return o$(n)?n===n.ownerDocument.body:!1}function o$(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function HX(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function u8e(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function d8e(n,e){const t=new bn(e),r=Sme(e);let i=0,s=0;i-=t.left,s-=t.top,i+=e.scrollLeft,s+=e.scrollTop,i-=r.left,s-=r.top,n.moveBy(i,s)}var gr;let uz=(gr=class{constructor(e,t){j(this,"_element");j(this,"_callback");gr._observerInstance||gr._createObserver(),this._element=e,this._callback=t,gr._addElementCallback(e,t),gr._observerInstance.observe(e)}get element(){return this._element}destroy(){gr._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){gr._elementCallbacks||(gr._elementCallbacks=new Map);let r=gr._elementCallbacks.get(e);r||(r=new Set,gr._elementCallbacks.set(e,r)),r.add(t)}static _deleteElementCallback(e,t){const r=gr._getElementCallbacks(e);r&&(r.delete(t),r.size||(gr._elementCallbacks.delete(e),gr._observerInstance.unobserve(e))),gr._elementCallbacks&&!gr._elementCallbacks.size&&(gr._observerInstance=null,gr._elementCallbacks=null)}static _getElementCallbacks(e){return gr._elementCallbacks?gr._elementCallbacks.get(e):null}static _createObserver(){gr._observerInstance=new yt.window.ResizeObserver(e=>{for(const t of e){const r=gr._getElementCallbacks(t.target);if(r)for(const i of r)i(t)}})}},j(gr,"_observerInstance",null),j(gr,"_elementCallbacks",null),gr);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function WX(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function AA(n){return e=>e+n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Vb(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Tme(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function NC(n){return n&&n.nodeType===Node.COMMENT_NODE}function h8e(n){try{yt.document.createAttribute(n)}catch{return!1}return!0}function dm(n){return n?Yr(n)?dm(n.parentElement):n.getClientRects?!!n.getClientRects().length:!1:!1}function dz({element:n,target:e,positions:t,limiter:r,fitInViewport:i,viewportOffsetConfig:s}){FI(e)&&(e=e()),FI(r)&&(r=r());const o=Cme(n),a=f8e(s),c=new bn(n),u=qX(e,a);let d;if(!u||!a.getIntersection(u))return null;const h={targetRect:u,elementRect:c,positionedElementAncestor:o,viewportRect:a};if(!r&&!i)d=new Ame(t[0],h);else{if(r){const f=qX(r,a);f&&(h.limiterRect=f)}d=m8e(t,h)}return d}function qX(n,e){const t=new bn(n).getVisible();return t?t.getIntersection(e):null}function f8e(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new bn(yt.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function m8e(n,e){const{elementRect:t}=e,r=t.getArea(),i=n.map(a=>new Ame(a,e)).filter(a=>!!a.name);let s=0,o=null;for(const a of i){const{limiterIntersectionArea:c,viewportIntersectionArea:u}=a;if(c===r)return a;const d=u**2+c**2;d>s&&(s=d,o=a)}return o}class Ame{constructor(e,t){j(this,"name");j(this,"config");j(this,"_positioningFunctionCoordinates");j(this,"_options");j(this,"_cachedRect");j(this,"_cachedAbsoluteRect");const r=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!r)return;const{left:i,top:s,name:o,config:a}=r;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:i,top:s},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function GX(n){const e=n.parentNode;e&&e.removeChild(n)}function yP(){const n=yt.window.visualViewport;if(!n||!(Vt.isiOS||Vt.isSafari))return{left:0,top:0};const e=Math.max(Math.round(n.offsetLeft),0),t=Math.max(Math.round(n.offsetTop),0);return{left:e,top:t}}function p8e({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:r,forceScroll:i}){const s=hz(n);let o=s,a=null;for(e=y8e(e);o;){let c;o==s?c=KX(n):c=KX(a),v8e({parent:c,getRect:()=>m5(n,o),alignToTop:r,ancestorOffset:t,forceScroll:i});let u=m5(n,o);const d=m5(c,o);if(u.height>d.height){const h=u.getIntersection(d);h&&(u=h)}if(g8e({window:o,rect:u,viewportOffset:e,alignToTop:r,forceScroll:i}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function g8e({window:n,rect:e,alignToTop:t,forceScroll:r,viewportOffset:i}){const s=e.clone().moveBy(0,i.bottom),o=e.clone().moveBy(0,-i.top),a=new bn(n).excludeScrollbarsAndBorders(),c=[o,s],u=t&&r,d=c.every(y=>a.contains(y));let{scrollX:h,scrollY:f}=n;const p=h,x=f;u?f-=a.top-e.top+i.top:d||(jme(o,a)?f-=a.top-e.top+i.top:Nme(s,a)&&(t?f+=e.top-a.top-i.top:f+=e.bottom-a.bottom+i.bottom)),d||(Pme(e,a)?h-=a.left-e.left+i.left:Ime(e,a)&&(h+=e.right-a.right+i.right)),(h!=p||f!==x)&&n.scrollTo(h,f)}function v8e({parent:n,getRect:e,alignToTop:t,forceScroll:r,ancestorOffset:i=0,limiterElement:s}){const o=hz(n),a=t&&r;let c,u,d;const h=s||o.document.body;for(;n!=h;)u=e(),c=new bn(n).excludeScrollbarsAndBorders(),d=c.contains(u),a?n.scrollTop-=c.top-u.top+i:d||(jme(u,c)?n.scrollTop-=c.top-u.top+i:Nme(u,c)&&(t?n.scrollTop+=u.top-c.top-i:n.scrollTop+=u.bottom-c.bottom+i)),d||(Pme(u,c)?n.scrollLeft-=c.left-u.left+i:Ime(u,c)&&(n.scrollLeft+=u.right-c.right+i)),n=n.parentNode}function Nme(n,e){return n.bottom>e.bottom}function jme(n,e){return n.top<e.top}function Pme(n,e){return n.left<e.left}function Ime(n,e){return n.right>e.right}function hz(n){return MM(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function KX(n){if(MM(n)){let e=n.commonAncestorContainer;return Yr(e)&&(e=e.parentNode),e}else return n.parentNode}function m5(n,e){const t=hz(n),r=new bn(n);if(t===e)return r;{let i=t;for(;i!=e;){const s=i.frameElement,o=new bn(s).excludeScrollbarsAndBorders();r.moveBy(o.left,o.top),i=i.parent}}return r}function y8e(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}const x8e={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},b8e={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},YX={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},yn=C8e(),w8e=Object.fromEntries(Object.entries(yn).map(([n,e])=>{let t;return e in YX?t=YX[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function __(n){let e;if(typeof n=="string"){if(e=yn[n.toLowerCase()],!e)throw new _e("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?yn.alt:0)+(n.ctrlKey?yn.ctrl:0)+(n.shiftKey?yn.shift:0)+(n.metaKey?yn.cmd:0);return e}function fz(n){return typeof n=="string"&&(n=E8e(n)),n.map(e=>typeof e=="string"?S8e(e):e).reduce((e,t)=>t+e,0)}function $I(n,e){let t=fz(n);const r=Vt.isMac||Vt.isiOS;return Object.entries(r?x8e:b8e).reduce((o,[a,c])=>((t&yn[a])!=0&&(t&=~yn[a],o+=c),o),"")+(t?w8e[t]:"")}function _8e(n){return n==yn.arrowright||n==yn.arrowleft||n==yn.arrowup||n==yn.arrowdown}function Ome(n,e){const t=e==="ltr";switch(n){case yn.arrowleft:return t?"left":"right";case yn.arrowright:return t?"right":"left";case yn.arrowup:return"up";case yn.arrowdown:return"down"}}function S8e(n){if(n.endsWith("!"))return __(n.slice(0,-1));const e=__(n);return(Vt.isMac||Vt.isiOS)&&e==yn.ctrl?yn.cmd:e}function k8e(n,e){const t=Ome(n,e);return t==="down"||t==="right"}function C8e(){const n={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function E8e(n){return n.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const T8e=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function XX(n){return T8e.includes(n)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ur(n){return Array.isArray(n)?n:[n]}/* istanbul ignore else -- @preserve */yt.window.CKEDITOR_TRANSLATIONS||(yt.window.CKEDITOR_TRANSLATIONS={});function A8e(n,e,t=1,r){if(typeof t!="number")throw new _e("translation-service-quantity-not-a-number",null,{quantity:t});const i=r||yt.window.CKEDITOR_TRANSLATIONS,s=P8e(i);s===1&&(n=Object.keys(i)[0]);const o=e.id||e.string;if(s===0||!j8e(n,o,i))return t!==1?e.plural:e.string;const a=i[n].dictionary,c=i[n].getPluralForm||(h=>h===1?0:1),u=a[o];if(typeof u=="string")return u;const d=Number(c(t));return u[d]}function N8e(n){return Array.isArray(n)?n.reduce((e,t)=>cz(e,t)):n}function j8e(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function P8e(n){return Object.keys(n).length}class I8e{constructor({uiLanguage:e="en",contentLanguage:t,translations:r}={}){j(this,"uiLanguage");j(this,"uiLanguageDirection");j(this,"contentLanguage");j(this,"contentLanguageDirection");j(this,"t");j(this,"translations");this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=XX(this.uiLanguage),this.contentLanguageDirection=XX(this.contentLanguage),this.translations=N8e(r),this.t=(i,s)=>this._t(i,s)}_t(e,t=[]){t=Ur(t),typeof e=="string"&&(e={string:e});const i=!!e.plural?t[0]:1,s=A8e(this.uiLanguage,e,i,this.translations);return O8e(s,t)}}function O8e(n,e){return n.replace(/%(\d+)/g,(t,r)=>r<e.length?e[r]:t)}let Gu=class extends dr(){constructor(t={},r={}){super();j(this,"_items");j(this,"_itemMap");j(this,"_idProperty");j(this,"_bindToCollection");j(this,"_bindToExternalToInternalMap");j(this,"_bindToInternalToExternalMap");j(this,"_skippedIndexesFromExternal");const i=$l(t);if(i||(r=t),this._items=[],this._itemMap=new Map,this._idProperty=r.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const s of t)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,r){return this.addMany([t],r)}addMany(t,r){if(r===void 0)r=this._items.length;else if(r>this._items.length||r<0)throw new _e("collection-add-item-invalid-index",this);let i=0;for(const s of t){const o=this._getItemIdBeforeAdding(s),a=r+i;this._items.splice(a,0,s),this._itemMap.set(o,s),this.fire("add",s,a),i++}return this.fire("change",{added:t,removed:[],index:r}),this}get(t){let r;if(typeof t=="string")r=this._itemMap.get(t);else if(typeof t=="number")r=this._items[t];else throw new _e("collection-get-invalid-arg",this);return r||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const r=this._idProperty,i=t[r];return i&&this._itemMap.has(i)}}getIndex(t){let r;return typeof t=="string"?r=this._itemMap.get(t):r=t,r?this._items.indexOf(r):-1}remove(t){const[r,i]=this._remove(t);return this.fire("change",{added:[],removed:[r],index:i}),r}map(t,r){return this._items.map(t,r)}forEach(t,r){this._items.forEach(t,r)}find(t,r){return this._items.find(t,r)}filter(t,r){return this._items.filter(t,r)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new _e("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:r=>{this._setUpBindToBinding(i=>new r(i))},using:r=>{typeof r=="function"?this._setUpBindToBinding(r):this._setUpBindToBinding(i=>i[r])}}}_setUpBindToBinding(t){const r=this._bindToCollection,i=(s,o,a)=>{const c=r._bindToCollection==this,u=r._bindToInternalToExternalMap.get(o);if(c&&u)this._bindToExternalToInternalMap.set(o,u),this._bindToInternalToExternalMap.set(u,o);else{const d=t(o);if(!d){this._skippedIndexesFromExternal.push(a);return}let h=a;for(const f of this._skippedIndexesFromExternal)a>f&&h--;for(const f of r._skippedIndexesFromExternal)h>=f&&h++;this._bindToExternalToInternalMap.set(o,d),this._bindToInternalToExternalMap.set(d,o),this.add(d,h);for(let f=0;f<r._skippedIndexesFromExternal.length;f++)h<=r._skippedIndexesFromExternal[f]&&r._skippedIndexesFromExternal[f]++}};for(const s of r)i(null,s,r.getIndex(s));this.listenTo(r,"add",i),this.listenTo(r,"remove",(s,o,a)=>{const c=this._bindToExternalToInternalMap.get(o);c&&this.remove(c),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((u,d)=>(a<d&&u.push(d-1),a>d&&u.push(d),u),[])})}_getItemIdBeforeAdding(t){const r=this._idProperty;let i;if(r in t){if(i=t[r],typeof i!="string")throw new _e("collection-add-invalid-id",this);if(this.get(i))throw new _e("collection-add-item-already-exists",this)}else t[r]=i=Xo();return i}_remove(t){let r,i,s,o=!1;const a=this._idProperty;if(typeof t=="string"?(i=t,s=this._itemMap.get(i),o=!s,s&&(r=this._items.indexOf(s))):typeof t=="number"?(r=t,s=this._items[r],o=!s,s&&(i=s[a])):(s=t,i=s[a],r=this._items.indexOf(s),o=r==-1||!this._itemMap.get(i)),o)throw new _e("collection-remove-404",this);this._items.splice(r,1),this._itemMap.delete(i);const c=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(c),this.fire("remove",s,r),[s,r]}[Symbol.iterator](){return this._items[Symbol.iterator]()}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ra(n){const e=n.next();return e.done?null:e.value}class Xs extends Pc(Tr()){constructor(){super();j(this,"_elements",new Set);j(this,"_externalViews",new Set);j(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(t){if(QX(t))this._addElement(t);else if(JX(t))this._addView(t);else{if(!t.element)throw new _e("focustracker-add-view-missing-element",{focusTracker:this,view:t});this._addElement(t.element)}}remove(t){QX(t)?this._removeElement(t):JX(t)?this._removeView(t):this._removeElement(t.element)}_addElement(t){if(this._elements.has(t))throw new _e("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>{const r=this.externalViews.find(i=>R8e(t,i));r?this._focus(r.element):this._focus(t)},{useCapture:!0}),this.listenTo(t,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(t)}_removeElement(t){this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t)),t===this.focusedElement&&this._blur()}_addView(t){t.element&&this._addElement(t.element),this.listenTo(t.focusTracker,"change:focusedElement",()=>{t.focusTracker.focusedElement?t.element&&this._focus(t.element):this._blur()}),this._externalViews.add(t)}_removeView(t){t.element&&this._removeElement(t.element),this.stopListening(t.focusTracker),this._externalViews.delete(t)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(t){this._clearBlurTimeout(),this.focusedElement=t,this.isFocused=!0}_blur(){this.elements.find(i=>i.contains(document.activeElement))||this.externalViews.find(i=>i.focusTracker.isFocused&&!i.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function JX(n){return"focusTracker"in n&&n.focusTracker instanceof Xs}function QX(n){return Bg(n)}function R8e(n,e){return ZX(n,e)?!0:!!e.focusTracker.externalViews.find(t=>ZX(n,t))}function ZX(n,e){return!!e.element&&e.element.contains(document.activeElement)&&n.contains(e.element)}class Va{constructor(){j(this,"_listener");this._listener=new(Pc())}listenTo(e){this._listener.listenTo(e,"keydown",(t,r)=>{this._listener.fire("_keydown:"+__(r),r)})}set(e,t,r={}){const i=fz(e),s=r.priority;this._listener.listenTo(this._listener,"_keydown:"+i,(o,a)=>{r.filter&&!r.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:s})}press(e){return!!this._listener.fire("_keydown:"+__(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function M8e(n){const e=new Map;for(const t in n)e.set(t,n[t]);return e}function hm(n){return $l(n)?new Map(n):M8e(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function eJ(n,e,t){const r=n.length,i=e.length;for(let s=r-1;s>=t;s--)n[s+i]=n[s];for(let s=0;s<i;s++)n[t+s]=e[s]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mz(n,e){let t;function r(...i){r.cancel(),t=setTimeout(()=>n(...i),e)}return r.cancel=()=>{clearTimeout(t)},r}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pz(n){try{if(!n.startsWith("ey"))return null;const e=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(e)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function D8e(){const n=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;n[e]=t}return n}function L8e(n){const e=Array.isArray(n)?n:[n],t=D8e();let r=-1;const i=e.map(s=>Array.isArray(s)?s.join(""):String(s)).join("");for(let s=0;s<i.length;s++){const o=i.charCodeAt(s);r=r>>>8^t[(r^o)&255]}return r=(r^-1)>>>0,r.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function F8e(n){const e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(o=>o.name).join("|"),r=n.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let i=0,s=!1;return r.map(o=>(s=V8e(o,s),!o.length&&!s?"":B8e(o,e)?bj(o,i++):$8e(o,e)?bj(o,--i):s==="middle"||s==="last"?bj(o,0):bj(o,i))).join("").trimEnd()}function B8e(n,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(n)))}function $8e(n,e){return e.some(t=>new RegExp(`</${t.name}>`).test(n))}function bj(n,e,t="    "){return`${t.repeat(Math.max(0,e))}${n}
`}function V8e(n,e){const t=/<pre( .*?)?>/.test(n),r=/<\/pre>/.test(n);return t&&r?!1:t?"first":r?"last":e==="first"||e==="middle"?"middle":!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function U8e(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function z8e(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function H8e(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function gz(n,e){return z8e(n.charAt(e-1))&&H8e(n.charAt(e))}function vz(n,e){return U8e(n.charAt(e))}const W8e=q8e();function Rme(n,e){const t=String(n).matchAll(W8e);return Array.from(t).some(r=>r.index<e&&e<r.index+r[0].length)}function q8e(){const n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(i=>i.source).join("|")+")",r=`${e}|${t}(?:‍${t})*`;return new RegExp(r,"ug")}function tJ(n){if(!n)return null;const e=G8e(n);return e?pz(e):null}function G8e(n){const e=n.split(".");return e.length!=3?null:e[1]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function K8e(n,e){return(n.removeFeatures||[]).includes(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const lk=new WeakMap;let nJ=!1;function Y8e({view:n,element:e,text:t,isDirectHost:r=!0,keepOnFocus:i=!1}){const s=n.document;lk.has(s)||(lk.set(s,new Map),s.registerPostFixer(a=>p5(lk.get(s),a)),s.on("change:isComposing",()=>{n.change(a=>p5(lk.get(s),a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,c,u)=>o(u)),e.placeholder?o(e.placeholder):t&&o(t),t&&tBe();function o(a){const c={text:a,isDirectHost:r,keepOnFocus:i,hostElement:r?e:null};lk.get(s).set(e,c),n.change(u=>p5([[e,c]],u))}}function X8e(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function J8e(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function Q8e(n,e){if(!n.isAttached()||Z8e(n))return!1;const t=n.document,i=t.selection.anchor;return t.isComposing&&i&&i.parent===n?!1:e||!t.isFocused?!0:!!i&&i.parent!==n}function Z8e(n){for(const e of n.getChildren())if(!e.is("uiElement"))return!0;return!1}function p5(n,e){const t=[];let r=!1;for(const[i,s]of n)s.isDirectHost&&(t.push(i),rJ(e,i,s)&&(r=!0));for(const[i,s]of n){if(s.isDirectHost)continue;const o=eBe(i);o&&(t.includes(o)||(s.hostElement=o,rJ(e,i,s)&&(r=!0)))}return r}function rJ(n,e,t){const{text:r,isDirectHost:i,hostElement:s}=t;let o=!1;return s.getAttribute("data-placeholder")!==r&&(n.setAttribute("data-placeholder",r,s),o=!0),(i||e.childCount==1)&&Q8e(s,t.keepOnFocus)?X8e(n,s)&&(o=!0):J8e(n,s)&&(o=!0),o}function eBe(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function tBe(){nJ||Yn("enableViewPlaceholder-deprecated-text-option"),nJ=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class dx{is(){throw new Error("is() method is abstract")}}class hx extends dr(dx){constructor(t){super();j(this,"document");j(this,"parent");this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if((t=this.parent.getChildIndex(this))==-1)throw new _e("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let r=this;for(;r.parent;)t.unshift(r.index),r=r.parent;return t}getAncestors(t={}){const r=[];let i=t.includeSelf?this:this.parent;for(;i;)r[t.parentFirst?"push":"unshift"](i),i=i.parent;return r}getCommonAncestor(t,r={}){const i=this.getAncestors(r),s=t.getAncestors(r);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const r=this.getPath(),i=t.getPath(),s=qs(r,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return r[s]<i[s]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,r,i){this.fire(`change:${t}`,r,i),this.parent&&this.parent._fireChange(t,r,i)}toJSON(){const t={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(t.root=this.root.toJSON()),t}}hx.prototype.is=function(n){return n==="node"||n==="view:node"};class Ui extends hx{constructor(t,r){super(t);j(this,"_textData");this._textData=r}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Ui?this===t||this.data===t.data:!1}toJSON(){const t=super.toJSON();return t.type="Text",t.data=this.data,t}_clone(){return new Ui(this.document,this.data)}}Ui.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};class nf extends dx{constructor(t,r,i){super();j(this,"textNode");j(this,"data");j(this,"offsetInText");if(this.textNode=t,r<0||r>t.data.length)throw new _e("view-textproxy-wrong-offsetintext",this);if(i<0||r+i>t.data.length)throw new _e("view-textproxy-wrong-length",this);this.data=t.data.substring(r,r+i),this.offsetInText=r}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const r=[];let i=t.includeSelf?this.textNode:this.parent;for(;i!==null;)r[t.parentFirst?"push":"unshift"](i),i=i.parent;return r}}nf.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};class VI{constructor(){j(this,"_consumables",new Map)}add(e,t){let r;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?r=this._consumables.get(e):(r=new nBe(e),this._consumables.set(e,r)),r.add(t?Vk(t):e._getConsumables())}test(e,t){const r=this._consumables.get(e);return r===void 0?null:e.is("$text")||e.is("documentFragment")?r:r.test(Vk(t))}consume(e,t){if(e.is("$text")||e.is("documentFragment"))return this.test(e,t)?(this._consumables.set(e,!1),!0):!1;const r=this._consumables.get(e);return r===void 0?!1:r.consume(Vk(t))}revert(e,t){const r=this._consumables.get(e);r!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):r.revert(Vk(t)))}static createFrom(e,t){if(t||(t=new VI),e.is("$text"))t.add(e);else if(e.is("element")||e.is("documentFragment")){t.add(e);for(const r of e.getChildren())VI.createFrom(r,t)}return t}}class nBe{constructor(e){j(this,"element");j(this,"_canConsumeName",null);j(this,"_attributes",new Map);this.element=e}add(e){e.name&&(this._canConsumeName=!0);for(const[t,r]of e.attributes)if(r){let i=this._attributes.get(t);(!i||typeof i=="boolean")&&(i=new Map,this._attributes.set(t,i)),i.set(r,!0)}else{if(t=="style"||t=="class")throw new _e("viewconsumable-invalid-attribute",this);this._attributes.set(t,!0)}}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const[t,r]of e.attributes){const i=this._attributes.get(t);if(i===void 0)return null;if(i===!1)return!1;if(i!==!0){if(r){const s=i.get(r);if(s===void 0)return null;if(!s)return!1}else for(const s of i.values())if(!s)return!1}}return!0}consume(e){if(!this.test(e))return!1;e.name&&(this._canConsumeName=!1);for(const[t,r]of e.attributes){const i=this._attributes.get(t);if(typeof i=="boolean")for(const[s]of this.element._getConsumables(t,r).attributes)this._attributes.set(s,!1);else if(r)for(const[,s]of this.element._getConsumables(t,r).attributes)i.set(s,!1);else for(const s of i.keys())i.set(s,!1)}return!0}revert(e){e.name&&(this._canConsumeName=!0);for(const[t,r]of e.attributes){const i=this._attributes.get(t);if(i===!1){this._attributes.set(t,!0);continue}if(!(i===void 0||i===!0))if(r)i.get(r)===!1&&i.set(r,!0);else for(const s of i.keys())i.set(s,!0)}}}function Vk(n){const e=[];return"attributes"in n&&n.attributes&&g5(e,n.attributes),"classes"in n&&n.classes&&g5(e,n.classes,"class"),"styles"in n&&n.styles&&g5(e,n.styles,"style"),{name:n.name||!1,attributes:e}}function g5(n,e,t){if(typeof e=="string"){n.push(t?[t,e]:[e]);return}for(const r of e)Array.isArray(r)?n.push(r):n.push(t?[t,r]:[r])}class lE{constructor(...e){j(this,"_patterns",[]);this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const r of this._patterns){const i=this._isElementMatching(t,r);if(i)return{element:t,pattern:r,match:i}}return null}matchAll(...e){const t=[];for(const r of e)for(const i of this._patterns){const s=this._isElementMatching(r,i);s&&t.push({element:r,pattern:i,match:s})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}_isElementMatching(e,t){if(typeof t=="function"){const s=t(e);return!s||typeof s!="object"?s:Vk(s)}const r={};if(t.name&&(r.name=rBe(t.name,e.name),!r.name))return null;const i=[];return t.attributes&&!iBe(t.attributes,e,i)||t.classes&&!sBe(t.classes,e,i)||t.styles&&!oBe(t.styles,e,i)?null:(i.length&&(r.attributes=i),r)}}function UI(n,e){return n===!0||n===e||n instanceof RegExp&&!!String(e).match(n)}function rBe(n,e){return n instanceof RegExp?!!e.match(n):n===e}function yz(n,e){if(Array.isArray(n))return n.map(r=>typeof r!="object"||r instanceof RegExp?e?[e,r,!0]:[r,!0]:((r.key===void 0||r.value===void 0)&&Yn("matcher-pattern-missing-key-or-value",r),e?[e,r.key,r.value]:[r.key,r.value]));if(typeof n!="object"||n instanceof RegExp)return[e?[e,n,!0]:[n,!0]];const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e?[e,r,n[r]]:[r,n[r]]);return t}function iBe(n,e,t){let r;return typeof n=="object"&&!(n instanceof RegExp)&&!Array.isArray(n)?(n.style!==void 0&&Yn("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&Yn("matcher-pattern-deprecated-attributes-class-key",n)):r=["class","style"],e._collectAttributesMatch(yz(n),t,r)}function sBe(n,e,t){return e._collectAttributesMatch(yz(n,"class"),t)}function oBe(n,e,t){return e._collectAttributesMatch(yz(n,"style"),t)}class jC{constructor(e){j(this,"_styles");j(this,"_cachedStyleNames",null);j(this,"_cachedExpandedStyleNames",null);j(this,"_styleProcessor");this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=lBe(e);for(const[r,i]of t)this._styleProcessor.toNormalizedForm(r,i,this._styles);return this}has(e){if(this.isEmpty)return!1;const r=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);return Array.isArray(r)}set(e,t){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,Ac(e))for(const[r,i]of Object.entries(e))this._styleProcessor.toNormalizedForm(r,i,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t={};for(const r of Ur(e)){const i=a$(r),s=Fg(this._styles,i);if(s)xP(t,i,s);else{const o=this.getAsString(r);o!==void 0&&this._styleProcessor.toNormalizedForm(r,o,t)}}Object.keys(t).length&&(Mme(this._styles,t),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!Ac(this._styles[e]))return this._styles[e];const r=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);if(Array.isArray(r))return r[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?(this._cachedExpandedStyleNames||(this._cachedExpandedStyleNames=this._styleProcessor.getStyleNames(this._styles)),this._cachedExpandedStyleNames):(this._cachedStyleNames||(this._cachedStyleNames=this.getStylesEntries().map(([t])=>t)),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(e){if(this.size!==e.size)return!1;for(const t of this.getStyleNames())if(!e.has(t)||e.getAsString(t)!==this.getAsString(t))return!1;return!0}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const r of t)e.push(...this._styleProcessor.getReducedForm(r,this._styles));return e}_clone(){const e=new this.constructor(this._styleProcessor);return e.set(this.getNormalized()),e}_getTokensMatch(e,t){const r=[];for(const i of this.getStyleNames(!0))if(UI(e,i)){if(t===!0){r.push(i);continue}const s=this.getAsString(i);UI(t,s)&&r.push(i)}return r.length?r:void 0}_getConsumables(e){const t=[];if(e){t.push(e);for(const r of this._styleProcessor.getRelatedStyles(e))t.push(r)}else for(const r of this.getStyleNames()){for(const i of this._styleProcessor.getRelatedStyles(r))t.push(i);t.push(r)}return t}_canMergeFrom(e){for(const t of e.getStyleNames())if(this.has(t)&&this.getAsString(t)!==e.getAsString(t))return!1;return!0}_mergeFrom(e){for(const t of e.getStyleNames())this.has(t)||this.set(t,e.getAsString(t))}_isMatching(e){for(const t of e.getStyleNames())if(!this.has(t)||this.getAsString(t)!==e.getAsString(t))return!1;return!0}}class aBe{constructor(){j(this,"_normalizers");j(this,"_extractors");j(this,"_reducers");j(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,r){if(Ac(t)){xP(r,a$(e),t);return}if(this._normalizers.has(e)){const i=this._normalizers.get(e),{path:s,value:o}=i(t);xP(r,s,o)}else xP(r,e,t)}getNormalized(e,t){if(!e)return cz({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const r=this._extractors.get(e);if(typeof r=="string")return Fg(t,r);const i=r(e,t);if(i)return i}return Fg(t,a$(e))}getReducedForm(e,t){const r=this.getNormalized(e,t);return r===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(r):[[e,r]]}getStyleNames(e){const t=new Set;for(const r of this._consumables.keys()){const i=this.getNormalized(r,e);i&&(typeof i!="object"||Object.keys(i).length)&&t.add(r)}for(const r of Object.keys(e))t.add(r);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const r of t)this._mapStyleNames(r,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function lBe(n){let e=null,t=0,r=0,i=null;const s=new Map;if(n==="")return s;n.charAt(n.length-1)!=";"&&(n=n+";");for(let o=0;o<n.length;o++){const a=n.charAt(o);if(e===null)switch(a){case":":i||(i=n.substr(t,o-t),r=o+1);break;case'"':case"'":e=a;break;case";":{const c=n.substr(r,o-r);i&&s.set(i.trim(),c.trim()),i=null,t=o+1;break}}else a===e&&(e=null)}return s}function a$(n){return n.replace("-",".")}function xP(n,e,t){let r=t;Ac(t)&&(r=cz({},Fg(n,e),t)),lme(n,e,r)}function Mme(n,e){for(const t of Object.keys(e))n[t]!==null&&!Array.isArray(n[t])&&typeof n[t]=="object"&&typeof e[t]=="object"?(Mme(n[t],e[t]),Object.keys(n[t]).length||delete n[t]):delete n[t]}class v5{constructor(){j(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(e){return this._set.has(e)}keys(){return Array.from(this._set.keys())}setTo(e){this.clear();for(const t of e.split(/\s+/))t&&this._set.add(t);return this}set(e){for(const t of Ur(e))t&&this._set.add(t)}remove(e){for(const t of Ur(e))this._set.delete(t)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(e){if(this.size!==e.size)return!1;for(const t of this.keys())if(!e.has(t))return!1;return!0}_clone(){const e=new this.constructor;return e._set=new Set(this._set),e}_getTokensMatch(e){const t=[];if(e===!0){for(const r of this._set.keys())t.push(r);return t}if(typeof e=="string"){for(const r of e.split(/\s+/))if(this._set.has(r))t.push(r);else return;return t}for(const r of this._set.keys())r.match(e)&&t.push(r);return t.length?t:void 0}_getConsumables(e){return e?[e]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(e){for(const t of e._set.keys())this._set.has(t)||this._set.add(t)}_isMatching(e){for(const t of e._set.keys())if(!this._set.has(t))return!1;return!0}}class Du extends hx{constructor(t,r,i,s){super(t);j(this,"name");j(this,"_unsafeAttributesToRender",[]);j(this,"_attrs");j(this,"_children");j(this,"_customProperties",new Map);this.name=r,this._attrs=this._parseAttributes(i),this._children=[],s&&this._insertChild(0,s)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())t!="class"&&t!="style"&&(yield t)}*getAttributes(){for(const[t,r]of this._attrs.entries())yield[t,String(r)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,r){return this._attrs.has(t)?r!==void 0?hb(this.name,t)||ck(this.name,t)?this._attrs.get(t).has(r):this._attrs.get(t)===r:!0:!1}isSimilar(t){if(!(t instanceof Du))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size)return!1;for(const[r,i]of this._attrs){const s=t._attrs.get(r);if(s===void 0)return!1;if(typeof i=="string"||typeof s=="string"){if(s!==i)return!1}else if(!i.isSimilar(s))return!1}return!0}hasClass(...t){for(const r of t)if(!this._classes||!this._classes.has(r))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],r=t[Symbol.iterator]();return Object.assign(t,{next:r.next.bind(r)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const r of t)if(!this._styles||!this._styles.has(r))return!1;return!0}findAncestor(...t){const r=new lE(...t);let i=this.parent;for(;i&&!i.is("documentFragment");){if(r.match(i))return i;i=i.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",r=this._styles&&String(this._styles),i=Array.from(this._attrs).filter(([s])=>s!="style"&&s!="class").map(s=>`${s[0]}="${s[1]}"`).sort().join(" ");return this.name+(t==""?"":` class="${t}"`)+(r?` style="${r}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}toJSON(){const t=super.toJSON();if(t.name=this.name,t.type="Element",this._attrs.size&&(t.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){t.children=[];for(const r of this._children)t.children.push(r.toJSON())}return t}_clone(t=!1){const r=[];if(t)for(const s of this.getChildren())r.push(s._clone(t));const i=new this.constructor(this.document,this.name,this._attrs,r);return i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,r){this._fireChange("children",this,{index:t});let i=0;const s=cBe(this.document,r);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(t,0,o),t++,i++;return i}_removeChildren(t,r=1){this._fireChange("children",this,{index:t});for(let i=t;i<t+r;i++)this._children[i].parent=null;return this._children.splice(t,r)}_setAttribute(t,r,i=!0){if(this._fireChange("attributes",this),hb(this.name,t)||ck(this.name,t)){let s=this._attrs.get(t);s||(s=hb(this.name,t)?new jC(this.document.stylesProcessor):new v5,this._attrs.set(t,s)),i?s.setTo(String(r)):hb(this.name,t)?Array.isArray(r)?s.set(r[0],r[1]):s.set(r):s.set(typeof r=="string"?r.split(/\s+/):r)}else this._attrs.set(t,String(r))}_removeAttribute(t,r){if(this._fireChange("attributes",this),r!==void 0&&(hb(this.name,t)||ck(this.name,t))){const i=this._attrs.get(t);return i?(ck(this.name,t)&&typeof r=="string"&&(r=r.split(/\s+/)),i.remove(r),i.isEmpty?this._attrs.delete(t):!1):!1}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,r){typeof t!="string"?this._setAttribute("style",t,!1):this._setAttribute("style",[t,r],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,r,i){for(const[s,o,a]of t){let c=!1,u=!1;for(const[d,h]of this._attrs)if(!(i&&i.includes(d)||!UI(s,d)))if(c=!0,typeof h=="string"){if(UI(o,h))r.push([d]),u=!0;else if(!(s instanceof RegExp))return!1}else{const f=h._getTokensMatch(o,a||!0);if(f){u=!0;for(const p of f)r.push([d,p])}else if(!(s instanceof RegExp))return!1}if(!c||!u)return!1}return!0}_getConsumables(t,r){const i=[];if(t){const s=this._attrs.get(t);if(s!==void 0)if(typeof s=="string")i.push([t]);else for(const o of s._getConsumables(r))i.push([t,o])}else for(const[s,o]of this._attrs)if(typeof o=="string")i.push([s]);else for(const a of o._getConsumables())i.push([s,a]);return{name:!t,attributes:i}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[r,i]of t._attrs){const s=this._attrs.get(r);if(s!==void 0){if(typeof s=="string"||typeof i=="string"){if(s!==i)return!1}else if(!s._canMergeFrom(i))return!1}}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[r,i]of t._attrs){const s=this._attrs.get(r);s===void 0||typeof s=="string"||typeof i=="string"?this._setAttribute(r,i):s._mergeFrom(i)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[r,i]of t._attrs){const s=this._attrs.get(r);if(s===void 0)return!1;if(typeof s=="string"||typeof i=="string"){if(s!==i)return!1}else if(!s._isMatching(i))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[r,i]of t._attrs){const s=this._attrs.get(r);typeof s=="string"||typeof i=="string"?this._attrs.delete(r):(s.remove(i.keys()),s.isEmpty&&this._attrs.delete(r))}}_setCustomProperty(t,r){this._customProperties.set(t,r)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const r=hm(t);for(const[i,s]of r)if(s===null)r.delete(i);else if(hb(this.name,i)){const o=s instanceof jC?s._clone():new jC(this.document.stylesProcessor).setTo(String(s));r.set(i,o)}else if(ck(this.name,i)){const o=s instanceof v5?s._clone():new v5().setTo(String(s));r.set(i,o)}else typeof s!="string"&&r.set(i,String(s));return r}}Du.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function cBe(n,e){if(typeof e=="string")return[new Ui(n,e)];$l(e)||(e=[e]);const t=[];for(const r of e)typeof r=="string"?t.push(new Ui(n,r)):r instanceof nf?t.push(new Ui(n,r.data)):t.push(r);return t}function ck(n,e){return e=="class"||n=="a"&&e=="rel"}function hb(n,e){return e=="style"}class cE extends Du{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=uBe}toJSON(){const e=super.toJSON();return e.type="ContainerElement",e}}cE.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function uBe(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}class DM extends Tr(cE){constructor(e,t,r,i){super(e,t,r,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",s=>s&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const e=super.toJSON();return e.type="EditableElement",e.isReadOnly=this.isReadOnly,e.isFocused=this.isFocused,e}}DM.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const iJ=Symbol("rootName");class Dme extends DM{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(iJ)}set rootName(e){this._setCustomProperty(iJ,e)}toJSON(){return this.rootName}set _name(e){this.name=e}}Dme.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class dy{constructor(e={}){j(this,"direction");j(this,"boundaries");j(this,"singleCharacters");j(this,"shallow");j(this,"ignoreElementEnd");j(this,"_position");j(this,"_boundaryStartParent");j(this,"_boundaryEndParent");if(!e.boundaries&&!e.startPosition)throw new _e("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new _e("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=it._createAt(e.startPosition):this._position=it._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,r;do r=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=r)}jumpTo(e){this._boundaryStartParent&&e.isBefore(this.boundaries.start)?e=this.boundaries.start:this._boundaryEndParent&&e.isAfter(this.boundaries.end)&&(e=this.boundaries.end),this._position=e.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,r=e.parent;if(r.parent===null&&e.offset===r.childCount)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(r&&r.is("view:$text")){if(e.isAtEnd)return this._position=it._createAfter(r),this._next();i=r.data[e.offset]}else i=r.getChild(e.offset);if(typeof i=="string"){let s;this.singleCharacters?s=1:s=(r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length)-e.offset;const o=new nf(r,e.offset,s);return e.offset+=s,this._position=e,this._formatReturnValue("text",o,t,e,s)}if(i&&i.is("view:element")){if(!this.shallow)e=new it(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}if(i&&i.is("view:$text")){if(this.singleCharacters)return e=new it(i,0),this._position=e,this._next();let s=i.data.length,o;return i==this._boundaryEndParent?(s=this.boundaries.end.offset,o=new nf(i,0,s),e=it._createAfter(o)):(o=new nf(i,0,i.data.length),e.offset++),this._position=e,this._formatReturnValue("text",o,t,e,s)}return e=it._createAfter(r),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",r,t,e)}_previous(){let e=this.position.clone();const t=this.position,r=e.parent;if(r.parent===null&&e.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(r.is("view:$text")){if(e.isAtStart)return this._position=it._createBefore(r),this._previous();i=r.data[e.offset-1]}else i=r.getChild(e.offset-1);if(typeof i=="string"){let s;if(this.singleCharacters)s=1;else{const a=r===this._boundaryStartParent?this.boundaries.start.offset:0;s=e.offset-a}e.offset-=s;const o=new nf(r,e.offset,s);return this._position=e,this._formatReturnValue("text",o,t,e,s)}if(i&&i.is("view:element"))return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",i,t,e,1)):(e=new it(i,i.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,t,e));if(i&&i.is("view:$text")){if(this.singleCharacters)return e=new it(i,i.data.length),this._position=e,this._previous();let s=i.data.length,o;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new nf(i,a,i.data.length-a),s=o.data.length,e=it._createBefore(o)}else o=new nf(i,0,i.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",o,t,e,s)}return e=it._createBefore(r),this._position=e,this._formatReturnValue("elementStart",r,t,e,1)}_formatReturnValue(e,t,r,i,s){return t.is("view:$textProxy")&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=it._createAfter(t.textNode),this._position=i):r=it._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=it._createBefore(t.textNode),this._position=i):r=it._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:r,nextPosition:i,length:s}}}}class it extends dx{constructor(t,r){super();j(this,"parent");j(this,"offset");this.parent=t,this.offset=r}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof DM);)if(t.parent)t=t.parent;else return null;return t}getShiftedBy(t){const r=it._createAt(this),i=r.offset+t;return r.offset=i<0?0:i,r}getLastMatchingPosition(t,r={}){r.startPosition=this;const i=new dy(r);return i.skip(t),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const r=this.getAncestors(),i=t.getAncestors();let s=0;for(;r[s]==i[s]&&r[s];)s++;return s===0?null:r[s-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const r=this.parent.is("node")?this.parent.getPath():[],i=t.parent.is("node")?t.parent.getPath():[];r.push(this.offset),i.push(t.offset);const s=qs(r,i);switch(s){case"prefix":return"before";case"extension":return"after";default:return r[s]<i[s]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new dy(t)}clone(){return new it(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(t,r){if(t instanceof it)return new this(t.parent,t.offset);{const i=t;if(r=="end")r=i.is("$text")?i.data.length:i.childCount;else{if(r=="before")return this._createBefore(i);if(r=="after")return this._createAfter(i);if(r!==0&&!r)throw new _e("view-createpositionat-offset-required",i)}return new it(i,r)}}static _createAfter(t){if(t.is("$textProxy"))return new it(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new _e("view-position-after-root",t,{root:t});return new it(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new it(t.textNode,t.offsetInText);if(!t.parent)throw new _e("view-position-before-root",t,{root:t});return new it(t.parent,t.index)}}it.prototype.is=function(n){return n==="position"||n==="view:position"};class Qt extends dx{constructor(t,r=null){super();j(this,"start");j(this,"end");this.start=t.clone(),this.end=r?r.clone():t.clone()}*[Symbol.iterator](){yield*new dy({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(wj,{direction:"backward"}),r=this.end.getLastMatchingPosition(wj);return t.parent.is("$text")&&t.isAtStart&&(t=it._createBefore(t.parent)),r.parent.is("$text")&&r.isAtEnd&&(r=it._createAfter(r.parent)),new Qt(t,r)}getTrimmed(){let t=this.start.getLastMatchingPosition(wj);if(t.isAfter(this.end)||t.isEqual(this.end))return new Qt(t,t);let r=this.end.getLastMatchingPosition(wj,{direction:"backward"});const i=t.nodeAfter,s=r.nodeBefore;return i&&i.is("$text")&&(t=new it(i,0)),s&&s.is("$text")&&(r=new it(s,s.data.length)),new Qt(t,r)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,r=!1){t.isCollapsed&&(r=!1);const i=this.containsPosition(t.start)||r&&this.start.isEqual(t.start),s=this.containsPosition(t.end)||r&&this.end.isEqual(t.end);return i&&s}getDifference(t){const r=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&r.push(new Qt(this.start,t.start)),this.containsPosition(t.end)&&r.push(new Qt(t.end,this.end))):r.push(this.clone()),r}getIntersection(t){if(this.isIntersecting(t)){let r=this.start,i=this.end;return this.containsPosition(t.start)&&(r=t.start),this.containsPosition(t.end)&&(i=t.end),new Qt(r,i)}return null}getWalker(t={}){return t.boundaries=this,new dy(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,r=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(r=this.end.parent.previousSibling),t&&t.is("element")&&t===r?t:null}clone(){return new Qt(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const r=new dy(t);for(const i of r)yield i.item}*getPositions(t={}){t.boundaries=this;const r=new dy(t);yield r.position;for(const i of r)yield i.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(t,r,i,s){return new this(new it(t,r),new it(i,s))}static _createFromPositionAndShift(t,r){const i=t,s=t.getShiftedBy(r);return r>0?new this(i,s):new this(s,i)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const r=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(it._createBefore(t),r)}}Qt.prototype.is=function(n){return n==="range"||n==="view:range"};function wj(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}class Eu extends dr(dx){constructor(...t){super();j(this,"_ranges");j(this,"_lastRangeBackward");j(this,"_isFake");j(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const r of this._ranges)(!t||r.start.isBefore(t.start))&&(t=r);return t?t.clone():null}getLastRange(){let t=null;for(const r of this._ranges)(!t||r.end.isAfter(t.end))&&(t=r);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const r of this._ranges){let i=!1;for(const s of t._ranges)if(r.isEqual(s)){i=!0;break}if(!i)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const r=s$(this.getRanges()),i=s$(t.getRanges());if(r!=i)return!1;if(r==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let o=!1;for(let a of t.getRanges())if(a=a.getTrimmed(),s.start.isEqual(a.start)&&s.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...t){let[r,i,s]=t;if(typeof i=="object"&&(s=i,i=void 0),r===null)this._setRanges([]),this._setFakeOptions(s);else if(r instanceof Eu||r instanceof xz)this._setRanges(r.getRanges(),r.isBackward),this._setFakeOptions({fake:r.isFake,label:r.fakeSelectionLabel});else if(r instanceof Qt)this._setRanges([r],s&&s.backward),this._setFakeOptions(s);else if(r instanceof it)this._setRanges([new Qt(r)]),this._setFakeOptions(s);else if(r instanceof hx){const o=!!s&&!!s.backward;let a;if(i===void 0)throw new _e("view-selection-setto-required-second-parameter",this);i=="in"?a=Qt._createIn(r):i=="on"?a=Qt._createOn(r):a=new Qt(it._createAt(r,i)),this._setRanges([a],o),this._setFakeOptions(s)}else if($l(r))this._setRanges(r,s&&s.backward),this._setFakeOptions(s);else throw new _e("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(t,r){if(this.anchor===null)throw new _e("view-selection-setfocus-no-ranges",this);const i=it._createAt(t,r);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.pop(),i.compareWith(s)=="before"?this._addRange(new Qt(i,s),!0):this._addRange(new Qt(s,i)),this.fire("change")}toJSON(){const t={ranges:Array.from(this.getRanges()).map(r=>r.toJSON())};return this.isBackward&&(t.isBackward=!0),this.isFake&&(t.isFake=!0),t}_setRanges(t,r=!1){t=Array.from(t),this._ranges=[];for(const i of t)this._addRange(i);this._lastRangeBackward=!!r}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,r=!1){if(!(t instanceof Qt))throw new _e("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!r}_pushRange(t){for(const r of this._ranges)if(t.isIntersecting(r))throw new _e("view-selection-range-intersects",this,{addedRange:t,intersectingRange:r});this._ranges.push(new Qt(t.start,t.end))}}Eu.prototype.is=function(n){return n==="selection"||n==="view:selection"};class xz extends dr(dx){constructor(...t){super();j(this,"_selection");this._selection=new Eu,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}toJSON(){return this._selection.toJSON()}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,r){this._selection.setFocus(t,r)}}xz.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class fx extends um{constructor(t,r,i){super(t,r);j(this,"startRange");j(this,"_eventPhase");j(this,"_currentTarget");this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const y5=Symbol("bubblingEmitter"),x5=Symbol("bubblingCallbacks"),b5=Symbol("bubblingContexts");function dBe(n){class e extends n{fire(r,...i){try{const s=r instanceof um?r:new um(this,r),o=w5(this),a=oJ(this);if(uk(s,"capturing",this),_j(o,"$capture",s,...i))return s.return;const c=s.startRange||this.selection.getFirstRange(),u=c?c.getContainedElement():null,d=u?fBe(a,u):!1;let h=u||mBe(c);if(uk(s,"atTarget",h),!d){if(_j(o,"$text",s,...i))return s.return;uk(s,"bubbling",h)}for(;h;){if(h.is("element")&&_j(o,h,s,...i))return s.return;h=h.parent,uk(s,"bubbling",h)}return uk(s,"bubbling",this),_j(o,"$document",s,...i),s.return}catch(s){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(s,this)}}_addEventListener(r,i,s){const o=Ur(s.context||"$document"),a=w5(this),c=sJ(this);for(const d of o)typeof d=="function"&&oJ(this).add(d);const u=hBe(this,o,i);c.set(i,u),this.listenTo(a,r,u,s)}_removeEventListener(r,i){const s=w5(this),o=sJ(this),a=o.get(i);a&&(o.delete(i),this.stopListening(s,r,a))}}return e}function uk(n,e,t){n instanceof fx&&(n._eventPhase=e,n._currentTarget=t)}function _j(n,e,t,...r){return n.fire(t,{currentTarget:e,eventArgs:r}),!!t.stop.called}function hBe(n,e,t){return function(r,i){const{currentTarget:s,eventArgs:o}=i;if(typeof s=="string"){e.includes(s)&&t.call(n,r,...o);return}if(s.is("rootElement")&&e.includes("$root")){t.call(n,r,...o);return}if(e.includes(s.name)){t.call(n,r,...o);return}for(const a of e)if(typeof a=="function"&&a(s)){t.call(n,r,...o);return}}}function w5(n){return n[y5]||(n[y5]=new(dr())),n[y5]}function sJ(n){return n[x5]||(n[x5]=new Map),n[x5]}function oJ(n){return n[b5]||(n[b5]=new Set),n[b5]}function fBe(n,e){for(const t of n)if(t(e))return!0;return!1}function mBe(n){if(!n)return null;const e=n.start.parent,t=n.end.parent,r=e.getPath(),i=t.getPath();return r.length>i.length?e:t}class Lme extends dBe(Tr()){constructor(t){super();j(this,"selection");j(this,"roots");j(this,"stylesProcessor");j(this,"_postFixers",new Set);this.selection=new xz,this.roots=new Gu({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.forEach(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let r=!1;do for(const i of this._postFixers)if(r=i(t),r)break;while(r)}}const aJ=10;class L0 extends Du{constructor(t,r,i,s){super(t,r,i,s);j(this,"_priority",aJ);j(this,"_id",null);j(this,"_clonesGroup",null);this.getFillerOffset=pBe}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new _e("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}toJSON(){const t=super.toJSON();return t.type="AttributeElement",t}_clone(t=!1){const r=super._clone(t);return r._priority=this._priority,r._id=this._id,r}_canMergeAttributesFrom(t){return this.id!==null||t.id!==null||this.priority!==t.priority?!1:super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return this.id!==null||t.id!==null||this.priority!==t.priority?!1:super._canSubtractAttributesOf(t)}}j(L0,"DEFAULT_PRIORITY",aJ);L0.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function pBe(){if(_5(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(_5(n)>1)return null;n=n.parent}return!n||_5(n)>1?null:this.childCount}function _5(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}class bz extends Du{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=gBe}toJSON(){const e=super.toJSON();return e.type="EmptyElement",e}_insertChild(e,t){if(t&&(t instanceof hx||Array.from(t).length>0))throw new _e("view-emptyelement-cannot-add",[this,t]);return 0}}bz.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function gBe(){return null}class LM extends Du{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=yBe}_insertChild(e,t){if(t&&(t instanceof hx||Array.from(t).length>0))throw new _e("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const r of this.getAttributeKeys())t.setAttribute(r,this.getAttribute(r));return t}toJSON(){const e=super.toJSON();return e.type="UIElement",e}}LM.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function vBe(n){n.document.on("arrowKey",(e,t)=>xBe(e,t,n.domConverter),{priority:"low"})}function yBe(){return null}function xBe(n,e,t){if(e.keyCode==yn.arrowright){const r=e.domTarget.ownerDocument.defaultView.getSelection(),i=r.rangeCount==1&&r.getRangeAt(0).collapsed;if(i||e.shiftKey){const s=r.focusNode,o=r.focusOffset,a=t.domPositionToView(s,o);if(a===null)return;let c=!1;const u=a.getLastMatchingPosition(d=>(d.item.is("uiElement")&&(c=!0),!!(d.item.is("uiElement")||d.item.is("attributeElement"))));if(c){const d=t.viewPositionToDom(u);i?r.collapse(d.parent,d.offset):r.extend(d.parent,d.offset)}}}}class wz extends Du{constructor(e,t,r,i){super(e,t,r,i),this.getFillerOffset=bBe}toJSON(){const e=super.toJSON();return e.type="RawElement",e}_insertChild(e,t){if(t&&(t instanceof hx||Array.from(t).length>0))throw new _e("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}wz.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function bBe(){return null}class F0 extends dr(dx){constructor(t,r){super();j(this,"document");j(this,"_children",[]);j(this,"_customProperties",new Map);this.document=t,r&&this._insertChild(0,r)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const t=[];for(const r of this._children)t.push(r.toJSON());return t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,r){this._fireChange("children",this,{index:t});let i=0;const s=wBe(this.document,r);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(t,0,o),t++,i++;return i}_removeChildren(t,r=1){this._fireChange("children",this,{index:t});for(let i=t;i<t+r;i++)this._children[i].parent=null;return this._children.splice(t,r)}_fireChange(t,r,i){this.fire(`change:${t}`,r,i)}_setCustomProperty(t,r){this._customProperties.set(t,r)}_removeCustomProperty(t){return this._customProperties.delete(t)}}F0.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function wBe(n,e){return typeof e=="string"?[new Ui(n,e)]:($l(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Ui(n,t):t instanceof nf?new Ui(n,t.data):t))}class Fme{constructor(e){j(this,"document");j(this,"_cloneGroups",new Map);j(this,"_slotFactory",null);this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new F0(this.document,e)}createText(e){return new Ui(this.document,e)}createAttributeElement(e,t,r={}){const i=new L0(this.document,e,t);return typeof r.priority=="number"&&(i._priority=r.priority),r.id&&(i._id=r.id),r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createContainerElement(e,t,r={},i={}){let s;CBe(r)?i=r:s=r;const o=new cE(this.document,e,t,s);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createEditableElement(e,t,r={}){const i=new DM(this.document,e,t);return r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createEmptyElement(e,t,r={}){const i=new bz(this.document,e,t);return r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createUIElement(e,t,r){const i=new LM(this.document,e,t);return r&&(i.render=r),i}createRawElement(e,t,r,i={}){const s=new wz(this.document,e,t);return r&&(s.render=r),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}setAttribute(e,t,r,i){i!==void 0?i._setAttribute(e,t,r):r._setAttribute(e,t)}removeAttribute(e,t,r){r!==void 0?r._removeAttribute(e,t):t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,r){Jd(e)&&r===void 0?t._setStyle(e):r._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,r){r._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof it?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new _e("view-writer-break-non-container-element",this.document);if(!t.parent)throw new _e("view-writer-break-root",this.document);if(e.isAtStart)return it._createBefore(t);if(!e.isAtEnd){const r=t._clone(!1);this.insert(it._createAfter(t),r);const i=new Qt(e,it._createAt(t,"end")),s=new it(r,0);this.move(i,s)}return it._createAfter(t)}mergeAttributes(e){const t=e.offset,r=e.parent;if(r.is("$text"))return e;if(r.is("attributeElement")&&r.childCount===0){const o=r.parent,a=r.index;return r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new it(o,a))}const i=r.getChild(t-1),s=r.getChild(t);if(!i||!s)return e;if(i.is("$text")&&s.is("$text"))return cJ(i,s);if(i.is("attributeElement")&&s.is("attributeElement")&&i.isSimilar(s)){const o=i.childCount;return i._appendChild(s.getChildren()),s._remove(),this._removeFromClonedElementsGroup(s),this.mergeAttributes(new it(i,o))}return e}mergeContainers(e){const t=e.nodeBefore,r=e.nodeAfter;if(!t||!r||!t.is("containerElement")||!r.is("containerElement"))throw new _e("view-writer-merge-containers-invalid-position",this.document);const i=t.getChild(t.childCount-1),s=i instanceof Ui?it._createAt(i,"end"):it._createAt(t,"end");return this.move(Qt._createIn(r),it._createAt(t,"end")),this.remove(Qt._createOn(r)),s}insert(e,t){t=$l(t)?[...t]:[t],Bme(t,this.document);const r=t.reduce((o,a)=>{const c=o[o.length-1],u=!a.is("uiElement");return!c||c.breakAttributes!=u?o.push({breakAttributes:u,nodes:[a]}):c.nodes.push(a),o},[]);let i=null,s=e;for(const{nodes:o,breakAttributes:a}of r){const c=this._insertNodes(s,o,a);i||(i=c.start),s=c.end}return i?new Qt(i,s):new Qt(e)}remove(e){const t=e instanceof Qt?e:Qt._createOn(e);if(dk(t,this.document),t.isCollapsed)return new F0(this.document);const{start:r,end:i}=this._breakAttributesRange(t,!0),s=r.parent,o=i.offset-r.offset,a=s._removeChildren(r.offset,o);for(const u of a)this._removeFromClonedElementsGroup(u);const c=this.mergeAttributes(r);return t.start=c,t.end=c.clone(),new F0(this.document,a)}clear(e,t){dk(e,this.document);const r=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const i of r){const s=i.item;let o;if(s.is("element")&&t.isSimilar(s))o=Qt._createOn(s);else if(!i.nextPosition.isAfter(e.start)&&s.is("$textProxy")){const a=s.getAncestors().find(c=>c.is("element")&&t.isSimilar(c));a&&(o=Qt._createIn(a))}o&&(o.end.isAfter(e.end)&&(o.end=e.end),o.start.isBefore(e.start)&&(o.start=e.start),this.remove(o))}}move(e,t){let r;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const i=t.parent,s=i.childCount;e=this._breakAttributesRange(e,!0),r=this.remove(e),t.offset+=i.childCount-s}else r=this.remove(e);return this.insert(t,r)}wrap(e,t){if(!(t instanceof L0))throw new _e("view-writer-wrap-invalid-attribute",this.document);if(dk(e,this.document),e.isCollapsed){let r=e.start;r.parent.is("element")&&!_Be(r.parent)&&(r=r.getLastMatchingPosition(s=>s.item.is("uiElement"))),r=this._wrapPosition(r,t);const i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(e.start)&&this.setSelection(r),new Qt(r)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof L0))throw new _e("view-writer-unwrap-invalid-attribute",this.document);if(dk(e,this.document),e.isCollapsed)return e;const{start:r,end:i}=this._breakAttributesRange(e,!0),s=r.parent,o=this._unwrapChildren(s,r.offset,i.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const c=this.mergeAttributes(o.end);return new Qt(a,c)}rename(e,t){const r=new cE(this.document,e,t.getAttributes());return this.insert(it._createAfter(t),r),this.move(Qt._createIn(t),it._createAt(r,0)),this.remove(Qt._createOn(t)),r}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return it._createAt(e,t)}createPositionAfter(e){return it._createAfter(e)}createPositionBefore(e){return it._createBefore(e)}createRange(e,t){return new Qt(e,t)}createRangeOn(e){return Qt._createOn(e)}createRangeIn(e){return Qt._createIn(e)}createSelection(...e){return new Eu(...e)}createSlot(e="children"){if(!this._slotFactory)throw new _e("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,r){let i;if(r?i=l$(e):i=e.parent.is("$text")?e.parent.parent:e.parent,!i)throw new _e("view-writer-invalid-position-container",this.document);let s;r?s=this._breakAttributes(e,!0):s=e.parent.is("$text")?S5(e):e;const o=i._insertChild(s.offset,t);for(const d of t)this._addToClonedElementsGroup(d);const a=s.getShiftedBy(o),c=this.mergeAttributes(s);c.isEqual(s)||a.offset--;const u=this.mergeAttributes(a);return new Qt(c,u)}_wrapChildren(e,t,r,i){let s=t;const o=[];for(;s<r;){const c=e.getChild(s),u=c.is("$text"),d=c.is("attributeElement");if(d&&c._canMergeAttributesFrom(i))c._mergeAttributesFrom(i),o.push(new it(e,s));else if(u||!d||SBe(i,c)){const h=i._clone();c._remove(),h._appendChild(c),e._insertChild(s,h),this._addToClonedElementsGroup(h),o.push(new it(e,s))}else this._wrapChildren(c,0,c.childCount,i);s++}let a=0;for(const c of o){if(c.offset-=a,c.offset==t)continue;this.mergeAttributes(c).isEqual(c)||(a++,r--)}return Qt._createFromParentsAndOffsets(e,t,e,r)}_unwrapChildren(e,t,r,i){let s=t;const o=[];for(;s<r;){const c=e.getChild(s);if(!c.is("attributeElement")){s++;continue}if(c.isSimilar(i)){const u=c.getChildren(),d=c.childCount;c._remove(),e._insertChild(s,u),this._removeFromClonedElementsGroup(c),o.push(new it(e,s),new it(e,s+d)),s+=d,r+=d-1;continue}if(c._canSubtractAttributesOf(i)){c._subtractAttributesOf(i),o.push(new it(e,s),new it(e,s+1)),s++;continue}this._unwrapChildren(c,0,c.childCount,i),s++}let a=0;for(const c of o){if(c.offset-=a,c.offset==t||c.offset==r)continue;this.mergeAttributes(c).isEqual(c)||(a++,r--)}return Qt._createFromParentsAndOffsets(e,t,e,r)}_wrapRange(e,t){const{start:r,end:i}=this._breakAttributesRange(e,!0),s=r.parent,o=this._wrapChildren(s,r.offset,i.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const c=this.mergeAttributes(o.end);return new Qt(a,c)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return lJ(e.clone());e.parent.is("$text")&&(e=S5(e));const r=this.createAttributeElement("_wrapPosition-fake-element");r._priority=Number.POSITIVE_INFINITY,r.isSimilar=()=>!1,e.parent._insertChild(e.offset,r);const i=new Qt(e,e.getShiftedBy(1));this.wrap(i,t);const s=new it(r.parent,r.index);r._remove();const o=s.nodeBefore,a=s.nodeAfter;return o&&o.is("view:$text")&&a&&a.is("view:$text")?cJ(o,a):lJ(s)}_breakAttributesRange(e,t=!1){const r=e.start,i=e.end;if(dk(e,this.document),e.isCollapsed){const c=this._breakAttributes(e.start,t);return new Qt(c,c)}const s=this._breakAttributes(i,t),o=s.parent.childCount,a=this._breakAttributes(r,t);return s.offset+=s.parent.childCount-o,new Qt(a,s)}_breakAttributes(e,t=!1){const r=e.offset,i=e.parent;if(e.parent.is("emptyElement"))throw new _e("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new _e("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new _e("view-writer-cannot-break-raw-element",this.document);if(!t&&i.is("$text")&&c$(i.parent)||c$(i))return e.clone();if(i.is("$text"))return this._breakAttributes(S5(e),t);const s=i.childCount;if(r==s){const o=new it(i.parent,i.index+1);return this._breakAttributes(o,t)}else if(r===0){const o=new it(i.parent,i.index);return this._breakAttributes(o,t)}else{const o=i.index+1,a=i._clone();i.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const c=i.childCount-r,u=i._removeChildren(r,c);a._appendChild(u);const d=new it(i.parent,o);return this._breakAttributes(d,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const i of e.getChildren())this._addToClonedElementsGroup(i);const t=e.id;if(!t)return;let r=this._cloneGroups.get(t);r||(r=new Set,this._cloneGroups.set(t,r)),r.add(e),e._clonesGroup=r}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const i of e.getChildren())this._removeFromClonedElementsGroup(i);const t=e.id;if(!t)return;const r=this._cloneGroups.get(t);r&&r.delete(e)}}function _Be(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function l$(n){let e=n.parent;for(;!c$(e);){if(!e)return;e=e.parent}return e}function SBe(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function lJ(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new it(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new it(t,0):n}function S5(n){if(n.offset==n.parent.data.length)return new it(n.parent.parent,n.parent.index+1);if(n.offset===0)return new it(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new Ui(n.root.document,e)),new it(n.parent.parent,n.parent.index+1)}function cJ(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new it(n,t)}const kBe=[Ui,L0,cE,bz,wz,LM];function Bme(n,e){for(const t of n){if(!kBe.some(r=>t instanceof r))throw new _e("view-writer-insert-invalid-node-type",e);t.is("$text")||Bme(t.getChildren(),e)}}function c$(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function dk(n,e){const t=l$(n.start),r=l$(n.end);if(!t||!r||t!==r)throw new _e("view-writer-invalid-range-container",e)}function CBe(n){return Jd(n)}const $me=n=>n.createTextNode(" "),Vme=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},Ume=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},jl=7,uE="⁠".repeat(jl);function Lo(n){return typeof n=="string"?n.substr(0,jl)===uE:Yr(n)&&n.data.substr(0,jl)===uE}function Ub(n){return n.data.length==jl&&Lo(n)}function uJ(n){const e=typeof n=="string"?n:n.data;return Lo(n)?e.slice(jl):e}function EBe(n){n.document.on("arrowKey",TBe,{priority:"low"})}function TBe(n,e){if(e.keyCode==yn.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const r=t.getRangeAt(0).startContainer,i=t.getRangeAt(0).startOffset;Lo(r)&&i<=jl&&t.collapse(r,0)}}}class ABe extends Tr(){constructor(t,r){super();j(this,"domDocuments",new Set);j(this,"domConverter");j(this,"markedAttributes",new Set);j(this,"markedChildren",new Set);j(this,"markedTexts",new Set);j(this,"selection");j(this,"_inlineFiller",null);j(this,"_fakeSelectionContainer",null);this.domConverter=t,this.selection=r,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Vt.isBlink&&!Vt.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(t,r){if(t==="text")this.domConverter.mapViewToDom(r.parent)&&this.markedTexts.add(r);else{if(!this.domConverter.mapViewToDom(r))return;if(t==="attributes")this.markedAttributes.add(r);else if(t==="children")this.markedChildren.add(r);else throw new _e("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Vt.isAndroid)return;let t=null;const r=Vt.isBlink&&!Vt.isAndroid?!this.isSelecting:!0;for(const i of this.markedChildren)this._updateChildrenMappings(i);r?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller),t&&t.parent.is("$text")&&(t=it._createBefore(t.parent)));for(const i of this.markedAttributes)this._updateAttrs(i);for(const i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:t});for(const i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:t});if(r)if(t){const i=this.domConverter.viewPositionToDom(t),s=i.parent.ownerDocument;Lo(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=dJ(s,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const r=this.domConverter.mapViewToDom(t);if(!r)return;const i=Array.from(r.childNodes),s=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),o=this._diffNodeLists(i,s),a=this._findUpdateActions(o,i,s,jBe);if(a.indexOf("update")!==-1){const c={equal:0,insert:0,delete:0};for(const u of a)if(u==="update"){const d=c.equal+c.insert,h=c.equal+c.delete,f=t.getChild(d);f&&!f.is("uiElement")&&!f.is("rawElement")&&this._updateElementMappings(f,i[h]),GX(s[d]),c.equal++}else c[u]++}}_updateElementMappings(t,r){this.domConverter.unbindDomElement(r),this.domConverter.bindElements(r,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?it._createBefore(t.parent):t}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),r=this.domConverter.viewPositionToDom(t);return!!(r&&Yr(r.parent)&&Lo(r.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!Lo(t))throw new _e("view-renderer-filler-was-lost",this);Ub(t)?t.remove():t.data=t.data.substr(jl),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),r=t.parent,i=t.offset;if(!this.domConverter.mapViewToDom(r.root)||!r.is("element")||!NBe(r))return!1;const s=t.nodeBefore,o=t.nodeAfter;return!(s instanceof Ui||o instanceof Ui||i===r.getFillerOffset()&&(!s||!s.is("element","br"))||Vt.isAndroid&&(s||o))}_updateText(t,r){const i=this.domConverter.findCorrespondingDomText(t);let o=this.domConverter.viewToDom(t).data;const a=r.inlineFillerPosition;a&&a.parent==t.parent&&a.offset==t.index&&(o=uE+o),this._updateTextNode(i,o)}_updateAttrs(t){const r=this.domConverter.mapViewToDom(t);if(r){for(const i of Array.from(r.attributes)){const s=i.name;t.hasAttribute(s)||this.domConverter.removeDomElementAttribute(r,s)}for(const i of t.getAttributeKeys())this.domConverter.setDomElementAttribute(r,i,t.getAttribute(i),t)}}_updateChildren(t,r){const i=this.domConverter.mapViewToDom(t);if(!i)return;if(Vt.isAndroid){let f=null;for(const p of Array.from(i.childNodes)){if(f&&Yr(f)&&Yr(p)){i.normalize();break}f=p}}const s=r.inlineFillerPosition,o=i.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));s&&s.parent===t&&dJ(i.ownerDocument,a,s.offset);const c=this._diffNodeLists(o,a),u=this._findUpdateActions(c,o,a,PBe);let d=0;const h=new Set;for(const f of u)f==="delete"?(h.add(o[d]),GX(o[d])):(f==="equal"||f==="update")&&d++;d=0;for(const f of u)f==="insert"?(Tme(i,d,a[d]),d++):f==="update"?(this._updateTextNode(o[d],a[d].data),d++):f==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[d])),d++);for(const f of h)f.parentNode||this.domConverter.unbindDomElement(f)}_diffNodeLists(t,r){return t=RBe(t,this._fakeSelectionContainer),mw(t,r,IBe.bind(null,this.domConverter))}_findUpdateActions(t,r,i,s){if(t.indexOf("insert")===-1||t.indexOf("delete")===-1)return t;let o=[],a=[],c=[];const u={equal:0,insert:0,delete:0};for(const d of t)d==="insert"?c.push(i[u.equal+u.insert]):d==="delete"?a.push(r[u.equal+u.delete]):(o=o.concat(mw(a,c,s).map(h=>h==="equal"?"update":h)),o.push("equal"),a=[],c=[]),u[d]++;return o.concat(mw(a,c,s).map(d=>d==="equal"?"update":d))}_updateTextNode(t,r){const i=t.data;i!=r&&(Vt.isAndroid&&this.isComposing&&i.replace(/\u00A0/g," ")==r.replace(/\u00A0/g," ")||this._updateTextNodeInternal(t,r))}_updateTextNodeInternal(t,r){const i=mme(t.data,r);for(const s of i)s.type==="insert"?t.insertData(s.index,s.values.join("")):t.deleteData(s.index,s.howMany)}_markDescendantTextToSync(t){if(t){if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const r of t.getChildren())this._markDescendantTextToSync(r)}}_updateSelection(){if(Vt.isBlink&&!Vt.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const t=this.domConverter.mapViewToDom(this.selection.editableElement);if(!this.isFocused||!t){!this.selection.isFake&&this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected&&this._removeFakeSelection();return}this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&Vt.isAndroid||this._updateDomSelection(t)}_updateFakeSelection(t){const r=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=MBe(r));const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(t))return;(!i.parentElement||i.parentElement!=t)&&t.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||" ";const s=r.getSelection(),o=r.createRange();s.removeAllRanges(),o.selectNodeContents(i),s.addRange(o)}_updateDomSelection(t){const r=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(r))return;const i=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);r.setBaseAndExtent(i.parent,i.offset,s.parent,s.offset),Vt.isGecko&&OBe(s,r)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const r=t&&this.domConverter.domSelectionToView(t);return!(r&&this.selection.isEqual(r)||!this.selection.isCollapsed&&this.selection.isSimilar(r))}_fakeSelectionNeedsUpdate(t){const r=this._fakeSelectionContainer,i=t.ownerDocument.getSelection();return!r||r.parentElement!==t||i.anchorNode!==r&&!r.contains(i.anchorNode)?!0:r.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments){const r=t.getSelection();if(r.rangeCount){const i=t.activeElement,s=this.domConverter.mapDomToView(i);i&&s&&r.removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function NBe(n){if(n.getAttribute("contenteditable")=="false")return!1;const e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function dJ(n,e,t){const r=e instanceof Array?e:e.childNodes,i=r[t];if(Yr(i))return i.data=uE+i.data,i;{const s=n.createTextNode(uE);return Array.isArray(e)?r.splice(t,0,s):Tme(e,t,s),s}}function jBe(n,e){return $g(n)&&$g(e)&&!Yr(n)&&!Yr(e)&&!NC(n)&&!NC(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function PBe(n,e){return $g(n)&&$g(e)&&Yr(n)&&Yr(e)}function IBe(n,e,t){return e===t?!0:Yr(e)&&Yr(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function OBe(n,e){let t=n.parent,r=n.offset;if(Yr(t)&&Ub(t)&&(r=Vb(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||r!=t.childNodes.length-1)return;const i=t.childNodes[r];i&&i.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function RBe(n,e){const t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function MBe(n){const e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}const DBe=Ume(yt.document),LBe=$me(yt.document),FBe=Vme(yt.document),Sj="data-ck-unsafe-attribute-",hJ="data-ck-unsafe-element";class zme{constructor(e,{blockFillerMode:t,renderingMode:r="editing"}={}){j(this,"document");j(this,"renderingMode");j(this,"blockFillerMode");j(this,"preElements");j(this,"blockElements");j(this,"inlineObjectElements");j(this,"unsafeElements");j(this,"_domDocument");j(this,"_domToViewMapping",new WeakMap);j(this,"_viewToDomMapping",new WeakMap);j(this,"_fakeSelectionMapping",new WeakMap);j(this,"_rawContentElementMatcher",new lE);j(this,"_inlineObjectElementMatcher",new lE);j(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=e,this.renderingMode=r,this.blockFillerMode=t||(r==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?yt.document:yt.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Eu(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const r of e.children)this.unbindDomElement(r)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,r){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:r==="img"&&(e==="src"||e==="srcset")||r==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const r=new DOMParser().parseFromString(t,"text/html"),i=r.createDocumentFragment(),s=r.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);const o=r.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),a=[];let c;for(;c=o.nextNode();)a.push(c);for(const u of a){for(const h of u.getAttributeNames())this.setDomElementAttribute(u,h,u.getAttribute(h));const d=u.tagName.toLowerCase();this._shouldRenameElement(d)&&(gJ(d),u.replaceWith(this._createReplacementDomElement(d,u)))}for(;e.firstChild;)e.firstChild.remove();e.append(i)}viewToDom(e,t={}){if(e.is("$text")){const r=this._processDataFromViewText(e);return this._domDocument.createTextNode(r)}else{const r=e;if(this.mapViewToDom(r))if(r.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(r);else return this.mapViewToDom(r);let i;if(r.is("documentFragment"))i=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(i,r);else{if(r.is("uiElement"))return r.name==="$comment"?i=this._domDocument.createComment(r.getCustomProperty("$rawContent")):i=r.render(this._domDocument,this),t.bind&&this.bindElements(i,r),i;this._shouldRenameElement(r.name)?(gJ(r.name),i=this._createReplacementDomElement(r.name)):r.hasAttribute("xmlns")?i=this._domDocument.createElementNS(r.getAttribute("xmlns"),r.name):i=this._domDocument.createElement(r.name),r.is("rawElement")&&r.render(i,this),t.bind&&this.bindElements(i,r);for(const s of r.getAttributeKeys())this.setDomElementAttribute(i,s,r.getAttribute(s),r)}if(t.withChildren!==!1)for(const s of this.viewChildrenToDom(r,t))i instanceof HTMLTemplateElement?i.content.appendChild(s):i.appendChild(s);return i}}setDomElementAttribute(e,t,r,i){const s=this.shouldRenderAttribute(t,r,e.tagName.toLowerCase())||i&&i.shouldRenderUnsafeAttribute(t);if(s||Yn("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:r}),!h8e(t)){Yn("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:r});return}e.hasAttribute(t)&&!s?e.removeAttribute(t):e.hasAttribute(Sj+t)&&s&&e.removeAttribute(Sj+t),e.setAttribute(s?t:Sj+t,r)}removeDomElementAttribute(e,t){t!=hJ&&(e.removeAttribute(t),e.removeAttribute(Sj+t))}*viewChildrenToDom(e,t={}){const r=e.getFillerOffset&&e.getFillerOffset();let i=0;for(const s of e.getChildren()){r===i&&(yield this._getBlockFiller());const o=s.is("element")&&!!s.getCustomProperty("dataPipeline:transparentRendering")&&!Ra(s.getAttributes());if(o&&this.renderingMode=="data")if(s.is("rawElement")){const a=this._domDocument.createElement(s.name);s.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(s,t);else o&&Yn("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:s}),yield this.viewToDom(s,t);i++}r===i&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),r=this.viewPositionToDom(e.end),i=this._domDocument.createRange();return i.setStart(t.parent,t.offset),i.setEnd(r.parent,r.offset),i}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const r=this.findCorrespondingDomText(t);if(!r)return null;let i=e.offset;return Lo(r)&&(i+=jl),r.data&&i>r.data.length&&(i=r.data.length),{parent:r,offset:i}}else{let r,i,s;if(e.offset===0){if(r=this.mapViewToDom(t),!r)return null;s=r.childNodes[0]}else{const a=e.nodeBefore;if(i=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!i)return null;r=i.parentNode,s=i.nextSibling}if(Yr(s)&&Lo(s))return{parent:s,offset:jl};const o=i?Vb(i)+1:0;return{parent:r,offset:o}}}domToView(e,t={}){const r=[],i=this._domToView(e,t,r),s=i.next().value;return!s||(i.next(),this._processDomInlineNodes(null,r,t),this.blockFillerMode=="br"&&mJ(s))||s.is("$text")&&s.data.length==0?null:s}*domChildrenToView(e,t={},r=[]){let i=[];e instanceof HTMLTemplateElement?i=[...e.content.childNodes]:i=[...e.childNodes];for(let s=0;s<i.length;s++){const o=i[s],a=this._domToView(o,t,r),c=a.next().value;c!==null&&(this._isBlockViewElement(c)&&this._processDomInlineNodes(e,r,t),this.blockFillerMode=="br"&&mJ(c)||(yield c),a.next())}this._processDomInlineNodes(e,r,t)}domSelectionToView(e){if(zBe(e))return new Eu([]);if(e.rangeCount===1){let i=e.getRangeAt(0).startContainer;Yr(i)&&(i=i.parentNode);const s=this.fakeSelectionToView(i);if(s)return s}const t=this.isDomSelectionBackward(e),r=[];for(let i=0;i<e.rangeCount;i++){const s=e.getRangeAt(i),o=this.domRangeToView(s);o&&r.push(o)}return new Eu(r,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),r=this.domPositionToView(e.endContainer,e.endOffset);return t&&r?new Qt(t,r):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Vb(e));const r=this.mapDomToView(e);if(r&&(r.is("uiElement")||r.is("rawElement")))return it._createBefore(r);if(Yr(e)){if(Ub(e))return this.domPositionToView(e.parentNode,Vb(e));const i=this.findCorrespondingViewText(e);let s=t;return i?(Lo(e)&&(s-=jl,s=s<0?0:s),new it(i,s)):null}else{if(t===0){const i=this.mapDomToView(e);if(i)return new it(i,0)}else{const i=e.childNodes[t-1];if(Yr(i)&&Ub(i)||i&&this.isBlockFiller(i))return this.domPositionToView(i.parentNode,Vb(i));const s=Yr(i)?this.findCorrespondingViewText(i):this.mapDomToView(i);if(s&&s.parent)return new it(s.parent,s.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Ub(e))return null;const t=this.getHostViewElement(e);if(t)return t;const r=e.previousSibling;if(r){if(!this.isElement(r))return null;const i=this.mapDomToView(r);if(i){const s=i.nextSibling;return s instanceof Ui?s:null}}else{const i=this.mapDomToView(e.parentNode);if(i){const s=i.getChild(0);return s instanceof Ui?s:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(!t||t.ownerDocument.activeElement===t)return;const{scrollX:r,scrollY:i}=yt.window,s=[];fJ(t,o=>{const{scrollLeft:a,scrollTop:c}=o;s.push([a,c])}),t.focus({preventScroll:!0}),fJ(t,o=>{const[a,c]=s.shift();o.scrollLeft=a,o.scrollTop=c}),yt.window.scrollTo(r,i)}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),r=this.domSelectionToView(t);r&&r.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(DBe):pJ(e,this.blockElements)?!0:e.isEqualNode(FBe)||$Be(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const r=t.collapsed;return t.detach(),r}getHostViewElement(e){const t=l8e(e);for(t.pop();t.length;){const r=t.pop(),i=this._domToViewMapping.get(r);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return $me(this._domDocument);case"markedNbsp":return Vme(this._domDocument);case"br":return Ume(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(Yr(e)&&Lo(e)&&t<jl||this.isElement(e)&&Lo(e.childNodes[t]))return!1;const r=this.mapDomToView(e);return!(r&&(r.is("uiElement")||r.is("rawElement")))}*_domToView(e,t,r){if(this.blockFillerMode!="br"&&pJ(e,this.blockElements))return null;const i=this.getHostViewElement(e);if(i)return i;if(NC(e)&&t.skipComments)return null;if(Yr(e)){if(Ub(e))return null;{const s=e.data;if(s==="")return null;const o=new Ui(this.document,s);return r.push(o),o}}else{let s=this.mapDomToView(e);if(s)return this._isInlineObjectElement(s)&&r.push(s),s;if(this.isDocumentFragment(e))s=new F0(this.document),t.bind&&this.bindDocumentFragments(e,s);else{s=this._createViewElement(e,t),t.bind&&this.bindElements(e,s);const a=e.attributes;if(a)for(let c=a.length,u=0;u<c;u++)s._setAttribute(a[u].name,a[u].value);if(this._isViewElementWithRawContent(s,t))return s._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(s)||r.push(s),s;if(NC(e))return s._setCustomProperty("$rawContent",e.data),s}yield s;const o=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,o))s._appendChild(a);if(this._isInlineObjectElement(s))r.push(s),this._processDomInlineNodes(null,o,t);else for(const a of o)r.push(a)}}_processDomInlineNodes(e,t,r){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let i=!1;for(let s=0;s<t.length;s++){const o=t[s];if(!o.is("$text")){i=!1;continue}let a,c=!1;if(this._isPreFormatted(o))a=uJ(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),c=/[^\S\u00A0]/.test(a.charAt(a.length-1));const u=s>0?t[s-1]:null,d=s+1<t.length?t[s+1]:null,h=!u||u.is("element")&&u.name=="br"||i,f=d?!1:!Lo(o.data);r.withChildren!==!1&&(h&&(a=a.replace(/^ /,"")),f&&(a=a.replace(/ $/,""))),a=uJ(a),this.blockFillerMode!="br"&&o.parent&&(UBe(o.parent,a)?(a="",o.parent.parent&&(o.parent.parent._setCustomProperty("$hasBlockFiller",!0),o.parent._remove())):VBe(o.parent,a,this.blockElements)&&(a="",o.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const p=d&&d.is("element")&&d.name!="br",x=d&&d.is("$text")&&d.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!d||p||x)&&(a=a.replace(/\u00A0$/," ")),(h||u&&u.is("element")&&u.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),t.splice(s,1),s--):(o._data=a,i=c)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){const r=this._getTouchingInlineViewNode(e,!1);(r&&r.is("$textProxy")&&this._nodeEndsWithSpace(r)||!r)&&(t=" "+t.substr(1))}if(t.charAt(t.length-1)==" "){const r=this._getTouchingInlineViewNode(e,!0),i=r&&r.is("$textProxy")&&r.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!r||i)&&(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(BBe(e,this.preElements))return!0;for(const t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){const r=new dy({startPosition:t?it._createAfter(e):it._createBefore(e),direction:t?"forward":"backward"});for(const{item:i}of r){if(i.is("$textProxy"))return i;if(i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering"))continue;if(i.is("element","br"))return null;if(this._isInlineObjectElement(i))return i;if(i.is("containerElement")||this._isBlockViewElement(i))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(NC(e))return new LM(this.document,"$comment");const r=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Du(this.document,r)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const r=this._domDocument.createElement("span");if(r.setAttribute(hJ,e),t){for(;t.firstChild;)r.appendChild(t.firstChild);for(const i of t.getAttributeNames())r.setAttribute(i,t.getAttribute(i))}return r}}function BBe(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function fJ(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function $Be(n,e){return n.isEqualNode(LBe)&&Hme(n,e)&&n.parentNode.childNodes.length===1}function Hme(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function VBe(n,e,t){return e==" "&&n&&n.is("element")&&n.childCount==1&&t.includes(n.name)}function UBe(n,e){return e==" "&&n&&n.is("element","span")&&n.childCount==1&&n.hasAttribute("data-cke-filler")}function mJ(n){return n.is("element","br")&&n.hasAttribute("data-cke-filler")}function pJ(n,e){return n.tagName==="BR"&&Hme(n,e)&&n.parentNode.childNodes.length===1}function gJ(n){n==="script"&&Yn("domconverter-unsafe-script-element-detected"),n==="style"&&Yn("domconverter-unsafe-style-element-detected")}function zBe(n){if(!Vt.isGecko||!n.rangeCount)return!1;const e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}class wh extends Pc(){constructor(t){super();j(this,"view");j(this,"document");j(this,"_isEnabled",!1);this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&t.nodeType===3&&(t=t.parentNode),!t||t.nodeType!==1?!1:t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class J0{constructor(e,t,r){j(this,"view");j(this,"document");j(this,"domEvent");j(this,"domTarget");this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,hme(this,r)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Em extends wh{constructor(){super(...arguments);j(this,"useCapture",!1);j(this,"usePassive",!1)}observe(t){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(t,i,(s,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(t){this.stopListening(t)}fire(t,r,i){this.isEnabled&&this.document.fire(t,new J0(this.view,r,i))}}class HBe extends Em{constructor(){super(...arguments);j(this,"domEventType",["keydown","keyup"])}onDomEvent(t){const r={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return __(this)}};this.fire(t.type,t,r)}}class WBe extends wh{constructor(t){super(t);j(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=X0(r=>{this.document.fire("selectionChangeDone",r)},200)}observe(){const t=this.document;t.on("arrowKey",(r,i)=>{t.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),t.on("arrowKey",(r,i)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const r=this.document.selection,i=new Eu(r.getRanges(),{backward:r.isBackward,fake:!1});(t==yn.arrowleft||t==yn.arrowup)&&i.setTo(i.getFirstPosition()),(t==yn.arrowright||t==yn.arrowdown)&&i.setTo(i.getLastPosition());const s={oldSelection:r,newSelection:i,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}let Wme=class extends wh{constructor(t){super(t);j(this,"domConverter");j(this,"_config");j(this,"_domElements");j(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=t.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.add(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}stopObserving(t){if(this._domElements.delete(t),this.isEnabled){this._mutationObserver.disconnect();for(const r of this._domElements)this._mutationObserver.observe(r,this._config)}}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(t.length===0)return;const r=this.domConverter,i=new Set,s=new Set;for(const a of t){const c=r.mapDomToView(a.target);c&&(c.is("uiElement")||c.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&s.add(c))}for(const a of t){const c=r.mapDomToView(a.target);if(!(c&&(c.is("uiElement")||c.is("rawElement")))&&a.type==="characterData"){const u=r.findCorrespondingViewText(a.target);u&&!s.has(u.parent)?i.add(u):!u&&Lo(a.target)&&s.add(r.mapDomToView(a.target.parentNode))}}const o=[];for(const a of i)o.push({type:"text",node:a});for(const a of s){const c=r.mapViewToDom(a),u=Array.from(a.getChildren()),d=Array.from(r.domChildrenToView(c,{withChildren:!1}));n$(u,d,qBe)||o.push({type:"children",node:a})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(t){let r=null;return t.nextSibling===null&&t.removedNodes.length===0&&t.addedNodes.length==1&&(r=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),r&&r.is("element","br")}};function qBe(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}class zI extends Em{constructor(t){super(t);j(this,"_renderTimeoutId",null);j(this,"_isFocusChanging",!1);j(this,"domEventType",["focus","blur"]);this.useCapture=!0;const r=this.document;r.on("focus",()=>this._handleFocus()),r.on("blur",(i,s)=>this._handleBlur(s)),r.on("beforeinput",()=>{r.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(t){this.fire(t.type,t)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(t){const r=this.document.selection.editableElement;(r===null||r===t.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class GBe extends wh{constructor(t){super(t);j(this,"mutationObserver");j(this,"focusObserver");j(this,"selection");j(this,"domConverter");j(this,"_documents",new WeakSet);j(this,"_fireSelectionChangeDoneDebounced");j(this,"_clearInfiniteLoopInterval");j(this,"_documentIsSelectingInactivityTimeoutDebounced");j(this,"_loopbackCounter",0);j(this,"_pendingSelectionChange",new Set);this.mutationObserver=t.getObserver(Wme),this.focusObserver=t.getObserver(zI),this.selection=this.document.selection,this.domConverter=t.domConverter,this._fireSelectionChangeDoneDebounced=X0(r=>{this.document.fire("selectionChangeDone",r)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=X0(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(r,i,s)=>{if(s&&this._pendingSelectionChange.size){for(const o of Array.from(this._pendingSelectionChange))this._handleSelectionChange(o);this._pendingSelectionChange.clear()}})}observe(t){const r=t.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},s=()=>{this.document.isSelecting&&(this._handleSelectionChange(r),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",i,{priority:"highest"}),this.listenTo(t,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",s,{priority:"highest",useCapture:!0}),!this._documents.has(r)&&(this.listenTo(r,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(r,"selectionchange",()=>{this.document.isComposing&&!Vt.isAndroid||(this._handleSelectionChange(r),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(r)},{priority:"lowest"}),this._documents.add(r))}stopObserving(t){this.stopListening(t)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(t){if(!this.isEnabled)return;const r=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(r.anchorNode))return;this.mutationObserver.flush();const i=this.domConverter.domSelectionToView(r);if(i.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.view.document.isFocused&&!this.view.document.isReadOnly){this._pendingSelectionChange.add(t);return}if(this._pendingSelectionChange.delete(t),!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(r))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(!KBe(i))this.view.forceRender();else if(this.selection.isSimilar(i))this.view.forceRender();else{const s={oldSelection:this.selection,newSelection:i,domSelection:r};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}function KBe(n){return Array.from(n.getRanges()).flatMap(e=>[e.start.root,e.end.root]).every(e=>e&&e.is("rootElement"))}class YBe extends Em{constructor(t){super(t);j(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const r=this.document;r.on("compositionstart",()=>{r.isComposing=!0}),r.on("compositionend",()=>{r.isComposing=!1})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class qme{constructor(e,t={}){j(this,"_files");j(this,"_native");this._files=t.cacheFiles?vJ(e):null,this._native=e}get files(){return this._files||(this._files=vJ(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,r){this._native.setDragImage(e,t,r)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function vJ(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(r=>r.kind==="file").map(r=>r.getAsFile())}class XBe extends Em{constructor(){super(...arguments);j(this,"domEventType","beforeinput")}onDomEvent(t){const r=t.getTargetRanges(),i=this.view,s=i.document;let o=null,a=null,c=[];if(t.dataTransfer&&(o=new qme(t.dataTransfer)),t.data!==null?a=t.data:o&&(a=o.getData("text/plain")),s.selection.isFake)c=Array.from(s.selection.getRanges()),t.preventDefault();else if(r.length)c=r.map(u=>{let d=i.domConverter.domPositionToView(u.startContainer,u.startOffset);const h=i.domConverter.domPositionToView(u.endContainer,u.endOffset);if(d&&Lo(u.startContainer)&&u.startOffset<jl){t.preventDefault();let f=jl-u.startOffset;d=d.getLastMatchingPosition(p=>!!(p.item.is("attributeElement")||p.item.is("uiElement")||p.item.is("$textProxy")&&f--),{direction:"backward",singleCharacters:!0})}if(JBe(u.endContainer,u.endOffset)&&t.preventDefault(),d)return i.createRange(d,h);if(h)return i.createRange(h)}).filter(u=>!!u);else if(Vt.isAndroid){const u=t.target.ownerDocument.defaultView.getSelection();c=Array.from(i.domConverter.domSelectionToView(u).getRanges())}if(Vt.isAndroid&&t.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[i.createRange(c[0].end)]});return}if(["insertText","insertReplacementText"].includes(t.inputType)&&a&&a.includes(`
`)){const u=a.split(/\n{1,2}/g);let d=c;t.preventDefault();for(let h=0;h<u.length;h++){const f=u[h];f!=""&&(this.fire(t.type,t,{data:f,dataTransfer:o,targetRanges:d,inputType:t.inputType,isComposing:t.isComposing}),d=[s.selection.getFirstRange()]),h+1<u.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:d}),d=[s.selection.getFirstRange()])}return}this.fire(t.type,t,{data:a,dataTransfer:o,targetRanges:c,inputType:t.inputType,isComposing:t.isComposing})}}function JBe(n,e){for(;n.parentNode;){if(Yr(n)){if(e!=n.data.length)return!1}else if(e!=n.childNodes.length)return!1;if(e=Vb(n)+1,n=n.parentNode,e<n.childNodes.length&&Lo(n.childNodes[e]))return!0}return!1}class QBe extends wh{constructor(e){super(e),this.document.on("keydown",(t,r)=>{if(this.isEnabled&&_8e(r.keyCode)){const i=new fx(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(i,r),i.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class ZBe extends wh{constructor(e){super(e);const t=this.document;t.on("keydown",(r,i)=>{if(!this.isEnabled||i.keyCode!=yn.tab||i.ctrlKey)return;const s=new fx(t,"tab",t.selection.getFirstRange());t.fire(s,i),s.stop.called&&r.stop()})}observe(){}stopObserving(){}}class e$e extends Tr(){constructor(t){super();j(this,"document");j(this,"domConverter");j(this,"domRoots",new Map);j(this,"_renderer");j(this,"_initialDomRootAttributes",new WeakMap);j(this,"_observers",new Map);j(this,"_writer");j(this,"_ongoingChange",!1);j(this,"_postFixersInProgress",!1);j(this,"_renderingDisabled",!1);j(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Lme(t),this.domConverter=new zme(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new ABe(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Fme(this.document),this.addObserver(Wme),this.addObserver(zI),this.addObserver(GBe),this.addObserver(HBe),this.addObserver(WBe),this.addObserver(YBe),this.addObserver(QBe),this.addObserver(XBe),this.addObserver(ZBe),EBe(this),vBe(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Vt.isiOS&&this.listenTo(this.document,"blur",(r,i)=>{this.domConverter.mapDomToView(i.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(r,{mutations:i})=>{i.forEach(s=>this._renderer.markToSync(s.type,s.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(t,r="main"){const i=this.document.getRoot(r);i._name=t.tagName.toLowerCase();const s={};for(const{name:a,value:c}of Array.from(t.attributes))s[a]=c,a==="class"?this._writer.addClass(c.split(" "),i):i.hasAttribute(a)||this._writer.setAttribute(a,c,i);this._initialDomRootAttributes.set(t,s);const o=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};o(),this.domRoots.set(r,t),this.domConverter.bindElements(t,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(t.ownerDocument),i.on("change:children",(a,c)=>this._renderer.markToSync("children",c)),i.on("change:attributes",(a,c)=>this._renderer.markToSync("attributes",c)),i.on("change:text",(a,c)=>this._renderer.markToSync("text",c)),i.on("change:isReadOnly",()=>this.change(o)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(t,r)}detachDomRoot(t){const r=this.domRoots.get(t);Array.from(r.attributes).forEach(({name:s})=>r.removeAttribute(s));const i=this._initialDomRootAttributes.get(r);for(const s in i)r.setAttribute(s,i[s]);this.domRoots.delete(t),this.domConverter.unbindDomElement(r);for(const s of this._observers.values())s.stopObserving(r)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let r=this._observers.get(t);if(r)return r;r=new t(this),this._observers.set(t,r);for(const[i,s]of this.domRoots)r.observe(s,i);return r.enable(),r}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection({alignToTop:t,forceScroll:r,viewportOffset:i=20,ancestorOffset:s=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const a=Oa({alignToTop:t,forceScroll:r,viewportOffset:i,ancestorOffset:s});typeof i=="number"&&(i={top:i,bottom:i,left:i,right:i});const c={target:this.domConverter.viewRangeToDom(o),viewportOffset:i,ancestorOffset:s,alignToTop:t,forceScroll:r};this.fire("scrollToTheSelection",c,a),p8e(c)}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new _e("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const r=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),r}catch(r){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(r,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(zI).flush(),this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,r){return it._createAt(t,r)}createPositionAfter(t){return it._createAfter(t)}createPositionBefore(t){return it._createBefore(t)}createRange(t,r){return new Qt(t,r)}createRangeOn(t){return Qt._createOn(t)}createRangeIn(t){return Qt._createIn(t)}createSelection(...t){return new Eu(...t)}_disableRendering(t){this._renderingDisabled=t,t==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class sv{is(){throw new Error("is() method is abstract")}}class ku extends sv{constructor(t,r,i){super();j(this,"textNode");j(this,"data");j(this,"offsetInText");if(this.textNode=t,r<0||r>t.offsetSize)throw new _e("model-textproxy-wrong-offsetintext",this);if(i<0||r+i>t.offsetSize)throw new _e("model-textproxy-wrong-length",this);this.data=t.data.substring(r,r+i),this.offsetInText=r}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const r=[];let i=t.includeSelf?this:this.parent;for(;i;)r[t.parentFirst?"push":"unshift"](i),i=i.parent;return r}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}ku.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};class Wf{constructor(e){j(this,"direction");j(this,"boundaries");j(this,"singleCharacters");j(this,"shallow");j(this,"ignoreElementEnd");j(this,"_position");j(this,"_boundaryStartParent");j(this,"_boundaryEndParent");j(this,"_visitedParent");if(!e||!e.boundaries&&!e.startPosition)throw new _e("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new _e("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=He._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,r,i,s;do i=this.position,s=this._visitedParent,{done:t,value:r}=this.next();while(!t&&e(r));t||(this._position=i,this._visitedParent=s)}jumpTo(e){this._boundaryStartParent&&e.isBefore(this.boundaries.start)?e=this.boundaries.start:this._boundaryEndParent&&e.isAfter(this.boundaries.end)&&(e=this.boundaries.end),this._position=e.clone(),this._visitedParent=e.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),r=this._visitedParent;if(r.parent===null&&t.offset===r.maxOffset)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=PC(t,r),s=i||Gme(t,r,i);if(s&&s.is("model:element")){if(!this.shallow)t.path.push(0),this._visitedParent=s;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,Vv("elementStart",s,e,t,1)}if(s&&s.is("model:$text")){let o;if(this.singleCharacters)o=1;else{let u=s.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<u&&(u=this.boundaries.end.offset),o=u-t.offset}const a=t.offset-s.startOffset,c=new ku(s,a,o);return t.offset+=o,this._position=t,Vv("text",c,e,t,o)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():Vv("elementEnd",r,e,t)}_previous(){const e=this.position,t=this.position.clone(),r=this._visitedParent;if(r.parent===null&&t.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=t.parent,s=PC(t,i),o=s||Kme(t,i,s);if(o&&o.is("model:element"))return t.offset--,this.shallow?(this._position=t,Vv("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this._position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():Vv("elementEnd",o,e,t));if(o&&o.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let d=o.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>d&&(d=this.boundaries.start.offset),a=t.offset-d}const c=t.offset-o.startOffset,u=new ku(o,c-a,a);return t.offset-=a,this._position=t,Vv("text",u,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=r.parent,Vv("elementStart",r,e,t,1)}}function Vv(n,e,t,r,i){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:r,length:i}}}class He extends sv{constructor(t,r,i="toNone"){super();j(this,"root");j(this,"path");j(this,"stickiness");if(!t.is("element")&&!t.is("documentFragment"))throw new _e("model-position-root-invalid",t);if(!Array.isArray(r)||r.length===0)throw new _e("model-position-path-incorrect-format",t,{path:r});t.is("rootElement")?r=r.slice():(r=[...t.getPath(),...r],t=t.root),this.root=t,this.path=r,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let r=0;r<this.path.length-1;r++)if(t=t.getChildAtOffset(this.path[r]),!t)throw new _e("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new _e("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return PC(this,this.parent)}get nodeAfter(){const t=this.parent;return Gme(this,t,PC(this,t))}get nodeBefore(){const t=this.parent;return Kme(this,t,PC(this,t))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let r=0;r<this.path.length-1;r++)if(t=t.getChildAtOffset(this.path[r]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const r=qs(this.path,t.path);switch(r){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[r]<t.path[r]?"before":"after"}}getLastMatchingPosition(t,r={}){r.startPosition=this;const i=new Wf(r);return i.skip(t),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const r=this.parent;return r.is("element")?r.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const r=qs(this.path,t.path),i=typeof r=="string"?Math.min(this.path.length,t.path.length):r;return this.path.slice(0,i)}getCommonAncestor(t){const r=this.getAncestors(),i=t.getAncestors();let s=0;for(;r[s]==i[s]&&r[s];)s++;return s===0?null:r[s-1]}getShiftedBy(t){const r=this.clone(),i=r.offset+t;return r.offset=i<0?0:i,r}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){if(this.root!==t.root)return!1;const r=Math.min(this.path.length,t.path.length);for(let i=0;i<r;i++){const s=this.path[i]-t.path[i];if(s<-1||s>1)return!1;if(s===1)return yJ(t,this,i);if(s===-1)return yJ(this,t,i)}return this.path.length===t.path.length?!0:this.path.length>t.path.length?u$(this.path,r):u$(t.path,r)}hasSameParentAs(t){if(this.root!==t.root)return!1;const r=this.getParentPath(),i=t.getParentPath();return qs(r,i)=="same"}getTransformedByOperation(t){let r;switch(t.type){case"insert":r=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":r=this._getTransformedByMoveOperation(t);break;case"split":r=this._getTransformedBySplitOperation(t);break;case"merge":r=this._getTransformedByMergeOperation(t);break;default:r=He._createAt(this);break}return r}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const r=t.movedRange;return r.containsPosition(this)||r.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const r=t.movedRange,i=r.containsPosition(this)||r.start.isEqual(this);let s;return i?(s=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(s=s._getTransformedByDeletion(t.deletionPosition,1))):this.isEqual(t.deletionPosition)?s=He._createAt(t.deletionPosition):s=this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),s}_getTransformedByDeletion(t,r){const i=He._createAt(this);if(this.root!=t.root)return i;if(qs(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+r>this.offset)return null;i.offset-=r}}else if(qs(t.getParentPath(),this.getParentPath())=="prefix"){const s=t.path.length-1;if(t.offset<=this.path[s]){if(t.offset+r>this.path[s])return null;i.path[s]-=r}}return i}_getTransformedByInsertion(t,r){const i=He._createAt(this);if(this.root!=t.root)return i;if(qs(t.getParentPath(),this.getParentPath())=="same")(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=r);else if(qs(t.getParentPath(),this.getParentPath())=="prefix"){const s=t.path.length-1;t.offset<=this.path[s]&&(i.path[s]+=r)}return i}_getTransformedByMove(t,r,i){if(r=r._getTransformedByDeletion(t,i),t.isEqual(r))return He._createAt(this);const s=this._getTransformedByDeletion(t,i);return s===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(t,r):s._getTransformedByInsertion(r,i)}_getCombined(t,r){const i=t.path.length-1,s=He._createAt(r);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[i]-t.offset,s.path=[...s.path,...this.path.slice(i+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,r,i="toNone"){if(t.is("model:position"))return new He(t.root,t.path,t.stickiness);{const s=t;if(r=="end")r=s.maxOffset;else{if(r=="before")return this._createBefore(s,i);if(r=="after")return this._createAfter(s,i);if(r!==0&&!r)throw new _e("model-createpositionat-offset-required",[this,t])}if(!s.is("element")&&!s.is("documentFragment"))throw new _e("model-position-parent-incorrect",[this,t]);const o=s.getPath();return o.push(r),new this(s.root,o,i)}}static _createAfter(t,r){if(!t.parent)throw new _e("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,r)}static _createBefore(t,r){if(!t.parent)throw new _e("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,r)}static fromJSON(t,r){if(t.root==="$graveyard"){const i=new He(r.graveyard,t.path);return i.stickiness=t.stickiness,i}if(!r.getRoot(t.root))throw new _e("model-position-fromjson-no-root",r,{rootName:t.root});return new He(r.getRoot(t.root),t.path,t.stickiness)}}He.prototype.is=function(n){return n==="position"||n==="model:position"};function PC(n,e){const t=e.getChildAtOffset(n.offset);return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function Gme(n,e,t){return t!==null?null:e.getChildAtOffset(n.offset)}function Kme(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function yJ(n,e,t){return!(t+1===n.path.length||!u$(e.path,t+1)||!t$e(n,t+1))}function u$(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function t$e(n,e){let t=n.parent,r=n.path.length-1,i=0;for(;r>=e;){if(n.path[r]+i!==t.maxOffset)return!1;i=1,r--,t=t.parent}return!0}class Le extends sv{constructor(t,r){super();j(this,"start");j(this,"end");this.start=He._createAt(t),this.end=r?He._createAt(r):He._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Wf({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath(),r=this.end.getParentPath();return qs(t,r)=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,r=!1){t.isCollapsed&&(r=!1);const i=this.containsPosition(t.start)||r&&this.start.isEqual(t.start),s=this.containsPosition(t.end)||r&&this.end.isEqual(t.end);return i&&s}containsItem(t){const r=He._createBefore(t);return this.containsPosition(r)||this.start.isEqual(r)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const r=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&r.push(new Le(this.start,t.start)),this.containsPosition(t.end)&&r.push(new Le(t.end,this.end))):r.push(new Le(this.start,this.end)),r}getIntersection(t){if(this.isIntersecting(t)){let r=this.start,i=this.end;return this.containsPosition(t.start)&&(r=t.start),this.containsPosition(t.end)&&(i=t.end),new Le(r,i)}return null}getJoined(t,r=!1){let i=this.isIntersecting(t);if(i||(this.start.isBefore(t.start)?i=r?this.end.isTouching(t.start):this.end.isEqual(t.start):i=r?t.end.isTouching(this.start):t.end.isEqual(this.start)),!i)return null;let s=this.start,o=this.end;return t.start.isBefore(s)&&(s=t.start),t.end.isAfter(o)&&(o=t.end),new Le(s,o)}getMinimalFlatRanges(){const t=[],r=this.start.getCommonPath(this.end).length,i=He._createAt(this.start);let s=i.parent;for(;i.path.length>r+1;){const o=s.maxOffset-i.offset;o!==0&&t.push(new Le(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,s=s.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],a=o-i.offset;a!==0&&t.push(new Le(i,i.getShiftedBy(a))),i.offset=o,i.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new Wf(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const r=new Wf(t);for(const i of r)yield i.item}*getPositions(t={}){t.boundaries=this;const r=new Wf(t);yield r.position;for(const i of r)yield i.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Le(this.start,this.end)]}getTransformedByOperations(t){const r=[new Le(this.start,this.end)];for(const i of t)for(let s=0;s<r.length;s++){const o=r[s].getTransformedByOperation(i);r.splice(s,1,...o),s+=o.length-1}for(let i=0;i<r.length;i++){const s=r[i];for(let o=i+1;o<r.length;o++){const a=r[o];(s.containsRange(a)||a.containsRange(s)||s.isEqual(a))&&r.splice(o,1)}}return r}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,r=this.end.nodeBefore;return t&&t.is("element")&&t===r?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,r=!1){return this._getTransformedByInsertion(t.position,t.howMany,r)}_getTransformedByMoveOperation(t,r=!1){const i=t.sourcePosition,s=t.howMany,o=t.targetPosition;return this._getTransformedByMove(i,o,s,r)}_getTransformedBySplitOperation(t){const r=this.start._getTransformedBySplitOperation(t);let i=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(i=this.end.getShiftedBy(1)),r.root!=i.root&&(i=this.end.getShiftedBy(-1)),new Le(r,i)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Le(this.start);let r=this.start._getTransformedByMergeOperation(t),i=this.end._getTransformedByMergeOperation(t);return r.root!=i.root&&(i=this.end.getShiftedBy(-1)),r.isAfter(i)?(t.sourcePosition.isBefore(t.targetPosition)?(r=He._createAt(i),r.offset=0):(t.deletionPosition.isEqual(r)||(i=t.deletionPosition),r=t.targetPosition),new Le(r,i)):new Le(r,i)}_getTransformedByInsertion(t,r,i=!1){if(i&&this.containsPosition(t))return[new Le(this.start,t),new Le(t.getShiftedBy(r),this.end._getTransformedByInsertion(t,r))];{const s=new Le(this.start,this.end);return s.start=s.start._getTransformedByInsertion(t,r),s.end=s.end._getTransformedByInsertion(t,r),[s]}}_getTransformedByMove(t,r,i,s=!1){if(this.isCollapsed){const f=this.start._getTransformedByMove(t,r,i);return[new Le(f)]}const o=Le._createFromPositionAndShift(t,i),a=r._getTransformedByDeletion(t,i);if(this.containsPosition(r)&&!s&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const f=this.start._getTransformedByMove(t,r,i),p=this.end._getTransformedByMove(t,r,i);return[new Le(f,p)]}let c;const u=this.getDifference(o);let d=null;const h=this.getIntersection(o);if(u.length==1?d=new Le(u[0].start._getTransformedByDeletion(t,i),u[0].end._getTransformedByDeletion(t,i)):u.length==2&&(d=new Le(this.start,this.end._getTransformedByDeletion(t,i))),d?c=d._getTransformedByInsertion(a,i,h!==null||s):c=[],h){const f=new Le(h.start._getCombined(o.start,a),h.end._getCombined(o.start,a));c.length==2?c.splice(1,0,f):c.push(f)}return c}_getTransformedByDeletion(t,r){let i=this.start._getTransformedByDeletion(t,r),s=this.end._getTransformedByDeletion(t,r);return i==null&&s==null?null:(i==null&&(i=t),s==null&&(s=t),new Le(i,s))}static _createFromPositionAndShift(t,r){const i=t,s=t.getShiftedBy(r);return r>0?new this(i,s):new this(s,i)}static _createIn(t){return new this(He._createAt(t,0),He._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(He._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0)throw new _e("range-create-from-ranges-empty-array",null);if(t.length==1)return t[0].clone();const r=t[0];t.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const i=t.indexOf(r),s=new this(r.start,r.end);for(let o=i-1;o>=0&&t[o].end.isEqual(s.start);o--)s.start=He._createAt(t[o].start);for(let o=i+1;o<t.length&&t[o].start.isEqual(s.end);o++)s.end=He._createAt(t[o].end);return s}static fromJSON(t,r){return new this(He.fromJSON(t.start,r),He.fromJSON(t.end,r))}}Le.prototype.is=function(n){return n==="range"||n==="model:range"};class Yme extends dr(){constructor(){super();j(this,"_modelToViewMapping",new WeakMap);j(this,"_viewToModelMapping",new WeakMap);j(this,"_viewToModelLengthCallbacks",new Map);j(this,"_markerNameToElements",new Map);j(this,"_elementToMarkerNames",new Map);j(this,"_deferredBindingRemovals",new Map);j(this,"_unboundMarkerNames",new Set);j(this,"_cache",new n$e);this.on("modelToViewPosition",(t,r)=>{if(r.viewPosition)return;const i=this._modelToViewMapping.get(r.modelPosition.parent);if(!i)throw new _e("mapping-model-position-view-parent-not-found",this,{modelPosition:r.modelPosition});r.viewPosition=this.findPositionIn(i,r.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,r)=>{if(r.modelPosition)return;const i=this.findMappedViewAncestor(r.viewPosition),s=this._viewToModelMapping.get(i),o=this._toModelOffset(r.viewPosition.parent,r.viewPosition.offset,i);r.modelPosition=He._createAt(s,o)},{priority:"low"})}bindElements(t,r){this._modelToViewMapping.set(t,r),this._viewToModelMapping.set(r,t)}unbindViewElement(t,r={}){const i=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const s of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(s);r.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t)&&this._cache.stopTracking(t),this._modelToViewMapping.get(i)==t&&this._modelToViewMapping.delete(i))}unbindModelElement(t){const r=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(r)==t&&this._viewToModelMapping.delete(r)&&this._cache.stopTracking(r)}bindElementToMarker(t,r){const i=this._markerNameToElements.get(r)||new Set;i.add(t);const s=this._elementToMarkerNames.get(t)||new Set;s.add(r),this._markerNameToElements.set(r,i),this._elementToMarkerNames.set(t,s)}unbindElementFromMarkerName(t,r){const i=this._markerNameToElements.get(r);i&&(i.delete(t),i.size==0&&this._markerNameToElements.delete(r));const s=this._elementToMarkerNames.get(t);s&&(s.delete(r),s.size==0&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,r]of this._deferredBindingRemovals)t.root==r&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new Le(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new Qt(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const r={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",r),r.modelPosition}toViewPosition(t,r={}){const i={modelPosition:t,mapper:this,isPhantom:r.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(t){const r=this._markerNameToElements.get(t);if(!r)return null;const i=new Set;for(const s of r)if(s.is("attributeElement"))for(const o of s.getElementsWithSameId())i.add(o);else i.add(s);return i}registerViewToModelLength(t,r){this._viewToModelLengthCallbacks.set(t,r)}findMappedViewAncestor(t){let r=t.parent;for(;!this._viewToModelMapping.has(r);)r=r.parent;return r}_toModelOffset(t,r,i){if(i!=t){const o=this._toModelOffset(t.parent,t.index,i),a=this._toModelOffset(t,r,t);return o+a}if(t.is("$text"))return r;let s=0;for(let o=0;o<r;o++)s+=this.getModelLength(t.getChild(o));return s}getModelLength(t){const r=[t];let i=0;for(;r.length>0;){const s=r.pop(),o=s.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(s.name);if(o)i+=o(s);else if(this._viewToModelMapping.has(s))i+=1;else if(s.is("$text"))i+=s.data.length;else{if(s.is("uiElement"))continue;for(const a of s.getChildren())r.push(a)}}return i}findPositionIn(t,r){if(r===0)return this._moveViewPositionToTextNode(new it(t,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(t)){const s=this._cache.getClosest(t,r);return this._findPositionStartingFrom(s.viewPosition,s.modelOffset,r,t,!0)}else return this._findPositionStartingFrom(new it(t,0),0,r,t,!1)}_findPositionStartingFrom(t,r,i,s,o){let a=t.parent,c=t.offset;if(a.is("$text"))return new it(a,i-r);let u,d=r,h=0;for(;d<i;){if(u=a.getChild(c),!u){if(a==s)throw new _e("mapping-model-offset-not-found",this,{modelOffset:i,viewContainer:s});c=a.parent.getChildIndex(a)+1,a=a.parent,o&&this._cache.save(a,c,s,d);continue}o?h=this._getModelLengthAndCache(u,s,d):h=this.getModelLength(u),d+=h,c++}let f=new it(a,c);if(o)for(;f.isAtEnd&&f.parent!==s&&f.parent.parent;){const p=f.parent.parent,x=p.getChildIndex(f.parent)+1;this._cache.save(p,x,s,d),f=new it(p,x)}return d==i?this._moveViewPositionToTextNode(f):this._findPositionStartingFrom(new it(u,0),d-h,i,s,o)}_getModelLengthAndCache(t,r,i){let s=0;if(this._viewToModelMapping.has(t))s=1;else if(t.is("$text"))s=t.data.length;else if(!t.is("uiElement"))for(const o of t.getChildren())s+=this._getModelLengthAndCache(o,r,i+s);return this._cache.save(t.parent,t.index+1,r,i+s),s}_moveViewPositionToTextNode(t){const r=t.nodeBefore,i=t.nodeAfter;return r&&r.is("view:$text")?new it(r,r.data.length):i&&i.is("view:$text")?new it(i,0):t}}class n$e extends dr(){constructor(){super(...arguments);j(this,"_cachedMapping",new WeakMap);j(this,"_nodeToCacheListIndex",new WeakMap);j(this,"_invalidateOnChildrenChangeCallback",(t,r,i)=>{this._clearCacheInsideParent(r,i.index)});j(this,"_invalidateOnTextChangeCallback",(t,r)=>{this._clearCacheAfter(r)})}save(t,r,i,s){const o=this._cachedMapping.get(i),a=o.cacheMap.get(s);if(a){const h=t.getChild(r-1),f=a.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(a.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(h,f);return}const u={viewPosition:new it(t,r),modelOffset:s};o.maxModelOffset=s>o.maxModelOffset?s:o.maxModelOffset,o.cacheMap.set(s,u);let d=o.cacheList.length-1;for(;d>=0&&o.cacheList[d].modelOffset>s;)d--;if(o.cacheList.splice(d+1,0,u),r>0){const h=t.getChild(r-1);this._nodeToCacheListIndex.set(h,d+1)}}getClosest(t,r){const i=this._cachedMapping.get(t);let s;if(i)if(r>i.maxModelOffset)s=i.cacheList[i.cacheList.length-1];else{const o=i.cacheMap.get(r);o?s=o:s=this._findInCacheList(i.cacheList,r)}else s=this.startTracking(t);return{modelOffset:s.modelOffset,viewPosition:s.viewPosition.clone()}}startTracking(t){const i={viewPosition:new it(t,0),modelOffset:0},s={maxModelOffset:0,cacheList:[i],cacheMap:new Map([[0,i]])};return this._cachedMapping.set(t,s),t.on("change:children",this._invalidateOnChildrenChangeCallback),t.on("change:text",this._invalidateOnTextChangeCallback),i}stopTracking(t){t.off("change:children",this._invalidateOnChildrenChangeCallback),t.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(t)}_clearCacheInsideParent(t,r){if(r==0)this._cachedMapping.has(t)?this._clearCacheAll(t):this._clearCacheInsideParent(t.parent,t.index);else{const i=t.getChild(r-1);this._clearCacheAfter(i)}}_clearCacheAll(t){const r=this._cachedMapping.get(t);r.maxModelOffset>0&&(r.maxModelOffset=0,r.cacheList.length=1,r.cacheMap.clear(),r.cacheMap.set(0,r.cacheList[0]))}_clearCacheAfter(t){const r=this._nodeToCacheListIndex.get(t);if(r===void 0){const s=t.parent;this._cachedMapping.has(s)||this._clearCacheInsideParent(s.parent,s.index);return}let i=t.parent;for(;!this._cachedMapping.has(i);)i=i.parent;this._clearCacheFromCacheIndex(i,r)}_clearCacheFromCacheIndex(t,r){r===0&&(r=1);const i=this._cachedMapping.get(t),s=i.cacheList[r-1];if(!s)return;i.maxModelOffset=s.modelOffset;const o=i.cacheList.splice(r);for(const a of o){i.cacheMap.delete(a.modelOffset);const c=a.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(c)}}_findInCacheList(t,r){let i=0,s=t.length-1,o=s-i>>1,a=t[o];for(;i<s;)a.modelOffset<r?i=o+1:s=o-1,o=i+(s-i>>1),a=t[o];return a.modelOffset<=r?a:t[o-1]}}class r$e{constructor(){j(this,"_consumable",new Map);j(this,"_textProxyRegistry",new Map)}add(e,t){t=kj(t),e instanceof ku&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=kj(t),e instanceof ku&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=kj(t),e instanceof ku&&(e=this._getSymbolForTextProxy(e));const r=this._consumable.get(e);if(r===void 0)return null;const i=r.get(t);return i===void 0?null:i}revert(e,t){t=kj(t),e instanceof ku&&(e=this._getSymbolForTextProxy(e));const r=this.test(e,t);return r===!1?(this._consumable.get(e).set(t,!0),!0):r===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[r,i]of this._consumable)for(const[s,o]of i){const a=s.split(":")[0];o&&e==a&&t.push({event:s,item:r.name||r.description})}if(t.length)throw new _e("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const r=this._textProxyRegistry.get(e.startOffset);if(r){const i=r.get(e.endOffset);i&&(t=i.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,r=e.endOffset,i=e.parent,s=Symbol("$textProxy:"+e.data);let o,a;return o=this._textProxyRegistry.get(t),o||(o=new Map,this._textProxyRegistry.set(t,o)),a=o.get(r),a||(a=new Map,o.set(r,a)),a.set(i,s),s}}function kj(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}class Xme extends dr(){constructor(t){super();j(this,"_conversionApi");j(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,r,i){const s=this._createConversionApi(i,t.getRefreshedItems());for(const a of t.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,s);const o=this._reduceChanges(t.getChanges());for(const a of o)a.type==="insert"?this._convertInsert(Le._createFromPositionAndShift(a.position,a.length),s):a.type==="reinsert"?this._convertReinsert(Le._createFromPositionAndShift(a.position,a.length),s):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,s):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,s);s.mapper.flushDeferredBindings();for(const a of s.mapper.flushUnboundMarkerNames()){const c=r.get(a).getRange();this._convertMarkerRemove(a,c,s),this._convertMarkerAdd(a,c,s)}for(const a of t.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,s);s.consumable.verifyAllConsumed("insert")}convert(t,r,i,s={}){const o=this._createConversionApi(i,void 0,s);this._convertInsert(t,o);for(const[a,c]of r)this._convertMarkerAdd(a,c,o);o.consumable.verifyAllConsumed("insert")}convertSelection(t,r,i){const s=this._createConversionApi(i);this.fire("cleanSelection",{selection:t},s);const o=t.getFirstPosition().root;if(!s.mapper.toViewElement(o))return;const a=Array.from(r.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(s.consumable,t,a),this.fire("selection",{selection:t},s),!!t.isCollapsed){for(const c of a)if(s.consumable.test(t,"addMarker:"+c.name)){const u=c.getRange();if(!i$e(t.getFirstPosition(),c,s.mapper))continue;const d={item:t,markerName:c.name,markerRange:u};this.fire(`addMarker:${c.name}`,d,s)}for(const c of t.getAttributeKeys())if(s.consumable.test(t,"attribute:"+c)){const u={item:t,range:t.getFirstRange(),attributeKey:c,attributeOldValue:null,attributeNewValue:t.getAttribute(c)};this.fire(`attribute:${c}:$text`,u,s)}}}_convertInsert(t,r,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(r.consumable,t);for(const s of t.getWalker({shallow:!0}))this._testAndFire("insert",xJ(s),r)}_convertRemove(t,r,i,s){this.fire(`remove:${i}`,{position:t,length:r},s)}_convertAttribute(t,r,i,s,o){this._addConsumablesForRange(o.consumable,t,`attribute:${r}`);for(const a of t){const c={item:a.item,range:Le._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:r,attributeOldValue:i,attributeNewValue:s};this._testAndFire(`attribute:${r}`,c,o)}}_convertReinsert(t,r){const i=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(r.consumable,i);for(const s of i.map(xJ))this._testAndFire("insert",{...s,reconversion:!0},r)}_convertMarkerAdd(t,r,i){if(r.root.rootName=="$graveyard")return;const s=`addMarker:${t}`;if(i.consumable.add(r,s),this.fire(s,{markerName:t,markerRange:r},i),!!i.consumable.consume(r,s)){this._addConsumablesForRange(i.consumable,r,s);for(const o of r.getItems()){if(!i.consumable.test(o,s))continue;const a={item:o,range:Le._createOn(o),markerName:t,markerRange:r};this.fire(s,a,i)}}}_convertMarkerRemove(t,r,i){r.root.rootName!="$graveyard"&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:r},i)}_reduceChanges(t){const r={changes:t};return this.fire("reduceChanges",r),r.changes}_addConsumablesForInsert(t,r){for(const i of r){const s=i.item;if(t.test(s,"insert")===null){t.add(s,"insert");for(const o of s.getAttributeKeys())t.add(s,"attribute:"+o)}}return t}_addConsumablesForRange(t,r,i){for(const s of r.getItems())t.add(s,i);return t}_addConsumablesForSelection(t,r,i){t.add(r,"selection");for(const s of i)t.add(r,"addMarker:"+s.name);for(const s of r.getAttributeKeys())t.add(r,"attribute:"+s);return t}_testAndFire(t,r,i){const s=s$e(t,r),o=r.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(r.item):r.item,a=this._firedEventsMap.get(i),c=a.get(o);if(!c)a.set(o,new Set([s]));else if(!c.has(s))c.add(s);else return;this.fire(s,r,i)}_testAndFireAddAttributes(t,r){const i={item:t,range:Le._createOn(t)};for(const s of i.item.getAttributeKeys())i.attributeKey=s,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(s),this._testAndFire(`attribute:${s}`,i,r)}_createConversionApi(t,r=new Set,i={}){const s={...this._conversionApi,consumable:new r$e,writer:t,options:i,convertItem:o=>this._convertInsert(Le._createOn(o),s),convertChildren:o=>this._convertInsert(Le._createIn(o),s,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,s),canReuseView:o=>!r.has(s.mapper.toModelElement(o))};return this._firedEventsMap.set(s,new Map),s}}function i$e(n,e,t){const r=e.getRange(),i=Array.from(n.getAncestors());return i.shift(),i.reverse(),!i.some(o=>{if(r.containsItem(o))return!!t.toViewElement(o).getCustomProperty("addHighlight")})}function s$e(n,e){const t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function xJ(n){return{item:n.item,range:Le._createFromPositionAndShift(n.previousPosition,n.length)}}class mx extends sv{constructor(t){super();j(this,"parent",null);j(this,"_attrs");j(this,"_index",null);j(this,"_startOffset",null);this._attrs=hm(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const t=[];let r=this;for(;r.parent;)t.unshift(r.startOffset),r=r.parent;return t}getAncestors(t={}){const r=[];let i=t.includeSelf?this:this.parent;for(;i;)r[t.parentFirst?"push":"unshift"](i),i=i.parent;return r}getCommonAncestor(t,r={}){const i=this.getAncestors(r),s=t.getAncestors(r);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const r=this.getPath(),i=t.getPath(),s=qs(r,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return r[s]<i[s]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((r,i)=>(r[i[0]]=i[1],r),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,r){this._attrs.set(t,r)}_setAttributesTo(t){this._attrs=hm(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}mx.prototype.is=function(n){return n==="node"||n==="model:node"};class Al extends dr(sv){constructor(...t){super();j(this,"_lastRangeBackward",!1);j(this,"_attrs",new Map);j(this,"_ranges",[]);t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const r of this._ranges){let i=!1;for(const s of t._ranges)if(r.isEqual(s)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Le(t.start,t.end)}getFirstRange(){let t=null;for(const r of this._ranges)(!t||r.start.isBefore(t.start))&&(t=r);return t?new Le(t.start,t.end):null}getLastRange(){let t=null;for(const r of this._ranges)(!t||r.end.isAfter(t.end))&&(t=r);return t?new Le(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[r,i,s]=t;if(typeof i=="object"&&(s=i,i=void 0),r===null)this._setRanges([]);else if(r instanceof Al)this._setRanges(r.getRanges(),r.isBackward);else if(r&&typeof r.getRanges=="function")this._setRanges(r.getRanges(),r.isBackward);else if(r instanceof Le)this._setRanges([r],!!s&&!!s.backward);else if(r instanceof He)this._setRanges([new Le(r)]);else if(r instanceof mx){const o=!!s&&!!s.backward;let a;if(i=="in")a=Le._createIn(r);else if(i=="on")a=Le._createOn(r);else if(i!==void 0)a=new Le(He._createAt(r,i));else throw new _e("model-selection-setto-required-second-parameter",[this,r]);this._setRanges([a],o)}else if($l(r))this._setRanges(r,s&&!!s.backward);else throw new _e("model-selection-setto-not-selectable",[this,r])}_setRanges(t,r=!1){const i=Array.from(t),s=i.some(o=>{if(!(o instanceof Le))throw new _e("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(a=>!a.isEqual(o))});i.length===this._ranges.length&&!s||(this._replaceAllRanges(i),this._lastRangeBackward=!!r,this.fire("change:range",{directChange:!0}))}setFocus(t,r){if(this.anchor===null)throw new _e("model-selection-setfocus-no-ranges",[this,t]);const i=He._createAt(t,r);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(s)=="before"?(this._pushRange(new Le(i,s)),this._lastRangeBackward=!0):(this._pushRange(new Le(s,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,r){this.getAttribute(t)!==r&&(this._attrs.set(t,r),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const r of this.getRanges()){const i=bJ(r.start,t);a$e(i,r)&&(yield i);const s=r.getWalker();for(const a of s){const c=a.item;a.type=="elementEnd"&&o$e(c,t,r)?yield c:a.type=="elementStart"&&c.is("model:element")&&c.root.document.model.schema.isBlock(c)&&s.jumpTo(He._createAt(c,"end"))}const o=bJ(r.end,t);l$e(o,r)&&(yield o)}}containsEntireContent(t=this.anchor.root){const r=He._createAt(t,0),i=He._createAt(t,"end");return r.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}toJSON(){const t={ranges:Array.from(this.getRanges()).map(i=>i.toJSON())},r=Object.fromEntries(this.getAttributes());return Object.keys(r).length&&(t.attributes=r),this.isBackward&&(t.isBackward=!0),t}_pushRange(t){this._checkRange(t),this._ranges.push(new Le(t.start,t.end))}_checkRange(t){for(let r=0;r<this._ranges.length;r++)if(t.isIntersecting(this._ranges[r]))throw new _e("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[r]})}_replaceAllRanges(t){this._removeAllRanges();for(const r of t)this._pushRange(r)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Al.prototype.is=function(n){return n==="selection"||n==="model:selection"};function Jme(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function o$e(n,e,t){return Jme(n,e)&&_z(n,t)}function bJ(n,e){const r=n.parent.root.document.model.schema,i=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let s=!1;const o=i.find(a=>s?!1:(s=r.isLimit(a),!s&&Jme(a,e)));return i.forEach(a=>e.add(a)),o}function _z(n,e){const t=c$e(n);return t?!e.containsRange(Le._createOn(t),!0):!0}function a$e(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(He._createAt(n,n.maxOffset))?!1:_z(n,e):!1}function l$e(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(He._createAt(n,0))?!1:_z(n,e):!1}function c$e(n){const e=n.root.document.model.schema;let t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}class Pl extends dr(Le){constructor(e,t){super(e,t),u$e.call(this)}detach(){this.stopListening()}toRange(){return new Le(this.start,this.end)}static fromRange(e){return new Pl(e.start,e.end)}}Pl.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function u$e(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&d$e.call(this,t)},{priority:"low"})}function d$e(n){const e=this.getTransformedByOperation(n),t=Le._createFromRanges(e),r=!t.isEqual(this),i=h$e(this,n);let s=null;if(r){t.root.rootName=="$graveyard"&&(n.type=="remove"?s=n.sourcePosition:s=n.deletionPosition);const o=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",o,{deletionPosition:s})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:s})}function h$e(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}class Ar extends mx{constructor(t,r){super(r);j(this,"_data");this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new Ar(this.data,this.getAttributes())}static fromJSON(t){return new Ar(t.data,t.attributes)}}Ar.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};const dE="selection:";class Lu extends dr(sv){constructor(t){super();j(this,"_selection");this._selection=new f$e(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}toJSON(){return this._selection.toJSON()}_setFocus(t,r){this._selection.setFocus(t,r)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,r){this._selection.setAttribute(t,r)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return dE+t}static _isStoreAttributeKey(t){return t.startsWith(dE)}}Lu.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class f$e extends Al{constructor(t){super();j(this,"markers",new Gu({idProperty:"name"}));j(this,"_model");j(this,"_document");j(this,"_attributePriority",new Map);j(this,"_selectionRestorePosition",null);j(this,"_hasChangedRange",!1);j(this,"_overriddenGravityRegister",new Set);j(this,"_observedMarkers",new Set);this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(r,i)=>{const s=i[0];!s.isDocumentOperation||s.type=="marker"||s.type=="rename"||s.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(r,i,s,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(r,i)=>{m$e(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,r){super.setFocus(t,r),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,r){if(this._setAttribute(t,r)){const i=[t];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const r=[t];this.fire("change:attribute",{attributeKeys:r,directChange:!0})}}overrideGravity(){const t=Xo();return this._overriddenGravityRegister.add(t),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new _e("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const r=this._prepareRange(t);r&&this._ranges.push(r)}toJSON(){const t=super.toJSON();return this.markers.length&&(t.markers=this.markers.map(r=>r.toJSON())),t}_validateSelectionRanges(t){for(const r of t)if(!this._document._validateSelectionRange(r))throw new _e("document-selection-wrong-position",this,{range:r})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const r=Pl.fromRange(t);return r.on("change:range",(i,s,o)=>{if(this._hasChangedRange=!0,r.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(r);this._ranges.splice(a,1),r.detach()}}),r}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let r=!1;for(const s of this._model.markers){const o=s.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=s.getRange();for(const c of this.getRanges())a.containsRange(c,!c.isCollapsed)&&t.push(s)}const i=Array.from(this.markers);for(const s of t)this.markers.has(s)||(this.markers.add(s),r=!0);for(const s of Array.from(this.markers))t.includes(s)||(this.markers.remove(s),r=!0);r&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(t,r){const i=t.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let s=!1;const o=Array.from(this.markers),a=this.markers.has(t);if(!r)a&&(this.markers.remove(t),s=!0);else{let c=!1;for(const u of this.getRanges())if(r.containsRange(u,!u.isCollapsed)){c=!0;break}c&&!a?(this.markers.add(t),s=!0):!c&&a&&(this.markers.remove(t),s=!0)}s&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(t){const r=hm(this._getSurroundingAttributes()),i=hm(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(r);const s=[];for(const[o,a]of this.getAttributes())(!i.has(o)||i.get(o)!==a)&&s.push(o);for(const[o]of i)this.hasAttribute(o)||s.push(o);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(t,r,i=!0){const s=i?"normal":"low";return s=="low"&&this._attributePriority.get(t)=="normal"||super.getAttribute(t)===r?!1:(this._attrs.set(t,r),this._attributePriority.set(t,s),!0)}_removeAttribute(t,r=!0){const i=r?"normal":"low";return i=="low"&&this._attributePriority.get(t)=="normal"||(this._attributePriority.set(t,i),!super.hasAttribute(t))?!1:(this._attrs.delete(t),!0)}_setAttributesTo(t){const r=new Set;for(const[i,s]of this.getAttributes())t.get(i)!==s&&this._removeAttribute(i,!1);for(const[i,s]of t)this._setAttribute(i,s,!1)&&r.add(i);return r}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const r of t.getAttributeKeys())r.startsWith(dE)&&(yield[r.substr(dE.length),t.getAttribute(r)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),r=this._model.schema;if(t.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const s=t.textNode?t.textNode:t.nodeBefore,o=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(i=hk(s,r)),i||(i=hk(o,r)),!this.isGravityOverridden&&!i){let a=s;for(;a&&!i;)a=a.previousSibling,i=hk(a,r)}if(!i){let a=o;for(;a&&!i;)a=a.nextSibling,i=hk(a,r)}i||(i=this.getStoredAttributes())}else{const s=this.getFirstRange();for(const o of s){if(o.item.is("element")&&r.isObject(o.item)){i=hk(o.item,r);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(t){const r=this._model.schema.getNearestSelectionRange(t);r&&this._pushRange(r)}}function hk(n,e){if(!n)return null;if(n instanceof ku||n instanceof Ar)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[r,i]of n.getAttributes())e.checkAttribute("$text",r)&&e.getAttributeProperties(r).copyFromObject!==!1&&t.push([r,i]);return t}function m$e(n,e){const t=n.document.differ;for(const r of t.getChanges()){if(r.type!="insert")continue;const i=r.position.parent;r.length===i.maxOffset&&n.enqueueChange(e,o=>{const a=Array.from(i.getAttributeKeys()).filter(c=>c.startsWith(dE));for(const c of a)o.removeAttribute(c,i)})}}class IC{constructor(e){j(this,"_nodes",[]);j(this,"_offsetToNode",[]);e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new _e("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[e];if(!t)throw new _e("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){const r=[];for(const s of t){if(!(s instanceof mx))throw new _e("model-nodelist-insertnodes-not-node",this);r.push(s)}let i=this.indexToOffset(e);eJ(this._nodes,r,e),eJ(this._offsetToNode,p$e(r),i);for(let s=e;s<this._nodes.length;s++)this._nodes[s]._index=s,this._nodes[s]._startOffset=i,i+=this._nodes[s].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let r=this.indexToOffset(e);const i=this._nodes.splice(e,t),s=i[i.length-1],o=s.startOffset+s.offsetSize-r;this._offsetToNode.splice(r,o);for(const a of i)a._index=null,a._startOffset=null;for(let a=e;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=r,r+=this._nodes[a].offsetSize;return i}_removeNodesArray(e){if(e.length==0)return;for(const r of e)r._index=null,r._startOffset=null;this._nodes=this._nodes.filter(r=>r.index!==null),this._offsetToNode=this._offsetToNode.filter(r=>r.index!==null);let t=0;for(let r=0;r<this._nodes.length;r++)this._nodes[r]._index=r,this._nodes[r]._startOffset=t,t+=this._nodes[r].offsetSize}toJSON(){return this._nodes.map(e=>e.toJSON())}}function p$e(n){const e=[];let t=0;for(const r of n)for(let i=0;i<r.offsetSize;i++)e[t++]=r;return e}class Cr extends mx{constructor(t,r,i){super(r);j(this,"name");j(this,"_children",new IC);this.name=t,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let r=this;for(const i of t)r=r.getChildAtOffset(i);return r}findAncestor(t,r={}){let i=r.includeSelf?this:this.parent;for(;i;){if(i.name===t)return i;i=i.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const r of this._children)t.children.push(r.toJSON())}return t}_clone(t=!1){const r=t?v$e(this._children):void 0;return new Cr(this.name,this.getAttributes(),r)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,r){const i=g$e(r);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(t,i)}_removeChildren(t,r=1){const i=this._children._removeNodes(t,r);for(const s of i)s.parent=null;return i}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const r of t)r.parent=null}static fromJSON(t){let r;if(t.children){r=[];for(const i of t.children)i.name?r.push(Cr.fromJSON(i)):r.push(Ar.fromJSON(i))}return new Cr(t.name,t.attributes,r)}}Cr.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function g$e(n){if(typeof n=="string")return[new Ar(n)];$l(n)||(n=[n]);const e=[];for(const t of n)typeof t=="string"?e.push(new Ar(t)):t instanceof ku?e.push(new Ar(t.data,t.getAttributes())):e.push(t);return e}function v$e(n){const e=[];for(const t of n)e.push(t._clone(!0));return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Qme{constructor(e){j(this,"_dispatchers");this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}class y$e extends Qme{elementToElement(e){return this.add(D$e(e))}elementToStructure(e){return this.add(L$e(e))}attributeToElement(e){return this.add(F$e(e))}attributeToAttribute(e){return this.add(B$e(e))}markerToElement(e){return this.add($$e(e))}markerToHighlight(e){return this.add(U$e(e))}markerToData(e){return this.add(V$e(e))}}function Zme(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;const r=t.writer,i=t.mapper.toViewPosition(e.range.start),s=r.createText(e.item.data);r.insert(i,s)}}function epe(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function x$e(){return(n,e,t)=>{const r=t.mapper.toViewPosition(e.position),i=e.position.getShiftedBy(e.length),s=t.mapper.toViewPosition(i,{isPhantom:!0}),o=t.writer.createRange(r,s),a=t.writer.remove(o.getTrimmed());for(const c of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(c,{defer:!0})}}function tpe(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function b$e(){return(n,e,t)=>{const r=e.selection;if(r.isCollapsed||!t.consumable.consume(r,"selection"))return;const i=[];for(const s of r.getRanges())i.push(t.mapper.toViewRange(s));t.writer.setSelection(i,{backward:r.isBackward})}}function w$e(){return(n,e,t)=>{const r=e.selection;if(!r.isCollapsed||!t.consumable.consume(r,"selection"))return;const i=t.writer,s=r.getFirstPosition(),o=t.mapper.toViewPosition(s),a=i.breakAttributes(o);i.setSelection(a)}}function _$e(){return(n,e,t)=>{const r=t.writer,i=r.document.selection;for(const s of i.getRanges())s.isCollapsed&&s.end.parent.isAttached()&&t.writer.mergeAttributes(s.start);r.setSelection(null)}}function S$e(n){return(e,t,r)=>{if(!r.consumable.test(t.item,e.name))return;const i=n(t.attributeOldValue,r,t),s=n(t.attributeNewValue,r,t);if(!i&&!s)return;r.consumable.consume(t.item,e.name);const o=r.writer,a=o.document.selection;if(t.item instanceof Al||t.item instanceof Lu)o.wrap(a.getFirstRange(),s);else{let c=r.mapper.toViewRange(t.range);t.attributeOldValue!==null&&i&&(c=o.unwrap(c,i)),t.attributeNewValue!==null&&s&&o.wrap(c,s)}}}function k$e(n,e=Y$e){return(t,r,i)=>{if(!e(r.item,i.consumable,{preflight:!0}))return;const s=n(r.item,i,r);if(!s)return;e(r.item,i.consumable);const o=i.mapper.toViewPosition(r.range.start);i.mapper.bindElements(r.item,s),i.writer.insert(o,s),i.convertAttributes(r.item),ope(s,r.item.getChildren(),i,{reconversion:r.reconversion})}}function C$e(n,e){return(t,r,i)=>{if(!e(r.item,i.consumable,{preflight:!0}))return;const s=new Map;i.writer._registerSlotFactory(W$e(r.item,s,i));const o=n(r.item,i,r);if(i.writer._clearSlotFactory(),!o)return;q$e(r.item,s,i),e(r.item,i.consumable);const a=i.mapper.toViewPosition(r.range.start);i.mapper.bindElements(r.item,o),i.writer.insert(a,o),i.convertAttributes(r.item),G$e(o,s,i,{reconversion:r.reconversion})}}function E$e(n){return(e,t,r)=>{t.isOpening=!0;const i=n(t,r);t.isOpening=!1;const s=n(t,r);if(!i||!s)return;const o=t.markerRange;if(o.isCollapsed&&!r.consumable.consume(o,e.name))return;for(const u of o)if(!r.consumable.consume(u.item,e.name))return;const a=r.mapper,c=r.writer;c.insert(a.toViewPosition(o.start),i),r.mapper.bindElementToMarker(i,t.markerName),o.isCollapsed||(c.insert(a.toViewPosition(o.end),s),r.mapper.bindElementToMarker(s,t.markerName)),e.stop()}}function T$e(){return(n,e,t)=>{const r=t.mapper.markerNameToElements(e.markerName);if(r){for(const i of r)t.mapper.unbindElementFromMarkerName(i,e.markerName),t.writer.clear(t.writer.createRangeOn(i),i);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function A$e(n){return(e,t,r)=>{const i=n(t.markerName,r);if(!i)return;const s=t.markerRange;r.consumable.consume(s,e.name)&&(wJ(s,!1,r,t,i),wJ(s,!0,r,t,i),e.stop())}}function wJ(n,e,t,r,i){const s=e?n.start:n.end,o=s.nodeAfter&&s.nodeAfter.is("element")?s.nodeAfter:null,a=s.nodeBefore&&s.nodeBefore.is("element")?s.nodeBefore:null;if(o||a){let u,d;e&&o||!e&&!a?(u=o,d=!0):(u=a,d=!1);const h=t.mapper.toViewElement(u);if(h){N$e(h,e,d,t,r,i);return}}const c=t.mapper.toViewPosition(s);j$e(c,e,t,r,i)}function N$e(n,e,t,r,i,s){const o=`data-${s.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(o)?n.getAttribute(o).split(","):[];a.unshift(s.name),r.writer.setAttribute(o,a.join(","),n),r.mapper.bindElementToMarker(n,i.markerName)}function j$e(n,e,t,r,i){const s=`${i.group}-${e?"start":"end"}`,o=i.name?{name:i.name}:null,a=t.writer.createUIElement(s,o);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,r.markerName)}function P$e(n){return(e,t,r)=>{const i=n(t.markerName,r);if(!i)return;const s=r.mapper.markerNameToElements(t.markerName);if(!s)return;for(const a of s)r.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(o(`data-${i.group}-start-before`,a),o(`data-${i.group}-start-after`,a),o(`data-${i.group}-end-before`,a),o(`data-${i.group}-end-after`,a)):r.writer.clear(r.writer.createRangeOn(a),a);r.writer.clearClonedElementsGroup(t.markerName),e.stop();function o(a,c){if(c.hasAttribute(a)){const u=new Set(c.getAttribute(a).split(","));u.delete(i.name),u.size==0?r.writer.removeAttribute(a,c):r.writer.setAttribute(a,Array.from(u).join(","),c)}}}}function I$e(n){return(e,t,r)=>{if(!r.consumable.test(t.item,e.name))return;const i=n(t.attributeOldValue,r,t),s=n(t.attributeNewValue,r,t);if(!i&&!s)return;r.consumable.consume(t.item,e.name);const o=r.mapper.toViewElement(t.item),a=r.writer;if(!o)throw new _e("conversion-attribute-to-attribute-on-text",r.dispatcher,t);if(t.attributeOldValue!==null&&i){let c=i.value;i.key=="style"&&(typeof i.value=="string"?c=new jC(a.document.stylesProcessor).setTo(i.value).getStylesEntries().map(([u])=>u):c=Object.keys(i.value)),a.removeAttribute(i.key,c,o)}if(t.attributeNewValue!==null&&s){let c=s.value;s.key=="style"&&typeof s.value=="string"&&(c=Object.fromEntries(new jC(a.document.stylesProcessor).setTo(s.value).getStylesEntries())),a.setAttribute(s.key,c,!1,o)}}}function O$e(n){return(e,t,r)=>{if(!t.item||!(t.item instanceof Al||t.item instanceof Lu)&&!t.item.is("$textProxy"))return;const i=Sz(n,t,r);if(!i||!r.consumable.consume(t.item,e.name))return;const s=r.writer,o=tpe(s,i),a=s.document.selection;if(t.item instanceof Al||t.item instanceof Lu)s.wrap(a.getFirstRange(),o);else{const c=r.mapper.toViewRange(t.range),u=s.wrap(c,o);for(const d of u.getItems())if(d.is("attributeElement")&&d.isSimilar(o)){r.mapper.bindElementToMarker(d,t.markerName);break}}}}function R$e(n){return(e,t,r)=>{if(!t.item||!(t.item instanceof Cr))return;const i=Sz(n,t,r);if(!i||!r.consumable.test(t.item,e.name))return;const s=r.mapper.toViewElement(t.item);if(s&&s.getCustomProperty("addHighlight")){r.consumable.consume(t.item,e.name);for(const a of Le._createIn(t.item))r.consumable.consume(a.item,e.name);s.getCustomProperty("addHighlight")(s,i,r.writer),r.mapper.bindElementToMarker(s,t.markerName)}}}function M$e(n){return(e,t,r)=>{if(t.markerRange.isCollapsed)return;const i=Sz(n,t,r);if(!i)return;const s=tpe(r.writer,i),o=r.mapper.markerNameToElements(t.markerName);if(o){for(const a of o)r.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?r.writer.unwrap(r.writer.createRangeOn(a),s):a.getCustomProperty("removeHighlight")(a,i.id,r.writer);r.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function D$e(n){const e=npe(n.model),t=hE(n.view,"container");return e.attributes.length&&(e.children=!0),r=>{r.on(`insert:${e.name}`,k$e(t,spe(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&r.on("reduceChanges",ipe(e),{priority:"low"})}}function L$e(n){const e=npe(n.model),t=hE(n.view,"container");return e.children=!0,r=>{if(r._conversionApi.schema.checkChild(e.name,"$text"))throw new _e("conversion-element-to-structure-disallowed-text",r,{elementName:e.name});r.on(`insert:${e.name}`,C$e(t,spe(e)),{priority:n.converterPriority||"normal"}),r.on("reduceChanges",ipe(e),{priority:"low"})}}function F$e(n){n=Oa(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const i of e.values)n.view[i]=hE(n.view[i],"attribute");else n.view=hE(n.view,"attribute");const r=rpe(n);return i=>{i.on(t,S$e(r),{priority:n.converterPriority||"normal"})}}function B$e(n){n=Oa(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const i of e.values)n.view[i]=_J(n.view[i]);else n.view=_J(n.view);const r=rpe(n);return i=>{i.on(t,I$e(r),{priority:n.converterPriority||"normal"})}}function $$e(n){const e=hE(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,E$e(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,T$e(),{priority:n.converterPriority||"normal"})}}function V$e(n){n=Oa(n);const e=n.model;let t=n.view;return t||(t=r=>({group:e,name:r.substr(n.model.length+1)})),r=>{r.on(`addMarker:${e}`,A$e(t),{priority:n.converterPriority||"normal"}),r.on(`removeMarker:${e}`,P$e(t),{priority:n.converterPriority||"normal"})}}function U$e(n){return e=>{e.on(`addMarker:${n.model}`,O$e(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,R$e(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,M$e(n.view),{priority:n.converterPriority||"normal"})}}function npe(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?Ur(n.attributes):[],children:!!n.children}}function hE(n,e){return typeof n=="function"?n:(t,r)=>z$e(n,r,e)}function z$e(n,e,t){typeof n=="string"&&(n={name:n});let r;const i=e.writer,s=Object.assign({},n.attributes);if(t=="container")r=i.createContainerElement(n.name,s);else if(t=="attribute"){const o={priority:n.priority||L0.DEFAULT_PRIORITY};r=i.createAttributeElement(n.name,s,o)}else r=i.createUIElement(n.name,s);if(n.styles){const o=Object.keys(n.styles);for(const a of o)i.setStyle(a,n.styles[a],r)}if(n.classes){const o=n.classes;if(typeof o=="string")i.addClass(o,r);else for(const a of o)i.addClass(a,r)}return r}function rpe(n){return n.model.values?(e,t,r)=>{const i=n.view[e];return i?i(e,t,r):null}:n.view}function _J(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function Sz(n,e,t){const r=typeof n=="function"?n(e,t):{...n};return r?(r.priority||(r.priority=10),r.id||(r.id=e.markerName),r):null}function H$e(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(n.children)return!0}return!1}}function ipe(n){const e=H$e(n);return(t,r)=>{const i=[];r.reconvertedElements||(r.reconvertedElements=new Set);for(const s of r.changes){const o=s.type=="attribute"?s.range.start.nodeAfter:s.position.parent;if(!o||!e(o,s)){i.push(s);continue}if(!r.reconvertedElements.has(o)){r.reconvertedElements.add(o);const a=He._createBefore(o);let c=i.length;for(let u=i.length-1;u>=0;u--){const d=i[u],f=(d.type=="attribute"?d.range.start:d.position).compareWith(a);if(f=="before"||d.type=="remove"&&f=="same")break;c=u}i.splice(c,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}r.changes=i}}function spe(n){return(e,t,r={})=>{const i=["insert"];for(const s of n.attributes)e.hasAttribute(s)&&i.push(`attribute:${s}`);return i.every(s=>t.test(e,s))?(r.preflight||i.forEach(s=>t.consume(e,s)),!0):!1}}function W$e(n,e,t){return(r,i)=>{const s=r.createContainerElement("$slot");let o=null;if(i==="children")o=Array.from(n.getChildren());else if(typeof i=="function")o=Array.from(n.getChildren()).filter(a=>i(a));else throw new _e("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:i});return e.set(s,o),s}}function q$e(n,e,t){const r=Array.from(e.values()).flat(),i=new Set(r);if(i.size!=r.length)throw new _e("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(i.size!=n.childCount)throw new _e("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function G$e(n,e,t,r){t.mapper.on("modelToViewPosition",o,{priority:"highest"});let i=null,s=null;for([i,s]of e)ope(n,s,t,r),t.writer.move(t.writer.createRangeIn(i),t.writer.createPositionBefore(i)),t.writer.remove(i);t.mapper.off("modelToViewPosition",o);function o(a,c){const u=c.modelPosition.nodeAfter,d=s.indexOf(u);d<0||(c.viewPosition=c.mapper.findPositionIn(i,d))}}function ope(n,e,t,r){for(const i of e)K$e(n.root,i,t,r)||t.convertItem(i)}function K$e(n,e,t,r){const{writer:i,mapper:s}=t;if(!r.reconversion)return!1;const o=s.toViewElement(e);return!o||o.root==n||!t.canReuseView(o)?!1:(i.move(i.createRangeOn(o),s.toViewPosition(He._createBefore(e))),!0)}function Y$e(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ape(n){const{schema:e,document:t}=n.model;for(const r of t.getRoots())if(r.isEmpty&&!e.checkChild(r,"$text")&&e.checkChild(r,"paragraph"))return n.insertElement("paragraph",r),!0;return!1}function lpe(n,e,t){const r=t.createContext(n);return!(!t.checkChild(r,"paragraph")||!t.checkChild(r.push("paragraph"),e))}function cpe(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}class X$e extends Qme{elementToElement(e){return this.add(upe(e))}elementToAttribute(e){return this.add(Z$e(e))}attributeToAttribute(e){return this.add(e7e(e))}elementToMarker(e){return this.add(t7e(e))}dataToMarker(e){return this.add(n7e(e))}}function SJ(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:r,modelCursor:i}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=r,e.modelCursor=i}}}function J$e(){return(n,e,{schema:t,consumable:r,writer:i})=>{let s=e.modelCursor;if(!r.test(e.viewItem))return;if(!t.checkChild(s,"$text")){if(!lpe(s,"$text",t)||e.viewItem.data.trim().length==0)return;s=cpe(s,i)}r.consume(e.viewItem);const o=i.createText(e.viewItem.data);i.insert(o,s),e.modelRange=i.createRange(s,s.getShiftedBy(o.offsetSize)),e.modelCursor=e.modelRange.end}}function Q$e(n,e){return(t,r)=>{const i=r.newSelection,s=[];for(const a of i.getRanges())s.push(e.toModelRange(a));const o=n.createSelection(s,{backward:i.isBackward});o.isEqual(n.document.selection)||n.change(a=>{a.setSelection(o)})}}function upe(n){n=Oa(n);const e=d$(n),t=kz(n.view),r=t?`element:${t}`:"element";return i=>{i.on(r,e,{priority:n.converterPriority||"normal"})}}function Z$e(n){n=Oa(n),dpe(n);const e=hpe(n,!1),t=kz(n.view),r=t?`element:${t}`:"element";return i=>{i.on(r,e,{priority:n.converterPriority||"low"})}}function e7e(n){n=Oa(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=s7e(n)),dpe(n,e);const t=hpe(n,!0);return r=>{r.on("element",t,{priority:n.converterPriority||"low"})}}function t7e(n){const e=l7e(n.model);return upe({...n,model:e})}function n7e(n){n=Oa(n),n.model||(n.model=i=>i?n.view+":"+i:n.view);const e={view:n.view,model:n.model},t=d$(kJ(e,"start")),r=d$(kJ(e,"end"));return i=>{i.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),i.on(`element:${n.view}-end`,r,{priority:n.converterPriority||"normal"});const s=Ng.low,o=Ng.highest,a=Ng.get(n.converterPriority)/o;i.on("element",r7e(e),{priority:s+a})}}function r7e(n){return(e,t,r)=>{const i=`data-${n.view}`;if(!r.consumable.test(t.viewItem,{attributes:i+"-end-after"})&&!r.consumable.test(t.viewItem,{attributes:i+"-start-after"})&&!r.consumable.test(t.viewItem,{attributes:i+"-end-before"})&&!r.consumable.test(t.viewItem,{attributes:i+"-start-before"}))return;t.modelRange||Object.assign(t,r.convertChildren(t.viewItem,t.modelCursor)),r.consumable.consume(t.viewItem,{attributes:i+"-end-after"})&&s(t.modelRange.end,t.viewItem.getAttribute(i+"-end-after").split(",")),r.consumable.consume(t.viewItem,{attributes:i+"-start-after"})&&s(t.modelRange.end,t.viewItem.getAttribute(i+"-start-after").split(",")),r.consumable.consume(t.viewItem,{attributes:i+"-end-before"})&&s(t.modelRange.start,t.viewItem.getAttribute(i+"-end-before").split(",")),r.consumable.consume(t.viewItem,{attributes:i+"-start-before"})&&s(t.modelRange.start,t.viewItem.getAttribute(i+"-start-before").split(","));function s(o,a){for(const c of a){const u=n.model(c,r),d=r.writer.createElement("$marker",{"data-name":u});r.writer.insert(d,o),t.modelCursor.isEqual(o)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(o,1),t.modelRange=t.modelRange._getTransformedByInsertion(o,1)[0]}}}}function kz(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function d$(n){const e=new lE(n.view);return(t,r,i)=>{const s=e.match(r.viewItem);if(!s)return;const o=s.match;if(o.name=!0,!i.consumable.test(r.viewItem,o))return;const a=i7e(n.model,r.viewItem,i);a&&i.safeInsert(a,r.modelCursor)&&(i.consumable.consume(r.viewItem,o),i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r))}}function i7e(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function s7e(n){typeof n.view=="string"&&(n.view={key:n.view});const e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;let r;return e=="class"||e=="style"?r={[e=="class"?"classes":"styles"]:t}:r={attributes:{[e]:t}},n.view.name&&(r.name=n.view.name),n.view=r,e}function dpe(n,e=null){const t=e===null?!0:s=>s.getAttribute(e),r=typeof n.model!="object"?n.model:n.model.key,i=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:r,value:i}}function hpe(n,e){const t=new lE(n.view);return(r,i,s)=>{if(!i.modelRange&&e)return;const o=t.match(i.viewItem);if(!o||(o7e(n.view,i.viewItem)?o.match.name=!0:delete o.match.name,!s.consumable.test(i.viewItem,o.match)))return;const a=n.model.key,c=typeof n.model.value=="function"?n.model.value(i.viewItem,s,i):n.model.value;if(c==null)return;i.modelRange||Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor)),a7e(i.modelRange,{key:a,value:c},e,s)&&(s.consumable.test(i.viewItem,{name:!0})&&(o.match.name=!0),s.consumable.consume(i.viewItem,o.match))}}function o7e(n,e){const t=typeof n=="function"?n(e):n;return typeof t=="object"&&!kz(t)?!1:!t.classes&&!t.attributes&&!t.styles}function a7e(n,e,t,r){let i=!1;for(const s of Array.from(n.getItems({shallow:t})))r.schema.checkAttribute(s,e.key)&&(i=!0,!s.hasAttribute(e.key)&&r.writer.setAttribute(e.key,e.value,s));return i}function l7e(n){return(e,t)=>{const r=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":r})}}function kJ(n,e){const t=(r,i)=>{const s=r.getAttribute("name"),o=n.model(s,i);return i.writer.createElement("$marker",{"data-name":o})};return{view:`${n.view}-${e}`,model:t}}class c7e extends Tr(){constructor(t,r){super();j(this,"model");j(this,"view");j(this,"mapper");j(this,"downcastDispatcher");this.model=t,this.view=new e$e(r),this.mapper=new Yme,this.downcastDispatcher=new Xme({mapper:this.mapper,schema:t.schema});const i=this.model.document,s=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(i.differ,o,a),this.downcastDispatcher.convertSelection(s,o,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",Q$e(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",Zme(),{priority:"lowest"}),this.downcastDispatcher.on("insert",epe(),{priority:"lowest"}),this.downcastDispatcher.on("remove",x$e(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",_$e()),this.downcastDispatcher.on("selection",b$e(),{priority:"low"}),this.downcastDispatcher.on("selection",w$e(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const c=new Dme(this.view.document,a.name);return c.rootName=a.rootName,this.mapper.bindElements(a,c),c})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const r=typeof t=="string"?t:t.name,i=this.model.markers.get(r);if(!i)throw new _e("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:r});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(t){this.model.change(()=>{this.model.document.differ._refreshItem(t)})}}class u7e extends Tr(){constructor(){super();j(this,"_sourceDefinitions",{});j(this,"_attributeProperties",Object.create(null));j(this,"_customChildChecks",new Map);j(this,"_customAttributeChecks",new Map);j(this,"_genericCheckSymbol",Symbol("$generic"));j(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,r)=>{r[0]=new jg(r[0])},{priority:"highest"}),this.on("checkChild",(t,r)=>{r[0]=new jg(r[0]),r[1]=this.getDefinition(r[1])},{priority:"highest"})}register(t,r){if(this._sourceDefinitions[t])throw new _e("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},r)],this._clearCache()}extend(t,r){if(!this._sourceDefinitions[t])throw new _e("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},r)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let r;return typeof t=="string"?r=t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?r="$text":r=t.name,this.getDefinitions()[r]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const r=this.getDefinition(t);return!!(r&&r.isBlock)}isLimit(t){const r=this.getDefinition(t);return r?!!(r.isLimit||r.isObject):!1}isObject(t){const r=this.getDefinition(t);return r?!!(r.isObject||r.isLimit&&r.isSelectable&&r.isContent):!1}isInline(t){const r=this.getDefinition(t);return!!(r&&r.isInline)}isSelectable(t){const r=this.getDefinition(t);return r?!!(r.isSelectable||r.isObject):!1}isContent(t){const r=this.getDefinition(t);return r?!!(r.isContent||r.isObject):!1}checkChild(t,r){return r?this._checkContextMatch(t,r):!1}checkAttribute(t,r){const i=this.getDefinition(t.last);if(!i)return!1;const s=this._evaluateAttributeChecks(t,r);return s!==void 0?s:i.allowAttributes.includes(r)}checkMerge(t,r){if(t instanceof He){const i=t.nodeBefore,s=t.nodeAfter;if(!(i instanceof Cr))throw new _e("schema-check-merge-no-element-before",this);if(!(s instanceof Cr))throw new _e("schema-check-merge-no-element-after",this);return this.checkMerge(i,s)}if(this.isLimit(t)||this.isLimit(r))return!1;for(const i of r.getChildren())if(!this.checkChild(t,i))return!1;return!0}addChildCheck(t,r){const i=r!==void 0?r:this._genericCheckSymbol,s=this._customChildChecks.get(i)||[];s.push(t),this._customChildChecks.set(i,s)}addAttributeCheck(t,r){const i=r!==void 0?r:this._genericCheckSymbol,s=this._customAttributeChecks.get(i)||[];s.push(t),this._customAttributeChecks.set(i,s)}setAttributeProperties(t,r){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),r)}getAttributeProperties(t){return this._attributeProperties[t]||Object.create(null)}getLimitElement(t){let r;for(t instanceof He?r=t.parent:r=(t instanceof Le?[t]:Array.from(t.getRanges())).reduce((s,o)=>{const a=o.getCommonAncestor();return s?s.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(r)&&r.parent;)r=r.parent;return r}checkAttributeInSelection(t,r){if(t.isCollapsed){const s=[...t.getFirstPosition().getAncestors(),new Ar("",t.getAttributes())];return this.checkAttribute(s,r)}else{const i=t.getRanges();for(const s of i)for(const o of s)if(this.checkAttribute(o.item,r))return!0}return!1}*getValidRanges(t,r){t=E7e(t);for(const i of t)yield*this._getValidRangesForRange(i,r)}getNearestSelectionRange(t,r="both"){if(t.root.rootName=="$graveyard")return null;if(this.checkChild(t,"$text"))return new Le(t);let i,s;const o=t.getAncestors().reverse().find(a=>this.isLimit(a))||t.root;(r=="both"||r=="backward")&&(i=new Wf({boundaries:Le._createIn(o),startPosition:t,direction:"backward"})),(r=="both"||r=="forward")&&(s=new Wf({boundaries:Le._createIn(o),startPosition:t}));for(const a of C7e(i,s)){const c=a.walker==i?"elementEnd":"elementStart",u=a.value;if(u.type==c&&this.isObject(u.item))return Le._createOn(u.item);if(this.checkChild(u.nextPosition,"$text"))return new Le(u.nextPosition)}return null}findAllowedParent(t,r){let i=t.parent;for(;i;){if(this.checkChild(i,r))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(t,r,i){const s=i.model;for(const[o,a]of Object.entries(r))s.schema.checkAttribute(t,o)&&i.setAttribute(o,a,t)}removeDisallowedAttributes(t,r){for(const i of t)if(i.is("$text"))CJ(this,i,r);else{const o=Le._createIn(i).getPositions();for(const a of o){const c=a.nodeBefore||a.parent;CJ(this,c,r)}}}getAttributesWithProperty(t,r,i){const s={};for(const[o,a]of t.getAttributes()){const c=this.getAttributeProperties(o);c[r]!==void 0&&(i===void 0||i===c[r])&&(s[o]=a)}return s}createContext(t){return new jg(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},r=this._sourceDefinitions,i=Object.keys(r);for(const o of i)t[o]=d7e(r[o],o);const s=Object.values(t);for(const o of s)h7e(t,o),f7e(t,o),m7e(t,o),p7e(t,o);for(const o of s)g7e(t,o);for(const o of s)v7e(t,o);for(const o of s)y7e(t,o);for(const o of s)b7e(t,o);for(const o of s)w7e(t,o);this._compiledDefinitions=x7e(t)}_checkContextMatch(t,r){const i=t.last;let s=this._evaluateChildChecks(t,r);if(s=s!==void 0?s:r.allowIn.includes(i.name),!s)return!1;const o=this.getDefinition(i),a=t.trimLast();return o?a.length==0?!0:this._checkContextMatch(a,o):!1}_evaluateChildChecks(t,r){const i=this._customChildChecks.get(this._genericCheckSymbol)||[],s=this._customChildChecks.get(r.name)||[];for(const o of[...i,...s]){const a=o(t,r);if(a!==void 0)return a}}_evaluateAttributeChecks(t,r){const i=this._customAttributeChecks.get(this._genericCheckSymbol)||[],s=this._customAttributeChecks.get(r)||[];for(const o of[...i,...s]){const a=o(t,r);if(a!==void 0)return a}}*_getValidRangesForRange(t,r){let i=t.start,s=t.start;for(const o of t.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(Le._createIn(o),r)),this.checkAttribute(o,r)||(i.isEqual(s)||(yield new Le(i,s)),i=He._createAfter(o)),s=He._createAfter(o);i.isEqual(s)||(yield new Le(i,s))}findOptimalInsertionRange(t,r){const i=t.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return r=="before"||r=="after"?new Le(He._createAt(i,r)):Le._createOn(i);const s=Ra(t.getSelectedBlocks());if(!s)return new Le(t.focus);if(s.isEmpty)return new Le(He._createAt(s,0));const o=He._createAfter(s);return t.focus.isTouching(o)?new Le(o):new Le(He._createBefore(s))}}class jg{constructor(e){j(this,"_items");if(e instanceof jg)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(k7e)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new jg([e]);return t._items=[...this._items,...t._items],t}trimLast(){const e=new jg([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function d7e(n,e){const t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return _7e(n,t),md(n,t,"allowIn"),md(n,t,"allowChildren"),md(n,t,"disallowIn"),md(n,t,"disallowChildren"),md(n,t,"allowContentOf"),md(n,t,"allowWhere"),md(n,t,"allowAttributes"),md(n,t,"disallowAttributes"),md(n,t,"allowAttributesOf"),md(n,t,"inheritTypesFrom"),S7e(n,t),t}function h7e(n,e){for(const t of e.allowIn){const r=n[t];r?r.allowChildren.add(e.name):e.allowIn.delete(t)}}function f7e(n,e){for(const t of e.allowChildren){const r=n[t];r?r.allowIn.add(e.name):e.allowChildren.delete(t)}}function m7e(n,e){for(const t of e.disallowIn){const r=n[t];r?r.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function p7e(n,e){for(const t of e.disallowChildren){const r=n[t];r?r.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function g7e(n,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function v7e(n,e){for(const t of e.allowContentOf){const r=n[t];r&&(r.disallowChildren.forEach(i=>{e.allowChildren.has(i)||(e.disallowChildren.add(i),n[i].disallowIn.add(e.name))}),r.allowChildren.forEach(i=>{e.disallowChildren.has(i)||(e.allowChildren.add(i),n[i].allowIn.add(e.name))}))}}function y7e(n,e){for(const t of e.allowWhere){const r=n[t];r&&(r.disallowIn.forEach(i=>{e.allowIn.has(i)||(e.disallowIn.add(i),n[i].disallowChildren.add(e.name))}),r.allowIn.forEach(i=>{e.disallowIn.has(i)||(e.allowIn.add(i),n[i].allowChildren.add(e.name))}))}}function x7e(n){const e={};for(const t of Object.values(n))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(r=>!!n[r]),allowChildren:Array.from(t.allowChildren).filter(r=>!!n[r]),allowAttributes:Array.from(t.allowAttributes)};return e}function b7e(n,e){for(const t of e.allowAttributesOf){const r=n[t];if(!r)return;r.allowAttributes.forEach(i=>{e.disallowAttributes.has(i)||e.allowAttributes.add(i)})}}function w7e(n,e){for(const t of e.inheritTypesFrom){const r=n[t];if(r){const i=Object.keys(r).filter(s=>s.startsWith("is"));for(const s of i)s in e||(e[s]=r[s])}}}function _7e(n,e){for(const t of n){const r=Object.keys(t).filter(i=>i.startsWith("is"));for(const i of r)e[i]=!!t[i]}}function md(n,e,t){for(const r of n){let i=r[t];typeof i=="string"&&(i=[i]),Array.isArray(i)&&i.forEach(s=>e[t].add(s))}}function S7e(n,e){for(const t of n){const r=t.inheritAllFrom;r&&(e.allowContentOf.add(r),e.allowWhere.add(r),e.allowAttributesOf.add(r),e.inheritTypesFrom.add(r))}}function k7e(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(e){return n.getAttribute(e)}}}function*C7e(n,e){let t=!1;for(;!t;){if(t=!0,n){const r=n.next();r.done||(t=!1,yield{walker:n,value:r.value})}if(e){const r=e.next();r.done||(t=!1,yield{walker:e,value:r.value})}}}function*E7e(n){for(const e of n)yield*e.getMinimalFlatRanges()}function CJ(n,e,t){for(const r of e.getAttributeKeys())n.checkAttribute(e,r)||t.removeAttribute(r,e)}class T7e extends dr(){constructor(t){super();j(this,"conversionApi");j(this,"_splitParts",new Map);j(this,"_cursorParents",new Map);j(this,"_modelCursor",null);j(this,"_emptyElementsToKeep",new Set);this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(r,i)=>this._convertItem(r,i),convertChildren:(r,i)=>this._convertChildren(r,i),safeInsert:(r,i)=>this._safeInsert(r,i),updateConversionResult:(r,i)=>this._updateConversionResult(r,i),splitToAllowedParent:(r,i)=>this._splitToAllowedParent(r,i),getSplitParts:r=>this._getSplitParts(r),keepEmptyElement:r=>this._keepEmptyElement(r)}}convert(t,r,i=["$root"]){this.fire("viewCleanup",t),this._modelCursor=N7e(i,r),this.conversionApi.writer=r,this.conversionApi.consumable=VI.createFrom(t),this.conversionApi.store={};const{modelRange:s}=this._convertItem(t,this._modelCursor),o=r.createDocumentFragment();if(s){this._removeEmptyElements();const a=this._modelCursor.parent,c=a._removeChildren(0,a.childCount);o._insertChild(0,c),o.markers=A7e(o,r)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(t,r){const i={viewItem:t,modelCursor:r,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,i,this.conversionApi):t.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof Le))throw new _e("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(t,r){let i=r.is("position")?r:He._createAt(r,0);const s=new Le(i);for(const o of Array.from(t.getChildren())){const a=this._convertItem(o,i);a.modelRange instanceof Le&&(s.end=a.modelRange.end,i=a.modelCursor)}return{modelRange:s,modelCursor:i}}_safeInsert(t,r){const i=this._splitToAllowedParent(t,r);return i?(this.conversionApi.writer.insert(t,i.position),!0):!1}_updateConversionResult(t,r){const i=this._getSplitParts(t),s=this.conversionApi.writer;r.modelRange||(r.modelRange=s.createRange(s.createPositionBefore(t),s.createPositionAfter(i[i.length-1])));const o=this._cursorParents.get(t);o?r.modelCursor=s.createPositionAt(o,0):r.modelCursor=r.modelRange.end}_splitToAllowedParent(t,r){const{schema:i,writer:s}=this.conversionApi;let o=i.findAllowedParent(r,t);if(o){if(o===r.parent)return{position:r};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return lpe(r,t,i)?{position:cpe(r,s)}:null;const a=this.conversionApi.writer.split(r,o),c=[];for(const d of a.range.getWalker())if(d.type=="elementEnd")c.push(d.item);else{const h=c.pop(),f=d.item;this._registerSplitPair(h,f)}const u=a.range.end.parent;return this._cursorParents.set(t,u),{position:a.position,cursorParent:u}}_registerSplitPair(t,r){this._splitParts.has(t)||this._splitParts.set(t,[t]);const i=this._splitParts.get(t);this._splitParts.set(r,i),i.push(r)}_getSplitParts(t){let r;return this._splitParts.has(t)?r=this._splitParts.get(t):r=[t],r}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){const t=new Map;for(const r of this._splitParts.keys())if(r.isEmpty&&!this._emptyElementsToKeep.has(r)){const i=t.get(r.parent)||[];i.push(r),this._splitParts.delete(r),t.set(r.parent,i)}for(const[r,i]of t)r._removeChildrenArray(i);t.size&&this._removeEmptyElements()}}function A7e(n,e){const t=new Set,r=new Map,i=Le._createIn(n).getItems();for(const s of i)s.is("element","$marker")&&t.add(s);for(const s of t){const o=s.getAttribute("data-name"),a=e.createPositionBefore(s);r.has(o)?r.get(o).end=a.clone():r.set(o,new Le(a.clone())),e.remove(s)}return r}function N7e(n,e){let t;for(const r of new jg(n)){const i={};for(const o of r.getAttributeKeys())i[o]=r.getAttribute(o);const s=e.createElement(r.name,i);t&&e.insert(s,t),t=He._createAt(s,0)}return t}class j7e{getHtml(e){const r=yt.document.implementation.createHTMLDocument("").createElement("div");return r.appendChild(e),r.innerHTML}}class P7e{constructor(e){j(this,"domParser");j(this,"domConverter");j(this,"htmlWriter");j(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new zme(e,{renderingMode:"data"}),this.htmlWriter=new j7e}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),r=t.createDocumentFragment(),i=t.body.childNodes;for(;i.length>0;)r.appendChild(i[0]);return r}}class I7e extends dr(){constructor(t,r){super();j(this,"model");j(this,"mapper");j(this,"downcastDispatcher");j(this,"upcastDispatcher");j(this,"viewDocument");j(this,"stylesProcessor");j(this,"htmlProcessor");j(this,"processor");j(this,"_viewWriter");this.model=t,this.mapper=new Yme,this.downcastDispatcher=new Xme({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",Zme(),{priority:"lowest"}),this.downcastDispatcher.on("insert",epe(),{priority:"lowest"}),this.upcastDispatcher=new T7e({schema:t.schema}),this.viewDocument=new Lme(r),this.stylesProcessor=r,this.htmlProcessor=new P7e(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Fme(this.viewDocument),this.upcastDispatcher.on("text",J$e(),{priority:"lowest"}),this.upcastDispatcher.on("element",SJ(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",SJ(),{priority:"lowest"}),Tr().prototype.decorate.call(this,"init"),Tr().prototype.decorate.call(this,"set"),Tr().prototype.decorate.call(this,"get"),Tr().prototype.decorate.call(this,"toView"),Tr().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},ape)},{priority:"lowest"})}get(t={}){const{rootName:r="main",trim:i="empty"}=t;if(!this._checkIfRootsExists([r]))throw new _e("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(r);return s.isAttached()||Yn("datacontroller-get-detached-root",this),i==="empty"&&!this.model.hasContent(s,{ignoreWhitespaces:!0})?"":this.stringify(s,t)}stringify(t,r={}){const i=this.toView(t,r);return this.processor.toData(i)}toView(t,r={}){const i=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const o=Le._createIn(t),a=new F0(i);this.mapper.bindElements(t,a);const c=t.is("documentFragment")?t.markers:O7e(t);return this.downcastDispatcher.convert(o,c,s,r),a}init(t){if(this.model.document.version)throw new _e("datacontroller-init-document-not-empty",this);let r={};if(typeof t=="string"?r.main=t:r=t,!this._checkIfRootsExists(Object.keys(r)))throw new _e("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(const s of Object.keys(r)){const o=this.model.document.getRoot(s);i.insert(this.parse(r[s],o),o,0)}}),Promise.resolve()}set(t,r={}){let i={};if(typeof t=="string"?i.main=t:i=t,!this._checkIfRootsExists(Object.keys(i)))throw new _e("datacontroller-set-non-existent-root",this);this.model.enqueueChange(r.batchType||{},s=>{s.setSelection(null),s.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(i)){const a=this.model.document.getRoot(o);s.remove(s.createRangeIn(a)),s.insert(this.parse(i[o],a),a,0)}})}parse(t,r="$root"){const i=this.processor.toView(t);return this.toModel(i,r)}toModel(t,r="$root"){return this.model.change(i=>this.upcastDispatcher.convert(t,i,r))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const r of t)if(!this.model.document.getRoot(r))return!1;return!0}}function O7e(n){const e=[],t=n.root.document;if(!t)return new Map;const r=Le._createIn(n);for(const i of t.model.markers){const s=i.getRange(),o=s.isCollapsed,a=s.start.isEqual(r.start)||s.end.isEqual(r.end);if(o&&a)e.push([i.name,s]);else{const c=r.getIntersection(s);c&&e.push([i.name,c])}}return e.sort(([i,s],[o,a])=>{if(s.end.compareWith(a.start)!=="after")return 1;if(s.start.compareWith(a.end)!=="before")return-1;switch(s.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(s.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(i)}}}),new Map(e)}class R7e{constructor(e,t){j(this,"_helpers",new Map);j(this,"_downcast");j(this,"_upcast");this._downcast=Ur(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Ur(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const r=this._downcast.includes(t);if(!this._upcast.includes(t)&&!r)throw new _e("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:r})}for(e){if(!this._helpers.has(e))throw new _e("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:r}of k5(e))this.for("upcast").elementToElement({model:t,view:r,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:r}of k5(e))this.for("upcast").elementToAttribute({view:r,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:r}of k5(e))this.for("upcast").attributeToAttribute({view:r,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:r}){if(this._helpers.has(e))throw new _e("conversion-group-exists",this);const i=r?new y$e(t):new X$e(t);this._helpers.set(e,i)}}function*k5(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},r=n.view[e],i=n.upcastAlso?n.upcastAlso[e]:void 0;yield*EJ(t,r,i)}else yield*EJ(n.model,n.view,n.upcastAlso)}function*EJ(n,e,t){if(yield{model:n,view:e},t)for(const r of Ur(t))yield{model:n,view:r}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Vl{constructor(e){j(this,"baseVersion");j(this,"isDocumentOperation");j(this,"batch");this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function Cz(n,e){const t=mpe(e),r=t.reduce((o,a)=>o+a.offsetSize,0),i=n.parent;pE(n);const s=n.index;return i._insertChild(s,t),mE(i,s+t.length),mE(i,s),new Le(n,n.getShiftedBy(r))}function fpe(n){if(!n.isFlat)throw new _e("operation-utils-remove-range-not-flat",this);const e=n.start.parent;pE(n.start),pE(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return mE(e,n.start.index),t}function fE(n,e){if(!n.isFlat)throw new _e("operation-utils-move-range-not-flat",this);const t=fpe(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),Cz(e,t)}function M7e(n,e,t){pE(n.start),pE(n.end);for(const r of n.getItems({shallow:!0})){const i=r.is("$textProxy")?r.textNode:r;t!==null?i._setAttribute(e,t):i._removeAttribute(e),mE(i.parent,i.index)}mE(n.end.parent,n.end.index)}function mpe(n){const e=[];function t(r){if(typeof r=="string")e.push(new Ar(r));else if(r instanceof ku)e.push(new Ar(r.data,r.getAttributes()));else if(r instanceof mx)e.push(r);else if($l(r))for(const i of r)t(i)}t(n);for(let r=1;r<e.length;r++){const i=e[r],s=e[r-1];i instanceof Ar&&s instanceof Ar&&ppe(i,s)&&(e.splice(r-1,2,new Ar(s.data+i.data,s.getAttributes())),r--)}return e}function mE(n,e){const t=n.getChild(e-1),r=n.getChild(e);if(t&&r&&t.is("$text")&&r.is("$text")&&ppe(t,r)){const i=new Ar(t.data+r.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,i)}}function pE(n){const e=n.textNode,t=n.parent;if(e){const r=n.offset-e.startOffset,i=e.index;t._removeChildren(i,1);const s=new Ar(e.data.substr(0,r),e.getAttributes()),o=new Ar(e.data.substr(r),e.getAttributes());t._insertChild(i,[s,o])}}function ppe(n,e){const t=n.getAttributes(),r=e.getAttributes();for(const i of t){if(i[1]!==e.getAttribute(i[0]))return!1;r.next()}return r.next().done}class Un extends Vl{constructor(t,r,i,s){super(s);j(this,"sourcePosition");j(this,"howMany");j(this,"targetPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=r,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Le._createFromPositionAndShift(this.sourcePosition,this.howMany),Le._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Un(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Un(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,r=this.targetPosition.parent,i=this.sourcePosition.offset,s=this.targetPosition.offset;if(i+this.howMany>t.maxOffset)throw new _e("move-operation-nodes-do-not-exist",this);if(t===r&&i<s&&s<i+this.howMany)throw new _e("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&qs(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new _e("move-operation-node-into-itself",this)}}_execute(){fE(Le._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,r){const i=He.fromJSON(t.sourcePosition,r),s=He.fromJSON(t.targetPosition,r);return new this(i,t.howMany,s,t.baseVersion)}}class As extends Vl{constructor(t,r,i){super(i);j(this,"position");j(this,"nodes");j(this,"shouldReceiveAttributes");this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new IC(mpe(r)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new IC([...this.nodes].map(i=>i._clone(!0))),r=new As(this.position,t,this.baseVersion);return r.shouldReceiveAttributes=this.shouldReceiveAttributes,r}getReversed(){const t=this.position.root.document.graveyard,r=new He(t,[0]);return new Un(this.position,this.nodes.maxOffset,r,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new _e("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new IC([...t].map(r=>r._clone(!0))),Cz(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,r){const i=[];for(const o of t.nodes)o.name?i.push(Cr.fromJSON(o)):i.push(Ar.fromJSON(o));const s=new As(He.fromJSON(t.position,r),i,t.baseVersion);return s.shouldReceiveAttributes=t.shouldReceiveAttributes,s}}class cr extends Vl{constructor(t,r,i,s,o){super(o);j(this,"splitPosition");j(this,"howMany");j(this,"insertionPosition");j(this,"graveyardPosition");this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=r,this.insertionPosition=i,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new He(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Le(this.splitPosition,t)}get affectedSelectable(){const t=[Le._createFromPositionAndShift(this.splitPosition,0),Le._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Le._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new cr(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,r=new He(t,[0]);return new Ci(this.moveTargetPosition,this.howMany,this.splitPosition,r,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,r=this.splitPosition.offset;if(!t||t.maxOffset<r)throw new _e("split-operation-position-invalid",this);if(t.parent){if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset-this.splitPosition.offset)throw new _e("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new _e("split-operation-graveyard-position-invalid",this)}else throw new _e("split-operation-split-in-root",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)fE(Le._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=t._clone();Cz(this.insertionPosition,i)}const r=new Le(He._createAt(t,this.splitPosition.offset),He._createAt(t,t.maxOffset));fE(r,this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const r=t.path.slice(0,-1);return r[r.length-1]++,new He(t.root,r,"toPrevious")}static fromJSON(t,r){const i=He.fromJSON(t.splitPosition,r),s=He.fromJSON(t.insertionPosition,r),o=t.graveyardPosition?He.fromJSON(t.graveyardPosition,r):null;return new this(i,t.howMany,s,o,t.baseVersion)}}class Ci extends Vl{constructor(t,r,i,s,o){super(o);j(this,"sourcePosition");j(this,"howMany");j(this,"targetPosition");j(this,"graveyardPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=r,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new He(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Le(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Le._createOn(t),Le._createFromPositionAndShift(this.targetPosition,0),Le._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Ci(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),r=this.sourcePosition.path.slice(0,-1),i=new He(this.sourcePosition.root,r)._getTransformedByMergeOperation(this);return new cr(t,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,r=this.targetPosition.parent;if(t.parent)if(r.parent){if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset)throw new _e("merge-operation-how-many-invalid",this)}else throw new _e("merge-operation-target-position-invalid",this);else throw new _e("merge-operation-source-position-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const t=this.sourcePosition.parent,r=Le._createIn(t);fE(r,this.targetPosition),fE(Le._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,r){const i=He.fromJSON(t.sourcePosition,r),s=He.fromJSON(t.targetPosition,r),o=He.fromJSON(t.graveyardPosition,r);return new this(i,t.howMany,s,o,t.baseVersion)}}class qo extends Vl{constructor(t,r,i,s,o,a){super(a);j(this,"name");j(this,"oldRange");j(this,"newRange");j(this,"affectsData");j(this,"_markers");this.name=t,this.oldRange=r?r.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=s}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new qo(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new qo(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,r){return new qo(t.name,t.oldRange?Le.fromJSON(t.oldRange,r):null,t.newRange?Le.fromJSON(t.newRange,r):null,r.model.markers,t.affectsData,t.baseVersion)}}class Ii extends Vl{constructor(t,r,i,s,o){super(o);j(this,"range");j(this,"key");j(this,"oldValue");j(this,"newValue");this.range=t.clone(),this.key=r,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Ii(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ii(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new _e("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!RX(t.getAttribute(this.key),this.oldValue))throw new _e("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key))throw new _e("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){RX(this.oldValue,this.newValue)||M7e(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,r){return new Ii(Le.fromJSON(t.range,r),t.key,t.oldValue,t.newValue,t.baseVersion)}}class ls extends Vl{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new ls(this.baseVersion)}getReversed(){return new ls(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Ia extends Vl{constructor(t,r,i,s){super(s);j(this,"position");j(this,"oldName");j(this,"newName");this.position=t,this.position.stickiness="toNext",this.oldName=r,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ia(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ia(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(t instanceof Cr){if(this.oldName!==""&&t.name!==this.oldName)throw new _e("rename-operation-wrong-name",this)}else throw new _e("rename-operation-wrong-position",this);this.oldName=t.name}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,r){return new Ia(He.fromJSON(t.position,r),t.oldName,t.newName,t.baseVersion)}}class Jf extends Vl{constructor(t,r,i,s,o){super(o);j(this,"root");j(this,"key");j(this,"oldValue");j(this,"newValue");this.root=t,this.key=r,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Jf(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Jf(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new _e("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new _e("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new _e("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,r){if(!r.getRoot(t.root))throw new _e("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Jf(r.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class ah extends Vl{constructor(t,r,i,s,o){super(o);j(this,"rootName");j(this,"elementName");j(this,"isAdd");j(this,"_document");if(this.rootName=t,this.elementName=r,this.isAdd=i,this._document=s,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ah(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ah(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,r){return new ah(t.rootName,t.elementName,t.isAdd,r,t.baseVersion)}}const Ic={};Ic[Ii.className]=Ii;Ic[As.className]=As;Ic[qo.className]=qo;Ic[Un.className]=Un;Ic[ls.className]=ls;Ic[Vl.className]=Vl;Ic[Ia.className]=Ia;Ic[Jf.className]=Jf;Ic[ah.className]=ah;Ic[cr.className]=cr;Ic[Ci.className]=Ci;class D7e{static fromJSON(e,t){return Ic[e.__className].fromJSON(e,t)}}const h$=new Map;function Mn(n,e,t){let r=h$.get(n);r||(r=new Map,h$.set(n,r)),r.set(e,t)}function L7e(n,e){const t=h$.get(n);return t&&t.has(e)?t.get(e):F7e}function F7e(n){return[n]}function TJ(n,e,t={}){const r=L7e(n.constructor,e.constructor);try{return n=n.clone(),r(n,e,t)}catch(i){throw i}}function B7e(n,e,t){n=n.slice(),e=e.slice();const r=new $7e(t.document,t.useRelations,t.forceWeakRemove);r.setOriginalOperations(n),r.setOriginalOperations(e);const i=r.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:i};const s=new WeakMap;for(const c of n)s.set(c,0);const o={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const c=n[a],u=s.get(c);if(u==e.length){a++;continue}const d=e[u],h=TJ(c,d,r.getContext(c,d,!0)),f=TJ(d,c,r.getContext(d,c,!1));r.updateRelation(c,d),r.setOriginalOperations(h,c),r.setOriginalOperations(f,d);for(const p of h)s.set(p,u+f.length);n.splice(a,1,...h),e.splice(u,1,...f)}return NJ(n),NJ(e),AJ(n,o.nextBaseVersionB),AJ(e,o.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:i}}class $7e{constructor(e,t,r=!1){j(this,"originalOperations");j(this,"_history");j(this,"_useRelations");j(this,"_forceWeakRemove");j(this,"_relations");this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!r,this._relations=new Map}setOriginalOperations(e,t=null){const r=t?this.originalOperations.get(t):null;for(const i of e)this.originalOperations.set(i,r||i)}updateRelation(e,t){if(e instanceof Un)t instanceof Ci?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)?this._setRelation(e,t,"moveTargetAfter"):e.howMany>1&&e.sourcePosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"firstToMoveMerged"):e.howMany>1&&e.sourcePosition.getShiftedBy(e.howMany-1).isEqual(t.deletionPosition)&&this._setRelation(e,t,"lastToMoveMerged"):t instanceof Un&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof cr){if(t instanceof Ci)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof Un)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const r=Le._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.splitPosition)){const i=r.end.offset-e.splitPosition.offset,s=e.splitPosition.offset-r.start.offset;this._setRelation(e,t,{howMany:i,offset:s})}}}else if(e instanceof Ci)t instanceof Ci?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof cr?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof Un&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof qo){const r=e.newRange;if(!r)return;if(t instanceof Ci){const i=r.start.isEqual(t.targetPosition),s=r.start.isEqual(t.deletionPosition),o=r.end.isEqual(t.deletionPosition),a=r.end.isEqual(t.sourcePosition);(i||s||o||a)&&this._setRelation(e,t,{wasInLeftElement:i,wasStartBeforeMergedElement:s,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(e,t,r){return{aIsStrong:r,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const r=this.originalOperations.get(t),i=this._history.getUndoneOperation(r);if(!i)return null;const s=this.originalOperations.get(e),o=this._relations.get(s);return o&&o.get(i)||null}_setRelation(e,t,r){const i=this.originalOperations.get(e),s=this.originalOperations.get(t);let o=this._relations.get(i);o||(o=new Map,this._relations.set(i,o)),o.set(s,r)}}function AJ(n,e){for(const t of n)t.baseVersion=e++}function NJ(n){const e=new Map;for(let t=0;t<n.length;t++){const r=n[t];r instanceof qo&&(r.baseVersion!==-1?e.set(r.name,{op:r,ranges:r.newRange?[r.newRange]:[]}):(r.newRange&&e.get(r.name).ranges.push(r.newRange),n.splice(t,1),t--))}for(const{op:t,ranges:r}of e.values())r.length?t.newRange=Le._createFromRanges(r):t.newRange=null}Mn(Ii,Ii,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const r=n.range.getDifference(e.range).map(s=>new Ii(s,n.key,n.oldValue,n.newValue,0)),i=n.range.getIntersection(e.range);return i&&t.aIsStrong&&r.push(new Ii(i,e.key,e.newValue,n.newValue,0)),r.length==0?[new ls(0)]:r}else return[n]});Mn(Ii,As,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const r=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(i=>new Ii(i,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const i=gpe(e,n.key,n.oldValue);i&&r.unshift(i)}return r}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function gpe(n,e,t){const i=n.nodes.getNode(0).getAttribute(e);if(i==t)return null;const s=new Le(n.position,n.position.getShiftedBy(n.howMany));return new Ii(s,e,i,t,0)}Mn(Ii,Ci,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(Le._createFromPositionAndShift(e.graveyardPosition,1));const r=n.range._getTransformedByMergeOperation(e);return r.isCollapsed||t.push(r),t.map(i=>new Ii(i,n.key,n.oldValue,n.newValue,n.baseVersion))});Mn(Ii,Un,(n,e)=>V7e(n.range,e).map(r=>new Ii(r,n.key,n.oldValue,n.newValue,n.baseVersion)));function V7e(n,e){const t=Le._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=null,i=[];t.containsRange(n,!0)?r=n:n.start.hasSameParentAs(t.start)?(i=n.getDifference(t),r=n.getIntersection(t)):i=[n];const s=[];for(let o of i){o=o._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),c=o.start.hasSameParentAs(a),u=o._getTransformedByInsertion(a,e.howMany,c);s.push(...u)}return r&&s.push(r._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),s}Mn(Ii,cr,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new Le(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});Mn(As,Ii,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const r=gpe(n,e.key,e.newValue);r&&t.push(r)}return t});Mn(As,As,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));Mn(As,Un,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Mn(As,cr,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));Mn(As,Ci,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));Mn(qo,As,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));Mn(qo,qo,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new ls(0)];return[n]});Mn(qo,Ci,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));Mn(qo,Un,(n,e)=>{const t=[n];if(n.oldRange&&(n.oldRange=Le._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){const r=n.newRange._getTransformedByMoveOperation(e);n.newRange=r[0];for(let i=1;i<r.length;i++){const s=n.clone();s.oldRange=null,s.newRange=r[i],s.baseVersion=-1,t.push(s)}}return t});Mn(qo,cr,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const r=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)?t.abRelation.wasStartBeforeMergedElement?n.newRange.start=He._createAt(e.insertionPosition):t.abRelation.wasInLeftElement?n.newRange.start=He._createAt(n.newRange.start):n.newRange.start=He._createAt(e.moveTargetPosition):n.newRange.start=r.start,n.newRange.end.isEqual(e.splitPosition)?n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=He._createAt(e.insertionPosition):t.abRelation.wasInRightElement?n.newRange.end=He._createAt(e.moveTargetPosition):n.newRange.end=He._createAt(n.newRange.end):n.newRange.end=r.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});Mn(Ci,As,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));Mn(Ci,Ci,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const r=e.graveyardPosition.path.slice();return r.push(0),n.sourcePosition=new He(e.graveyardPosition.root,r),n.howMany=0,[n]}else return[new ls(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const r=n.targetPosition.root.rootName=="$graveyard",i=e.targetPosition.root.rootName=="$graveyard";if(i&&!r||!(r&&!i)&&t.aIsStrong){const c=e.targetPosition._getTransformedByMergeOperation(e),u=n.targetPosition._getTransformedByMergeOperation(e);return[new Un(c,n.howMany,u,0)]}else return[new ls(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Mn(Ci,Un,(n,e,t)=>{const r=Le._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(n.sourcePosition)?[new ls(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});Mn(Ci,cr,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});Mn(Un,As,(n,e)=>{const r=Le._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=r.start,n.howMany=r.end.offset-r.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});Mn(Un,Un,(n,e,t)=>{const r=Le._createFromPositionAndShift(n.sourcePosition,n.howMany),i=Le._createFromPositionAndShift(e.sourcePosition,e.howMany);let s=t.aIsStrong,o=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?o=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(o=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&o?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),jJ(n,e)&&jJ(e,n))return[e.getReversed()];if(r.containsPosition(e.targetPosition)&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),zb([r],a);if(i.containsPosition(n.targetPosition)&&i.containsRange(r,!0))return r.start=r.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),r.end=r.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),zb([r],a);const d=qs(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(d=="prefix"||d=="extension")return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),zb([r],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?s=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(s=!1);const h=[],f=r.getDifference(i);for(const x of f){x.start=x.start._getTransformedByDeletion(e.sourcePosition,e.howMany),x.end=x.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const y=qs(x.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",b=x._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,y);h.push(...b)}const p=r.getIntersection(i);return p!==null&&s&&(p.start=p.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),p.end=p.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),h.length===0?h.push(p):h.length==1?i.start.isBefore(r.start)||i.start.isEqual(r.start)?h.unshift(p):h.push(p):h.splice(1,0,p)),h.length===0?[new ls(n.baseVersion)]:zb(h,a)});Mn(Un,cr,(n,e,t)=>{let r=n.targetPosition.clone();if((!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(r=n.targetPosition._getTransformedBySplitOperation(e)),n.sourcePosition.isEqual(e.insertionPosition)&&t.abRelation=="firstToMoveMerged")return n.howMany++,n.targetPosition=r,[n];const i=Le._createFromPositionAndShift(n.sourcePosition,n.howMany);if(i.end.isEqual(e.insertionPosition))return(!e.graveyardPosition||t.abRelation=="lastToMoveMerged")&&n.howMany++,n.targetPosition=r,[n];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let a=new Le(e.splitPosition,i.end);a=a._getTransformedBySplitOperation(e);const c=[new Le(i.start,e.splitPosition),a];return zb(c,r)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(r=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(r=n.targetPosition);const o=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&o.push(Le._createFromPositionAndShift(e.insertionPosition,1))}return zb(o,r)});Mn(Un,Ci,(n,e,t)=>{const r=Le._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&r.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const o=[];let a=e.graveyardPosition.clone(),c=e.targetPosition._getTransformedByMergeOperation(e);const u=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(o.push(new Un(n.sourcePosition,n.howMany-1,u,0)),a=a._getTransformedByMove(n.sourcePosition,u,n.howMany-1),c=c._getTransformedByMove(n.sourcePosition,u,n.howMany-1));const d=e.deletionPosition._getCombined(n.sourcePosition,u),h=new Un(a,1,d,0),f=h.getMovedRangeStart().path.slice();f.push(0);const p=new He(h.targetPosition.root,f);c=c._getTransformedByMove(a,d,1);const x=new Un(c,e.howMany,p,0);return o.push(h),o.push(x),o}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new ls(0)]}const s=Le._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=s.start,n.howMany=s.end.offset-s.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});Mn(Ia,As,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));Mn(Ia,Ci,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));Mn(Ia,Un,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Mn(Ia,Ia,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new ls(0)];return[n]});Mn(Ia,cr,(n,e)=>{const t=n.position.path,r=e.splitPosition.getParentPath();if(qs(t,r)=="same"&&!e.graveyardPosition){const i=new Ia(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,i]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});Mn(Jf,Jf,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new ls(0)];n.oldValue=e.newValue}return[n]});Mn(ah,ah,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new ls(0)]:[n]);Mn(cr,As,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));Mn(cr,Ci,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const r=e.graveyardPosition.path.slice();r.push(0);const i=new He(e.graveyardPosition.root,r),s=cr.getInsertionPosition(new He(e.graveyardPosition.root,r)),o=new cr(i,0,s,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=cr.getInsertionPosition(n.splitPosition),n.graveyardPosition=o.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[o,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=cr.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Mn(cr,Un,(n,e,t)=>{const r=Le._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const s=r.start.isEqual(n.graveyardPosition)||r.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&s){const o=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),c=a.path.slice();c.push(0);const u=new He(a.root,c);return[new Un(o,n.howMany,u,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const i=n.splitPosition.isEqual(e.targetPosition);if(i&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=cr.getInsertionPosition(n.splitPosition),[n];if(i&&t.abRelation&&t.abRelation.howMany){const{howMany:s,offset:o}=t.abRelation;return n.howMany+=s,n.splitPosition=n.splitPosition.getShiftedBy(o),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(n.splitPosition)){const s=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=s,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=cr.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=cr.getInsertionPosition(n.splitPosition),[n]});Mn(cr,cr,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new ls(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new ls(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const r=n.splitPosition.root.rootName=="$graveyard",i=e.splitPosition.root.rootName=="$graveyard";if(i&&!r||!(r&&!i)&&t.aIsStrong){const c=[];return e.howMany&&c.push(new Un(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&c.push(new Un(n.splitPosition,n.howMany,n.moveTargetPosition,0)),c}else return[new ls(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const r=e.insertionPosition.path.slice();r.push(0);const i=new He(e.insertionPosition.root,r),s=new Un(n.insertionPosition,1,i,0);return[n,s]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=cr.getInsertionPosition(n.splitPosition),[n]});function jJ(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function zb(n,e){const t=[];for(let r=0;r<n.length;r++){const i=n[r],s=new Un(i.start,i.end.offset-i.start.offset,e,0);t.push(s);for(let o=r+1;o<n.length;o++)n[o]=n[o]._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)[0];e=e._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)}return t}class ji extends dr(He){constructor(e,t,r="toNone"){if(super(e,t,r),!this.root.is("rootElement"))throw new _e("model-liveposition-root-not-rootelement",e);U7e.call(this)}detach(){this.stopListening()}toPosition(){return new He(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}ji.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function U7e(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&z7e.call(this,t)},{priority:"low"})}function z7e(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}class fb{constructor(e={}){j(this,"operations");j(this,"isUndoable");j(this,"isLocal");j(this,"isUndo");j(this,"isTyping");typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},Yn("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:r=!0,isUndo:i=!1,isTyping:s=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=r,this.isUndo=i,this.isTyping=s}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.isDocumentOperation&&(e.batch=this,this.operations.push(e)),e}}const zC=class zC{constructor(e){j(this,"_markerCollection");j(this,"_changesInElement",new Map);j(this,"_elementsSnapshots",new Map);j(this,"_elementChildrenSnapshots",new Map);j(this,"_elementState",new Map);j(this,"_changedMarkers",new Map);j(this,"_changedRoots",new Map);j(this,"_changeCount",0);j(this,"_cachedChanges",null);j(this,"_cachedChangesWithGraveyard",null);j(this,"_refreshedItems",new Set);this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const r of t.range.getItems({shallow:!0}))this._isInInsertedElement(r.parent)||this._markAttribute(r);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const r=this._isInInsertedElement(t.sourcePosition.parent),i=this._isInInsertedElement(t.targetPosition.parent);r||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),i||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const s=Le._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const o of s.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const r=Le._createFromPositionAndShift(t.position,1);for(const i of this._markerCollection.getMarkersIntersectingRange(r)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const r=t.splitPosition.parent;if(!this._isInInsertedElement(r)){this._markRemove(r,t.splitPosition.offset,t.howMany);const i=Le._createFromPositionAndShift(t.splitPosition,t.howMany);for(const s of i.getItems({shallow:!0}))this._setElementState(s,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const r=t.sourcePosition.parent;this._isInInsertedElement(r.parent)||this._markRemove(r.parent,r.startOffset,1);const i=t.graveyardPosition.parent;this._markInsert(i,t.graveyardPosition.offset,1),this._setElementState(r,"move");const s=t.targetPosition.parent;if(!this._isInInsertedElement(s)){this._markInsert(s,t.targetPosition.offset,r.maxOffset);const o=Le._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const r=t.affectedSelectable;if(!r._isLoaded||r.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const r=t.root.rootName;this._bufferRootAttributeChange(r,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,r){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),r.range&&r.range.root.is("rootElement")&&!r.range.root._isLoaded&&(r.range=null);let i=this._changedMarkers.get(e);i?i.newMarkerData=r:(i={newMarkerData:r,oldMarkerData:t},this._changedMarkers.set(e,i)),i.oldMarkerData.range==null&&r.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,r]of this._changedMarkers)r.oldMarkerData.range!=null&&e.push({name:t,range:r.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,r]of this._changedMarkers)r.newMarkerData.range!=null&&e.push({name:t,range:r.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const r=e.range&&!t.range,i=!e.range&&t.range,s=e.range&&t.range&&!e.range.isEqual(t.range);if(r||i||s)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const r of this._changesInElement.keys()){const i=this._changesInElement.get(r).sort((d,h)=>d.offset===h.offset?d.type!=h.type?d.type=="remove"?-1:1:0:d.offset<h.offset?-1:1),s=this._elementChildrenSnapshots.get(r),o=IJ(r.getChildren()),a=H7e(s.length,i);let c=0,u=0;for(const d of a)if(d==="i"){const h=this._getDiffActionForNode(o[c].node,"insert"),f=this._elementsSnapshots.get(o[c].node),p=this._getInsertDiff(r,c,h,o[c],f);t.push(p),c++}else if(d==="r"){const h=this._getDiffActionForNode(s[u].node,"remove"),f=this._getRemoveDiff(r,c,h,s[u]);t.push(f),u++}else if(d==="a"){const h=s[u].attributes,f=o[c].attributes;let p;if(o[c].name=="$text")p=new Le(He._createAt(r,c),He._createAt(r,c+1));else{const y=r.offsetToIndex(c);p=new Le(He._createAt(r,c),He._createAt(r.getChild(y),0))}const x=this._getAttributesDiff(p,h,f);t.push(...x),c++,u++}else c++,u++}t.sort((r,i)=>r.position.root!=i.position.root?r.position.root.rootName<i.position.root.rootName?-1:1:r.position.isEqual(i.position)?r.changeCount-i.changeCount:r.position.isBefore(i.position)?-1:1);for(let r=1,i=0;r<t.length;r++){const s=t[i],o=t[r],a=s.type=="remove"&&o.type=="remove"&&s.name=="$text"&&o.name=="$text"&&s.position.isEqual(o.position),c=s.type=="insert"&&o.type=="insert"&&s.name=="$text"&&o.name=="$text"&&s.position.parent==o.position.parent&&s.position.offset+s.length==o.position.offset,u=s.type=="attribute"&&o.type=="attribute"&&s.position.parent==o.position.parent&&s.range.isFlat&&o.range.isFlat&&s.position.offset+s.length==o.position.offset&&s.attributeKey==o.attributeKey&&s.attributeOldValue==o.attributeOldValue&&s.attributeNewValue==o.attributeNewValue;a||c||u?(s.length++,u&&(s.range.end=s.range.end.getShiftedBy(1)),t[r]=null):i=r}t=t.filter(r=>r);for(const r of t)delete r.changeCount,r.type=="attribute"&&(delete r.position,delete r.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(W7e),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");const t=Le._createOn(e);for(const r of this._markerCollection.getMarkersIntersectingRange(t)){const i=r.getData();this.bufferMarkerChange(r.name,i,i)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const r=t.getData();this.bufferMarkerChange(t.name,{...r,range:null},r)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const r=this._changedRoots.get(e);r.state!==void 0?(delete r.state,r.attributes===void 0&&this._changedRoots.delete(e)):r.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,r,i){const s=this._changedRoots.get(e)||{name:e},o=s.attributes||{};if(o[t]){const a=o[t];i===a.oldValue?delete o[t]:a.newValue=i}else o[t]={oldValue:r,newValue:i};Object.entries(o).length===0?(delete s.attributes,s.state===void 0&&this._changedRoots.delete(e)):(s.attributes=o,this._changedRoots.set(e,s))}_markInsert(e,t,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const i={type:"insert",offset:t,howMany:r,count:this._changeCount++};this._markChange(e,i)}_markRemove(e,t,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const i={type:"remove",offset:t,howMany:r,count:this._changeCount++};this._markChange(e,i),this._removeAllNestedChanges(e,t,r)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);const r=this._getChangesForElement(e);this._handleChange(t,r),r.push(t);for(let i=0;i<r.length;i++)r[i].howMany<1&&(r.splice(i,1),i--)}_setElementState(e,t){if(!e.is("element"))return;const r=zC._statesPriority.indexOf(this._elementState.get(e));zC._statesPriority.indexOf(t)>r&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;const r=this._elementState.get(e);return!r||r=="move"?t:r}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;const t=IJ(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(const r of t)this._elementsSnapshots.set(r.node,r)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const r of t){const i=e.offset+e.howMany,s=r.offset+r.howMany;if(e.type=="insert"&&(r.type=="insert"&&(e.offset<=r.offset?r.offset+=e.howMany:e.offset<s&&(r.howMany+=e.nodesToHandle,e.nodesToHandle=0)),r.type=="remove"&&e.offset<r.offset&&(r.offset+=e.howMany),r.type=="attribute")){if(e.offset<=r.offset)r.offset+=e.howMany;else if(e.offset<s){const o=r.howMany;r.howMany=e.offset-r.offset,t.unshift({type:"attribute",offset:i,howMany:o-r.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(r.type=="insert"){if(i<=r.offset)r.offset-=e.howMany;else if(i<=s)if(e.offset<r.offset){const o=i-r.offset;r.offset=e.offset,r.howMany-=o,e.nodesToHandle-=o}else r.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=r.offset)e.nodesToHandle-=r.howMany,r.howMany=0;else if(e.offset<s){const o=s-e.offset;r.howMany-=o,e.nodesToHandle-=o}}if(r.type=="remove"&&(i<=r.offset?r.offset-=e.howMany:e.offset<r.offset&&(e.nodesToHandle+=r.howMany,r.howMany=0)),r.type=="attribute"){if(i<=r.offset)r.offset-=e.howMany;else if(e.offset<r.offset){const o=i-r.offset;r.offset=e.offset,r.howMany-=o}else if(e.offset<s)if(i<=s){const o=r.howMany;r.howMany=e.offset-r.offset;const a=o-r.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else r.howMany-=s-e.offset}}if(e.type=="attribute"){if(r.type=="insert")if(e.offset<r.offset&&i>r.offset){if(i>s){const o={type:"attribute",offset:s,howMany:i-s,count:this._changeCount++};this._handleChange(o,t),t.push(o)}e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=r.offset&&e.offset<s&&(i>s?(e.nodesToHandle=i-s,e.offset=s):e.nodesToHandle=0);if(r.type=="remove"&&e.offset<r.offset&&i>r.offset){const o={type:"attribute",offset:r.offset,howMany:i-r.offset,count:this._changeCount++};this._handleChange(o,t),t.push(o),e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}r.type=="attribute"&&(e.offset>=r.offset&&i<=s?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=r.offset&&i>=s&&(r.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,r,i,s){const o={type:"insert",position:He._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++,action:r};return r!="insert"&&s&&(o.before={name:s.name,attributes:new Map(s.attributes)}),o}_getRemoveDiff(e,t,r,i){return{type:"remove",action:r,position:He._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,r){const i=[];r=new Map(r);for(const[s,o]of t){const a=r.has(s)?r.get(s):null;a!==o&&i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),r.delete(s)}for(const[s,o]of r)i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return i}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const r=this._changesInElement.get(t),i=e.startOffset;if(r){for(const s of r)if(s.type=="insert"&&i>=s.offset&&i<s.offset+s.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,r){const i=new Le(He._createAt(e,t),He._createAt(e,t+r));for(const s of i.getItems({shallow:!0}))s.is("element")&&(this._changesInElement.delete(s),this._removeAllNestedChanges(s,0,s.maxOffset))}};j(zC,"_statesPriority",[void 0,"refresh","rename","move"]);let f$=zC;function PJ(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function IJ(n){const e=[];for(const t of n)if(t.is("$text"))for(let r=0;r<t.data.length;++r)e.push(PJ(t));else e.push(PJ(t));return e}function H7e(n,e){const t=[];let r=0,i=0;for(const s of e){if(s.offset>r){for(let o=0;o<s.offset-r;o++)t.push("e");i+=s.offset-r}if(s.type=="insert"){for(let o=0;o<s.howMany;o++)t.push("i");r=s.offset+s.howMany}else if(s.type=="remove"){for(let o=0;o<s.howMany;o++)t.push("r");r=s.offset,i+=s.howMany}else{if(s.howMany>1500)for(let o=0;o<s.howMany;o++)t.push("a");else t.push(..."a".repeat(s.howMany).split(""));r=s.offset+s.howMany,i+=s.howMany}}if(i<n)for(let s=0;s<n-i-r;s++)t.push("e");return t}function W7e(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}class q7e{constructor(){j(this,"_operations",[]);j(this,"_undoPairs",new Map);j(this,"_undoneOperations",new Set);j(this,"_baseVersionToOperationIndex",new Map);j(this,"_version",0);j(this,"_gaps",new Map)}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new _e("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const r=this._operations[0];e===void 0&&(e=r.baseVersion);let i=t-1;for(const[a,c]of this._gaps)e>a&&e<c&&(e=c),i>a&&i<c&&(i=a-1);if(i<r.baseVersion||e>this.lastOperation.baseVersion)return[];let s=this._baseVersionToOperationIndex.get(e);s===void 0&&(s=0);let o=this._baseVersionToOperationIndex.get(i);return o===void 0&&(o=this._operations.length-1),this._operations.slice(s,o+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class HI extends Cr{constructor(t,r,i="main"){super(r);j(this,"rootName");j(this,"_document");j(this,"_isAttached",!0);j(this,"_isLoaded",!0);this._document=t,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}HI.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const OJ="$graveyard";class G7e extends dr(){constructor(t){super();j(this,"model");j(this,"history");j(this,"selection");j(this,"roots");j(this,"differ");j(this,"isReadOnly");j(this,"_postFixers");j(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=t,this.history=new q7e,this.selection=new Lu(this),this.roots=new Gu({idProperty:"rootName"}),this.differ=new f$(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",OJ),this.listenTo(t,"applyOperation",(r,i)=>{const s=i[0];s.isDocumentOperation&&this.differ.bufferOperation(s)},{priority:"high"}),this.listenTo(t,"applyOperation",(r,i)=>{const s=i[0];s.isDocumentOperation&&this.history.addOperation(s)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(r,i,s,o,a)=>{const c={...i.getData(),range:o};this.differ.bufferMarkerChange(i.name,a,c),s===null&&i.on("change",(u,d)=>{const h=i.getData();this.differ.bufferMarkerChange(i.name,{...h,range:d},h)})}),this.registerPostFixer(r=>{let i=!1;for(const s of this.roots)!s.isAttached()&&!s.isEmpty&&(r.remove(r.createRangeIn(s)),i=!0);for(const s of this.model.markers)s.getRange().root.isAttached()||(r.removeMarker(s),i=!0);return i})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(OJ)}createRoot(t="$root",r="main"){if(this.roots.get(r))throw new _e("model-document-createroot-name-exists",this,{name:r});const i=new HI(this,t,r);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(r=>r.rootName)}getRoots(t=!1){return this.roots.filter(r=>r!=this.graveyard&&(t||r.isAttached())&&r._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=vFe(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),r=this.model,i=r.schema,s=r.createPositionFromPath(t,[0]);return i.getNearestSelectionRange(s)||r.createRange(s)}_validateSelectionRange(t){return t.start.isValid()&&t.end.isValid()&&RJ(t.start)&&RJ(t.end)}_callPostFixers(t){let r=!1;do for(const i of this._postFixers)if(this.selection.refresh(),r=i(t),r)break;while(r)}}function RJ(n){const e=n.textNode;if(e){const t=e.data,r=n.offset-e.startOffset;return!gz(t,r)&&!vz(t,r)}return!0}class K7e extends dr(){constructor(){super(...arguments);j(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(t){const r=t instanceof Eb?t.name:t;return this._markers.has(r)}get(t){return this._markers.get(t)||null}_set(t,r,i=!1,s=!1){const o=t instanceof Eb?t.name:t;if(o.includes(","))throw new _e("markercollection-incorrect-marker-name",this);const a=this._markers.get(o);if(a){const d=a.getData(),h=a.getRange();let f=!1;return h.isEqual(r)||(a._attachLiveRange(Pl.fromRange(r)),f=!0),i!=a.managedUsingOperations&&(a._managedUsingOperations=i,f=!0),typeof s=="boolean"&&s!=a.affectsData&&(a._affectsData=s,f=!0),f&&this.fire(`update:${o}`,a,h,r,d),a}const c=Pl.fromRange(r),u=new Eb(o,c,i,s);return this._markers.set(o,u),this.fire(`update:${o}`,u,null,r,{...u.getData(),range:null}),u}_remove(t){const r=t instanceof Eb?t.name:t,i=this._markers.get(r);return i?(this._markers.delete(r),this.fire(`update:${r}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(t){const r=t instanceof Eb?t.name:t,i=this._markers.get(r);if(!i)throw new _e("markercollection-refresh-marker-not-exists",this);const s=i.getRange();this.fire(`update:${r}`,i,s,s,i.getData())}*getMarkersAtPosition(t){for(const r of this)r.getRange().containsPosition(t)&&(yield r)}*getMarkersIntersectingRange(t){for(const r of this)r.getRange().getIntersection(t)!==null&&(yield r)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const r of this._markers.values())r.name.startsWith(t+":")&&(yield r)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class Eb extends dr(sv){constructor(t,r,i,s){super();j(this,"name");j(this,"_managedUsingOperations");j(this,"_affectsData");j(this,"_liveRange");this.name=t,this._liveRange=this._attachLiveRange(r),this._managedUsingOperations=i,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){var t;return{name:this.name,range:(t=this._liveRange)==null?void 0:t.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Eb.prototype.is=function(n){return n==="marker"||n==="model:marker"};class Y7e extends Vl{constructor(t,r){super(null);j(this,"sourcePosition");j(this,"howMany");this.sourcePosition=t.clone(),this.howMany=r}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new _e("detach-operation-on-document-node",this)}_execute(){fpe(Le._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class bd extends sv{constructor(t){super();j(this,"markers",new Map);j(this,"_children",new IC);t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let r=this;for(const i of t)r=r.getChildAtOffset(i);return r}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const r of this._children)t.push(r.toJSON());return t}static fromJSON(t){const r=[];for(const i of t)i.name?r.push(Cr.fromJSON(i)):r.push(Ar.fromJSON(i));return new bd(r)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,r){const i=X7e(r);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(t,i)}_removeChildren(t,r=1){const i=this._children._removeNodes(t,r);for(const s of i)s.parent=null;return i}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const r of t)r.parent=null}}bd.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function X7e(n){return typeof n=="string"?[new Ar(n)]:($l(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Ar(e):e instanceof ku?new Ar(e.data,e.getAttributes()):e))}class J7e{constructor(e,t){j(this,"model");j(this,"batch");this.model=e,this.batch=t}createText(e,t){return new Ar(e,t)}createElement(e,t){return new Cr(e,t)}createDocumentFragment(){return new bd}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,r=0){if(this._assertWriterUsedCorrectly(),e instanceof Ar&&e.data=="")return;const i=He._createAt(t,r);if(e.parent)if(LJ(e.root,i.root)){this.move(Le._createOn(e),i);return}else{if(e.root.document)throw new _e("model-writer-insert-forbidden-move",this);this.remove(e)}const s=i.root.document?i.root.document.version:null,o=e instanceof bd?e._removeChildren(0,e.childCount):e,a=new As(i,o,s);if(e instanceof Ar&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),e instanceof bd)for(const[c,u]of e.markers){const d=He._createAt(u.root,0),f={range:new Le(u.start._getCombined(d,i),u.end._getCombined(d,i)),usingOperation:!0,affectsData:!0};this.model.markers.has(c)?this.updateMarker(c,f):this.addMarker(c,f)}}insertText(e,t,r,i){t instanceof bd||t instanceof Cr||t instanceof He?this.insert(this.createText(e),t,r):this.insert(this.createText(e,t),r,i)}insertElement(e,t,r,i){t instanceof bd||t instanceof Cr||t instanceof He?this.insert(this.createElement(e),t,r):this.insert(this.createElement(e,t),r,i)}append(e,t){this.insert(e,t,"end")}appendText(e,t,r){t instanceof bd||t instanceof Cr?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),r,"end")}appendElement(e,t,r){t instanceof bd||t instanceof Cr?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),r,"end")}setAttribute(e,t,r){if(this._assertWriterUsedCorrectly(),r instanceof Le){const i=r.getMinimalFlatRanges();for(const s of i)MJ(this,e,t,s)}else DJ(this,e,t,r)}setAttributes(e,t){for(const[r,i]of hm(e))this.setAttribute(r,i,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof Le){const r=t.getMinimalFlatRanges();for(const i of r)MJ(this,e,null,i)}else DJ(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=r=>{for(const i of r.getAttributeKeys())this.removeAttribute(i,r)};if(!(e instanceof Le))t(e);else for(const r of e.getItems())t(r)}move(e,t,r){if(this._assertWriterUsedCorrectly(),!(e instanceof Le))throw new _e("writer-move-invalid-range",this);if(!e.isFlat)throw new _e("writer-move-range-not-flat",this);const i=He._createAt(t,r);if(i.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!LJ(e.root,i.root))throw new _e("writer-move-different-document",this);const s=e.root.document?e.root.document.version:null,o=new Un(e.start,e.end.offset-e.start.offset,i,s);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();const r=(e instanceof Le?e:Le._createOn(e)).getMinimalFlatRanges().reverse();for(const i of r)this._addOperationForAffectedMarkers("move",i),Q7e(i.start,i.end.offset-i.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,r=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Cr))throw new _e("writer-merge-no-element-before",this);if(!(r instanceof Cr))throw new _e("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,r){return this.model.createPositionFromPath(e,t,r)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,r=e.nodeAfter;this.move(Le._createIn(r),He._createAt(t,"end")),this.remove(r)}_merge(e){const t=He._createAt(e.nodeBefore,"end"),r=He._createAt(e.nodeAfter,0),i=e.root.document.graveyard,s=new He(i,[0]),o=e.root.document.version,a=new Ci(r,e.nodeAfter.maxOffset,t,s,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Cr))throw new _e("writer-rename-not-element-instance",this);const r=e.root.document?e.root.document.version:null,i=new Ia(He._createBefore(e),e.name,t,r);this.batch.addOperation(i),this.model.applyOperation(i)}split(e,t){this._assertWriterUsedCorrectly();let r=e.parent;if(!r.parent)throw new _e("writer-split-element-no-parent",this);if(t||(t=r.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new _e("writer-split-invalid-limit-element",this);let i,s;do{const o=r.root.document?r.root.document.version:null,a=r.maxOffset-e.offset,c=cr.getInsertionPosition(e),u=new cr(e,a,c,null,o);this.batch.addOperation(u),this.model.applyOperation(u),!i&&!s&&(i=r,s=e.parent.nextSibling),e=this.createPositionAfter(e.parent),r=e.parent}while(r!==t);return{position:e,range:new Le(He._createAt(i,"end"),He._createAt(s,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new _e("writer-wrap-range-not-flat",this);const r=t instanceof Cr?t:new Cr(t);if(r.childCount>0)throw new _e("writer-wrap-element-not-empty",this);if(r.parent!==null)throw new _e("writer-wrap-element-attached",this);this.insert(r,e.start);const i=new Le(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(i,He._createAt(r,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new _e("writer-unwrap-element-no-parent",this);this.move(Le._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new _e("writer-addmarker-no-usingoperation",this);const r=t.usingOperation,i=t.range,s=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new _e("writer-addmarker-marker-exists",this);if(!i)throw new _e("writer-addmarker-no-range",this);return r?(fk(this,e,null,i,s),this.model.markers.get(e)):this.model.markers._set(e,i,r,s)}updateMarker(e,t){this._assertWriterUsedCorrectly();const r=typeof e=="string"?e:e.name,i=this.model.markers.get(r);if(!i)throw new _e("writer-updatemarker-marker-not-exists",this);if(!t){Yn("writer-updatemarker-reconvert-using-editingcontroller",{markerName:r}),this.model.markers._refresh(i);return}const s=typeof t.usingOperation=="boolean",o=typeof t.affectsData=="boolean",a=o?t.affectsData:i.affectsData;if(!s&&!t.range&&!o)throw new _e("writer-updatemarker-wrong-options",this);const c=i.getRange(),u=t.range?t.range:c;if(s&&t.usingOperation!==i.managedUsingOperations){t.usingOperation?fk(this,r,null,u,a):(fk(this,r,c,null,a),this.model.markers._set(r,u,void 0,a));return}i.managedUsingOperations?fk(this,r,c,u,a):this.model.markers._set(r,u,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new _e("writer-removemarker-no-marker",this);const r=this.model.markers.get(t);if(!r.managedUsingOperations){this.model.markers._remove(t);return}const i=r.getRange();fk(this,t,i,null,r.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const r=this.model.document.getRoot(e);if(r&&r.isAttached())throw new _e("writer-addroot-root-exists",this);const i=this.model.document,s=new ah(e,t,!0,i,i.version);return this.batch.addOperation(s),this.model.applyOperation(s),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new _e("writer-detachroot-no-root",this);for(const s of this.model.markers)s.getRange().root===t&&this.removeMarker(s);for(const s of t.getAttributeKeys())this.removeAttribute(s,t);this.remove(this.createRangeIn(t));const r=this.model.document,i=new ah(t.rootName,t.name,!1,r,r.version);this.batch.addOperation(i),this.model.applyOperation(i)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[r,i]of hm(e))this._setSelectionAttribute(r,i)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const r=this.model.document.selection;if(r.isCollapsed&&r.anchor.parent.isEmpty){const i=Lu._getStoreAttributeKey(e);this.setAttribute(i,t,r.anchor.parent)}r._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const r=Lu._getStoreAttributeKey(e);this.removeAttribute(r,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new _e("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const r of this.model.markers){if(!r.managedUsingOperations)continue;const i=r.getRange();let s=!1;if(e==="move"){const o=t;s=o.containsPosition(i.start)||o.start.isEqual(i.start)||o.containsPosition(i.end)||o.end.isEqual(i.end)}else{const o=t,a=o.nodeBefore,c=o.nodeAfter,u=i.start.parent==a&&i.start.isAtEnd,d=i.end.parent==c&&i.end.offset==0,h=i.end.nodeAfter==c,f=i.start.nodeAfter==c;s=u||d||h||f}s&&this.updateMarker(r.name,{range:i})}}}function MJ(n,e,t,r){const i=n.model,s=i.document;let o=r.start,a,c,u;for(const h of r.getWalker({shallow:!0}))u=h.item.getAttribute(e),a&&c!=u&&(c!=t&&d(),o=a),a=h.nextPosition,c=u;a instanceof He&&a!=o&&c!=t&&d();function d(){const h=new Le(o,a),f=h.root.document?s.version:null,p=new Ii(h,e,c,t,f);n.batch.addOperation(p),i.applyOperation(p)}}function DJ(n,e,t,r){const i=n.model,s=i.document,o=r.getAttribute(e);let a,c;if(o!=t){if(r.root===r){const d=r.document?s.version:null;c=new Jf(r,e,o,t,d)}else{a=new Le(He._createBefore(r),n.createPositionAfter(r));const d=a.root.document?s.version:null;c=new Ii(a,e,o,t,d)}n.batch.addOperation(c),i.applyOperation(c)}}function fk(n,e,t,r,i){const s=n.model,o=s.document,a=new qo(e,t,r,s.markers,!!i,o.version);n.batch.addOperation(a),s.applyOperation(a)}function Q7e(n,e,t,r){let i;if(n.root.document){const s=r.document,o=new He(s.graveyard,[0]);i=new Un(n,e,o,s.version)}else i=new Y7e(n,e);t.addOperation(i),r.applyOperation(i)}function LJ(n,e){return n===e||n instanceof HI&&e instanceof HI}function Z7e(n){n.document.registerPostFixer(e=>eVe(e,n))}function eVe(n,e){const t=e.document.selection,r=e.schema,i=[];let s=!1;for(const o of t.getRanges()){const a=Ez(o,r);a&&!a.isEqual(o)?(i.push(a),s=!0):i.push(o)}return s&&n.setSelection(iVe(i),{backward:t.isBackward}),!1}function Ez(n,e){return n.isCollapsed?tVe(n,e):nVe(n,e)}function tVe(n,e){const t=n.start,r=e.getNearestSelectionRange(t);if(!r){const s=t.getAncestors().reverse().find(o=>e.isObject(o));return s?Le._createOn(s):null}if(!r.isCollapsed)return r;const i=r.start;return t.isEqual(i)?null:new Le(i)}function nVe(n,e){const{start:t,end:r}=n,i=e.checkChild(t,"$text"),s=e.checkChild(r,"$text"),o=e.getLimitElement(t),a=e.getLimitElement(r);if(o===a){if(i&&s)return null;if(rVe(t,r,e)){const h=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),p=r.nodeBefore&&e.isSelectable(r.nodeBefore)?null:e.getNearestSelectionRange(r,"backward"),x=h?h.start:t,y=p?p.end:r;return new Le(x,y)}}const c=o&&!o.is("rootElement"),u=a&&!a.is("rootElement");if(c||u){const d=t.nodeAfter&&r.nodeBefore&&t.nodeAfter.parent===r.nodeBefore.parent,h=c&&(!d||!BJ(t.nodeAfter,e)),f=u&&(!d||!BJ(r.nodeBefore,e));let p=t,x=r;return h&&(p=He._createBefore(FJ(o,e))),f&&(x=He._createAfter(FJ(a,e))),new Le(p,x)}return null}function FJ(n,e){let t=n,r=t;for(;e.isLimit(r)&&r.parent;)t=r,r=r.parent;return t}function rVe(n,e,t){const r=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),i=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return r||i}function iVe(n){const e=[...n],t=new Set;let r=1;for(;r<e.length;){const s=e[r],o=e.slice(0,r);for(const[a,c]of o.entries())if(!t.has(a)){if(s.isEqual(c))t.add(a);else if(s.isIntersecting(c)){t.add(a),t.add(r);const u=s.getJoined(c);e.push(u)}}r++}return e.filter((s,o)=>!t.has(o))}function BJ(n,e){return n&&e.isSelectable(n)}function sVe(n,e,t={}){if(e.isCollapsed)return;const r=e.getFirstRange();if(r.root.rootName=="$graveyard")return;const i=n.schema;n.change(s=>{if(!t.doNotResetEntireContent&&mVe(i,e)){fVe(s,e);return}const o={};if(!t.doNotAutoparagraph){const u=e.getSelectedElement();u&&Object.assign(o,i.getAttributesWithProperty(u,"copyOnReplace",!0))}let a,c;t.doNotFixSelection?(a=ji.fromPosition(r.start,"toPrevious"),c=ji.fromPosition(r.end,"toNext")):[a,c]=oVe(r),a.isTouching(c)||s.remove(s.createRange(a,c)),t.leaveUnmerged||(lVe(s,a,c),i.removeDisallowedAttributes(a.parent.getChildren(),s)),bpe(s,e,a),!t.doNotAutoparagraph&&dVe(i,a)&&xpe(s,a,e,o),a.detach(),c.detach()})}function oVe(n){const e=n.root.document.model,t=n.start;let r=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){const i=aVe(r);if(i&&r.isTouching(e.createPositionAt(i,0))){const s=e.createSelection(n);e.modifySelection(s,{direction:"backward"});const o=s.getLastPosition(),a=e.createRange(o,r);e.hasContent(a,{ignoreMarkers:!0})||(r=o)}}return[ji.fromPosition(t,"toPrevious"),ji.fromPosition(r,"toNext")]}function aVe(n){const e=n.parent,t=e.root.document.model.schema,r=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const i of r){if(t.isLimit(i))return null;if(t.isBlock(i))return i}}function lVe(n,e,t){const r=n.model;if(!Tz(n.model.schema,e,t))return;const[i,s]=uVe(e,t);!i||!s||(!r.hasContent(i,{ignoreMarkers:!0})&&r.hasContent(s,{ignoreMarkers:!0})?ype(n,e,t,i.parent):vpe(n,e,t,i.parent))}function vpe(n,e,t,r){const i=e.parent,s=t.parent;if(!(i==r||s==r)){for(e=n.createPositionAfter(i),t=n.createPositionBefore(s),t.isEqual(e)||n.insert(s,e),n.merge(e);t.parent.isEmpty;){const o=t.parent;t=n.createPositionBefore(o),n.remove(o)}Tz(n.model.schema,e,t)&&vpe(n,e,t,r)}}function ype(n,e,t,r){const i=e.parent,s=t.parent;if(!(i==r||s==r)){for(e=n.createPositionAfter(i),t=n.createPositionBefore(s),t.isEqual(e)||n.insert(i,t);e.parent.isEmpty;){const o=e.parent;e=n.createPositionBefore(o),n.remove(o)}t=n.createPositionBefore(s),cVe(n,t),Tz(n.model.schema,e,t)&&ype(n,e,t,r)}}function cVe(n,e){const t=e.nodeBefore,r=e.nodeAfter;t.name!=r.name&&n.rename(t,r.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(r.getAttributes()),t),n.merge(e)}function Tz(n,e,t){const r=e.parent,i=t.parent;return r==i||n.isLimit(r)||n.isLimit(i)?!1:hVe(e,t,n)}function uVe(n,e){const t=n.getAncestors(),r=e.getAncestors();let i=0;for(;t[i]&&t[i]==r[i];)i++;return[t[i],r[i]]}function dVe(n,e){const t=n.checkChild(e,"$text"),r=n.checkChild(e,"paragraph");return!t&&r}function hVe(n,e,t){const r=new Le(n,e);for(const i of r.getWalker())if(t.isLimit(i.item))return!1;return!0}function xpe(n,e,t,r={}){const i=n.createElement("paragraph");n.model.schema.setAllowedAttributes(i,r,n),n.insert(i,e),bpe(n,t,n.createPositionAt(i,0))}function fVe(n,e){const t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),xpe(n,n.createPositionAt(t,0),e)}function mVe(n,e){const t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const r=e.getFirstRange();return r.start.parent==r.end.parent?!1:n.checkChild(t,"paragraph")}function bpe(n,e,t){e instanceof Lu?n.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pVe(n,e){return n.change(t=>{const r=t.createDocumentFragment(),i=e.getFirstRange();if(!i||i.isCollapsed)return r;const s=i.start.root,o=i.start.getCommonPath(i.end),a=s.getNodeByPath(o);let c;i.start.parent==i.end.parent?c=i:c=t.createRange(t.createPositionAt(a,i.start.path[o.length]),t.createPositionAt(a,i.end.path[o.length]+1));const u=c.end.offset-c.start.offset;for(const d of c.getItems({shallow:!0}))d.is("$textProxy")?t.appendText(d.data,d.getAttributes(),r):t.append(t.cloneElement(d,!0),r);if(c!=i){const d=i._getTransformedByMove(c.start,t.createPositionAt(r,0),u)[0],h=t.createRange(t.createPositionAt(r,0),d.start),f=t.createRange(d.end,t.createPositionAt(r,"end"));$J(f,t),$J(h,t)}return r})}function $J(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(r=>e.createRangeOn(r)).filter(r=>(r.start.isAfter(n.start)||r.start.isEqual(n.start))&&(r.end.isBefore(n.end)||r.end.isEqual(n.end))).forEach(r=>{t.push(r.start.parent),e.remove(r)}),t.forEach(r=>{let i=r;for(;i.parent&&i.isEmpty;){const s=e.createRangeOn(i);i=i.parent,e.remove(s)}})}function gVe(n,e,t){return n.change(r=>{const i=t||n.document.selection;i.isCollapsed||n.deleteContent(i,{doNotAutoparagraph:!0});const s=new vVe(n,r,i.anchor),o=[];let a;if(e.is("documentFragment")){if(e.markers.size){const d=[];for(const[h,f]of e.markers){const{start:p,end:x}=f,y=p.isEqual(x);d.push({position:p,name:h,isCollapsed:y},{position:x,name:h,isCollapsed:y})}d.sort(({position:h},{position:f})=>h.isBefore(f)?1:-1);for(const{position:h,name:f,isCollapsed:p}of d){let x=null,y=null;const b=h.parent===e&&h.isAtStart,_=h.parent===e&&h.isAtEnd;!b&&!_?(x=r.createElement("$marker"),r.insert(x,h)):p&&(y=b?"start":"end"),o.push({name:f,element:x,collapsed:y})}}a=e.getChildren()}else a=[e];s.handleNodes(a);let c=s.getSelectionRange();if(e.is("documentFragment")&&o.length){const d=c?Pl.fromRange(c):null,h={};for(let f=o.length-1;f>=0;f--){const{name:p,element:x,collapsed:y}=o[f],b=!h[p];if(b&&(h[p]=[]),x){const _=r.createPositionAt(x,"before");h[p].push(_),r.remove(x)}else{const _=s.getAffectedRange();if(!_){y&&h[p].push(s.position);continue}y?h[p].push(_[y]):h[p].push(b?_.start:_.end)}}for(const[f,[p,x]]of Object.entries(h))p&&x&&p.root===x.root&&p.root.document&&!r.model.markers.has(f)&&r.addMarker(f,{usingOperation:!0,affectsData:!0,range:new Le(p,x)});d&&(c=d.toRange(),d.detach())}/* istanbul ignore else -- @preserve */c&&(i instanceof Lu?r.setSelection(c):i.setTo(c));const u=s.getAffectedRange()||n.createRange(i.anchor);return s.destroy(),u})}class vVe{constructor(e,t,r){j(this,"model");j(this,"writer");j(this,"position");j(this,"canMergeWith");j(this,"schema");j(this,"_documentFragment");j(this,"_documentFragmentPosition");j(this,"_firstNode",null);j(this,"_lastNode",null);j(this,"_lastAutoParagraph",null);j(this,"_filterAttributesOf",[]);j(this,"_affectedStart",null);j(this,"_affectedEnd",null);j(this,"_nodeToSelect",null);this.model=e,this.writer=t,this.position=r,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),r=this.writer.createPositionAfter(e);if(r.isAfter(t)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new _e("insertcontent-invalid-insertion-position",this);this.position=r,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Le._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Le(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=ji.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new _e("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=ji.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=ji.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof Cr)||!this._canMergeLeft(e))return;const t=ji._createBefore(e);t.stickiness="toNext";const r=ji.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=ji._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=ji._createAt(t.nodeBefore,"end","toNext")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof Cr)||!this._canMergeRight(e))return;const t=ji._createAfter(e);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new _e("insertcontent-invalid-insertion-position",this);this.position=He._createAt(t.nodeBefore,"end");const r=ji.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=ji._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=ji._createAt(t.nodeBefore,0,"toPrevious")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof Cr&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof Cr&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();const e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const r=this.position.parent;this.position=this.writer.createPositionBefore(r),r.isEmpty&&r.parent===t&&this.writer.remove(r)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const r=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=r,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function yVe(n,e,t,r={}){if(!n.schema.isObject(e))throw new _e("insertobject-element-not-an-object",n,{object:e});const i=t||n.document.selection;let s=i;r.findOptimalPosition&&n.schema.isBlock(e)&&(s=n.createSelection(n.schema.findOptimalInsertionRange(i,r.findOptimalPosition)));const o=Ra(i.getSelectedBlocks()),a={};return o&&Object.assign(a,n.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),n.change(c=>{s.isCollapsed||n.deleteContent(s,{doNotAutoparagraph:!0});let u=e;const d=s.anchor.parent;!n.schema.checkChild(d,e)&&n.schema.checkChild(d,"paragraph")&&n.schema.checkChild("paragraph",e)&&(u=c.createElement("paragraph"),c.insert(e,u)),n.schema.setAllowedAttributes(u,a,c);const h=n.insertContent(u,s);return h.isCollapsed||r.setSelection&&xVe(c,e,r.setSelection,a),h})}function xVe(n,e,t,r){const i=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new _e("insertobject-invalid-place-parameter-value",i);let s=e.nextSibling;if(i.schema.isInline(e)){n.setSelection(e,"after");return}!(s&&i.schema.checkChild(s,"$text"))&&i.schema.checkChild(e.parent,"paragraph")&&(s=n.createElement("paragraph"),i.schema.setAllowedAttributes(s,r,n),i.insertContent(s,n.createPositionAfter(e))),s&&n.setSelection(s,0)}const bVe=' ,.?!:;"-()';function wVe(n,e,t={}){const r=n.schema,i=t.direction!="backward",s=t.unit?t.unit:"character",o=!!t.treatEmojiAsSingleUnit,a=e.focus,c=new Wf({boundaries:CVe(a,i),singleCharacters:!0,direction:i?"forward":"backward"}),u={walker:c,schema:r,isForward:i,unit:s,treatEmojiAsSingleUnit:o};let d;for(;d=c.next();){if(d.done)return;const h=_Ve(u,d.value);if(h){e instanceof Lu?n.change(f=>{f.setSelectionFocus(h)}):e.setFocus(h);return}}}function _Ve(n,e){const{isForward:t,walker:r,unit:i,schema:s,treatEmojiAsSingleUnit:o}=n,{type:a,item:c,nextPosition:u}=e;if(a=="text")return n.unit==="word"?kVe(r,t):SVe(r,i,o);if(a==(t?"elementStart":"elementEnd")){if(s.isSelectable(c))return He._createAt(c,t?"after":"before");if(s.checkChild(u,"$text"))return u}else{if(s.isLimit(c)){r.skip(()=>!0);return}if(s.checkChild(u,"$text"))return u}}function SVe(n,e,t){const r=n.position.textNode;if(r){const i=r.data;let s=n.position.offset-r.startOffset;for(;gz(i,s)||e=="character"&&vz(i,s)||t&&Rme(i,s);)n.next(),s=n.position.offset-r.startOffset}return n.position}function kVe(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){const r=n.position.offset-t.startOffset;if(TVe(t,r,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(EVe(t.data,r,e))break;n.next()}}return n.position}function CVe(n,e){const t=n.root,r=He._createAt(t,e?"end":0);return e?new Le(n,r):new Le(r,n)}function EVe(n,e,t){const r=e+(t?0:-1);return bVe.includes(n.charAt(r))}function TVe(n,e,t){return e===(t?n.offsetSize:0)}class AVe extends Tr(){constructor(){super();j(this,"markers");j(this,"document");j(this,"schema");j(this,"_pendingChanges");j(this,"_currentWriter");this.markers=new K7e,this.document=new G7e(this),this.schema=new u7e,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,r)=>{r[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),Z7e(this),this.document.registerPostFixer(ape),this.on("insertContent",(t,[r,i])=>{t.return=gVe(this,r,i)}),this.on("insertObject",(t,[r,i,s])=>{t.return=yVe(this,r,i,s)}),this.on("canEditAt",t=>{const r=!this.document.isReadOnly;t.return=r,r||t.stop()})}change(t){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new fb,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(r){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(r,this)}}enqueueChange(t,r){try{t?typeof t=="function"?(r=t,t=new fb):t instanceof fb||(t=new fb(t)):t=new fb,this._pendingChanges.push({batch:t,callback:r}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(i,this)}}applyOperation(t){t._execute()}insertContent(t,r,i,...s){const o=C5(r,i);return this.fire("insertContent",[t,o,i,...s])}insertObject(t,r,i,s,...o){const a=C5(r,i);return this.fire("insertObject",[t,a,s,s,...o])}deleteContent(t,r){sVe(this,t,r)}modifySelection(t,r){wVe(this,t,r)}getSelectedContent(t){return pVe(this,t)}hasContent(t,r={}){const i=t instanceof Le?t:Le._createIn(t);if(i.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:o=!1}=r;if(!o){for(const a of this.markers.getMarkersIntersectingRange(i))if(a.affectsData)return!0}for(const a of i.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(s){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(t){const r=C5(t);return this.fire("canEditAt",[r])}createPositionFromPath(t,r,i){return new He(t,r,i)}createPositionAt(t,r){return He._createAt(t,r)}createPositionAfter(t){return He._createAfter(t)}createPositionBefore(t){return He._createBefore(t)}createRange(t,r){return new Le(t,r)}createRangeIn(t){return Le._createIn(t)}createRangeOn(t){return Le._createOn(t)}createSelection(...t){return new Al(...t)}createBatch(t){return new fb(t)}createOperationFromJSON(t){return D7e.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const r=this._pendingChanges[0].batch;this._currentWriter=new J7e(this,r);const i=this._pendingChanges[0].callback(this._currentWriter);t.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}}function C5(n,e){if(n)return n instanceof Al||n instanceof Lu?n:n instanceof mx?e||e===0?new Al(n,e):n.is("rootElement")?new Al(n,"in"):new Al(n,"on"):new Al(n)}class NVe extends Em{constructor(){super(...arguments);j(this,"domEventType","click")}onDomEvent(t){this.fire(t.type,t)}}class wpe extends Em{constructor(){super(...arguments);j(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(t){this.fire(t.type,t)}}class jVe extends Em{constructor(){super(...arguments);j(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(t){this.fire(t.type,t)}}class _pe extends Em{constructor(){super(...arguments);j(this,"domEventType",["pointerdown","pointerup","pointermove"])}onDomEvent(t){this.fire(t.type,t)}}class Az{constructor(e){j(this,"document");this.document=e}createDocumentFragment(e){return new F0(this.document,e)}createElement(e,t,r){return new Du(this.document,e,t,r)}createText(e){return new Ui(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,r){return r._insertChild(e,t)}removeChildren(e,t,r){return r._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const r=e.parent;if(r){const i=r.getChildIndex(e);return this.removeChildren(i,1,r),this.insertChild(i,t,r),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const r=t.getChildIndex(e);this.remove(e),this.insertChild(r,e.getChildren(),t)}}rename(e,t){const r=new Du(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,r)?r:null}setAttribute(e,t,r){r._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,r){Jd(e)&&r===void 0?t._setStyle(e):r._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,r){r._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return it._createAt(e,t)}createPositionAfter(e){return it._createAfter(e)}createPositionBefore(e){return it._createBefore(e)}createRange(e,t){return new Qt(e,t)}createRangeOn(e){return Qt._createOn(e)}createRangeIn(e){return Qt._createIn(e)}createSelection(...e){return new Eu(...e)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Spe{constructor(e){j(this,"crashes",[]);j(this,"state","initializing");j(this,"_crashNumberLimit");j(this,"_now",Date.now);j(this,"_minimumNonErrorTimePeriod");j(this,"_boundErrorHandler");j(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const r="error"in t?t.error:t.reason;r instanceof Error&&this._handleError(r,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(r=>r!==t)}_fire(e,...t){const r=this._listeners[e]||[];for(const i of r)i.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function m$(n,e=new Set){const t=[n],r=new Set;let i=0;for(;t.length>i;){const s=t[i++];if(!(r.has(s)||!PVe(s)||e.has(s)))if(r.add(s),Symbol.iterator in s)try{for(const o of s)t.push(o)}catch{}else for(const o in s)o!=="defaultValue"&&t.push(s[o])}return r}function PVe(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function kpe(n,e,t=new Set){if(n===e&&IVe(n))return!0;const r=m$(n,t),i=m$(e,t);for(const s of r)if(i.has(s))return!0;return!1}function IVe(n){return typeof n=="object"&&n!==null}class Cpe extends Spe{constructor(t,r={}){super(r);j(this,"_editor",null);j(this,"_lifecyclePromise",null);j(this,"_throttledSave");j(this,"_data");j(this,"_lastDocumentVersion");j(this,"_elementOrData");j(this,"_initUsingData",!0);j(this,"_editables",{});j(this,"_config");j(this,"_excludedProps");this._throttledSave=DI(this._save.bind(this),typeof r.saveInterval=="number"?r.saveInterval:5e3),t&&(this._creator=(i,s)=>t.create(i,s)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},r=[],i=this._config.rootsAttributes||{},s={};for(const[a,c]of Object.entries(this._data.roots))c.isLoaded?(t[a]="",s[a]=i[a]||{}):r.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:r,rootsAttributes:s,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(OVe),this._initUsingData?this.create(t,o,o.context):Bg(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,r=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData=typeof t=="string"||Object.keys(t).length>0&&typeof Object.values(t)[0]=="string",this._config=this._cloneEditorConfiguration(r)||{},this._config.context=i,this._creator(t,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,r=t.model.document.roots.filter(c=>c.isAttached()&&c.rootName!="$graveyard"),{plugins:i}=t,s=i.has("CommentsRepository")&&i.get("CommentsRepository"),o=i.has("TrackChanges")&&i.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};r.forEach(c=>{a.roots[c.rootName]={content:JSON.stringify(Array.from(c.getChildren())),attributes:JSON.stringify(Array.from(c.getAttributes())),isLoaded:c._isLoaded}});for(const c of t.model.markers)c._affectsData&&(a.markers[c.name]={rangeJSON:c.getRange().toJSON(),usingOperation:c._managedUsingOperations,affectsData:c._affectsData});return s&&(a.commentThreads=JSON.stringify(s.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const t={};for(const r of this.editor.model.document.getRootNames()){const i=this.editor.ui.getEditableElement(r);i&&(t[r]=i)}return t}_isErrorComingFromThisItem(t){return kpe(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return RM(t,(r,i)=>{if(Bg(r)||i==="context")return r})}}class OVe{constructor(e){j(this,"editor");j(this,"_data");this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const r=e.createElement(t.name,t.attributes);if(t.children)for(const i of t.children)r._appendChild(this._createNode(e,i));return r}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([r,{content:i,attributes:s}])=>{const o=JSON.parse(i),a=JSON.parse(s),c=t.model.document.getRoot(r);for(const[u,d]of a)e.setAttribute(u,d,c);for(const u of o){const d=this._createNode(e,u);e.insert(d,c,"end")}}),Object.entries(this._data.markers).forEach(([r,i])=>{const{document:s}=t.model,{rangeJSON:{start:o,end:a},...c}=i,u=s.getRoot(o.root),d=e.createPositionFromPath(u,o.path,o.stickiness),h=e.createPositionFromPath(u,a.path,a.stickiness),f=e.createRange(d,h);e.addMarker(r,{range:f,...c})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);if(this.editor.plugins.has("CommentsRepository")){const r=this.editor.plugins.get("CommentsRepository");for(const i of r.getCommentThreads())r._removeCommentThread({threadId:i.id});e.forEach(i=>{const s=this.editor.config.get("collaboration.channelId");this.editor.plugins.get("CommentsRepository").addCommentThread({channelId:s,...i})})}if(this.editor.plugins.has("TrackChangesEditing")){const r=this.editor.plugins.get("TrackChangesEditing");for(const i of r.getSuggestions())r._removeSuggestion(i);t.forEach(i=>{r.addSuggestionData(i)})}}}const OC=Symbol("MainQueueId");class RVe extends Spe{constructor(t,r={}){super(r);j(this,"_watchdogs",new Map);j(this,"_watchdogConfig");j(this,"_context",null);j(this,"_contextProps",new Set);j(this,"_actionQueues",new MVe);j(this,"_contextConfig");j(this,"_item");this._watchdogConfig=r,this._creator=i=>t.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(OC,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const r=VJ(t);return Promise.all(r.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let s;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return s=new Cpe(null,this._watchdogConfig),s.setCreator(i.creator),s._setExcludedProperties(this._contextProps),i.destructor&&s.setDestructor(i.destructor),this._watchdogs.set(i.id,s),s.on("error",(o,{error:a,causesRestart:c})=>{this._fire("itemError",{itemId:i.id,error:a}),c&&this._actionQueues.enqueue(i.id,()=>new Promise(u=>{const d=()=>{s.off("restart",d),this._fire("itemRestart",{itemId:i.id}),u()};s.on("restart",d)}))}),s.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(t){const r=VJ(t);return Promise.all(r.map(i=>this._actionQueues.enqueue(i,()=>{const s=this._getWatchdog(i);return this._watchdogs.delete(i),s.destroy()})))}destroy(){return this._actionQueues.enqueue(OC,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(OC,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=m$(this._context),Promise.all(Array.from(this._watchdogs.values()).map(r=>(r._setExcludedProperties(this._contextProps),r.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(r=>r.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const r=this._watchdogs.get(t);if(!r)throw new Error(`Item with the given id was not registered: ${t}.`);return r}_isErrorComingFromThisItem(t){for(const r of this._watchdogs.values())if(r._isErrorComingFromThisItem(t))return!1;return kpe(this._context,t.context)}}class MVe{constructor(){j(this,"_onEmptyCallbacks",[]);j(this,"_queues",new Map);j(this,"_activeActions",0)}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const r=e===OC;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const s=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(OC),this._queues.get(e)])).then(t),o=s.catch(()=>{});return this._queues.set(e,o),s.finally(()=>{this._activeActions--,this._queues.get(e)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function VJ(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class gt extends Tr(){constructor(t){super();j(this,"editor");j(this,"_disableStack",new Set);this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",UJ,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",UJ),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function UJ(n){n.return=!1,n.stop()}let ci=class extends Tr(){constructor(t){super();j(this,"editor");j(this,"_isEnabledBasedOnSelection");j(this,"_affectsData");j(this,"_disableStack");this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",r=>{if(!this.affectsData)return;const i=t.model.document.selection,o=!(i.getFirstPosition().root.rootName=="$graveyard")&&t.model.canEditAt(i);(t.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(r.return=!1,r.stop())},{priority:"highest"}),this.on("execute",r=>{this.isEnabled||r.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",zJ,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",zJ),this.refresh())}execute(...t){}destroy(){this.stopListening()}};function zJ(n){n.return=!1,n.stop()}class DVe{constructor(){j(this,"_commands");this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const r=this.get(e);if(!r)throw new _e("commandcollection-command-not-found",this,{commandName:e});return r.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class Epe extends dr(){constructor(t,r=[],i=[]){super();j(this,"_context");j(this,"_plugins",new Map);j(this,"_availablePlugins");j(this,"_contextPlugins");this._context=t,this._availablePlugins=new Map;for(const s of r)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,o]of i)this._contextPlugins.set(s,o),this._contextPlugins.set(o,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const t of this._plugins)typeof t[0]=="function"&&(yield t)}get(t){const r=this._plugins.get(t);if(!r){let i=t;throw typeof t=="function"&&(i=t.pluginName||t.name),new _e("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return r}has(t){return this._plugins.has(t)}init(t,r=[],i=[]){const s=this,o=this._context;x(t),b(t);const a=t.filter(P=>!f(P,r)),c=[...y(a)];N(c,i);const u=T(c);return E(u,"init").then(()=>E(u,"afterInit")).then(()=>u);function d(P){return typeof P=="function"}function h(P){return d(P)&&!!P.isContextPlugin}function f(P,M){return M.some(O=>O===P||p(P)===O||p(O)===P)}function p(P){return d(P)?P.pluginName||P.name:P}function x(P,M=new Set){P.forEach(O=>{d(O)&&(M.has(O)||(M.add(O),O.pluginName&&!s._availablePlugins.has(O.pluginName)&&s._availablePlugins.set(O.pluginName,O),O.requires&&x(O.requires,M)))})}function y(P,M=new Set){return P.map(O=>d(O)?O:s._availablePlugins.get(O)).reduce((O,q)=>M.has(q)?O:(M.add(q),q.requires&&(b(q.requires,q),y(q.requires,M).forEach(D=>O.add(D))),O.add(q)),new Set)}function b(P,M=null){P.map(O=>d(O)?O:s._availablePlugins.get(O)||O).forEach(O=>{_(O,M),C(O,M),k(O,M)})}function _(P,M){if(!d(P))throw M?new _e("plugincollection-soft-required",o,{missingPlugin:P,requiredBy:p(M)}):new _e("plugincollection-plugin-not-found",o,{plugin:P})}function C(P,M){if(h(M)&&!h(P))throw new _e("plugincollection-context-required",o,{plugin:p(P),requiredBy:p(M)})}function k(P,M){if(M&&f(P,r))throw new _e("plugincollection-required",o,{plugin:p(P),requiredBy:p(M)})}function T(P){return P.map(M=>{let O=s._contextPlugins.get(M);return O=O||new M(o),s._add(M,O),O})}function E(P,M){return P.reduce((O,q)=>!q[M]||s._contextPlugins.has(q)?O:O.then(q[M].bind(q)),Promise.resolve())}function N(P,M){for(const O of M){if(typeof O!="function")throw new _e("plugincollection-replace-plugin-invalid-type",null,{pluginItem:O});const q=O.pluginName;if(!q)throw new _e("plugincollection-replace-plugin-missing-name",null,{pluginItem:O});if(O.requires&&O.requires.length)throw new _e("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:q});const D=s._availablePlugins.get(q);if(!D)throw new _e("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:q});const F=P.indexOf(D);if(F===-1){if(s._contextPlugins.has(D))return;throw new _e("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:q})}if(D.requires&&D.requires.length)throw new _e("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:q});P.splice(F,1,O),s._availablePlugins.set(q,O)}}}destroy(){const t=[];for(const[,r]of this)typeof r.destroy=="function"&&!this._contextPlugins.has(r)&&t.push(r.destroy());return Promise.all(t)}_add(t,r){this._plugins.set(t,r);const i=t.pluginName;if(i){if(this._plugins.has(i))throw new _e("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:t});this._plugins.set(i,r)}}}class WI{constructor(e){j(this,"config");j(this,"plugins");j(this,"locale");j(this,"t");j(this,"editors");j(this,"_contextOwner",null);const{translations:t,...r}=e||{};this.config=new wme(r,this.constructor.defaultConfig);const i=this.constructor.builtinPlugins;this.config.define("plugins",i),this.plugins=new Epe(this,i);const s=this.config.get("language")||{};this.locale=new I8e({uiLanguage:typeof s=="string"?s:s.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Gu}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const r of e.concat(t)){if(typeof r!="function")throw new _e("context-initplugins-constructor-only",null,{Plugin:r});if(r.isContextPlugin!==!0)throw new _e("context-initplugins-invalid-plugin",null,{Plugin:r})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new _e("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const r=new this(e);t(r.initPlugins().then(()=>r))})}}j(WI,"defaultConfig"),j(WI,"builtinPlugins");class Tpe extends Tr(){constructor(t){super();j(this,"context");this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class LVe extends Va{constructor(t){super();j(this,"editor");this.editor=t}set(t,r,i={}){if(typeof r=="string"){const s=r;r=(o,a)=>{this.editor.execute(s),a()}}super.set(t,r,i)}}const E5="contentEditing",HJ="common";class FVe{constructor(e){j(this,"keystrokeInfos",new Map);j(this,"_editor");this._editor=e;const t=e.config.get("menuBar.isVisible"),r=e.locale.t;this.addKeystrokeInfoCategory({id:E5,label:r("Content editing keystrokes"),description:r("These keyboard shortcuts allow for quick access to content editing features.")});const i=[{label:r("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:r("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:r("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:r("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:r("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:r("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&i.push({label:r("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:r("User interface and content navigation keystrokes"),description:r("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:i}]})}addKeystrokeInfoCategory({id:e,label:t,description:r,groups:i}){this.keystrokeInfos.set(e,{id:e,label:t,description:r,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:HJ}),i&&i.forEach(s=>{this.addKeystrokeInfoGroup({categoryId:e,...s})})}addKeystrokeInfoGroup({categoryId:e=E5,id:t,label:r,keystrokes:i}){const s=this.keystrokeInfos.get(e);if(!s)throw new _e("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});s.groups.set(t,{id:t,label:r,keystrokes:i||[]})}addKeystrokeInfos({categoryId:e=E5,groupId:t=HJ,keystrokes:r}){if(!this.keystrokeInfos.has(e))throw new _e("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:r});const i=this.keystrokeInfos.get(e);if(!i.groups.has(t))throw new _e("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:r});i.groups.get(t).keystrokes.push(...r)}}function BVe(n){return{sessionId:HVe(),pageSessionId:WVe(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:$Ve(n),plugins:VVe(n.plugins),distribution:UVe(),env:zVe(),integration:Object.create(null),menuBar:{isVisible:!!n.config.get("menuBar.isVisible")},language:{ui:n.locale.uiLanguage,content:n.locale.contentLanguage},toolbar:{main:T5(n.config.get("toolbar")),block:T5(n.config.get("blockToolbar")),balloon:T5(n.config.get("balloonToolbar"))}}}function $Ve(n){return Object.getPrototypeOf(n).constructor.editorName}function VVe(n){return Array.from(n).filter(([e])=>!!e.pluginName).map(([e])=>{const{pluginName:t,isContextPlugin:r,isOfficialPlugin:i,isPremiumPlugin:s}=e;return{isContext:!!r,isOfficial:!!i,isPremium:!!s,name:t}})}function T5(n){if(!n)return;const e=Array.isArray(n)?{items:n}:n,t=s(e.items||[]);return{isMultiline:t.includes("-"),shouldNotGroupWhenFull:!!e.shouldNotGroupWhenFull,items:i(t)};function i(o){return o.filter(a=>a!=="|"&&a!=="-")}function s(o){return o.flatMap(a=>typeof a=="string"?[a]:s(a.items))}}function UVe(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function zVe(){let n="unknown",e="unknown";return Vt.isMac?n="mac":Vt.isWindows?n="windows":Vt.isiOS?n="ios":Vt.isAndroid&&(n="android"),Vt.isGecko?e="gecko":Vt.isBlink?e="blink":Vt.isSafari&&(e="safari"),{os:n,browser:e}}function HVe(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",Xo()),localStorage.getItem("__ckeditor-session-id")}function WVe(){return yt.window.CKEDITOR_PAGE_SESSION_ID=yt.window.CKEDITOR_PAGE_SESSION_ID||Xo(),yt.window.CKEDITOR_PAGE_SESSION_ID}class Tb extends Tr(){constructor(t={}){super();j(this,"accessibility");j(this,"commands");j(this,"config");j(this,"conversion");j(this,"data");j(this,"editing");j(this,"locale");j(this,"model");j(this,"plugins");j(this,"keystrokes");j(this,"t");j(this,"_context");j(this,"_readOnlyLocks");if("sanitizeHtml"in t)throw new _e("editor-config-sanitizehtml-not-supported");const r=this.constructor,{translations:i,...s}=r.defaultConfig||{},{translations:o=i,...a}=t,c=t.language||s.language;this._context=t.context||new WI({language:c,translations:o}),this._context._addEditor(this,!t.context);const u=Array.from(r.builtinPlugins||[]);this.config=new wme(a,s),this.config.define("plugins",u),this.config.define(this._context._getEditorConfig()),h(this.config),this.plugins=new Epe(this,u,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new DVe,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new AVe,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const d=new aBe;this.data=new I7e(this.model,d),this.editing=new c7e(this.model,d),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new R7e([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new LVe(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new FVe(this),f(this);function h(p){let x=p.get("licenseKey");if(!x&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(x=window.CKEDITOR_GLOBAL_LICENSE_KEY,p.set("licenseKey",x)),!x)throw new _e("license-key-missing")}function f(p){const x=p.config.get("licenseKey"),y=window[Symbol.for("cke distribution")]||"sh";function b(M,O){p.enableReadOnlyMode(Symbol("invalidLicense")),p._showLicenseError(M,O)}function _(M){return["exp","jti","vc"].every(q=>q in M)}function C(M){return Object.getOwnPropertyNames(M).sort().filter(D=>D!="vc"&&M[D]!=null).map(D=>M[D])}function k(M){const{hostname:O}=new URL(window.location.href);if(M.includes(O))return!0;const q=O.split(".");return M.filter(D=>D.includes("*")).map(D=>D.split(".")).filter(D=>D.length<=q.length).map(D=>Array(q.length-D.length).fill(D[0]==="*"?"*":"").concat(D)).some(D=>q.every((F,K)=>D[K]===F||D[K]==="*"))}function T(M){const O=M[0].toUpperCase()+M.slice(1),q=M==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${O} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${q} ${M} license of CKEditor 5${M==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(x=="GPL"){y=="cloud"&&b("distributionChannel");return}const E=tJ(x);if(!E){b("invalid");return}if(!_(E)){b("invalid");return}if(E.distributionChannel&&!Ur(E.distributionChannel).includes(y)){b("distributionChannel");return}if(L8e(C(E))!=E.vc.toLowerCase()){b("invalid");return}if(new Date(E.exp*1e3)<zFe){b("expired");return}const P=E.licensedHosts;if(P&&P.length>0&&!k(P)){b("domainLimit");return}if(["evaluation","trial"].includes(E.licenseType)&&E.exp*1e3<Date.now()){b("expired");return}if(["development","evaluation","trial"].includes(E.licenseType)){const{licenseType:M}=E;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[M]||(T(M),window.CKEDITOR_WARNING_SUPPRESSIONS[M]=!0)}if(["evaluation","trial"].includes(E.licenseType)){const M=E.licenseType,O=setTimeout(()=>{b(`${M}Limit`)},6e5);p.on("destroy",()=>{clearTimeout(O)})}E.usageEndpoint&&p.once("ready",()=>{const M={requestId:Xo(),requestTime:Math.round(Date.now()/1e3),license:x,editor:qVe(p)};p._sendUsageRequest(E.usageEndpoint,M).then(O=>{const{status:q,message:D}=O;D&&console.warn(D),q!="ok"&&b("usageLimit")},()=>{$Fe("license-key-validation-endpoint-not-reachable",{url:E.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new _e("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new _e("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new _e("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){const t=this.config,r=t.get("plugins"),i=t.get("removePlugins")||[],s=t.get("extraPlugins")||[],o=t.get("substitutePlugins")||[];return this.plugins.init(r.concat(s),i,o).then(c=>(a(this),c));function a(c){const u=c.config.get("licenseKey");if(u==="GPL")return;const d=tJ(u);if(!d)return;const h=[...c.plugins].map(([f])=>f).find(f=>!f.pluginName||!f.licenseFeatureCode?!1:K8e(d,f.licenseFeatureCode));h&&(c.enableReadOnlyMode(Symbol("invalidLicense")),c._showLicenseError("pluginNotAllowed",h.pluginName))}}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(r=>this.once("ready",r))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...r){try{return this.commands.execute(t,...r)}catch(i){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}_showLicenseError(t,r){setTimeout(()=>{if(t=="invalid")throw new _e("invalid-license-key");if(t=="expired")throw new _e("license-key-expired");if(t=="domainLimit")throw new _e("license-key-domain-limit");if(t=="pluginNotAllowed"){const i=r.replace(/(Editing|UI)$/,""),s=this.plugins.has(i);throw new _e("license-key-plugin-not-allowed",null,{pluginName:s?i:r})}if(t=="featureNotAllowed")throw new _e("license-key-feature-not-allowed",null,{featureName:r});if(t=="evaluationLimit")throw new _e("license-key-evaluation-limit");if(t=="trialLimit")throw new _e("license-key-trial-limit");if(t=="developmentLimit")throw new _e("license-key-development-limit");if(t=="usageLimit")throw new _e("license-key-usage-limit");if(t=="distributionChannel")throw new _e("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(t,r){const i=new Headers({"Content-Type":"application/json"}),s=await fetch(new URL(t),{method:"POST",headers:i,body:JSON.stringify(r)});if(!s.ok)throw new Error(`HTTP Response: ${s.status}`);return s.json()}}j(Tb,"defaultConfig"),j(Tb,"builtinPlugins"),j(Tb,"Context",WI),j(Tb,"EditorWatchdog",Cpe),j(Tb,"ContextWatchdog",RVe);function qVe(n){const e=BVe(n);function t(r,i){if(Fg(e,r)!==void 0)throw new _e("editor-usage-data-path-already-set",{path:r});lme(e,r,i)}return n.fire("collectUsageData",{setUsageData:t}),e}function GVe(n){if(!FI(n.updateSourceElement))throw new _e("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(KVe(e)&&e.form){let t;const r=e.form,i=()=>n.updateSourceElement();FI(r.submit)&&(t=r.submit,r.submit=()=>{i(),t.apply(r)}),r.addEventListener("submit",i),n.on("destroy",()=>{r.removeEventListener("submit",i),t&&(r.submit=t)})}}function KVe(n){return!!n&&n.tagName.toLowerCase()==="textarea"}function YVe(n){class e extends n{constructor(){super(...arguments);j(this,"sourceElement")}updateSourceElement(i){if(!this.sourceElement)throw new _e("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!o){WX(this.sourceElement,"");return}const a=typeof i=="string"?i:this.data.get();WX(this.sourceElement,a)}}return e}class qI extends Tpe{constructor(){super(...arguments);j(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Gu({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if(typeof t!="string")throw new _e("pendingactions-add-invalid-message",this);const r=new(Tr());return r.set("message",t),this._actions.add(r),this.hasAny=!0,r}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let XVe=class extends Tr(){constructor(){super();j(this,"total");j(this,"_reader");j(this,"_data");const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=r=>{this.loaded=r.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const r=this._reader;return this.total=t.size,new Promise((i,s)=>{r.onload=()=>{const o=r.result;this._data=o,i(o)},r.onerror=()=>{s("error")},r.onabort=()=>{s("aborted")},this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}};class Hb extends gt{constructor(){super(...arguments);j(this,"loaders",new Gu);j(this,"_loadersMap",new Map);j(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[qI]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,r)=>r?t/r*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return Yn("filerepository-no-upload-adapter"),null;const r=new WJ(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(r),this._loadersMap.set(t,r),t instanceof Promise&&r.file.then(i=>{this._loadersMap.set(i,r)}).catch(()=>{}),r.on("change:uploaded",()=>{let i=0;for(const s of this.loaders)i+=s.uploaded;this.uploaded=i}),r.on("change:uploadTotal",()=>{let i=0;for(const s of this.loaders)s.uploadTotal&&(i+=s.uploadTotal);this.uploadTotal=i}),r}destroyLoader(t){const r=t instanceof WJ?t:this.getLoader(t);r._destroy(),this.loaders.remove(r),this._loadersMap.forEach((i,s)=>{i===r&&this._loadersMap.delete(s)})}_updatePendingAction(){const t=this.editor.plugins.get(qI);if(this.loaders.length){if(!this._pendingAction){const r=this.editor.t,i=s=>`${r("Upload in progress")} ${parseInt(s)}%.`;this._pendingAction=t.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else t.remove(this._pendingAction),this._pendingAction=null}}class WJ extends Tr(){constructor(t,r){super();j(this,"id");j(this,"_filePromiseWrapper");j(this,"_adapter");j(this,"_reader");this.id=Xo(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=r(this),this._reader=new XVe,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,s)=>s?i/s*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new _e("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(t=>this._reader.read(t)).then(t=>{if(this.status!=="reading")throw this.status;return this.status="idle",t}).catch(t=>{throw t==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:t)})}upload(){if(this.status!="idle")throw new _e("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(t=>(this.uploadResponse=t,this.status="idle",t)).catch(t=>{throw this.status==="aborted"?"aborted":(this.status="error",t)})}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?t=="reading"?this._reader.abort():t=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const r={};return r.promise=new Promise((i,s)=>{r.rejecter=s,r.isFulfilled=!1,t.then(o=>{r.isFulfilled=!0,i(o)}).catch(o=>{r.isFulfilled=!0,s(o)})}),r}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var qJ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103z"/><path d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17m0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10" clip-rule="evenodd"/></svg>',JVe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75"/></svg>',Ape='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.187 17H5.773q-.956 0-1.364-.415-.41-.416-.409-1.323V4.738q0-.926.419-1.332.418-.405 1.354-.406h4.68q1.035 0 1.793.124.76.124 1.36.478.512.296.906.75a3.26 3.26 0 0 1 .808 2.162q0 2.102-2.167 3.075 2.846.879 2.847 3.421a3.76 3.76 0 0 1-2.296 3.504 6 6 0 0 1-1.517.377q-.857.11-2 .11zm-.217-6.217H7v4.087h3.069q2.965 0 2.965-2.072 0-1.061-.768-1.537-.768-.478-2.296-.478M7 5.13v3.619h2.606q1.093 0 1.69-.2a1.6 1.6 0 0 0 .91-.765q.247-.4.247-.897 0-1.06-.778-1.409-.778-.348-2.375-.348z"/></svg>',QVe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75m6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75"/></svg>',ZVe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414z"/></svg>',e9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.972 16.615a1 1 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a1 1 0 0 1-.745.292"/></svg>',t9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7zM0 7h1v2H0zm15 0h1v2h-1zm-8 8h2v1H7z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',n9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m-7 6.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',FM='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136z"/></svg>',r9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1zM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1zm-5.655 6a2.13 2.13 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7"/></svg>',i9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a3 3 0 0 1-.414-.287 3 3 0 0 1-1.055-2.03 3 3 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.13 2.13 0 0 0-1.875-.978"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/></svg>',s9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822zM14 5V2l3.3 3zm-3.692 12.5q.093.157.213.303L11.52 19H8v-.876a2.24 2.24 0 0 0 1.82-.624zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',o9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m9.586 14.633.021.004q-.054.502.393.962.123.125.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15q.711-.106 1.005-.334.235-.182.404-.597l2.416-9.55a1.05 1.05 0 0 0-.281-.823 1.1 1.1 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195q-.564.084-.823.296-.323.263-.623.79z"/></svg>',a9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184"/></svg>',l9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 42"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098s-4.538-.083-4.538-1.678 2.032-3.43 4.538-4.098c.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556L49 17zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.99 1.99 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17m29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155zM20.6 21.375v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616V37.53zm24.233-16.155v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615V37.53zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35z"/></svg>',c9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 20"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-14.24 1h13.008v12H4.467zm-2.208 1h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003l-.029 1h-.974zm16.448 0h1.003v1h-1.003zm-16.448 2h.974v1h-.974zm16.448 0h1.003v1h-1.003z"/><path d="M8.374 6.648a.4.4 0 0 1 .395-.4.4.4 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35z"/></svg>',Npe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382z"/></svg>',u9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M3.5 3v5H2V3.7H1v-1h2.5zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001q-.073.607-.333.988-.263.381-1.244 1.312H4.3v1h-4zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75"/></svg>',d9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5M5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1"/></svg>',h9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m7.3 17.37-.061.088a1.52 1.52 0 0 1-.934.535l-4.178.663-.806-4.153a1.5 1.5 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346zM6.07 16.512l-3.276-2.295.53 2.73zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328M8 18.5 9.375 17H19v1.5z"/></svg>',f9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4"/></svg>',m9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1"/></svg>',NA='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',p9e=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,g9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003z"/></svg>',GJ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.75.75 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.8.8 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032z"/></svg>',v9e='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',y9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75m18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75m-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2z"/></svg>',x9e=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`,b9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m12.5 0 5 4.5v15.003h-16V0zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0"/></svg>',w9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1zm10.453 2.61a1.89 1.89 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.9 1.9 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598M7.463 8.163a.6.6 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.63.63 0 0 0-.417-.185m6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.62.62 0 0 0-.42-.165M.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.91.91 0 0 0-.912-.912zM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516zm4.947 0h1.801v4.3h2.7v1.4h-4.5zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9zm-8.517 1.457-.614 2.059h1.262z"/></svg>',_9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.816 11.5 7.038 4.785 4.261 11.5zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254z"/></svg>',Nz='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',S9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8s3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4"/></svg>',KJ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.75.75 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.8.8 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032z"/></svg>',k9e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184m4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06z"/></svg>';const gE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},jpe={};for(const n of Object.keys(gE))jpe[gE[n]]=n;const bt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Qf=(6/29)**3;function pw(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function gw(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(bt)){if(!("channels"in bt[n]))throw new Error("missing channels property: "+n);if(!("labels"in bt[n]))throw new Error("missing channel labels property: "+n);if(bt[n].labels.length!==bt[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=bt[n];delete bt[n].channels,delete bt[n].labels,Object.defineProperty(bt[n],"channels",{value:e}),Object.defineProperty(bt[n],"labels",{value:t})}bt.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=s-i;let a,c;switch(s){case i:{a=0;break}case e:{a=(t-r)/o;break}case t:{a=2+(r-e)/o;break}case r:{a=4+(e-t)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);const u=(i+s)/2;return s===i?c=0:u<=.5?c=o/(s+i):c=o/(2-s-i),[a,c*100,u*100]};bt.rgb.hsv=function(n){let e,t,r,i,s;const o=n[0]/255,a=n[1]/255,c=n[2]/255,u=Math.max(o,a,c),d=u-Math.min(o,a,c),h=function(f){return(u-f)/6/d+1/2};if(d===0)i=0,s=0;else{switch(s=d/u,e=h(o),t=h(a),r=h(c),u){case o:{i=r-t;break}case a:{i=1/3+e-r;break}case c:{i=2/3+t-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,u*100]};bt.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=bt.rgb.hsl(n)[0],s=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,s*100,r*100]};bt.rgb.oklab=function(n){const e=gw(n[0]/255),t=gw(n[1]/255),r=gw(n[2]/255),i=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*r),s=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*r),o=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*r),a=.2104542553*i+.793617785*s-.0040720468*o,c=1.9779984951*i-2.428592205*s+.4505937099*o,u=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,c*100,u*100]};bt.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),s=(1-e-i)/(1-i)||0,o=(1-t-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function C9e(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}bt.rgb.keyword=function(n){const e=jpe[n];if(e)return e;let t=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(gE)){const s=gE[i],o=C9e(n,s);o<t&&(t=o,r=i)}return r};bt.keyword.rgb=function(n){return gE[n]};bt.rgb.xyz=function(n){const e=gw(n[0]/255),t=gw(n[1]/255),r=gw(n[2]/255),i=e*.4124564+t*.3575761+r*.1804375,s=e*.2126729+t*.7151522+r*.072175,o=e*.0193339+t*.119192+r*.9503041;return[i*100,s*100,o*100]};bt.rgb.lab=function(n){const e=bt.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>Qf?t**(1/3):7.787*t+16/116,r=r>Qf?r**(1/3):7.787*r+16/116,i=i>Qf?i**(1/3):7.787*i+16/116;const s=116*r-16,o=500*(t-r),a=200*(r-i);return[s,o,a]};bt.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,s;if(t===0)return s=r*255,[s,s,s];const o=r<.5?r*(1+t):r+t-r*t,a=2*r-o,c=[0,0,0];for(let u=0;u<3;u++)i=e+1/3*-(u-1),i<0&&i++,i>1&&i--,6*i<1?s=a+(o-a)*6*i:2*i<1?s=o:3*i<2?s=a+(o-a)*(2/3-i)*6:s=a,c[u]=s*255;return c};bt.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const s=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=s<=1?s:2-s;const o=(r+t)/2,a=r===0?2*i/(s+i):2*t/(r+t);return[e,a*100,o*100]};bt.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-t),a=255*r*(1-t*s),c=255*r*(1-t*(1-s));switch(r*=255,i){case 0:return[r,c,o];case 1:return[a,r,o];case 2:return[o,r,c];case 3:return[o,a,r];case 4:return[c,o,r];case 5:return[r,o,a]}};bt.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let s,o;o=(2-t)*r;const a=(2-t)*i;return s=t*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};bt.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let s;i>1&&(t/=i,r/=i);const o=Math.floor(6*e),a=1-r;s=6*e-o,(o&1)!==0&&(s=1-s);const c=t+s*(a-t);let u,d,h;switch(o){default:case 6:case 0:{u=a,d=c,h=t;break}case 1:{u=c,d=a,h=t;break}case 2:{u=t,d=a,h=c;break}case 3:{u=t,d=c,h=a;break}case 4:{u=c,d=t,h=a;break}case 5:{u=a,d=t,h=c;break}}return[u*255,d*255,h*255]};bt.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[s*255,o*255,a*255]};bt.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,s,o;return i=e*3.2404542+t*-1.5371385+r*-.4985314,s=e*-.969266+t*1.8760108+r*.041556,o=e*.0556434+t*-.2040259+r*1.0572252,i=pw(i),s=pw(s),o=pw(o),[i*255,s*255,o*255]};bt.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>Qf?e**(1/3):7.787*e+16/116,t=t>Qf?t**(1/3):7.787*t+16/116,r=r>Qf?r**(1/3):7.787*r+16/116;const i=116*t-16,s=500*(e-t),o=200*(t-r);return[i,s,o]};bt.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*r),s=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*r),o=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*r),a=.2104542553*i+.793617785*s-.0040720468*o,c=1.9779984951*i-2.428592205*s+.4505937099*o,u=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,c*100,u*100]};bt.oklab.oklch=function(n){return bt.lab.lch(n)};bt.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=(.999999998*e+.396337792*t+.215803758*r)**3,s=(1.000000008*e-.105561342*t-.063854175*r)**3,o=(1.000000055*e-.089484182*t-1.291485538*r)**3,a=1.227013851*i-.55779998*s+.281256149*o,c=-.040580178*i+1.11225687*s-.071676679*o,u=-.076381285*i-.421481978*s+1.58616322*o;return[a*100,c*100,u*100]};bt.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=(e+.3963377774*t+.2158037573*r)**3,s=(e-.1055613458*t-.0638541728*r)**3,o=(e-.0894841775*t-1.291485548*r)**3,a=pw(4.0767416621*i-3.3077115913*s+.2309699292*o),c=pw(-1.2684380046*i+2.6097574011*s-.3413193965*o),u=pw(-.0041960863*i-.7034186147*s+1.707614701*o);return[a*255,c*255,u*255]};bt.oklch.oklab=function(n){return bt.lch.lab(n)};bt.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,s,o;s=(e+16)/116,i=t/500+s,o=s-r/200;const a=s**3,c=i**3,u=o**3;return s=a>Qf?a:(s-16/116)/7.787,i=c>Qf?c:(i-16/116)/7.787,o=u>Qf?u:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};bt.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(t*t+r*r);return[e,o,i]};bt.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,s=t*Math.cos(i),o=t*Math.sin(i);return[e,s,o]};bt.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let s=e===null?bt.rgb.hsv(n)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(o+=60),o};bt.hsv.ansi16=function(n){return bt.rgb.ansi16(bt.hsv.rgb(n),n[2])};bt.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e>>4===t>>4&&t>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};bt.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[r,i,s]};bt.ansi256.rgb=function(n){if(n=n[0],n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};bt.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};bt.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const r=Number.parseInt(t,16),i=r>>16&255,s=r>>8&255,o=r&255;return[i,s,o]};bt.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),s=Math.min(Math.min(e,t),r),o=i-s;let a;const c=o<1?s/(1-o):0;return o<=0?a=0:i===e?a=(t-r)/o%6:i===t?a=2+(r-e)/o:a=4+(e-t)/o,a/=6,a%=1,[a*360,o*100,c*100]};bt.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};bt.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};bt.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,o=s%1,a=1-o;let c=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=o,i[2]=0;break}case 1:{i[0]=a,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=o;break}case 3:{i[0]=0,i[1]=a,i[2]=1;break}case 4:{i[0]=o,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=a}return c=(1-t)*r,[(t*i[0]+c)*255,(t*i[1]+c)*255,(t*i[2]+c)*255]};bt.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};bt.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};bt.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};bt.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[n[0],i*100,s*100]};bt.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};bt.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};bt.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};bt.gray.hsl=function(n){return[0,0,n[0]]};bt.gray.hsv=bt.gray.hsl;bt.gray.hwb=function(n){return[0,100,n[0]]};bt.gray.cmyk=function(n){return[0,0,0,n[0]]};bt.gray.lab=function(n){return[n[0],0,0]};bt.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};bt.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function E9e(){const n={},e=Object.keys(bt);for(let{length:t}=e,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function T9e(n){const e=E9e(),t=[n];for(e[n].distance=0;t.length>0;){const r=t.pop(),i=Object.keys(bt[r]);for(let{length:s}=i,o=0;o<s;o++){const a=i[o],c=e[a];c.distance===-1&&(c.distance=e[r].distance+1,c.parent=r,t.unshift(a))}}return e}function A9e(n,e){return function(t){return e(n(t))}}function N9e(n,e){const t=[e[n].parent,n];let r=bt[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=A9e(bt[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}function j9e(n){const e=T9e(n),t={},r=Object.keys(e);for(let{length:i}=r,s=0;s<i;s++){const o=r[s];e[o].parent!==null&&(t[o]=N9e(o,e))}return t}const mk={},P9e=Object.keys(bt);function I9e(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function O9e(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let{length:s}=i,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of P9e){mk[n]={},Object.defineProperty(mk[n],"channels",{value:bt[n].channels}),Object.defineProperty(mk[n],"labels",{value:bt[n].labels});const e=j9e(n),t=Object.keys(e);for(const r of t){const i=e[r];mk[n][r]=O9e(i),mk[n][r].raw=I9e(i)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Oc extends Gu{constructor(t=[]){super(t,{idProperty:"viewUid"});j(this,"_parentElement");this.on("add",(r,i,s)=>{this._renderViewIntoCollectionParent(i,s)}),this.on("remove",(r,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const r of this)this._renderViewIntoCollectionParent(r)}delegate(...t){if(!t.length||!R9e(t))throw new _e("ui-viewcollection-delegate-wrong-events",this);return{to:r=>{for(const i of this)for(const s of t)i.delegate(s).to(r);this.on("add",(i,s)=>{for(const o of t)s.delegate(o).to(r)}),this.on("remove",(i,s)=>{for(const o of t)s.stopDelegating(o,r)})}}}_renderViewIntoCollectionParent(t,r){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[r])}remove(t){return super.remove(t)}}function R9e(n){return n.every(e=>typeof e=="string")}const M9e="http://www.w3.org/1999/xhtml";class Tu extends dr(){constructor(t){super();j(this,"ns");j(this,"tag");j(this,"text");j(this,"attributes");j(this,"children");j(this,"eventListeners");j(this,"_isRendered");j(this,"_revertData");Object.assign(this,XJ(YJ(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData=ZJ(),this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new _e("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*t(r){if(r.children)for(const i of r.children)GI(i)?yield i:jz(i)&&(yield*t(i))}yield*t(this)}static bind(t,r){return{to(i,s){return new D9e({eventNameOrFunction:i,attribute:i,observable:t,emitter:r,callback:s})},if(i,s,o){return new Ppe({observable:t,emitter:r,attribute:i,valueIfTrue:s,callback:o})}}}static extend(t,r){if(t._isRendered)throw new _e("template-extend-render",[this,t]);Mpe(t,XJ(YJ(r)))}_renderNode(t){let r;if(t.node?r=this.tag&&this.text:r=this.tag?this.text:!this.text,r)throw new _e("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let r=t.node;return r||(r=t.node=document.createElementNS(this.ns||M9e,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),r}_renderText(t){let r=t.node;return r?t.revertData.text=r.textContent:r=t.node=document.createTextNode(""),bP(this.text)?this._bindToObservable({schema:this.text,updater:F9e(r),data:t}):r.textContent=this.text.join(""),r}_renderAttributes(t){if(!this.attributes)return;const r=t.node,i=t.revertData;for(const s in this.attributes){const o=r.getAttribute(s),a=this.attributes[s];i&&(i.attributes[s]=o);const c=QJ(a)?a[0].ns:null;if(bP(a)){const u=QJ(a)?a[0].value:a;i&&eQ(s)&&u.unshift(o),this._bindToObservable({schema:u,updater:B9e(r,s,c),data:t})}else if(s=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],t);else{i&&o&&eQ(s)&&a.unshift(o);const u=a.map(d=>d&&(d.value||d)).reduce((d,h)=>d.concat(h),[]).reduce(Rpe,"");S_(u)||r.setAttributeNS(c,s,u)}}}_renderStyleAttribute(t,r){const i=r.node;for(const s in t){const o=t[s];bP(o)?this._bindToObservable({schema:[o],updater:$9e(i,s),data:r}):p$(s)?i.style.setProperty(s,o):i.style[s]=o}}_renderElementChildren(t){const r=t.node,i=t.intoFragment?document.createDocumentFragment():r,s=t.isApplying;let o=0;for(const a of this.children)if(Pz(a)){if(!s){a.setParent(r);for(const c of a)i.appendChild(c.element)}}else if(GI(a))s||(a.isRendered||a.render(),i.appendChild(a.element));else if($g(a))i.appendChild(a);else if(s){const c=t.revertData,u=ZJ();c.children.push(u),a._renderNode({intoFragment:!1,node:i.childNodes[o++],isApplying:!0,revertData:u})}else i.appendChild(a.render());t.intoFragment&&r.appendChild(i)}_setUpListeners(t){if(this.eventListeners)for(const r in this.eventListeners){const i=this.eventListeners[r].map(s=>{const[o,a]=r.split("@");return s.activateDomEventListener(o,a,t)});t.revertData&&t.revertData.bindings.push(i)}}_bindToObservable({schema:t,updater:r,data:i}){const s=i.revertData;Ipe(t,r,i);const o=t.filter(a=>!S_(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(t,r,i));s&&s.bindings.push(o)}_revertTemplateFromNode(t,r){for(const s of r.bindings)for(const o of s)o();if(r.text){t.textContent=r.text;return}const i=t;for(const s in r.attributes){const o=r.attributes[s];o===null?i.removeAttribute(s):i.setAttribute(s,o)}for(let s=0;s<r.children.length;++s)this._revertTemplateFromNode(i.childNodes[s],r.children[s])}}class jA{constructor(e){j(this,"attribute");j(this,"observable");j(this,"emitter");j(this,"callback");this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,r){const i=()=>Ipe(e,t,r);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,i),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,i)}}}class D9e extends jA{constructor(t){super(t);j(this,"eventNameOrFunction");this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,r,i){const s=(o,a)=>{(!r||a.target.matches(r))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(i.node,t,s),()=>{this.emitter.stopListening(i.node,t,s)}}}class Ppe extends jA{constructor(t){super(t);j(this,"valueIfTrue");this.valueIfTrue=t.valueIfTrue}getValue(t){const r=super.getValue(t);return S_(r)?!1:this.valueIfTrue||!0}}function bP(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(bP):n instanceof jA):!1}function p$(n){return/^--[a-zA-Z_-][\w-]*$/.test(n)}function L9e(n,e){return n.map(t=>t instanceof jA?t.getValue(e):t)}function Ipe(n,e,{node:t}){const r=L9e(n,t);let i;n.length==1&&n[0]instanceof Ppe?i=r[0]:i=r.reduce(Rpe,""),S_(i)?e.remove():e.set(i)}function F9e(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function B9e(n,e,t){return{set(r){n.setAttributeNS(t,e,r)},remove(){n.removeAttributeNS(t,e)}}}function $9e(n,e){return{set(t){p$(e)?n.style.setProperty(e,t):n.style[e]=t},remove(){p$(e)?n.style.removeProperty(e):n.style[e]=null}}}function YJ(n){return RM(n,t=>{if(t&&(t instanceof jA||jz(t)||GI(t)||Pz(t)))return t})}function XJ(n){if(typeof n=="string"?n=z9e(n):n.text&&H9e(n),n.on&&(n.eventListeners=U9e(n.on),delete n.on),!n.text){n.attributes&&V9e(n.attributes);const e=[];if(n.children)if(Pz(n.children))e.push(n.children);else for(const t of n.children)jz(t)||GI(t)||$g(t)?e.push(t):e.push(new Tu(t));n.children=e}return n}function V9e(n){for(const e in n)n[e].value&&(n[e].value=Ur(n[e].value)),Ope(n,e)}function U9e(n){for(const e in n)Ope(n,e);return n}function z9e(n){return{text:[n]}}function H9e(n){n.text=Ur(n.text)}function Ope(n,e){n[e]=Ur(n[e])}function Rpe(n,e){return S_(e)?n:S_(n)?e:`${n} ${e}`}function JJ(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function Mpe(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),JJ(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),JJ(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new _e("ui-template-extend-children-mismatch",n);let t=0;for(const r of e.children)Mpe(n.children[t++],r)}}function S_(n){return!n&&n!==0}function GI(n){return n instanceof Ut}function jz(n){return n instanceof Tu}function Pz(n){return n instanceof Oc}function QJ(n){return Ac(n[0])&&n[0].ns}function ZJ(){return{children:[],bindings:[],attributes:{}}}function eQ(n){return n=="class"||n=="style"}class Ut extends Pc(Tr()){constructor(t){super();j(this,"element");j(this,"isRendered");j(this,"locale");j(this,"t");j(this,"template");j(this,"_viewCollections");j(this,"_unboundChildren");j(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new Gu,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(r,i)=>{i.locale=t,i.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Tu.bind(this,this)}createCollection(t){const r=new Oc(t);return this._viewCollections.add(r),r}registerChild(t){$l(t)||(t=[t]);for(const r of t)this._unboundChildren.add(r)}deregisterChild(t){$l(t)||(t=[t]);for(const r of t)this._unboundChildren.remove(r)}setTemplate(t){this.template=new Tu(t)}extendTemplate(t){Tu.extend(this.template,t)}render(){if(this.isRendered)throw new _e("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}const tQ={POLITE:"polite",ASSERTIVE:"assertive"};class W9e{constructor(e){j(this,"editor");j(this,"view");this.editor=e,e.once("ready",()=>{for(const t of Object.values(tQ))this.announce("",t)})}announce(e,t=tQ.POLITE){const r=this.editor;if(!r.ui.view)return;this.view||(this.view=new q9e(r.locale),r.ui.view.body.add(this.view));const{politeness:i,isUnsafeHTML:s}=typeof t=="string"?{politeness:t}:t;let o=this.view.regionViews.find(a=>a.politeness===i);o||(o=new G9e(r,i),this.view.regionViews.add(o)),o.announce({announcement:e,isUnsafeHTML:s})}}class q9e extends Ut{constructor(t){super(t);j(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class G9e extends Ut{constructor(t,r){super(t.locale);j(this,"politeness");j(this,"_domConverter");j(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":r,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),t.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=r,this._domConverter=t.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:t,isUnsafeHTML:r}){if(!t.trim().length)return;const i=document.createElement("li");r?this._domConverter.setContentOf(i,t):i.innerText=t,this._listElement.appendChild(i)}get _listElement(){return this.element.querySelector("ul")}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function BM({emitter:n,activator:e,callback:t,contextElements:r,listenerOptions:i}){n.listenTo(document,"mousedown",(s,o)=>{if(!e())return;const a=typeof o.composedPath=="function"?o.composedPath():[],c=typeof r=="function"?r():r;for(const u of c)if(u.contains(o.target)||a.includes(u))return;t()},i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function KI(n){class e extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...r){super(...r),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.template&&this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}function K9e(n){class e extends n{constructor(...i){super(...i);j(this,"_onDragBound",this._onDrag.bind(this));j(this,"_onDragEndBound",this._onDragEnd.bind(this));j(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(yt.document,"mouseup",this._onDragEndBound),this.listenTo(yt.document,"touchend",this._onDragEndBound),this.listenTo(yt.document,"mousemove",this._onDragBound),this.listenTo(yt.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(yt.document,"mouseup",this._onDragEndBound),this.stopListening(yt.document,"touchend",this._onDragEndBound),this.stopListening(yt.document,"mousemove",this._onDragBound),this.stopListening(yt.document,"touchmove",this._onDragBound)}_onDragStart(i,s){if(!this._isHandleElementPressed(s))return;this._attachDragListeners();let o=0,a=0;s instanceof MouseEvent?(o=s.clientX,a=s.clientY):(o=s.touches[0].clientX,a=s.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:a},this.isDragging=!0}_onDrag(i,s){if(!this.isDragging){this._detachDragListeners();return}let o=0,a=0;s instanceof MouseEvent?(o=s.clientX,a=s.clientY):(o=s.touches[0].clientX,a=s.touches[0].clientY),s.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(i){return this.dragHandleElement?this.dragHandleElement===i.target||i.target instanceof HTMLElement&&this.dragHandleElement.contains(i.target):!1}}return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function $M({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}class VM extends Ut{constructor(t){super(t);j(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Xo()}`;const r=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:r.to("for")},children:[{text:r.to("text")}]})}}class Y9e extends Ut{constructor(e,t){super(e);const r=e.t,i=new VM;i.text=r("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":i.id,role:"document",tabindex:-1},children:[wl(document,"p",{},r("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),i]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const r=[wl(document,"h3",{},t.label),...Array.from(t.groups.values()).map(i=>this._createGroup(i)).flat()];return t.description&&r.splice(1,0,wl(document,"p",{},t.description)),wl(document,"section",{},r)})}_createGroup(e){const t=e.keystrokes.sort((i,s)=>i.label.localeCompare(s.label)).map(i=>this._createGroupRow(i)).flat(),r=[wl(document,"dl",{},t)];return e.label&&r.unshift(wl(document,"h4",{},e.label)),r}_createGroupRow(e){const t=this.locale.t,r=wl(document,"dt"),i=wl(document,"dd"),s=J9e(e.keystroke),o=[];for(const a of s)o.push(a.map(X9e).join(""));return r.innerHTML=e.label,i.innerHTML=o.join(", ")+(e.mayRequireFn&&Vt.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[r,i]}}function X9e(n){return $I(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function J9e(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}const yR=class yR extends Ut{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!t)throw new _e("ui-iconview-invalid-svg",this);const r=t.getAttribute("viewBox");r&&(this.viewBox=r);for(const{name:i,value:s}of Array.from(t.attributes))yR.presentationalAttributeNames.includes(i)&&this.element.setAttribute(i,s);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}};j(yR,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let Fu=yR;class Dpe extends Ut{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}class On extends Ut{constructor(t,r=new Dpe){super(t);j(this,"children");j(this,"labelView");j(this,"iconView");j(this,"keystrokeView");j(this,"_focusDelayed",null);const i=this.bindTemplate,s=Xo();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${s}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(r),this.iconView=new Fu,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",a=>!a),i.if("isVisible","ck-hidden",a=>!a),i.to("isOn",a=>a?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",a=>a||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("_ariaChecked"),"aria-pressed":i.to("_ariaPressed"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,c,u)=>!c||nQ(u)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,c,u)=>!c||!nQ(u)?!1:String(!!a)),Vt.isSafari&&(this._focusDelayed||(this._focusDelayed=mz(()=>this.focus(),0)),o.on.mousedown=i.to(()=>{this._focusDelayed()}),o.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(t,r,i,s)=>{i&&!s?this.children.add(this.iconView,0):!i&&s&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new Ut;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",r=>$I(r))}]}),t}_getTooltipString(t,r,i){return t?typeof t=="string"?t:(i&&(i=$I(i)),t instanceof Function?t(r,i):`${r}${i?` (${i})`:""}`):""}}function nQ(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class PA extends Ut{constructor(t,r={}){super(t);j(this,"children");j(this,"iconView");const i=this.bindTemplate;this.set("label",r.label||""),this.set("class",r.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),r.icon&&(this.iconView=new Fu,this.iconView.content=r.icon,this.children.add(this.iconView));const s=new Ut(t);s.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(s)}}class _h extends dr(){constructor(t){super();j(this,"focusables");j(this,"focusTracker");j(this,"keystrokeHandler");j(this,"actions");if(this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const r in t.actions){let i=t.actions[r];typeof i=="string"&&(i=[i]);for(const s of i)t.keystrokeHandler.set(s,(o,a)=>{this[r](),a()},t.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(A5)||null}get last(){return this.focusables.filter(A5).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((r,i)=>{const s=r.element===this.focusTracker.focusedElement;return s&&(t=i),s}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;if(t&&this.focusables.getIndex(t)===this.current){this.fire("forwardCycle");return}t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;if(t&&this.focusables.getIndex(t)===this.current){this.fire("backwardCycle");return}t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}chain(t){const r=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(t,"forwardCycle",i=>{const s=r();this.focusNext(),s!==r()&&i.stop()},{priority:"low"}),this.listenTo(t,"backwardCycle",i=>{const s=r();this.focusPrevious(),s!==r()&&i.stop()},{priority:"low"})}unchain(t){this.stopListening(t)}_focus(t,r){t&&this.focusTracker.focusedElement!==t.element&&t.focus(r)}_getDomFocusableItem(t){const r=this.focusables.length;if(!r)return null;const i=this.current;if(i===null)return this[t===1?"first":"last"];let s=this.focusables.get(i),o=(i+r+t)%r;do{const a=this.focusables.get(o);if(A5(a)){s=a;break}o=(o+r+t)%r}while(o!==i);return s}}function A5(n){return IA(n)&&dm(n.element)}function IA(n){return"focus"in n&&typeof n.focus=="function"}function Q9e(n){return IA(n)&&"focusCycler"in n&&n.focusCycler instanceof _h}class Z9e extends Ut{constructor(t){super(t);j(this,"children");j(this,"keystrokes");j(this,"focusCycler");j(this,"_focusTracker");j(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new Va,this._focusTracker=new Xs,this._focusables=new Oc,this.focusCycler=new _h({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const r of t){const i=new On(this.locale);let s;i.on("execute",()=>r.onExecute()),r.onCreate&&r.onCreate(i);for(s in r)s!="onExecute"&&s!="onCreate"&&i.set(s,r[s]);this.children.add(i)}this._updateFocusCyclableItems()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}class eUe extends Ut{constructor(t){super(t);j(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const Jc={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},rQ=AA("px"),xR=class xR extends K9e(Ut){constructor(t,{getCurrentDomRoot:r,getViewportOffset:i,keystrokeHandlerOptions:s}){super(t);j(this,"parts");j(this,"headerView");j(this,"closeButtonView");j(this,"actionsView");j(this,"contentView");j(this,"keystrokes");j(this,"focusTracker");j(this,"wasMoved",!1);j(this,"_getCurrentDomRoot");j(this,"_getViewportOffset");j(this,"_focusables");j(this,"_focusCycler");const o=this.bindTemplate,a=t.t;this.set("className",""),this.set("ariaLabel",a("Editor dialog")),this.set("isModal",!1),this.set("position",Jc.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=r,this._getViewportOffset=i,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Va,this.focusTracker=new Xs,this._focusables=new Oc,this._focusCycler=new _h({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:s}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",c=>!c),o.if("_isVisible","ck-hidden",c=>!c)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",c=>rQ(c)),left:o.to("_left",c=>rQ(c)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,r)=>{t.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),r())}),this.on("drag",(t,{deltaX:r,deltaY:i})=>{this.wasMoved=!0,this.moveBy(r,i)}),this.listenTo(yt.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(yt.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,r,i)=>{i&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:r,hasCloseButton:i=!0,content:s,actionButtons:o}){r&&(this.headerView=new PA(this.locale,{icon:t}),i&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=r,this.ariaLabel=r,this.parts.add(this.headerView,0)),s&&(s instanceof Ut&&(s=[s]),this.contentView=new eUe(this.locale),this.contentView.children.addMany(s),this.parts.add(this.contentView)),o&&(this.actionsView=new Z9e(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,r){const i=this._getViewportRect(),s=this._getDialogRect();t+s.width>i.right&&(t=i.right-s.width),t<i.left&&(t=i.left),r<i.top&&(r=i.top),this._moveTo(t,r)}_moveTo(t,r){this._left=t,this._top=r}moveBy(t,r){this.moveTo(this._left+t,this._top+r)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let r=this.position,i;this._getCurrentDomRoot()?i=this._getVisibleDomRootRect(t):r=Jc.SCREEN_CENTER;const s=xR.defaultOffset,o=this._getDialogRect();if(this.position!=null){if(typeof this.position=="function"){const a=this.position(o,i);if(a==null){this._moveOffScreen();return}this._moveTo(a.left,a.top);return}switch(r){case Jc.EDITOR_TOP_SIDE:{if(i){const a=this.locale.contentLanguageDirection==="ltr"?i.right-o.width-s:i.left+s;this.moveTo(a,i.top+s)}else this._moveOffScreen();break}case Jc.EDITOR_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),Math.round(i.top+i.height/2-o.height/2)):this._moveOffScreen();break}case Jc.SCREEN_CENTER:{this.moveTo(Math.round((t.width-o.width)/2),Math.round((t.height-o.height)/2));break}case Jc.EDITOR_TOP_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.top+s):this._moveOffScreen();break}case Jc.EDITOR_BOTTOM_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.bottom-o.height-s):this._moveOffScreen();break}case Jc.EDITOR_ABOVE_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.top-o.height-s):this._moveOffScreen();break}case Jc.EDITOR_BELOW_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.bottom+s):this._moveOffScreen();break}}}}_getVisibleDomRootRect(t){let r=new bn(this._getCurrentDomRoot()).getVisible();if(r){if(r=t.getIntersection(r),!r)return null}else return null;return r}_getDialogRect(){return new bn(this.element.firstElementChild)}_getViewportRect(){const t=new bn(yt.window);if(this.isModal)return t;const r={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return t.top+=r.top,t.height-=r.top,t.bottom-=r.bottom,t.height-=r.bottom,t.left+=r.left,t.right-=r.right,t.width-=r.left+r.right,t}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const r of this.contentView.children)IA(r)&&t.push(r);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(r=>{this._focusables.add(r),this.focusTracker.add(r.element),Q9e(r)&&this._focusCycler.chain(r.focusCycler)})}_createCloseButton(){const t=new On(this.locale),r=this.locale.t;return t.set({label:r("Close"),tooltip:!0,icon:ZVe}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}};j(xR,"defaultOffset",15);let vE=xR;var Ea;let Lpe=(Ea=class extends gt{constructor(t){super(t);j(this,"view");j(this,"_onHide");const r=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:r("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),Ea._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,r)=>{this._show(r)}),this.on("show",(t,r)=>{r.onShow&&r.onShow(this)},{priority:"low"}),this.on("hide",()=>{Ea._visibleDialogPlugin&&Ea._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const t=this.editor;t.keystrokes.set("Ctrl+F6",(r,i)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),i())})}_initMultiRootIntegration(){const t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;const r=t.document.differ.getChangedRoots();for(const i of r)i.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:r,title:i,hasCloseButton:s=!0,content:o,actionButtons:a,className:c,isModal:u,position:d,onHide:h,keystrokeHandlerOptions:f}){const p=this.editor;this.view=new vE(p.locale,{getCurrentDomRoot:()=>p.editing.view.getDomRoot(p.model.document.selection.anchor.root.rootName),getViewportOffset:()=>p.ui.viewportOffset,keystrokeHandlerOptions:f});const x=this.view;x.on("close",()=>{this.hide()}),p.ui.view.body.add(x),p.keystrokes.listenTo(x.element),d||(d=u?Jc.SCREEN_CENTER:Jc.EDITOR_CENTER),u&&this._lockBodyScroll(),x.set({position:d,_isVisible:!0,className:c,isModal:u}),x.setupParts({icon:r,title:i,hasCloseButton:s,content:o,actionButtons:a}),this.id=t,h&&(this._onHide=h),this.isOpen=!0,Ea._visibleDialogPlugin=this}hide(){Ea._visibleDialogPlugin&&Ea._visibleDialogPlugin.fire(`hide:${Ea._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const t=this.editor,r=this.view;r.isModal&&this._unlockBodyScroll(),r.contentView&&r.contentView.reset(),t.ui.view.body.remove(r),t.ui.focusTracker.remove(r.element),t.keystrokes.stopListening(r.element),r.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,Ea._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}},j(Ea,"_visibleDialogPlugin"),Ea);class hS extends On{constructor(t,r=new Dpe){super(t,r);j(this,"_checkIconHolderView",new tUe);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",i.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(s,o)=>s||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",t=>this.isToggleable&&t),this.on("change:_hasCheck",(t,r,i)=>{const{children:s,_checkIconHolderView:o}=this;i?s.add(o,0):s.remove(o)})}}class tUe extends Ut{constructor(){super();j(this,"children");j(this,"_checkIconView",this._createCheckIconView());const t=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",t.to("isOn",r=>r?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(t,r,i)=>{const{children:s,_checkIconView:o}=this;i&&!s.has(o)?s.add(o):!i&&s.has(o)&&s.remove(o)})}_createCheckIconView(){const t=new Fu;return t.content=e9e,t.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),t}}class Ua extends hS{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class nUe extends gt{constructor(){super(...arguments);j(this,"contentView",null)}static get requires(){return[Lpe]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.locale.t;t.ui.componentFactory.add("accessibilityHelp",()=>{const i=this._createButton(On);return i.set({tooltip:!0,withText:!1,label:r("Accessibility help")}),i}),t.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const i=this._createButton(Ua);return i.label=r("Accessibility"),i}),t.keystrokes.set("Alt+0",(i,s)=>{this._toggleDialog(),s()}),this._setupRootLabels()}_createButton(t){const r=this.editor,i=r.plugins.get("Dialog"),s=r.locale,o=new t(s);return o.set({keystroke:"Alt+0",icon:qJ,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(i,"id",a=>a==="accessibilityHelp"),o}_setupRootLabels(){const t=this.editor,r=t.editing.view,i=t.t;t.ui.on("ready",()=>{r.change(o=>{for(const a of r.document.roots)s(o,a)}),t.on("addRoot",(o,a)=>{const c=t.editing.view.document.getRoot(a.rootName);r.change(u=>s(u,c))},{priority:"low"})});function s(o,a){const u=[a.getAttribute("aria-label"),i("Press %0 for help.",[$I("Alt+0")])].filter(d=>d).join(". ");o.setAttribute("aria-label",u,a)}}_toggleDialog(){const t=this.editor,r=t.plugins.get("Dialog"),i=t.locale.t;this.contentView||(this.contentView=new Y9e(t.locale,t.accessibility.keystrokeInfos)),r.id==="accessibilityHelp"?r.hide():r.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:qJ,hasCloseButton:!0,content:this.contentView})}}const lc=class lc extends Oc{constructor(t,r=[]){super(r);j(this,"locale");j(this,"_bodyCollectionContainer");this.locale=t}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Tu({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!lc._bodyWrapper||!lc._bodyWrapper.isConnected)&&(lc._bodyWrapper=wl(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(lc._bodyWrapper)),lc._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),lc._bodyWrapper&&!lc._bodyWrapper.childElementCount&&(lc._bodyWrapper.remove(),delete lc._bodyWrapper)}};j(lc,"_bodyWrapper");let g$=lc;const iQ=AA("px"),rUe={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},el=class el extends Ut{constructor(t){super(t);j(this,"content");j(this,"_pinWhenIsVisibleCallback");j(this,"_resizeObserver");const r=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",r.to("position",i=>`ck-balloon-panel_${i}`),r.if("isVisible","ck-balloon-panel_visible"),r.if("withArrow","ck-balloon-panel_with-arrow"),r.to("class")],style:{top:r.to("top",iQ),left:r.to("left",iQ)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){const r=wP(t.target);if(r&&!dm(r))return!1;this.show();const i=el.defaultPositions,s=Object.assign({},{element:this.element,positions:[i.southArrowNorth,i.southArrowNorthMiddleWest,i.southArrowNorthMiddleEast,i.southArrowNorthWest,i.southArrowNorthEast,i.northArrowSouth,i.northArrowSouthMiddleWest,i.northArrowSouthMiddleEast,i.northArrowSouthWest,i.northArrowSouthEast,i.viewportStickyNorth],limiter:yt.document.body,fitInViewport:!0},t),o=el._getOptimalPosition(s)||rUe,a=parseInt(o.left),c=parseInt(o.top),u=o.name,d=o.config||{},{withArrow:h=!0}=d;return this.top=c,this.left=a,this.position=u,this.withArrow=h,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let r=wP(t.target);const i=t.limiter?wP(t.limiter):yt.document.body;if(this.listenTo(yt.document,"scroll",(s,o)=>{const a=o.target,c=r&&a.contains(r),u=i&&a.contains(i);(c||u||!r||!i)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(yt.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(r&&Yr(r)&&(r=r.parentElement),r)){const s=()=>{dm(r)||this.unpin()};this._resizeObserver=new uz(r,s)}return!0}_stopPinning(){this.stopListening(yt.document,"scroll"),this.stopListening(yt.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){const{sideOffset:r=el.arrowSideOffset,heightOffset:i=el.arrowHeightOffset,stickyVerticalOffset:s=el.stickyVerticalOffset,config:o}=t;return{northWestArrowSouthWest:(u,d)=>({top:a(u,d),left:u.left-r,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(u,d)=>({top:a(u,d),left:u.left-d.width*.25-r,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(u,d)=>({top:a(u,d),left:u.left-d.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(u,d)=>({top:a(u,d),left:u.left-d.width*.75+r,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(u,d)=>({top:a(u,d),left:u.left-d.width+r,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(u,d)=>({top:a(u,d),left:u.left+u.width/2-r,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(u,d)=>({top:a(u,d),left:u.left+u.width/2-d.width*.25-r,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(u,d)=>({top:a(u,d),left:u.left+u.width/2-d.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(u,d)=>({top:a(u,d),left:u.left+u.width/2-d.width*.75+r,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(u,d)=>({top:a(u,d),left:u.left+u.width/2-d.width+r,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(u,d)=>({top:a(u,d),left:u.right-r,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(u,d)=>({top:a(u,d),left:u.right-d.width*.25-r,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(u,d)=>({top:a(u,d),left:u.right-d.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(u,d)=>({top:a(u,d),left:u.right-d.width*.75+r,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(u,d)=>({top:a(u,d),left:u.right-d.width+r,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:u=>({top:c(u),left:u.left-r,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(u,d)=>({top:c(u),left:u.left-d.width*.25-r,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(u,d)=>({top:c(u),left:u.left-d.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(u,d)=>({top:c(u),left:u.left-d.width*.75+r,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(u,d)=>({top:c(u),left:u.left-d.width+r,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:u=>({top:c(u),left:u.left+u.width/2-r,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(u,d)=>({top:c(u),left:u.left+u.width/2-d.width*.25-r,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(u,d)=>({top:c(u),left:u.left+u.width/2-d.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(u,d)=>({top:c(u),left:u.left+u.width/2-d.width*.75+r,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(u,d)=>({top:c(u),left:u.left+u.width/2-d.width+r,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:u=>({top:c(u),left:u.right-r,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(u,d)=>({top:c(u),left:u.right-d.width*.25-r,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(u,d)=>({top:c(u),left:u.right-d.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(u,d)=>({top:c(u),left:u.right-d.width*.75+r,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(u,d)=>({top:c(u),left:u.right-d.width+r,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(u,d)=>({top:u.top+u.height/2-d.height/2,left:u.left-d.width-i,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(u,d)=>({top:u.top+u.height/2-d.height/2,left:u.right+i,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(u,d,h)=>{const f=new bn(yt.document.body).getIntersection(h.getVisible());if(!f)return null;const p=f.getVisible();return!u.getIntersection(p)||!(p.top-u.top-s<d.height&&p.bottom-u.bottom<d.height)?null:{top:p.top+s,left:u.left+u.width/2-d.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function a(u,d){return u.top-d.height-i}function c(u){return u.bottom+i}}};j(el,"arrowSideOffset",25),j(el,"arrowHeightOffset",10),j(el,"stickyVerticalOffset",20),j(el,"_getOptimalPosition",dz),j(el,"defaultPositions",el.generatePositions());let Q0=el;function wP(n){return Bg(n)?n:MM(n)?n.commonAncestorContainer:typeof n=="function"?wP(n()):null}const iUe=50,sUe=350;class Fpe extends Pc(){constructor(t,r={}){super();j(this,"editor");j(this,"_balloonView",null);j(this,"_showBalloonThrottled",DI(()=>this._showBalloon(),50,{leading:!0}));j(this,"_lastFocusedEditableElement",null);j(this,"_balloonClass");this.editor=t,this._balloonClass=r.balloonClass,t.on("ready",()=>this._handleEditorReady())}destroy(){const t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const t=this.editor;this._isEnabled()&&t.ui.view&&(t.ui.focusTracker.on("change:isFocused",(r,i,s)=>{this._updateLastFocusedEditableElement(),s?this._showBalloon():this._hideBalloon()}),t.ui.focusTracker.on("change:focusedElement",(r,i,s)=>{this._updateLastFocusedEditableElement(),s&&this._showBalloon()}),t.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const t=this._getBalloonAttachOptions();t&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(t))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const t=this.editor,r=new Q0,i=this._createBadgeContent();return r.content.add(i),this._balloonClass&&(r.class=this._balloonClass),t.ui.view.body.add(r),r}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const t=this._getNormalizedConfig(),r=t.side==="right"?oUe(this._lastFocusedEditableElement,t):aUe(this._lastFocusedEditableElement,t);return{target:this._lastFocusedEditableElement,positions:[r]}}_updateLastFocusedEditableElement(){const t=this.editor,r=t.ui.focusTracker.isFocused,i=t.ui.focusTracker.focusedElement;if(!r||!i){this._lastFocusedEditableElement=null;return}const s=Array.from(t.ui.getEditableElementsNames()).map(o=>t.ui.getEditableElement(o));s.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=s[0]}}function oUe(n,e){return Bpe(n,e,(t,r)=>t.left+t.width-r.width-e.horizontalOffset)}function aUe(n,e){return Bpe(n,e,t=>t.left+e.horizontalOffset)}function Bpe(n,e,t){return(r,i)=>{const s=new bn(n);if(s.width<sUe||s.height<iUe)return null;let o;e.position==="inside"?o=s.bottom-i.height:o=s.bottom-i.height/2,o-=e.verticalOffset;const a=t(s,i),u=r.clone().moveTo(a,o).getIntersection(i.clone().moveTo(a,o)).getVisible();return!u||u.getArea()<i.getArea()?null:{top:o,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}const lUe="Powered by";class cUe extends Fpe{constructor(e){super(e,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const e=this.editor;if(e.config.get("ui.poweredBy.forceVisible"))return!0;const r=e.config.get("licenseKey");if(r=="GPL")return!0;const i=pz(r.split(".")[1]);return i?!i.whiteLabel:!0}_createBadgeContent(){return new uUe(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const e=super._getNormalizedConfig(),t=this.editor.config.get("ui.poweredBy")||{},r=t.position||e.position,i=r==="inside"?5:e.verticalOffset;return{position:r,side:t.side||e.side,label:t.label===void 0?lUe:t.label,verticalOffset:t.verticalOffset!==void 0?t.verticalOffset:i,horizontalOffset:t.horizontalOffset!==void 0?t.horizontalOffset:e.horizontalOffset,forceVisible:!!t.forceVisible}}}class uUe extends Ut{constructor(e,t){super(e);const r=new Fu,i=this.bindTemplate;r.set({content:p9e,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],r],on:{dragstart:i.to(s=>s.preventDefault())}}]})}}class Iz extends On{constructor(t){super(t);j(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new Ut;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}class sQ extends $pe(On){}class dUe extends $pe(hS){}function $pe(n){class e extends n{constructor(...i){super(...i);j(this,"_fileInputView");this._fileInputView=new hUe(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}class hUe extends Ut{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{var r,i;(i=(r=this.element)==null?void 0:r.files)!=null&&i.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class fUe extends Ut{constructor(t,r){super(t);j(this,"buttonView");j(this,"children");const i=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),r&&this.children.addMany(r),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",i.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:i.if("isCollapsed","hidden"),"aria-labelledby":i.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const t=new On(this.locale),r=t.bindTemplate;return t.set({withText:!0,icon:FM}),t.extendTemplate({attributes:{"aria-expanded":r.to("isOn",i=>String(i))}}),t.bind("label").to(this),t.bind("isOn").to(this,"isCollapsed",i=>!i),t.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),t}}class YI extends Ut{constructor(t,r){super(t);j(this,"fieldView");j(this,"labelView");j(this,"statusView");j(this,"fieldWrapperChildren");const i=`ck-labeled-field-view-${Xo()}`,s=`ck-labeled-field-view-status-${Xo()}`;this.fieldView=r(this,i,s),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(s),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,c)=>a||c);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",a=>!a),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const r=new VM(this.locale);return r.for=t,r.bind("text").to(this,"label"),r}_createStatusView(t){const r=new Ut(this.locale),i=this.bindTemplate;return r.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",s=>!s)],id:t,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),r}focus(t){this.fieldView.focus(t)}}class mUe extends Ut{constructor(t){super(t);j(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Xs,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const r=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",r.if("isFocused","ck-input_focused"),r.if("isEmpty","ck-input-text_empty"),r.if("hasError","ck-error")],id:r.to("id"),placeholder:r.to("placeholder"),tabindex:r.to("tabIndex"),readonly:r.to("isReadOnly"),"aria-invalid":r.if("hasError",!0),"aria-describedby":r.to("ariaDescribedById"),"aria-label":r.to("ariaLabel")},on:{input:r.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:r.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(t,r,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=pUe(this.element)}_setDomElementValue(t){this.element.value=!t&&t!==0?"":t}}function pUe(n){return!n.value}class gUe extends mUe{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}class vUe extends gUe{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class yUe extends Ut{constructor(t){super(t);j(this,"children");const r=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",r.to("position",i=>`ck-dropdown__panel_${i}`),r.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:r.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;typeof t.focus=="function"?t.focus():Yn("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;typeof t.focusLast=="function"?t.focusLast():t.focus()}}}const Jb=class Jb extends Ut{constructor(t,r,i){super(t);j(this,"buttonView");j(this,"panelView");j(this,"focusTracker");j(this,"keystrokes");j(this,"listView");j(this,"toolbarView");j(this,"menuView");const s=this.bindTemplate;this.buttonView=r,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Va,this.focusTracker=new Xs,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o)],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[r,i]}),r.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":s.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(r,i,s)=>{if(s)if(this.panelPosition==="auto"){const o=Jb._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(r,i)=>{this.isOpen&&(this.isOpen=!1,i())};this.keystrokes.set("arrowdown",(r,i)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,i())}),this.keystrokes.set("arrowright",(r,i)=>{this.isOpen&&i()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:r,southEast:i,southWest:s,northEast:o,northWest:a,southMiddleEast:c,southMiddleWest:u,northMiddleEast:d,northMiddleWest:h}=Jb.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[i,s,c,u,t,o,a,d,h,r]:[s,i,u,c,t,a,o,h,d,r]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};j(Jb,"defaultPanelPositions",{south:(t,r)=>({top:t.bottom,left:t.left-(r.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,r)=>({top:t.bottom,left:t.left-r.width+t.width,name:"sw"}),southMiddleEast:(t,r)=>({top:t.bottom,left:t.left-(r.width-t.width)/4,name:"sme"}),southMiddleWest:(t,r)=>({top:t.bottom,left:t.left-(r.width-t.width)*3/4,name:"smw"}),north:(t,r)=>({top:t.top-r.height,left:t.left-(r.width-t.width)/2,name:"n"}),northEast:(t,r)=>({top:t.top-r.height,left:t.left,name:"ne"}),northWest:(t,r)=>({top:t.top-r.height,left:t.left-r.width+t.width,name:"nw"}),northMiddleEast:(t,r)=>({top:t.top-r.height,left:t.left-(r.width-t.width)/4,name:"nme"}),northMiddleWest:(t,r)=>({top:t.top-r.height,left:t.left-(r.width-t.width)*3/4,name:"nmw"})}),j(Jb,"_getOptimalPosition",dz);let v$=Jb;class xUe extends On{constructor(t){super(t);j(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",r=>String(r))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Fu;return t.content=FM,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}class Bu extends Ut{constructor(t){super(t);j(this,"children");const r=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",r.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class Oz extends Ut{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class _P extends Ut{constructor(t,r=new VM){super(t);j(this,"labelView");j(this,"items");j(this,"children");const i=this.bindTemplate,s=new fS(t);this.set({label:"",isVisible:!0}),this.labelView=r,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,s]),s.set({role:"group",ariaLabelledBy:r.id}),s.focusTracker.destroy(),s.keystrokes.destroy(),this.items=s.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const t=this.items.find(r=>!(r instanceof Oz));t&&t.focus()}}}class fS extends Ut{constructor(t){super(t);j(this,"focusables");j(this,"items");j(this,"focusTracker");j(this,"keystrokes");j(this,"_focusCycler");j(this,"_listItemGroupToChangeListeners",new WeakMap);const r=this.bindTemplate;this.focusables=new Oc,this.items=this.createCollection(),this.focusTracker=new Xs,this.keystrokes=new Va,this._focusCycler=new _h({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:r.to("role"),"aria-label":r.to("ariaLabel"),"aria-labelledby":r.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const t of this.items)t instanceof _P?this._registerFocusableItemsGroup(t):t instanceof Bu&&this._registerFocusableListItem(t);this.items.on("change",(t,r)=>{for(const i of r.removed)i instanceof _P?this._deregisterFocusableItemsGroup(i):i instanceof Bu&&this._deregisterFocusableListItem(i);for(const i of Array.from(r.added).reverse())i instanceof _P?this._registerFocusableItemsGroup(i,r.index):this._registerFocusableListItem(i,r.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(t,r){this.focusTracker.add(t.element),this.focusables.add(t,r)}_deregisterFocusableListItem(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}_getOnGroupItemsChangeCallback(t){return(r,i)=>{for(const s of i.removed)this._deregisterFocusableListItem(s);for(const s of Array.from(i.added).reverse())this._registerFocusableListItem(s,this.items.getIndex(t)+i.index)}}_registerFocusableItemsGroup(t,r){Array.from(t.items).forEach((s,o)=>{const a=typeof r<"u"?r+o:void 0;this._registerFocusableListItem(s,a)});const i=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,i),t.items.on("change",i)}_deregisterFocusableItemsGroup(t){for(const r of t.items)this._deregisterFocusableListItem(r);t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}class Vpe extends Ut{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class bUe extends Ut{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wUe(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Upe(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}const _Ue={alignLeft:JVe,bold:Ape,importExport:s9e,paragraph:d9e,plus:m9e,text:_9e,threeVerticalDots:Nz,pilcrow:f9e,dragIndicator:n9e};class Rz extends Ut{constructor(t,r){super(t);j(this,"options");j(this,"items");j(this,"focusTracker");j(this,"keystrokes");j(this,"itemsView");j(this,"children");j(this,"focusables");j(this,"_focusCycler");j(this,"_behavior");const i=this.bindTemplate,s=this.t;this.options=r||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new Xs,this.keystrokes=new Va,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new SUe(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=t.uiLanguageDirection==="rtl";this._focusCycler=new _h({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact"),i.if("isGrouping","ck-toolbar_grouping"),i.if("isVertical","ck-toolbar_vertical")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:i.to("role"),"aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:wUe(this)}}),this._behavior=this.options.shouldGroupWhenFull?new aQ(this):new oQ(this)}render(){super.render(),this.focusTracker.add(this.element);for(const t of this.items)this.focusTracker.add(t);this.items.on("add",(t,r)=>{this.focusTracker.add(r)}),this.items.on("remove",(t,r)=>{this.focusTracker.remove(r)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,r,i){this.items.addMany(this._buildItemsFromConfig(t,r,i))}switchBehavior(t){this._behavior.type!==t&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),t==="dynamic"?(this._behavior=new aQ(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new oQ(this),this._behavior.render(this)))}_buildItemsFromConfig(t,r,i){const s=Upe(t),o=i||s.removeItems;return this._cleanItemsConfiguration(s.items,r,o).map(c=>Ac(c)?this._createNestedToolbarDropdown(c,r,o):c==="|"?new Vpe:c==="-"?new bUe:r.create(c)).filter(c=>!!c)}_cleanItemsConfiguration(t,r,i){const s=t.filter((o,a,c)=>o==="|"?!0:i.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(Yn("toolbarview-line-break-ignored-when-grouping-items",c),!1):!0:!Ac(o)&&!r.has(o)?(Yn("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(s)}_cleanSeparatorsAndLineBreaks(t){const r=a=>a!=="-"&&a!=="|",i=t.length,s=t.findIndex(r);if(s===-1)return[];const o=i-t.slice().reverse().findIndex(r);return t.slice(s,o).filter((a,c,u)=>r(a)?!0:!(c>0&&u[c-1]===a))}_createNestedToolbarDropdown(t,r,i){let{label:s,icon:o,items:a,tooltip:c=!0,withText:u=!1}=t;if(a=this._cleanItemsConfiguration(a,r,i),!a.length)return null;const d=this.locale,h=UM(d);return s||Yn("toolbarview-nested-toolbar-dropdown-missing-label",t),h.class="ck-toolbar__nested-toolbar-dropdown",h.buttonView.set({label:s,tooltip:c,withText:!!u}),o!==!1?h.buttonView.icon=_Ue[o]||o||Nz:h.buttonView.withText=!0,Hpe(h,()=>h.toolbarView._buildItemsFromConfig(a,r,i)),h}}class SUe extends Ut{constructor(t){super(t);j(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class oQ{constructor(e){j(this,"type","static");e.isGrouping=!1,e.itemsView.children.bindTo(e.items).using(t=>t),e.focusables.bindTo(e.items).using(t=>IA(t)?t:null)}render(){}destroy(){}}class aQ{constructor(e){j(this,"type","dynamic");j(this,"view");j(this,"viewChildren");j(this,"viewFocusables");j(this,"viewItemsView");j(this,"viewFocusTracker");j(this,"viewLocale");j(this,"ungroupedItems");j(this,"groupedItems");j(this,"groupedItemsDropdown");j(this,"resizeObserver",null);j(this,"cachedPadding",null);j(this,"shouldUpdateGroupingOnNextResize",!1);j(this,"viewElement");this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.view.isGrouping=!0,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,r)=>{const i=r.index,s=Array.from(r.added);for(const o of r.removed)i>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=i;o<i+s.length;o++){const a=s[o-i];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const e=this.view;if(e.items.length){for(let t=0;t<e.items.length;t++){const r=[...e.items][t];this.ungroupedItems.add(r,t)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!dm(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,r=new bn(e.lastChild),i=new bn(e);if(!this.cachedPadding){const s=yt.window.getComputedStyle(e),o=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(s[o])}return t==="ltr"?r.right>i.right-this.cachedPadding:r.left<i.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new uz(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Vpe),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,r=UM(e);return r.class="ck-toolbar__grouped-dropdown",r.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",Hpe(r,this.groupedItems),r.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:Nz}),r}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{IA(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class zpe extends Ut{constructor(t,r){super(t);j(this,"children");j(this,"actionView");j(this,"arrowView");j(this,"keystrokes");j(this,"focusTracker");const i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(r),this.arrowView=this._createArrowView(),this.keystrokes=new Va,this.focusTracker=new Xs,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",s=>!s),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,r)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),r())}),this.keystrokes.set("arrowleft",(t,r)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),r())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const r=t||new On;return t||r.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),r.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),r.delegate("execute").to(this),r}_createArrowView(){const t=new On,r=t.bindTemplate;return t.icon=FM,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":r.to("isOn"),"aria-haspopup":!0,"aria-expanded":r.to("isOn",i=>String(i))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}function UM(n,e=xUe){const t=typeof e=="function"?new e(n):e,r=new yUe(n),i=new v$(n,t,r);return t.bind("isEnabled").to(i),t instanceof zpe?t.arrowView.bind("isOn").to(i,"isOpen"):t.bind("isOn").to(i,"isOpen"),CUe(i),i}function Hpe(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?lQ(n,e,t):n.once("change:isOpen",()=>lQ(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&Wpe(n,()=>n.toolbarView.items.find(r=>r.isOn))}function lQ(n,e,t){const r=n.locale,i=r.t,s=n.toolbarView=new Rz(r),o=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel||i("Dropdown toolbar"),t.maxWidth&&(s.maxWidth=t.maxWidth),t.class&&(s.class=t.class),t.isCompact&&(s.isCompact=t.isCompact),t.isVertical&&(s.isVertical=!0),o instanceof Oc?s.items.bindTo(o).using(a=>a):s.items.addMany(o),n.panelView.children.add(s),n.focusTracker.add(s),s.items.delegate("execute").to(n)}function kUe(n,e,t={}){n.isOpen?cQ(n,e,t):n.once("change:isOpen",()=>cQ(n,e,t),{priority:"highest"}),Wpe(n,()=>n.listView.items.find(r=>r instanceof Bu?r.children.first.isOn:!1))}function cQ(n,e,t){const r=n.locale,i=n.listView=new fS(r),s=typeof e=="function"?e():e;i.ariaLabel=t.ariaLabel,i.role=t.role,Gpe(n,i.items,s,r),n.panelView.children.add(i),i.items.delegate("execute").to(n)}function Wpe(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():Yn("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Ng.low-10})}function CUe(n){EUe(n),TUe(n),AUe(n),NUe(n),jUe(n),PUe(n)}function EUe(n){BM({emitter:n,activator:()=>n.isRendered&&n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...qpe(n.focusTracker).filter(e=>!n.element.contains(e))]})}function qpe(n){return[...n.elements,...n.externalViews.flatMap(e=>qpe(e.focusTracker))]}function TUe(n){n.on("execute",e=>{e.source instanceof Iz||(n.isOpen=!1)})}function AUe(n){n.focusTracker.on("change:isFocused",(e,t,r)=>{r||!n.isOpen||(n.isOpen=!1)})}function NUe(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function jUe(n){n.on("change:isOpen",(e,t,r)=>{if(r)return;n.focusTracker.elements.some(s=>s.contains(yt.document.activeElement))&&n.buttonView.focus()})}function PUe(n){n.on("change:isOpen",(e,t,r)=>{r&&n.panelView.focus()},{priority:"low"})}function Gpe(n,e,t,r){IUe(e),e.bindTo(t).using(i=>{if(i.type==="separator")return new Oz(r);if(i.type==="group"){const s=new _P(r);return s.set({label:i.label}),Gpe(n,s.items,i.items,r),s.items.delegate("execute").to(n),s}else if(i.type==="button"||i.type==="switchbutton"){const s=i.model.role==="menuitemcheckbox"||i.model.role==="menuitemradio",o=new Bu(r);let a;return i.type==="button"?(a=new hS(r,i.labelView),a.set({isToggleable:s})):a=new Iz(r),a.bind(...Object.keys(i.model)).to(i.model),a.delegate("execute").to(o),o.children.add(a),o}return null})}function IUe(n){let e=0;const t=s=>!(s instanceof Bu)||!(s.children.first instanceof hS)?null:s.children.first,r=s=>{const o=t(s);return!o||!o.isToggleable?null:o},i=s=>{for(const o of n){const a=t(o);a&&(a.hasCheckSpace=s)}};n.on("change",(s,o)=>{const a=e>0;for(const u of o.removed)r(u)&&e--;for(const u of o.added){const d=t(u);d&&(d.isToggleable&&e++,d.hasCheckSpace=e>0)}const c=e>0;a!==c&&i(c)})}const XI=(n,e,t)=>{const r=new vUe(n.locale);return r.set({id:e,ariaDescribedById:t}),r.bind("isReadOnly").to(n,"isEnabled",i=>!i),r.bind("hasError").to(n,"errorText",i=>!!i),r.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(r),r};class OUe{constructor(e){j(this,"editor");j(this,"_components",new Map);this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(N5(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new _e("componentfactory-item-missing",this,{name:e});return this._components.get(N5(e)).callback(this.editor.locale)}has(e){return this._components.has(N5(e))}}function N5(n){return String(n).toLowerCase()}const uQ="ck-tooltip",ps=class ps extends Pc(){constructor(t){super();j(this,"tooltipTextView");j(this,"balloonPanelView");j(this,"_currentElementWithTooltip",null);j(this,"_currentTooltipPosition",null);j(this,"_mutationObserver",null);j(this,"_pinTooltipDebounced");j(this,"_unpinTooltipDebounced");j(this,"_watchdogExcluded");if(ps._editors.add(t),ps._instance)return ps._instance;ps._instance=this,this.tooltipTextView=new Ut(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Q0(t.locale),this.balloonPanelView.class=uQ,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=RUe(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=X0(this._pinTooltip,600),this._unpinTooltipDebounced=X0(this._unpinTooltip,400),this.listenTo(yt.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(yt.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(yt.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(yt.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(yt.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(yt.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const r=t.ui.view&&t.ui.view.body;ps._editors.delete(t),this.stopListening(t.ui),r&&r.has(this.balloonPanelView)&&r.remove(this.balloonPanelView),ps._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),ps._instance=null)}static getPositioningFunctions(t){const r=ps.defaultBalloonPositions;return{s:[r.southArrowNorth,r.southArrowNorthEast,r.southArrowNorthWest],n:[r.northArrowSouth],e:[r.eastArrowWest],w:[r.westArrowEast],sw:[r.southArrowNorthEast],se:[r.southArrowNorthWest]}[t]}_onKeyDown(t,r){r.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),r.stopPropagation())}_onEnterOrFocus(t,{target:r}){const i=j5(r);if(!i){t.name==="focus"&&this._unpinTooltip();return}if(i===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),t.name==="focus"&&!i.matches(":hover")||i.matches("[data-cke-tooltip-instant]")?this._pinTooltip(i,P5(i)):this._pinTooltipDebounced(i,P5(i))}_onLeaveOrBlur(t,{target:r,relatedTarget:i}){if(t.name==="mouseleave"){if(!Bg(r))return;const s=this.balloonPanelView.element,o=s&&(s===i||s.contains(i)),a=!o&&r===s;if(o){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&r!==this._currentElementWithTooltip)return;const c=j5(r),u=j5(i);(a||c&&c!==u)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||c&&c.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&r!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(t,{target:r}){this._currentElementWithTooltip&&(r.contains(this.balloonPanelView.element)&&r.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:r,position:i,cssClass:s}){this._unpinTooltip();const o=Ra(ps._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=r,this.balloonPanelView.class=[uQ,s].filter(a=>a).join(" "),this.balloonPanelView.pin({target:t,positions:ps.getPositioningFunctions(i)}),this._mutationObserver.attach(t);for(const a of ps._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of ps._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const t=P5(this._currentElementWithTooltip);if(!dm(this._currentElementWithTooltip)||!t.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:ps.getPositioningFunctions(t.position)})}};j(ps,"defaultBalloonPositions",Q0.generatePositions({heightOffset:5,sideOffset:13})),j(ps,"_editors",new Set),j(ps,"_instance",null);let y$=ps;function j5(n){return Bg(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function P5(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function RUe(n){const e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}class MUe extends Fpe{constructor(t){super(t,{balloonClass:"ck-evaluation-badge-balloon"});j(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const r=this.editor.config.get("licenseKey"),i=dQ(r);return!!(i&&this.licenseTypeMessage[i])}_createBadgeContent(){const t=this.editor.config.get("licenseKey"),r=dQ(t);return new DUe(this.editor.locale,this.licenseTypeMessage[r])}_getNormalizedConfig(){const t=super._getNormalizedConfig(),r=this.editor.config.get("ui.poweredBy")||{},i=r.position||t.position,s=r.side||t.side;return{position:i,side:s==="left"?"right":"left",verticalOffset:t.verticalOffset,horizontalOffset:t.horizontalOffset}}}class DUe extends Ut{constructor(e,t){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[t]}]})}}function dQ(n){if(n=="GPL")return"GPL";const e=pz(n.split(".")[1]);return e?e.licenseType||"production":null}class zM extends Bu{constructor(e,t){super(e);const r=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:r.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const Cj=5,mb={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(!(!n.isFocusBorderEnabled&&!n.isOpen)){if(n.isOpen)for(const t of n.menus){const r=e.path[0],i=r instanceof zM&&r.children.first===t;t.isOpen=(e.path.includes(t)||i)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",r=>{t(r.source,e?-1:1)}),n.on("menu:arrowleft",r=>{t(r.source,e?1:-1)});function t(r,i){const s=n.children.getIndex(r),o=r.isOpen,a=n.children.length,c=n.children.get((s+a+i)%a);r.isOpen=!1,o&&(c.isOpen=!0),c.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,r)=>{r&&n.menus.filter(i=>e.source.parentMenuView===i.parentMenuView&&e.source!==i&&i.isOpen).forEach(i=>{i.isOpen=!1})})},closeOnClickOutside(n){BM({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,r,i)=>{i||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},sp={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isEnabled&&n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,r)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),r())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,r)=>{n.isOpen&&(n.isOpen=!1,n.focus(),r())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,r)=>{!r&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},LUe={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-Cj,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-Cj,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+Cj,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+Cj,name:"wn"})},FUe=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:lineHeight","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands","menuBar:toggleAi","menuBar:aiQuickActions"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function BUe(n){let e;return!("items"in n)||!n.items?e={items:Oa(FUe),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n}:e={items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n},e}function $Ue({normalizedConfig:n,locale:e,componentFactory:t,extraItems:r}){const i=Oa(n);return hQ(n,i,r),VUe(n,i),hQ(n,i,i.addItems),UUe(n,i,t),Kpe(n,i),zUe(i,e),i}function VUe(n,e){const t=e.removeItems,r=[];e.items=e.items.filter(({menuId:i})=>t.includes(i)?(r.push(i),!1):!0),mS(e.items,i=>{i.groups=i.groups.filter(({groupId:s})=>t.includes(s)?(r.push(s),!1):!0);for(const s of i.groups)s.items=s.items.filter(o=>{const a=Ype(o);return t.includes(a)?(r.push(a),!1):!0})});for(const i of t)r.includes(i)||Yn("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:i})}function hQ(n,e,t){const r=[];if(t.length!=0){for(const i of t){const s=qUe(i.position),o=GUe(i.position);if(HUe(i))if(!o)s==="start"?(e.items.unshift(i.menu),r.push(i)):s==="end"&&(e.items.push(i.menu),r.push(i));else{const a=e.items.findIndex(c=>c.menuId===o);a!=-1?s==="before"?(e.items.splice(a,0,i.menu),r.push(i)):s==="after"&&(e.items.splice(a+1,0,i.menu),r.push(i)):fQ(e,i.menu,o,s)&&r.push(i)}else WUe(i)?mS(e.items,a=>{if(a.menuId===o)s==="start"?(a.groups.unshift(i.group),r.push(i)):s==="end"&&(a.groups.push(i.group),r.push(i));else{const c=a.groups.findIndex(u=>u.groupId===o);c!==-1&&(s==="before"?(a.groups.splice(c,0,i.group),r.push(i)):s==="after"&&(a.groups.splice(c+1,0,i.group),r.push(i)))}}):fQ(e,i.item,o,s)&&r.push(i)}for(const i of t)r.includes(i)||Yn("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:i})}}function fQ(n,e,t,r){let i=!1;return mS(n.items,s=>{for(const{groupId:o,items:a}of s.groups){if(i)return;if(o===t)r==="start"?(a.unshift(e),i=!0):r==="end"&&(a.push(e),i=!0);else{const c=a.findIndex(u=>Ype(u)===t);c!==-1&&(r==="before"?(a.splice(c,0,e),i=!0):r==="after"&&(a.splice(c+1,0,e),i=!0))}}}),i}function UUe(n,e,t){mS(e.items,r=>{for(const i of r.groups)i.items=i.items.filter(s=>{const o=typeof s=="string"&&!t.has(s);return o&&!e.isUsingDefaultConfig&&Yn("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:Oa(r),componentName:s}),!o})})}function Kpe(n,e){const t=e.isUsingDefaultConfig;let r=!1;if(e.items=e.items.filter(i=>i.groups.length?!0:(I5(n,i,t),!1)),!e.items.length){I5(n,n,t);return}mS(e.items,i=>{i.groups=i.groups.filter(s=>s.items.length?!0:(r=!0,!1));for(const s of i.groups)s.items=s.items.filter(o=>Xpe(o)&&!o.groups.length?(I5(n,o,t),r=!0,!1):!0)}),r&&Kpe(n,e)}function I5(n,e,t){t||Yn("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function zUe(n,e){const t=e.t,r={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};mS(n.items,i=>{i.label in r&&(i.label=r[i.label])})}function mS(n,e){if(Array.isArray(n))for(const r of n)t(r);function t(r){e(r);for(const i of r.groups)for(const s of i.items)Xpe(s)&&t(s)}}function HUe(n){return typeof n=="object"&&"menu"in n}function WUe(n){return typeof n=="object"&&"group"in n}function qUe(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function GUe(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function Ype(n){return typeof n=="string"?n:n.menuId}function Xpe(n){return typeof n=="object"&&"menuId"in n}class KUe extends Tr(){constructor(t){super();j(this,"editor");j(this,"componentFactory");j(this,"focusTracker");j(this,"tooltipManager");j(this,"poweredBy");j(this,"evaluationBadge");j(this,"ariaLiveAnnouncer");j(this,"isReady",!1);j(this,"_editableElementsMap",new Map);j(this,"_focusableToolbarDefinitions",[]);j(this,"_extraMenuBarElements",[]);j(this,"_lastFocusedForeignElement",null);j(this,"_domEmitter");const r=t.editing.view;this.editor=t,this.componentFactory=new OUe(t),this.focusTracker=new Xs,this.tooltipManager=new y$(t),this.poweredBy=new cUe(t),this.evaluationBadge=new MUe(t),this.ariaLiveAnnouncer=new W9e(t),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(r.document,"layoutChanged",this.update.bind(this)),this.listenTo(r,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null,this.editor.keystrokes.stopListening(t);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(t,r){this._editableElementsMap.set(t,r),r.ckeditorInstance||(r.ckeditorInstance=this.editor),this.focusTracker.add(r);const i=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(r)};this.isReady?i():this.once("ready",i)}removeEditableElement(t){const r=this._editableElementsMap.get(t);r&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(r),this.focusTracker.remove(r),r.ckeditorInstance=null)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,r={}){t.isRendered?(this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)):t.once("render",()=>{this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)}),this._focusableToolbarDefinitions.push({toolbarView:t,options:r})}extendMenuBar(t){this._extraMenuBarElements.push(t)}initMenuBar(t){const r=t.element;this.focusTracker.add(r),this.editor.keystrokes.listenTo(r);const i=BUe(this.editor.config.get("menuBar")||{});t.fillFromConfig(i,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(s,o)=>{r.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(s,o)=>{r.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),t.isFocusBorderEnabled=!0,t.focus(),o())})}_readViewportOffsetFromConfig(){const t=this.editor,r=t.config.get("ui.viewportOffset");if(r)return r;const i=t.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){const t=this.editor;let r;t.keystrokes.set("Alt+F10",(i,s)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!r)&&(r=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<r.length;a++){const c=r.shift();if(r.push(c),c!==o&&this._focusFocusableCandidateToolbar(c)){o&&o.options.afterBlur&&o.options.afterBlur();break}}s()}),t.keystrokes.set("Esc",(i,s)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):t.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),s())})}_saveLastFocusedForeignElement(){const t=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(t)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(t)&&(this._lastFocusedForeignElement=t)}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const r of this._focusableToolbarDefinitions){const{toolbarView:i,options:s}=r;(dm(i.element)||s.beforeFocus)&&t.push(r)}return t.sort((r,i)=>mQ(r)-mQ(i)),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:r,options:{beforeFocus:i}}=t;return i&&i(),dm(r.element)?(r.focus(),!0):!1}_handleScrollToTheSelection(t,r){const i={top:0,bottom:0,left:0,right:0,...this.viewportOffset};r.viewportOffset.top+=i.top,r.viewportOffset.bottom+=i.bottom,r.viewportOffset.left+=i.left,r.viewportOffset.right+=i.right}_bindBodyCollectionWithFocusTracker(){const t=this.view.body;for(const r of t)this.focusTracker.add(r.element);t.on("add",(r,i)=>{this.focusTracker.add(i.element)}),t.on("remove",(r,i)=>{this.focusTracker.remove(i.element)})}_initViewportOffset(t){this.on("set:viewportOffset",(r,i,s)=>{const o=this._getVisualViewportTopOffset(s);s.visualTop!==o&&(r.return={...s,visualTop:o})}),this.set("viewportOffset",t)}_initVisualViewportSupport(){if(!yt.window.visualViewport)return;const t=()=>{const r=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==r&&(this.viewportOffset={...this.viewportOffset,visualTop:r})};this._domEmitter=new(Pc()),this._domEmitter.listenTo(yt.window.visualViewport,"scroll",t),this._domEmitter.listenTo(yt.window.visualViewport,"resize",t)}_getVisualViewportTopOffset(t){const r=yP().top,i=t.top||0;return r>i?0:i-r}}function mQ(n){const{toolbarView:e,options:t}=n;let r=10;return dm(e.element)&&r--,t.isContextual&&(r-=2),r}class YUe extends Ut{constructor(t){super(t);j(this,"body");j(this,"menuBarView");j(this,"toolbar");this.body=new g$(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class XUe extends YUe{constructor(t){super(t);j(this,"top");j(this,"main");j(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,r=new VM;return r.text=t("Rich Text Editor"),r.extendTemplate({attributes:{class:"ck-voice-label"}}),r}}class JUe extends Ut{constructor(t,r,i){super(t);j(this,"name",null);j(this,"_editingView");j(this,"_editableElement");j(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=r}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const t=this._editingView;t.isRenderingInProgress?i(this):r(this);function r(s){t.change(o=>{const a=t.document.getRoot(s.name);o.addClass(s.isFocused?"ck-focused":"ck-blurred",a),o.removeClass(s.isFocused?"ck-blurred":"ck-focused",a)})}function i(s){t.once("change:isRenderingInProgress",(o,a,c)=>{c?i(s):r(s)})}}}class QUe extends JUe{constructor(t,r,i,s={}){super(t,r,i);j(this,"_options");this._options=s,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;t.change(r=>{const i=t.document.getRoot(this.name);r.setAttribute("aria-label",this.getEditableAriaLabel(),i)})}getEditableAriaLabel(){const t=this.locale.t,r=this._options.label,i=this._editableElement,s=this.name;if(typeof r=="string")return r;if(typeof r=="object")return r[s];if(typeof r=="function")return r(this);if(i){const o=i.getAttribute("aria-label");if(o)return o}return t("Rich Text Editor. Editing area: %0",s)}}class x$ extends Ut{constructor(t,r={}){super(t);j(this,"children");const i=this.bindTemplate;this.set("class",["ck","ck-form__row",...Ur(r.class||[])]),this.children=this.createCollection(),r.children&&r.children.forEach(s=>this.children.add(s)),this.set("_role",null),this.set("_ariaLabelledBy",null),r.labelView&&this.set({_role:"group",_ariaLabelledBy:r.labelView.id}),this.setTemplate({tag:"div",attributes:{class:i.to("class",s=>s.join(" ")),role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:this.children})}}class pQ extends Tpe{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}class ZUe extends Tr(){constructor(e,t){super(),t&&hme(this,t),e&&this.set(e)}}const Ej=AA("px");class b$ extends gt{constructor(t){super(t);j(this,"positionLimiter");j(this,"visibleStack");j(this,"_viewToStack",new Map);j(this,"_idToStack",new Map);j(this,"_view",null);j(this,"_rotatorView",null);j(this,"_fakePanelsView",null);this.positionLimiter=()=>{const r=this.editor.editing.view,s=r.document.selection.editableElement;return s?r.domConverter.mapViewToDom(s.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this._view||this._createPanelView(),this.hasView(t.view))throw new _e("contextualballoon-add-view-exist",[this,t]);const r=t.stackId||"main";if(!this._idToStack.has(r)){this._idToStack.set(r,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(r)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||t.singleViewMode)&&this.showStack(r);return}const i=this._idToStack.get(r);t.singleViewMode&&this.showStack(r),i.set(t.view,t),this._viewToStack.set(t.view,i),i===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new _e("contextualballoon-remove-view-not-exist",[this,t]);const r=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(r.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(r.values())[r.size-2])),r.size===1?(this._idToStack.delete(this._getStackId(r)),this._numberOfStacks=this._idToStack.size):r.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),t}showStack(t){this.visibleStack=t;const r=this._idToStack.get(t);if(!r)throw new _e("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==r&&this._showView(Array.from(r.values()).pop())}_createPanelView(){this._view=new Q0(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(i=>i[1]===t)[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let r=t.indexOf(this._visibleStack)+1;t[r]||(r=0),this.showStack(this._getStackId(t[r]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let r=t.indexOf(this._visibleStack)-1;t[r]||(r=t.length-1),this.showStack(this._getStackId(t[r]))}_createRotatorView(){const t=new eze(this.editor.locale),r=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,s)=>!s&&i>1),t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,s)=>{if(s<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return r("%0 of %1",[o,s])}),t.buttonNextView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),t.buttonPrevView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),t}_createFakePanelsView(){const t=new tze(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(r,i)=>!i&&r>=2?Math.min(r-1,2):0),t.listenTo(this.view,"change:top",()=>t.updatePosition()),t.listenTo(this.view,"change:left",()=>t.updatePosition()),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:r="",withArrow:i=!0,singleViewMode:s=!1}){this.view.class=r,this.view.withArrow=i,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}}class eze extends Ut{constructor(t){super(t);j(this,"focusTracker");j(this,"buttonPrevView");j(this,"buttonNextView");j(this,"content");const r=t.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Xs,this.buttonPrevView=this._createButtonView(r("Previous"),NA),this.buttonNextView=this._createButtonView(r("Next"),Npe),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",s=>s?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,r){const i=new On(this.locale);return i.set({label:t,icon:r,tooltip:!0}),i}}class tze extends Ut{constructor(t,r){super(t);j(this,"content");j(this,"_balloonPanelView");const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=r,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",s=>s?"":"ck-hidden")],style:{top:i.to("top",Ej),left:i.to("left",Ej),width:i.to("width",Ej),height:i.to("height",Ej)}},children:this.content}),this.on("change:numberOfPanels",(s,o,a,c)=>{a>c?this._addPanels(a-c):this._removePanels(c-a),this.updatePosition()})}_addPanels(t){for(;t--;){const r=new Ut;r.setTemplate({tag:"div"}),this.content.add(r),this.registerChild(r)}}_removePanels(t){for(;t--;){const r=this.content.last;this.content.remove(r),this.deregisterChild(r),r.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:r}=this._balloonPanelView,{width:i,height:s}=new bn(this._balloonPanelView.element);Object.assign(this,{top:t,left:r,width:i,height:s})}}}const pb=AA("px");class nze extends Ut{constructor(t){super(t);j(this,"content");j(this,"contentPanelElement");j(this,"_contentPanelPlaceholder");const r=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Tu({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:r.to("isSticky",i=>i?"block":"none"),height:r.to("isSticky",i=>i?pb(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Tu({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",r.if("isSticky","ck-sticky-panel__content_sticky"),r.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:r.to("isSticky",i=>i?pb(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:r.to("_stickyTopOffset",i=>i&&pb(i)),bottom:r.to("_stickyBottomOffset",i=>i&&pb(i)),marginLeft:r.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(yt.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),yt.window.visualViewport&&(this.listenTo(yt.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(yt.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const t=new bn(this.limiterElement);let r=t.getVisible();if(r){const o=new bn(yt.window);o.top+=this.viewportTopOffset,o.height-=this.viewportTopOffset,r=r.getIntersection(o)}const{left:i,top:s}=yP();if(t.moveBy(i,s),r&&r.moveBy(i,s),r&&t.top<r.top)if(this._contentPanelRect.height+this.limiterBottomOffset>r.height){const o=Math.max(t.bottom-r.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+o+1<t.height?this._stickToBottomOfLimiter(o):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(r.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=pb(-yt.window.scrollX+yP().left)}_stickToBottomOfLimiter(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=pb(-yt.window.scrollX+yP().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new bn(this.contentPanelElement)}}class rze extends hS{constructor(t){super(t);j(this,"arrowView");const r=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":r.to("isOn")},on:{mouseenter:r.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Fu;return t.content=FM,t.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),t}}class ize extends Ut{constructor(t){super(t);j(this,"children");const r=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",r.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),r.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:r.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(t=1){this.children.length&&(t===1?this.children.first.focus():this.children.last.focus())}}const bR=class bR extends Ut{constructor(t){super(t);j(this,"buttonView");j(this,"panelView");j(this,"focusTracker");j(this,"keystrokes");const r=this.bindTemplate;this.buttonView=new rze(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new ize(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Va,this.focusTracker=new Xs,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",r.to("class"),r.if("isEnabled","ck-disabled",i=>!i),r.if("parentMenuView","ck-menu-bar__menu_top-level",i=>!i)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),sp.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(sp.openOnButtonClick(this),sp.openOnArrowRightKey(this),sp.closeOnArrowLeftKey(this),sp.openAndFocusOnEnterKeyPress(this),sp.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),sp.openAndFocusPanelOnArrowDownKey(this),sp.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,r)=>{this.fire("arrowright"),r()}),this.keystrokes.set("arrowleft",(t,r)=>{this.fire("arrowleft"),r()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,r,i)=>{if(!i)return;const s=bR._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:r,northEast:i,northWest:s,westSouth:o,eastSouth:a,westNorth:c,eastNorth:u}=LUe;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,u,o,c]:[t,r,i,s]:this.parentMenuView?[o,c,a,u]:[r,t,s,i]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};j(bR,"_getOptimalPosition",dz);let B0=bR;class JI extends fS{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const e=Array.from(this.items).some(t=>{const r=gQ(t);return r&&r.isToggleable});this.items.forEach(t=>{const r=gQ(t);r&&(r.hasCheckSpace=e)})}}function gQ(n){return n instanceof Bu?n.children.map(e=>sze(e)?e.buttonView:e).find(e=>e instanceof hS):null}function sze(n){return typeof n=="object"&&"buttonView"in n&&n.buttonView instanceof On}class Jpe extends dUe{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const vQ=["mouseenter","arrowleft","arrowright","change:isOpen"];class oze extends Ut{constructor(t){super(t);j(this,"children");j(this,"menus",[]);const r=t.t,i=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",i.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":r("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(t,r,i=[]){const s=this.locale,a=$Ue({normalizedConfig:t,locale:s,componentFactory:r,extraItems:i}).items.map(c=>this._createMenu({componentFactory:r,menuDefinition:c}));this.children.addMany(a)}render(){super.render(),mb.toggleMenusAndFocusItemsOnHover(this),mb.closeMenusWhenTheBarCloses(this),mb.closeMenuWhenAnotherOnTheSameLevelOpens(this),mb.focusCycleMenusOnArrows(this),mb.closeOnClickOutside(this),mb.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const t of this.children)t.isOpen=!1}disable(){for(const t of this.children)t.isEnabled=!1}enable(){for(const t of this.children)t.isEnabled=!0}registerMenu(t,r=null){r?(t.delegate(...vQ).to(r),t.parentMenuView=r):t.delegate(...vQ).to(this,i=>"menu:"+i),t._attachBehaviors(),this.menus.push(t)}_createMenu({componentFactory:t,menuDefinition:r,parentMenuView:i}){const s=this.locale,o=new B0(s);return this.registerMenu(o,i),o.buttonView.set({label:r.label}),o.once("change:isOpen",()=>{const a=new JI(s);a.ariaLabel=r.label,o.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:r,parentMenuView:o,componentFactory:t}))}),o}_createMenuItems({menuDefinition:t,parentMenuView:r,componentFactory:i}){const s=this.locale,o=[];for(const a of t.groups){for(const c of a.items){const u=new zM(s,r);if(Ac(c))u.children.add(this._createMenu({componentFactory:i,menuDefinition:c,parentMenuView:r}));else{const d=this._createMenuItemContentFromFactory({componentName:c,componentFactory:i,parentMenuView:r});if(!d)continue;u.children.add(d)}o.push(u)}a!==t.groups[t.groups.length-1]&&o.push(new Oz(s))}return o}_createMenuItemContentFromFactory({componentName:t,parentMenuView:r,componentFactory:i}){const s=i.create(t);return s instanceof B0||s instanceof Ua||s instanceof Jpe?(this._registerMenuTree(s,r),s.on("execute",()=>{this.close()}),s):(Yn("menu-bar-component-unsupported",{componentName:t,componentView:s}),null)}_registerMenuTree(t,r){if(!(t instanceof B0)){t.delegate("mouseenter").to(r);return}this.registerMenu(t,r);const i=t.panelView.children.filter(o=>o instanceof JI)[0];if(!i){t.delegate("mouseenter").to(r);return}const s=i.items.filter(o=>o instanceof Bu);for(const o of s)this._registerMenuTree(o.children.get(0),t)}_setupIsOpenUpdater(){let t;this.on("menu:change:isOpen",(r,i,s)=>{clearTimeout(t),s?this.isOpen=!0:t=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Qpe{constructor(e,t=20){j(this,"model");j(this,"limit");j(this,"_isLocked");j(this,"_size");j(this,"_batch",null);j(this,"_changeCallback");j(this,"_selectionChangeCallback");this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(r,i)=>{i.isLocal&&i.isUndoable&&i!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}class aze extends ci{constructor(t,r){super(t);j(this,"_buffer");this._buffer=new Qpe(t.model,r),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const r=this.editor.model,i=r.document,s=t.text||"",o=s.length;let a=i.selection;if(t.selection?a=t.selection:t.range&&(a=r.createSelection(t.range)),!r.canEditAt(a))return;const c=t.resultRange;r.enqueueChange(this._buffer.batch,u=>{this._buffer.lock();const d=Array.from(i.selection.getAttributes());r.deleteContent(a),s&&r.insertContent(u.createText(s,d),a),c?u.setSelection(c):a.is("documentSelection")||u.setSelection(a),this._buffer.unlock(),this._buffer.input(o)})}}const Zpe=["insertText","insertReplacementText"],lze=[...Zpe,"insertCompositionText"];class cze extends wh{constructor(t){super(t);j(this,"focusObserver");this.focusObserver=t.getObserver(zI);const r=Vt.isAndroid?lze:Zpe,i=t.document;i.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{data:a,targetRanges:c,inputType:u,domEvent:d,isComposing:h}=o;if(!r.includes(u))return;this.focusObserver.flush();const f=new um(i,"insertText");i.fire(f,new J0(t,d,{text:a,selection:t.createSelection(c),isComposing:h})),f.stop.called&&s.stop()}),Vt.isAndroid||i.on("compositionend",(s,{data:o,domEvent:a})=>{this.isEnabled&&o&&i.fire("insertText",new J0(t,a,{text:o,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class ege extends gt{constructor(){super(...arguments);j(this,"_typingQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.model,i=t.editing.view,s=t.editing.mapper,o=r.document.selection;this._typingQueue=new uze(t),i.addObserver(cze);const a=new aze(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",a),t.commands.add("input",a),this.listenTo(i.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(i.document,"insertText",(c,u)=>{const{text:d,selection:h}=u;if(i.document.selection.isFake&&h&&i.document.selection.isSimilar(h)&&u.preventDefault(),h&&Array.from(h.getRanges()).some(y=>!y.isCollapsed)&&u.preventDefault(),!a.isEnabled){u.preventDefault();return}let f;h?f=Array.from(h.getRanges()).map(y=>s.toModelRange(y)).map(y=>Ez(y,r.schema)||y):f=Array.from(o.getRanges());let p=d;if(Vt.isAndroid){const y=Array.from(f[0].getItems()).reduce((b,_)=>b+(_.is("$textProxy")?_.data:""),"");if(y&&(y.length<=p.length?p.startsWith(y)&&(p=p.substring(y.length),f[0].start=f[0].start.getShiftedBy(y.length)):y.startsWith(p)&&(f[0].start=f[0].start.getShiftedBy(p.length),p="")),p.length==0&&f[0].isCollapsed)return}const x={text:p,selection:r.createSelection(f)};this._typingQueue.push(x,!!u.isComposing),u.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),Vt.isAndroid?this.listenTo(i.document,"keydown",(c,u)=>{o.isCollapsed||u.keyCode!=229||!i.document.isComposing||yQ(r,a)}):this.listenTo(i.document,"compositionstart",()=>{o.isCollapsed||yQ(r,a)},{priority:"high"}),this.listenTo(i.document,"mutations",(c,{mutations:u})=>{if(this._typingQueue.hasAffectedElements())for(const{node:d}of u){const h=hze(d,s),f=s.toModelElement(h);if(this._typingQueue.isElementAffected(f)){this._typingQueue.flush("mutations");return}}}),this.listenTo(i.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(i.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const c=[];if(this._typingQueue.hasAffectedElements())for(const u of this._typingQueue.flushAffectedElements()){const d=s.toViewElement(u);d&&c.push({type:"children",node:d})}(c.length||!Vt.isAndroid)&&i.document.fire("mutations",{mutations:c})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class uze{constructor(e){j(this,"editor");j(this,"flushDebounced",X0(()=>this.flush("timeout"),50));j(this,"_queue",[]);j(this,"_isComposing",!1);j(this,"_affectedElements",new Set);this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._affectedElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e,t){const r={text:e.text};if(e.selection){r.selectionRanges=[];for(const i of e.selection.getRanges())r.selectionRanges.push(Pl.fromRange(i)),this._affectedElements.add(i.start.parent)}this._queue.push(r),this._isComposing||(this._isComposing=t),this.flushDebounced()}shift(){const e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){const r=e.selectionRanges.map(i=>dze(i)).filter(i=>!!i);r.length&&(t.selection=this.editor.model.createSelection(r))}return t}flush(e){const t=this.editor,r=t.model,i=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=t.commands.get("insertText").buffer;r.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const a=this.shift();t.execute("insertText",a)}o.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),i.scrollToTheSelection()}isElementAffected(e){return this._affectedElements.has(e)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const e=Array.from(this._affectedElements);return this._affectedElements.clear(),e}}function yQ(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}function dze(n){const e=n.toRange();return n.detach(),e.root.rootName=="$graveyard"?null:e}function hze(n,e){let t=n.is("$text")?n.parent:n;for(;!e.toModelElement(t);)t=t.parent;return t}class xQ extends ci{constructor(t,r){super(t);j(this,"direction");j(this,"_buffer");this.direction=r,this._buffer=new Qpe(t.model,t.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(t={}){const r=this.editor.model,i=r.document;r.enqueueChange(this._buffer.batch,s=>{this._buffer.lock();const o=s.createSelection(t.selection||i.selection);if(!r.canEditAt(o))return;const a=t.sequence||1,c=o.isCollapsed;if(o.isCollapsed&&r.modifySelection(o,{direction:this.direction,unit:t.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(s);return}if(this._shouldReplaceFirstBlockWithParagraph(o,a)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let u=0;o.getFirstRange().getMinimalFlatRanges().forEach(d=>{u+=s$(d.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),r.deleteContent(o,{doNotResetEntireContent:c,direction:this.direction}),this._buffer.input(u),s.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const r=this.editor.model,s=r.document.selection,o=r.schema.getLimitElement(s);if(!(s.isCollapsed&&s.containsEntireContent(o))||!r.schema.checkChild(o,"paragraph"))return!1;const c=o.getChild(0);return!(c&&c.is("element","paragraph"))}_replaceEntireContentWithParagraph(t){const r=this.editor.model,s=r.document.selection,o=r.schema.getLimitElement(s),a=t.createElement("paragraph");t.remove(t.createRangeIn(o)),t.insert(a,o),t.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(t,r){const i=this.editor.model;if(r>1||this.direction!="backward"||!t.isCollapsed)return!1;const s=t.getFirstPosition(),o=i.schema.getLimitElement(s),a=o.getChild(0);return!(s.parent!=a||!t.containsEntireContent(a)||!i.schema.checkChild(o,"paragraph")||a.name=="paragraph")}}const fze="character",bQ="word",mze="codePoint",vp="selection",Ab="backward",Uk="forward",tge={deleteContent:{unit:vp,direction:Ab},deleteContentBackward:{unit:mze,direction:Ab},deleteWordBackward:{unit:bQ,direction:Ab},deleteHardLineBackward:{unit:vp,direction:Ab},deleteSoftLineBackward:{unit:vp,direction:Ab},deleteContentForward:{unit:fze,direction:Uk},deleteWordForward:{unit:bQ,direction:Uk},deleteHardLineForward:{unit:vp,direction:Uk},deleteSoftLineForward:{unit:vp,direction:Uk}};class pze extends wh{constructor(e){super(e);const t=e.document;let r=0;t.on("keydown",()=>{r++}),t.on("keyup",()=>{r=0}),t.on("beforeinput",(i,s)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:c}=s,u=tge[c];if(!u)return;const d={direction:u.direction,unit:u.unit,sequence:r};d.unit==vp&&(d.selectionToRemove=e.createSelection(o[0])),c==="deleteContentBackward"&&(Vt.isAndroid&&(d.sequence=1),vze(o)&&(d.unit=vp,d.selectionToRemove=e.createSelection(o)));const h=new fx(t,"delete",o[0]);t.fire(h,new J0(e,a,d)),h.stop.called&&i.stop()}),Vt.isBlink&&gze(this)}observe(){}stopObserving(){}}function gze(n){const e=n.view,t=e.document;let r=null,i=!1;t.on("keydown",(a,{keyCode:c})=>{r=c,i=!1}),t.on("keyup",(a,{keyCode:c,domEvent:u})=>{const d=t.selection,h=n.isEnabled&&c==r&&s(c)&&!d.isCollapsed&&!i;if(r=null,h){const f=d.getFirstRange(),p=new fx(t,"delete",f),x={unit:vp,direction:o(c),selectionToRemove:d};t.fire(p,new J0(e,u,x))}}),t.on("beforeinput",(a,{inputType:c})=>{const u=tge[c];s(r)&&u&&u.direction==o(r)&&(i=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:c,data:u})=>{r==yn.delete&&c=="insertText"&&u==""&&a.stop()},{priority:"high"});function s(a){return a==yn.backspace||a==yn.delete}function o(a){return a==yn.backspace?Ab:Uk}}function vze(n){if(n.length!=1||n[0].isCollapsed)return!1;const e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:r,item:i}of e){if(r.parent.is("$text")){const s=r.parent.data,o=r.offset;if(gz(s,o)||vz(s,o)||Rme(s,o))continue;t++}else(i.is("containerElement")||i.is("emptyElement"))&&t++;if(t>1)return!0}return!1}class Vg extends gt{constructor(){super(...arguments);j(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.editing.view,i=r.document,s=t.model.document;r.addObserver(pze),this._undoOnBackspace=!1;const o=new xQ(t,"forward");t.commands.add("deleteForward",o),t.commands.add("forwardDelete",o),t.commands.add("delete",new xQ(t,"backward")),this.listenTo(i,"delete",(a,c)=>{i.isComposing||c.preventDefault();const{direction:u,sequence:d,selectionToRemove:h,unit:f}=c,p=u==="forward"?"deleteForward":"delete",x={sequence:d};if(f=="selection"){const y=Array.from(h.getRanges()).map(b=>t.editing.mapper.toModelRange(b)).map(b=>Ez(b,t.model.schema)||b);x.selection=t.model.createSelection(y)}else x.unit=f;t.execute(p,x),r.scrollToTheSelection()},{priority:"low"}),this.listenTo(i,"keydown",(a,c)=>{if(i.isComposing||c.keyCode!=yn.backspace||!s.selection.isCollapsed)return;const u=t.model.schema.getLimitElement(s.selection),d=t.model.createPositionAt(u,0);if(d.isTouching(s.selection.getFirstPosition())){c.preventDefault();const h=t.model.schema.getNearestSelectionRange(d,"forward");if(!h)return;const f=r.createSelection(t.editing.mapper.toViewRange(h)),p=f.getFirstRange(),x=new fx(document,"delete",p),y={unit:"selection",direction:"backward",selectionToRemove:f};i.fire(x,new J0(r,c.domEvent,y))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(a,c)=>{this._undoOnBackspace&&c.direction=="backward"&&c.sequence==1&&c.unit=="codePoint"&&(this._undoOnBackspace=!1,t.execute("undo"),c.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(s,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class yze extends gt{static get requires(){return[ege,Vg]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nge(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((i,{item:s})=>s.is("$text")||s.is("$textProxy")?i+s.data:(t=e.createPositionAfter(s),""),""),range:e.createRange(t,n.end)}}class xze extends Tr(){constructor(t,r){super();j(this,"model");j(this,"testCallback");j(this,"_hasMatch");this.model=t,this.testCallback=r,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const r=this.model.document;this.listenTo(r.selection,"change:range",(i,{directChange:s})=>{if(s){if(!r.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(r,"change:data",(i,s)=>{s.isUndo||!s.isLocal||this._evaluateTextBeforeSelection("data",{batch:s})})}_evaluateTextBeforeSelection(t,r={}){const i=this.model,o=i.document.selection,a=i.createRange(i.createPositionAt(o.focus.parent,0),o.focus),{text:c,range:u}=nge(a,i),d=this.testCallback(c);if(!d&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!d,d){const h=Object.assign(r,{text:c,range:u});typeof d=="object"&&Object.assign(h,d),this.fire(`matched:${t}`,h)}}}class wQ extends gt{constructor(t){super(t);j(this,"attributes");j(this,"_overrideUid");j(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.model,i=t.editing.view,s=t.locale,o=r.document.selection;this.listenTo(i.document,"arrowKey",(a,c)=>{if(!o.isCollapsed||c.shiftKey||c.altKey||c.ctrlKey)return;const u=c.keyCode==yn.arrowright,d=c.keyCode==yn.arrowleft;if(!u&&!d)return;const h=s.contentLanguageDirection;let f=!1;h==="ltr"&&u||h==="rtl"&&d?f=this._handleForwardMovement(c):f=this._handleBackwardMovement(c),f===!0&&a.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(a,c)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!c.directChange&&oc(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(t){this.attributes.add(t)}_handleForwardMovement(t){const r=this.attributes,i=this.editor.model,s=i.document.selection,o=s.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&qh(s,r)?!1:oc(o,r)?(t&&gk(t),qh(s,r)&&oc(o,r,!0)?pk(i,r):this._overrideGravity(),!0):!1}_handleBackwardMovement(t){const r=this.attributes,i=this.editor.model,s=i.document.selection,o=s.getFirstPosition();return this._isGravityOverridden?(t&&gk(t),this._restoreGravity(),oc(o,r,!0)?pk(i,r):Tj(i,r,o),!0):o.isAtStart?qh(s,r)?(t&&gk(t),Tj(i,r,o),!0):!1:!qh(s,r)&&oc(o,r,!0)?(t&&gk(t),Tj(i,r,o),!0):_Q(o,r)?o.isAtEnd&&!qh(s,r)&&oc(o,r)?(t&&gk(t),Tj(i,r,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const t=this.editor,r=t.model,i=r.document.selection,s=t.editing.view.document;t.editing.view.addObserver(wpe),t.editing.view.addObserver(jVe);let o=!1,a=!1;this.listenTo(s,"touchstart",()=>{a=!1,o=!0}),this.listenTo(s,"mousedown",()=>{a=!0}),this.listenTo(s,"selectionChange",()=>{const c=this.attributes;if(!a&&!o||(a=!1,o=!1,!i.isCollapsed)||!qh(i,c))return;const u=i.getFirstPosition();oc(u,c)&&(u.isAtStart||oc(u,c,!0)?pk(r,c):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const r=this.editor.model,i=r.document.selection,s=this.attributes;this.listenTo(r,"insertContent",()=>{const o=i.getFirstPosition();qh(i,s)&&oc(o,s)&&pk(r,s)},{priority:"low"})}_handleDeleteContentAfterNode(){const t=this.editor,r=t.model,i=r.document.selection,s=t.editing.view;let o=!1,a=!1;this.listenTo(s.document,"delete",(c,u)=>{o=u.direction==="backward"},{priority:"high"}),this.listenTo(r,"deleteContent",()=>{if(!o)return;const c=i.getFirstPosition();a=qh(i,this.attributes)&&!_Q(c,this.attributes)},{priority:"high"}),this.listenTo(r,"deleteContent",()=>{o&&(o=!1,!a&&t.model.enqueueChange(()=>{const c=i.getFirstPosition();qh(i,this.attributes)&&oc(c,this.attributes)&&(c.isAtStart||oc(c,this.attributes,!0)?pk(r,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(t=>t.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(t=>{t.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function qh(n,e){for(const t of e)if(n.hasAttribute(t))return!0;return!1}function Tj(n,e,t){const r=t.nodeBefore;n.change(i=>{if(r){const s=[],o=n.schema.isObject(r)&&n.schema.isInline(r);for(const[a,c]of r.getAttributes())n.schema.checkAttribute("$text",a)&&(!o||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&s.push([a,c]);i.setSelectionAttribute(s)}else i.removeSelectionAttribute(e)})}function pk(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function gk(n){n.preventDefault()}function _Q(n,e){const t=n.getShiftedBy(-1);return oc(t,e)}function oc(n,e,t=!1){const{nodeBefore:r,nodeAfter:i}=n;for(const s of e){const o=r?r.getAttribute(s):void 0,a=i?i.getAttribute(s):void 0;if(!(t&&(o===void 0||a===void 0))&&a!==o)return!0}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function HM(n,e,t,r){return r.createRange(SQ(n,e,t,!0,r),SQ(n,e,t,!1,r))}function SQ(n,e,t,r,i){let s=n.textNode||(r?n.nodeBefore:n.nodeAfter),o=null;for(;s&&s.getAttribute(e)==t;)o=s,s=r?s.previousSibling:s.nextSibling;return o?i.createPositionAt(o,r?"before":"after"):n}function bze(n,e,t,r){const i=n.editing.view,s=new Set;i.document.registerPostFixer(o=>{const a=n.model.document.selection;let c=!1;if(a.hasAttribute(e)){const u=HM(a.getFirstPosition(),e,a.getAttribute(e),n.model),d=n.editing.mapper.toViewRange(u);for(const h of d.getItems())h.is("element",t)&&!h.hasClass(r)&&(o.addClass(r,h),s.add(h),c=!0)}return c}),n.conversion.for("editingDowncast").add(o=>{o.on("insert",a,{priority:"highest"}),o.on("remove",a,{priority:"highest"}),o.on("attribute",a,{priority:"highest"}),o.on("selection",a,{priority:"highest"});function a(){i.change(c=>{for(const u of s.values())c.removeClass(r,u),s.delete(u)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Mz extends ci{constructor(t,r){super(t);j(this,"attributeKey");this.attributeKey=r}refresh(){const t=this.editor.model,r=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(r.selection,this.attributeKey)}execute(t={}){const r=this.editor.model,s=r.document.selection,o=t.forceValue===void 0?!this.value:t.forceValue;r.change(a=>{if(s.isCollapsed)o?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const c=r.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const u of c)o?a.setAttribute(this.attributeKey,o,u):a.removeAttribute(this.attributeKey,u)}})}_getValueFromFirstAllowedNode(){const t=this.editor.model,r=t.schema,i=t.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const s of i.getRanges())for(const o of s.getItems())if(r.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const gb="bold";class wze extends gt{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:gb}),e.model.schema.setAttributeProperties(gb,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:gb,view:"strong",upcastAlso:["b",r=>{const i=r.getStyle("font-weight");return i&&(i=="bold"||Number(i)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(gb,new Mz(e,gb)),e.keystrokes.set("CTRL+B",gb),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}function Dz({editor:n,commandName:e,plugin:t,icon:r,label:i,keystroke:s}){return o=>{const a=n.commands.get(e),c=new o(n.locale);return c.set({label:i,icon:r,keystroke:s,isToggleable:!0}),c.bind("isEnabled").to(a,"isEnabled"),c.bind("isOn").to(a,"value"),c instanceof Ua?c.set({role:"menuitemcheckbox"}):c.set({tooltip:!0}),t.listenTo(c,"execute",()=>{n.execute(e),n.editing.view.focus()}),c}}const O5="bold";class _ze extends gt{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,r=Dz({editor:e,commandName:O5,plugin:this,icon:Ape,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(O5,()=>r(On)),e.ui.componentFactory.add("menuBar:"+O5,()=>r(Ua))}}class Sze extends gt{static get requires(){return[wze,_ze]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const vb="italic";class kze extends gt{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:vb}),e.model.schema.setAttributeProperties(vb,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:vb,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(vb,new Mz(e,vb)),e.keystrokes.set("CTRL+I",vb),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}const R5="italic";class Cze extends gt{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,r=Dz({editor:e,commandName:R5,plugin:this,icon:o9e,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(R5,()=>r(On)),e.ui.componentFactory.add("menuBar:"+R5,()=>r(Ua))}}class Eze extends gt{static get requires(){return[kze,Cze]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const vk="underline";class Tze extends gt{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:vk}),e.model.schema.setAttributeProperties(vk,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:vk,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(vk,new Mz(e,vk)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}const M5="underline";class Aze extends gt{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,r=Dz({editor:e,commandName:M5,plugin:this,icon:S9e,label:t("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(M5,()=>r(On)),e.ui.componentFactory.add("menuBar:"+M5,()=>r(Ua))}}class Nze extends gt{static get requires(){return[Tze,Aze]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*rge(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}class jze extends ci{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,r=t.document.selection,i=t.schema,s=r.isCollapsed,o=r.getFirstRange(),a=o.start.parent,c=o.end.parent;if(i.isLimit(a)||i.isLimit(c))return!s&&a==c&&t.deleteContent(r),!1;if(s){const u=rge(e.model.schema,r.getAttributes());return kQ(e,o.start),e.setSelectionAttribute(u),!0}else{const u=!(o.start.isAtStart&&o.end.isAtEnd),d=a==c;if(t.deleteContent(r,{leaveUnmerged:u}),u){if(d)return kQ(e,r.focus),!0;e.setSelection(c,0)}}return!1}}function kQ(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}const Pze={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class ige extends wh{constructor(e){super(e);const t=this.document;let r=!1;t.on("keydown",(i,s)=>{r=s.shiftKey}),t.on("beforeinput",(i,s)=>{if(!this.isEnabled)return;let o=s.inputType;Vt.isSafari&&r&&o=="insertParagraph"&&(o="insertLineBreak");const a=s.domEvent,c=Pze[o];if(!c)return;const u=new fx(t,"enter",s.targetRanges[0]);t.fire(u,new J0(e,a,{isSoft:c.isSoft})),u.stop.called&&i.stop()})}observe(){}stopObserving(){}}class WM extends gt{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,r=t.document,i=this.editor.t;t.addObserver(ige),e.commands.add("enter",new jze(e)),this.listenTo(r,"enter",(s,o)=>{r.isComposing||o.preventDefault(),!o.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class Ize extends ci{execute(){const e=this.editor.model,t=e.document;e.change(r=>{Rze(e,r,t.selection),this.fire("afterExecute",{writer:r})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=Oze(e.schema,t.selection)}}function Oze(n,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;const r=e.getFirstRange(),i=r.start.parent,s=r.end.parent;return!((w$(i,n)||w$(s,n))&&i!==s)}function Rze(n,e,t){const r=t.isCollapsed,i=t.getFirstRange(),s=i.start.parent,o=i.end.parent,a=s==o;if(r){const c=rge(n.schema,t.getAttributes());CQ(n,e,i.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(c)}else{const c=!(i.start.isAtStart&&i.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:c}),a?CQ(n,e,t.focus):c&&e.setSelection(o,0)}}function CQ(n,e,t){const r=e.createElement("softBreak");n.insertContent(r,t),e.setSelection(r,"after")}function w$(n,e){return n.is("rootElement")?!1:e.isLimit(n)||w$(n.parent,e)}class Mze extends gt{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,r=e.conversion,i=e.editing.view,s=i.document,o=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),r.for("upcast").elementToElement({model:"softBreak",view:"br"}),r.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:c})=>c.createEmptyElement("br")}),i.addObserver(ige),e.commands.add("shiftEnter",new Ize(e)),this.listenTo(s,"enter",(a,c)=>{s.isComposing||c.preventDefault(),c.isSoft&&(e.execute("shiftEnter"),i.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Dze extends ci{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,r=t.schema,i=t.document.selection,s=Array.from(i.getSelectedBlocks()),o=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!o)this._removeQuote(a,s.filter(Aj));else{const c=s.filter(u=>Aj(u)||TQ(r,u));this._applyQuote(a,c)}})}_getValue(){const e=this.editor.model.document.selection,t=Ra(e.getSelectedBlocks());return!!(t&&Aj(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,r=Ra(e.getSelectedBlocks());return r?TQ(t,r):!1}_removeQuote(e,t){EQ(e,t).reverse().forEach(r=>{if(r.start.isAtStart&&r.end.isAtEnd){e.unwrap(r.start.parent);return}if(r.start.isAtStart){const s=e.createPositionBefore(r.start.parent);e.move(r,s);return}r.end.isAtEnd||e.split(r.end);const i=e.createPositionAfter(r.end.parent);e.move(r,i)})}_applyQuote(e,t){const r=[];EQ(e,t).reverse().forEach(i=>{let s=Aj(i.start);s||(s=e.createElement("blockQuote"),e.wrap(i,s)),r.push(s)}),r.reverse().reduce((i,s)=>i.nextSibling==s?(e.merge(e.createPositionAfter(i)),i):s)}}function Aj(n){return n.parent.name=="blockQuote"?n.parent:null}function EQ(n,e){let t,r=0;const i=[];for(;r<e.length;){const s=e[r],o=e[r+1];t||(t=n.createPositionBefore(s)),(!o||s.nextSibling!=o)&&(i.push(n.createRange(t,n.createPositionAfter(s))),t=null),r++}return i}function TQ(n,e){const t=n.checkChild(e.parent,"blockQuote"),r=n.checkChild(["$root","blockQuote"],e);return t&&r}class Lze extends gt{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[WM,Vg]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new Dze(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(o=>{const a=e.model.document.differ.getChanges();for(const c of a)if(c.type=="insert"){const u=c.position.nodeAfter;if(!u)continue;if(u.is("element","blockQuote")&&u.isEmpty)return o.remove(u),!0;if(u.is("element","blockQuote")&&!t.checkChild(c.position,u))return o.unwrap(u),!0;if(u.is("element")){const d=o.createRangeIn(u);for(const h of d.getItems())if(h.is("element","blockQuote")&&!t.checkChild(o.createPositionBefore(h),h))return o.unwrap(h),!0}}else if(c.type=="remove"){const u=c.position.parent;if(u.is("element","blockQuote")&&u.isEmpty)return o.remove(u),!0}return!1});const r=this.editor.editing.view.document,i=e.model.document.selection,s=e.commands.get("blockQuote");this.listenTo(r,"enter",(o,a)=>{if(!i.isCollapsed||!s.value)return;i.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"}),this.listenTo(r,"delete",(o,a)=>{if(a.direction!="backward"||!i.isCollapsed||!s.value)return;const c=i.getLastPosition().parent;c.isEmpty&&!c.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"})}}class Fze extends gt{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(On);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(Ua);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("blockQuote"),s=new e(t.locale),o=r.t;return s.set({label:o("Block quote"),icon:g9e,isToggleable:!0}),s.bind("isEnabled").to(i,"isEnabled"),s.bind("isOn").to(i,"value"),this.listenTo(s,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),s}}class Bze extends gt{static get requires(){return[Lze,Fze]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class $ze extends dr(){constructor(){super(...arguments);j(this,"_stack",[])}add(t,r){const i=this._stack,s=i[0];this._insertDescriptor(t);const o=i[0];s!==o&&!D5(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:r})}remove(t,r){const i=this._stack,s=i[0];this._removeDescriptor(t);const o=i[0];s!==o&&!D5(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:r})}_insertDescriptor(t){const r=this._stack,i=r.findIndex(o=>o.id===t.id);if(D5(t,r[i]))return;i>-1&&r.splice(i,1);let s=0;for(;r[s]&&Vze(r[s],t);)s++;r.splice(s,0,t)}_removeDescriptor(t){const r=this._stack,i=r.findIndex(s=>s.id===t);i>-1&&r.splice(i,1)}}function D5(n,e){return n&&e&&n.priority==e.priority&&QI(n.classes)==QI(e.classes)}function Vze(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:QI(n.classes)>QI(e.classes)}function QI(n){return Array.isArray(n)?n.sort().join(","):n}const Uze="ck-widget",AQ="ck-widget_selected";function wi(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function sge(n,e,t={}){if(!n.is("containerElement"))throw new _e("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(Uze,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=Kze,e.setCustomProperty("widgetLabel",[],n),t.label&&qze(n,t.label),t.hasSelectionHandle&&Yze(n,e),Wze(n,e),n}function zze(n,e,t){if(e.classes&&t.addClass(Ur(e.classes),n),e.attributes)for(const r in e.attributes)t.setAttribute(r,e.attributes[r],n)}function Hze(n,e,t){if(e.classes&&t.removeClass(Ur(e.classes),n),e.attributes)for(const r in e.attributes)t.removeAttribute(r,n)}function Wze(n,e,t=zze,r=Hze){const i=new $ze;i.on("change:top",(a,c)=>{c.oldDescriptor&&r(n,c.oldDescriptor,c.writer),c.newDescriptor&&t(n,c.newDescriptor,c.writer)});const s=(a,c,u)=>i.add(c,u),o=(a,c,u)=>i.remove(c,u);e.setCustomProperty("addHighlight",s,n),e.setCustomProperty("removeHighlight",o,n)}function qze(n,e){n.getCustomProperty("widgetLabel").push(e)}function Gze(n){return n.getCustomProperty("widgetLabel").reduce((t,r)=>typeof r=="function"?t?t+". "+r():r():t?t+". "+r:r,"")}function oge(n,e){const t=n.getSelectedElement();if(t){const r=lp(n);if(r)return e.createRange(e.createPositionAt(t,r))}return e.schema.findOptimalInsertionRange(n)}function Kze(){return null}function Yze(n,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(r){const i=this.toDomElement(r),s=new Fu;return s.set("content",t9e),s.render(),i.appendChild(s.element),i});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}const Yh="widget-type-around";function Uv(n,e,t){return!!n&&wi(n)&&!t.isInline(e)}function Xze(n){return n.closest(".ck-widget__type-around__button")}function Jze(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function Qze(n,e){const t=n.closest(".ck-widget");return e.mapDomToView(t)}function lp(n){return n.getAttribute(Yh)}const age=["before","after"],Zze=new DOMParser().parseFromString(v9e,"image/svg+xml").firstChild,NQ="ck-widget__type-around_disabled";class eHe extends gt{constructor(){super(...arguments);j(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[WM,Vg]}init(){const t=this.editor,r=t.editing.view;this.on("change:isEnabled",(i,s,o)=>{r.change(a=>{for(const c of r.document.roots)o?a.removeClass(NQ,c):a.addClass(NQ,c)}),o||t.model.change(a=>{a.removeSelectionAttribute(Yh)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(t,r){const i=this.editor,s=i.editing.view,o=i.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(t,r),attributes:o}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(t,r,i,s){this.listenTo(t,r,(...o)=>{this.isEnabled&&i(...o)},s)}_insertParagraphAccordingToFakeCaretPosition(){const i=this.editor.model.document.selection,s=lp(i);if(!s)return!1;const o=i.getSelectedElement();return this._insertParagraph(o,s),!0}_enableTypeAroundUIInjection(){const t=this.editor,r=t.model.schema,i=t.locale.t,s={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",(o,a,c)=>{const u=c.mapper.toViewElement(a.item);u&&Uv(u,a.item,r)&&(tHe(c.writer,s,u),u.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,r=t.model,i=r.document.selection,s=r.schema,o=t.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(c,u)=>{this._handleArrowKeyPress(c,u)},{context:[wi,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(c,u)=>{u.directChange&&t.model.change(d=>{d.removeSelectionAttribute(Yh)})}),this._listenToIfEnabled(r.document,"change:data",()=>{const c=i.getSelectedElement();if(c){const u=t.editing.mapper.toViewElement(c);if(Uv(u,c,s))return}t.model.change(u=>{u.removeSelectionAttribute(Yh)})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(c,u,d)=>{const h=d.writer;if(this._currentFakeCaretModelElement){const y=d.mapper.toViewElement(this._currentFakeCaretModelElement);y&&(h.removeClass(age.map(a),y),this._currentFakeCaretModelElement=null)}const f=u.selection.getSelectedElement();if(!f)return;const p=d.mapper.toViewElement(f);if(!Uv(p,f,s))return;const x=lp(u.selection);x&&(h.addClass(a(x),p),this._currentFakeCaretModelElement=f)}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(c,u,d)=>{d||t.model.change(h=>{h.removeSelectionAttribute(Yh)})});function a(c){return`ck-widget_type-around_show-fake-caret_${c}`}}_handleArrowKeyPress(t,r){const i=this.editor,s=i.model,o=s.document.selection,a=s.schema,c=i.editing.view,u=r.keyCode,d=k8e(u,i.locale.contentLanguageDirection),h=c.document.selection.getSelectedElement(),f=i.editing.mapper.toModelElement(h);let p;Uv(h,f,a)?p=this._handleArrowKeyPressOnSelectedWidget(d):o.isCollapsed?p=this._handleArrowKeyPressWhenSelectionNextToAWidget(d):r.shiftKey||(p=this._handleArrowKeyPressWhenNonCollapsedSelection(d)),p&&(r.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const i=this.editor.model,s=i.document.selection,o=lp(s);return i.change(a=>{if(o){if(!(o===(t?"after":"before")))return a.removeSelectionAttribute(Yh),!0}else return a.setSelectionAttribute(Yh,t?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const r=this.editor,i=r.model,s=i.schema,o=r.plugins.get("Widget"),a=o._getObjectElementNextToSelection(t),c=r.editing.mapper.toViewElement(a);return Uv(c,a,s)?(i.change(u=>{o._setSelectionOverElement(a),u.setSelectionAttribute(Yh,t?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(t){const r=this.editor,i=r.model,s=i.schema,o=r.editing.mapper,a=i.document.selection,c=t?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,u=o.toViewElement(c);return Uv(u,c,s)?(i.change(d=>{d.setSelection(c,"on"),d.setSelectionAttribute(Yh,t?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,r=t.editing.view;this._listenToIfEnabled(r.document,"mousedown",(i,s)=>{const o=Xze(s.domTarget);if(!o)return;const a=Jze(o),c=Qze(o,r.domConverter),u=t.editing.mapper.toModelElement(c);this._insertParagraph(u,a),s.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,r=t.model.document.selection,i=t.editing.view;this._listenToIfEnabled(i.document,"enter",(s,o)=>{if(s.eventPhase!="atTarget")return;const a=r.getSelectedElement(),c=t.editing.mapper.toViewElement(a),u=t.model.schema;let d;this._insertParagraphAccordingToFakeCaretPosition()?d=!0:Uv(c,a,u)&&(this._insertParagraph(a,o.isSoft?"before":"after"),d=!0),d&&(o.preventDefault(),s.stop())},{context:wi})}_enableInsertingParagraphsOnTypingKeystroke(){const r=this.editor.editing.view.document;this._listenToIfEnabled(r,"insertText",(i,s)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(s.selection=r.selection)},{priority:"high"}),Vt.isAndroid?this._listenToIfEnabled(r,"keydown",(i,s)=>{s.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(r,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const t=this.editor,r=t.editing.view,i=t.model,s=i.schema;this._listenToIfEnabled(r.document,"delete",(o,a)=>{if(o.eventPhase!="atTarget")return;const c=lp(i.document.selection);if(!c)return;const u=a.direction,d=i.document.selection.getSelectedElement(),h=c==="before",f=u=="forward";if(h===f)t.execute("delete",{selection:i.createSelection(d,"on")});else{const x=s.getNearestSelectionRange(i.createPositionAt(d,c),u);if(x)if(!x.isCollapsed)i.change(y=>{y.setSelection(x),t.execute(f?"deleteForward":"delete")});else{const y=i.createSelection(x.start);if(i.modifySelection(y,{direction:u}),!y.focus.isEqual(x.start))i.change(b=>{b.setSelection(x),t.execute(f?"deleteForward":"delete")});else{const b=iHe(s,x.start.parent);i.deleteContent(i.createSelection(b,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),o.stop()},{context:wi})}_enableInsertContentIntegration(){const t=this.editor,r=this.editor.model,i=r.document.selection;this._listenToIfEnabled(t.model,"insertContent",(s,[o,a])=>{if(a&&!a.is("documentSelection"))return;const c=lp(i);if(c)return s.stop(),r.change(u=>{const d=i.getSelectedElement(),h=r.createPositionAt(d,c),f=u.createSelection(h),p=r.insertContent(o,f);return u.setSelection(f),p})},{priority:"high"})}_enableInsertObjectIntegration(){const t=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"insertObject",(s,o)=>{const[,a,c={}]=o;if(a&&!a.is("documentSelection"))return;const u=lp(i);u&&(c.findOptimalPosition=u,o[3]=c)},{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"deleteContent",(s,[o])=>{if(o&&!o.is("documentSelection"))return;lp(i)&&s.stop()},{priority:"high"})}}function tHe(n,e,t){const r=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(i){const s=this.toDomElement(i);return nHe(s,e),rHe(s),s});n.insert(n.createPositionAt(t,"end"),r)}function nHe(n,e){for(const t of age){const r=new Tu({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(Zze,!0)]});n.appendChild(r.render())}}function rHe(n){const e=new Tu({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function iHe(n,e){let t=e;for(const r of e.getAncestors({parentFirst:!0})){if(r.childCount>1||n.isLimit(r))break;t=r}return t}function sHe(n){const e=n.model;return(t,r)=>{const i=r.keyCode==yn.arrowup,s=r.keyCode==yn.arrowdown,o=r.shiftKey,a=e.document.selection;if(!i&&!s)return;const c=s;if(o&&lHe(a,c))return;const u=oHe(n,a,c);if(u){if(u.isCollapsed){if(a.isCollapsed)return;if(o)return}(u.isCollapsed||aHe(n,u,c))&&(e.change(d=>{const h=c?u.end:u.start;if(o){const f=e.createSelection(a.anchor);f.setFocus(h),d.setSelection(f)}else d.setSelection(h)}),t.stop(),r.preventDefault(),r.stopPropagation())}}}function oHe(n,e,t){const r=n.model;if(t){const i=e.isCollapsed?e.focus:e.getLastPosition(),s=jQ(r,i,"forward");if(!s)return;const o=r.createRange(i,s),a=PQ(r.schema,o,"backward");if(a)return r.createRange(i,a)}else{const i=e.isCollapsed?e.focus:e.getFirstPosition(),s=jQ(r,i,"backward");if(!s)return;const o=r.createRange(s,i),a=PQ(r.schema,o,"forward");if(a)return r.createRange(a,i)}}function jQ(n,e,t){const r=n.schema,i=n.createRangeIn(e.root),s=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:c}of i.getWalker({startPosition:e,direction:t})){if(r.isLimit(a)&&!r.isInline(a))return o;if(c==s&&r.isBlock(a))return null}return null}function PQ(n,e,t){const r=t=="backward"?e.end:e.start;if(n.checkChild(r,"$text"))return r;for(const{nextPosition:i}of e.getWalker({direction:t}))if(n.checkChild(i,"$text"))return i}function aHe(n,e,t){const r=n.model,i=n.view.domConverter;if(t){const u=r.createSelection(e.start);r.modifySelection(u),!u.focus.isAtEnd&&!e.start.isEqual(u.focus)&&(e=r.createRange(u.focus,e.end))}const s=n.mapper.toViewRange(e),o=i.viewRangeToDom(s),a=bn.getDomRangeRects(o);let c;for(const u of a){if(c===void 0){c=Math.round(u.bottom);continue}if(Math.round(u.top)>=c)return!1;c=Math.max(c,Math.round(u.bottom))}return!0}function lHe(n,e){return!n.isCollapsed&&n.isBackward==e}class qM extends gt{constructor(){super(...arguments);j(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[eHe,Vg]}init(){const t=this.editor,r=t.editing.view,i=r.document,s=t.t;this.editor.editing.downcastDispatcher.on("selection",(o,a,c)=>{const u=c.writer,d=a.selection;if(d.isCollapsed)return;const h=d.getSelectedElement();if(!h)return;const f=t.editing.mapper.toViewElement(h);wi(f)&&c.consumable.consume(d,"selection")&&u.setSelection(u.createRangeOn(f),{fake:!0,label:Gze(f)})}),this.editor.editing.downcastDispatcher.on("selection",(o,a,c)=>{this._clearPreviouslySelectedWidgets(c.writer);const u=c.writer,d=u.document.selection;let h=null;for(const f of d.getRanges())for(const p of f){const x=p.item;wi(x)&&!dHe(x,h)&&(u.addClass(AQ,x),this._previouslySelected.add(x),h=x)}},{priority:"low"}),r.addObserver(wpe),r.addObserver(_pe),this.listenTo(i,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(i,"pointerdown",(...o)=>this._onPointerdown(...o)),this.listenTo(i,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[wi,"$text"]}),this.listenTo(i,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(i,"arrowKey",sHe(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(o,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(i,"tab",(o,a)=>{this._selectNextEditable(a.shiftKey?"backward":"forward")&&(r.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:o=>wi(o)||o.is("editableElement"),priority:"low"}),this.listenTo(i,"keydown",(o,a)=>{a.keystroke==yn.esc&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),t.accessibility.addKeystrokeInfoGroup({id:"widget",label:s("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:s("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:s("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:s("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:s("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:s("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(t,r){const i=r.target;i&&r.domEvent.detail>=3&&this._selectBlockContent(i)&&r.preventDefault()}_onPointerdown(t,r){if(!r.domEvent.isPrimary)return;const i=this.editor,s=i.editing.view,o=s.document;let a=r.target;if(!a)return;if(!wi(a)){const u=cHe(a);if(!u)return;if(wi(u))a=u;else{const d=uHe(s,r);if(d&&wi(d))a=d;else return}}(Vt.isAndroid||Vt.isiOS)&&r.preventDefault(),o.isFocused||s.focus();const c=i.editing.mapper.toModelElement(a);this._setSelectionOverElement(c)}_selectBlockContent(t){const r=this.editor,i=r.model,s=r.editing.mapper,o=i.schema,a=s.findMappedViewAncestor(this.editor.editing.view.createPositionAt(t,0)),c=hHe(s.toModelElement(a),i.schema);return c?(i.change(u=>{const d=o.isLimit(c)?null:fHe(u.createPositionAfter(c),o),h=u.createPositionAt(c,0),f=d?u.createPositionAt(d,0):u.createPositionAt(c,"end");u.setSelection(u.createRange(h,f))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(t,r){const i=r.keyCode,s=this.editor.model,o=s.schema,a=s.document.selection,c=a.getSelectedElement(),u=Ome(i,this.editor.locale.contentLanguageDirection),d=u=="down"||u=="right",h=u=="up"||u=="down";if(c&&o.isObject(c)){const p=d?a.getLastPosition():a.getFirstPosition(),x=o.getNearestSelectionRange(p,d?"forward":"backward");x&&(s.change(y=>{y.setSelection(x)}),r.preventDefault(),t.stop());return}if(!a.isCollapsed&&!r.shiftKey){const p=a.getFirstPosition(),x=a.getLastPosition(),y=p.nodeAfter,b=x.nodeBefore;(y&&o.isObject(y)||b&&o.isObject(b))&&(s.change(_=>{_.setSelection(d?x:p)}),r.preventDefault(),t.stop());return}if(!a.isCollapsed)return;const f=this._getObjectElementNextToSelection(d);if(f&&o.isObject(f)){if(o.isInline(f)&&h)return;this._setSelectionOverElement(f),r.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,r){const i=this.editor.model,s=i.schema,o=i.document.selection.getSelectedElement();o&&s.isObject(o)&&(r.preventDefault(),t.stop())}_handleDelete(t){const i=this.editor.model.document.selection;if(!this.editor.model.canEditAt(i)||!i.isCollapsed)return;const s=this._getObjectElementNextToSelection(t);if(s)return this.editor.model.change(o=>{let a=i.anchor.parent;for(;a.isEmpty;){const c=a;a=c.parent,o.remove(c)}this._setSelectionOverElement(s)}),!0}_setSelectionOverElement(t){this.editor.model.change(r=>{r.setSelection(r.createRangeOn(t))})}_getObjectElementNextToSelection(t){const r=this.editor.model,i=r.schema,s=r.document.selection,o=r.createSelection(s);if(r.modifySelection(o,{direction:t?"forward":"backward"}),o.isEqual(s))return null;const a=t?o.focus.nodeBefore:o.focus.nodeAfter;return a&&i.isObject(a)?a:null}_clearPreviouslySelectedWidgets(t){for(const r of this._previouslySelected)t.removeClass(AQ,r);this._previouslySelected.clear()}_selectNextEditable(t){const r=this.editor.editing,i=r.view,s=this.editor.model,o=i.document.selection,a=s.document.selection;let c;if(a.rangeCount>1){const d=a.isBackward?a.getFirstRange():a.getLastRange();c=r.mapper.toViewPosition(t=="forward"?d.end:d.start)}else c=t=="forward"?o.getFirstPosition():o.getLastPosition();const u=this._findNextFocusRange(c,t);return u?(s.change(d=>{d.setSelection(u)}),!0):!1}_findNextFocusRange(t,r){const i=this.editor.editing,s=i.view,o=this.editor.model,a=s.document.selection,c=a.editableElement,u=c.getPath();let d=a.getSelectedElement();d&&!wi(d)&&(d=null);const h=r=="forward"?s.createRange(t,s.createPositionAt(t.root,"end")):s.createRange(s.createPositionAt(t.root,0),t);for(const{nextPosition:f}of h.getWalker({direction:r})){const p=f.parent;if(!(p==c||p==d)){if(wi(p)){const x=i.mapper.toModelElement(p);if(!o.schema.isBlock(x))continue;if(qs(u,p.getPath())!="extension")return o.createRangeOn(x)}else if(p.is("editableElement")){const x=i.mapper.toModelPosition(f);let y=o.schema.getNearestSelectionRange(x,r);if(!y)continue;return qs(u,p.getPath())!="extension"&&(y=o.createRangeIn(x.parent)),y}}}return null}_selectAncestorWidget(){const t=this.editor,r=t.editing.mapper,s=t.editing.view.document.selection.getFirstPosition().parent,a=(s.is("$text")?s.parent:s).findAncestor(wi);if(!a)return!1;const c=r.toModelElement(a);/* istanbul ignore next -- @preserve */return c?(t.model.change(u=>{u.setSelection(c,"on")}),!0):!1}}function cHe(n){let e=n;for(;e;){if(e.is("editableElement")||wi(e))return e;e=e.parent}return null}function uHe(n,e){const t=kme(e.domEvent);let r=null;if(t?r=n.domConverter.domRangeToView(t):r=n.createRange(n.createPositionAt(e.target,0)),!r)return null;const i=r.start;if(!i.parent)return null;let s=i.parent;return i.parent.is("editableElement")&&(i.isAtEnd&&i.nodeBefore?s=i.nodeBefore:i.isAtStart&&i.nodeAfter&&(s=i.nodeAfter)),s.is("$text")?s.parent:s}function dHe(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function hHe(n,e){for(const t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function fHe(n,e){const t=new Wf({startPosition:n});for(const{item:r}of t){if(e.isLimit(r)||!r.is("element"))return null;if(e.checkChild(r,"$text"))return r}return null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class yE extends Em{constructor(t){super(t);j(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const r=this.document;this.listenTo(r,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(r,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(r,"dragover",i("dragging"),{priority:"low"});function i(s){return(o,a)=>{a.preventDefault();const c=a.dropRange?[a.dropRange]:null,u=new um(r,s);r.fire(u,{dataTransfer:a.dataTransfer,method:o.name,targetRanges:c,target:a.target,domEvent:a.domEvent}),u.stop.called&&a.stopPropagation()}}}onDomEvent(t){const r="clipboardData"in t?t.clipboardData:t.dataTransfer,i=t.type=="drop"||t.type=="paste",s={dataTransfer:new qme(r,{cacheFiles:i})};if(t.type=="drop"||t.type=="dragover"){const o=kme(t);s.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(t.type,t,s)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mHe(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pHe(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const IQ=["figcaption","li"],OQ=["ol","ul"];function lge(n,e){if(e.is("$text")||e.is("$textProxy"))return e.data;if(e.is("element","img")&&e.hasAttribute("alt"))return e.getAttribute("alt");if(e.is("element","br"))return`
`;let t="",r=null;for(const i of e.getChildren())t+=gHe(i,r)+lge(n,i),r=i;if(e.is("rawElement")){const s=document.implementation.createHTMLDocument("").createElement("div");e.render(s,n),t+=cge(s)}return t}function cge(n){let e="";if(n.nodeType===Node.TEXT_NODE)return n.textContent;if(n.tagName==="BR")return`
`;for(const t of n.childNodes)e+=cge(t);return e}function gHe(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||OQ.includes(n.name)&&OQ.includes(e.name)?`

`:!n.is("containerElement")&&!e.is("containerElement")?"":IQ.includes(n.name)||IQ.includes(e.name)?`
`:n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class uge extends gt{constructor(){super(...arguments);j(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(t,r){this._markersToCopy.set(t,r)}_copySelectedFragmentWithMarkers(t,r,i=s=>s.model.getSelectedContent(s.model.document.selection)){return this.editor.model.change(s=>{const o=s.model.document.selection;s.setSelection(r);const a=this._insertFakeMarkersIntoSelection(s,s.model.document.selection,t),c=i(s),u=this._removeFakeMarkersInsideElement(s,c);for(const[d,h]of Object.entries(a)){u[d]||(u[d]=s.createRangeIn(c));for(const f of h)s.remove(f)}c.markers.clear();for(const[d,h]of Object.entries(u))c.markers.set(d,h);return s.setSelection(o),c})}_pasteMarkersIntoTransformedElement(t,r){const i=this._getPasteMarkersFromRangeMap(t);return this.editor.model.change(s=>{const o=this._insertFakeMarkersElements(s,i),a=r(s),c=this._removeFakeMarkersInsideElement(s,a);for(const u of Object.values(o).flat())s.remove(u);for(const[u,d]of Object.entries(c))s.model.markers.has(u)||s.addMarker(u,{usingOperation:!0,affectsData:!0,range:d});return a})}_pasteFragmentWithMarkers(t){const r=this._getPasteMarkersFromRangeMap(t.markers);t.markers.clear();for(const i of r)t.markers.set(i.name,i.range);return this.editor.model.insertContent(t)}_forceMarkersCopy(t,r,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const s=this._markersToCopy.get(t);this._markersToCopy.set(t,i),r(),s?this._markersToCopy.set(t,s):this._markersToCopy.delete(t)}_isMarkerCopyable(t,r){const i=this._getMarkerClipboardConfig(t);if(!i)return!1;if(!r)return!0;const{allowedActions:s}=i;return s==="all"||s.includes(r)}_hasMarkerConfiguration(t){return!!this._getMarkerClipboardConfig(t)}_getMarkerClipboardConfig(t){const[r]=t.split(":");return this._markersToCopy.get(r)||null}_insertFakeMarkersIntoSelection(t,r,i){const s=this._getCopyableMarkersFromSelection(t,r,i);return this._insertFakeMarkersElements(t,s)}_getCopyableMarkersFromSelection(t,r,i){const s=Array.from(r.getRanges()),o=new Set(s.flatMap(c=>Array.from(t.model.markers.getMarkersIntersectingRange(c)))),a=c=>{if(!this._isMarkerCopyable(c.name,i))return!1;const{copyPartiallySelected:d}=this._getMarkerClipboardConfig(c.name);if(!d){const h=c.getRange();return s.some(f=>f.containsRange(h,!0))}return!0};return Array.from(o).filter(a).map(c=>({name:i==="dragstart"?this._getUniqueMarkerName(c.name):c.name,range:c.getRange()}))}_getPasteMarkersFromRangeMap(t,r=null){const{model:i}=this.editor;return(t instanceof Map?Array.from(t.entries()):Object.entries(t)).flatMap(([o,a])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:a}];if(this._isMarkerCopyable(o,r)){const c=this._getMarkerClipboardConfig(o),u=i.markers.has(o)&&i.markers.get(o).getRange().root.rootName==="$graveyard";return(c.duplicateOnPaste||u)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:a}]}return[]})}_insertFakeMarkersElements(t,r){const i={},s=r.flatMap(o=>{const{start:a,end:c}=o.range;return[{position:a,marker:o,type:"start"},{position:c,marker:o,type:"end"}]}).sort(({position:o},{position:a})=>o.isBefore(a)?1:-1);for(const{position:o,marker:a,type:c}of s){const u=t.createElement("$marker",{"data-name":a.name,"data-type":c});i[a.name]||(i[a.name]=[]),i[a.name].push(u),t.insert(u,o)}return i}_removeFakeMarkersInsideElement(t,r){const s=this._getAllFakeMarkersFromElement(t,r).reduce((o,a)=>{const c=a.markerElement&&t.createPositionBefore(a.markerElement);let u=o[a.name],d=!1;return u!=null&&u.start&&(u!=null&&u.end)&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?o[this._getUniqueMarkerName(a.name)]=o[a.name]:d=!0,u=null),d||(o[a.name]={...u,[a.type]:c}),a.markerElement&&t.remove(a.markerElement),o},{});return SFe(s,o=>new Le(o.start||t.createPositionFromPath(r,[0]),o.end||t.createPositionAt(r,"end")))}_getAllFakeMarkersFromElement(t,r){const i=Array.from(t.createRangeIn(r)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const c=a.getAttribute("data-name"),u=a.getAttribute("data-type");return[{markerElement:a,name:c,type:u}]}),s=[],o=[];for(const a of i)a.type==="end"&&(i.some(u=>u.name===a.name&&u.type==="start")||s.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(i.some(u=>u.name===a.name&&u.type==="end")||o.unshift({markerElement:null,name:a.name,type:"end"}));return[...s,...i,...o]}_getUniqueMarkerName(t){const r=t.split(":"),i=Xo().substring(1,6);return r.length===3?`${r.slice(0,2).join(":")}:${i}`:`${r.join(":")}:${i}`}}class ph extends gt{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[uge]}init(){this.editor.editing.view.addObserver(yE),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,r){const i=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:r==="cut"},()=>{const s=i._copySelectedFragmentWithMarkers(r,t);this.fire("outputTransformation",{dataTransfer:e,content:s,method:r})})}_setupPasteDrop(){const e=this.editor,t=e.model,r=e.editing.view,i=r.document,s=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(i,"clipboardInput",(o,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(i,"clipboardInput",(o,a)=>{const c=a.dataTransfer;let u;if(a.content)u=a.content;else{let f="";c.getData("text/html")?f=pHe(c.getData("text/html")):c.getData("text/plain")&&(f=mHe(c.getData("text/plain"))),u=this.editor.data.htmlProcessor.toView(f)}const d=new um(this,"inputTransformation"),h=c.getData("application/ckeditor5-editor-id")||null;this.fire(d,{content:u,dataTransfer:c,sourceEditorId:h,targetRanges:a.targetRanges,method:a.method}),d.stop.called&&o.stop(),r.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const u=this.editor.data.toModel(a.content,"$clipboardHolder");u.childCount!=0&&(o.stop(),t.change(()=>{this.fire("contentInsertion",{content:u,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=s._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,i=e.editing.view.document,s=(o,a)=>{const c=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(c,t.selection,o.name)};this.listenTo(i,"copy",s,{priority:"low"}),this.listenTo(i,"cut",(o,a)=>{e.model.canEditAt(e.model.document.selection)?s(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const c=e.data.toView(a.content,{isClipboardPipeline:!0});i.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:c,method:a.method})},{priority:"low"}),this.listenTo(i,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",lge(e.data.htmlProcessor.domConverter,a.content)),a.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}const L5=AA("px");class vHe extends Ut{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>L5(t)),top:e.to("top",t=>L5(t)),width:e.to("width",t=>L5(t))}}})}}class Nj extends gt{constructor(){super(...arguments);j(this,"removeDropMarkerDelayed",mz(()=>this.removeDropMarker(),40));j(this,"_updateDropMarkerThrottled",DI(t=>this._updateDropMarker(t),40));j(this,"_reconvertMarkerThrottled",DI(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));j(this,"_dropTargetLineView",new vHe);j(this,"_domEmitter",new(Pc()));j(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:t}of this._scrollables.values())t.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(t,r,i,s,o,a){this.removeDropMarkerDelayed.cancel();const c=RQ(this.editor,t,r,i,s,o,a);/* istanbul ignore next -- @preserve */if(c){if(a&&a.containsRange(c))return this.removeDropMarker();this._updateDropMarkerThrottled(c)}}getFinalDropRange(t,r,i,s,o,a){const c=RQ(this.editor,t,r,i,s,o,a);return this.removeDropMarker(),c}removeDropMarker(){const t=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,t.markers.has("drop-target")&&t.change(r=>{r.removeMarker("drop-target")})}_setupDropMarker(){const t=this.editor;t.ui.view.body.add(this._dropTargetLineView),t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(r,{writer:i})=>{if(t.model.schema.checkChild(r.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);r.markerRange.isCollapsed?this._updateDropTargetLine(r.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(t){const r=this.editor,i=r.model.markers;r.model.change(s=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(t)||s.updateMarker("drop-target",{range:t}):s.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(t){return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(r){const i=this.toDomElement(r);return i.append("⁠",r.createElement("span"),"⁠"),i})}_updateDropTargetLine(t){const r=this.editor.editing,i=t.start.nodeBefore,s=t.start.nodeAfter,o=t.start.parent,a=i?r.mapper.toViewElement(i):null,c=a?r.view.domConverter.mapViewToDom(a):null,u=s?r.mapper.toViewElement(s):null,d=u?r.view.domConverter.mapViewToDom(u):null,h=r.mapper.toViewElement(o);if(!h)return;const f=r.view.domConverter.mapViewToDom(h),p=this._getScrollableRect(h),{scrollX:x,scrollY:y}=yt.window,b=c?new bn(c):null,_=d?new bn(d):null,C=new bn(f).excludeScrollbarsAndBorders(),k=b?b.bottom:C.top,T=_?_.top:C.bottom,E=yt.window.getComputedStyle(f),N=k<=T?(k+T)/2:T;if(p.top<N&&N<p.bottom){const P=C.left+parseFloat(E.paddingLeft),M=C.right-parseFloat(E.paddingRight),O=Math.max(P+x,p.left),q=Math.min(M+x,p.right);this._dropTargetLineView.set({isVisible:!0,left:O,top:N+y,width:q-O})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(t){const r=t.root.rootName;let i;if(this._scrollables.has(r))i=this._scrollables.get(r).domElement;else{const s=this.editor.editing.view.domConverter.mapViewToDom(t);i=xHe(s),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new uz(i,this._reconvertMarkerThrottled);this._scrollables.set(r,{domElement:i,resizeObserver:o})}return new bn(i).excludeScrollbarsAndBorders()}}function RQ(n,e,t,r,i,s,o){const a=n.model,c=n.editing.mapper;let d=MQ(n,e);for(;d;){if(!s){if(a.schema.checkChild(d,"$text")){if(t){const h=t[0].start,f=c.toModelPosition(h);if(!o||Array.from(o.getItems({shallow:!0})).every(x=>a.schema.checkChild(f,x))){if(a.schema.checkChild(f,"$text"))return a.createRange(f);if(h)return jj(n,MQ(n,h.parent),r,i)}}}else if(a.schema.isInline(d))return jj(n,d,r,i)}if(a.schema.isBlock(d))return jj(n,d,r,i);if(a.schema.checkChild(d,"$block")){const h=Array.from(d.getChildren()).filter(x=>x.is("element")&&!yHe(n,x));let f=0,p=h.length;if(p==0)return a.createRange(a.createPositionAt(d,"end"));for(;f<p-1;){const x=Math.floor((f+p)/2);dge(n,h[x],r,i)=="before"?p=x:f=x}return jj(n,h[f],r,i)}d=d.parent}return null}function yHe(n,e){const t=n.editing.mapper,r=n.editing.view.domConverter,i=t.toViewElement(e);if(!i)return!0;const s=r.mapViewToDom(i);return yt.window.getComputedStyle(s).float!="none"}function jj(n,e,t,r){const i=n.model;return i.createRange(i.createPositionAt(e,dge(n,e,t,r)))}function dge(n,e,t,r){const i=n.editing.mapper,s=n.editing.view.domConverter,o=i.toViewElement(e),a=s.mapViewToDom(o),c=new bn(a);return n.model.schema.isInline(e)?t<(c.left+c.right)/2?"before":"after":r<(c.top+c.bottom)/2?"before":"after"}function MQ(n,e){const t=n.editing.mapper,r=n.editing.view,i=t.toModelElement(e);if(i)return i;const s=r.createPositionBefore(e),o=t.findMappedViewAncestor(s);return t.toModelElement(o)}function xHe(n){let e=n;do{e=e.parentElement;const t=yt.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}class bHe extends gt{constructor(){super(...arguments);j(this,"_isBlockDragging",!1);j(this,"_domEmitter",new(Pc()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(this.listenTo(t,"change:isReadOnly",(r,i,s)=>{s?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Vt.isAndroid&&this.forceDisabled("noAndroidSupport"),t.plugins.has("BlockToolbar")){const i=t.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(i,"dragstart",(s,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(yt.document,"dragover",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(yt.document,"drop",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(yt.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&i.setAttribute("draggable","true"),this.on("change:isEnabled",(s,o,a)=>{i.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(t){if(!this.isEnabled)return;const r=this.editor.model,i=r.document.selection,s=this.editor.editing.view,o=Array.from(i.getSelectedBlocks()),a=r.createRange(r.createPositionBefore(o[0]),r.createPositionAfter(o[o.length-1]));r.change(c=>c.setSelection(a)),this._isBlockDragging=!0,s.focus(),s.getObserver(yE).onDomEvent(t)}_handleBlockDragging(t){if(!this.isEnabled||!this._isBlockDragging)return;const r=t.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=t.clientY,s=document.elementFromPoint(r,i),o=this.editor.editing.view;!s||!s.closest(".ck-editor__editable")||o.getObserver(yE).onDomEvent({...t,type:t.type,dataTransfer:t.dataTransfer,target:s,clientX:r,clientY:i,preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class wHe extends gt{constructor(){super(...arguments);j(this,"_draggedRange");j(this,"_draggingUid");j(this,"_draggableElement");j(this,"_clearDraggableAttributesDelayed",mz(()=>this._clearDraggableAttributes(),40));j(this,"_blockMode",!1);j(this,"_domEmitter",new(Pc()));j(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[ph,qM,Nj,bHe]}init(){const t=this.editor,r=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,r.addObserver(yE),r.addObserver(_pe),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(i,s,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,s,o)=>{o||this._finalizeDragging(!1)}),Vt.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,r=t.model,i=t.editing.view,s=i.document,o=t.plugins.get(Nj);this.listenTo(s,"dragstart",(a,c)=>{var y;if((y=c.target)!=null&&y.is("editableElement")){c.preventDefault();return}if(this._prepareDraggedRange(c.target),!this._draggedRange){c.preventDefault();return}this._draggingUid=Xo(),c.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",c.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const u=r.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(c.dataTransfer,u,"dragstart");const{dataTransfer:h,domTarget:f,domEvent:p}=c,{clientX:x}=p;this._updatePreview({dataTransfer:h,domTarget:f,clientX:x}),c.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(s,"dragend",(a,c)=>{this._finalizeDragging(!c.dataTransfer.isCanceled&&c.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(yt.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(s,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(s,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(s,"dragging",(a,c)=>{if(!this.isEnabled){c.dataTransfer.dropEffect="none";return}const{clientX:u,clientY:d}=c.domEvent;o.updateDropMarker(c.target,c.targetRanges,u,d,this._blockMode,this._draggedRange),this._draggedRange||(c.dataTransfer.dropEffect="copy"),Vt.isGecko||(c.dataTransfer.effectAllowed=="copy"?c.dataTransfer.dropEffect="copy":["all","copyMove"].includes(c.dataTransfer.effectAllowed)&&(c.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor,i=t.editing.view.document,s=t.plugins.get(Nj);this.listenTo(i,"clipboardInput",(o,a)=>{if(a.method!="drop")return;const{clientX:c,clientY:u}=a.domEvent,d=s.getFinalDropRange(a.target,a.targetRanges,c,u,this._blockMode,this._draggedRange);if(!d){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),DQ(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(d,!0)){this._finalizeDragging(!1),o.stop();return}a.targetRanges=[t.editing.mapper.toViewRange(d)]},{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(ph);t.on("contentInsertion",(r,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=i.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(s))},{priority:"high"}),t.on("contentInsertion",(r,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=DQ(i.dataTransfer)=="move",o=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(o&&s)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,r=t.editing.view,i=r.document;this.listenTo(i,"pointerdown",(s,o)=>{if(Vt.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let a=LQ(o.target);if(Vt.isBlink&&!t.isReadOnly&&!a&&!i.selection.isCollapsed){const c=i.selection.getSelectedElement();(!c||!wi(c))&&(a=i.selection.editableElement)}a&&(r.change(c=>{c.setAttribute("draggable","true",a)}),this._draggableElement=t.editing.mapper.toModelElement(a))}),this.listenTo(i,"pointerup",()=>{Vt.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(r=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&r.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(t){const r=this.editor,i=r.model;r.plugins.get(Nj).removeDropMarker(),this._clearDraggableAttributes(),r.plugins.has("WidgetToolbarRepository")&&r.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(t&&this.isEnabled&&i.change(o=>{const a=i.createSelection(this._draggedRange);i.deleteContent(a,{doNotAutoparagraph:!0});const c=a.getFirstPosition().parent;c.isEmpty&&!i.schema.checkChild(c,"$text")&&i.schema.checkChild(c,"paragraph")&&o.insertElement("paragraph",c,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(t){const r=this.editor,i=r.model,s=i.document.selection,o=t?LQ(t):null;if(o){const d=r.editing.mapper.toModelElement(o);this._draggedRange=Pl.fromRange(i.createRangeOn(d)),this._blockMode=i.schema.isBlock(d),r.plugins.has("WidgetToolbarRepository")&&r.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(s.isCollapsed&&!s.getFirstPosition().parent.isEmpty)return;const a=Array.from(s.getSelectedBlocks()),c=s.getFirstRange();if(a.length==0){this._draggedRange=Pl.fromRange(c);return}const u=hge(i,a);if(a.length>1)this._draggedRange=Pl.fromRange(u),this._blockMode=!0;else if(a.length==1){const d=c.start.isTouching(u.start)&&c.end.isTouching(u.end);this._draggedRange=Pl.fromRange(d?u:c),this._blockMode=d}i.change(d=>d.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:t,domTarget:r,clientX:i}){const s=this.editor.editing.view,o=s.document.selection.editableElement,a=s.domConverter.mapViewToDom(o),c=yt.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=wl(yt.document,"div",{style:"position: fixed; left: -999999px;"}),yt.document.body.appendChild(this._previewContainer));const u=wl(yt.document,"div");u.className="ck ck-content ck-clipboard-preview";const d=new bn(a),h=parseFloat(c.paddingLeft),f=parseFloat(c.paddingRight),p=parseFloat(c.width)-h-f;if(a.contains(r))if(Vt.isiOS)u.style.maxWidth=`${p}px`,u.style.padding="10px",u.style.minWidth="200px",u.style.minHeight="20px",u.style.boxSizing="border-box",u.style.backgroundColor="var(--ck-color-base-background)";else return;else if(Vt.isiOS)u.style.width=`${p}px`,u.style.backgroundColor="var(--ck-color-base-background)";else{const x=d.left-i+h;u.style.width=`${p+x}px`,u.style.paddingLeft=`${x}px`}s.domConverter.setContentOf(u,t.getData("text/html")),t.setDragImage(u,0,0),this._previewContainer.appendChild(u)}}function DQ(n){return Vt.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function LQ(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(wi);if(wi(n))return n;const e=n.findAncestor(t=>wi(t)||t.is("editableElement"));return wi(e)?e:null}function hge(n,e){const t=e[0],r=e[e.length-1],i=t.getCommonAncestor(r),s=n.createPositionBefore(t),o=n.createPositionAfter(r);if(i&&i.is("element")&&!n.schema.isLimit(i)){const a=n.createRangeOn(i),c=s.isTouching(a.start),u=o.isTouching(a.end);if(c&&u)return hge(n,[i])}return n.createRange(s,o)}class _He extends gt{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[ph]}init(){const e=this.editor,t=e.model,r=e.editing.view,i=t.document.selection;r.addObserver(yE),e.plugins.get(ph).on("contentInsertion",(s,o)=>{SHe(o.content,t)&&t.change(a=>{const c=Array.from(i.getAttributes()).filter(([d])=>t.schema.getAttributeProperties(d).isFormatting);i.isCollapsed||t.deleteContent(i,{doNotAutoparagraph:!0}),c.push(...i.getAttributes());const u=a.createRangeIn(o.content);for(const d of u.getItems())for(const h of c)t.schema.checkAttribute(d,h[0])&&a.setAttribute(h[0],h[1],d)})})}}function SHe(n,e){let t=e.createRangeIn(n);if(n.childCount==1){const r=n.getChild(0);r.is("element")&&e.schema.isBlock(r)&&!e.schema.isObject(r)&&!e.schema.isLimit(r)&&(t=e.createRangeIn(r))}for(const r of t.getItems())if(!e.schema.isInline(r)||Array.from(r.getAttributeKeys()).find(s=>e.schema.getAttributeProperties(s).isFormatting))return!1;return!0}class fge extends gt{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[uge,ph,wHe,_He]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class kHe extends KUe{constructor(t,r){super(t);j(this,"view");j(this,"_toolbarConfig");j(this,"_elementReplacer");this.view=r,this._toolbarConfig=Upe(t.config.get("toolbar")),this._elementReplacer=new bme,this.listenTo(t.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(t){const r=this.editor,i=this.view,s=r.editing.view,o=i.editable,a=s.document.getRoot();o.name=a.rootName,i.render();const c=o.element;this.setEditableElement(o.name,c),i.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(c),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),i.menuBarView&&this.initMenuBar(i.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const t=this.view,r=this.editor.editing.view;this._elementReplacer.restore(),r.getDomRoot(t.editable.name)&&r.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:r})=>r||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,r=t.editing.view,i=r.document.getRoot(),s=t.sourceElement;let o;const a=t.config.get("placeholder");a&&(o=typeof a=="string"?a:a[this.view.editable.name]),!o&&s&&s.tagName.toLowerCase()==="textarea"&&(o=s.getAttribute("placeholder")),o&&(i.placeholder=o),Y8e({view:r,element:i,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:t}=this.view,r=this.editor.plugins.get("ContextualBalloon");r.on("getPositionOptions",s=>{const o=s.return;if(!o||!t.isSticky||!t.element)return;const a=new bn(t.element).height,c=typeof o.target=="function"?o.target():o.target,u=typeof o.limiter=="function"?o.limiter():o.limiter;if(c&&u&&new bn(c).height>=new bn(u).height-a)return;const d={...o.viewportOffsetConfig},h=(d.top||0)+a;s.return={...o,viewportOffsetConfig:{...d,top:h}}},{priority:"low"});const i=()=>{r.visibleView&&r.updatePosition()};this.listenTo(t,"change:isSticky",i),this.listenTo(this.editor.ui,"change:viewportOffset",i)}_handleScrollToTheSelectionWithStickyPanel(t,r,i){const s=this.view.stickyPanel;if(s.isSticky){const o=new bn(s.element).height;r.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(i)};this.listenTo(s,"change:isSticky",o),setTimeout(()=>{this.stopListening(s,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const t=this.view.stickyPanel,r=this.editor.plugins.get("Dialog");r.on("show",()=>{const i=r.view;i.on("moveTo",(s,o)=>{if(!t.isSticky||i.wasMoved||i.isModal)return;const a=new bn(t.contentPanelElement);o[1]<a.bottom+vE.defaultOffset&&(o[1]=a.bottom+vE.defaultOffset)},{priority:"high"})},{priority:"low"})}}class CHe extends XUe{constructor(t,r,i={}){super(t);j(this,"stickyPanel");j(this,"toolbar");j(this,"editable");this.stickyPanel=new nze(t),this.toolbar=new Rz(t,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),i.useMenuBar&&(this.menuBarView=new oze(t)),this.editable=new QUe(t,r,void 0,{label:i.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class EHe extends YVe(Tb){constructor(t,r={}){if(!SP(t)&&r.initialData!==void 0)throw new _e("editor-create-initial-data",null);super(r);j(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",THe(t)),SP(t)&&(this.sourceElement=t),this.model.document.createRoot();const i=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=this.config.get("menuBar"),o=new CHe(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i,useMenuBar:s.isVisible,label:this.config.get("label")});this.ui=new kHe(this,o),GVe(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,r={}){return new Promise(i=>{const s=new this(t,r);i(s.initPlugins().then(()=>s.ui.init(SP(t)?t:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}function THe(n){return SP(n)?c8e(n):n}function SP(n){return Bg(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AHe extends ci{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let r=e.schema.getLimitElement(t);if(t.containsEntireContent(r)||!FQ(e.schema,r))do if(r=r.parent,!r)return;while(!FQ(e.schema,r));e.change(i=>{i.setSelection(r,"in")})}}function FQ(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}const NHe=fz("Ctrl+A");class jHe extends gt{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=e.editing.view.document;e.commands.add("selectAll",new AHe(e)),this.listenTo(i,"keydown",(s,o)=>{__(o)===NHe&&(e.execute("selectAll"),o.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}class PHe extends gt{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(On);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Ua))}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("selectAll"),s=new e(t.locale),o=r.t;return s.set({label:o("Select all"),icon:y9e,keystroke:"Ctrl+A"}),s.bind("isEnabled").to(i,"isEnabled"),this.listenTo(s,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),s}}class IHe extends gt{static get requires(){return[jHe,PHe]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class mge extends ci{constructor(t){super(t);j(this,"_stack",[]);j(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(t.data,"set",(r,i)=>{i[1]={...i[1]};const s=i[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(t.data,"set",(r,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(t){const r=this.editor.model.document.selection,i={ranges:r.hasOwnRange?Array.from(r.getRanges()):[],isBackward:r.isBackward};this._stack.push({batch:t,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,r,i){const s=this.editor.model,o=s.document,a=[],c=t.map(d=>d.getTransformedByOperations(i)),u=c.flat();for(const d of c){const h=d.filter(f=>f.root!=o.graveyard).filter(f=>!RHe(f,u));h.length&&(OHe(h),a.push(h[0]))}a.length&&s.change(d=>{d.setSelection(a,{backward:r})})}_undo(t,r){const i=this.editor.model,s=i.document;this._createdBatches.add(r);const o=t.operations.slice().filter(a=>a.isDocumentOperation);o.reverse();for(const a of o){const c=a.baseVersion+1,u=Array.from(s.history.getOperations(c)),h=B7e([a.getReversed()],u,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let f of h){const p=f.affectedSelectable;p&&!i.canEditAt(p)&&(f=new ls(f.baseVersion)),r.addOperation(f),i.applyOperation(f),s.history.setOperationAsUndone(a,f)}}}}function OHe(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const r=n[e-1].getJoined(n[e],!0);r&&(e--,n.splice(e,2,r))}}function RHe(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}class MHe extends mge{execute(e=null){const t=e?this._stack.findIndex(s=>s.batch==e):this._stack.length-1,r=this._stack.splice(t,1)[0],i=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(i,()=>{this._undo(r.batch,i);const s=this.editor.model.document.history.getOperations(r.batch.baseVersion);this._restoreSelection(r.selection.ranges,r.selection.isBackward,s)}),this.fire("revert",r.batch,i),this.refresh()}}class DHe extends mge{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const i=e.batch.operations[e.batch.operations.length-1].baseVersion+1,s=this.editor.model.document.history.getOperations(i);this._restoreSelection(e.selection.ranges,e.selection.isBackward,s),this._undo(e.batch,t)}),this.fire("revert",e.batch,t),this.refresh()}}class LHe extends gt{constructor(){super(...arguments);j(this,"_undoCommand");j(this,"_redoCommand");j(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.t;this._undoCommand=new MHe(t),this._redoCommand=new DHe(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(i,s)=>{const o=s[0];if(!o.isDocumentOperation)return;const a=o.batch,c=this._redoCommand.createdBatches.has(a),u=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(c?this._undoCommand.addBatch(a):u||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,s,o)=>{this._redoCommand.addBatch(o)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Undo"),keystroke:"CTRL+Z"},{label:r("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class FHe extends gt{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale,r=e.t,i=t.uiLanguageDirection=="ltr"?KJ:GJ,s=t.uiLanguageDirection=="ltr"?GJ:KJ;this._addButtonsToFactory("undo",r("Undo"),"CTRL+Z",i),this._addButtonsToFactory("redo",r("Redo"),"CTRL+Y",s)}_addButtonsToFactory(e,t,r,i){const s=this.editor;s.ui.componentFactory.add(e,()=>{const o=this._createButton(On,e,t,r,i);return o.set({tooltip:!0}),o}),s.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(Ua,e,t,r,i))}_createButton(e,t,r,i,s){const o=this.editor,a=o.locale,c=o.commands.get(t),u=new e(a);return u.set({label:r,icon:s,keystroke:i}),u.bind("isEnabled").to(c,"isEnabled"),this.listenTo(u,"execute",()=>{o.execute(t),o.editing.view.focus()}),u}}class Lz extends gt{static get requires(){return[LHe,FHe]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BHe extends gt{static get requires(){return[nUe,fge,WM,IHe,Mze,yze,Lz]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function BQ(n){return n.map(e=>$He(e)).filter(e=>e!==void 0)}const $Q={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function $He(n){if(typeof n=="number"&&(n=String(n)),typeof n=="object"&&zHe(n))return _$(n);const e=UHe(n);if(e)return _$(e);if(n==="default")return{model:void 0,title:"Default"};if(!HHe(n))return VHe(n)}function VHe(n){return typeof n=="string"&&(n={title:n,model:`${parseFloat(n)}px`}),n.view={name:"span",styles:{"font-size":n.model}},_$(n)}function _$(n){return n.view&&typeof n.view!="string"&&!n.view.priority&&(n.view.priority=7),n}function UHe(n){return typeof n=="string"?$Q[n]:$Q[n.model]}function zHe(n){return n.title&&n.model&&n.view}function HHe(n){let e;if(typeof n=="object")if(n.model)e=parseFloat(n.model);else throw new _e("font-size-invalid-definition",null,n);else e=parseFloat(n);return isNaN(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class WHe extends ci{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,r=Ra(t.selection.getSelectedBlocks());this.value=!!r&&r.is("element","paragraph"),this.isEnabled=!!r&&VQ(r,e.schema)}execute(e={}){const t=this.editor.model,r=t.document,i=e.selection||r.selection;t.canEditAt(i)&&t.change(s=>{const o=i.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&VQ(a,t.schema)&&s.rename(a,"paragraph")})}}function VQ(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}class qHe extends ci{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,r=e.attributes;let i=e.position;return t.canEditAt(i)?t.change(s=>{if(i=this._findPositionToInsertParagraph(i,s),!i)return null;const o=s.createElement("paragraph");return r&&t.schema.setAllowedAttributes(o,r,s),t.insertContent(o,i),s.setSelection(o,"in"),s.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(e,t){const r=this.editor.model;if(r.schema.checkChild(e,"paragraph"))return e;const i=r.schema.findAllowedParent(e,"paragraph");if(!i)return null;const s=e.parent,o=r.schema.checkChild(s,"$text");return s.isEmpty||o&&e.isAtEnd?r.createPositionAfter(s):!s.isEmpty&&o&&e.isAtStart?r.createPositionBefore(s):t.split(e,i).position}}const wR=class wR extends gt{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new WHe(e)),e.commands.add("insertParagraph",new qHe(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(r,{writer:i})=>!wR.paragraphLikeElements.has(r.name)||r.isEmpty?null:i.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};j(wR,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let ZI=wR;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class GHe extends ci{constructor(t,r){super(t);j(this,"modelElements");this.modelElements=r}refresh(){const t=Ra(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(r=>UQ(t,r,this.editor.model.schema))}execute(t){const r=this.editor.model,i=r.document,s=t.value;r.change(o=>{const a=Array.from(i.selection.getSelectedBlocks()).filter(c=>UQ(c,s,r.schema));for(const c of a)c.is("element",s)||o.rename(c,s)})}}function UQ(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}const zQ="paragraph";class KHe extends gt{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[ZI]}init(){const e=this.editor,t=e.config.get("heading.options"),r=[];for(const i of t)i.model!=="paragraph"&&(e.model.schema.register(i.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(i),r.push(i.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new GHe(e,r))}afterInit(){const e=this.editor,t=e.commands.get("enter"),r=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(i,s)=>{const o=e.model.document.selection.getFirstPosition().parent;r.some(c=>o.is("element",c.model))&&!o.is("element",zQ)&&o.childCount===0&&s.writer.rename(o,zQ)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Ng.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function YHe(n){const e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(r=>{const i=t[r.title];return i&&i!=r.title&&(r.title=i),r})}class XHe extends gt{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,r=YHe(e),i=t("Choose heading"),s=t("Heading");e.ui.componentFactory.add("heading",o=>{const a={},c=new Gu,u=e.commands.get("heading"),d=e.commands.get("paragraph"),h=[u];for(const p of r){const x={type:"button",model:new ZUe({label:p.title,class:p.class,role:"menuitemradio",withText:!0})};p.model==="paragraph"?(x.model.bind("isOn").to(d,"value"),x.model.set("commandName","paragraph"),h.push(d)):(x.model.bind("isOn").to(u,"value",y=>y===p.model),x.model.set({commandName:"heading",commandValue:p.model})),c.add(x),a[p.model]=p.title}const f=UM(o);return kUe(f,c,{ariaLabel:s,role:"menu"}),f.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),f.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),f.bind("isEnabled").toMany(h,"isEnabled",(...p)=>p.some(x=>x)),f.buttonView.bind("label").to(u,"value",d,"value",(p,x)=>{const y=x?"paragraph":p;return typeof y=="boolean"||!a[y]?i:a[y]}),f.buttonView.bind("ariaLabel").to(u,"value",d,"value",(p,x)=>{const y=x?"paragraph":p;return typeof y=="boolean"||!a[y]?s:`${a[y]}, ${s}`}),this.listenTo(f,"execute",p=>{const{commandName:x,commandValue:y}=p.source;e.execute(x,y?{value:y}:void 0),e.editing.view.focus()}),f}),e.ui.componentFactory.add("menuBar:heading",o=>{const a=new B0(o),c=e.commands.get("heading"),u=e.commands.get("paragraph"),d=[c],h=new JI(o);a.set({class:"ck-heading-dropdown"}),h.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(h);for(const f of r){const p=new zM(o,a),x=new Ua(o);p.children.add(x),h.items.add(p),x.set({isToggleable:!0,label:f.title,role:"menuitemradio",class:f.class}),x.delegate("execute").to(a),x.on("execute",()=>{const y=f.model==="paragraph"?"paragraph":"heading";e.execute(y,{value:f.model}),e.editing.view.focus()}),f.model==="paragraph"?(x.bind("isOn").to(u,"value"),d.push(u)):x.bind("isOn").to(c,"value",y=>y===f.model)}return a.bind("isEnabled").toMany(d,"isEnabled",(...f)=>f.some(p=>p)),a})}}class JHe extends gt{static get requires(){return[KHe,XHe]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function QHe(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function HQ(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function pge(n,e){const t=n.plugins.get("ImageUtils"),r=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return s=>t.isInlineImageView(s)?r&&(s.getStyle("display")=="block"||s.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:i(s):null;function i(s){const o={name:!0};return s.hasAttribute("src")&&(o.attributes=["src"]),o}}function Fz(n,e){const t=Ra(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function eO(n){return n&&n.endsWith("px")?parseInt(n):null}function WQ(n){const e=eO(n.getStyle("width")),t=eO(n.getStyle("height"));return!!(e&&t)}const ZHe=/^(image|image-inline)$/;class fm extends gt{constructor(){super(...arguments);j(this,"_domEmitter",new(Pc()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(t){return this.isInlineImage(t)||this.isBlockImage(t)}isInlineImageView(t){return!!t&&t.is("element","img")}isBlockImageView(t){return!!t&&t.is("element","figure")&&t.hasClass("image")}insertImage(t={},r=null,i=null,s={}){const o=this.editor,a=o.model,c=a.document.selection,u=gge(o,r||c,i);t={...Object.fromEntries(c.getAttributes()),...t};for(const d in t)a.schema.checkAttribute(u,d)||delete t[d];return a.change(d=>{const{setImageSizes:h=!0}=s,f=d.createElement(u,t);return a.insertObject(f,r,null,{setSelection:"on",findOptimalPosition:!r&&u!="imageInline"?"auto":void 0}),f.parent?(h&&this.setImageNaturalSizeAttributes(f),f):null})}setImageNaturalSizeAttributes(t){const r=t.getAttribute("src");r&&(t.getAttribute("width")||t.getAttribute("height")||this.editor.model.change(i=>{const s=new yt.window.Image;this._domEmitter.listenTo(s,"load",()=>{!t.getAttribute("width")&&!t.getAttribute("height")&&this.editor.model.enqueueChange(i.batch,o=>{o.setAttribute("width",s.naturalWidth,t),o.setAttribute("height",s.naturalHeight,t)}),this._domEmitter.stopListening(s,"load")}),s.src=r}))}getClosestSelectedImageWidget(t){const r=t.getFirstPosition();if(!r)return null;const i=t.getSelectedElement();if(i&&this.isImageWidget(i))return i;let s=r.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(t){const r=t.getSelectedElement();return this.isImage(r)?r:t.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(t){return t.findAncestor({classes:ZHe})}isImageAllowed(){const r=this.editor.model.document.selection;return eWe(this.editor,r)&&tWe(r)}toImageWidget(t,r,i){return r.setCustomProperty("image",!0,t),sge(t,r,{label:()=>{const a=this.findViewImgElement(t).getAttribute("alt");return a?`${a} ${i}`:i}})}isImageWidget(t){return!!t.getCustomProperty("image")&&wi(t)}isBlockImage(t){return!!t&&t.is("element","imageBlock")}isInlineImage(t){return!!t&&t.is("element","imageInline")}findViewImgElement(t){if(this.isInlineImageView(t))return t;const r=this.editor.editing.view;for(const{item:i}of r.createRangeIn(t))if(this.isInlineImageView(i))return i}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function eWe(n,e){if(gge(n,e,null)=="imageBlock"){const r=nWe(e,n.model);if(n.model.schema.checkChild(r,"imageBlock"))return!0}else if(n.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function tWe(n){return[...n.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function nWe(n,e){const r=oge(n,e).start.parent;return r.isEmpty&&!r.is("element","$root")?r.parent:r}function gge(n,e,t){const r=n.model.schema,i=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(i==="inline"?"imageInline":i!=="auto"?"imageBlock":e.is("selection")?Fz(r,e):r.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}class rWe extends ci{refresh(){const r=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!r,this.isEnabled&&r.hasAttribute("alt")?this.value=r.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,r=t.plugins.get("ImageUtils"),i=t.model,s=r.getClosestSelectedImageElement(i.document.selection);i.change(o=>{o.setAttribute("alt",e.newValue,s)})}}class iWe extends gt{static get requires(){return[fm]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new rWe(this.editor))}}class sWe extends Ut{constructor(t){super(t);j(this,"focusTracker");j(this,"keystrokes");j(this,"labeledInput");j(this,"backButtonView");j(this,"saveButtonView");j(this,"children");j(this,"_focusables");j(this,"_focusCycler");this.focusTracker=new Xs,this.keystrokes=new Va,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new x$(t,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Oc,this.keystrokes.set("Esc",(r,i)=>{this.fire("cancel"),i()}),this._focusCycler=new _h({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),$M({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(r=>{this._focusables.add(r),this.focusTracker.add(r.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const t=this.locale.t,r=new On(this.locale);return r.set({class:"ck-button-back",label:t("Back"),icon:NA,tooltip:!0}),r.delegate("execute").to(this,"cancel"),r}_createSaveButton(){const t=this.locale.t,r=new On(this.locale);return r.set({label:t("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),r}_createHeaderView(){const t=this.locale.t,r=new PA(this.locale,{label:t("Text Alternative")});return r.children.add(this.backButtonView,0),r}_createLabeledInputView(){const t=this.locale.t,r=new YI(this.locale,XI);return r.label=t("Text alternative"),r.class="ck-labeled-field-view_full-width",r}}function oWe(n){const e=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){const r=vge(n);e.updatePosition(r)}}function vge(n){const e=n.editing.view,t=Q0.defaultPositions,r=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(r.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}class aWe extends gt{constructor(){super(...arguments);j(this,"_balloon");j(this,"_form")}static get requires(){return[b$]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const t=this.editor,r=t.t;t.ui.componentFactory.add("imageTextAlternative",i=>{const s=t.commands.get("imageTextAlternative"),o=new On(i);return o.set({label:r("Change image text alternative"),icon:w9e,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",a=>!!a),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const t=this.editor,i=t.editing.view.document,s=t.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(KI(sWe))(t.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(t.ui,"update",()=>{s.getClosestSelectedImageWidget(i.selection)?this._isVisible&&oWe(t):this._hideForm(!0)}),BM({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const t=this.editor,r=t.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:vge(t)}),i.fieldView.value=i.fieldView.element.value=r.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class yge extends gt{static get requires(){return[iWe,aWe]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function lWe(n){const e=(t,r,i)=>{if(!i.consumable.test(r.viewItem,{name:!0,classes:"image"}))return;const s=n.findViewImgElement(r.viewItem);if(!s||!i.consumable.test(s,{name:!0}))return;i.consumable.consume(r.viewItem,{name:!0,classes:"image"});const o=i.convertItem(s,r.modelCursor),a=Ra(o.modelRange.getItems());if(!a){i.consumable.revert(r.viewItem,{name:!0,classes:"image"});return}i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r)};return t=>{t.on("element:figure",e)}}function xge(n,e){const t=(r,i,s)=>{if(!s.consumable.consume(i.item,r.name))return;const o=s.writer,a=s.mapper.toViewElement(i.item),c=n.findViewImgElement(a);i.attributeNewValue===null?(o.removeAttribute("srcset",c),o.removeAttribute("sizes",c)):i.attributeNewValue&&(o.setAttribute("srcset",i.attributeNewValue,c),o.setAttribute("sizes","100vw",c))};return r=>{r.on(`attribute:srcset:${e}`,t)}}function tO(n,e,t){const r=(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const a=o.writer,c=o.mapper.toViewElement(s.item),u=n.findViewImgElement(c);a.setAttribute(s.attributeKey,s.attributeNewValue||"",u)};return i=>{i.on(`attribute:${t}:${e}`,r)}}class bge extends wh{observe(e){this.listenTo(e,"load",(t,r)=>{const i=r.target;this.checkShouldIgnoreEventFromTarget(i)||i.tagName=="IMG"&&this._fireEvents(r)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}class cWe extends ci{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&Yn("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&Yn("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=Ur(e.source),r=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(r.getAttributes());t.forEach((o,a)=>{const c=r.getSelectedElement();if(typeof o=="string"&&(o={src:o}),a&&c&&i.isImage(c)){const u=this.editor.model.createPositionAfter(c);i.insertImage({...o,...s},u,e.imageType)}else e.breakBlock?i.insertImage({...o,...s},r.getFirstPosition(),e.imageType):i.insertImage({...o,...s},null,e.imageType)})}}class uWe extends ci{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),r=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(r),this.value=this.isEnabled?r.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),r=this.editor.plugins.get("ImageUtils");this.editor.model.change(i=>{i.setAttribute("src",e.source,t),this.cleanupImage(i,t),r.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}class wge extends gt{static get requires(){return[fm]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(bge),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const r=new cWe(e),i=new uWe(e);e.commands.add("insertImage",r),e.commands.add("replaceImageSource",i),e.commands.add("imageInsert",r)}}class _ge extends gt{static get requires(){return[fm]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,r=t.plugins.get("ImageUtils"),i=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:i,styles:{width:/.+/}},model:{key:"width",value:o=>WQ(o)?eO(o.getStyle("width")):null}}).attributeToAttribute({view:{name:i,key:"width"},model:"width"}).attributeToAttribute({view:{name:i,styles:{height:/.+/}},model:{key:"height",value:o=>WQ(o)?eO(o.getStyle("height")):null}}).attributeToAttribute({view:{name:i,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(o=>{s(o,"width","width",!0,!0),s(o,"height","height",!0,!0)}),t.conversion.for("dataDowncast").add(o=>{s(o,"width","width",!1),s(o,"height","height",!1)}),t.conversion.for("upcast").add(o=>{o.on("element:img",(a,c,u)=>{const d=c.viewItem.getAttribute("width"),h=c.viewItem.getAttribute("height");d&&h&&u.consumable.consume(c.viewItem,{styles:["aspect-ratio"]})})});function s(o,a,c,u,d=!1){o.on(`attribute:${a}:${e}`,(h,f,p)=>{if(!p.consumable.consume(f.item,h.name))return;const x=p.writer,y=p.mapper.toViewElement(f.item),b=r.findViewImgElement(y);f.attributeNewValue!==null?x.setAttribute(c,f.attributeNewValue,b):x.removeAttribute(c,b);const _=f.item.getAttribute("width"),C=f.item.getAttribute("height"),k=_&&C;if(k&&d&&x.setAttribute("loading","lazy",b),f.item.hasAttribute("sources"))return;const T=f.item.hasAttribute("resizedWidth");e==="imageInline"&&!T&&!u||k&&x.setStyle("aspect-ratio",`${_}/${C}`,b)})}}}class Sge extends ci{constructor(t,r){super(t);j(this,"_modelElementName");this._modelElementName=r}refresh(){const r=this.editor.plugins.get("ImageUtils"),i=r.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=r.isInlineImage(i):this.isEnabled=r.isBlockImage(i)}execute(t={}){const r=this.editor,i=this.editor.model,s=r.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(i.document.selection),a=Object.fromEntries(o.getAttributes());return!a.src&&!a.uploadId?null:i.change(c=>{const{setImageSizes:u=!0}=t,d=Array.from(i.markers).filter(p=>p.getRange().containsItem(o)),h=s.insertImage(a,i.createSelection(o,"on"),this._modelElementName,{setImageSizes:u});if(!h)return null;const f=c.createRangeOn(h);for(const p of d){const x=p.getRange(),y=x.root.rootName!="$graveyard"?x.getJoined(f,!0):f;c.updateMarker(p,{range:y})}return{oldElement:o,newElement:h}})}}class kge extends gt{static get requires(){return[fm]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,r=e.plugins.get("ImageUtils");t.for("editingDowncast").add(i=>{i.on("attribute:placeholder",(s,o,a)=>{if(!a.consumable.test(o.item,s.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;a.consumable.consume(o.item,s.name);const c=a.writer,u=a.mapper.toViewElement(o.item),d=r.findViewImgElement(u);o.attributeNewValue?(c.addClass("image_placeholder",d),c.setStyle("background-image",`url(${o.attributeNewValue})`,d),c.setCustomProperty("editingPipeline:doNotReuseOnce",!0,d)):(c.removeClass("image_placeholder",d),c.removeStyle("background-image",d))})})}_setupLoadListener(){const e=this.editor,t=e.model,r=e.editing,i=r.view,s=e.plugins.get("ImageUtils");i.addObserver(bge),this.listenTo(i.document,"imageLoaded",(o,a)=>{const c=i.domConverter.mapDomToView(a.target);if(!c)return;const u=s.getImageWidgetFromImageView(c);if(!u)return;const d=r.mapper.toModelElement(u);!d||!d.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},h=>{h.removeAttribute("placeholder",d)})})}}class dWe extends gt{static get requires(){return[wge,_ge,fm,kge,ph]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new Sge(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,r=e.conversion,i=e.plugins.get("ImageUtils");r.for("dataDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:o})=>HQ(o)}),r.for("editingDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:o})=>i.toImageWidget(HQ(o),o,t("image widget"))}),r.for("downcast").add(tO(i,"imageBlock","src")).add(tO(i,"imageBlock","alt")).add(xge(i,"imageBlock")),r.for("upcast").elementToElement({view:pge(e,"imageBlock"),model:(s,{writer:o})=>o.createElement("imageBlock",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)}).add(lWe(i))}_setupClipboardIntegration(){const e=this.editor,t=e.model,r=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(o,a)=>{const c=Array.from(a.content.getChildren());let u;if(!c.every(i.isInlineImageView))return;a.targetRanges?u=e.editing.mapper.toModelRange(a.targetRanges[0]):u=t.document.selection.getFirstRange();const d=t.createSelection(u);if(Fz(t.schema,d)==="imageBlock"){const h=new Az(r.document),f=c.map(p=>h.createElement("figure",{class:"image"},p));a.content=h.createDocumentFragment(f)}}),this.listenTo(s,"contentInsertion",(o,a)=>{a.method==="paste"&&t.change(c=>{const u=c.createRangeIn(a.content);for(const d of u.getItems())d.is("element","imageBlock")&&i.setImageNaturalSizeAttributes(d)})})}}class hWe extends Ut{constructor(t,r=[]){super(t);j(this,"focusTracker");j(this,"keystrokes");j(this,"_focusables");j(this,"_focusCycler");j(this,"children");this.focusTracker=new Xs,this.keystrokes=new Va,this._focusables=new Oc,this.children=this.createCollection(),this._focusCycler=new _h({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const i of r)this.children.add(i),this._focusables.add(i),i instanceof fUe&&this._focusables.addMany(i.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),$M({view:this});for(const r of this._focusables)this.focusTracker.add(r.element);this.keystrokes.listenTo(this.element);const t=r=>r.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class Cge extends gt{constructor(t){super(t);j(this,"dropdownView");j(this,"_integrations",new Map);t.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[fm]}init(){const t=this.editor,r=t.model.document.selection,i=t.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(t.model.document,"change",()=>{this.isImageSelected=i.isImage(r.getSelectedElement())});const s=a=>this._createToolbarComponent(a),o=a=>this._createMenuBarComponent(a);t.ui.componentFactory.add("insertImage",s),t.ui.componentFactory.add("imageInsert",s),t.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:t,observable:r,buttonViewCreator:i,formViewCreator:s,menuBarButtonViewCreator:o,requiresForm:a=!1,override:c=!1}){this._integrations.has(t)&&!c&&Yn("image-insert-integration-exists",{name:t}),this._integrations.set(t,{observable:r,buttonViewCreator:i,menuBarButtonViewCreator:o,formViewCreator:s,requiresForm:a})}_createToolbarComponent(t){const r=this.editor,i=t.t,s=this._prepareIntegrations();if(!s.length)return null;let o;const a=s[0];if(s.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);o=a.buttonViewCreator(!0)}else{const d=a.buttonViewCreator(!1);o=new zpe(t,d),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",h=>i(h?"Replace image":"Insert image"))}const c=this.dropdownView=UM(t,o),u=s.map(({observable:d})=>typeof d=="function"?d():d);return c.bind("isEnabled").toMany(u,"isEnabled",(...d)=>d.some(h=>h)),c.once("change:isOpen",()=>{const d=s.flatMap(({formViewCreator:f})=>f(s.length==1)),h=new hWe(r.locale,d);c.panelView.children.add(h)}),c}_createMenuBarComponent(t){const r=t.t,i=this._prepareIntegrations();if(!i.length)return null;const s=i.flatMap(({menuBarButtonViewCreator:c})=>c(i.length==1)),o=new B0(t),a=new JI(t);o.panelView.children.add(a),o.buttonView.set({icon:r9e,label:r("Image")});for(const c of s){const u=new zM(t,o);u.children.add(c),a.items.add(u),c.delegate("execute").to(o)}return o}_prepareIntegrations(){const r=this.editor.config.get("image.insert.integrations"),i=[];if(!r.length)return Yn("image-insert-integrations-not-specified"),i;for(const s of r){if(!this._integrations.has(s)){["upload","assetManager","url"].includes(s)||Yn("image-insert-unknown-integration",{item:s});continue}i.push(this._integrations.get(s))}return i.length||Yn("image-insert-integrations-not-registered"),i}}class fWe extends gt{static get requires(){return[dWe,qM,yge,Cge]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class mWe extends gt{static get requires(){return[wge,_ge,fm,kge,ph]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new Sge(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,r=e.conversion,i=e.plugins.get("ImageUtils");r.for("dataDowncast").elementToElement({model:"imageInline",view:(s,{writer:o})=>o.createEmptyElement("img")}),r.for("editingDowncast").elementToStructure({model:"imageInline",view:(s,{writer:o})=>i.toImageWidget(QHe(o),o,t("image widget"))}),r.for("downcast").add(tO(i,"imageInline","src")).add(tO(i,"imageInline","alt")).add(xge(i,"imageInline")),r.for("upcast").elementToElement({view:pge(e,"imageInline"),model:(s,{writer:o})=>o.createElement("imageInline",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,r=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(o,a)=>{const c=Array.from(a.content.getChildren());let u;if(!c.every(i.isBlockImageView))return;a.targetRanges?u=e.editing.mapper.toModelRange(a.targetRanges[0]):u=t.document.selection.getFirstRange();const d=t.createSelection(u);if(Fz(t.schema,d)==="imageInline"){const h=new Az(r.document),f=c.map(p=>p.childCount===1?(Array.from(p.getAttributes()).forEach(x=>h.setAttribute(...x,i.findViewImgElement(p))),p.getChild(0)):p);a.content=h.createDocumentFragment(f)}}),this.listenTo(s,"contentInsertion",(o,a)=>{a.method==="paste"&&t.change(c=>{const u=c.createRangeIn(a.content);for(const d of u.getItems())d.is("element","imageInline")&&i.setImageNaturalSizeAttributes(d)})})}}class pWe extends gt{static get requires(){return[mWe,qM,yge,Cge]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}let gWe=class extends gt{static get requires(){return[fWe,pWe]}static get pluginName(){return"Image"}static get isOfficialPlugin(){return!0}};function Ege(n){const e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function vWe(n){return new Promise((e,t)=>{const r=n.getAttribute("src");fetch(r).then(i=>i.blob()).then(i=>{const s=Tge(i,r),a=`image.${s.replace("image/","")}`,c=new File([i],a,{type:s});e(c)}).catch(i=>i&&i.name==="TypeError"?xWe(r).then(e).catch(t):t(i))})}function yWe(n,e){return!n.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function Tge(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function xWe(n){return bWe(n).then(e=>{const t=Tge(e,n),i=`image.${t.replace("image/","")}`;return new File([e],i,{type:t})})}function bWe(n){return new Promise((e,t)=>{const r=yt.document.createElement("img");r.addEventListener("load",()=>{const i=yt.document.createElement("canvas");i.width=r.width,i.height=r.height,i.getContext("2d").drawImage(r,0,0),i.toBlob(o=>o?e(o):t())}),r.addEventListener("error",()=>t()),r.src=n})}class wWe extends gt{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),e.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),e.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),e.plugins.has("ImageInsertUI")&&e.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(e){const t=this.editor,r=t.locale,i=t.commands.get("uploadImage"),s=t.config.get("image.upload.types"),o=Ege(s),a=new e(t.locale),c=r.t;return a.set({acceptedType:s.map(u=>`image/${u}`).join(","),allowMultipleFiles:!0,label:c("Upload from computer"),icon:i9e}),a.bind("isEnabled").to(i),a.on("done",(u,d)=>{const h=Array.from(d).filter(f=>o.test(f.type));h.length&&(t.execute("uploadImage",{file:h}),t.editing.view.focus())}),a}_createToolbarButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),r=this.editor.commands.get("uploadImage"),i=this._createButton(sQ);return i.tooltip=!0,i.bind("label").to(t,"isImageSelected",r,"isAccessAllowed",(s,o)=>e(o?s?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),i}_createDropdownButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),r=this._createButton(sQ);return r.withText=!0,r.bind("label").to(t,"isImageSelected",i=>e(i?"Replace from computer":"Upload from computer")),r.on("execute",()=>{t.dropdownView.isOpen=!1}),r}_createMenuBarButton(e){const t=this.editor.locale.t,r=this._createButton(Jpe);switch(r.withText=!0,e){case"standalone":r.label=t("Image from computer");break;case"insertOnly":r.label=t("Image");break;case"insertNested":r.label=t("From computer");break}return r}}class _We extends gt{constructor(t){super(t);j(this,"placeholder");j(this,"uploadStatusChange",(t,r,i)=>{const s=this.editor,o=r.item,a=o.getAttribute("uploadId");if(!i.consumable.consume(r.item,t.name))return;const c=s.plugins.get("ImageUtils"),u=s.plugins.get(Hb),d=a?r.attributeNewValue:null,h=this.placeholder,f=s.editing.mapper.toViewElement(o),p=i.writer;if(d=="reading"){qQ(f,p),GQ(c,h,f,p);return}if(d=="uploading"){const x=u.loaders.get(a);qQ(f,p),x?(KQ(f,p),kWe(f,p,x,s.editing.view),NWe(c,f,p,x)):GQ(c,h,f,p);return}d=="complete"&&u.loaders.get(a)&&EWe(f,p,s.editing.view),CWe(f,p),KQ(f,p),SWe(f,p)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function qQ(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function SWe(n,e){e.removeClass("ck-appear",n)}function GQ(n,e,t,r){t.hasClass("ck-image-upload-placeholder")||r.addClass("ck-image-upload-placeholder",t);const i=n.findViewImgElement(t);i.getAttribute("src")!==e&&r.setAttribute("src",e,i),Age(t,"placeholder")||r.insert(r.createPositionAfter(i),AWe(r))}function KQ(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),Nge(n,e,"placeholder")}function kWe(n,e,t,r){const i=TWe(e);e.insert(e.createPositionAt(n,"end"),i),t.on("change:uploadedPercent",(s,o,a)=>{r.change(c=>{c.setStyle("width",a+"%",i)})})}function CWe(n,e){Nge(n,e,"progressBar")}function EWe(n,e,t){const r=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(n,"end"),r),setTimeout(()=>{t.change(i=>i.remove(i.createRangeOn(r)))},3e3)}function TWe(n){const e=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,e),e}function AWe(n){const e=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,e),e}function Age(n,e){for(const t of n.getChildren())if(t.getCustomProperty(e))return t}function Nge(n,e,t){const r=Age(n,t);r&&e.remove(e.createRangeOn(r))}function NWe(n,e,t,r){if(r.data){const i=n.findViewImgElement(e);t.setAttribute("src",r.data,i)}}class jWe extends ci{constructor(e){super(e),this.set("isAccessAllowed",!0)}refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),r=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(r)}execute(e){const t=Ur(e.file),r=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(r.getAttributes());t.forEach((o,a)=>{const c=r.getSelectedElement();if(a&&c&&i.isImage(c)){const u=this.editor.model.createPositionAfter(c);this._uploadImage(o,s,u)}else this._uploadImage(o,s)})}_uploadImage(e,t,r){const i=this.editor,o=i.plugins.get(Hb).createLoader(e),a=i.plugins.get("ImageUtils");o&&a.insertImage({...t,uploadId:o.id},r)}}class PWe extends gt{constructor(t){super(t);j(this,"_uploadImageElements");j(this,"_uploadedImages",new Map);t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[Hb,pQ,ph,fm]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.model.document,i=t.conversion,s=t.plugins.get(Hb),o=t.plugins.get("ImageUtils"),a=t.plugins.get("ClipboardPipeline"),c=Ege(t.config.get("image.upload.types")),u=new jWe(t);t.commands.add("uploadImage",u),t.commands.add("imageUpload",u),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(d=>d.on("element:img",(h,f,p)=>{if(!p.consumable.test(f.viewItem,{attributes:["data-ck-upload-id"]}))return;const x=f.viewItem.getAttribute("data-ck-upload-id");if(!x)return;const[y]=Array.from(f.modelRange.getItems({shallow:!0})),b=s.loaders.get(x);y&&(p.writer.setAttribute("uploadId",x,y),p.consumable.consume(f.viewItem,{attributes:["data-ck-upload-id"]}),b&&b.data&&p.writer.setAttribute("uploadStatus",b.status,y))},{priority:"low"})),this.listenTo(t.editing.view.document,"clipboardInput",(d,h)=>{if(IWe(h.dataTransfer))return;const f=Array.from(h.dataTransfer.files).filter(x=>x?c.test(x.type):!1);if(!f.length)return;if(d.stop(),t.model.change(x=>{h.targetRanges&&x.setSelection(h.targetRanges.map(y=>t.editing.mapper.toModelRange(y))),t.execute("uploadImage",{file:f})}),!t.commands.get("uploadImage").isAccessAllowed){const x=t.plugins.get("Notification"),y=t.locale.t;x.showWarning(y("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(a,"inputTransformation",(d,h)=>{const f=Array.from(t.editing.view.createRangeIn(h.content)).map(x=>x.item).filter(x=>yWe(o,x)&&!x.getAttribute("uploadProcessed")).map(x=>({promise:vWe(x),imageElement:x}));if(!f.length)return;const p=new Az(t.editing.view.document);for(const x of f){p.setAttribute("uploadProcessed",!0,x.imageElement);const y=s.createLoader(x.promise);y&&(p.setAttribute("src","",x.imageElement),p.setAttribute("uploadId",y.id,x.imageElement))}}),t.editing.view.document.on("dragover",(d,h)=>{h.preventDefault()}),r.on("change",()=>{const d=r.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),h=new Set;for(const f of d)if(f.type=="insert"&&f.name!="$text"){const p=f.position.nodeAfter,x=f.position.root.rootName=="$graveyard";for(const y of OWe(t,p)){const b=y.getAttribute("uploadId");if(!b)continue;const _=s.loaders.get(b);if(!_){!x&&this._uploadedImages.has(b)&&t.model.enqueueChange({isUndoable:!1},C=>{C.setAttribute("uploadStatus","complete",y),this.fire("uploadComplete",{data:this._uploadedImages.get(b),imageElement:y})});continue}x?h.has(b)||Array.from(this._uploadImageElements.get(b)).every(k=>k.root.rootName=="$graveyard")&&_.abort():(h.add(b),this._uploadImageElements.has(b)?this._uploadImageElements.get(b).add(y):this._uploadImageElements.set(b,new Set([y])),_.status=="idle"&&this._readAndUpload(_))}}}),this.on("uploadComplete",(d,{imageElement:h,data:f})=>{const p=f.urls?f.urls:f;this.editor.model.change(x=>{x.setAttribute("src",p.default,h),this._parseAndSetSrcsetAttributeOnImage(p,h,x),o.setImageNaturalSizeAttributes(h)})},{priority:"low"})}afterInit(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(t.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(t.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(t){const r=this.editor,i=r.model,s=r.locale.t,o=r.plugins.get(Hb),a=r.plugins.get(pQ),c=r.plugins.get("ImageUtils"),u=this._uploadImageElements;return i.enqueueChange({isUndoable:!1},h=>{const f=u.get(t.id);for(const p of f)h.setAttribute("uploadStatus","reading",p)}),t.read().then(()=>{const h=t.upload();r.ui&&r.ui.ariaLiveAnnouncer.announce(s("Uploading image"));for(const f of u.get(t.id)){/* istanbul ignore next -- @preserve */if(Vt.isSafari){const p=r.editing.mapper.toViewElement(f),x=c.findViewImgElement(p);r.editing.view.once("render",()=>{if(!x.parent)return;const y=r.editing.view.domConverter.mapViewToDom(x.parent);if(!y)return;const b=y.style.display;y.style.display="none",y._ckHack=y.offsetHeight,y.style.display=b})}i.enqueueChange({isUndoable:!1},p=>{p.setAttribute("uploadStatus","uploading",f)})}return h}).then(h=>{i.enqueueChange({isUndoable:!1},f=>{for(const p of u.get(t.id))f.setAttribute("uploadStatus","complete",p),this.fire("uploadComplete",{data:h,imageElement:p});r.ui&&r.ui.ariaLiveAnnouncer.announce(s("Image upload complete")),this._uploadedImages.set(t.id,h)}),d()}).catch(h=>{if(r.ui&&r.ui.ariaLiveAnnouncer.announce(s("Error during image upload")),t.status!=="error"&&t.status!=="aborted")throw h;t.status=="error"&&h&&a.showWarning(h,{title:s("Upload failed"),namespace:"upload"}),i.enqueueChange({isUndoable:!1},f=>{for(const p of u.get(t.id))p.root.rootName!=="$graveyard"&&f.remove(p)}),d()});function d(){i.enqueueChange({isUndoable:!1},h=>{for(const f of u.get(t.id))h.removeAttribute("uploadId",f),h.removeAttribute("uploadStatus",f);u.delete(t.id)}),o.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,r,i){let s=0;const o=Object.keys(t).filter(a=>{const c=parseInt(a,10);if(!isNaN(c))return s=Math.max(s,c),!0}).map(a=>`${t[a]} ${a}w`).join(", ");if(o!=""){const a={srcset:o};!r.hasAttribute("width")&&!r.hasAttribute("height")&&(a.width=s),i.setAttributes(a,r)}}_registerConverters(t){const{conversion:r,plugins:i}=this.editor,s=i.get(Hb),o=i.get(fm);r.for("dataDowncast").add(a=>{a.on(`attribute:uploadId:${t}`,(c,u,d)=>{if(!d.consumable.test(u.item,c.name))return;const h=s.loaders.get(u.attributeNewValue);if(!h||!h.data)return null;const f=d.mapper.toViewElement(u.item),p=o.findViewImgElement(f);p&&(d.consumable.consume(u.item,c.name),d.writer.setAttribute("data-ck-upload-id",h.id,p))})})}}function IWe(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function OWe(n,e){const t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(r=>t.isImage(r.item)).map(r=>r.item)}class RWe extends gt{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[PWe,wWe,_We]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class MWe{constructor(){j(this,"_definitions",new Set)}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,r,i)=>{if(!i.consumable.test(r.item,"attribute:linkHref")||!(r.item.is("selection")||i.schema.isInline(r.item)))return;const s=i.writer,o=s.document.selection;for(const a of this._definitions){const c=s.createAttributeElement("a",a.attributes,{priority:5});a.classes&&s.addClass(a.classes,c);for(const u in a.styles)s.setStyle(u,a.styles[u],c);s.setCustomProperty("link",!0,c),a.callback(r.attributeNewValue)?r.item.is("selection")?s.wrap(o.getFirstRange(),c):s.wrap(i.mapper.toViewRange(r.range),c):s.unwrap(i.mapper.toViewRange(r.range),c)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,r,{writer:i,mapper:s})=>{const o=s.toViewElement(r.item),a=Array.from(o.getChildren()).find(c=>c.is("element","a"));if(a)for(const c of this._definitions){const u=hm(c.attributes);if(c.callback(r.attributeNewValue)){for(const[d,h]of u)d==="class"?i.addClass(h,a):i.setAttribute(d,h,a);c.classes&&i.addClass(c.classes,a);for(const d in c.styles)i.setStyle(d,c.styles[d],a)}else{for(const[d,h]of u)d==="class"?i.removeClass(h,a):i.removeAttribute(d,a);c.classes&&i.removeClass(c.classes,a);for(const d in c.styles)i.removeStyle(d,a)}}})}}}const DWe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,LWe="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",FWe=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,BWe=/^((\w+:(\/{2,})?)|(\W))/i,$We=["https?","ftps?","mailto"],Pj="Ctrl+K";function VWe(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function YQ(n,{writer:e}){const t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function jge(n,e=$We){const t=String(n),r=e.join("|"),i=new RegExp(`${LWe.replace("<protocols>",r)}`,"i");return UWe(t,i)?t:"#"}function UWe(n,e){return!!n.replace(DWe,"").match(e)}function zWe(n,e){const t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(r=>("label"in r&&t[r.label]&&(r.label=t[r.label]),r)),e}function HWe(n){const e=[];if(n)for(const[t,r]of Object.entries(n)){const i=Object.assign({},r,{id:`link${TFe(t)}`});e.push(i)}return e}function S$(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function WWe(n){return FWe.test(n)}function Bz(n,e){const t=WWe(n)?"mailto:":e,r=!!t&&!Pge(n);return n&&r?t+n:n}function Pge(n){return BWe.test(n)}function qWe(n){window.open(n,"_blank","noopener")}function k$(n){let e="";for(const t of n.getItems()){if(!t.is("$text")&&!t.is("$textProxy"))return;e+=t.data}return e}class GWe extends ci{constructor(){super(...arguments);j(this,"manualDecorators",new Gu);j(this,"automaticDecorators",new MWe)}restoreManualDecoratorStates(){for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}refresh(){const t=this.editor.model,r=t.document.selection,i=r.getSelectedElement()||Ra(r.getSelectedBlocks());S$(i,t.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(i,"linkHref")):(this.value=r.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(r,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(t,r={},i){const s=this.editor.model,o=s.document.selection,a=[],c=[];for(const u in r)r[u]?a.push(u):c.push(u);s.change(u=>{const d=p=>{u.setAttribute("linkHref",t,p),a.forEach(x=>u.setAttribute(x,!0,p)),c.forEach(x=>u.removeAttribute(x,p))},h=(p,x)=>{const y=k$(p);if(!y)return p;let b=i;if(b||(b=x&&x==y?t:y),b!=y){const _=u.createDocumentFragment();for(const E of p.getItems()){const N=E;u.append(u.createText(N.data,N.getAttributes()),_)}const C=u.createRangeIn(_),k=KWe(y,b);let T=0;for(const{offset:E,actual:N,expected:P}of k){const M=E+T,O=u.createRange(C.start.getShiftedBy(M),C.start.getShiftedBy(M+N.length)),D=YWe(O,C).getAttributes(),F=Array.from(D).filter(([ee])=>s.schema.getAttributeProperties(ee).isFormatting),K=u.createText(P,F);d(K),u.remove(O),u.insert(K,O.start),T+=P.length}return s.insertContent(_,p),u.createRange(p.start,p.start.getShiftedBy(b.length))}},f=p=>{const{plugins:x}=this.editor;if(u.setSelection(p.end),x.has("TwoStepCaretMovement"))x.get("TwoStepCaretMovement")._handleForwardMovement();else for(const y of["linkHref",...a,...c])u.removeSelectionAttribute(y)};if(o.isCollapsed){const p=o.getFirstPosition();if(o.hasAttribute("linkHref")){const x=o.getAttribute("linkHref"),y=HM(p,"linkHref",x,s),b=h(y,x);d(b||y),b&&f(b)}else if(t!==""){const x=hm(o.getAttributes());x.set("linkHref",t),a.forEach(b=>{x.set(b,!0)});const y=s.insertContent(u.createText(i||t,x),p);f(y)}}else{const p=Array.from(o.getRanges()),x=s.schema.getValidRanges(p,"linkHref"),y=[];for(const C of o.getSelectedBlocks())s.schema.checkAttribute(C,"linkHref")&&y.push(u.createRangeOn(C));const b=y.slice();for(const C of x)this._isRangeToUpdate(C,y)&&b.push(C);const _=p.map(C=>({start:ji.fromPosition(C.start,"toPrevious"),end:ji.fromPosition(C.end,"toNext")}));for(let C of b){const k=(C.start.textNode||C.start.nodeAfter).getAttribute("linkHref");C=h(C,k)||C,d(C)}u.setSelection(_.map(C=>{const k=C.start.toPosition(),T=C.end.toPosition();return C.start.detach(),C.end.detach(),s.createRange(k,T)}))}})}_getDecoratorStateFromModel(t){const r=this.editor.model,i=r.document.selection,s=i.getSelectedElement();return S$(s,r.schema)?s.getAttribute(t):i.getAttribute(t)}_isRangeToUpdate(t,r){for(const i of r)if(i.containsRange(t))return!1;return!0}}function KWe(n,e){const t=mw(n,e),r={equal:0,insert:0,delete:0},i=[];let s="",o="";for(const a of[...t,null])a=="insert"?o+=e[r.equal+r.insert]:a=="delete"?s+=n[r.equal+r.delete]:(s.length||o.length)&&(i.push({offset:r.equal,actual:s,expected:o}),s="",o=""),a&&r[a]++;return i}function YWe(n,e){if(!n.isCollapsed)return Ra(n.getItems());const t=n.start;return t.textNode?t.textNode:!t.nodeBefore||t.isEqual(e.start)?t.nodeAfter:t.nodeBefore}class XWe extends ci{refresh(){const e=this.editor.model,t=e.document.selection,r=t.getSelectedElement();S$(r,e.schema)?this.isEnabled=e.schema.checkAttribute(r,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,r=t.document.selection,i=e.commands.get("link");t.change(s=>{const o=r.isCollapsed?[HM(r.getFirstPosition(),"linkHref",r.getAttribute("linkHref"),t)]:t.schema.getValidRanges(r.getRanges(),"linkHref");for(const a of o)if(s.removeAttribute("linkHref",a),i)for(const c of i.manualDecorators)s.removeAttribute(c.id,a)})}}class JWe extends Tr(){constructor({id:t,label:r,attributes:i,classes:s,styles:o,defaultValue:a}){super();j(this,"id");j(this,"defaultValue");j(this,"label");j(this,"attributes");j(this,"classes");j(this,"styles");this.id=t,this.set("value",void 0),this.defaultValue=a,this.label=r,this.attributes=i,this.classes=s,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const QWe="ck-link_selected",XQ="automatic",ZWe="manual",eqe=/^(https?:)?\/\//;class nO extends gt{constructor(t){super(t);j(this,"_linkOpeners",[]);t.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[wQ,ege,ph]}init(){const t=this.editor,r=this.editor.config.get("link.allowedProtocols");t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:YQ}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,a)=>YQ(jge(o,r),a)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),t.commands.add("link",new GWe(t)),t.commands.add("unlink",new XWe(t));const i=zWe(t.t,HWe(t.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(o=>o.mode===XQ)),this._enableManualDecorators(i.filter(o=>o.mode===ZWe)),t.plugins.get(wQ).registerAttribute("linkHref"),bze(t,"linkHref","a",QWe),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(t){this._linkOpeners.push(t)}_enableAutomaticDecorators(t){const r=this.editor,s=r.commands.get("link").automaticDecorators;r.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:XQ,callback:o=>!!o&&eqe.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(t),s.length&&r.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const r=this.editor,s=r.commands.get("link").manualDecorators;t.forEach(o=>{r.model.schema.extend("$text",{allowAttributes:o.id});const a=new JWe(o);s.add(a),r.conversion.for("downcast").attributeToElement({model:a.id,view:(c,{writer:u,schema:d},{item:h})=>{if((h.is("selection")||d.isInline(h))&&c){const f=u.createAttributeElement("a",a.attributes,{priority:5});a.classes&&u.addClass(a.classes,f);for(const p in a.styles)u.setStyle(p,a.styles[p],f);return u.setCustomProperty("link",!0,f),f}}}),r.conversion.for("upcast").elementToAttribute({view:{name:"a",...a._createPattern()},model:{key:a.id}})})}_enableLinkOpen(){const t=this.editor,i=t.editing.view.document,s=o=>{this._linkOpeners.some(a=>a(o))||qWe(o)};this.listenTo(i,"click",(o,a)=>{if(!(Vt.isMac?a.domEvent.metaKey:a.domEvent.ctrlKey))return;let u=a.domTarget;if(u.tagName.toLowerCase()!="a"&&(u=u.closest("a")),!u)return;const d=u.getAttribute("href");d&&(o.stop(),a.preventDefault(),s(d))},{context:"$capture"}),this.listenTo(i,"keydown",(o,a)=>{const u=t.commands.get("link").value;u&&a.keyCode===yn.enter&&a.altKey&&(o.stop(),s(u))})}_enableSelectionAttributesFixer(){const r=this.editor.model,i=r.document.selection;this.listenTo(i,"change:attribute",(s,{attributeKeys:o})=>{!o.includes("linkHref")||i.hasAttribute("linkHref")||r.change(a=>{tqe(a,nqe(r.schema))})})}_enableClipboardIntegration(){const t=this.editor,r=t.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(t.plugins.get("ClipboardPipeline"),"contentInsertion",(s,o)=>{r.change(a=>{const c=a.createRangeIn(o.content);for(const u of c.getItems())if(u.hasAttribute("linkHref")){const d=Bz(u.getAttribute("linkHref"),i);a.setAttribute("linkHref",d,u)}})})}}function tqe(n,e){n.removeSelectionAttribute("linkHref");for(const t of e)n.removeSelectionAttribute(t)}function nqe(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}class rqe extends On{constructor(e){super(e);const t=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:t.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:t.to(r=>{if(this.href){const i=()=>r.preventDefault();this.fire("navigate",this.href,i)}})}}),this.template.tag="a"}}class iqe extends Ut{constructor(t,r){super(t);j(this,"focusTracker",new Xs);j(this,"keystrokes",new Va);j(this,"backButtonView");j(this,"saveButtonView");j(this,"displayedTextInputView");j(this,"urlInputView");j(this,"children");j(this,"providersListChildren");j(this,"_validators");j(this,"_focusables",new Oc);j(this,"_focusCycler");this._validators=r,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new _h({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),$M({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(r=>{this._focusables.add(r),this.focusTracker.add(r.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const t of this._validators){const r=t(this);if(r)return this.urlInputView.errorText=r,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const t=this.locale.t,r=new On(this.locale);return r.set({class:"ck-button-back",label:t("Back"),icon:NA,tooltip:!0}),r.delegate("execute").to(this,"cancel"),r}_createSaveButton(){const t=this.locale.t,r=new On(this.locale);return r.set({label:t("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),r}_createHeaderView(){const t=this.locale.t,r=new PA(this.locale,{label:t("Link")});return r.children.add(this.backButtonView,0),r}_createProvidersListView(){const t=new fS(this.locale);return t.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),t.items.bindTo(this.providersListChildren).using(r=>{const i=new Bu(this.locale);return i.children.add(r),i}),t}_createDisplayedTextInput(){const t=this.locale.t,r=new YI(this.locale,XI);return r.label=t("Displayed text"),r.class="ck-labeled-field-view_full-width",r}_createUrlInput(){const t=this.locale.t,r=new YI(this.locale,XI);return r.fieldView.inputMode="url",r.label=t("Link URL"),r.class="ck-labeled-field-view_full-width",r}_createFormChildren(){this.children.add(new x$(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new x$(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:t}=this.urlInputView.fieldView;return t?t.value.trim():null}}class sqe extends Ut{constructor(t){super(t);j(this,"focusTracker",new Xs);j(this,"keystrokes",new Va);j(this,"backButtonView");j(this,"listView");j(this,"listChildren");j(this,"emptyListInformation");j(this,"children");j(this,"_focusables",new Oc);j(this,"_focusCycler");this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(r,i,s)=>{s?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(r,i)=>{this.fire("cancel"),i()}),this._focusCycler=new _h({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(r=>{this._focusables.add(r),this.focusTracker.add(r.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const t=new fS(this.locale);return t.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),t.items.bindTo(this.listChildren).using(r=>{const i=new Bu(this.locale);return i.children.add(r),i}),t}_createBackButton(){const t=this.locale.t,r=new On(this.locale);return r.set({class:"ck-button-back",label:t("Back"),icon:NA,tooltip:!0}),r.delegate("execute").to(this,"cancel"),r}_createHeaderView(){const t=new PA(this.locale);return t.bind("label").to(this,"title"),t.children.add(this.backButtonView,0),t}_createEmptyLinksListItemView(){const t=new Ut(this.locale);return t.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),t}}class oqe extends Ut{constructor(t){super(t);j(this,"focusTracker",new Xs);j(this,"keystrokes",new Va);j(this,"backButtonView");j(this,"children");j(this,"listChildren");j(this,"_focusables",new Oc);j(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new _h({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(r,i)=>{this.fire("back"),i()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(r=>{this._focusables.add(r),this.focusTracker.add(r.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const t=this.locale.t,r=new On(this.locale);return r.set({class:"ck-button-back",label:t("Back"),icon:NA,tooltip:!0}),r.delegate("execute").to(this,"back"),r}_createHeaderView(){const t=this.locale.t,r=new PA(this.locale,{label:t("Link properties")});return r.children.add(this.backButtonView,0),r}_createListView(){const t=new fS(this.locale);return t.extendTemplate({attributes:{class:["ck-link__list"]}}),t.items.bindTo(this.listChildren).using(r=>{const i=new Bu(this.locale);return i.children.add(r),i}),t}}class aqe extends On{constructor(t){super(t);j(this,"arrowView");this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Fu;return t.content=Npe,t}}const pd="link-ui";class lqe extends gt{constructor(){super(...arguments);j(this,"toolbarView",null);j(this,"formView",null);j(this,"linkProviderItemsView",null);j(this,"propertiesView",null);j(this,"_balloon");j(this,"_linksProviders",new Gu)}static get requires(){return[b$,nO]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=this.editor.t;this.set("selectedLinkableText",void 0),t.editing.view.addObserver(NVe),this._balloon=t.plugins.get(b$),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),t.conversion.for("editingDowncast").markerToHighlight({model:pd,view:{classes:["ck-fake-link-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:pd,view:(i,{writer:s})=>{if(!i.markerRange.isCollapsed)return null;const o=s.createUIElement("span");return s.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Create link"),keystroke:Pj},{label:r("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(t){const r=this._linksProviders.filter(i=>(i.order||0)<=(t.order||0)).length;this._linksProviders.add(t,r)}_createViews(){const t=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),t.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const t=this.editor,r=new Rz(t.locale),i=t.commands.get("link");r.class="ck-link-toolbar";let s=t.config.get("link.toolbar");return i.manualDecorators.length||(s=s.filter(o=>o!=="linkProperties")),r.fillFromConfig(s,t.ui.componentFactory),r.keystrokes.set("Esc",(o,a)=>{this._hideUI(),a()}),r.keystrokes.set(Pj,(o,a)=>{this._addFormView(),a()}),t.ui.addToolbar(r,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),r}_createFormView(){const t=this.editor,r=t.locale.t,i=t.commands.get("link"),s=t.config.get("link.defaultProtocol"),o=new(KI(iqe))(t.locale,cqe(t));return o.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",a=>a!==void 0),o.urlInputView.bind("isEnabled").to(i,"isEnabled"),o.saveButtonView.bind("isEnabled").to(i,"isEnabled"),o.saveButtonView.bind("label").to(i,"value",a=>r(a?"Update":"Insert")),this.listenTo(o,"submit",()=>{if(o.isValid()){const a=o.urlInputView.fieldView.element.value,c=Bz(a,s),u=o.displayedTextInputView.fieldView.element.value;t.execute("link",c,this._getDecoratorSwitchesState(),u!==this.selectedLinkableText?u:void 0),this._closeFormView()}}),this.listenTo(o.urlInputView,"change:errorText",()=>{t.ui.update()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(a,c)=>{this._closeFormView(),c()}),o.providersListChildren.bindTo(this._linksProviders).using(a=>this._createLinksListProviderButton(a)),o}_createLinkProviderListView(t){return t.getListItems().map(({href:r,label:i,icon:s})=>{const o=new On;return o.set({label:i,icon:s,tooltip:!1,withText:!0}),o.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=r,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),o})}_createLinkProviderItemsView(t){const r=this.editor,i=r.locale.t,s=new sqe(r.locale),{emptyListPlaceholder:o,label:a}=t;return s.emptyListPlaceholder=o||i("No links available"),s.title=a,this.listenTo(s,"cancel",()=>{r.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),s}_createPropertiesView(){const t=this.editor,r=this.editor.commands.get("link"),i=new(KI(oqe))(t.locale);return this.listenTo(i,"back",()=>{t.editing.view.focus(),this._removePropertiesView()}),i.listChildren.bindTo(r.manualDecorators).using(s=>{const o=new Iz(t.locale);return o.set({label:s.label,withText:!0}),o.bind("isOn").toMany([s,r],"value",(a,c)=>c===void 0&&a===void 0?!!s.defaultValue:!!a),o.on("execute",()=>{s.set("value",!o.isOn),t.execute("link",r.value,this._getDecoratorSwitchesState())}),o}),i}_getDecoratorSwitchesState(){const t=this.editor.commands.get("link");return Array.from(t.manualDecorators).reduce((r,i)=>{const s=t.value===void 0&&i.value===void 0?i.defaultValue:i.value;return{...r,[i.id]:!!s}},{})}_registerEditingOpeners(){this.editor.plugins.get(nO)._registerLinkOpener(r=>{const i=this._getLinkProviderLinkByHref(r);if(!i)return!1;const{item:s,provider:o}=i;return o.navigate?o.navigate(s):!1})}_registerComponents(){const t=this.editor;t.ui.componentFactory.add("link",()=>{const r=this._createButton(On);return r.set({tooltip:!0}),r}),t.ui.componentFactory.add("menuBar:link",()=>{const r=this._createButton(Ua);return r.set({role:"menuitemcheckbox"}),r}),t.ui.componentFactory.add("linkPreview",r=>{const i=new rqe(r),s=t.config.get("link.allowedProtocols"),o=t.commands.get("link"),a=r.t;i.bind("isEnabled").to(o,"value",u=>!!u),i.bind("href").to(o,"value",u=>u&&jge(u,s));const c=u=>{if(!u){i.label=void 0,i.icon=void 0,i.tooltip=a("Open link in new tab");return}const d=this._getLinkProviderLinkByHref(u);if(d){const{label:h,tooltip:f,icon:p}=d.item;i.label=h,i.tooltip=f||!1,i.icon=p}else i.label=u,i.icon=void 0,i.tooltip=a("Open link in new tab")};return c(o.value),this.listenTo(o,"change:value",(u,d,h)=>{c(h)}),this.listenTo(i,"navigate",(u,d,h)=>{const f=this._getLinkProviderLinkByHref(d);if(!f)return;const{provider:p,item:x}=f,{navigate:y}=p;y&&y(x)&&(u.stop(),h())}),i}),t.ui.componentFactory.add("unlink",r=>{const i=t.commands.get("unlink"),s=new On(r),o=r.t;return s.set({label:o("Unlink"),icon:k9e,tooltip:!0}),s.bind("isEnabled").to(i),this.listenTo(s,"execute",()=>{t.execute("unlink"),this._hideUI()}),s}),t.ui.componentFactory.add("editLink",r=>{const i=t.commands.get("link"),s=new On(r),o=r.t;return s.set({label:o("Edit link"),icon:h9e,tooltip:!0}),s.bind("isEnabled").to(i),this.listenTo(s,"execute",()=>{this._addFormView()}),s}),t.ui.componentFactory.add("linkProperties",r=>{const i=t.commands.get("link"),s=new On(r),o=r.t;return s.set({label:o("Link properties"),icon:x9e,tooltip:!0}),s.bind("isEnabled").to(i,"isEnabled",i,"value",i,"manualDecorators",(a,c,u)=>a&&!!c&&u.length>0),this.listenTo(s,"execute",()=>{this._addPropertiesView()}),s})}_createLinksListProviderButton(t){const r=this.editor.locale,i=new aqe(r);return i.set({label:t.label}),this.listenTo(i,"execute",()=>{this._showLinksProviderView(t)}),i}_createButton(t){const r=this.editor,i=r.locale,s=r.commands.get("link"),o=new t(r.locale),a=i.t;return o.set({label:a("Link"),icon:a9e,keystroke:Pj,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",c=>!!c),this.listenTo(o,"execute",()=>{r.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),o}_enableBalloonActivators(){const t=this.editor,r=t.editing.view.document;this.listenTo(r,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),t.keystrokes.set(Pj,(i,s)=>{s(),t.commands.get("link").isEnabled&&(t.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(t,r)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),r())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,r)=>{this._isUIVisible&&(this._hideUI(),r())}),BM({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),!this._isToolbarInPanel&&this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=t.isEnabled&&!!t.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),!this._arePropertiesInPanel&&(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(t){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(t),this._addLinkProviderItemsView(t)}_addLinkProviderItemsView(t){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(t)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const t=this.editor.commands.get("link");this.selectedLinkableText=void 0,t.value!==void 0?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(t=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),t&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(t=!0){const r=this.editor;this._isUIInPanel&&(this.stopListening(r.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t&&r.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(t),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const t=this.editor,r=t.editing.view.document;let i=this._getSelectedLinkElement(),s=a();const o=()=>{const c=this._getSelectedLinkElement(),u=a();i&&!c||!i&&u!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=c,s=u};function a(){return r.selection.focus.getAncestors().reverse().find(c=>c.is("element"))}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const t=this.editor.editing.view,r=t.document;if(this.editor.model.markers.has(pd)){const s=this.editor.editing.mapper.markerNameToElements(pd);if(s){const o=Array.from(s),a=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));return{target:t.domConverter.viewRangeToDom(a)}}}return{target:()=>{const s=this._getSelectedLinkElement();return s?t.domConverter.mapViewToDom(s):t.domConverter.viewRangeToDom(r.selection.getFirstRange())}}}_getSelectedLinkElement(){const t=this.editor.editing.view,r=t.document.selection,i=r.getSelectedElement();if(r.isCollapsed||i&&wi(i))return F5(r.getFirstPosition());{const s=r.getFirstRange().getTrimmed(),o=F5(s.start),a=F5(s.end);return!o||o!=a?null:t.createRangeIn(o).getTrimmed().isEqual(s)?o:null}}_getSelectedLinkableText(){const t=this.editor.model,r=this.editor.editing,i=this._getSelectedLinkElement();if(!i)return k$(t.document.selection.getFirstRange());const s=r.view.createRangeOn(i),o=r.mapper.toModelRange(s);return k$(o)}_getLinkProviderLinkByHref(t){if(!t)return null;for(const r of this._linksProviders){const i=r.getItem?r.getItem(t):r.getListItems().find(s=>s.href===t);if(i)return{provider:r,item:i}}return null}_showFakeVisualSelection(){const t=this.editor.model;t.change(r=>{const i=t.document.selection.getFirstRange();if(t.markers.has(pd))r.updateMarker(pd,{range:i});else if(i.start.isAtEnd){const s=i.start.getLastMatchingPosition(({item:o})=>!t.schema.isContent(o),{boundaries:i});r.addMarker(pd,{usingOperation:!1,affectsData:!1,range:r.createRange(s,i.end)})}else r.addMarker(pd,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(pd)&&t.change(r=>{r.removeMarker(pd)})}}function F5(n){return n.getAncestors().find(e=>VWe(e))||null}function cqe(n){const e=n.t,t=n.config.get("link.allowCreatingEmptyLinks");return[r=>{if(!t&&!r.url.length)return e("Link URL must not be empty.")}]}const uqe=4,Ige=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),dqe=2;class hqe extends gt{static get requires(){return[Vg,nO]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?HM(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const i=this.editor.model,s=i.document.selection,o=s.getFirstPosition(),a=s.getLastPosition();let c=t.getJoined(this._expandLinkRange(i,o)||t);c&&(c=c.getJoined(this._expandLinkRange(i,a)||t)),c&&(c.start.isBefore(o)||c.end.isAfter(a))&&e.setSelection(c)}_enablePasteLinking(){const e=this.editor,t=e.model,r=t.document.selection,i=e.plugins.get("ClipboardPipeline"),s=e.commands.get("link");i.on("inputTransformation",(o,a)=>{if(!this.isEnabled||!s.isEnabled||r.isCollapsed||a.method!=="paste"||r.rangeCount>1)return;const c=r.getFirstRange(),u=a.dataTransfer.getData("text/plain");if(!u)return;const d=u.match(Ige);d&&d[2]===u&&(t.change(h=>{this._selectEntireLinks(h,c),s.execute(u)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new xze(e.model,r=>{let i=r;if(!fqe(i))return;i=i.slice(0,-1),"!.:,;?".includes(i[i.length-1])&&(i=i.slice(0,-1));const s=JQ(i);if(s)return{url:s,removedTrailingCharacters:r.length-i.length}});t.on("matched:data",(r,i)=>{const{batch:s,range:o,url:a,removedTrailingCharacters:c}=i;if(!s.isTyping)return;const u=o.end.getShiftedBy(-c),d=u.getShiftedBy(-a.length),h=e.model.createRange(d,u);this._applyAutoLink(a,h)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,r=e.commands.get("enter");r&&r.on("execute",()=>{var o;const i=t.document.selection.getFirstPosition();let s;(o=i.parent.previousSibling)!=null&&o.is("element")?s=t.createRangeIn(i.parent.previousSibling):s=t.createRange(t.createPositionAt(i.parent,0),i),this._checkAndApplyAutoLinkOnRange(s)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,r=e.commands.get("shiftEnter");r&&r.on("execute",()=>{const i=t.document.selection.getFirstPosition(),s=t.createRange(t.createPositionAt(i.parent,0),i.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(s)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:r,range:i}=nge(e,t),s=JQ(r);if(s){const o=t.createRange(i.end.getShiftedBy(-s.length),i.end);this._applyAutoLink(s,o)}}_applyAutoLink(e,t){const r=this.editor.model,i=this.editor.config.get("link.defaultProtocol"),s=Bz(e,i);!this.isEnabled||!mqe(t,r)||!Pge(s)||pqe(t)||this._persistAutoLink(s,t)}_persistAutoLink(e,t){const r=this.editor.model,i=this.editor.plugins.get("Delete");r.enqueueChange(s=>{s.setAttribute("linkHref",e,t),r.enqueueChange(()=>{i.requestUndoOnBackspace()})})}}function fqe(n){return n.length>uqe&&n[n.length-1]===" "&&n[n.length-2]!==" "}function JQ(n){const e=Ige.exec(n);return e?e[dqe]:null}function mqe(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function pqe(n){const e=n.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}class gqe extends gt{static get requires(){return[nO,lqe,hqe]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Nc{constructor(e,t){j(this,"_startElement");j(this,"_referenceIndent");j(this,"_isForward");j(this,"_includeSelf");j(this,"_sameAttributes");j(this,"_sameIndent");j(this,"_lowerIndent");j(this,"_higherIndent");this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=Ur(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){const i=new this(e,t)[Symbol.iterator]();return Ra(i)}*[Symbol.iterator](){const e=[];for(const{node:t}of new OA(this._getStartNode(),this._isForward?"forward":"backward")){const r=t.getAttribute("listIndent");if(r<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=r}else if(r>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(i=>t.getAttribute(i)!==this._startElement.getAttribute(i)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class OA{constructor(e,t="forward"){j(this,"_node");j(this,"_isForward");j(this,"_previousNodesByIndent",[]);j(this,"_previous",null);j(this,"_previousNodeIndent",null);this._node=e,this._isForward=t==="forward"}[Symbol.iterator](){return this}next(){if(!Er(this._node))return{done:!0,value:void 0};const e=this._node.getAttribute("listIndent");let t=null;if(this._previous){const i=this._previousNodeIndent;e>i?this._previousNodesByIndent[i]=this._previous:e<i?(t=this._previousNodesByIndent[e]||null,this._previousNodesByIndent.length=e):t=this._previous}const r={node:this._node,previous:this._previous,previousNodeInList:t};return this._previous=this._node,this._previousNodeIndent=e,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:r,done:!1}}}class vqe{constructor(e){j(this,"_listHead");this._listHead=e}[Symbol.iterator](){return new OA(this._listHead)}}class k_{static next(){return Xo()}}function Er(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function pS(n,e={}){return[...Ug(n,{...e,direction:"backward"}),...Ug(n,{...e,direction:"forward"})]}function Ug(n,e={}){const t=e.direction=="forward",r=Array.from(new Nc(n,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?r:r.reverse()}function yqe(n){return Array.from(new Nc(n,{direction:"forward",higherIndent:!0}))}function Oge(n,e){const t=new Nc(n,{sameIndent:!0,sameAttributes:"listType",...e}),r=new Nc(n,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(t).reverse(),...r]}function zg(n){return!Nc.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function QQ(n){return!Nc.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function RA(n,e={}){n=Ur(n);const t=e.withNested!==!1,r=new Set;for(const i of n)for(const s of pS(i,{higherIndent:t}))r.add(s);return px(r)}function xqe(n){n=Ur(n);const e=new Set;for(const t of n)for(const r of Oge(t))e.add(r);return px(e)}function $z(n,e){const t=Ug(n,{direction:"forward"}),r=k_.next();for(const i of t)e.setAttribute("listItemId",r,i);return t}function C$(n,e,t){const r={};for(const[s,o]of e.getAttributes())s.startsWith("list")&&(r[s]=o);const i=Ug(n,{direction:"forward"});for(const s of i)t.setAttributes(r,s);return i}function E$(n,e,{expand:t,indentBy:r=1}={}){n=Ur(n);const i=t?RA(n):n;for(const s of i){const o=s.getAttribute("listIndent")+r;o<0?GM(s,e):e.setAttribute("listIndent",o,s)}return i}function bqe(n,e){n=Ur(n);const t=RA(n),r=new Set,i=Math.min(...t.map(o=>o.getAttribute("listIndent"))),s=new Map;for(const o of t)s.set(o,Nc.first(o,{lowerIndent:!0}));for(const o of t){if(r.has(o))continue;r.add(o);const a=o.getAttribute("listIndent")-1;if(a<0){GM(o,e);continue}if(o.getAttribute("listIndent")==i){const c=Sqe(o,s.get(o),e);for(const u of c)r.add(u);if(c.length)continue}e.setAttribute("listIndent",a,o)}return px(r)}function GM(n,e){n=Ur(n);for(const t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of n)for(const r of t.getAttributeKeys())r.startsWith("list")&&e.removeAttribute(r,t);return n}function xE(n){if(!n.length)return!1;const e=n[0].getAttribute("listItemId");return e?!n.some(t=>t.getAttribute("listItemId")!=e):!1}function wqe(n,e){const t=[];let r=Number.POSITIVE_INFINITY;for(const{node:i}of new OA(n.nextSibling)){const s=i.getAttribute("listIndent");if(s==0)break;s<r&&(r=s);const o=s-r;e.setAttribute("listIndent",o,i),t.push(i)}return t}function px(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function bE(n){const e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function B5(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function _qe(n){return n=="numbered"||n=="customNumbered"}function Sqe(n,e,t){return Ug(e,{direction:"forward"}).pop().index>n.index?C$(n,e,t):[]}class ZQ extends ci{constructor(t,r){super(t);j(this,"_direction");this._direction=r}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model,r=eZ(t.document.selection);t.change(i=>{const s=[];xE(r)&&!zg(r[0])?(this._direction=="forward"&&s.push(...E$(r,i)),s.push(...$z(r[0],i))):this._direction=="forward"?s.push(...E$(r,i,{expand:!0})):s.push(...bqe(r,i));for(const o of s){if(!o.hasAttribute("listType"))continue;const a=Nc.first(o,{sameIndent:!0});a&&i.setAttribute("listType",a.getAttribute("listType"),o)}this._fireAfterExecute(s)})}_fireAfterExecute(t){this.fire("afterExecute",px(new Set(t)))}_checkEnabled(){let t=eZ(this.editor.model.document.selection),r=t[0];if(!r)return!1;if(this._direction=="backward"||xE(t)&&!zg(t[0]))return!0;t=RA(t),r=t[0];const i=Nc.first(r,{sameIndent:!0});return i?i.getAttribute("listType")==r.getAttribute("listType"):!1}}function eZ(n){const e=Array.from(n.getSelectedBlocks()),t=e.findIndex(r=>!Er(r));return t!=-1&&(e.length=t),e}class Ij extends ci{constructor(t,r,i={}){super(t);j(this,"type");j(this,"_listWalkerOptions");this.type=r,this._listWalkerOptions=i.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const r=this.editor.model,i=r.document,s=bE(r),o=Array.from(i.selection.getSelectedBlocks()).filter(c=>r.schema.checkAttribute(c,"listType")||B5(c,r.schema)),a=t.forceValue!==void 0?!t.forceValue:this.value;r.change(c=>{if(a){const u=o[o.length-1],d=Ug(u,{direction:"forward"}),h=[];d.length>1&&h.push(...$z(d[1],c)),h.push(...GM(o,c)),h.push(...wqe(u,c)),this._fireAfterExecute(h)}else if((s||i.selection.isCollapsed)&&Er(o[0])){const u=Oge(s||o[0],this._listWalkerOptions);for(const d of u)c.setAttributes({...t.additionalAttributes,listType:this.type},d);this._fireAfterExecute(u)}else{const u=[];for(const d of o)if(!d.hasAttribute("listType"))!d.is("element","listItem")&&B5(d,r.schema)&&c.rename(d,"listItem"),c.setAttributes({...t.additionalAttributes,listIndent:0,listItemId:k_.next(),listType:this.type},d),u.push(d);else for(const h of RA(d,{withNested:!1}))h.getAttribute("listType")!=this.type&&(c.setAttributes({...t.additionalAttributes,listType:this.type},h),u.push(h));this._fireAfterExecute(u)}})}_fireAfterExecute(t){this.fire("afterExecute",px(new Set(t)))}_getValue(){const t=this.editor.model.document.selection,r=Array.from(t.getSelectedBlocks());if(!r.length)return!1;for(const i of r)if(i.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const t=this.editor.model,r=t.schema,i=t.document.selection,s=Array.from(i.getSelectedBlocks());if(!s.length)return!1;if(this.value)return!0;for(const o of s)if(r.checkAttribute(o,"listType")||B5(o,r))return!0;return!1}}class tZ extends ci{constructor(t,r){super(t);j(this,"_direction");this._direction=r}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:t=!1}={}){const r=this.editor.model,i=r.document.selection,s=[];r.change(o=>{const{firstElement:a,lastElement:c}=this._getMergeSubjectElements(i,t),u=a.getAttribute("listIndent")||0,d=c.getAttribute("listIndent"),h=c.getAttribute("listItemId");if(u!=d){const f=yqe(c);s.push(...E$([c,...f],o,{indentBy:u-d,expand:u<d}))}if(t){let f=i;i.isCollapsed&&(f=o.createSelection(o.createRange(o.createPositionAt(a,"end"),o.createPositionAt(c,0)))),r.deleteContent(f,{doNotResetEntireContent:i.isCollapsed});const p=f.getLastPosition().parent,x=p.nextSibling;s.push(p),x&&x!==c&&x.getAttribute("listItemId")==h&&s.push(...C$(x,p,o))}else s.push(...C$(c,a,o));this._fireAfterExecute(s)})}_fireAfterExecute(t){this.fire("afterExecute",px(new Set(t)))}_checkEnabled(){const t=this.editor.model,r=t.document.selection,i=bE(t);if(r.isCollapsed||i){const s=i||r.getFirstPosition().parent;if(!Er(s))return!1;const o=this._direction=="backward"?s.previousSibling:s.nextSibling;if(!o||xE([s,o]))return!1}else{const s=r.getLastPosition(),o=r.getFirstPosition();if(s.parent===o.parent||!Er(s.parent))return!1}return!0}_getMergeSubjectElements(t,r){const i=this.editor.model,s=bE(i);let o,a;if(t.isCollapsed||s){const c=s||t.getFirstPosition().parent,u=zg(c);this._direction=="backward"?(a=c,u&&!r?o=Nc.first(c,{sameIndent:!0,lowerIndent:!0}):o=c.previousSibling):(o=c,a=c.nextSibling)}else o=t.getFirstPosition().parent,a=t.getLastPosition().parent;return{firstElement:o,lastElement:a}}}class nZ extends ci{constructor(t,r){super(t);j(this,"_direction");this._direction=r}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(r=>{const i=$z(this._getStartBlock(),r);this._fireAfterExecute(i)})}_fireAfterExecute(t){this.fire("afterExecute",px(new Set(t)))}_checkEnabled(){const t=this.editor.model.document.selection,r=this._getStartBlock();return t.isCollapsed&&Er(r)&&!zg(r)}_getStartBlock(){const r=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?r:r.nextSibling}}class kqe extends gt{static get pluginName(){return"ListItemBoldIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$u]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),r=e.plugins.get($u);!e.plugins.has("BoldEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("bold","listItemBold"),r.registerDowncastStrategy({scope:"item",attributeName:"listItemBold",setAttributeOnDowncast(i,s,o,a){s&&(i.addClass("ck-list-marker-bold",o),Vt.isSafari&&!(a&&a.dataPipeline)&&i.setStyle("--ck-content-list-marker-dummy-bold","0",o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("BoldEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemBold"}),t.schema.setAttributeProperties("listItemBold",{isFormatting:!0}),t.schema.addAttributeCheck(r=>{if(!r.last.getAttribute("listItemId"))return!1},"listItemBold"),e.conversion.for("upcast").attributeToAttribute({model:"listItemBold",view:{name:"li",classes:"ck-list-marker-bold"}}))}}class Cqe extends gt{static get pluginName(){return"ListItemItalicIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$u]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),r=e.plugins.get($u);!e.plugins.has("ItalicEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("italic","listItemItalic"),r.registerDowncastStrategy({scope:"item",attributeName:"listItemItalic",setAttributeOnDowncast(i,s,o,a){s&&(i.addClass("ck-list-marker-italic",o),Vt.isSafari&&!(a&&a.dataPipeline)&&i.setStyle("--ck-content-list-marker-dummy-italic","0",o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("ItalicEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemItalic"}),t.schema.setAttributeProperties("listItemItalic",{isFormatting:!0}),t.schema.addAttributeCheck(r=>{if(!r.last.getAttribute("listItemId"))return!1},"listItemItalic"),e.conversion.for("upcast").attributeToAttribute({model:"listItemItalic",view:{name:"li",classes:"ck-list-marker-italic"}}))}}class Eqe extends gt{static get pluginName(){return"ListItemFontSizeIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$u]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),r=e.plugins.get($u);if(!e.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;const i=BQ(e.config.get("fontSize.options"));t.registerFormatAttribute("fontSize","listItemFontSize"),r.registerDowncastStrategy({scope:"item",attributeName:"listItemFontSize",setAttributeOnDowncast(s,o,a,c){if(o){const u=i.find(d=>d.model==o);u&&u.view&&typeof u.view!="string"?u.view.styles?(s.addClass("ck-list-marker-font-size",a),s.setStyle("--ck-content-list-marker-font-size",u.view.styles["font-size"],a)):u.view.classes&&(s.addClass(`ck-list-marker-font-size-${o}`,a),Vt.isSafari&&!(c&&c.dataPipeline)&&s.setStyle("--ck-content-list-marker-dummy-font-size","0",a)):(s.addClass("ck-list-marker-font-size",a),s.setStyle("--ck-content-list-marker-font-size",o,a))}}})}afterInit(){const e=this.editor,t=e.model;if(!e.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;t.schema.extend("$listItem",{allowAttributes:"listItemFontSize"}),t.schema.setAttributeProperties("listItemFontSize",{isFormatting:!0}),t.schema.addAttributeCheck(i=>{if(!i.last.getAttribute("listItemId"))return!1},"listItemFontSize"),e.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:i=>i.getStyle("--ck-content-list-marker-font-size")},view:{name:"li",classes:"ck-list-marker-font-size",styles:{"--ck-content-list-marker-font-size":/.*/}}});const r=BQ(e.config.get("fontSize.options"));for(const i of r)i.model&&i.view&&e.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:i.model},view:{name:"li",classes:`ck-list-marker-font-size-${i.model}`}})}}class Tqe extends gt{static get pluginName(){return"ListItemFontColorIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$u]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),r=e.plugins.get($u);!e.plugins.has("FontColorEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("fontColor","listItemFontColor"),r.registerDowncastStrategy({scope:"item",attributeName:"listItemFontColor",setAttributeOnDowncast(i,s,o){s&&(i.addClass("ck-list-marker-color",o),i.setStyle("--ck-content-list-marker-color",s,o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("FontColorEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemFontColor"}),t.schema.setAttributeProperties("listItemFontColor",{isFormatting:!0}),t.schema.addAttributeCheck(r=>{if(!r.last.getAttribute("listItemId"))return!1},"listItemFontColor"),e.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontColor",value:r=>r.getStyle("--ck-content-list-marker-color")},view:{name:"li",classes:"ck-list-marker-color",styles:{"--ck-content-list-marker-color":/.*/}}}))}}class Aqe extends gt{static get pluginName(){return"ListItemFontFamilyIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$u]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),r=e.plugins.get($u);!e.plugins.has("FontFamilyEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("fontFamily","listItemFontFamily"),r.registerDowncastStrategy({scope:"item",attributeName:"listItemFontFamily",setAttributeOnDowncast(i,s,o){s&&(i.addClass("ck-list-marker-font-family",o),i.setStyle("--ck-content-list-marker-font-family",s,o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("FontFamilyEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemFontFamily"}),t.schema.setAttributeProperties("listItemFontFamily",{isFormatting:!0}),t.schema.addAttributeCheck(r=>{if(!r.last.getAttribute("listItemId"))return!1},"listItemFontFamily"),e.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontFamily",value:r=>r.getStyle("--ck-content-list-marker-font-family")},view:{name:"li",classes:"ck-list-marker-font-family",styles:{"--ck-content-list-marker-font-family":/.*/}}}))}}class Nqe extends gt{constructor(t){super(t);j(this,"_loadedFormatting",{});t.config.define("list.enableListItemMarkerFormatting",!0)}static get pluginName(){return"ListFormatting"}static get isOfficialPlugin(){return!0}static get requires(){return[kqe,Cqe,Eqe,Tqe,Aqe]}afterInit(){this.editor.config.get("list.enableListItemMarkerFormatting")&&this._registerPostfixerForListItemFormatting()}_registerPostfixerForListItemFormatting(){const t=this.editor.model;t.document.registerPostFixer(r=>{const i=t.document.differ.getChanges(),s=new Set;let o=!1;for(const a of i)if(a.type==="attribute")(a.attributeKey=="listItemId"||a.attributeKey=="listType"||this._isInlineOrSelectionFormatting(a.attributeKey)||Object.values(this._loadedFormatting).includes(a.attributeKey))&&(Er(a.range.start.nodeAfter)?s.add(a.range.start.nodeAfter):Er(a.range.start.parent)&&s.add(a.range.start.parent));else if(Er(a.position.nodeAfter)&&s.add(a.position.nodeAfter),Er(a.position.nodeBefore)&&s.add(a.position.nodeBefore),Er(a.position.parent)&&s.add(a.position.parent),a.type=="insert"&&a.name!="$text"){const c=r.createRangeIn(a.position.nodeAfter);for(const u of c.getItems())Er(u)&&s.add(u)}for(const a of s){const c=jqe(t,a,Object.keys(this._loadedFormatting));for(const[u,d]of Object.entries(c)){const h=this._loadedFormatting[u];(d&&Pqe(r,a,h,d)||!d&&Iqe(r,a,h))&&(o=!0)}}return o})}registerFormatAttribute(t,r){this._loadedFormatting[t]=r}_isInlineOrSelectionFormatting(t){return t.replace(/^selection:/,"")in this._loadedFormatting}}function jqe(n,e,t){if(zg(e))return rZ(n,e,t);const r=pS(e);return rZ(n,r[0],t)}function rZ(n,e,t){if(!Oqe(e)||n.schema.isLimit(e))return Object.fromEntries(t.map(a=>[a]));if(e.isEmpty)return Object.fromEntries(t.map(a=>[a,e.getAttribute(`selection:${a}`)]));const r=new Set(t),i={},o=n.createRangeIn(e).getWalker({ignoreElementEnd:!0});for(const{item:a}of o){for(const c of r)if(n.schema.checkAttribute(a,c)){const u=a.getAttribute(c);u===void 0?(r.delete(c),i[c]=void 0):i[c]===void 0?i[c]=u:i[c]!==u&&(r.delete(c),i[c]=void 0)}else c in i||(i[c]=void 0);if(!r.size)break;n.schema.isLimit(a)&&o.jumpTo(n.createPositionAfter(a))}return i}function Pqe(n,e,t,r){const i=pS(e);let s=!1;for(const o of i)(!o.hasAttribute(t)||o.getAttribute(t)!==r)&&(n.setAttribute(t,r,o),s=!0);return s}function Iqe(n,e,t){const r=pS(e);let i=!1;for(const s of r)s.hasAttribute(t)&&(n.removeAttribute(t,s),i=!0);return i}function Oqe(n){return["numbered","bulleted","customNumbered","customBulleted"].includes(n.getAttribute("listType"))}class Rqe extends gt{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(e){return xqe(e)}isFirstBlockOfListItem(e){return zg(e)}isListItemBlock(e){return Er(e)}expandListBlocksToCompleteItems(e,t={}){return RA(e,t)}isNumberedListType(e){return _qe(e)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Mqe(n){return n.is("element","ol")||n.is("element","ul")}function T$(n){return n.is("element","li")}function Dqe(n){let e=0,t=n.parent;for(;t;){if(T$(t))e++;else{const r=t.previousSibling;r&&T$(r)&&e++}t=t.parent}return e}function Lqe(n,e,t,r=Mge(t,e)){return n.createAttributeElement(Rge(t),null,{priority:2*e/100-100,id:r})}function Fqe(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function Rge(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function Mge(n,e){return`list-${n}-${e}`}function gu(n,e,t){const r=n.nodeBefore;if(Er(r)){let i=r;for(const{node:s}of new OA(i,"backward"))if(i=s,t.has(i)||(t.add(i),e.has(r)))return;e.add(i)}else{const i=n.nodeAfter;Er(i)&&e.add(i)}}function Bqe(n,e){let t=0,r=-1,i=null,s=!1;for(const{node:o}of n){const a=o.getAttribute("listIndent");if(a>t){let c;i===null?(i=a-t,c=t):(i>a&&(i=a),c=a-i),c>r+1&&(c=r+1),e.setAttribute("listIndent",c,o),s=!0,r=c}else i=null,t=a+1,r=a}return s}function $qe(n,e,t){const r=new Set;let i=!1;for(const{node:s}of n){if(r.has(s))continue;let o=s.getAttribute("listType"),a=s.getAttribute("listItemId");if(e.has(a)&&(a=k_.next()),e.add(a),s.is("element","listItem")){s.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,s),i=!0);continue}for(const c of Ug(s,{direction:"forward"}))r.add(c),c.getAttribute("listType")!=o&&(a=k_.next(),o=c.getAttribute("listType")),c.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,c),i=!0)}return i}function Vqe(){return(n,e,t)=>{const{writer:r,schema:i}=t;if(!e.modelRange)return;const s=Array.from(e.modelRange.getItems({shallow:!0})).filter(h=>i.checkAttribute(h,"listItemId"));if(!s.length)return;const o=e.viewItem.getAttribute("data-list-item-id")||k_.next();t.consumable.consume(e.viewItem,{attributes:"data-list-item-id"});const a=Dqe(e.viewItem);let c=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const u=s[0].getAttribute("listType");u&&(c=u);const d={listItemId:o,listIndent:a,listType:c};for(const h of s)h.hasAttribute("listItemId")||r.setAttributes(d,h);s.length>1&&s[1].getAttribute("listItemId")!=d.listItemId&&t.keepEmptyElement(s[0])}}function Uqe(n,e,t,r){return()=>{const a=n.document.differ.getChanges(),c=[],u=new Set,d=new Set,h=new Set;for(const f of a)if(f.type=="insert"&&f.name!="$text")gu(f.position,u,h),f.attributes.has("listItemId")?d.add(f.position.nodeAfter):gu(f.position.getShiftedBy(f.length),u,h);else if(f.type=="remove"&&f.attributes.has("listItemId"))gu(f.position,u,h);else if(f.type=="attribute"){const p=f.range.start.nodeAfter;t.includes(f.attributeKey)?(gu(f.range.start,u,h),f.attributeNewValue===null?(gu(f.range.start.getShiftedBy(1),u,h),s(p)&&c.push(p)):d.add(p)):Er(p)&&s(p)&&c.push(p)}for(const f of u.values())c.push(...i(f,d));for(const f of new Set(c))e.reconvertItem(f)};function i(a,c){const u=[],d=new Set,h=[];for(const{node:f,previous:p}of new OA(a)){if(d.has(f))continue;const x=f.getAttribute("listIndent");p&&x<p.getAttribute("listIndent")&&(h.length=x+1),h[x]={modelAttributes:Object.fromEntries(Array.from(f.getAttributes()).filter(([b])=>t.includes(b))),modelElement:f};const y=Ug(f,{direction:"forward"});for(const b of y)d.add(b),(s(b,y)||o(b,h,c))&&u.push(b)}return u}function s(a,c){const u=e.mapper.toViewElement(a);if(!u)return!1;if(r.fire("checkElement",{modelElement:a,viewElement:u}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const h=Lge(a,t,c);return h&&u.is("element","p")?!0:!!(!h&&u.is("element","span"))}function o(a,c,u){if(u.has(a))return!1;const d=e.mapper.toViewElement(a);let h=c.length-1;for(let f=d.parent;!f.is("editableElement");f=f.parent){const p=T$(f),x=Mqe(f);if(!x&&!p)continue;const y=`checkAttributes:${p?"item":"list"}`;if(r.fire(y,{viewElement:f,modelAttributes:c[h].modelAttributes,modelReferenceElement:c[h].modelElement}))break;if(x&&(h--,h<0))return!1}return!0}}function iZ(n,e,t,{dataPipeline:r}={}){const i=Yqe(n);return(s,o,a)=>{const{writer:c,mapper:u,consumable:d}=a,h=o.item;if(!n.includes(o.attributeKey)||!i(h,d))return;const f={...a.options,dataPipeline:r},p=Hqe(h,u,t);Dge(p,c,u),Gqe(p,c);const x=qqe(h,p,e,c,f);Kqe(h,x,e,c,f)}}function zqe(n){return(e,t,r)=>{const{writer:i,mapper:s}=r,o=e.name.split(":")[1];if(!n.checkAttribute(o,"listItemId"))return;const a=s.toViewPosition(t.position),c=t.position.getShiftedBy(t.length),u=s.toViewPosition(c,{isPhantom:!0}),h=i.createRange(a,u).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */h&&Dge(h,i,s)}}function sZ(n,{dataPipeline:e}={}){return(t,{writer:r})=>{if(!Lge(t,n))return null;if(!e)return r.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const i=r.createContainerElement("p");return r.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}function Hqe(n,e,t){const r=t.createRangeOn(n);return e.toViewRange(r).getTrimmed().end.nodeBefore}function Wqe(n,e){return(t,r)=>{if(r.modelPosition.offset>0)return;const i=r.modelPosition.parent;if(!Er(i)||!n.some(u=>u.scope=="itemMarker"&&u.canInjectMarkerIntoElement&&u.canInjectMarkerIntoElement(i)))return;const s=r.mapper.toViewElement(i),o=e.createRangeIn(s),a=o.getWalker();let c=o.start;for(const{item:u}of a){if(u.is("element")&&r.mapper.toModelElement(u)||u.is("$textProxy"))break;u.is("element")&&u.getCustomProperty("listItemMarker")&&(c=e.createPositionAfter(u),a.skip(({previousPosition:d})=>!d.isEqual(c)))}r.viewPosition=c}}function Dge(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);const r=[];i(e.createPositionBefore(n).getWalker({direction:"backward"})),i(e.createRangeIn(n).getWalker());for(const s of r)e.remove(s);function i(s){for(const{item:o}of s){if(o.is("element")&&t.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&r.push(o)}}}function qqe(n,e,t,r,{dataPipeline:i}){let s=r.createRangeOn(e);if(!zg(n))return s;for(const o of t){if(o.scope!="itemMarker")continue;const a=o.createElement(r,n,{dataPipeline:i});if(!a||(r.setCustomProperty("listItemMarker",!0,a),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(n)?r.insert(r.createPositionAt(e,0),a):(r.insert(s.start,a),s=r.createRange(r.createPositionBefore(a),r.createPositionAfter(e))),!o.createWrapperElement||!o.canWrapElement))continue;const c=o.createWrapperElement(r,n,{dataPipeline:i});r.setCustomProperty("listItemWrapper",!0,c),o.canWrapElement(n)?s=r.wrap(s,c):(s=r.wrap(r.createRangeOn(a),c),s=r.createRange(s.start,r.createPositionAfter(e)))}return s}function Gqe(n,e){let t=n.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const r=t.parent;e.unwrap(e.createRangeOn(n),t),t=r}}function Kqe(n,e,t,r,i){if(!n.hasAttribute("listIndent"))return;const s=n.getAttribute("listIndent");let o=n;for(let a=s;a>=0;a--){const c=Fqe(r,a,o.getAttribute("listItemId")),u=Lqe(r,a,o.getAttribute("listType"));for(const d of t)(d.scope=="list"||d.scope=="item")&&o.hasAttribute(d.attributeName)&&d.setAttributeOnDowncast(r,o.getAttribute(d.attributeName),d.scope=="list"?u:c,i);if(e=r.wrap(e,c),e=r.wrap(e,u),a==0||(o=Nc.first(o,{lowerIndent:!0}),!o))break}}function Yqe(n){return(e,t)=>{const r=[];for(const i of n)e.hasAttribute(i)&&r.push(`attribute:${i}`);return r.every(i=>t.test(e,i)!==!1)?(r.forEach(i=>t.consume(e,i)),!0):!1}}function Lge(n,e,t=pS(n)){if(!Er(n))return!1;for(const r of n.getAttributeKeys())if(!(r.startsWith("selection:")||r=="htmlEmptyBlock")&&!e.includes(r))return!1;return t.length<2}const kP=["listType","listIndent","listItemId"];class $u extends gt{constructor(t){super(t);j(this,"_downcastStrategies",[]);t.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[WM,Vg,Rqe,ph,Nqe]}init(){const t=this.editor,r=t.model,i=t.config.get("list.multiBlock");if(t.plugins.has("LegacyListEditing"))throw new _e("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});r.schema.register("$listItem",{allowAttributes:kP}),i?(r.schema.extend("$container",{allowAttributesOf:"$listItem"}),r.schema.extend("$block",{allowAttributesOf:"$listItem"}),r.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):r.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const s of kP)r.schema.setAttributeProperties(s,{copyOnReplace:!0});t.commands.add("numberedList",new Ij(t,"numbered")),t.commands.add("bulletedList",new Ij(t,"bulleted")),t.commands.add("customNumberedList",new Ij(t,"customNumbered",{multiLevel:!0})),t.commands.add("customBulletedList",new Ij(t,"customBulleted",{multiLevel:!0})),t.commands.add("indentList",new ZQ(t,"forward")),t.commands.add("outdentList",new ZQ(t,"backward")),t.commands.add("splitListItemBefore",new nZ(t,"before")),t.commands.add("splitListItemAfter",new nZ(t,"after")),i&&(t.commands.add("mergeListItemBackward",new tZ(t,"backward")),t.commands.add("mergeListItemForward",new tZ(t,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration(),this._setupListItemIdConversionStrategy()}afterInit(){const r=this.editor.commands,i=r.get("indent"),s=r.get("outdent");i&&i.registerChildCommand(r.get("indentList"),{priority:"high"}),s&&s.registerChildCommand(r.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(t){this._downcastStrategies.push(t)}getListAttributeNames(){return[...kP,...this._downcastStrategies.map(t=>t.attributeName)]}_setupDeleteIntegration(){const t=this.editor,r=t.commands.get("mergeListItemBackward"),i=t.commands.get("mergeListItemForward");this.listenTo(t.editing.view.document,"delete",(s,o)=>{const a=t.model.document.selection;bE(t.model)||t.model.change(()=>{const c=a.getFirstPosition();if(a.isCollapsed&&o.direction=="backward"){if(!c.isAtStart)return;const u=c.parent;if(!Er(u))return;if(!Nc.first(u,{sameAttributes:"listType",sameIndent:!0})&&u.getAttribute("listIndent")===0)QQ(u)||t.execute("splitListItemAfter"),t.execute("outdentList");else{if(!r||!r.isEnabled)return;r.execute({shouldMergeOnBlocksContentLevel:oZ(t.model,"backward")})}o.preventDefault(),s.stop()}else{if(a.isCollapsed&&!a.getLastPosition().isAtEnd||!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:oZ(t.model,"forward")}),o.preventDefault(),s.stop()}})},{context:"li"})}_setupEnterIntegration(){const t=this.editor,r=t.model,i=t.commands,s=i.get("enter");this.listenTo(t.editing.view.document,"enter",(o,a)=>{const c=r.document,u=c.selection.getFirstPosition().parent;if(c.selection.isCollapsed&&Er(u)&&u.isEmpty&&!a.isSoft){const d=zg(u),h=QQ(u);d&&h?(t.execute("outdentList"),a.preventDefault(),o.stop()):d&&!h?(t.execute("splitListItemAfter"),a.preventDefault(),o.stop()):h&&(t.execute("splitListItemBefore"),a.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(s,"afterExecute",()=>{const o=i.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const c=t.model.document.selection.getLastPosition().parent;pS(c).length===2&&o.execute()})}_setupTabIntegration(){const t=this.editor;this.listenTo(t.editing.view.document,"tab",(r,i)=>{const s=i.shiftKey?"outdentList":"indentList";this.editor.commands.get(s).isEnabled&&(t.execute(s),i.stopPropagation(),i.preventDefault(),r.stop())},{context:"li"})}_setupConversion(){const t=this.editor,r=t.model,i=this.getListAttributeNames(),s=t.config.get("list.multiBlock"),o=s?"paragraph":"listItem";t.conversion.for("upcast").elementToElement({view:"li",model:(c,{writer:u})=>u.createElement(o,{listType:""})}).elementToElement({view:"p",model:(c,{writer:u})=>c.parent&&c.parent.is("element","li")?u.createElement(o,{listType:""}):null,converterPriority:"high"}).add(c=>{c.on("element:li",Vqe())}),s||t.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),t.conversion.for("editingDowncast").elementToElement({model:o,view:sZ(i),converterPriority:"high"}).add(c=>{c.on("attribute",iZ(i,this._downcastStrategies,r)),c.on("remove",zqe(r.schema))}),t.conversion.for("dataDowncast").elementToElement({model:o,view:sZ(i,{dataPipeline:!0}),converterPriority:"high"}).add(c=>{c.on("attribute",iZ(i,this._downcastStrategies,r,{dataPipeline:!0}))});const a=Wqe(this._downcastStrategies,t.editing.view);t.editing.mapper.on("modelToViewPosition",a),t.data.mapper.on("modelToViewPosition",a),this.listenTo(r.document,"change:data",Uqe(r,t.editing,i,this),{priority:"high"}),this.on("checkAttributes:item",(c,{viewElement:u,modelAttributes:d})=>{u.id!=d.listItemId&&(c.return=!0,c.stop())}),this.on("checkAttributes:list",(c,{viewElement:u,modelAttributes:d})=>{(u.name!=Rge(d.listType)||u.id!=Mge(d.listType,d.listIndent))&&(c.return=!0,c.stop())})}_setupModelPostFixing(){const t=this.editor.model,r=this.getListAttributeNames();t.document.registerPostFixer(i=>Xqe(t,i,r,this)),this.on("postFixer",(i,{listNodes:s,writer:o})=>{i.return=Bqe(s,o)||i.return},{priority:"high"}),this.on("postFixer",(i,{listNodes:s,writer:o,seenIds:a})=>{i.return=$qe(s,a,o)||i.return},{priority:"high"})}_setupClipboardIntegration(){const t=this.editor.model,r=this.editor.plugins.get("ClipboardPipeline");this.listenTo(t,"insertContent",Jqe(t),{priority:"high"}),this.listenTo(r,"outputTransformation",(i,s)=>{t.change(o=>{const a=Array.from(s.content.getChildren()),c=a[a.length-1];if(a.length>1&&c.is("element")&&c.isEmpty&&a.slice(0,-1).every(Er)&&o.remove(c),s.method=="copy"||s.method=="cut"){const u=Array.from(s.content.getChildren());xE(u)&&GM(u,o)}})})}_setupAccessibilityIntegration(){const t=this.editor,r=t.t;t.accessibility.addKeystrokeInfoGroup({id:"list",label:r("Keystrokes that can be used in a list"),keystrokes:[{label:r("Increase list item indent"),keystroke:"Tab"},{label:r("Decrease list item indent"),keystroke:"Shift+Tab"}]})}_setupListItemIdConversionStrategy(){this.registerDowncastStrategy({scope:"item",attributeName:"listItemId",setAttributeOnDowncast(t,r,i,s){s&&(s.skipListItemIds||s.isClipboardPipeline)||t.setAttribute("data-list-item-id",r,i)}})}}function Xqe(n,e,t,r){const i=n.document.differ.getChanges(),s=new Set,o=new Set,a=r.editor.config.get("list.multiBlock");let c=!1;for(const d of i){if(d.type=="insert"&&d.name!="$text"){const h=d.position.nodeAfter;if(!n.schema.checkAttribute(h,"listItemId"))for(const f of Array.from(h.getAttributeKeys()))t.includes(f)&&(e.removeAttribute(f,h),c=!0);gu(d.position,o,s),d.attributes.has("listItemId")||gu(d.position.getShiftedBy(d.length),o,s);for(const{item:f,previousPosition:p}of n.createRangeIn(h))Er(f)&&gu(p,o,s)}else d.type=="remove"?gu(d.position,o,s):d.type=="attribute"&&t.includes(d.attributeKey)&&(gu(d.range.start,o,s),d.attributeNewValue===null&&gu(d.range.start.getShiftedBy(1),o,s));if(!a&&d.type=="attribute"&&kP.includes(d.attributeKey)){const h=d.range.start.nodeAfter;d.attributeNewValue===null&&h&&h.is("element","listItem")?(e.rename(h,"paragraph"),c=!0):d.attributeOldValue===null&&h&&h.is("element")&&h.name!="listItem"&&(e.rename(h,"listItem"),c=!0)}}const u=new Set;for(const d of o.values())c=r.fire("postFixer",{listNodes:new vqe(d),listHead:d,writer:e,seenIds:u})||c;return c}function Jqe(n){return(e,[t,r])=>{const i=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!i.length)return;const o=(r?n.createSelection(r):n.document.selection).getFirstPosition();let a;if(Er(o.parent))a=o.parent;else if(Er(o.nodeBefore)&&Er(o.nodeAfter))a=o.nodeBefore;else return;n.change(c=>{const u=a.getAttribute("listType"),d=a.getAttribute("listIndent"),h=i[0].getAttribute("listIndent")||0,f=Math.max(d-h,0);for(const p of i){const x=Er(p);a.is("element","listItem")&&p.is("element","paragraph")&&c.rename(p,"listItem"),c.setAttributes({listIndent:(x?p.getAttribute("listIndent"):0)+f,listItemId:x?p.getAttribute("listItemId"):k_.next(),listType:u},p)}})}}function oZ(n,e){const t=n.document.selection;if(!t.isCollapsed)return!bE(n);if(e==="forward")return!0;const i=t.getFirstPosition().parent,s=i.previousSibling;return n.schema.isObject(s)?!1:s.isEmpty?!0:xE([i,s])}function aZ(n,e,t,r){n.ui.componentFactory.add(e,()=>{const i=lZ(On,n,e,t,r);return i.set({tooltip:!0,isToggleable:!0}),i}),n.ui.componentFactory.add(`menuBar:${e}`,()=>{const i=lZ(Ua,n,e,t,r);return i.set({role:"menuitemcheckbox",isToggleable:!0}),i})}function lZ(n,e,t,r,i){const s=e.commands.get(t),o=new n(e.locale);return o.set({label:r,icon:i}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),o.on("execute",()=>{e.execute(t),e.editing.view.focus()}),o}class Qqe extends gt{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||aZ(this.editor,"numberedList",e("Numbered List"),u9e),this.editor.ui.componentFactory.has("bulletedList")||aZ(this.editor,"bulletedList",e("Bulleted List"),QVe)}}class Zqe extends gt{static get requires(){return[$u,Qqe]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}const eGe=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of eGe);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function cZ(n,e){const t=(r,i,s)=>{if(!s.consumable.consume(i.item,r.name))return;const o=i.attributeNewValue,a=s.writer,c=s.mapper.toViewElement(i.item),u=[...c.getChildren()].find(h=>h.getCustomProperty("media-content"));a.remove(u);const d=n.getMediaViewElement(a,o,e);a.insert(a.createPositionAt(c,0),d)};return r=>{r.on("attribute:url:media",t)}}function tGe(n,e,t){return e.setCustomProperty("media",!0,n),sge(n,e,{label:t})}function uZ(n,e,t,r){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,r),n.createSlot()])}function dZ(n){const e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function Fge(n,e,t,r){n.change(i=>{const s=i.createElement("media",{url:e});n.insertObject(s,t,null,{setSelection:"on",findOptimalPosition:r?"auto":void 0})})}class nGe extends ci{refresh(){const e=this.editor.model,t=e.document.selection,r=dZ(t);this.value=r?r.getAttribute("url"):void 0,this.isEnabled=iGe(t)||rGe(t,e)}execute(e){const t=this.editor.model,r=t.document.selection,i=dZ(r);i?t.change(s=>{s.setAttribute("url",e,i)}):Fge(t,e,r,!0)}}function rGe(n,e){let r=oge(n,e).start.parent;return r.isEmpty&&!e.schema.isLimit(r)&&(r=r.parent),e.schema.checkChild(r,"media")}function iGe(n){const e=n.getSelectedElement();return!!e&&e.name==="media"}const sGe="0 0 64 42";class oGe{constructor(e,t){j(this,"locale");j(this,"providerDefinitions");const r=t.providers,i=t.extraProviders||[],s=new Set(t.removeProviders),o=r.concat(i).filter(a=>{const c=a.name;return c?!s.has(c):(Yn("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=o}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,r){return this._getMedia(t).getViewElement(e,r)}_getMedia(e){if(!e)return new hZ(this.locale);e=e.trim();for(const t of this.providerDefinitions){const r=t.html,i=Ur(t.url);for(const s of i){const o=this._getUrlMatches(e,s);if(o)return new hZ(this.locale,e,o,r)}}return null}_getUrlMatches(e,t){let r=e.match(t);if(r)return r;let i=e.replace(/^https?:\/\//,"");return r=i.match(t),r||(i=i.replace(/^www\./,""),r=i.match(t),r)?r:null}}class hZ{constructor(e,t,r,i){j(this,"url");j(this,"_locale");j(this,"_match");j(this,"_previewRenderer");this.url=this._getValidUrl(t),this._locale=e,this._match=r,this._previewRenderer=i}getViewElement(e,t){const r={};let i;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(r["data-oembed-url"]=this.url),t.renderForEditingView&&(r.class="ck-media__wrapper");const s=this._getPreviewHtml(t);i=e.createRawElement("div",r,(o,a)=>{a.setContentOf(o,s)})}else this.url&&(r.url=this.url),i=e.createEmptyElement(t.elementName,r);return e.setCustomProperty("media-content",!0,i),i}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new Fu,t=this._locale.t;return e.content=l9e,e.viewBox=sGe,new Tu({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}class rO extends gt{constructor(t){super(t);j(this,"registry");t.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:r=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${r[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:r=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${r[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:r=>{const i=r[1],s=r[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${s?`?start=${s}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:r=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${r[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new oGe(t.locale,t.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.model.schema,i=t.t,s=t.conversion,o=t.config.get("mediaEmbed.previewsInData"),a=t.config.get("mediaEmbed.elementName"),c=this.registry;t.commands.add("mediaEmbed",new nGe(t)),r.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),s.for("dataDowncast").elementToStructure({model:"media",view:(u,{writer:d})=>{const h=u.getAttribute("url");return uZ(d,c,h,{elementName:a,renderMediaPreview:!!h&&o})}}),s.for("dataDowncast").add(cZ(c,{elementName:a,renderMediaPreview:o})),s.for("editingDowncast").elementToStructure({model:"media",view:(u,{writer:d})=>{const h=u.getAttribute("url"),f=uZ(d,c,h,{elementName:a,renderForEditingView:!0});return tGe(f,d,i("media widget"))}}),s.for("editingDowncast").add(cZ(c,{elementName:a,renderForEditingView:!0})),s.for("upcast").elementToElement({view:u=>["oembed",a].includes(u.name)&&u.getAttribute("url")?{name:!0}:null,model:(u,{writer:d})=>{const h=u.getAttribute("url");return c.hasMedia(h)?d.createElement("media",{url:h}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(u,{writer:d})=>{const h=u.getAttribute("data-oembed-url");return c.hasMedia(h)?d.createElement("media",{url:h}):null}}).add(u=>{const d=(h,f,p)=>{if(!p.consumable.consume(f.viewItem,{name:!0,classes:"media"}))return;const{modelRange:x,modelCursor:y}=p.convertChildren(f.viewItem,f.modelCursor);f.modelRange=x,f.modelCursor=y,Ra(x.getItems())||p.consumable.revert(f.viewItem,{name:!0,classes:"media"})};u.on("element:figure",d)})}}const aGe=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class lGe extends gt{constructor(t){super(t);j(this,"_timeoutId");j(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[fge,Vg,Lz]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,r=t.model.document,i=t.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const o=r.selection.getFirstRange(),a=ji.fromPosition(o.start);a.stickiness="toPrevious";const c=ji.fromPosition(o.end);c.stickiness="toNext",r.once("change:data",()=>{this._embedMediaBetweenPositions(a,c),a.detach(),c.detach()},{priority:"high"})}),t.commands.get("undo").on("execute",()=>{this._timeoutId&&(yt.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(t,r){const i=this.editor,s=i.plugins.get(rO).registry,o=new Pl(t,r),a=o.getWalker({ignoreElementEnd:!0});let c="";for(const d of a)d.item.is("$textProxy")&&(c+=d.item.data);if(c=c.trim(),!c.match(aGe)){o.detach();return}if(!s.hasMedia(c)){o.detach();return}if(!i.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=ji.fromPosition(t),this._timeoutId=yt.window.setTimeout(()=>{i.model.change(d=>{this._timeoutId=null,d.remove(o),o.detach();let h=null;this._positionToInsert.root.rootName!=="$graveyard"&&(h=this._positionToInsert),Fge(i.model,c,h,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(Vg).requestUndoOnBackspace()},100)}}class cGe extends Ut{constructor(t,r){super(r);j(this,"focusTracker");j(this,"keystrokes");j(this,"urlInputView");j(this,"_validators");j(this,"_urlInputViewInfoDefault");j(this,"_urlInputViewInfoTip");this.focusTracker=new Xs,this.keystrokes=new Va,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),$M({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(t){this.urlInputView.fieldView.value=t.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){const r=t(this);if(r)return this.urlInputView.errorText=r,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const t=this.locale.t,r=new YI(this.locale,XI),i=r.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),r.label=t("Media URL"),r.infoText=this._urlInputViewInfoDefault,i.inputMode="url",i.on("input",()=>{r.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),r}}class uGe extends gt{constructor(){super(...arguments);j(this,"_formView")}static get requires(){return[rO,Lpe]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("mediaEmbed",()=>{const r=this.editor.locale.t,i=this._createDialogButton(On);return i.tooltip=!0,i.label=r("Insert media"),i}),t.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const r=this.editor.locale.t,i=this._createDialogButton(Ua);return i.label=r("Media"),i})}_createDialogButton(t){const r=this.editor,i=new t(r.locale),s=r.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return i.icon=c9e,i.bind("isEnabled").to(s,"isEnabled"),i.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),i}_showDialog(){const t=this.editor,r=t.plugins.get("Dialog"),i=t.commands.get("mediaEmbed"),s=t.locale.t,o=i.value!==void 0;if(!this._formView){const a=t.plugins.get(rO).registry;this._formView=new(KI(cGe))(dGe(t.t,a),t.locale),this._formView.on("submit",()=>this._handleSubmitForm())}r.show({id:"mediaEmbed",title:s("Media embed"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=i.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>r.hide()},{label:s(o?"Save":"Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const t=this.editor,r=t.plugins.get("Dialog");this._formView.isValid()&&(t.execute("mediaEmbed",this._formView.url),r.hide(),t.editing.view.focus())}}function dGe(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}class hGe extends gt{static get requires(){return[rO,uGe,lGe,qM]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */yn.arrowup,yn.arrowdown,yn.esc;yn.enter,yn.tab;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Oj="SourceEditingMode";class fGe extends gt{constructor(t){super(t);j(this,"_elementReplacer");j(this,"_replacedRoots");j(this,"_dataFromRoots");this.set("isSourceEditingMode",!1),this._elementReplacer=new bme,this._replacedRoots=new Map,this._dataFromRoots=new Map,t.config.define("sourceEditing.allowCollaborationFeatures",!1)}static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[qI]}init(){this._checkCompatibility();const t=this.editor,r=t.locale.t;t.ui.componentFactory.add("sourceEditing",()=>{const i=this._createButton(On);return i.set({label:r("Source"),icon:b9e,tooltip:!0,class:"ck-source-editing-button"}),i}),t.ui.componentFactory.add("menuBar:sourceEditing",()=>{const i=this._createButton(Ua);return i.set({label:r("Show source"),role:"menuitemcheckbox"}),i}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(i,s,o)=>{o?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(i,s,o)=>this._handleReadOnlyMode(!o)),this.listenTo(t,"change:isReadOnly",(i,s,o)=>this._handleReadOnlyMode(o))),t.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const t=this.editor,r={};for(const[i,s]of this._replacedRoots){const o=this._dataFromRoots.get(i),a=s.dataset.value;o!==a&&(r[i]=a,this._dataFromRoots.set(i,a))}Object.keys(r).length&&t.data.set(r,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const t=this.editor,r=t.config.get("sourceEditing.allowCollaborationFeatures");if(!r&&t.plugins.has("RealTimeCollaborativeEditing"))throw new _e("source-editing-incompatible-with-real-time-collaboration",null);!r&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(s=>t.plugins.has(s))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),t.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const t=this.editor,r=t.editing.view,i=t.model;i.change(s=>{s.setSelection(null),s.removeSelectionAttribute(i.document.selection.getAttributeKeys())});for(const[s,o]of r.domRoots){const a=mGe(t.data.get({rootName:s})),c=wl(o.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),u=wl(o.ownerDocument,"div",{class:"ck-source-editing-area","data-value":a},[c]);c.value=a,c.setSelectionRange(0,0),c.addEventListener("input",()=>{u.dataset.value=c.value,t.ui.update()}),r.change(d=>{const h=r.document.getRoot(s);d.addClass("ck-hidden",h)}),t.ui.setEditableElement("sourceEditing:"+s,c),this._replacedRoots.set(s,u),this._elementReplacer.replace(o,u),this._dataFromRoots.set(s,a)}this._hideDocumentOutline(),this._refreshAnnotationsVisibility(),this._focusSourceEditing()}_hideSourceEditing(){const r=this.editor.editing.view;this.updateEditorData(),r.change(i=>{for(const[s]of this._replacedRoots)i.removeClass("ck-hidden",r.document.getRoot(s))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),this._showDocumentOutline(),this._refreshAnnotationsVisibility(),r.focus()}_hideDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="none")}_showDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="")}_refreshAnnotationsVisibility(){this.editor.plugins.has("Annotations")&&this.editor.plugins.get("Annotations").refreshVisibility()}_focusSourceEditing(){const t=this.editor,[r]=this._replacedRoots.values(),i=r.querySelector("textarea");t.editing.view.document.isFocused=!1,i.focus()}_disableCommands(){const t=this.editor;for(const r of t.commands.commands())r.forceDisabled(Oj);t.plugins.has("CommentsArchiveUI")&&t.plugins.get("CommentsArchiveUI").forceDisabled(Oj)}_enableCommands(){const t=this.editor;for(const r of t.commands.commands())r.clearForceDisabled(Oj);t.plugins.has("CommentsArchiveUI")&&t.plugins.get("CommentsArchiveUI").clearForceDisabled(Oj)}_handleReadOnlyMode(t){if(this.isSourceEditingMode)for(const[,r]of this._replacedRoots)r.querySelector("textarea").readOnly=t}_isAllowedToHandleSourceEditingMode(){const r=this.editor.ui.view.editable;return r&&!r.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const t=this.editor.plugins.get("Dialog");t.isOpen&&t.hide()}}_createButton(t){const r=this.editor,i=new t(r.locale);return i.set({withText:!0,isToggleable:!0}),i.bind("isOn").to(this,"isSourceEditingMode"),i.bind("isEnabled").to(this,"isEnabled",r,"isReadOnly",r.plugins.get(qI),"hasAny",(s,o,a)=>!(!s||o||a)),this.listenTo(i,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),i}}function mGe(n){return pGe(n)?F8e(n):n}function pGe(n){return n.startsWith("<")}class gGe{constructor(e,t,r){j(this,"loader");j(this,"base");j(this,"token");this.loader=e,this.base=t,this.token=r}upload(){return this.loader.file.then(e=>new Promise((t,r)=>{const i=new FormData;i.append("file",e);const s=new XMLHttpRequest;s.open("POST",`${this.base}/api/media/upload`,!0),this.token&&s.setRequestHeader("Authorization",`Bearer ${this.token}`),s.onload=()=>{if(s.status===200){const o=JSON.parse(s.responseText);t({default:o.url})}else r(new Error("Upload failed"))},s.onerror=()=>r(new Error("Upload failed")),s.send(i)}))}abort(){}}const zk=({data:n,onChange:e,placeholder:t="",disabled:r=!1,className:i="",baseApiUrl:s="",authToken:o=""})=>{const a=S.useRef(null),c={licenseKey:"GPL",plugins:[BHe,ZI,JHe,Sze,Eze,Nze,gqe,Bze,Lz,fGe,gWe,RWe,hGe,Zqe],toolbar:["heading","|","bold","italic","underline","link","bulletedList","numberedList","blockQuote","imageUpload","mediaEmbed","undo","redo","|","sourceEditing"],language:"vi",placeholder:t,image:{toolbar:["imageTextAlternative","imageStyle:inline","imageStyle:block","imageStyle:side"]},onReady:u=>{a.current=u,s&&(u.plugins.get("FileRepository").createUploadAdapter=d=>new gGe(d,s,o))}};return l.jsx("div",{className:`ckeditor-wrapper ${i}`,children:l.jsx(tme,{editor:EHe,data:n,onChange:(u,d)=>{const h=d.getData();e(h)},config:c,disabled:r})})};var KM="Checkbox",[vGe]=_o(KM),[yGe,Vz]=vGe(KM);function xGe(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=n,[f,p]=Pu({prop:t,defaultProp:i??!1,onChange:c,caller:KM}),[x,y]=S.useState(null),[b,_]=S.useState(null),C=S.useRef(!1),k=x?!!o||!!x.closest("form"):!0,T={checked:f,disabled:s,setChecked:p,control:x,setControl:y,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:C,required:u,defaultChecked:Pg(i)?!1:i,isFormControl:k,bubbleInput:b,setBubbleInput:_};return l.jsx(yGe,{scope:e,...T,children:bGe(h)?h(T):r})}var Bge="CheckboxTrigger",$ge=S.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},i)=>{const{control:s,value:o,disabled:a,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:x}=Vz(Bge,n),y=an(i,d),b=S.useRef(c);return S.useEffect(()=>{const _=s==null?void 0:s.form;if(_){const C=()=>h(b.current);return _.addEventListener("reset",C),()=>_.removeEventListener("reset",C)}},[s,h]),l.jsx(kt.button,{type:"button",role:"checkbox","aria-checked":Pg(c)?"mixed":c,"aria-required":u,"data-state":Wge(c),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:y,onKeyDown:st(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:st(t,_=>{h(C=>Pg(C)?!0:!C),x&&p&&(f.current=_.isPropagationStopped(),f.current||_.stopPropagation())})})});$ge.displayName=Bge;var Uz=S.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c,onCheckedChange:u,form:d,...h}=n;return l.jsx(xGe,{__scopeCheckbox:t,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>l.jsxs(l.Fragment,{children:[l.jsx($ge,{...h,ref:e,__scopeCheckbox:t}),f&&l.jsx(Hge,{__scopeCheckbox:t})]})})});Uz.displayName=KM;var Vge="CheckboxIndicator",Uge=S.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,s=Vz(Vge,t);return l.jsx(Da,{present:r||Pg(s.checked)||s.checked===!0,children:l.jsx(kt.span,{"data-state":Wge(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});Uge.displayName=Vge;var zge="CheckboxBubbleInput",Hge=S.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:p}=Vz(zge,n),x=an(t,p),y=uM(s),b=nM(r);S.useEffect(()=>{const C=f;if(!C)return;const k=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(k,"checked").set,N=!i.current;if(y!==s&&E){const P=new Event("click",{bubbles:N});C.indeterminate=Pg(s),E.call(C,Pg(s)?!1:s),C.dispatchEvent(P)}},[f,y,s,i]);const _=S.useRef(Pg(s)?!1:s);return l.jsx(kt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:a,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:x,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Hge.displayName=zge;function bGe(n){return typeof n=="function"}function Pg(n){return n==="indeterminate"}function Wge(n){return Pg(n)?"indeterminate":n?"checked":"unchecked"}const bu=S.forwardRef(({className:n,...e},t)=>l.jsx(Uz,{ref:t,className:Qe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:l.jsx(Uge,{className:Qe("flex items-center justify-center text-current"),children:l.jsx(Fr,{className:"h-4 w-4"})})}));bu.displayName=Uz.displayName;const wGe=hA("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),CP=S.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:Qe(wGe({variant:e}),n),...t}));CP.displayName="Alert";const _Ge=S.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:Qe("mb-1 font-medium leading-none tracking-tight",n),...e}));_Ge.displayName="AlertTitle";const EP=S.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:Qe("text-sm [&_p]:leading-relaxed",n),...e}));EP.displayName="AlertDescription";function SGe({open:n,onOpenChange:e,bookingId:t,onCancelSuccess:r}){const[i,s]=S.useState(""),[o,a]=S.useState(""),[c,u]=S.useState(""),[d,h]=S.useState(""),[f,p]=S.useState([]),[x,y]=S.useState(null),[b,_]=S.useState(!1),[C,k]=S.useState(!1);S.useEffect(()=>{n&&(async()=>{try{const O=await ot(`${Ge()}/api/banks`,{skipAuth:!0});p(O)}catch(O){console.error("Error loading banks:",O),Ae.error("Không thể tải danh sách ngân hàng")}})()},[n]),S.useEffect(()=>{i.trim()&&t&&T()},[i,t]);const T=async()=>{if(i.trim())try{k(!0);const M=await ot(`${Ge()}/api/bookings/${t}/calculate-refund`,{method:"POST",body:JSON.stringify({cancellationReason:i})});y(M)}catch(M){console.error("Error calculating refund:",M),Ae.error("Không thể tính toán hoàn tiền")}finally{k(!1)}},E=async()=>{if(!i.trim()){Ae.error("Vui lòng nhập lý do hủy tour");return}if(x!=null&&x.canRefund&&!o){Ae.error("Vui lòng chọn ngân hàng hoàn tiền");return}if(x!=null&&x.canRefund&&!c.trim()){Ae.error("Vui lòng nhập số tài khoản");return}if(x!=null&&x.canRefund&&!d.trim()){Ae.error("Vui lòng nhập tên chủ tài khoản");return}try{_(!0),await ot(`${Ge()}/api/bookings/${t}/cancel`,{method:"PUT",body:JSON.stringify({cancellationReason:i,refundBankName:x!=null&&x.canRefund?o:null,refundBankAccount:x!=null&&x.canRefund?c:null,refundAccountName:x!=null&&x.canRefund?d:null})}),Ae.success("Hủy tour thành công"),r(),e(!1),N()}catch(M){console.error("Error cancelling booking:",M),Ae.error(M.message||"Không thể hủy tour. Vui lòng thử lại sau.")}finally{_(!1)}},N=()=>{s(""),a(""),u(""),h(""),y(null)},P=f.map(M=>({value:M.name,label:`${M.name} (${M.shortName})`}));return l.jsx(Hl,{open:n,onOpenChange:e,children:l.jsxs(La,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Hủy tour"}),l.jsx(Wu,{children:"Vui lòng điền thông tin để hủy tour. Hệ thống sẽ tự động tính toán số tiền hoàn lại theo chính sách."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"reason",children:"Lý do hủy tour *"}),l.jsx(EM,{placeholder:"Vui lòng nhập lý do hủy tour...",value:i,onChange:s,rows:3})]}),C&&l.jsxs("div",{className:"flex items-center justify-center py-4",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),l.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Đang tính toán hoàn tiền..."})]}),x&&!C&&l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(wo,{className:"w-5 h-5"}),"Thông tin hoàn tiền"]})}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm text-gray-600",children:"Số ngày trước tour"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_m,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-medium",children:[x.daysBeforeTour," ngày"]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm text-gray-600",children:"Tỷ lệ hoàn tiền"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(ct,{variant:x.refundPercentage===100?"default":x.refundPercentage===50?"secondary":"destructive",children:[x.refundPercentage,"%"]})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm text-gray-600",children:"Số tiền gốc"}),l.jsxs("div",{className:"font-medium",children:[x.originalAmount.toLocaleString("vi-VN")," VND"]})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm text-gray-600",children:"Số tiền hoàn lại"}),l.jsxs("div",{className:"font-medium text-green-600",children:[x.refundAmount.toLocaleString("vi-VN")," VND"]})]})]}),l.jsxs(CP,{children:[l.jsx(gK,{className:"h-4 w-4"}),l.jsxs(EP,{children:[l.jsx("strong",{children:"Chính sách:"})," ",x.refundPolicy]})]}),!x.canRefund&&l.jsxs(CP,{variant:"destructive",children:[l.jsx(nw,{className:"h-4 w-4"}),l.jsx(EP,{children:x.refundPolicy.includes("Chưa thanh toán")?"Bạn chưa thanh toán cho tour này, không cần hoàn tiền.":"Không thể hoàn tiền theo chính sách hiện tại."})]})]})]}),(x==null?void 0:x.canRefund)&&l.jsxs(tt,{children:[l.jsxs(dt,{children:[l.jsx(pt,{children:"Thông tin ngân hàng hoàn tiền"}),l.jsx(Lg,{children:"Vui lòng cung cấp thông tin ngân hàng để nhận hoàn tiền"})]}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"bank",children:"Ngân hàng *"}),l.jsx(fh,{value:o,onValueChange:a,placeholder:"Chọn ngân hàng...",searchPlaceholder:"Tìm kiếm ngân hàng...",options:P})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"account",children:"Số tài khoản *"}),l.jsx(We,{id:"account",placeholder:"Nhập số tài khoản...",value:c,onChange:M=>u(M.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"accountName",children:"Tên chủ tài khoản *"}),l.jsx(We,{id:"accountName",placeholder:"Nhập tên chủ tài khoản...",value:d,onChange:M=>h(M.target.value)})]}),l.jsxs(CP,{children:[l.jsx(gK,{className:"h-4 w-4"}),l.jsx(EP,{children:"Vui lòng kiểm tra kỹ thông tin ngân hàng. Số tiền sẽ được chuyển khoản trong vòng 3-5 ngày làm việc."})]})]})]})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{onClick:N,children:"Hủy"}),l.jsx(qu,{onClick:E,disabled:b||C,className:"bg-red-600 hover:bg-red-700",children:b?"Đang xử lý...":"Xác nhận hủy tour"})]})]})})}function kGe(){var fe,we;const[n,e]=S.useState(!1),[t,r]=S.useState(!1),[i,s]=S.useState("profile"),o=li(),[a,c]=S.useState(!1),u="avatar-file-input",[d,h]=S.useState({name:"",email:"",phone:"",address:"",birthDate:"",gender:"",website:"",avatar:"https://cdn.builder.io/api/v1/image/assets/TEMP/db84159ff10c8b7bceb41b0f85ded4139e62ae21?width=712",bio:"",country:"Vietnam",acceptEmailMarketing:!1,lastLoginAt:"",provinceCode:null,socialMedia:{facebook:"",instagram:"",twitter:"",zalo:"",tiktok:"",youtube:""},notificationSettings:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1}}),[f,p]=S.useState(d),[x,y]=S.useState(!1),[b,_]=S.useState([]),[C,k]=S.useState(!1),T=ue=>{if(!ue)return"";const Z=new Date(ue);return isNaN(Z.getTime())?"":Z.toLocaleDateString("vi-VN")},E=async()=>{try{const Z=(await ot(`${Ge()}/api/divisions/provinces`,{skipAuth:!0})||[]).filter(ge=>(ge.parentCode??ge.ParentCode)==null);_(Z.map(ge=>({code:ge.code??ge.Code,name:ge.name??ge.Name})))}catch(ue){console.error("Failed to load provinces:",ue)}};S.useEffect(()=>{(async()=>{if(!localStorage.getItem("accessToken")){Ae.error("Bạn cần đăng nhập"),o("/login");return}try{const ge=await ot(`${Ge()}/api/auth/me`),he=`${ge.firstName??""} ${ge.lastName??""}`.trim(),Ee=ge.dateOfBirth?String(ge.dateOfBirth):"",Be={name:he,email:ge.email??"",phone:ge.phoneNumber??"",address:ge.address??"",birthDate:Ee,gender:ge.gender??"",website:ge.website??"",avatar:ge.avatar||d.avatar,bio:ge.bio??"",country:ge.country??"Vietnam",acceptEmailMarketing:ge.acceptEmailMarketing??!1,lastLoginAt:ge.lastLoginAt?new Date(ge.lastLoginAt).toLocaleString("vi-VN"):"",provinceCode:ge.provinceCode??null,socialMedia:ge.socialMedia?JSON.parse(ge.socialMedia):{facebook:"",instagram:"",twitter:"",zalo:"",tiktok:"",youtube:""},notificationSettings:typeof ge.notificationSettings=="string"?JSON.parse(ge.notificationSettings):ge.notificationSettings??{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1}};h(Be),p(Be)}catch(ge){console.error(ge),Ae.error(ge.message||"Không thể tải thông tin hồ sơ")}})(),E()},[]);const N=async()=>{H(!0);try{const ue=await ot(`${Ge()}/api/bookings/user`);ne(ue)}catch(ue){console.error("Error fetching bookings:",ue),Ae.error("Không thể tải danh sách tour đã đặt")}finally{H(!1)}};S.useEffect(()=>{i==="tours"&&N()},[i]);const P=ue=>{ve(ue),pe(!0)},M=()=>{N(),pe(!1),ve(null)},O=ue=>{o(`/tour/${ue.tour.id}/book?availability=${ue.tourAvailability.id}&booking=${ue.bookingNumber}`)},q=ue=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(ue),D=ue=>new Date(ue).toLocaleDateString("vi-VN"),F=ue=>{switch(ue){case"PendingPayment":return"bg-yellow-100 text-yellow-800";case"Confirmed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";case"Completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},K=ue=>{switch(ue){case"PendingPayment":return"Chờ thanh toán";case"Confirmed":return"Đã xác nhận";case"Cancelled":return"Đã hủy";case"Completed":return"Hoàn thành";default:return ue}},ee=ue=>{if(!ue)return"/placeholder.svg";try{const Z=JSON.parse(ue);return Z&&Z.length>0?Z[0]:"/placeholder.svg"}catch{return"/placeholder.svg"}},Y=ue=>{try{const Z=JSON.parse(ue);return{name:Z.Name||Z.name||"",email:Z.Email||Z.email||"",phone:Z.Phone||Z.phone||""}}catch{return{name:"",email:"",phone:""}}},U=async()=>{if(!localStorage.getItem("accessToken")){Ae.error("Bạn cần đăng nhập để cập nhật hồ sơ"),o("/login");return}const Z=(f.name||"").trim().split(/\s+/),ge=Z.slice(0,-1).join(" ")||"",he=Z[Z.length-1]||"",Ee={email:f.email,firstName:ge,lastName:he,acceptEmailMarketing:f.acceptEmailMarketing,address:f.address,country:f.country||"Vietnam",dateOfBirth:f.birthDate||null,bio:f.bio||null,gender:f.gender||null,website:f.website||null,provinceCode:f.provinceCode,socialMedia:JSON.stringify(f.socialMedia),notificationSettings:JSON.stringify(f.notificationSettings)};y(!0);try{await ot(`${Ge()}/api/auth/me`,{method:"PUT",body:JSON.stringify(Ee)}),h(f),r(!1),Ae.success("Cập nhật hồ sơ thành công")}catch(Be){console.error(Be),Ae.error(Be.message||"Cập nhật hồ sơ thất bại")}finally{y(!1)}},R=()=>{p(d),r(!1)},z=()=>{const ue=document.getElementById(u);ue==null||ue.click()},W=async ue=>{var he;if(!localStorage.getItem("accessToken")){Ae.error("Bạn cần đăng nhập"),o("/login");return}const ge=(he=ue.target.files)==null?void 0:he[0];if(ge){if(!/^image\//.test(ge.type)){Ae.error("Vui lòng chọn tệp hình ảnh");return}if(ge.size>10*1024*1024){Ae.error("Kích thước ảnh tối đa 10MB");return}c(!0);try{const Ee=new FormData;Ee.append("file",ge);const vt=(await xU(`${Ge()}/api/media/upload`,Ee)).url,xt={...d,avatar:vt};h(xt),p(Rt=>({...Rt,avatar:vt}));try{const Rt={email:xt.email,firstName:(xt.name||"").trim().split(/\s+/)[0]||"",lastName:(xt.name||"").trim().split(/\s+/).slice(1).join(" ")||"",acceptEmailMarketing:!1,address:xt.address,city:void 0,country:"Vietnam",dateOfBirth:xt.birthDate||null,bio:void 0,gender:xt.gender||null,website:xt.website||null,avatar:vt};await ot(`${Ge()}/api/auth/me`,{method:"PUT",body:JSON.stringify(Rt)})}catch(Rt){console.error(Rt)}Ae.success("Cập nhật ảnh đại diện thành công")}catch(Ee){console.error(Ee),Ae.error(Ee.message||"Tải ảnh lên thất bại")}finally{c(!1);const Ee=document.getElementById(u);Ee&&(Ee.value="")}}},[se,ne]=S.useState([]),[te,H]=S.useState(!1),[ce,pe]=S.useState(!1),[oe,ve]=S.useState(null),be=[{id:1,title:"Tour guide tại Hạ Long",image:"https://cdn.builder.io/api/v1/image/assets/TEMP/766e14260b99570779920f49b71b00c9bcaf78e4?width=736",price:"3.200.000 VND",location:"Hạ Long, Quảng Ninh"},{id:2,title:"Tour guide tại Sapa",image:"https://cdn.builder.io/api/v1/image/assets/TEMP/70f355664edb43207aa25e7eb2be8c8bda964238?width=736",price:"2.500.000 VND",location:"Sapa, Lào Cai"}];return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsx("main",{className:"max-w-9xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsx("div",{className:"bg-white rounded-[20px] p-6 shadow-lg",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"relative inline-block mb-4",children:[l.jsx("img",{src:d.avatar,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}),l.jsx("button",{onClick:z,disabled:a,className:"absolute bottom-0 right-0 bg-tour-blue text-white rounded-full p-2 hover:bg-tour-teal transition-colors duration-200 disabled:opacity-60",children:l.jsx(Bae,{className:"w-4 h-4"})}),l.jsx("input",{id:u,type:"file",accept:"image/*",className:"hidden",onChange:W})]}),l.jsx("h2",{className:"font-nunito text-xl font-bold text-black mb-2",children:d.name}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:()=>s("profile"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-200 ${i==="profile"?"bg-tour-light-blue text-tour-blue":"hover:bg-gray-100"}`,children:l.jsx("span",{className:"font-nunito font-medium",children:"Thông tin cá nhân"})}),l.jsx("button",{onClick:()=>s("tours"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-200 ${i==="tours"?"bg-tour-light-blue text-tour-blue":"hover:bg-gray-100"}`,children:l.jsx("span",{className:"font-nunito font-medium",children:"Tour đã đặt"})}),l.jsx("button",{onClick:()=>s("favorites"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-200 ${i==="favorites"?"bg-tour-light-blue text-tour-blue":"hover:bg-gray-100"}`,children:l.jsx("span",{className:"font-nunito font-medium",children:"Tour yêu thích"})}),l.jsx("button",{onClick:()=>s("notifications"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors duration-200 ${i==="notifications"?"bg-tour-light-blue text-tour-blue":"hover:bg-gray-100"}`,children:l.jsx("span",{className:"font-nunito font-medium",children:"Cài đặt thông báo"})})]})]})})}),l.jsxs("div",{className:"lg:col-span-3",children:[i==="profile"&&l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-black",children:"Thông tin cá nhân"}),t?l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("button",{onClick:U,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(cB,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Lưu"})]}),l.jsxs("button",{onClick:R,className:"flex items-center space-x-2 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(si,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Hủy"})]})]}):l.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-tour-blue hover:bg-tour-teal text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(dh,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Chỉnh sửa"})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-gray-900 mb-6 flex items-center",children:[l.jsx(Fo,{className:"w-5 h-5 mr-2"}),"Thông tin cơ bản"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"name",className:"text-sm font-medium",children:"Họ và tên"}),t?l.jsx(We,{id:"name",value:f.name,onChange:ue=>p({...f,name:ue.target.value}),placeholder:"Nhập tên và họ (ví dụ: James Võ Thành)"}):l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(Fo,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm",children:d.name})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),t?l.jsx(We,{id:"email",type:"email",value:f.email,onChange:ue=>p({...f,email:ue.target.value}),placeholder:"Nhập email"}):l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(WR,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm",children:d.email})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"phone",className:"text-sm font-medium",children:"Số điện thoại"}),l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-100 rounded-lg border",children:[l.jsx(qC,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:d.phone}),l.jsx("span",{className:"ml-auto text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"Đã xác thực"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Số điện thoại đã được xác thực và không thể thay đổi"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"gender",className:"text-sm font-medium",children:"Giới tính"}),t?l.jsxs(Cn,{value:f.gender||"none",onValueChange:ue=>p({...f,gender:ue==="none"?"":ue}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn giới tính"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"none",children:"Không xác định"}),l.jsx(ze,{value:"Male",children:"Nam"}),l.jsx(ze,{value:"Female",children:"Nữ"}),l.jsx(ze,{value:"Other",children:"Khác"})]})]}):l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(Fo,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm",children:d.gender==="Male"?"Nam":d.gender==="Female"?"Nữ":d.gender==="Other"?"Khác":"-"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"birthDate",className:"text-sm font-medium",children:"Ngày sinh"}),t?l.jsxs(f_,{open:C,onOpenChange:k,children:[l.jsx(m_,{asChild:!0,children:l.jsxs(Ce,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!f.birthDate&&"text-muted-foreground"),children:[l.jsx(er,{className:"mr-2 h-4 w-4"}),f.birthDate?Wo(new Date(f.birthDate),"dd/MM/yyyy",{locale:Yf}):l.jsx("span",{children:"Chọn ngày sinh"})]})}),l.jsx(K0,{className:"w-auto p-0",align:"start",children:l.jsx(_A,{mode:"single",selected:f.birthDate?new Date(f.birthDate):void 0,onSelect:ue=>{ue&&(p({...f,birthDate:Wo(ue,"yyyy-MM-dd")}),k(!1))},disabled:ue=>ue>new Date||ue<new Date("1900-01-01"),initialFocus:!0,locale:Yf})})]}):l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(er,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm",children:T(d.birthDate)})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"website",className:"text-sm font-medium",children:"Website"}),t?l.jsx(We,{id:"website",type:"url",value:f.website,onChange:ue=>p({...f,website:ue.target.value}),placeholder:"https://example.com"}):l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(Dk,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm break-all",children:d.website||"-"})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-gray-900 mb-6 flex items-center",children:[l.jsx(Xr,{className:"w-5 h-5 mr-2"}),"Thông tin địa chỉ"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"country",className:"text-sm font-medium",children:"Quốc gia"}),l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-100 rounded-lg border",children:[l.jsx(Dk,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:d.country})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Quốc gia không thể thay đổi"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Se,{htmlFor:"province",className:"text-sm font-medium",children:"Tỉnh/Thành phố"}),t?l.jsxs(Cn,{value:((fe=f.provinceCode)==null?void 0:fe.toString())||"none",onValueChange:ue=>p({...f,provinceCode:ue==="none"?null:Number(ue)}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn tỉnh/thành phố"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"none",children:"Chọn tỉnh/thành phố"}),b.map(ue=>l.jsx(ze,{value:ue.code.toString(),children:ue.name},ue.code))]})]}):l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(Xr,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm",children:((we=b.find(ue=>ue.code===d.provinceCode))==null?void 0:we.name)||"-"})]})]}),l.jsxs("div",{className:"md:col-span-2 space-y-2",children:[l.jsx(Se,{htmlFor:"address",className:"text-sm font-medium",children:"Địa chỉ chi tiết"}),t?l.jsx(We,{id:"address",value:f.address,onChange:ue=>p({...f,address:ue.target.value}),placeholder:"Nhập địa chỉ chi tiết"}):l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(Xr,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm",children:d.address})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-gray-900 mb-6 flex items-center",children:[l.jsx(Fo,{className:"w-5 h-5 mr-2"}),"Giới thiệu bản thân"]}),t?l.jsx("div",{className:"ckeditor-container",style:{height:"200px"},children:l.jsx(zk,{data:f.bio,onChange:ue=>{p({...f,bio:ue})},baseApiUrl:Ge(),authToken:localStorage.getItem("access_token")||void 0})}):l.jsx("div",{className:"p-4 bg-white rounded-lg border",children:d.bio?l.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:d.bio}}):l.jsx("span",{className:"text-gray-500",children:"Chưa có giới thiệu"})})]}),l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-gray-900 mb-6 flex items-center",children:[l.jsx(Dk,{className:"w-5 h-5 mr-2"}),"Mạng xã hội"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Se,{htmlFor:"facebook",className:"text-sm font-medium flex items-center",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"#1877F2",children:l.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),t?l.jsx(We,{id:"facebook",value:f.socialMedia.facebook,onChange:ue=>p({...f,socialMedia:{...f.socialMedia,facebook:ue.target.value}}),placeholder:"https://facebook.com/username"}):l.jsx("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:l.jsx("span",{className:"text-sm break-all",children:d.socialMedia.facebook||"-"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Se,{htmlFor:"instagram",className:"text-sm font-medium flex items-center",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"#E4405F",children:l.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),"Instagram"]}),t?l.jsx(We,{id:"instagram",value:f.socialMedia.instagram,onChange:ue=>p({...f,socialMedia:{...f.socialMedia,instagram:ue.target.value}}),placeholder:"https://instagram.com/username"}):l.jsx("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:l.jsx("span",{className:"text-sm break-all",children:d.socialMedia.instagram||"-"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Se,{htmlFor:"twitter",className:"text-sm font-medium flex items-center",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"#1DA1F2",children:l.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"X (Twitter)"]}),t?l.jsx(We,{id:"twitter",value:f.socialMedia.twitter,onChange:ue=>p({...f,socialMedia:{...f.socialMedia,twitter:ue.target.value}}),placeholder:"https://x.com/username"}):l.jsx("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:l.jsx("span",{className:"text-sm break-all",children:d.socialMedia.twitter||"-"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Se,{htmlFor:"zalo",className:"text-sm font-medium flex items-center",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"#0068FF",children:l.jsx("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-1 15h-1v-6h1v6zm2 0h-1v-6h1v6zm3 0h-1v-6h1v6z"})}),"Zalo"]}),t?l.jsx(We,{id:"zalo",value:f.socialMedia.zalo,onChange:ue=>p({...f,socialMedia:{...f.socialMedia,zalo:ue.target.value}}),placeholder:"Zalo ID hoặc link"}):l.jsx("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:l.jsx("span",{className:"text-sm break-all",children:d.socialMedia.zalo||"-"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Se,{htmlFor:"tiktok",className:"text-sm font-medium flex items-center",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"#000000",children:l.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})}),"TikTok"]}),t?l.jsx(We,{id:"tiktok",value:f.socialMedia.tiktok,onChange:ue=>p({...f,socialMedia:{...f.socialMedia,tiktok:ue.target.value}}),placeholder:"https://tiktok.com/@username"}):l.jsx("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:l.jsx("span",{className:"text-sm break-all",children:d.socialMedia.tiktok||"-"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Se,{htmlFor:"youtube",className:"text-sm font-medium flex items-center",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"#FF0000",children:l.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),"YouTube"]}),t?l.jsx(We,{id:"youtube",value:f.socialMedia.youtube,onChange:ue=>p({...f,socialMedia:{...f.socialMedia,youtube:ue.target.value}}),placeholder:"https://youtube.com/@username"}):l.jsx("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:l.jsx("span",{className:"text-sm break-all",children:d.socialMedia.youtube||"-"})})]})]})]}),l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-gray-900 mb-6 flex items-center",children:[l.jsx(U0,{className:"w-5 h-5 mr-2"}),"Tùy chọn"]}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(Se,{htmlFor:"emailMarketing",className:"text-sm font-medium",children:"Nhận email khuyến mãi"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Đồng ý nhận thông tin khuyến mãi và cập nhật từ TouriMate"})]}),t?l.jsx(bu,{id:"emailMarketing",checked:f.acceptEmailMarketing,onCheckedChange:ue=>p({...f,acceptEmailMarketing:ue})}):l.jsx("div",{className:"flex items-center",children:d.acceptEmailMarketing?l.jsx(Fr,{className:"w-5 h-5 text-green-500"}):l.jsx(si,{className:"w-5 h-5 text-red-500"})})]})})]}),l.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-gray-900 mb-6 flex items-center",children:[l.jsx(er,{className:"w-5 h-5 mr-2"}),"Thông tin hệ thống"]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border",children:[l.jsx(er,{className:"w-5 h-5 text-gray-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:"Đăng nhập lần cuối"}),l.jsx("p",{className:"text-xs text-gray-500",children:d.lastLoginAt||"Chưa có thông tin"})]})]})}),l.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Thông tin hệ thống chỉ đọc, không thể thay đổi"})]})]})]}),i==="tours"&&l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 shadow-lg",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-black mb-8",children:"Tour đã đặt"}),te?l.jsxs("div",{className:"flex justify-center items-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-tour-blue"}),l.jsx("span",{className:"ml-3 text-gray-600",children:"Đang tải..."})]}):se.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("h4",{className:"font-nunito text-lg font-medium text-gray-600 mb-2",children:"Chưa có tour nào được đặt"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Hãy khám phá và đặt tour đầu tiên của bạn!"}),l.jsx("button",{onClick:()=>o("/tours"),className:"bg-tour-blue hover:bg-tour-dark-blue text-white px-6 py-3 rounded-lg transition-colors duration-200 font-nunito font-medium",children:"Khám phá tour"})]}):l.jsx("div",{className:"space-y-6",children:se.map(ue=>l.jsx("div",{className:"border border-gray-200 rounded-[15px] p-6 hover:shadow-lg transition-shadow duration-300",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-start space-y-4 md:space-y-0 md:space-x-6",children:[l.jsx("img",{src:ee(ue.tour.images),alt:ue.tour.title,className:"w-full md:w-32 h-32 object-cover rounded-[10px]"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsx("h4",{className:"font-nunito text-xl font-bold text-black",children:ue.tour.title}),l.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${F(ue.status)}`,children:K(ue.status)})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[l.jsx(er,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-nunito text-sm",children:["Ngày khởi hành: ",D(ue.tourAvailability.date)]})]}),l.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[l.jsx(Xr,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-nunito text-sm",children:["Điểm khởi hành: ",ue.tourAvailability.departurePoint||"Chưa cập nhật"]})]}),ue.tourAvailability.vehicle&&l.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[l.jsx(Dk,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-nunito text-sm",children:["Phương tiện: ",ue.tourAvailability.vehicle]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[l.jsx(Fo,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-nunito text-sm",children:["Số người: ",ue.adultCount," người lớn, ",ue.childCount," trẻ em"]})]}),l.jsx("div",{className:"flex items-center space-x-2 text-gray-600",children:l.jsxs("span",{className:"font-nunito text-sm font-medium text-tour-blue",children:["Tổng tiền: ",q(ue.totalAmount)]})}),l.jsx("div",{className:"flex items-center space-x-2 text-gray-600",children:l.jsxs("span",{className:"font-nunito text-sm",children:["Mã đặt tour: ",ue.bookingNumber]})})]})]}),ue.contactInfo&&(()=>{const Z=Y(ue.contactInfo);return Z.name||Z.email||Z.phone?l.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:[l.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Thông tin liên hệ"}),l.jsxs("div",{className:"space-y-1 text-sm text-blue-800",children:[Z.name&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Tên:"})," ",Z.name]}),Z.email&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Email:"})," ",Z.email]}),Z.phone&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"SĐT:"})," ",Z.phone]})]})]}):null})(),ue.specialRequests&&l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:l.jsxs("p",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:"Yêu cầu đặc biệt:"})," ",ue.specialRequests]})})]}),l.jsxs("div",{className:"flex flex-col space-y-2 min-w-[140px]",children:[l.jsxs("button",{onClick:()=>o(`/tour/${ue.tour.id}`),className:"flex items-center justify-center space-x-2 bg-gray-100 hover:bg-gray-200 text-black px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(Ts,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Xem tour"})]}),ue.status==="PendingPayment"&&l.jsxs("button",{onClick:()=>O(ue),className:"flex items-center justify-center space-x-2 bg-tour-blue hover:bg-tour-dark-blue text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(_u,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Thanh toán"})]}),(ue.status==="PendingPayment"||ue.status==="Confirmed")&&l.jsxs("button",{onClick:()=>P(ue.id),className:"flex items-center justify-center space-x-2 bg-red-100 hover:bg-red-200 text-red-800 px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(Sm,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Hủy tour"})]})]})]})},ue.id))})]}),i==="favorites"&&l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 shadow-lg",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-black mb-8",children:"Tour yêu thích"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:be.map(ue=>l.jsxs("div",{className:"border border-gray-200 rounded-[15px] overflow-hidden hover:shadow-lg transition-shadow duration-300 cursor-pointer",onClick:()=>o(`/tour/${ue.id}`),children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:ue.image,alt:ue.title,className:"w-full h-48 object-cover"}),l.jsx("button",{className:"absolute top-3 right-3 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-2 transition-all duration-200",children:l.jsx(V9,{className:"w-5 h-5 text-red-500 fill-current"})})]}),l.jsxs("div",{className:"p-4",children:[l.jsx("h4",{className:"font-nunito text-lg font-bold text-black mb-2",children:ue.title}),l.jsxs("div",{className:"flex items-center space-x-1 mb-3",children:[l.jsx(Xr,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"font-nunito text-sm text-gray-600",children:ue.location})]}),l.jsx("p",{className:"font-nunito text-lg font-bold text-tour-blue",children:ue.price})]})]},ue.id))})]}),i==="notifications"&&l.jsxs("div",{className:"bg-white rounded-[20px] p-6 md:p-8 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-black",children:"Cài đặt thông báo"}),t?l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("button",{onClick:U,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(cB,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Lưu"})]}),l.jsxs("button",{onClick:R,className:"flex items-center space-x-2 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(si,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Hủy"})]})]}):l.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 bg-tour-blue hover:bg-tour-teal text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[l.jsx(dh,{className:"w-4 h-4"}),l.jsx("span",{className:"font-nunito",children:"Chỉnh sửa"})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"border border-gray-200 rounded-[15px] p-6",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-black mb-4 flex items-center",children:[l.jsx(Fae,{className:"w-5 h-5 mr-2"}),"Thông báo qua Email"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(Se,{className:"text-sm font-medium",children:"Thông báo đặt tour"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Nhận email khi có đặt tour mới"})]}),t?l.jsx(bu,{checked:f.notificationSettings.emailNotifications,onCheckedChange:ue=>p({...f,notificationSettings:{...f.notificationSettings,emailNotifications:ue}})}):l.jsx("div",{className:"flex items-center",children:d.notificationSettings.emailNotifications?l.jsx(Fr,{className:"w-5 h-5 text-green-500"}):l.jsx(si,{className:"w-5 h-5 text-red-500"})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(Se,{className:"text-sm font-medium",children:"Email khuyến mãi"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Nhận thông tin về chương trình khuyến mãi"})]}),t?l.jsx(bu,{checked:f.notificationSettings.marketingEmails,onCheckedChange:ue=>p({...f,notificationSettings:{...f.notificationSettings,marketingEmails:ue}})}):l.jsx("div",{className:"flex items-center",children:d.notificationSettings.marketingEmails?l.jsx(Fr,{className:"w-5 h-5 text-green-500"}):l.jsx(si,{className:"w-5 h-5 text-red-500"})})]})]})]}),l.jsxs("div",{className:"border border-gray-200 rounded-[15px] p-6",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-black mb-4 flex items-center",children:[l.jsx(qC,{className:"w-5 h-5 mr-2"}),"Thông báo qua SMS"]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(Se,{className:"text-sm font-medium",children:"Thông báo SMS"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Nhận thông báo qua tin nhắn SMS"})]}),t?l.jsx(bu,{checked:f.notificationSettings.smsNotifications,onCheckedChange:ue=>p({...f,notificationSettings:{...f.notificationSettings,smsNotifications:ue}})}):l.jsx("div",{className:"flex items-center",children:d.notificationSettings.smsNotifications?l.jsx(Fr,{className:"w-5 h-5 text-green-500"}):l.jsx(si,{className:"w-5 h-5 text-red-500"})})]})})]}),l.jsxs("div",{className:"border border-gray-200 rounded-[15px] p-6",children:[l.jsxs("h4",{className:"font-nunito text-lg font-bold text-black mb-4 flex items-center",children:[l.jsx(U0,{className:"w-5 h-5 mr-2"}),"Thông báo Push"]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(Se,{className:"text-sm font-medium",children:"Thông báo Push"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Nhận thông báo trên thiết bị"})]}),t?l.jsx(bu,{checked:f.notificationSettings.pushNotifications,onCheckedChange:ue=>p({...f,notificationSettings:{...f.notificationSettings,pushNotifications:ue}})}):l.jsx("div",{className:"flex items-center",children:d.notificationSettings.pushNotifications?l.jsx(Fr,{className:"w-5 h-5 text-green-500"}):l.jsx(si,{className:"w-5 h-5 text-red-500"})})]})})]})]})]})]})]})}),l.jsx("footer",{className:"bg-gray-300 py-12 md:py-20 mt-12",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"font-nunito text-lg md:text-xl text-black",children:"© 2024 Travel Guide Vietnam. All rights reserved."})})})}),oe&&l.jsx(SGe,{open:ce,onOpenChange:pe,bookingId:oe,onCancelSuccess:M})]})}const CGe={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};function C_({size:n="md",className:e}){return l.jsx("div",{className:Qe("animate-spin rounded-full border-2 border-current border-t-transparent",CGe[n],e),role:"status","aria-label":"Loading",children:l.jsx("span",{className:"sr-only",children:"Loading..."})})}function EGe({loading:n=!1,loadingText:e="Loading...",children:t,className:r,disabled:i,...s}){return l.jsxs("button",{className:Qe("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",r),disabled:i||n,...s,children:[n&&l.jsx(C_,{size:"sm"}),n?e:t]})}const zv=async(n,e={})=>{const t=localStorage.getItem("accessToken"),r=localStorage.getItem("refreshToken");let i=await fetch(n,{...e,headers:{...t?{Authorization:`Bearer ${t}`}:{},...e.headers||{}}});if(i.status===401&&r)try{const s=await fetch(`${cp}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:r})});if(s.ok){const o=await s.json();localStorage.setItem("accessToken",o.accessToken),i=await fetch(n,{...e,headers:{Authorization:`Bearer ${o.accessToken}`,...e.headers||{}}})}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("refreshTokenExpiresAt"),window.location.href="/login"}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("refreshTokenExpiresAt"),window.location.href="/login"}return i},cp="https://tourimate.site";function TGe(){const[n,e]=S.useState(1),t=li(),{isAdmin:r,user:i}=Zr(),[s,o]=S.useState(!1),[a,c]=S.useState([]),[u,d]=S.useState([]),[h,f]=S.useState(!1),[p,x]=S.useState(!1),[y,b]=S.useState(null),[_,C]=S.useState(!0),[k,T]=S.useState({fullName:"",email:"",phone:"",birthDate:"",address:"",idNumber:"",provinceCode:null,wardCode:null,experience:"",languages:[],specializations:[],certifications:"",introduction:"",avatar:null,idCard:null,certificates:[]}),[E,N]=S.useState({}),P=async()=>{try{const be=await zv(`${cp}/api/divisions/provinces`);if(be.ok){const we=(await be.json()||[]).filter(ue=>(ue.parentCode??ue.ParentCode)==null);c(we.map(ue=>({code:ue.code??ue.Code,name:ue.name??ue.Name})))}}catch(be){console.error("Failed to load provinces:",be)}},M=async be=>{try{f(!0);const fe=await zv(`${cp}/api/divisions/wards-by-province/${be}`);if(fe.ok){const we=await fe.json();d((we||[]).map(ue=>({code:ue.code??ue.Code,name:ue.name??ue.Name})))}else d([])}catch{d([])}finally{f(!1)}},O=async()=>{try{if(!localStorage.getItem("accessToken"))return;const fe=await zv(`${cp}/api/auth/tour-guide-application`);if(fe.ok){const we=await fe.json();b(we);try{const ue=JSON.parse(we.applicationData),Z=we.documents?JSON.parse(we.documents):[];if(T(ge=>({...ge,...ue,languages:Array.isArray(ue.languages)?ue.languages:[],specializations:Array.isArray(ue.specializations)?ue.specializations:[],avatar:Z[0]||null,idCard:Z[1]||null,certificates:Z.slice(2)||[]})),ue.provinceCode){const ge=ue.wardCode;M(ue.provinceCode).then(()=>{ge&&T(he=>({...he,wardCode:ge}))})}}catch(ue){console.error("Failed to parse existing application data:",ue)}}else fe.status===404&&(b(null),q())}catch(be){console.error("Failed to check existing application:",be)}finally{C(!1)}},q=()=>{if(!i)return;const be=`${i.firstName||""} ${i.lastName||""}`.trim();T(fe=>({...fe,fullName:be,email:i.email||"",phone:i.phoneNumber||"",birthDate:i.dateOfBirth||"",address:i.address||"",provinceCode:i.provinceCode||null}))};if(S.useEffect(()=>{(async()=>{C(!0),await P(),await O()})()},[i]),S.useEffect(()=>{k.provinceCode?(M(k.provinceCode),T(be=>({...be,wardCode:null}))):d([])},[k.provinceCode]),r)return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:l.jsx("div",{className:"bg-white rounded-[30px] shadow-xl p-8 text-center",children:l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-3xl",children:"⚠️"})}),l.jsx("h1",{className:"font-josefin text-3xl md:text-4xl font-bold text-black mb-4",children:"Không thể đăng ký làm hướng dẫn viên"}),l.jsx("p",{className:"font-nunito text-lg md:text-xl text-gray-700 mb-8",children:"Bạn đã là quản trị viên của hệ thống và không thể đăng ký làm hướng dẫn viên."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsx("button",{onClick:()=>t("/admin"),className:"bg-tour-blue hover:bg-tour-teal text-white px-8 py-3 rounded-[15px] font-nunito font-bold transition-colors duration-200",children:"Về trang quản trị"}),l.jsx("button",{onClick:()=>t("/tour-guides"),className:"bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-[15px] font-nunito font-bold transition-colors duration-200",children:"Xem hướng dẫn viên"})]})]})})})]});const D=["Tiếng Việt","English","中文 (Chinese)","한국어 (Korean)","日本語 (Japanese)","Français","Deutsch","Español"],F=["Văn hóa - Lịch sử","Thiên nhiên - Sinh thái","Ẩm thực","Phiêu lưu - Mạo hiểm","Nghỉ dưỡng","Du lịch tâm linh","Nhiếp ảnh","Du lịch gia đình"],K=(be,fe)=>{T(we=>({...we,[be]:fe})),E[be]&&N(we=>({...we,[be]:""}))},ee=be=>{const fe=k.languages;fe.includes(be)?K("languages",fe.filter(we=>we!==be)):K("languages",[...fe,be])},Y=be=>{const fe=k.specializations;fe.includes(be)?K("specializations",fe.filter(we=>we!==be)):K("specializations",[...fe,be])},U=(be,fe)=>{K(be,fe)},R=be=>{const fe={};return be===1?(k.fullName||(fe.fullName="Vui lòng nhập họ tên"),k.email||(fe.email="Vui lòng nhập email"),k.phone||(fe.phone="Vui lòng nhập số điện thoại"),k.birthDate||(fe.birthDate="Vui lòng chọn ngày sinh"),k.address||(fe.address="Vui lòng nhập địa chỉ"),k.idNumber||(fe.idNumber="Vui lòng nhập CCCD/CMND"),k.provinceCode||(fe.provinceCode="Vui lòng chọn tỉnh/thành phố"),k.wardCode||(fe.wardCode="Vui lòng chọn phường/xã")):be===2?(k.experience||(fe.experience="Vui lòng chọn kinh nghiệm"),k.languages.length===0&&(fe.languages="Vui lòng chọn ít nhất một ngôn ngữ"),k.specializations.length===0&&(fe.specializations="Vui lòng chọn ít nhất một chuyên môn"),k.introduction||(fe.introduction="Vui lòng viết giới thiệu bản thân")):be===3&&(k.avatar||(fe.avatar="Vui lòng tải lên ảnh đại diện"),k.idCard||(fe.idCard="Vui lòng tải lên ảnh CCCD/CMND")),N(fe),Object.keys(fe).length===0},z=()=>{R(n)&&e(n+1)},W=()=>{e(n-1)},se=async()=>{if(!R(n))return;if(!localStorage.getItem("accessToken")){Ae.error("Bạn cần đăng nhập để đăng ký làm hướng dẫn viên"),t("/login");return}o(!0);try{const fe={fullName:k.fullName,email:k.email,phone:k.phone,birthDate:k.birthDate,address:k.address,idNumber:k.idNumber,provinceCode:k.provinceCode,wardCode:k.wardCode,experience:k.experience,languages:k.languages,specializations:k.specializations,certifications:k.certifications,introduction:k.introduction},we=[];if(k.avatar)if(typeof k.avatar=="string")we.push(k.avatar);else{const Z=new FormData;Z.append("file",k.avatar);const ge=await zv(`${cp}/api/media/upload`,{method:"POST",body:Z});if(ge.ok){const he=await ge.json();we.push(he.url)}}if(k.idCard)if(typeof k.idCard=="string")we.push(k.idCard);else{const Z=new FormData;Z.append("file",k.idCard);const ge=await zv(`${cp}/api/media/upload`,{method:"POST",body:Z});if(ge.ok){const he=await ge.json();we.push(he.url)}}for(const Z of k.certificates)if(typeof Z=="string")we.push(Z);else{const ge=new FormData;ge.append("file",Z);const he=await zv(`${cp}/api/media/upload`,{method:"POST",body:ge});if(he.ok){const Ee=await he.json();we.push(Ee.url)}}const ue=await zv(`${cp}/api/auth/tour-guide-application`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationData:JSON.stringify(fe),documents:JSON.stringify(we)})});if(!ue.ok){const Z=await ue.text();throw new Error(Z||ue.statusText)}Ae.success("Đăng ký thành công! Chúng tôi sẽ liên hệ với bạn trong 24h."),t("/tour-guides")}catch(fe){console.error("Registration error:",fe),Ae.error(fe.message||"Đăng ký thất bại. Vui lòng thử lại.")}finally{o(!1)}},ne=()=>y?y.status==="allow_edit"||y.status==="rejected":!0,te=()=>y?y.status==="rejected"?"Gửi lại đăng ký":y.status==="allow_edit"?"Cập nhật đăng ký":"Gửi đăng ký":"Gửi đăng ký",H=()=>{if(_)return l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(C_,{size:"sm",className:"text-blue-600"}),l.jsx("span",{className:"text-blue-800 font-medium",children:"Đang kiểm tra trạng thái đơn đăng ký..."})]})});if(!y)return null;const be={pending_review:{color:"yellow",icon:"⏳",message:"Đơn đăng ký đang chờ xem xét. Bạn không thể chỉnh sửa lúc này.",canEdit:!1},approved:{color:"green",icon:"✅",message:"Đơn đăng ký đã được phê duyệt. Bạn đã trở thành hướng dẫn viên!",canEdit:!1},rejected:{color:"red",icon:"❌",message:"Đơn đăng ký bị từ chối. Bạn có thể chỉnh sửa và gửi lại.",canEdit:!0},allow_edit:{color:"blue",icon:"✏️",message:"Bạn có thể chỉnh sửa đơn đăng ký. Hãy cập nhật thông tin và gửi lại.",canEdit:!0}},fe=be[y.status]||be.pending_review,we={yellow:"bg-yellow-50 border-yellow-200 text-yellow-800",green:"bg-green-50 border-green-200 text-green-800",red:"bg-red-50 border-red-200 text-red-800",blue:"bg-blue-50 border-blue-200 text-blue-800"};return l.jsx("div",{className:`${we[fe.color]} border rounded-lg p-4 mb-6`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-xl",children:fe.icon}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:fe.message}),y.feedback&&l.jsxs("div",{className:"mt-2 text-sm opacity-90",children:[l.jsx("strong",{children:"Phản hồi:"})," ",y.feedback]})]})]})})},ce=()=>l.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[1,2,3].map(be=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${be<=n?"bg-tour-blue":"bg-gray-300"}`,children:be<n?l.jsx(Fr,{className:"w-5 h-5"}):be}),be<3&&l.jsx("div",{className:`w-16 h-1 mx-2 ${be<n?"bg-tour-blue":"bg-gray-300"}`})]},be))}),pe=()=>{var be,fe;return l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-black text-center mb-8",children:"Thông tin cá nhân"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Họ và tên ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:k.fullName,onChange:we=>K("fullName",we.target.value),className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue ${E.fullName?"border-red-500":"border-gray-300"}`,placeholder:"Nhập họ và tên đầy đủ"}),E.fullName&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.fullName})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Email ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"email",value:k.email,onChange:we=>K("email",we.target.value),className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue ${E.email?"border-red-500":"border-gray-300"}`,placeholder:"example@email.com"}),E.email&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.email})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Số điện thoại ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"tel",value:k.phone,onChange:we=>K("phone",we.target.value),className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue ${E.phone?"border-red-500":"border-gray-300"}`,placeholder:"+84 123 456 789"}),E.phone&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.phone})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Ngày sinh ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs(f_,{open:p,onOpenChange:x,children:[l.jsx(m_,{asChild:!0,children:l.jsxs(Ce,{variant:"outline",className:Qe("w-full justify-start text-left font-normal p-4 h-auto rounded-[15px] font-nunito text-lg border",!k.birthDate&&"text-muted-foreground",E.birthDate&&"border-red-500"),children:[l.jsx(er,{className:"mr-2 h-4 w-4"}),k.birthDate?Wo(new Date(k.birthDate),"dd/MM/yyyy",{locale:Yf}):l.jsx("span",{children:"Chọn ngày sinh"})]})}),l.jsx(K0,{className:"w-auto p-0",align:"start",children:l.jsx(_A,{mode:"single",selected:k.birthDate?new Date(k.birthDate):void 0,onSelect:we=>{we&&(K("birthDate",Wo(we,"yyyy-MM-dd")),x(!1))},disabled:we=>we>new Date||we<new Date("1900-01-01"),initialFocus:!0,locale:Yf})})]}),E.birthDate&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.birthDate})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:["CCCD/CMND ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:k.idNumber,onChange:we=>K("idNumber",we.target.value),className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue ${E.idNumber?"border-red-500":"border-gray-300"}`,placeholder:"123456789012"}),E.idNumber&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.idNumber})]}),l.jsxs("div",{children:[l.jsxs(Se,{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Tỉnh/Thành phố ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(fh,{value:((be=k.provinceCode)==null?void 0:be.toString())||"",onValueChange:we=>K("provinceCode",we?Number(we):null),placeholder:"Chọn tỉnh/thành phố",searchPlaceholder:"Tìm kiếm tỉnh/thành...",options:a.map(we=>({value:we.code.toString(),label:we.name})),className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue !h-auto ${E.provinceCode?"border-red-500":"border-gray-300"}`}),E.provinceCode&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.provinceCode})]}),l.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs(Se,{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Phường/Xã ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(fh,{value:((fe=k.wardCode)==null?void 0:fe.toString())||"",onValueChange:we=>K("wardCode",we?Number(we):null),placeholder:k.provinceCode?h?"Đang tải...":"Chọn phường/xã":"Chọn tỉnh trước",searchPlaceholder:"Tìm kiếm phường/xã...",options:u.map(we=>({value:we.code.toString(),label:we.name})),disabled:!k.provinceCode||h,className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue !h-auto ${E.wardCode?"border-red-500":"border-gray-300"}`}),E.wardCode&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.wardCode})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Địa chỉ chi tiết ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:k.address,onChange:we=>K("address",we.target.value),className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue ${E.address?"border-red-500":"border-gray-300"}`,placeholder:"Số nhà, đường (địa chỉ chi tiết)"}),E.address&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.address})]})]})]})]})},oe=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-black text-center mb-8",children:"Thông tin chuyên môn"}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-4",children:["Kinh nghiệm làm hướng dẫn viên ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["Mới bắt đầu","1-2 năm","3-5 năm","5+ năm"].map(be=>l.jsx("button",{onClick:()=>K("experience",be),className:`p-3 rounded-[15px] border-2 transition-colors duration-200 ${k.experience===be?"border-tour-blue bg-tour-light-blue text-tour-blue":"border-gray-300 hover:border-tour-blue"}`,children:l.jsx("span",{className:"font-nunito font-medium",children:be})},be))}),E.experience&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.experience})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-4",children:["Ngôn ngữ bạn có thể sử dụng ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:D.map(be=>l.jsx("button",{onClick:()=>ee(be),className:`p-3 rounded-[15px] border-2 transition-colors duration-200 ${k.languages.includes(be)?"border-tour-blue bg-tour-light-blue text-tour-blue":"border-gray-300 hover:border-tour-blue"}`,children:l.jsx("span",{className:"font-nunito font-medium",children:be})},be))}),E.languages&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.languages})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-4",children:["Chuyên môn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:F.map(be=>l.jsx("button",{onClick:()=>Y(be),className:`p-3 rounded-[15px] border-2 transition-colors duration-200 ${k.specializations.includes(be)?"border-tour-blue bg-tour-light-blue text-tour-blue":"border-gray-300 hover:border-tour-blue"}`,children:l.jsx("span",{className:"font-nunito font-medium",children:be})},be))}),E.specializations&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.specializations})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:"Chứng chỉ/Bằng cấp liên quan (nếu có)"}),l.jsx("textarea",{value:k.certifications,onChange:be=>K("certifications",be.target.value),rows:3,className:"w-full p-4 border border-gray-300 rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue",placeholder:"Ví dụ: Chứng chỉ hướng dẫn viên du lịch quốc gia, bằng tiếng Anh IELTS 7.0..."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-2",children:["Giới thiệu bản thân ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{value:k.introduction,onChange:be=>K("introduction",be.target.value),rows:5,className:`w-full p-4 border rounded-[15px] font-nunito text-lg focus:outline-none focus:ring-2 focus:ring-tour-blue ${E.introduction?"border-red-500":"border-gray-300"}`,placeholder:"Hãy giới thiệu về bản thân, kinh nghiệm làm việc, và lý do bạn muốn trở thành hướng dẫn viên..."}),E.introduction&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.introduction})]})]}),ve=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-black text-center mb-8",children:"Tài liệu xác thực"}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-4",children:["Ảnh đại diện ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:`border-2 border-dashed rounded-[20px] p-8 text-center transition-colors duration-200 ${E.avatar?"border-red-500 bg-red-50":"border-gray-300 hover:border-tour-blue"}`,children:k.avatar?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"w-full aspect-[5/3]",children:l.jsx("img",{src:typeof k.avatar=="string"?k.avatar:URL.createObjectURL(k.avatar),alt:"Avatar preview",className:"w-full h-full rounded-[15px] object-cover border"})}),l.jsx("p",{className:"font-nunito text-lg text-gray-700",children:typeof k.avatar=="string"?"Avatar đã tải lên":k.avatar.name}),l.jsx("button",{onClick:()=>K("avatar",null),className:"text-red-500 hover:text-red-700 transition-colors duration-200",children:l.jsx(si,{className:"w-5 h-5 mx-auto"})})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx(Bae,{className:"w-16 h-16 text-gray-400 mx-auto"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-nunito text-lg text-gray-700 mb-2",children:"Tải lên ảnh đại diện"}),l.jsx("input",{type:"file",accept:"image/*",onChange:be=>{var we;const fe=(we=be.target.files)==null?void 0:we[0];fe&&U("avatar",fe)},className:"hidden",id:"avatar-upload"}),l.jsx("label",{htmlFor:"avatar-upload",className:"bg-tour-blue hover:bg-tour-teal text-white px-6 py-3 rounded-[15px] cursor-pointer transition-colors duration-200 inline-block",children:"Chọn ảnh"})]})]})}),E.avatar&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.avatar})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block font-nunito text-lg font-medium text-black mb-4",children:["Ảnh CCCD/CMND (mặt trước) ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:`border-2 border-dashed rounded-[20px] p-8 text-center transition-colors duration-200 ${E.idCard?"border-red-500 bg-red-50":"border-gray-300 hover:border-tour-blue"}`,children:k.idCard?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"w-full aspect-[5/3]",children:l.jsx("img",{src:typeof k.idCard=="string"?k.idCard:URL.createObjectURL(k.idCard),alt:"ID card preview",className:"w-full h-full rounded-[15px] object-cover border"})}),l.jsx("p",{className:"font-nunito text-lg text-gray-700",children:typeof k.idCard=="string"?"Ảnh CCCD/CMND đã tải lên":k.idCard.name}),l.jsx("button",{onClick:()=>K("idCard",null),className:"text-red-500 hover:text-red-700 transition-colors duration-200",children:l.jsx(si,{className:"w-5 h-5 mx-auto"})})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx(i_,{className:"w-16 h-16 text-gray-400 mx-auto"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-nunito text-lg text-gray-700 mb-2",children:"Tải lên ảnh CCCD/CMND"}),l.jsx("input",{type:"file",accept:"image/*",onChange:be=>{var we;const fe=(we=be.target.files)==null?void 0:we[0];fe&&U("idCard",fe)},className:"hidden",id:"idcard-upload"}),l.jsx("label",{htmlFor:"idcard-upload",className:"bg-tour-blue hover:bg-tour-teal text-white px-6 py-3 rounded-[15px] cursor-pointer transition-colors duration-200 inline-block",children:"Chọn ảnh"})]})]})}),E.idCard&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:E.idCard})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-nunito text-lg font-medium text-black mb-4",children:"Chứng chỉ/Bằng cấp (nếu có)"}),l.jsx("div",{className:"border-2 border-dashed border-gray-300 hover:border-tour-blue rounded-[20px] p-8 text-center transition-colors duration-200",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx(Kae,{className:"w-16 h-16 text-gray-400 mx-auto"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-nunito text-lg text-gray-700 mb-2",children:"Tải lên các chứng chỉ"}),l.jsx("input",{type:"file",accept:"image/*,.pdf",multiple:!0,onChange:be=>{const we=Array.from(be.target.files||[]).filter(ue=>{const Z=ue.type.startsWith("image/"),ge=ue.type==="application/pdf";return Z||ge});K("certificates",we)},className:"hidden",id:"certificates-upload"}),l.jsx("label",{htmlFor:"certificates-upload",className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-[15px] cursor-pointer transition-colors duration-200 inline-block",children:"Chọn tệp"})]})]})}),k.certificates.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-nunito text-lg font-medium mb-2",children:"Tệp đã chọn:"}),l.jsx("div",{className:"space-y-2",children:k.certificates.map((be,fe)=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-3 rounded-[10px]",children:[l.jsx("span",{className:"font-nunito text-sm",children:typeof be=="string"?`Tệp ${fe+1} đã tải lên`:be.name}),l.jsx("button",{onClick:()=>{const we=k.certificates.filter((ue,Z)=>Z!==fe);K("certificates",we)},className:"text-red-500 hover:text-red-700",children:l.jsx(si,{className:"w-4 h-4"})})]},fe))})]})]})]});return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:()=>t(-1),className:"flex items-center space-x-2 text-black hover:text-tour-blue transition-colors duration-200",children:[l.jsx(rh,{className:"w-6 h-6"}),l.jsx("span",{className:"font-nunito text-lg font-medium",children:"Quay lại"})]})}),l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"font-josefin text-3xl md:text-4xl lg:text-5xl font-bold text-black mb-4",children:"Đăng kí làm hướng dẫn viên"}),l.jsx("p",{className:"font-nunito text-lg md:text-xl text-gray-700 max-w-2xl mx-auto",children:"Tham gia đội ngũ hướng dẫn viên chuyên nghiệp và chia sẻ tình yêu với du lịch Việt Nam"})]}),H(),l.jsxs("div",{className:"bg-white rounded-[30px] shadow-xl p-6 md:p-8 lg:p-12",children:[ce(),n===1&&pe(),n===2&&oe(),n===3&&ve(),l.jsxs("div",{className:"flex justify-between items-center mt-12",children:[l.jsxs("button",{onClick:W,disabled:n===1,className:`flex items-center space-x-2 px-6 py-3 rounded-[15px] transition-colors duration-200 ${n===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-500 hover:bg-gray-600 text-white"}`,children:[l.jsx(rh,{className:"w-5 h-5"}),l.jsx("span",{className:"font-nunito font-medium",children:"Quay lại"})]}),n<3?l.jsxs("button",{onClick:z,className:"flex items-center space-x-2 bg-tour-blue hover:bg-tour-teal text-white px-6 py-3 rounded-[15px] transition-colors duration-200",children:[l.jsx("span",{className:"font-nunito font-medium",children:"Tiếp theo"}),l.jsx(rh,{className:"w-5 h-5 rotate-180"})]}):l.jsxs(EGe,{onClick:se,loading:s,loadingText:"Đang xử lý...",disabled:s||!ne(),className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-8 py-3 rounded-[15px] transition-colors duration-200",children:[l.jsx(SCe,{className:"w-5 h-5"}),l.jsx("span",{className:"font-nunito font-medium",children:te()})]})]})]}),l.jsxs("div",{className:"mt-12 bg-gradient-to-r from-tour-light-blue to-tour-teal rounded-[30px] p-8",children:[l.jsx("h3",{className:"font-itim text-2xl md:text-3xl text-center text-white mb-8",children:"Tại sao nên trở thành hướng dẫn viên?"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center text-white",children:[l.jsx("div",{className:"bg-white bg-opacity-20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:l.jsx(ki,{className:"w-8 h-8"})}),l.jsx("h4",{className:"font-nunito text-xl font-bold mb-2",children:"Thu nhập hấp dẫn"}),l.jsx("p",{className:"font-nunito",children:"Kiếm thêm thu nhập từ đam mê du lịch của bạn"})]}),l.jsxs("div",{className:"text-center text-white",children:[l.jsx("div",{className:"bg-white bg-opacity-20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:l.jsx(Xr,{className:"w-8 h-8"})}),l.jsx("h4",{className:"font-nunito text-xl font-bold mb-2",children:"Khám phá đất nước"}),l.jsx("p",{className:"font-nunito",children:"Du lịch khắp Việt Nam cùng với khách hàng"})]}),l.jsxs("div",{className:"text-center text-white",children:[l.jsx("div",{className:"bg-white bg-opacity-20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:l.jsx(mCe,{className:"w-8 h-8"})}),l.jsx("h4",{className:"font-nunito text-xl font-bold mb-2",children:"Phát triển bản thân"}),l.jsx("p",{className:"font-nunito",children:"Nâng cao kỹ năng giao tiếp và chuyên môn"})]})]})]})]}),l.jsx("footer",{className:"bg-gray-300 py-12 md:py-20 mt-12",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"font-nunito text-lg md:text-xl text-black",children:"© 2024 Travel Guide Vietnam. All rights reserved."})})})})]})}function AGe(){var c;const{guideId:n}=tA(),e=li(),[t,r]=S.useState(null),[i,s]=S.useState([]),[o,a]=S.useState(!0);return S.useEffect(()=>{(async()=>{if(n)try{a(!0);const d=await ot(`${Ge()}/api/guides/${n}`,{skipAuth:!0});r(d);const h=await D0.getToursByGuide(n,!0);s(h||[])}finally{a(!1)}})()},[n]),o?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"})]})})]}):t?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsx("div",{className:"bg-white rounded-xl border shadow-sm p-6 mb-8",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[l.jsx("img",{src:t.avatar||"https://via.placeholder.com/160",alt:t.fullName,className:"w-32 h-32 rounded-full object-cover border"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("h1",{className:"text-2xl font-bold",children:t.fullName}),l.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[l.jsx(Xr,{className:"w-4 h-4"}),l.jsx("span",{children:t.location||"Chưa cập nhật"}),l.jsxs("span",{className:"inline-flex items-center gap-1",children:[l.jsx(ki,{className:"w-4 h-4 text-yellow-500 fill-current"}),((c=t.averageRating)==null?void 0:c.toFixed(1))||"0.0"," (",t.totalReviews,")"]}),l.jsxs("span",{children:["• ",t.totalActiveTours," tour đang hoạt động"]})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t.email,t.phoneNumber?` • ${t.phoneNumber}`:""]})]})]})}),t.bioHtml&&l.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-6 mb-8",children:[l.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Giới thiệu"}),l.jsx("div",{className:"prose max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:t.bioHtml}})]}),l.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Các tour của hướng dẫn viên"}),l.jsx("button",{className:"text-sm text-blue-600 hover:underline",onClick:()=>e(`/tours?guideId=${t.id}`),children:"Xem tất cả"})]}),i.length===0?l.jsx("p",{className:"text-gray-600",children:"Chưa có tour nào."}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(u=>l.jsxs("div",{className:"border rounded-lg overflow-hidden hover:shadow-sm transition-shadow bg-white",children:[l.jsx("div",{className:"h-40 bg-gray-100",children:u.imageUrls&&u.imageUrls.length>0?l.jsx("img",{src:u.imageUrls[0],alt:u.title,className:"w-full h-full object-cover"}):null}),l.jsxs("div",{className:"p-4 space-y-2",children:[l.jsx("div",{className:"font-semibold line-clamp-2",children:u.title}),l.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",dangerouslySetInnerHTML:{__html:u.shortDescription}}),l.jsx("button",{className:"w-full mt-2 border rounded-md py-2 text-sm",onClick:()=>e(`/tour/${u.id}`),children:"Xem chi tiết"})]})]},u.id))})]})]})]}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx("p",{className:"text-gray-600",children:"Không tìm thấy thông tin hướng dẫn viên."})})]})}const $5={name:"Nguyễn Văn B",email:"nguyenvanb@email.com",phone:"+84 987 654 321"},yb={title:"Tour Phú Quốc 3N2Đ",image:"https://cdn.builder.io/api/v1/image/assets/TEMP/7c497dcdbb3d5217867134b17d46c87fa56fe8cf?width=736",date:"25/12/2024",price:"3.500.000 VND",location:"Phú Quốc, Kiên Giang"},yk={name:"Nguyễn văn A",image:"https://cdn.builder.io/api/v1/image/assets/TEMP/2168645f531d28b82837c632f89d3ed0ceaf4956?width=720",rating:4.8,totalReviews:120};function NGe(){const n=li(),e=t=>{t.preventDefault(),alert("Thanh toán thành công! (Demo)"),n("/home")};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("header",{className:"relative z-20 p-4 md:p-6 bg-white shadow-sm",children:l.jsx("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:l.jsx("h1",{className:"font-itim text-2xl md:text-3xl text-tour-blue font-bold",children:"Thanh toán tour"})})}),l.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-white rounded-[30px] shadow-2xl border border-gray-100 p-8 md:p-12 flex flex-col gap-8",children:[l.jsxs("section",{children:[l.jsx("h2",{className:"font-josefin text-xl md:text-2xl text-black mb-4",children:"Thông tin khách hàng"}),l.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[l.jsx(Fo,{className:"w-8 h-8 text-tour-blue"}),l.jsx("span",{className:"font-nunito text-lg font-bold text-black",children:$5.name})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-6 text-gray-700 font-nunito",children:[l.jsxs("span",{children:["Email: ",$5.email]}),l.jsxs("span",{children:["Điện thoại: ",$5.phone]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"font-josefin text-xl md:text-2xl text-black mb-4",children:"Thông tin tour"}),l.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[l.jsx("img",{src:yb.image,alt:yb.title,className:"w-20 h-20 object-cover rounded-[10px] border"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-nunito text-lg font-bold text-black",children:yb.title}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mt-1",children:[l.jsx(er,{className:"w-4 h-4"}),l.jsx("span",{children:yb.date}),l.jsx(Xr,{className:"w-4 h-4 ml-4"}),l.jsx("span",{children:yb.location})]}),l.jsx("span",{className:"font-nunito text-base font-medium text-tour-blue block mt-1",children:yb.price})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"font-josefin text-xl md:text-2xl text-black mb-4",children:"Hướng dẫn viên"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("img",{src:yk.image,alt:yk.name,className:"w-16 h-16 rounded-full object-cover border-2 border-tour-blue"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-nunito text-lg font-bold text-black",children:yk.name}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(ki,{className:"w-4 h-4 text-yellow-500 fill-current"}),l.jsxs("span",{className:"font-nunito text-base text-black",children:[yk.rating," (",yk.totalReviews," đánh giá)"]})]})]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"font-josefin text-xl md:text-2xl text-black mb-4",children:"Thanh toán"}),l.jsxs("form",{onSubmit:e,className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(_u,{className:"w-8 h-8 text-tour-blue"}),l.jsx("span",{className:"font-nunito text-lg text-black",children:"Chọn phương thức thanh toán"})]}),l.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-[15px] font-nunito text-base focus:outline-none focus:ring-2 focus:ring-tour-blue",required:!0,children:[l.jsx("option",{value:"",children:"-- Chọn phương thức --"}),l.jsx("option",{value:"card",children:"Thẻ tín dụng/Ghi nợ"}),l.jsx("option",{value:"bank",children:"Chuyển khoản ngân hàng"}),l.jsx("option",{value:"momo",children:"Ví MoMo"}),l.jsx("option",{value:"cod",children:"Thanh toán khi đi tour"})]}),l.jsx("button",{type:"submit",className:"w-full bg-tour-blue hover:bg-tour-teal text-white font-nunito text-xl font-bold py-4 rounded-[20px] shadow-lg hover:shadow-xl transition-all duration-200",children:"Thanh toán"})]})]})]})})]})}const Ku=S.forwardRef(({className:n,...e},t)=>l.jsx("div",{className:"relative w-full overflow-auto",children:l.jsx("table",{ref:t,className:Qe("w-full caption-bottom text-sm",n),...e})}));Ku.displayName="Table";const Yu=S.forwardRef(({className:n,...e},t)=>l.jsx("thead",{ref:t,className:Qe("[&_tr]:border-b",n),...e}));Yu.displayName="TableHeader";const Xu=S.forwardRef(({className:n,...e},t)=>l.jsx("tbody",{ref:t,className:Qe("[&_tr:last-child]:border-0",n),...e}));Xu.displayName="TableBody";const jGe=S.forwardRef(({className:n,...e},t)=>l.jsx("tfoot",{ref:t,className:Qe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));jGe.displayName="TableFooter";const ur=S.forwardRef(({className:n,...e},t)=>l.jsx("tr",{ref:t,className:Qe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));ur.displayName="TableRow";const Ot=S.forwardRef(({className:n,...e},t)=>l.jsx("th",{ref:t,className:Qe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Ot.displayName="TableHead";const wt=S.forwardRef(({className:n,...e},t)=>l.jsx("td",{ref:t,className:Qe("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));wt.displayName="TableCell";const PGe=S.forwardRef(({className:n,...e},t)=>l.jsx("caption",{ref:t,className:Qe("mt-4 text-sm text-muted-foreground",n),...e}));PGe.displayName="TableCaption";const Qr=VU,gS=Ghe,IGe=UU,qge=S.forwardRef(({className:n,...e},t)=>l.jsx(_M,{ref:t,className:Qe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));qge.displayName=_M.displayName;const Br=S.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(IGe,{children:[l.jsx(qge,{}),l.jsxs(SM,{ref:r,className:Qe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,l.jsxs(WU,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(si,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Br.displayName=SM.displayName;const $r=({className:n,...e})=>l.jsx("div",{className:Qe("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});$r.displayName="DialogHeader";const Z0=({className:n,...e})=>l.jsx("div",{className:Qe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Z0.displayName="DialogFooter";const Vr=S.forwardRef(({className:n,...e},t)=>l.jsx(zU,{ref:t,className:Qe("text-lg font-semibold leading-none tracking-tight",n),...e}));Vr.displayName=zU.displayName;const Ma=S.forwardRef(({className:n,...e},t)=>l.jsx(HU,{ref:t,className:Qe("text-sm text-muted-foreground",n),...e}));Ma.displayName=HU.displayName;const OGe="https://tourimate.site";class RGe{async request(e,t={}){const r=localStorage.getItem("accessToken"),i={headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers},...t},s=await fetch(`${OGe}${e}`,i);if(!s.ok){const a=await s.text();throw new Error(`API Error: ${s.status} - ${a}`)}if(s.status===204)return;if(!(s.headers.get("content-type")||"").toLowerCase().includes("application/json")){const a=await s.text();return a?JSON.parse(a):void 0}return s.json()}async getTours(e={}){const t=new URLSearchParams;return Object.entries(e).forEach(([r,i])=>{i!=null&&i!==""&&t.append(r,i.toString())}),this.request(`/api/tour?${t.toString()}`)}async getTour(e){return this.request(`/api/tour/${e}`)}async createTour(e){return this.request("/api/tour",{method:"POST",body:JSON.stringify(e)})}async updateTour(e,t){return this.request(`/api/tour/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteTour(e){return this.request(`/api/tour/${e}`,{method:"DELETE"})}async getToursByGuide(e,t){const r=new URLSearchParams;return t!==void 0&&r.append("isActive",t.toString()),this.request(`/api/tour/guide/${e}?${r.toString()}`)}async getMyTours(e){const t=new URLSearchParams;return e!==void 0&&t.append("isActive",e.toString()),this.request(`/api/tour/my-tours?${t.toString()}`)}async getTourStats(){return this.request("/api/tour/stats")}async updateTourStatus(e,t){const r=i=>{if(typeof i=="number")return i;const s=i.toLowerCase();return s==="approved"?2:s==="pendingapproval"||s==="pending_approval"||s==="pending"?1:s==="rejected"?3:1};return this.request(`/api/tour/${e}/status`,{method:"PUT",body:JSON.stringify(r(t))})}async getFeaturedTours(e=10){return this.request(`/api/tour/featured?limit=${e}`)}}const wc=new RGe,MGe=(n,e)=>`${n.toLocaleString("vi-VN")} ${e}`,DGe=({tour:n,tourId:e,onClose:t})=>{const[r,i]=S.useState(null),[s,o]=S.useState(!1),[a,c]=S.useState(void 0),u=e||(n==null?void 0:n.id),d="https://tourimate.site",{user:h}=Zr(),f=(h==null?void 0:h.role)==="Admin";S.useEffect(()=>{let y=!0;return(async()=>{if(u){o(!0);try{const _=await wc.getTour(u);y&&i(_)}catch(_){console.error(_)}finally{y&&o(!1)}}})(),()=>{y=!1}},[u]);const p=S.useMemo(()=>{try{if(r!=null&&r.images)return JSON.parse(r.images)}catch{}return[]},[r]);S.useEffect(()=>{(async()=>{try{const b=r==null?void 0:r.provinceCode;if(!b)return;try{const _=await fetch(`${d}/api/divisions/provinces`);if(_.ok){const k=(await _.json()).find(T=>(T.code??T.Code)===b);k&&c(k.name??k.Name)}}catch(_){console.error("Error loading provinces:",_)}}catch{}})()},[r,d]);const x=S.useMemo(()=>{const y={adventure:"Phiêu lưu",cultural:"Văn hóa",nature:"Thiên nhiên",food:"Ẩm thực",historical:"Lịch sử",religious:"Tôn giáo",beach:"Biển",mountain:"Núi"},b=((r==null?void 0:r.category)||"").toLowerCase();return y[b]||(r==null?void 0:r.category)||"-"},[r]);return l.jsxs(Br,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Chi tiết Tour"}),l.jsx(Ma,{children:"Thông tin chi tiết về tour"})]}),s&&l.jsxs("div",{className:"flex items-center justify-center text-gray-500 py-10",children:[l.jsx(Og,{className:"h-5 w-5 animate-spin mr-2"})," Đang tải chi tiết tour..."]}),!s&&r&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Tên Tour"}),l.jsx("p",{className:"text-lg font-semibold",children:r.title})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Hướng dẫn viên"}),l.jsx("p",{className:"text-lg",children:r.tourGuideName})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Địa điểm"}),l.jsx("p",{className:"text-lg",children:r.location})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Danh mục"}),l.jsx("p",{className:"text-lg",children:x})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Thời gian"}),l.jsxs("p",{className:"text-lg",children:[r.duration," ngày"]})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Giá"}),l.jsx("p",{className:"text-lg font-semibold text-green-600",children:MGe(r.price,r.currency)})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Tỉnh/Thành phố"}),l.jsx("p",{className:"text-lg",children:a||"-"})]})]}),p.length>0&&l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Hình ảnh"}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-3",children:p.map(y=>l.jsx("img",{src:y,alt:"tour",className:"w-24 h-24 object-cover rounded-lg border"},y))})]}),l.jsx(Xf,{}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Mô tả ngắn"}),l.jsx("div",{className:"prose prose-sm mt-1 max-w-none",dangerouslySetInnerHTML:{__html:r.shortDescription||""}})]}),r.description&&l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Mô tả chi tiết"}),l.jsx("div",{className:"prose mt-1 max-w-none",dangerouslySetInnerHTML:{__html:r.description}})]}),r.itinerary&&(()=>{try{const y=JSON.parse(r.itinerary);if(Array.isArray(y)&&y.length>0)return l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Lịch trình"}),l.jsx("div",{className:"mt-2 space-y-4",children:y.map((b,_)=>l.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[l.jsxs("p",{className:"font-semibold mb-2",children:["Ngày ",b.day||_+1,": ",b.title||""]}),l.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:String(b.description||"")}})]},_))})]})}catch{}return null})(),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.includes&&(()=>{try{const y=JSON.parse(r.includes);if(Array.isArray(y)&&y.length>0)return l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Bao gồm"}),l.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:y.map((b,_)=>l.jsx("li",{children:String(b)},_))})]})}catch{}return null})(),r.excludes&&(()=>{try{const y=JSON.parse(r.excludes);if(Array.isArray(y)&&y.length>0)return l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Không bao gồm"}),l.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:y.map((b,_)=>l.jsx("li",{children:String(b)},_))})]})}catch{}return null})()]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.totalBookings}),l.jsx("p",{className:"text-sm text-gray-500",children:"Đặt tour"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.averageRating.toFixed(1)}),l.jsx("p",{className:"text-sm text-gray-500",children:"Đánh giá"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.viewCount}),l.jsx("p",{className:"text-sm text-gray-500",children:"Lượt xem"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[f&&r&&(()=>{const y=r.status,b=typeof y=="number"?y:String(y||"").toLowerCase(),_=typeof b=="number"?b===1:b==="pendingapproval"||b==="pending_approval"||b==="pending",C=typeof b=="number"?b===3:b==="rejected",k=typeof b=="number"?b===2:b==="approved";if(!_&&!C&&!k)return null;const T=async()=>{try{await wc.updateTourStatus(r.id,"approved"),t()}catch{}},E=async()=>{try{await wc.updateTourStatus(r.id,"rejected"),t()}catch{}},N=async()=>{try{await wc.updateTourStatus(r.id,"pendingapproval"),t()}catch{}};return l.jsxs("div",{className:"flex gap-2",children:[_&&l.jsxs(l.Fragment,{children:[l.jsx(Ce,{variant:"outline",size:"sm",title:"Duyệt","aria-label":"Duyệt",onClick:T,children:l.jsx(Fr,{className:"h-4 w-4"})}),l.jsx(Ce,{variant:"outline",size:"sm",title:"Từ chối","aria-label":"Từ chối",onClick:E,children:l.jsx(si,{className:"h-4 w-4"})})]}),C&&l.jsx(Ce,{variant:"outline",size:"sm",title:"Duyệt","aria-label":"Duyệt",onClick:T,children:l.jsx(Fr,{className:"h-4 w-4"})}),k&&l.jsx(Ce,{variant:"outline",size:"sm",title:"Huỷ duyệt","aria-label":"Huỷ duyệt",onClick:N,children:l.jsx(KC,{className:"h-4 w-4"})})]})})(),l.jsx(Ce,{variant:"outline",onClick:t,children:"Đóng"})]})]})]})},LGe=({onMenuToggle:n,isSidebarOpen:e})=>{var u,d,h,f;const t=li(),[r,i]=S.useState(!1),{user:s,logout:o}=Zr(),a=()=>{if(!s)return"Khách";const p=s.roles??s.role??s.userRole,y=(Array.isArray(p)?p:p?[p]:[]).map(C=>typeof C=="string"?C.toLowerCase():""),b=s.isAdmin===!0||y.some(C=>["admin","administrator"].includes(C)),_=s.isGuide===!0||y.some(C=>["guide","tourguiden","tourguides","tourguide","huongdanvien","hướng dẫn viên"].includes(C));return b?"Quản trị viên":_?"Hướng dẫn viên":"Người dùng"},c=async()=>{try{await o(),Ae.success("Đã đăng xuất"),t("/")}catch(p){console.error("Logout error:",p)}};return l.jsx("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(Ce,{variant:"ghost",size:"sm",onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(Wae,{className:"h-5 w-5 text-gray-600"})}),l.jsxs(Ce,{variant:"ghost",size:"sm",onClick:()=>t("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors hidden sm:inline-flex",title:"Về trang chủ",children:[l.jsx(Uae,{className:"h-5 w-5 text-gray-600"}),l.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Trang chủ"})]}),l.jsxs("div",{className:"relative hidden md:block",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx(We,{placeholder:"Tìm kiếm...",className:"pl-10 w-64 bg-gray-50 border-gray-200 focus:bg-white transition-colors"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(Ce,{variant:"ghost",size:"sm",className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[l.jsx(Fae,{className:"h-5 w-5 text-gray-600"}),l.jsx(ct,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center text-xs p-0",children:"3"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(Ce,{variant:"ghost",onClick:()=>i(!r),className:"flex items-center space-x-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[l.jsxs(p_,{className:"h-8 w-8",children:[l.jsx(iE,{src:(s==null?void 0:s.avatar)||""}),l.jsx(g_,{className:"bg-tour-light-blue text-black text-sm font-medium",children:s?`${((u=s.firstName)==null?void 0:u[0])||""}${((d=s.lastName)==null?void 0:d[0])||""}`.toUpperCase():"U"})]}),l.jsxs("div",{className:"hidden md:block text-left",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:s?`${s.firstName||""} ${s.lastName||""}`.trim()||"Người dùng":"Khách"}),l.jsx("p",{className:"text-xs text-gray-500",children:a()})]}),l.jsx(nA,{className:"h-4 w-4 text-gray-500"})]}),r&&l.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden z-50",children:[l.jsx("div",{className:"p-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(p_,{className:"h-12 w-12",children:[l.jsx(iE,{src:(s==null?void 0:s.avatar)||""}),l.jsx(g_,{className:"bg-tour-light-blue text-black font-medium",children:s?`${((h=s.firstName)==null?void 0:h[0])||""}${((f=s.lastName)==null?void 0:f[0])||""}`.toUpperCase():"U"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:s?`${s.firstName||""} ${s.lastName||""}`.trim()||"Người dùng":"Khách"}),l.jsx("p",{className:"text-sm text-gray-500",children:(s==null?void 0:s.email)||(s==null?void 0:s.phoneNumber)||"Chưa cập nhật"}),l.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:a()})]})]})}),l.jsxs("div",{className:"py-2",children:[l.jsxs("button",{onClick:()=>{i(!1),t("/profile")},className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center space-x-3",children:[l.jsx(Fo,{className:"h-4 w-4 text-gray-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Thông tin cá nhân"})]}),l.jsxs("button",{onClick:()=>i(!1),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center space-x-3",children:[l.jsx(U0,{className:"h-4 w-4 text-gray-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Cài đặt"})]}),l.jsx("div",{className:"border-t border-gray-100 my-1"}),l.jsxs("button",{onClick:()=>{i(!1),c()},className:"w-full px-4 py-3 text-left hover:bg-red-50 transition-colors flex items-center space-x-3 text-red-600",children:[l.jsx(U9,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Đăng xuất"})]})]})]})]})]})]})})},FGe=({isOpen:n,onClose:e})=>{var _,C;const t=li(),r=zl(),{user:i,logout:s}=Zr(),[o,a]=S.useState(0),c=async()=>{try{const k=await ot(`${Ge()}/api/bookings/admin?page=1&pageSize=1`);a(k.totalCount||0)}catch(k){console.error("Error fetching booking count:",k),a(0)}};S.useEffect(()=>{(i==null?void 0:i.role)==="Admin"&&c()},[i==null?void 0:i.role]);const[u,d]=re.useState(0),h="https://tourimate.site";re.useEffect(()=>{let k=!0;const T=async()=>{try{const N=localStorage.getItem("accessToken"),P=await fetch(`${h}/api/auth/tour-guide-applications?status=pending_review&page=1&pageSize=1`,{headers:N?{Authorization:`Bearer ${N}`}:void 0});if(!P.ok)return;const M=await P.json();k&&d(Number(M.totalCount||0))}catch{}};T();const E=window.setInterval(T,3e4);return()=>{k=!1,window.clearInterval(E)}},[h]);const f=(i==null?void 0:i.role)==="TourGuide",p=[{id:"dashboard",label:"Tổng quan",icon:wCe,path:"/admin"},f?{id:"tours",label:"Quản lý Tour",icon:Xr,children:[{id:"my-tours",label:"Tour của tôi",icon:Xr,path:"/admin/tours?mine=1"},{id:"my-tour-reviews",label:"Đánh giá Tour",icon:ki,path:"/admin/reviews?mine=1"}]}:{id:"tours",label:"Quản lý Tour",icon:Xr,children:[{id:"all-tours",label:"Tất cả Tour",icon:Xr,path:"/admin/tours"},{id:"tour-categories",label:"Danh mục Tour",icon:ly,path:"/admin/tour-categories"},{id:"tour-reviews",label:"Đánh giá Tour",icon:ki,path:"/admin/reviews"}]},f?{id:"products",label:"Quản lý Sản phẩm",icon:ly,children:[{id:"my-products",label:"Sản phẩm của tôi",icon:ly,path:"/admin/products"},{id:"create-product",label:"Tạo sản phẩm",icon:ly,path:"/admin/product/create"}]}:null,f?{id:"guides",label:"Hướng dẫn viên",icon:Lk,children:[{id:"tour-guides",label:"Hồ sơ của tôi",icon:Lk,path:"/profile"}]}:{id:"users",label:"Quản lý Người dùng",icon:Bo,children:[{id:"all-users",label:"Tất cả Người dùng",icon:Bo,path:"/admin/users"},{id:"tour-guide-applications",label:"Đơn đăng ký hướng dẫn viên",icon:i_,path:"/admin/tour-guide-applications"},{id:"tour-guides",label:"Hướng dẫn viên",icon:Lk,path:"/admin/guides"}]},f?{id:"bookings",label:"Đặt Tour",icon:er,children:[{id:"my-bookings",label:"Đặt tour của tôi",icon:er,path:"/admin/bookings?mine=1"}]}:{id:"bookings",label:"Đặt Tour",icon:er,badge:o>0?o.toString():void 0,children:[{id:"all-bookings",label:"Tất cả Tour đã đặt",icon:er,path:"/admin/bookings"},{id:"pending-bookings",label:"Chờ xử lý",icon:_m,path:"/admin/bookings/pending"},{id:"confirmed-bookings",label:"Đã xác nhận",icon:iS,path:"/admin/bookings/confirmed"}]},f?{id:"payments",label:"Thanh toán",icon:_u,children:[{id:"transactions",label:"Giao dịch của tôi",icon:_u,path:"/admin/transactions?mine=1"},{id:"revenue",label:"Doanh thu",icon:wo,path:"/admin/revenue?mine=1"},{id:"cost-management",label:"Chi phí của tôi",icon:vK,path:"/admin/cost-management?mine=1"}]}:{id:"payments",label:"Thanh toán",icon:_u,children:[{id:"transactions",label:"Giao dịch",icon:_u,path:"/admin/transactions"},{id:"revenue",label:"Doanh thu",icon:wo,path:"/admin/revenue"},{id:"refunds",label:"Hoàn tiền",icon:KC,path:"/admin/refunds"},{id:"cost-management",label:"Chi phí",icon:vK,path:"/admin/cost-management"}]},,,f?void 0:{id:"settings",label:"Cài đặt",icon:U0,children:[{id:"divisions",label:"Đơn vị hành chính",icon:Xr,path:"/admin/divisions"},{id:"pricing-config",label:"Cấu hình giá",icon:wo,path:"/admin/pricing-config"}]}],x=k=>{t(k),e()},y=k=>r.pathname===k,b=({item:k,level:T=0})=>{var q,D;const[E,N]=re.useState(!1),P=k.children&&k.children.length>0,M=k.path?y(k.path):!1,O=(q=k.children)==null?void 0:q.some(F=>F.path&&y(F.path));return l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>{P?N(!E):k.path&&x(k.path)},className:Qe("w-full flex items-center justify-between px-2 py-2 text-sm font-medium rounded-lg transition-all duration-200 group",T===0?"mb-1":"ml-3 mb-1",M||O?"bg-gradient-to-r from-tour-blue to-tour-teal text-white shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),title:n?void 0:k.label,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(k.icon,{className:Qe("h-4 w-4 transition-colors flex-shrink-0",M||O?"text-white":"text-gray-500 group-hover:text-gray-700")}),n&&l.jsx("span",{className:"text-xs",children:k.label})]}),n&&l.jsxs("div",{className:"flex items-center space-x-2",children:[(k.id==="tour-guide-applications"&&u>0||k.badge)&&l.jsx("span",{className:Qe("px-2 py-0.5 text-xs font-medium rounded-full",M||O?"bg-white/20 text-white":"bg-tour-blue text-white"),children:k.id==="tour-guide-applications"?u:k.badge}),P&&l.jsx(kg,{className:Qe("h-4 w-4 transition-transform",E?"rotate-90":"",M||O?"text-white":"text-gray-400")})]})]}),P&&E&&n&&l.jsx("div",{className:"mt-1 space-y-1",children:(D=k.children)==null?void 0:D.map(F=>l.jsx(b,{item:F,level:T+1},F.id))})]})};return l.jsxs(l.Fragment,{children:[n&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:e}),l.jsxs("aside",{className:Qe("bg-white border-r border-gray-200 shadow-lg transition-all duration-300 ease-in-out flex-shrink-0","lg:relative lg:h-full lg:z-auto",n?"w-64":"w-16","fixed left-0 top-0 z-50 h-full","flex flex-col"),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-tour-blue to-tour-teal rounded-lg flex items-center justify-center",children:l.jsx(Lk,{className:"h-5 w-5 text-white"})}),n&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Bảng điều khiển"}),l.jsx("p",{className:"text-xs text-gray-500",children:"TouriMate"})]})]}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:e,className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(si,{className:"h-4 w-4"})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto overflow-x-hidden py-3",children:l.jsx("div",{className:"space-y-1 px-2",children:p.filter(Boolean).map(k=>l.jsx(b,{item:k},k.id))})}),l.jsx("div",{className:"p-3 border-t border-gray-200",children:l.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[l.jsxs(p_,{className:"h-8 w-8",children:[l.jsx(iE,{src:(i==null?void 0:i.avatar)||""}),l.jsx(g_,{className:"bg-tour-light-blue text-black text-sm font-medium",children:i?`${((_=i.firstName)==null?void 0:_[0])||""}${((C=i.lastName)==null?void 0:C[0])||""}`.toUpperCase():"U"})]}),n&&l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i?`${i.firstName||""} ${i.lastName||""}`.trim()||"Người dùng":"Khách"}),l.jsx("p",{className:"text-xs text-gray-500 truncate",children:(i==null?void 0:i.email)||(i==null?void 0:i.phoneNumber)||"Chưa cập nhật"})]}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:async()=>{await s(),t("/")},className:"p-1 hover:bg-gray-200 rounded",title:n?void 0:"Đăng xuất",children:l.jsx(U9,{className:"h-4 w-4 text-gray-600"})})]})})]})]})},Ns=({children:n})=>{const[e,t]=S.useState(!0),r=()=>{t(!e)},i=()=>{t(!1)};return l.jsxs("div",{className:"h-screen bg-gray-50 flex overflow-hidden",children:[l.jsx(FGe,{isOpen:e,onClose:i}),l.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[l.jsx(LGe,{onMenuToggle:r,isSidebarOpen:e}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto overflow-x-hidden",children:l.jsx("div",{className:"max-w-full",children:n})})]})]})};var YM="Switch",[BGe]=_o(YM),[$Ge,VGe]=BGe(YM),Gge=S.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c="on",onCheckedChange:u,form:d,...h}=n,[f,p]=S.useState(null),x=an(e,k=>p(k)),y=S.useRef(!1),b=f?d||!!f.closest("form"):!0,[_,C]=Pu({prop:i,defaultProp:s??!1,onChange:u,caller:YM});return l.jsxs($Ge,{scope:t,checked:_,disabled:a,children:[l.jsx(kt.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":Jge(_),"data-disabled":a?"":void 0,disabled:a,value:c,...h,ref:x,onClick:st(n.onClick,k=>{C(T=>!T),b&&(y.current=k.isPropagationStopped(),y.current||k.stopPropagation())})}),b&&l.jsx(Xge,{control:f,bubbles:!y.current,name:r,value:c,checked:_,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});Gge.displayName=YM;var Kge="SwitchThumb",Yge=S.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=VGe(Kge,t);return l.jsx(kt.span,{"data-state":Jge(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});Yge.displayName=Kge;var UGe="SwitchBubbleInput",Xge=S.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},s)=>{const o=S.useRef(null),a=an(o,s),c=uM(t),u=nM(e);return S.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==t&&p){const x=new Event("click",{bubbles:r});p.call(d,t),d.dispatchEvent(x)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:a,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Xge.displayName=UGe;function Jge(n){return n?"checked":"unchecked"}var Qge=Gge,zGe=Yge;const Ml=S.forwardRef(({className:n,...e},t)=>l.jsx(Qge,{className:Qe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(zGe,{className:Qe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ml.displayName=Qge.displayName;function Hv({className:n,...e}){return l.jsx("div",{className:Qe("animate-pulse rounded-md bg-muted",n),...e})}const fZ=({initial:n,onSubmit:e,onCancel:t,onUploadImages:r,submitLabel:i})=>{const[s,o]=S.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",shortDescription:(n==null?void 0:n.shortDescription)||"",location:(n==null?void 0:n.location)||"",duration:(n==null?void 0:n.duration)??1,maxParticipants:(n==null?void 0:n.maxParticipants)??10,price:(n==null?void 0:n.price)??0,currency:"VND",category:(n==null?void 0:n.category)||"",imageUrls:(n==null?void 0:n.imageUrls)||[],itinerary:(n==null?void 0:n.itinerary)||"",includes:(n==null?void 0:n.includes)||"",excludes:(n==null?void 0:n.excludes)||"",terms:(n==null?void 0:n.terms)||"",isFeatured:(n==null?void 0:n.isFeatured)??!1}),[a,c]=S.useState(!1),{user:u}=Zr(),d=(u==null?void 0:u.role)==="TourGuide",[h,f]=S.useState([]),[p,x]=S.useState([]),[y,b]=S.useState([]),[_,C]=S.useState(void 0),[k,T]=S.useState(!0),[E,N]=S.useState(!1),P=S.useRef(!1),M=S.useRef(!1),[O,q]=S.useState(()=>{if(n!=null&&n.itinerary)try{const he=JSON.parse(n.itinerary);if(Array.isArray(he))return he.map((Ee,Be)=>({day:Number(Ee.day??Be+1),title:String(Ee.title??""),description:String(Ee.description??"")}))}catch{}return[{day:1,title:"",description:""}]}),[D,F]=S.useState(()=>{if(n!=null&&n.includes)try{const he=JSON.parse(n.includes);if(Array.isArray(he))return he.map(Ee=>String(Ee)).filter(Boolean)}catch{}return[]}),[K,ee]=S.useState(()=>{if(n!=null&&n.excludes)try{const he=JSON.parse(n.excludes);if(Array.isArray(he))return he.map(Ee=>String(Ee)).filter(Boolean)}catch{}return[]}),[Y,U]=S.useState(""),[R,z]=S.useState(""),W=S.useRef(null),se=S.useRef(null),ne="https://tourimate.site",te=typeof window<"u"&&localStorage.getItem("access_token")||void 0,[H,ce]=S.useState({}),[pe,oe]=S.useState("basic"),[ve,be]=S.useState([]),[fe,we]=S.useState(!1),ue=he=>{const Ee=document.createElement("div");return Ee.innerHTML=he||"",(Ee.textContent||Ee.innerText||"").trim()},Z=()=>{var Ee,Be,vt;const he={};return(Ee=s.title)!=null&&Ee.trim()||(he.title="Vui lòng nhập tên tour"),ue(s.shortDescription)||(he.shortDescription="Vui lòng nhập mô tả ngắn"),_||(he.provinceCode="Vui lòng chọn tỉnh/thành"),(Be=s.category)!=null&&Be.trim()||(he.category="Vui lòng chọn danh mục"),ue(s.description)||(he.description="Vui lòng nhập mô tả chi tiết"),(!Array.isArray(s.imageUrls)||(s.imageUrls||[]).length===0)&&(he.imageUrls="Vui lòng tải lên ít nhất 1 hình ảnh"),(!Array.isArray(O)||O.length===0)&&(he.itineraryItems="Vui lòng thêm ít nhất 1 lịch trình"),(!Array.isArray(D)||D.length===0)&&(he.includes="Vui lòng thêm ít nhất 1 mục 'Bao gồm'"),(!Array.isArray(K)||K.length===0)&&(he.excludes="Vui lòng thêm ít nhất 1 mục 'Không bao gồm'"),ue(s.terms||"")||(he.terms="Vui lòng nhập điều khoản"),!d&&!((vt=s.tourGuideId)!=null&&vt.trim())&&(he.tourGuideId="Vui lòng chọn hướng dẫn viên"),ce(he),Object.keys(he).length===0},ge=async he=>{if(!r)return;const Ee=Array.from(he.target.files||[]);if(Ee.length!==0){c(!0);try{const Be=await r(Ee);o(vt=>({...vt,imageUrls:[...vt.imageUrls||[],...Be]})),Ae.success(`Tải ${Be.length} ảnh lên thành công`),he.target.value=""}catch{Ae.error("Có lỗi xảy ra khi tải ảnh lên")}finally{c(!1)}}};return S.useEffect(()=>{const he=async()=>{try{T(!0);const vt=(await ot(`${Ge()}/api/divisions/provinces`,{skipAuth:!0})||[]).filter(xt=>(xt.parentCode??xt.ParentCode)==null);f(vt.map(xt=>({code:xt.code??xt.Code,name:xt.name??xt.Name})))}catch{}finally{T(!1)}},Ee=async()=>{try{const Be=await ot(`${Ge()}/api/tourcategories`,{skipAuth:!0});b(Be)}catch{}};he(),Ee()},[]),S.useEffect(()=>{if(!P.current&&h.length>0&&(n!=null&&n.provinceCode)){const he=n.provinceCode;C(he),o(Ee=>({...Ee,divisionCode:n!=null&&n.wardCode?n.wardCode:he,provinceCode:he,...n!=null&&n.wardCode?{wardCode:n.wardCode}:{}})),P.current=!0}},[h]),S.useEffect(()=>{_?(x([]),o(he=>({...he,wardCode:void 0,divisionCode:_}))):x([])},[_]),S.useEffect(()=>{d||(async()=>{try{we(!0);const Ee=await ot(`${Ge()}/api/guides`,{skipAuth:!1});be(Ee||[])}catch(Ee){console.error("Error loading tour guides:",Ee),be([])}finally{we(!1)}})()},[d]),S.useEffect(()=>{_?(async Ee=>{try{N(!0);const Be=`${Ge()}/api/divisions/wards-by-province/${Ee}`;console.debug("Loading wards by province:",Be);const xt=(await ot(Be,{skipAuth:!0})||[]).map(Rt=>({code:Rt.code??Rt.Code,name:Rt.name??Rt.Name}));console.debug("Wards loaded:",xt.length),x(xt)}catch{x([])}finally{N(!1)}})(_):x([])},[_]),S.useEffect(()=>{if(!M.current&&p.length>0&&(n!=null&&n.wardCode)&&_){const he=n.wardCode;p.some(Be=>Be.code===he)&&o(Be=>({...Be,wardCode:he,divisionCode:he})),M.current=!0}},[p,_]),l.jsxs(l.Fragment,{children:[k||n!=null&&n.provinceCode&&E?l.jsxs("div",{className:"w-full p-6 space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Hv,{className:"h-6 w-40"}),l.jsx(Hv,{className:"h-10 w-full"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(Hv,{className:"h-16 w-full"}),l.jsx(Hv,{className:"h-16 w-full"}),l.jsx(Hv,{className:"h-16 w-full"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Hv,{className:"h-6 w-32"}),l.jsx(Hv,{className:"h-24 w-full"})]}),l.jsx("div",{className:"text-sm text-gray-500",children:"Đang tải dữ liệu, vui lòng đợi..."})]}):null,!(k||n!=null&&n.provinceCode&&E)&&l.jsxs(bhe,{defaultValue:"basic",value:pe,onValueChange:oe,className:"w-full flex-1 overflow-y-auto px-6 pb-24",children:[l.jsxs(DU,{className:"grid w-full grid-cols-4",children:[l.jsx(Uf,{value:"basic",children:"Thông tin cơ bản"}),l.jsx(Uf,{value:"details",children:"Chi tiết"}),l.jsx(Uf,{value:"content",children:"Nội dung"}),l.jsx(Uf,{value:"settings",children:"Cài đặt"})]}),l.jsx(zf,{value:"basic",className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsxs(Se,{htmlFor:"title",children:["Tên Tour ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(We,{id:"title",value:s.title,onChange:he=>o(Ee=>({...Ee,title:he.target.value})),placeholder:"Nhập tên tour"}),H.title&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.title})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsxs(Se,{htmlFor:"shortDescription",children:["Mô tả ngắn ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"mt-2 h-[250px] ckeditor-container",children:l.jsx(zk,{data:s.shortDescription,onChange:he=>{o(Ee=>({...Ee,shortDescription:he}))},baseApiUrl:ne,authToken:te})}),H.shortDescription&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.shortDescription})]}),l.jsxs("div",{className:"col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsxs(Se,{htmlFor:"division",children:["Tỉnh/Thành phố ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(fh,{value:(_==null?void 0:_.toString())??"",onValueChange:he=>{const Ee=he?parseInt(he):void 0;C(Ee),o(Be=>({...Be,divisionCode:Ee,provinceCode:Ee,wardCode:void 0}))},placeholder:"Chọn tỉnh/thành",searchPlaceholder:"Tìm kiếm tỉnh/thành...",options:h.map(he=>({value:String(he.code),label:he.name}))}),H.provinceCode&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.provinceCode})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"ward",children:"Phường/Xã"}),l.jsx(fh,{value:s.wardCode?String(s.wardCode):"",onValueChange:he=>o(Ee=>({...Ee,wardCode:he?parseInt(he):void 0,divisionCode:he?parseInt(he):_})),placeholder:_?E?"Đang tải...":p.length?"Chọn phường/xã":"Không có dữ liệu":"Chọn tỉnh trước",searchPlaceholder:"Tìm kiếm phường/xã...",options:[{value:"",label:"Không chọn"},...p.map(he=>({value:String(he.code),label:he.name}))],disabled:!_||p.length===0}),H.wardCode&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.wardCode})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"location",children:"Địa điểm chi tiết"}),l.jsx(We,{id:"location",value:s.location,onChange:he=>o(Ee=>({...Ee,location:he.target.value})),placeholder:"Ví dụ: 123 Phố Huế, Hai Bà Trưng"}),H.location&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.location})]})]}),l.jsx("div",{className:"col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4",children:l.jsxs("div",{className:"md:col-span-1",children:[l.jsxs(Se,{htmlFor:"category",children:["Danh mục ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs(Cn,{value:s.category,onValueChange:he=>o(Ee=>({...Ee,category:he})),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn danh mục"})}),l.jsx(_n,{children:y.map(he=>l.jsx(ze,{value:he.code,children:he.name},he.id))})]}),H.category&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.category})]})})]})}),l.jsx(zf,{value:"details",className:"space-y-4",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs(Se,{children:["Hình ảnh ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tải lên tối đa nhiều ảnh. Bạn có thể xóa ảnh đã tải."}),l.jsxs("div",{className:"relative mt-2",children:[l.jsx(We,{type:"file",accept:"image/*",multiple:!0,onChange:ge,disabled:a,"aria-busy":a}),a&&l.jsxs("div",{className:"absolute inset-0 bg-white/60 flex items-center gap-2 px-3 rounded-md",children:[l.jsx("span",{className:"animate-spin inline-block w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Đang tải ảnh, vui lòng đợi..."})]})]}),l.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:(s.imageUrls||[]).map(he=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:he,alt:"preview",className:"w-20 h-20 object-cover rounded-lg border"}),l.jsx("button",{type:"button",onClick:()=>o(Ee=>({...Ee,imageUrls:(Ee.imageUrls||[]).filter(Be=>Be!==he)})),className:"absolute -top-2 -right-2 bg-white border rounded-full w-6 h-6 text-gray-600 shadow hover:text-red-600","aria-label":"Xóa ảnh",title:"Xóa ảnh",children:"×"})]},he))}),H.imageUrls&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.imageUrls})]}),l.jsxs("div",{children:[l.jsxs("div",{className:`flex items-center justify-between ${pe==="details"&&O.length>0?"sticky top-0 bg-white z-40 py-2 border-b border-gray-200":""}`,children:[l.jsxs(Se,{children:["Lịch trình ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(Ce,{type:"button",variant:"outline",onClick:()=>q(he=>{var Ee;return[...he,{day:(((Ee=he.at(-1))==null?void 0:Ee.day)??he.length)+1,title:"",description:""}]}),children:"Thêm ngày"})]}),l.jsx("div",{className:"mt-3 space-y-4",children:O.map((he,Ee)=>l.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-gray-50",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:`day-${Ee}`,children:"Ngày"}),l.jsx(We,{id:`day-${Ee}`,type:"number",min:1,value:he.day,onChange:Be=>{const vt=parseInt(Be.target.value)||1;q(xt=>xt.map((Rt,xe)=>xe===Ee?{...Rt,day:vt}:Rt))}})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx(Se,{htmlFor:`title-${Ee}`,children:"Tiêu đề"}),l.jsx(We,{id:`title-${Ee}`,value:he.title,onChange:Be=>q(vt=>vt.map((xt,Rt)=>Rt===Ee?{...xt,title:Be.target.value}:xt)),placeholder:"Ví dụ: Tham quan phố cổ"})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:`desc-${Ee}`,children:"Mô tả"}),l.jsx("div",{className:"mt-2",children:l.jsx(zk,{data:he.description,onChange:Be=>{q(vt=>vt.map((xt,Rt)=>Rt===Ee?{...xt,description:Be}:xt))},baseApiUrl:ne,authToken:te})})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(Ce,{type:"button",variant:"outline",onClick:()=>q(Be=>Be.filter((vt,xt)=>xt!==Ee)),children:"Xóa ngày"})})]},Ee))}),H.itineraryItems&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.itineraryItems})]})]})}),l.jsx(zf,{value:"content",className:"space-y-4",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs(Se,{htmlFor:"description",children:["Mô tả chi tiết ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"mt-2 h-[250px] ckeditor-container",children:l.jsx(zk,{data:s.description,onChange:he=>{o(Ee=>({...Ee,description:he}))},baseApiUrl:ne,authToken:te})}),H.description&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.description}),l.jsx("input",{ref:se,type:"file",accept:"video/mp4,video/webm,video/ogg",className:"hidden",onChange:async he=>{var Rt;const Ee=(Rt=he.target.files)==null?void 0:Rt[0];if(!Ee)return;const Be=new FormData;Be.append("file",Ee);const vt=await xU(`${Ge()}/api/media/upload`,Be),xt=vt==null?void 0:vt.url;!xt||!W.current||(W.current.model.change(xe=>{const Ne=W.current.model.document.selection.getFirstPosition(),Oe=W.current.data.processor.toView(`<p><video controls src="${xt}"></video></p>`),qe=W.current.data.toModel(Oe);W.current.model.insertContent(qe,Ne)}),se.current&&(se.current.value=""))}})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Se,{children:["Bao gồm ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(We,{value:Y,onChange:he=>U(he.target.value),placeholder:"Thêm mục bao gồm"}),l.jsx(Ce,{type:"button",onClick:()=>{const he=Y.trim();he&&(F(Ee=>[...Ee,he]),U(""))},children:"Thêm"})]})]}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[D.map((he,Ee)=>l.jsxs("span",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-full bg-gray-100 text-sm",children:[he,l.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700",onClick:()=>F(Be=>Be.filter((vt,xt)=>xt!==Ee)),children:"×"})]},Ee)),D.length===0&&l.jsx("span",{className:"text-sm text-gray-500",children:"Chưa có mục nào"})]}),H.includes&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.includes})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Se,{children:["Không bao gồm ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(We,{value:R,onChange:he=>z(he.target.value),placeholder:"Thêm mục không bao gồm"}),l.jsx(Ce,{type:"button",onClick:()=>{const he=R.trim();he&&(ee(Ee=>[...Ee,he]),z(""))},children:"Thêm"})]})]}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[K.map((he,Ee)=>l.jsxs("span",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-full bg-gray-100 text-sm",children:[he,l.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700",onClick:()=>ee(Be=>Be.filter((vt,xt)=>xt!==Ee)),children:"×"})]},Ee)),K.length===0&&l.jsx("span",{className:"text-sm text-gray-500",children:"Chưa có mục nào"})]}),H.excludes&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.excludes})]}),l.jsxs("div",{children:[l.jsxs(Se,{htmlFor:"terms",children:["Điều khoản ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"mt-2 h-[200px] ckeditor-container",children:l.jsx(zk,{data:s.terms||"",onChange:he=>{o(Ee=>({...Ee,terms:he}))},baseApiUrl:ne,authToken:te})}),H.terms&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.terms})]})]})}),l.jsx(zf,{value:"settings",className:"space-y-4",children:l.jsxs("div",{className:"space-y-4",children:[!d&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Se,{htmlFor:"tourGuideId",children:["Hướng dẫn viên ",l.jsx("span",{className:"text-red-500",children:"*"})]}),fe?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Đang tải danh sách hướng dẫn viên..."})]}):l.jsxs(Cn,{value:s.tourGuideId||"",onValueChange:he=>o(Ee=>({...Ee,tourGuideId:he})),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn hướng dẫn viên"})}),l.jsx(_n,{children:ve.map(he=>l.jsxs(ze,{value:he.id,children:[he.firstName," ",he.lastName," (",he.email,")"]},he.id))})]}),H.tourGuideId&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:H.tourGuideId})]}),d?l.jsx("div",{className:"text-sm text-gray-500",children:"Yêu cầu nổi bật sẽ do quản trị viên phê duyệt."}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(Se,{htmlFor:"isFeatured",children:"Tour nổi bật"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Hiển thị tour này ở vị trí nổi bật"})]}),l.jsx(Ml,{id:"isFeatured",checked:s.isFeatured,onCheckedChange:he=>o(Ee=>({...Ee,isFeatured:he}))})]}),l.jsx(Xf,{}),l.jsx("div",{className:"text-sm text-gray-500",children:l.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[l.jsx("li",{children:"Các trường có dấu * là bắt buộc"}),l.jsx("li",{children:'Tour sẽ được tạo với trạng thái "Chờ duyệt"'})]})})]})})]}),l.jsxs("div",{className:"mt-0  bottom-0 bg-white border-t pt-3 flex justify-end space-x-2",children:[t&&l.jsx(Ce,{variant:"outline",onClick:t,children:"Hủy"}),l.jsx(Ce,{onClick:()=>{if(!Z()){const he=Object.values(H);he.length>0&&Ae.error(`Vui lòng điền đầy đủ thông tin: ${he.join(", ")}`);return}e({...s,includes:JSON.stringify(D),excludes:JSON.stringify(K),itinerary:JSON.stringify(O)})},children:i||"Tạo Tour"})]})]})},HGe=()=>{const[n,e]=S.useState(!0),{user:t}=Zr(),r=li(),i=(t==null?void 0:t.role)==="TourGuide",s=(t==null?void 0:t.role)==="Admin",[o,a]=S.useState([]),[c,u]=S.useState([]),[d,h]=S.useState(0),[f,p]=S.useState(1),[x]=S.useState(10),[y,b]=S.useState({page:1,pageSize:10,sortBy:"createdat",sortDirection:"desc"}),[_,C]=S.useState(!1),[k,T]=S.useState(!1),[E,N]=S.useState(!1),[P,M]=S.useState(null),[O,q]=S.useState(null),[D,F]=S.useState(!1),[K,ee]=S.useState({title:"",description:"",shortDescription:"",location:"",duration:1,maxParticipants:10,price:0,currency:"VND",category:"",images:"",itinerary:"",includes:"",excludes:"",terms:"",isFeatured:!1}),[Y,U]=S.useState([]),[R,z]=S.useState(!1),[W,se]=S.useState([]);S.useEffect(()=>{ne()},[y]),S.useEffect(()=>{(async()=>{try{const ge=await ot(`${Ge()}/api/tourcategories`,{skipAuth:!0});a(ge)}catch(ge){console.error("Failed to load categories:",ge)}})()},[]);const ne=async()=>{try{e(!0);const Z={...y},ge=await wc.getTours(Z);u(ge.tours),h(ge.totalCount),p(ge.page)}catch(Z){console.error("Error loading tours:",Z),Ae.error("Không thể tải danh sách tour")}finally{e(!1)}},te=Z=>{b(ge=>({...ge,searchTerm:Z,page:1}))},H=(Z,ge)=>{b(he=>({...he,[Z]:ge==="all"?void 0:ge,page:1}))},ce=Z=>{b(ge=>({...ge,page:Z}))},pe=async Z=>{try{await wc.deleteTour(Z),Ae.success("Xóa tour thành công"),ne()}catch(ge){console.error("Error deleting tour:",ge),Ae.error("Không thể xóa tour")}},oe=async(Z,ge)=>{try{await wc.updateTourStatus(Z,ge),Ae.success("Cập nhật trạng thái thành công"),ne()}catch(he){console.error("Error updating status:",he),Ae.error("Không thể cập nhật trạng thái")}},ve=()=>{ee({title:"",description:"",shortDescription:"",location:"",duration:1,maxParticipants:10,price:0,currency:"VND",category:"",images:"",itinerary:"",includes:"",excludes:"",terms:"",isFeatured:!1}),M(null),U([]),se([]),z(!1)},be=async Z=>{M(Z),T(!0),F(!0);try{const ge=await wc.getTour(Z.id);q(ge)}catch(ge){console.error("Failed to load tour detail",ge),Ae.error("Không thể tải chi tiết tour"),q(null)}finally{F(!1)}},fe=Z=>{M(Z),N(!0)},we=Z=>{switch((Ee=>{if(typeof Ee=="number")return Ee===2?"approved":Ee===1?"pendingapproval":Ee===3?"rejected":"other";if(typeof Ee=="string"){const Be=Ee.toLowerCase();return Be==="approved"?"approved":Be==="pendingapproval"||Be==="pending_approval"||Be==="pending"?"pendingapproval":Be==="rejected"?"rejected":"other"}return"other"})(Z)){case"approved":return l.jsx(ct,{variant:"default",children:"Đã duyệt"});case"pendingapproval":return l.jsx(ct,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:i?"Chờ admin xác nhận":"Chờ duyệt"});case"rejected":return l.jsx(ct,{variant:"destructive",children:"Từ chối"});default:return l.jsx(ct,{variant:"secondary",children:"Khác"})}},ue=Math.ceil(d/x);return l.jsx(Ns,{children:l.jsxs("div",{className:"max-w-9xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý Tour"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Quản lý tất cả tour trên nền tảng"})]}),l.jsxs(tt,{className:"mb-6",children:[l.jsx(dt,{children:l.jsx(pt,{children:"Bộ lọc và Tìm kiếm"})}),l.jsx(nt,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"search",children:"Tìm kiếm"}),l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx(We,{id:"search",placeholder:"Tìm kiếm tour...",className:"pl-10",onChange:Z=>te(Z.target.value)})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"category",children:"Danh mục"}),l.jsxs(Cn,{value:y.category||"all",onValueChange:Z=>H("category",Z==="all"?"":Z),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn danh mục"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),o.map(Z=>l.jsx(ze,{value:Z.code,children:Z.name},Z.id))]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"status",children:"Trạng thái"}),l.jsxs(Cn,{onValueChange:Z=>H("status",Z),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"approved",children:"Đã duyệt"}),l.jsx(ze,{value:"pendingapproval",children:"Chờ duyệt"}),l.jsx(ze,{value:"rejected",children:"Từ chối"})]})]})]}),l.jsx("div",{className:"flex items-end",children:i&&l.jsxs(Qr,{open:_,onOpenChange:C,children:[l.jsx(gS,{asChild:!0,children:l.jsxs(Ce,{className:"w-full",children:[l.jsx(Il,{className:"h-4 w-4 mr-2"}),"Tạo Tour"]})}),l.jsxs(Br,{className:"max-w-[1200px] w-[95vw] h-[90vh] flex flex-col",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Tạo Tour Mới"}),l.jsx(Ma,{children:"Điền thông tin để tạo tour mới"})]}),l.jsx(fZ,{submitLabel:"Tạo Tour",onCancel:()=>C(!1),onUploadImages:async Z=>{localStorage.getItem("accessToken");const ge=new FormData;return Z.forEach(Ee=>ge.append("files",Ee)),(await xU(`${Ge()}/api/media/uploads`,ge)).urls||[]},onSubmit:async Z=>{var ge;try{const he={...Z};(ge=he.imageUrls)!=null&&ge.length&&delete he.images,await wc.createTour(he),Ae.success("Tạo tour thành công"),C(!1),ve(),ne()}catch(he){console.error(he),Ae.error("Không thể tạo tour")}}})]})]})})]})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{children:[l.jsxs(pt,{children:["Danh sách Tour (",d,")"]}),l.jsx(Lg,{children:"Quản lý và theo dõi tất cả tour trên nền tảng"})]}),l.jsxs(nt,{children:[l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Tên Tour"}),l.jsx(Ot,{children:"Hướng dẫn viên"}),l.jsx(Ot,{children:"Địa điểm"}),l.jsx(Ot,{children:"Giá"}),l.jsx(Ot,{children:"Đặt tour & Lịch trình"}),l.jsx(Ot,{children:"Đánh giá & Số lượng"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Hành động"})]})}),l.jsx(Xu,{children:n?l.jsx(ur,{children:l.jsxs(wt,{colSpan:8,className:"text-center py-8",children:[l.jsx(Og,{className:"h-6 w-6 animate-spin mx-auto"}),l.jsx("p",{className:"mt-2 text-gray-500",children:"Đang tải dữ liệu..."})]})}):c.length===0?l.jsx(ur,{children:l.jsx(wt,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Không có tour nào"})}):c.map(Z=>l.jsxs(ur,{children:[l.jsx(wt,{className:"font-medium",children:Z.title}),l.jsx(wt,{children:Z.tourGuideName}),l.jsxs(wt,{children:[Z.provinceName||Z.wardName||Z.location,Z.provinceName&&Z.wardName&&l.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",Z.wardName,")"]})]}),l.jsx(wt,{children:Z.recentAdultPrice?l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium",children:[Z.recentAdultPrice.toLocaleString("vi-VN")," ",Z.currency]}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Từ ",Z.price.toLocaleString("vi-VN")," ",Z.currency]})]}):l.jsxs("span",{children:[Z.price.toLocaleString("vi-VN")," ",Z.currency]})}),l.jsx(wt,{children:l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium",children:[Z.totalBookings," đặt tour"]}),Z.recentDate&&l.jsxs("div",{className:"text-xs text-gray-500",children:["Khởi hành: ",new Date(Z.recentDate).toLocaleDateString("vi-VN")]})]})}),l.jsx(wt,{children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-yellow-500 mr-1",children:"★"}),l.jsx("span",{className:"font-medium",children:Z.averageRating.toFixed(1)}),l.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",Z.totalReviews," đánh giá)"]})]})}),l.jsx(wt,{className:"whitespace-nowrap",children:we(Z.status)}),l.jsx(wt,{children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>fe(Z),children:l.jsx(Ts,{className:"h-4 w-4"})}),i&&l.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>be(Z),children:l.jsx(dh,{className:"h-4 w-4"})}),l.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>{r(`/admin/tours/${Z.id}/availability`)},title:"Lịch trình",children:l.jsx(_m,{className:"h-4 w-4"})}),i&&l.jsxs(Hl,{children:[l.jsx(ux,{asChild:!0,children:l.jsx(Ce,{size:"sm",variant:"outline",children:l.jsx(Sm,{className:"h-4 w-4"})})}),l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xóa tour?"}),l.jsx(Wu,{children:"Hành động này không thể hoàn tác. Tour sẽ bị xóa vĩnh viễn."})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:()=>pe(Z.id),children:"Xóa"})]})]})]}),s&&l.jsx(l.Fragment,{children:(()=>{const ge=(()=>{const he=Z.status;if(typeof he=="number")return he===2?"approved":he===1?"pendingapproval":he===3?"rejected":"other";const Ee=String(he||"").toLowerCase();return Ee==="approved"?"approved":Ee==="pendingapproval"||Ee==="pending_approval"||Ee==="pending"?"pendingapproval":Ee==="rejected"?"rejected":"other"})();return ge==="pendingapproval"?l.jsxs(l.Fragment,{children:[l.jsx(Ce,{size:"sm",variant:"outline",title:"Duyệt","aria-label":"Duyệt",onClick:()=>oe(Z.id,"approved"),children:l.jsx(Fr,{className:"h-4 w-4"})}),l.jsx(Ce,{size:"sm",variant:"outline",title:"Từ chối","aria-label":"Từ chối",onClick:()=>oe(Z.id,"rejected"),children:l.jsx(si,{className:"h-4 w-4"})})]}):ge==="rejected"?l.jsx(Ce,{size:"sm",variant:"outline",title:"Duyệt","aria-label":"Duyệt",onClick:()=>oe(Z.id,"approved"),children:l.jsx(Fr,{className:"h-4 w-4"})}):ge==="approved"?l.jsx(Ce,{size:"sm",variant:"outline",title:"Huỷ duyệt","aria-label":"Huỷ duyệt",onClick:()=>oe(Z.id,"pendingapproval"),children:l.jsx(KC,{className:"h-4 w-4"})}):null})()})]})})]},Z.id))})]}),ue>1&&l.jsxs("div",{className:"flex items-center justify-between mt-4",children:[l.jsxs("p",{className:"text-sm text-gray-500",children:["Hiển thị ",(f-1)*x+1," đến ",Math.min(f*x,d)," trong tổng số ",d," tour"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>ce(f-1),disabled:f===1,children:"Trước"}),l.jsxs("span",{className:"px-3 py-1 text-sm",children:["Trang ",f," / ",ue]}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>ce(f+1),disabled:f===ue,children:"Sau"})]})]})]})]}),i&&l.jsx(Qr,{open:k,onOpenChange:T,children:l.jsxs(Br,{className:"max-w-[1200px] w-[95vw] h-[90vh] flex flex-col",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Chỉnh sửa Tour"}),l.jsx(Ma,{children:"Cập nhật thông tin tour"})]}),D&&l.jsxs("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:[l.jsx(Og,{className:"h-5 w-5 animate-spin mr-2"})," Đang tải chi tiết tour..."]}),!D&&P&&l.jsx(fZ,{submitLabel:"Cập nhật Tour",initial:{title:(O==null?void 0:O.title)??P.title,shortDescription:(O==null?void 0:O.shortDescription)??P.shortDescription,description:(O==null?void 0:O.description)??"",location:(O==null?void 0:O.location)??P.location,duration:(O==null?void 0:O.duration)??P.duration,maxParticipants:(O==null?void 0:O.maxParticipants)??10,price:(O==null?void 0:O.price)??P.price,currency:(O==null?void 0:O.currency)??P.currency,category:(O==null?void 0:O.category)??P.category,imageUrls:(()=>{try{return O!=null&&O.images?JSON.parse(O.images):void 0}catch{return}})(),itinerary:(O==null?void 0:O.itinerary)??"",includes:(O==null?void 0:O.includes)??"",excludes:(O==null?void 0:O.excludes)??"",terms:(O==null?void 0:O.terms)??"",isFeatured:(O==null?void 0:O.isFeatured)??P.isFeatured,provinceCode:(O==null?void 0:O.provinceCode)??(P==null?void 0:P.provinceCode),wardCode:(O==null?void 0:O.wardCode)??(P==null?void 0:P.wardCode)},onCancel:()=>T(!1),onUploadImages:async Z=>{const ge=localStorage.getItem("accessToken"),he=new FormData;Z.forEach(vt=>he.append("files",vt));const Ee=await fetch("https://tourimate.site/api/media/uploads",{method:"POST",headers:ge?{Authorization:`Bearer ${ge}`}:void 0,body:he}),Be=await Ee.json();if(!Ee.ok)throw new Error(Be||Ee.statusText);return Be.urls||[]},onSubmit:async Z=>{if(P)try{const ge={...Z};delete ge.images,await wc.updateTour(P.id,ge),i?Ae.success("Tour đã được cập nhật và gửi lại cho admin xác nhận",{description:"Tour của bạn sẽ được admin kiểm tra và phê duyệt trước khi hiển thị công khai.",duration:5e3}):Ae.success("Cập nhật tour thành công"),T(!1),q(null),ne()}catch(ge){console.error(ge),Ae.error("Không thể cập nhật tour")}}})]})}),l.jsx(Qr,{open:E,onOpenChange:N,children:P&&l.jsx(DGe,{tour:P,onClose:()=>N(!1)})})]})})},WGe=()=>{const[n,e]=S.useState(!0),[t,r]=S.useState([]),[i,s]=S.useState(""),o="https://tourimate.site",a=async()=>{try{e(!0);const x=await(await fetch(`${o}/api/divisions`)).json();r((x||[]).map(y=>({code:y.code??y.Code,name:y.name??y.Name,type:y.type??y.Type,codename:y.codeName??y.CodeName,nameEn:y.nameEn??y.NameEn,parentCode:y.parentCode??y.ParentCode??null})))}catch(p){console.error(p),Ae.error("Không thể tải danh sách đơn vị hành chính")}finally{e(!1)}},[c,u]=S.useState(!1),d=async()=>{try{u(!0);const p=await fetch(`${o}/api/divisions/sync`,{method:"POST"});if(!p.ok)throw new Error(await p.text());Ae.success("Đồng bộ dữ liệu thành công"),await a()}catch(p){console.error(p),Ae.error(p.message||"Đồng bộ thất bại")}finally{u(!1)}};S.useEffect(()=>{a()},[]);const h=t.filter(p=>p.parentCode==null&&(p.name.toLowerCase().includes(i.toLowerCase())||String(p.code).includes(i))),f=p=>t.filter(x=>x.parentCode===p).sort((x,y)=>x.name.localeCompare(y.name));return l.jsx(Ns,{children:l.jsxs("div",{className:"max-w-9xl mx-auto",children:[l.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Đơn vị hành chính"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Quản lý danh sách tỉnh/thành phố để gắn với Tour"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(Ce,{variant:"outline",onClick:a,children:[l.jsx(GC,{className:"h-4 w-4 mr-2"})," Làm mới"]}),l.jsxs(Ce,{onClick:d,disabled:c,children:[c?l.jsx(Og,{className:"h-4 w-4 mr-2 animate-spin"}):l.jsx(Xr,{className:"h-4 w-4 mr-2"})," Đồng bộ từ API"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{children:[l.jsx(pt,{children:"Danh sách Tỉnh/Thành"}),l.jsx(Lg,{children:"Chọn để dùng trong tạo/sửa Tour"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx(We,{placeholder:"Tìm theo tên hoặc mã",className:"max-w-sm",value:i,onChange:p=>s(p.target.value)})}),l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Mã"}),l.jsx(Ot,{children:"Tên"}),l.jsx(Ot,{children:"Số phường/xã"})]})}),l.jsx(Xu,{children:n?l.jsx(ur,{children:l.jsx(wt,{colSpan:4,className:"text-center py-8",children:l.jsx(Og,{className:"h-6 w-6 animate-spin mx-auto"})})}):h.length===0?l.jsx(ur,{children:l.jsx(wt,{colSpan:4,className:"text-center py-8 text-gray-500",children:"Không có dữ liệu"})}):h.map(p=>l.jsxs(l.Fragment,{children:[l.jsxs(ur,{children:[l.jsx(wt,{className:"align-top",children:p.code}),l.jsx(wt,{className:"align-top font-medium",children:p.name}),l.jsx(wt,{className:"align-top",children:f(p.code).length})]},p.code),f(p.code).map(x=>l.jsxs(ur,{children:[l.jsx(wt,{className:"pl-8 text-gray-500",children:x.code}),l.jsxs(wt,{className:"pl-8 text-gray-600",children:["↳ ",x.name]}),l.jsx(wt,{className:"text-gray-400",children:"Phường/Xã"})]},`${p.code}-${x.code}`))]}))})]})]})]})]})})};function qGe(){const[n,e]=S.useState([]),[t,r]=S.useState(!0),[i,s]=S.useState(""),[o,a]=S.useState(!1),[c,u]=S.useState(!1),[d,h]=S.useState(null),[f,p]=S.useState({name:"",code:"",description:"",icon:"",sortOrder:0,isActive:!0}),x=async()=>{try{r(!0);const E=await ot(`${Ge()}/api/tourcategories`);e(E)}catch(E){console.error("Error loading categories:",E),Ae.error("Không thể tải danh sách danh mục")}finally{r(!1)}};S.useEffect(()=>{x()},[]);const y=n.filter(E=>{var N;return E.name.toLowerCase().includes(i.toLowerCase())||E.code.toLowerCase().includes(i.toLowerCase())||((N=E.description)==null?void 0:N.toLowerCase().includes(i.toLowerCase()))}),b=async()=>{var E;if(!((E=f.name)!=null&&E.trim())){Ae.error("Vui lòng nhập Tên danh mục");return}try{const N=await ot(`${Ge()}/api/tourcategories`,{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json"}});e(P=>[...P,N]),a(!1),k(),Ae.success("Tạo danh mục thành công")}catch(N){console.error("Error creating category:",N),Ae.error("Không thể tạo danh mục")}},_=async()=>{var E;if(d){if(!((E=f.name)!=null&&E.trim())){Ae.error("Vui lòng nhập Tên danh mục");return}try{const N={name:f.name,code:f.code,description:f.description,icon:f.icon,sortOrder:f.sortOrder},P=await ot(`${Ge()}/api/tourcategories/${d.id}`,{method:"PUT",body:JSON.stringify(N),headers:{"Content-Type":"application/json"}});e(M=>M.map(O=>O.id===d.id?P:O)),u(!1),h(null),k(),Ae.success("Cập nhật danh mục thành công")}catch(N){console.error("Error updating category:",N),Ae.error("Không thể cập nhật danh mục")}}},C=async E=>{if(confirm("Bạn có chắc chắn muốn xóa danh mục này?"))try{await ot(`${Ge()}/api/tourcategories/${E}`,{method:"DELETE"}),e(N=>N.filter(P=>P.id!==E)),Ae.success("Xóa danh mục thành công")}catch(N){console.error("Error deleting category:",N),Ae.error("Không thể xóa danh mục")}},k=()=>{p({name:"",code:"",description:"",icon:"",sortOrder:0,isActive:!0})},T=E=>{h(E),p({name:E.name,code:E.code,description:E.description||"",icon:E.icon||"",sortOrder:E.sortOrder,isActive:E.isActive}),u(!0)};return l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý danh mục tour"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Quản lý các danh mục tour trong hệ thống"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Ce,{onClick:x,variant:"outline",size:"sm",children:[l.jsx(GC,{className:"w-4 h-4 mr-2"}),"Làm mới"]}),l.jsxs(Qr,{open:o,onOpenChange:a,children:[l.jsx(gS,{asChild:!0,children:l.jsxs(Ce,{children:[l.jsx(Il,{className:"w-4 h-4 mr-2"}),"Thêm danh mục"]})}),l.jsxs(Br,{children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Thêm danh mục tour mới"}),l.jsx(Ma,{children:"Tạo danh mục tour mới cho hệ thống"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"name",children:"Tên danh mục"}),l.jsx(We,{id:"name",value:f.name,onChange:E=>p({...f,name:E.target.value}),placeholder:"Nhập tên danh mục"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"code",children:"Mã danh mục"}),l.jsx(We,{id:"code",value:f.code,onChange:E=>p({...f,code:E.target.value}),placeholder:"Nhập mã danh mục (vd: adventure)"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"description",children:"Mô tả"}),l.jsx(is,{id:"description",value:f.description,onChange:E=>p({...f,description:E.target.value}),placeholder:"Nhập mô tả danh mục"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"sortOrder",children:"Thứ tự sắp xếp"}),l.jsx(We,{id:"sortOrder",type:"number",value:f.sortOrder,onChange:E=>p({...f,sortOrder:parseInt(E.target.value)||0})})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{id:"isActive",checked:f.isActive,onCheckedChange:E=>p({...f,isActive:E})}),l.jsx(Se,{htmlFor:"isActive",children:"Kích hoạt"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>a(!1),children:"Hủy"}),l.jsx(Ce,{onClick:b,children:"Tạo danh mục"})]})]})]})]})]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx(pt,{children:"Danh sách danh mục tour"}),l.jsxs(Lg,{children:["Tổng cộng ",y.length," danh mục"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(as,{className:"w-4 h-4 text-gray-400"}),l.jsx(We,{placeholder:"Tìm kiếm danh mục...",value:i,onChange:E=>s(E.target.value),className:"w-64"})]})]})}),l.jsx(nt,{children:t?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Tên danh mục"}),l.jsx(Ot,{children:"Mã danh mục"}),l.jsx(Ot,{children:"Mô tả"}),l.jsx(Ot,{children:"Thứ tự"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Ngày tạo"}),l.jsx(Ot,{children:"Thao tác"})]})}),l.jsx(Xu,{children:y.map(E=>l.jsxs(ur,{children:[l.jsx(wt,{className:"font-medium",children:E.name}),l.jsx(wt,{children:l.jsx(ct,{variant:"secondary",children:E.code})}),l.jsx(wt,{children:E.description||"-"}),l.jsx(wt,{children:E.sortOrder}),l.jsx(wt,{children:l.jsx(ct,{variant:E.isActive?"default":"secondary",children:E.isActive?"Kích hoạt":"Tắt"})}),l.jsx(wt,{children:new Date(E.createdAt).toLocaleDateString("vi-VN")}),l.jsx(wt,{children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>T(E),children:l.jsx(dh,{className:"w-4 h-4"})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>C(E.id),children:l.jsx(Sm,{className:"w-4 h-4"})})]})})]},E.id))})]})})]}),l.jsx(Qr,{open:c,onOpenChange:u,children:l.jsxs(Br,{children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Chỉnh sửa danh mục tour"}),l.jsx(Ma,{children:"Cập nhật thông tin danh mục tour"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-name",children:"Tên danh mục"}),l.jsx(We,{id:"edit-name",value:f.name,onChange:E=>p({...f,name:E.target.value}),placeholder:"Nhập tên danh mục"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-code",children:"Mã danh mục"}),l.jsx(We,{id:"edit-code",value:f.code,onChange:E=>p({...f,code:E.target.value}),placeholder:"Nhập mã danh mục"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-description",children:"Mô tả"}),l.jsx(is,{id:"edit-description",value:f.description,onChange:E=>p({...f,description:E.target.value}),placeholder:"Nhập mô tả danh mục"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-sortOrder",children:"Thứ tự sắp xếp"}),l.jsx(We,{id:"edit-sortOrder",type:"number",value:f.sortOrder,onChange:E=>p({...f,sortOrder:parseInt(E.target.value)||0})})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{id:"edit-isActive",checked:f.isActive,onCheckedChange:E=>p({...f,isActive:E})}),l.jsx(Se,{htmlFor:"edit-isActive",children:"Kích hoạt"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>u(!1),children:"Hủy"}),l.jsx(Ce,{onClick:_,children:"Cập nhật"})]})]})]})})]})})}function GGe(n){return Object.prototype.toString.call(n)==="[object Object]"}function mZ(n){return GGe(n)||Array.isArray(n)}function KGe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function zz(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;const i=JSON.stringify(Object.keys(n.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return i!==s?!1:t.every(o=>{const a=n[o],c=e[o];return typeof a=="function"?`${a}`==`${c}`:!mZ(a)||!mZ(c)?a===c:zz(a,c)})}function pZ(n){return n.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function YGe(n,e){if(n.length!==e.length)return!1;const t=pZ(n),r=pZ(e);return t.every((i,s)=>{const o=r[s];return zz(i,o)})}function Hz(n){return typeof n=="number"}function A$(n){return typeof n=="string"}function XM(n){return typeof n=="boolean"}function gZ(n){return Object.prototype.toString.call(n)==="[object Object]"}function oi(n){return Math.abs(n)}function Wz(n){return Math.sign(n)}function RC(n,e){return oi(n-e)}function XGe(n,e){if(n===0||e===0||oi(n)<=oi(e))return 0;const t=RC(oi(n),oi(e));return oi(t/n)}function JGe(n){return Math.round(n*100)/100}function wE(n){return _E(n).map(Number)}function Au(n){return n[MA(n)]}function MA(n){return Math.max(0,n.length-1)}function qz(n,e){return e===MA(n)}function vZ(n,e=0){return Array.from(Array(n),(t,r)=>e+r)}function _E(n){return Object.keys(n)}function Zge(n,e){return[n,e].reduce((t,r)=>(_E(r).forEach(i=>{const s=t[i],o=r[i],a=gZ(s)&&gZ(o);t[i]=a?Zge(s,o):o}),t),{})}function N$(n,e){return typeof e.MouseEvent<"u"&&n instanceof e.MouseEvent}function QGe(n,e){const t={start:r,center:i,end:s};function r(){return 0}function i(c){return s(c)/2}function s(c){return e-c}function o(c,u){return A$(n)?t[n](c):n(e,c,u)}return{measure:o}}function SE(){let n=[];function e(i,s,o,a={passive:!0}){let c;if("addEventListener"in i)i.addEventListener(s,o,a),c=()=>i.removeEventListener(s,o,a);else{const u=i;u.addListener(o),c=()=>u.removeListener(o)}return n.push(c),r}function t(){n=n.filter(i=>i())}const r={add:e,clear:t};return r}function ZGe(n,e,t,r){const i=SE(),s=1e3/60;let o=null,a=0,c=0;function u(){i.add(n,"visibilitychange",()=>{n.hidden&&x()})}function d(){p(),i.clear()}function h(b){if(!c)return;o||(o=b,t(),t());const _=b-o;for(o=b,a+=_;a>=s;)t(),a-=s;const C=a/s;r(C),c&&(c=e.requestAnimationFrame(h))}function f(){c||(c=e.requestAnimationFrame(h))}function p(){e.cancelAnimationFrame(c),o=null,a=0,c=0}function x(){o=null,a=0}return{init:u,destroy:d,start:f,stop:p,update:t,render:r}}function eKe(n,e){const t=e==="rtl",r=n==="y",i=r?"y":"x",s=r?"x":"y",o=!r&&t?-1:1,a=d(),c=h();function u(x){const{height:y,width:b}=x;return r?y:b}function d(){return r?"top":t?"right":"left"}function h(){return r?"bottom":t?"left":"right"}function f(x){return x*o}return{scroll:i,cross:s,startEdge:a,endEdge:c,measureSize:u,direction:f}}function ex(n=0,e=0){const t=oi(n-e);function r(u){return u<n}function i(u){return u>e}function s(u){return r(u)||i(u)}function o(u){return s(u)?r(u)?n:e:u}function a(u){return t?u-t*Math.ceil((u-e)/t):u}return{length:t,max:e,min:n,constrain:o,reachedAny:s,reachedMax:i,reachedMin:r,removeOffset:a}}function eve(n,e,t){const{constrain:r}=ex(0,n),i=n+1;let s=o(e);function o(f){return t?oi((i+f)%i):r(f)}function a(){return s}function c(f){return s=o(f),h}function u(f){return d().set(a()+f)}function d(){return eve(n,a(),t)}const h={get:a,set:c,add:u,clone:d};return h}function tKe(n,e,t,r,i,s,o,a,c,u,d,h,f,p,x,y,b,_,C){const{cross:k,direction:T}=n,E=["INPUT","SELECT","TEXTAREA"],N={passive:!1},P=SE(),M=SE(),O=ex(50,225).constrain(p.measure(20)),q={mouse:300,touch:400},D={mouse:500,touch:600},F=x?43:25;let K=!1,ee=0,Y=0,U=!1,R=!1,z=!1,W=!1;function se(Z){if(!C)return;function ge(Ee){(XM(C)||C(Z,Ee))&&oe(Ee)}const he=e;P.add(he,"dragstart",Ee=>Ee.preventDefault(),N).add(he,"touchmove",()=>{},N).add(he,"touchend",()=>{}).add(he,"touchstart",ge).add(he,"mousedown",ge).add(he,"touchcancel",be).add(he,"contextmenu",be).add(he,"click",fe,!0)}function ne(){P.clear(),M.clear()}function te(){const Z=W?t:e;M.add(Z,"touchmove",ve,N).add(Z,"touchend",be).add(Z,"mousemove",ve,N).add(Z,"mouseup",be)}function H(Z){const ge=Z.nodeName||"";return E.includes(ge)}function ce(){return(x?D:q)[W?"mouse":"touch"]}function pe(Z,ge){const he=h.add(Wz(Z)*-1),Ee=d.byDistance(Z,!x).distance;return x||oi(Z)<O?Ee:b&&ge?Ee*.5:d.byIndex(he.get(),0).distance}function oe(Z){const ge=N$(Z,r);W=ge,z=x&&ge&&!Z.buttons&&K,K=RC(i.get(),o.get())>=2,!(ge&&Z.button!==0)&&(H(Z.target)||(U=!0,s.pointerDown(Z),u.useFriction(0).useDuration(0),i.set(o),te(),ee=s.readPoint(Z),Y=s.readPoint(Z,k),f.emit("pointerDown")))}function ve(Z){if(!N$(Z,r)&&Z.touches.length>=2)return be(Z);const he=s.readPoint(Z),Ee=s.readPoint(Z,k),Be=RC(he,ee),vt=RC(Ee,Y);if(!R&&!W&&(!Z.cancelable||(R=Be>vt,!R)))return be(Z);const xt=s.pointerMove(Z);Be>y&&(z=!0),u.useFriction(.3).useDuration(.75),a.start(),i.add(T(xt)),Z.preventDefault()}function be(Z){const he=d.byDistance(0,!1).index!==h.get(),Ee=s.pointerUp(Z)*ce(),Be=pe(T(Ee),he),vt=XGe(Ee,Be),xt=F-10*vt,Rt=_+vt/50;R=!1,U=!1,M.clear(),u.useDuration(xt).useFriction(Rt),c.distance(Be,!x),W=!1,f.emit("pointerUp")}function fe(Z){z&&(Z.stopPropagation(),Z.preventDefault(),z=!1)}function we(){return U}return{init:se,destroy:ne,pointerDown:we}}function nKe(n,e){let r,i;function s(h){return h.timeStamp}function o(h,f){const x=`client${(f||n.scroll)==="x"?"X":"Y"}`;return(N$(h,e)?h:h.touches[0])[x]}function a(h){return r=h,i=h,o(h)}function c(h){const f=o(h)-o(i),p=s(h)-s(r)>170;return i=h,p&&(r=h),f}function u(h){if(!r||!i)return 0;const f=o(i)-o(r),p=s(h)-s(r),x=s(h)-s(i)>170,y=f/p;return p&&!x&&oi(y)>.1?y:0}return{pointerDown:a,pointerMove:c,pointerUp:u,readPoint:o}}function rKe(){function n(t){const{offsetTop:r,offsetLeft:i,offsetWidth:s,offsetHeight:o}=t;return{top:r,right:i+s,bottom:r+o,left:i,width:s,height:o}}return{measure:n}}function iKe(n){function e(r){return n*(r/100)}return{measure:e}}function sKe(n,e,t,r,i,s,o){const a=[n].concat(r);let c,u,d=[],h=!1;function f(b){return i.measureSize(o.measure(b))}function p(b){if(!s)return;u=f(n),d=r.map(f);function _(C){for(const k of C){if(h)return;const T=k.target===n,E=r.indexOf(k.target),N=T?u:d[E],P=f(T?n:r[E]);if(oi(P-N)>=.5){b.reInit(),e.emit("resize");break}}}c=new ResizeObserver(C=>{(XM(s)||s(b,C))&&_(C)}),t.requestAnimationFrame(()=>{a.forEach(C=>c.observe(C))})}function x(){h=!0,c&&c.disconnect()}return{init:p,destroy:x}}function oKe(n,e,t,r,i,s){let o=0,a=0,c=i,u=s,d=n.get(),h=0;function f(){const N=r.get()-n.get(),P=!c;let M=0;return P?(o=0,t.set(r),n.set(r),M=N):(t.set(n),o+=N/c,o*=u,d+=o,n.add(o),M=d-h),a=Wz(M),h=d,E}function p(){const N=r.get()-e.get();return oi(N)<.001}function x(){return c}function y(){return a}function b(){return o}function _(){return k(i)}function C(){return T(s)}function k(N){return c=N,E}function T(N){return u=N,E}const E={direction:y,duration:x,velocity:b,seek:f,settled:p,useBaseFriction:C,useBaseDuration:_,useFriction:T,useDuration:k};return E}function aKe(n,e,t,r,i){const s=i.measure(10),o=i.measure(50),a=ex(.1,.99);let c=!1;function u(){return!(c||!n.reachedAny(t.get())||!n.reachedAny(e.get()))}function d(p){if(!u())return;const x=n.reachedMin(e.get())?"min":"max",y=oi(n[x]-e.get()),b=t.get()-e.get(),_=a.constrain(y/o);t.subtract(b*_),!p&&oi(b)<s&&(t.set(n.constrain(t.get())),r.useDuration(25).useBaseFriction())}function h(p){c=!p}return{shouldConstrain:u,constrain:d,toggleActive:h}}function lKe(n,e,t,r,i){const s=ex(-e+n,0),o=h(),a=d(),c=f();function u(x,y){return RC(x,y)<=1}function d(){const x=o[0],y=Au(o),b=o.lastIndexOf(x),_=o.indexOf(y)+1;return ex(b,_)}function h(){return t.map((x,y)=>{const{min:b,max:_}=s,C=s.constrain(x),k=!y,T=qz(t,y);return k?_:T||u(b,C)?b:u(_,C)?_:C}).map(x=>parseFloat(x.toFixed(3)))}function f(){if(e<=n+i)return[s.max];if(r==="keepSnaps")return o;const{min:x,max:y}=a;return o.slice(x,y)}return{snapsContained:c,scrollContainLimit:a}}function cKe(n,e,t){const r=e[0],i=t?r-n:Au(e);return{limit:ex(i,r)}}function uKe(n,e,t,r){const s=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:c}=ex(s,o);function u(f){return f===1?c(t.get()):f===-1?a(t.get()):!1}function d(f){if(!u(f))return;const p=n*(f*-1);r.forEach(x=>x.add(p))}return{loop:d}}function dKe(n){const{max:e,length:t}=n;function r(s){const o=s-e;return t?o/-t:0}return{get:r}}function hKe(n,e,t,r,i){const{startEdge:s,endEdge:o}=n,{groupSlides:a}=i,c=h().map(e.measure),u=f(),d=p();function h(){return a(r).map(y=>Au(y)[o]-y[0][s]).map(oi)}function f(){return r.map(y=>t[s]-y[s]).map(y=>-oi(y))}function p(){return a(u).map(y=>y[0]).map((y,b)=>y+c[b])}return{snaps:u,snapsAligned:d}}function fKe(n,e,t,r,i,s){const{groupSlides:o}=i,{min:a,max:c}=r,u=d();function d(){const f=o(s),p=!n||e==="keepSnaps";return t.length===1?[s]:p?f:f.slice(a,c).map((x,y,b)=>{const _=!y,C=qz(b,y);if(_){const k=Au(b[0])+1;return vZ(k)}if(C){const k=MA(s)-Au(b)[0]+1;return vZ(k,Au(b)[0])}return x})}return{slideRegistry:u}}function mKe(n,e,t,r,i){const{reachedAny:s,removeOffset:o,constrain:a}=r;function c(x){return x.concat().sort((y,b)=>oi(y)-oi(b))[0]}function u(x){const y=n?o(x):a(x),b=e.map((C,k)=>({diff:d(C-y,0),index:k})).sort((C,k)=>oi(C.diff)-oi(k.diff)),{index:_}=b[0];return{index:_,distance:y}}function d(x,y){const b=[x,x+t,x-t];if(!n)return x;if(!y)return c(b);const _=b.filter(C=>Wz(C)===y);return _.length?c(_):Au(b)-t}function h(x,y){const b=e[x]-i.get(),_=d(b,y);return{index:x,distance:_}}function f(x,y){const b=i.get()+x,{index:_,distance:C}=u(b),k=!n&&s(b);if(!y||k)return{index:_,distance:x};const T=e[_]-C,E=x+d(T,0);return{index:_,distance:E}}return{byDistance:f,byIndex:h,shortcut:d}}function pKe(n,e,t,r,i,s,o){function a(h){const f=h.distance,p=h.index!==e.get();s.add(f),f&&(r.duration()?n.start():(n.update(),n.render(1),n.update())),p&&(t.set(e.get()),e.set(h.index),o.emit("select"))}function c(h,f){const p=i.byDistance(h,f);a(p)}function u(h,f){const p=e.clone().set(h),x=i.byIndex(p.get(),f);a(x)}return{distance:c,index:u}}function gKe(n,e,t,r,i,s,o,a){const c={passive:!0,capture:!0};let u=0;function d(p){if(!a)return;function x(y){if(new Date().getTime()-u>10)return;o.emit("slideFocusStart"),n.scrollLeft=0;const C=t.findIndex(k=>k.includes(y));Hz(C)&&(i.useDuration(0),r.index(C,0),o.emit("slideFocus"))}s.add(document,"keydown",h,!1),e.forEach((y,b)=>{s.add(y,"focus",_=>{(XM(a)||a(p,_))&&x(b)},c)})}function h(p){p.code==="Tab"&&(u=new Date().getTime())}return{init:d}}function Hk(n){let e=n;function t(){return e}function r(c){e=o(c)}function i(c){e+=o(c)}function s(c){e-=o(c)}function o(c){return Hz(c)?c:c.get()}return{get:t,set:r,add:i,subtract:s}}function tve(n,e){const t=n.scroll==="x"?o:a,r=e.style;let i=null,s=!1;function o(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function c(f){if(s)return;const p=JGe(n.direction(f));p!==i&&(r.transform=t(p),i=p)}function u(f){s=!f}function d(){s||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:d,to:c,toggleActive:u}}function vKe(n,e,t,r,i,s,o,a,c){const d=wE(i),h=wE(i).reverse(),f=_().concat(C());function p(P,M){return P.reduce((O,q)=>O-i[q],M)}function x(P,M){return P.reduce((O,q)=>p(O,M)>0?O.concat([q]):O,[])}function y(P){return s.map((M,O)=>({start:M-r[O]+.5+P,end:M+e-.5+P}))}function b(P,M,O){const q=y(M);return P.map(D=>{const F=O?0:-t,K=O?t:0,ee=O?"end":"start",Y=q[D][ee];return{index:D,loopPoint:Y,slideLocation:Hk(-1),translate:tve(n,c[D]),target:()=>a.get()>Y?F:K}})}function _(){const P=o[0],M=x(h,P);return b(M,t,!1)}function C(){const P=e-o[0]-1,M=x(d,P);return b(M,-t,!0)}function k(){return f.every(({index:P})=>{const M=d.filter(O=>O!==P);return p(M,e)<=.1})}function T(){f.forEach(P=>{const{target:M,translate:O,slideLocation:q}=P,D=M();D!==q.get()&&(O.to(D),q.set(D))})}function E(){f.forEach(P=>P.translate.clear())}return{canLoop:k,clear:E,loop:T,loopPoints:f}}function yKe(n,e,t){let r,i=!1;function s(c){if(!t)return;function u(d){for(const h of d)if(h.type==="childList"){c.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(d=>{i||(XM(t)||t(c,d))&&u(d)}),r.observe(n,{childList:!0})}function o(){r&&r.disconnect(),i=!0}return{init:s,destroy:o}}function xKe(n,e,t,r){const i={};let s=null,o=null,a,c=!1;function u(){a=new IntersectionObserver(x=>{c||(x.forEach(y=>{const b=e.indexOf(y.target);i[b]=y}),s=null,o=null,t.emit("slidesInView"))},{root:n.parentElement,threshold:r}),e.forEach(x=>a.observe(x))}function d(){a&&a.disconnect(),c=!0}function h(x){return _E(i).reduce((y,b)=>{const _=parseInt(b),{isIntersecting:C}=i[_];return(x&&C||!x&&!C)&&y.push(_),y},[])}function f(x=!0){if(x&&s)return s;if(!x&&o)return o;const y=h(x);return x&&(s=y),x||(o=y),y}return{init:u,destroy:d,get:f}}function bKe(n,e,t,r,i,s){const{measureSize:o,startEdge:a,endEdge:c}=n,u=t[0]&&i,d=x(),h=y(),f=t.map(o),p=b();function x(){if(!u)return 0;const C=t[0];return oi(e[a]-C[a])}function y(){if(!u)return 0;const C=s.getComputedStyle(Au(r));return parseFloat(C.getPropertyValue(`margin-${c}`))}function b(){return t.map((C,k,T)=>{const E=!k,N=qz(T,k);return E?f[k]+d:N?f[k]+h:T[k+1][a]-C[a]}).map(oi)}return{slideSizes:f,slideSizesWithGaps:p,startGap:d,endGap:h}}function wKe(n,e,t,r,i,s,o,a,c){const{startEdge:u,endEdge:d,direction:h}=n,f=Hz(t);function p(_,C){return wE(_).filter(k=>k%C===0).map(k=>_.slice(k,k+C))}function x(_){return _.length?wE(_).reduce((C,k,T)=>{const E=Au(C)||0,N=E===0,P=k===MA(_),M=i[u]-s[E][u],O=i[u]-s[k][d],q=!r&&N?h(o):0,D=!r&&P?h(a):0,F=oi(O-D-(M+q));return T&&F>e+c&&C.push(k),P&&C.push(_.length),C},[]).map((C,k,T)=>{const E=Math.max(T[k-1]||0);return _.slice(E,C)}):[]}function y(_){return f?p(_,t):x(_)}return{groupSlides:y}}function _Ke(n,e,t,r,i,s,o){const{align:a,axis:c,direction:u,startIndex:d,loop:h,duration:f,dragFree:p,dragThreshold:x,inViewThreshold:y,slidesToScroll:b,skipSnaps:_,containScroll:C,watchResize:k,watchSlides:T,watchDrag:E,watchFocus:N}=s,P=2,M=rKe(),O=M.measure(e),q=t.map(M.measure),D=eKe(c,u),F=D.measureSize(O),K=iKe(F),ee=QGe(a,F),Y=!h&&!!C,U=h||!!C,{slideSizes:R,slideSizesWithGaps:z,startGap:W,endGap:se}=bKe(D,O,q,t,U,i),ne=wKe(D,F,b,h,O,q,W,se,P),{snaps:te,snapsAligned:H}=hKe(D,ee,O,q,ne),ce=-Au(te)+Au(z),{snapsContained:pe,scrollContainLimit:oe}=lKe(F,ce,H,C,P),ve=Y?pe:H,{limit:be}=cKe(ce,ve,h),fe=eve(MA(ve),d,h),we=fe.clone(),ue=wE(t),Z=({dragHandler:Hn,scrollBody:zr,scrollBounds:Js,options:{loop:ui}})=>{ui||Js.constrain(Hn.pointerDown()),zr.seek()},ge=({scrollBody:Hn,translate:zr,location:Js,offsetLocation:ui,previousLocation:qi,scrollLooper:ql,slideLooper:Gi,dragHandler:Wa,animation:Qo,eventHandler:di,scrollBounds:Zo,options:{loop:us}},fn)=>{const hi=Hn.settled(),qa=!Zo.shouldConstrain(),$t=us?hi:hi&&qa,sn=$t&&!Wa.pointerDown();sn&&Qo.stop();const An=Js.get()*fn+qi.get()*(1-fn);ui.set(An),us&&(ql.loop(Hn.direction()),Gi.loop()),zr.to(ui.get()),sn&&di.emit("settle"),$t||di.emit("scroll")},he=ZGe(r,i,()=>Z(Pn),Hn=>ge(Pn,Hn)),Ee=.68,Be=ve[fe.get()],vt=Hk(Be),xt=Hk(Be),Rt=Hk(Be),xe=Hk(Be),Ne=oKe(vt,Rt,xt,xe,f,Ee),Oe=mKe(h,ve,ce,be,xe),qe=pKe(he,fe,we,Ne,Oe,xe,o),Ze=dKe(be),Ye=SE(),ht=xKe(e,t,o,y),{slideRegistry:Bt}=fKe(Y,C,ve,oe,ne,ue),Jt=gKe(n,t,Bt,qe,Ne,Ye,o,N),Pn={ownerDocument:r,ownerWindow:i,eventHandler:o,containerRect:O,slideRects:q,animation:he,axis:D,dragHandler:tKe(D,n,r,i,xe,nKe(D,i),vt,he,qe,Ne,Oe,fe,o,K,p,x,_,Ee,E),eventStore:Ye,percentOfView:K,index:fe,indexPrevious:we,limit:be,location:vt,offsetLocation:Rt,previousLocation:xt,options:s,resizeHandler:sKe(e,o,i,t,D,k,M),scrollBody:Ne,scrollBounds:aKe(be,Rt,xe,Ne,K),scrollLooper:uKe(ce,be,Rt,[vt,Rt,xt,xe]),scrollProgress:Ze,scrollSnapList:ve.map(Ze.get),scrollSnaps:ve,scrollTarget:Oe,scrollTo:qe,slideLooper:vKe(D,F,ce,R,z,te,ve,Rt,t),slideFocus:Jt,slidesHandler:yKe(e,o,T),slidesInView:ht,slideIndexes:ue,slideRegistry:Bt,slidesToScroll:ne,target:xe,translate:tve(D,e)};return Pn}function SKe(){let n={},e;function t(u){e=u}function r(u){return n[u]||[]}function i(u){return r(u).forEach(d=>d(e,u)),c}function s(u,d){return n[u]=r(u).concat([d]),c}function o(u,d){return n[u]=r(u).filter(h=>h!==d),c}function a(){n={}}const c={init:t,emit:i,off:o,on:s,clear:a};return c}const kKe={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function CKe(n){function e(s,o){return Zge(s,o||{})}function t(s){const o=s.breakpoints||{},a=_E(o).filter(c=>n.matchMedia(c).matches).map(c=>o[c]).reduce((c,u)=>e(c,u),{});return e(s,a)}function r(s){return s.map(o=>_E(o.breakpoints||{})).reduce((o,a)=>o.concat(a),[]).map(n.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:r}}function EKe(n){let e=[];function t(s,o){return e=o.filter(({options:a})=>n.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(s,n)),o.reduce((a,c)=>Object.assign(a,{[c.name]:c}),{})}function r(){e=e.filter(s=>s.destroy())}return{init:t,destroy:r}}function iO(n,e,t){const r=n.ownerDocument,i=r.defaultView,s=CKe(i),o=EKe(s),a=SE(),c=SKe(),{mergeOptions:u,optionsAtMedia:d,optionsMediaQueries:h}=s,{on:f,off:p,emit:x}=c,y=D;let b=!1,_,C=u(kKe,iO.globalOptions),k=u(C),T=[],E,N,P;function M(){const{container:ue,slides:Z}=k;N=(A$(ue)?n.querySelector(ue):ue)||n.children[0];const he=A$(Z)?N.querySelectorAll(Z):Z;P=[].slice.call(he||N.children)}function O(ue){const Z=_Ke(n,N,P,r,i,ue,c);if(ue.loop&&!Z.slideLooper.canLoop()){const ge=Object.assign({},ue,{loop:!1});return O(ge)}return Z}function q(ue,Z){b||(C=u(C,ue),k=d(C),T=Z||T,M(),_=O(k),h([C,...T.map(({options:ge})=>ge)]).forEach(ge=>a.add(ge,"change",D)),k.active&&(_.translate.to(_.location.get()),_.animation.init(),_.slidesInView.init(),_.slideFocus.init(we),_.eventHandler.init(we),_.resizeHandler.init(we),_.slidesHandler.init(we),_.options.loop&&_.slideLooper.loop(),N.offsetParent&&P.length&&_.dragHandler.init(we),E=o.init(we,T)))}function D(ue,Z){const ge=ne();F(),q(u({startIndex:ge},ue),Z),c.emit("reInit")}function F(){_.dragHandler.destroy(),_.eventStore.clear(),_.translate.clear(),_.slideLooper.clear(),_.resizeHandler.destroy(),_.slidesHandler.destroy(),_.slidesInView.destroy(),_.animation.destroy(),o.destroy(),a.clear()}function K(){b||(b=!0,a.clear(),F(),c.emit("destroy"),c.clear())}function ee(ue,Z,ge){!k.active||b||(_.scrollBody.useBaseFriction().useDuration(Z===!0?0:k.duration),_.scrollTo.index(ue,ge||0))}function Y(ue){const Z=_.index.add(1).get();ee(Z,ue,-1)}function U(ue){const Z=_.index.add(-1).get();ee(Z,ue,1)}function R(){return _.index.add(1).get()!==ne()}function z(){return _.index.add(-1).get()!==ne()}function W(){return _.scrollSnapList}function se(){return _.scrollProgress.get(_.offsetLocation.get())}function ne(){return _.index.get()}function te(){return _.indexPrevious.get()}function H(){return _.slidesInView.get()}function ce(){return _.slidesInView.get(!1)}function pe(){return E}function oe(){return _}function ve(){return n}function be(){return N}function fe(){return P}const we={canScrollNext:R,canScrollPrev:z,containerNode:be,internalEngine:oe,destroy:K,off:p,on:f,emit:x,plugins:pe,previousScrollSnap:te,reInit:y,rootNode:ve,scrollNext:Y,scrollPrev:U,scrollProgress:se,scrollSnapList:W,scrollTo:ee,selectedScrollSnap:ne,slideNodes:fe,slidesInView:H,slidesNotInView:ce};return q(e,t),setTimeout(()=>c.emit("init"),0),we}iO.globalOptions=void 0;function Gz(n={},e=[]){const t=S.useRef(n),r=S.useRef(e),[i,s]=S.useState(),[o,a]=S.useState(),c=S.useCallback(()=>{i&&i.reInit(t.current,r.current)},[i]);return S.useEffect(()=>{zz(t.current,n)||(t.current=n,c())},[n,c]),S.useEffect(()=>{YGe(r.current,e)||(r.current=e,c())},[e,c]),S.useEffect(()=>{if(KGe()&&o){iO.globalOptions=Gz.globalOptions;const u=iO(o,t.current,r.current);return s(u),()=>u.destroy()}else s(void 0)},[o,s]),[a,i]}Gz.globalOptions=void 0;const nve=S.createContext(null);function JM(){const n=S.useContext(nve);if(!n)throw new Error("useCarousel must be used within a <Carousel />");return n}const rve=S.forwardRef(({orientation:n="horizontal",opts:e,setApi:t,plugins:r,className:i,children:s,...o},a)=>{const[c,u]=Gz({...e,axis:n==="horizontal"?"x":"y"},r),[d,h]=S.useState(!1),[f,p]=S.useState(!1),x=S.useCallback(C=>{C&&(h(C.canScrollPrev()),p(C.canScrollNext()))},[]),y=S.useCallback(()=>{u==null||u.scrollPrev()},[u]),b=S.useCallback(()=>{u==null||u.scrollNext()},[u]),_=S.useCallback(C=>{C.key==="ArrowLeft"?(C.preventDefault(),y()):C.key==="ArrowRight"&&(C.preventDefault(),b())},[y,b]);return S.useEffect(()=>{!u||!t||t(u)},[u,t]),S.useEffect(()=>{if(u)return x(u),u.on("reInit",x),u.on("select",x),()=>{u==null||u.off("select",x)}},[u,x]),l.jsx(nve.Provider,{value:{carouselRef:c,api:u,opts:e,orientation:n||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:y,scrollNext:b,canScrollPrev:d,canScrollNext:f},children:l.jsx("div",{ref:a,onKeyDownCapture:_,className:Qe("relative",i),role:"region","aria-roledescription":"carousel",...o,children:s})})});rve.displayName="Carousel";const ive=S.forwardRef(({className:n,...e},t)=>{const{carouselRef:r,orientation:i}=JM();return l.jsx("div",{ref:r,className:"overflow-hidden",children:l.jsx("div",{ref:t,className:Qe("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",n),...e})})});ive.displayName="CarouselContent";const sve=S.forwardRef(({className:n,...e},t)=>{const{orientation:r}=JM();return l.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:Qe("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",n),...e})});sve.displayName="CarouselItem";const ove=S.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:s,scrollPrev:o,canScrollPrev:a}=JM();return l.jsxs(Ce,{ref:i,variant:e,size:t,className:Qe("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!a,onClick:o,...r,children:[l.jsx(rh,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Previous slide"})]})});ove.displayName="CarouselPrevious";const ave=S.forwardRef(({className:n,variant:e="outline",size:t="icon",...r},i)=>{const{orientation:s,scrollNext:o,canScrollNext:a}=JM();return l.jsxs(Ce,{ref:i,variant:e,size:t,className:Qe("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!a,onClick:o,...r,children:[l.jsx(Lae,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Next slide"})]})});ave.displayName="CarouselNext";const Ro=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),j$=[.001,0,0,.001,0,0],V5=1.35,bl={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},kE="pdfjs_internal_editor_",ln={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},jn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},lve={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ds={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},MC={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ti={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Nb={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},DA={ERRORS:0,WARNINGS:1,INFOS:5},E_={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rj={moveTo:0,lineTo:1,curveTo:2,closePath:3},cve={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let QM=DA.WARNINGS;function TKe(n){Number.isInteger(n)&&(QM=n)}function AKe(){return QM}function ZM(n){QM>=DA.INFOS&&console.info(`Info: ${n}`)}function cn(n){QM>=DA.WARNINGS&&console.warn(`Warning: ${n}`)}function xr(n){throw new Error(n)}function In(n,e){n||xr(e)}function NKe(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Kz(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=RKe(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return NKe(r)?r:null}function Yz(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&Kz(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function gn(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const gx=(function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class yZ extends gx{constructor(e,t){super(e,"PasswordException"),this.code=t}}class U5 extends gx{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class sO extends gx{constructor(e){super(e,"InvalidPDFException")}}class CE extends gx{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class jKe extends gx{constructor(e){super(e,"FormatError")}}class mm extends gx{constructor(e){super(e,"AbortException")}}function uve(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&xr("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function LA(n){typeof n!="string"&&xr("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function PKe(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function IKe(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function OKe(){try{return new Function(""),!0}catch{return!1}}class Es{static get isLittleEndian(){return gn(this,"isLittleEndian",IKe())}static get isEvalSupported(){return gn(this,"isEvalSupported",OKe())}static get isOffscreenCanvasSupported(){return gn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return gn(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return gn(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return gn(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const z5=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var nm,TP,P$;class Tt{static makeHexColor(e,t,r){return`#${z5[e]}${z5[t]}${z5[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const i=e[r],s=e[r+1];e[r]=i*t[0]+s*t[2]+t[4],e[r+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],s=t[1],o=t[2],a=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[r+d],f=e[r+d+1];e[r+d]=h*i+f*o+c,e[r+d+1]=h*s+f*a+u}}static applyInverseTransform(e,t){const r=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,r){const i=t[0],s=t[1],o=t[2],a=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],p=e[3];let x=i*d+c,y=x,b=i*f+c,_=b,C=a*h+u,k=C,T=a*p+u,E=T;if(s!==0||o!==0){const N=s*d,P=s*f,M=o*h,O=o*p;x+=M,_+=M,b+=O,y+=O,C+=N,E+=N,T+=P,k+=P}r[0]=Math.min(r[0],x,b,y,_),r[1]=Math.min(r[1],C,T,k,E),r[2]=Math.max(r[2],x,b,y,_),r[3]=Math.max(r[3],C,T,k,E)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],s=e[2],o=e[3],a=r**2+i**2,c=r*s+i*o,u=s**2+o**2,d=(a+u)/2,h=Math.sqrt(d**2-(a*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,r,i,s,o,a,c,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c),J(this,nm,P$).call(this,e,r,s,a,t,i,o,c,3*(-e+3*(r-s)+a),6*(e-2*r+s),3*(r-e),u),J(this,nm,P$).call(this,e,r,s,a,t,i,o,c,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),u)}}nm=new WeakSet,TP=function(e,t,r,i,s,o,a,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,x=h*(h*(h*e+3*u*t)+3*f*r)+p*i,y=h*(h*(h*s+3*u*o)+3*f*a)+p*c;d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],y),d[2]=Math.max(d[2],x),d[3]=Math.max(d[3],y)},P$=function(e,t,r,i,s,o,a,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&J(this,nm,TP).call(this,e,t,r,i,s,o,a,c,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const x=Math.sqrt(p),y=2*u;J(this,nm,TP).call(this,e,t,r,i,s,o,a,c,(-d+x)/y,f),J(this,nm,TP).call(this,e,t,r,i,s,o,a,c,(-d-x)/y,f)},G(Tt,nm);function RKe(n){return decodeURIComponent(escape(n))}let H5=null,xZ=null;function dve(n){return H5||(H5=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xZ=new Map([["ﬅ","ſt"]])),n.replaceAll(H5,(e,t,r)=>t?t.normalize("NFKC"):xZ.get(r))}function Xz(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),uve(n)}const Jz="pdfjs_internal_id_";function MKe(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...s]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const o=s.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function vo(n,e,t){return Math.min(Math.max(n,e),t)}function hve(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(uve(n))}function DKe(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):LA(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class EE{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){var c;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(EE.shouldBuildText(a))(c=s==null?void 0:s.attributes)!=null&&c.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const u of s.children)i(u)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Qz{static setupStorage(e,t,r,i,s){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var h,f;const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const a=s!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&EE.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const d=[[i,-1,o]];for(;d.length>0;){const[p,x,y]=d.at(-1);if(x+1===p.children.length){d.pop();continue}const b=p.children[++d.at(-1)[1]];if(b===null)continue;const{name:_}=b;if(_==="#text"){const k=document.createTextNode(b.value);u.push(k),y.append(k);continue}const C=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,_):document.createElement(_);if(y.append(C),b.attributes&&this.setAttributes({html:C,element:b,storage:t,intent:s,linkService:r}),((f=b.children)==null?void 0:f.length)>0)d.push([b,-1,C]);else if(b.value){const k=document.createTextNode(b.value);a&&EE.shouldBuildText(_)&&u.push(k),C.append(k)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Xh="http://www.w3.org/2000/svg",iy=class iy{};j(iy,"CSS",96),j(iy,"PDF",72),j(iy,"PDF_TO_CSS_UNITS",iy.CSS/iy.PDF);let pm=iy;async function vS(n,e="text"){if(Wk(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class FA{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=o,r*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let x,y,b,_;d===0?(x=Math.abs(u-e[1])*r+s,y=Math.abs(c-e[0])*r+o,b=(e[3]-e[1])*r,_=(e[2]-e[0])*r):(x=Math.abs(c-e[0])*r+s,y=Math.abs(u-e[1])*r+o,b=(e[2]-e[0])*r,_=(e[3]-e[1])*r),this.transform=[d*r,h*r,f*r,p*r,x-d*r*c-f*r*u,y-h*r*c-p*r*u],this.width=b,this.height=_}get rawDims(){const e=this.viewBox;return gn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new FA({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const r=[e,t];return Tt.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];Tt.applyTransform(t,this.transform);const r=[e[2],e[3]];return Tt.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return Tt.applyInverseTransform(r,this.transform),r}}class e3 extends gx{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function BA(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function t3(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function fve(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function mve(n,e="document.pdf"){if(typeof n!="string")return e;if(BA(n))return cn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},s=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(s.test(o))return i(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const u of a)if(s.test(u))return i(u);const c=Array.from(r.searchParams.keys()).reverse();for(const u of c)if(s.test(u))return i(u)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return i(c[0])}return e}class bZ{constructor(){j(this,"started",Object.create(null));j(this,"times",[])}time(e){e in this.started&&cn(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||cn(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function Wk(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ul(n){n.preventDefault()}function ii(n){n.preventDefault(),n.stopPropagation()}function LKe(n){console.log("Deprecated API usage: "+n)}var b2;class TE{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;v(this,b2)||L(this,b2,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=v(this,b2).exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(r,i,s,o,a,c))}}b2=new WeakMap,G(TE,b2);function pve(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new FA({viewBox:s,userUnit:1,scale:e,rotation:t})}function yS(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(cn(`Not a valid color format: "${n}"`),[0,0,0])}function FKe(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,yS(r))}e.remove()}function ri(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function gd(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function Hg(n,e,t=!1,r=!0){if(e instanceof FA){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,a=Es.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${s}px`,d=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Vu{constructor(){const{pixelRatio:e}=Vu;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,s=-1){let o=1/0,a=1/0,c=1/0;r=Vu.capPixels(r,s),r>0&&(o=Math.sqrt(r/(e*t))),i!==-1&&(a=i/e,c=i/t);const u=Math.min(o,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const oO=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class BKe{static get isDarkMode(){var e;return gn(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class gve{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),gn(this,"commentForegroundColor",yS(r))}}function vve(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return n=Math.round(n*r+i),e=Math.round(e*r+i),t=Math.round(t*r+i),[n,e,t]}function wZ(n,e){const t=n[0]/255,r=n[1]/255,i=n[2]/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;if(s===o)e[0]=e[1]=0;else{const c=s-o;switch(e[1]=a<.5?c/(s+o):c/(2-s-o),s){case t:e[0]=((r-i)/c+(r<i?6:0))*60;break;case r:e[0]=((i-t)/c+2)*60;break;case i:e[0]=((t-r)/c+4)*60;break}}e[2]=a}function I$(n,e){const t=n[0],r=n[1],i=n[2],s=(1-Math.abs(2*i-1))*r,o=s*(1-Math.abs(t/60%2-1)),a=i-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=s+a,e[2]=a;break;case 2:e[0]=a,e[1]=s+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=s+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=s+a;break;case 5:case 6:e[0]=s+a,e[1]=a,e[2]=o+a;break}}function _Z(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function SZ(n,e,t){I$(n,t),t.map(_Z);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];I$(e,t),t.map(_Z);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const kZ=new Map;function yve(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=kZ.get(t);if(r)return r;const i=new Float32Array(9),s=i.subarray(0,3),o=i.subarray(3,6);wZ(n,o);const a=i.subarray(6,9);wZ(e,a);const c=a[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),SZ(o,a,s)<u){let d,h;c?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const p=o[2]=(d+h)/2;c===SZ(o,a,s)<u?d=p:h=p}o[2]=c?h:d}return I$(o,s),r=Tt.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),kZ.set(t,r),r}function Zz({html:n,dir:e,className:t},r){const i=document.createDocumentFragment();if(typeof n=="string"){const s=document.createElement("p");s.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,c=o.length;a<c;++a){const u=o[a];s.append(document.createTextNode(u)),a<c-1&&s.append(document.createElement("br"))}i.append(s)}else Qz.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),r.append(i)}var Cp,Ep,uc,dc,w2,Tp,Pw,Iw,_2,_R,xve,Gs,bve,wve,jb,qk;const ef=class ef{constructor(e){G(this,Gs);G(this,Cp,null);G(this,Ep,null);G(this,uc);G(this,dc,null);G(this,w2,null);G(this,Tp,null);G(this,Pw,null);G(this,Iw,null);L(this,uc,e),v(ef,_2)||L(ef,_2,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=L(this,Cp,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=v(this,uc)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ul,{signal:t}),e.addEventListener("pointerdown",J(ef,_R,xve),{signal:t}));const r=L(this,dc,document.createElement("div"));r.className="buttons",e.append(r);const i=v(this,uc).toolbarPosition;if(i){const{style:s}=e,o=v(this,uc)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return v(this,Cp)}hide(){var e;v(this,Cp).classList.add("hidden"),(e=v(this,Ep))==null||e.hideDropdown()}show(){var e,t;v(this,Cp).classList.remove("hidden"),(e=v(this,w2))==null||e.shown(),(t=v(this,Tp))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=v(this,uc),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",v(ef,_2)[e]),J(this,Gs,jb).call(this,r)&&r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),v(this,dc).append(r)}async addAltText(e){const t=await e.render();J(this,Gs,jb).call(this,t),v(this,dc).append(t,v(this,Gs,qk)),L(this,w2,e)}addComment(e,t=null){if(v(this,Tp))return;const r=e.renderForToolbar();if(!r)return;J(this,Gs,jb).call(this,r);const i=L(this,Pw,v(this,Gs,qk));t?(v(this,dc).insertBefore(r,t),v(this,dc).insertBefore(i,t)):v(this,dc).append(r,i),L(this,Tp,e),e.toolbar=this}addColorPicker(e){if(v(this,Ep))return;L(this,Ep,e);const t=e.renderButton();J(this,Gs,jb).call(this,t),v(this,dc).append(t,v(this,Gs,qk))}async addEditSignatureButton(e){const t=L(this,Iw,await e.renderEditButton(v(this,uc)));J(this,Gs,jb).call(this,t),v(this,dc).append(t,v(this,Gs,qk))}removeButton(e){var t,r;switch(e){case"comment":(t=v(this,Tp))==null||t.removeToolbarCommentButton(),L(this,Tp,null),(r=v(this,Pw))==null||r.remove(),L(this,Pw,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,r){const i=v(this,dc).querySelector(r);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){v(this,Iw)&&(v(this,Iw).title=e)}remove(){var e;v(this,Cp).remove(),(e=v(this,Ep))==null||e.destroy(),L(this,Ep,null)}};Cp=new WeakMap,Ep=new WeakMap,uc=new WeakMap,dc=new WeakMap,w2=new WeakMap,Tp=new WeakMap,Pw=new WeakMap,Iw=new WeakMap,_2=new WeakMap,_R=new WeakSet,xve=function(e){e.stopPropagation()},Gs=new WeakSet,bve=function(e){v(this,uc)._focusEventsAllowed=!1,ii(e)},wve=function(e){v(this,uc)._focusEventsAllowed=!0,ii(e)},jb=function(e){const t=v(this,uc)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",J(this,Gs,bve).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",J(this,Gs,wve).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ul,{signal:t}),!0)},qk=function(){const e=document.createElement("div");return e.className="divider",e},G(ef,_R),G(ef,_2,null);let O$=ef;var S2,_y,sf,xm,_ve,Sve,R$;class $Ke{constructor(e){G(this,xm);G(this,S2,null);G(this,_y,null);G(this,sf);L(this,sf,e)}show(e,t,r){const[i,s]=J(this,xm,Sve).call(this,t,r),{style:o}=v(this,_y)||L(this,_y,J(this,xm,_ve).call(this));e.append(v(this,_y)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){v(this,_y).remove()}}S2=new WeakMap,_y=new WeakMap,sf=new WeakMap,xm=new WeakSet,_ve=function(){const e=L(this,_y,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=v(this,sf)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ul,{signal:t});const r=L(this,S2,document.createElement("div"));return r.className="buttons",e.append(r),v(this,sf).hasCommentManager()&&J(this,xm,R$).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{v(this,sf).commentSelection("floating_button")}),J(this,xm,R$).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{v(this,sf).highlightSelection("floating_button")}),e},Sve=function(e,t){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const a=s.x+(t?s.width:0);if(o>r){i=a,r=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]},R$=function(e,t,r,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const a=v(this,sf)._signal;a instanceof AbortSignal&&!a.aborted&&(s.addEventListener("contextmenu",Ul,{signal:a}),s.addEventListener("click",i,{signal:a})),v(this,S2).append(s)};function kve(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var SR;class VKe{constructor(){G(this,SR,0)}get id(){return`${kE}${pi(this,SR)._++}`}}SR=new WeakMap;var Ow,k2,uo,Rw,AP;const jW=class jW{constructor(){G(this,Rw);G(this,Ow,Xz());G(this,k2,0);G(this,uo,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return gn(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return J(this,Rw,AP).call(this,`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return J(this,Rw,AP).call(this,e,e)}async getFromBlob(e,t){const r=await t;return J(this,Rw,AP).call(this,e,r)}async getFromId(e){v(this,uo)||L(this,uo,new Map);const t=v(this,uo).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){v(this,uo)||L(this,uo,new Map);let r=v(this,uo).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${v(this,Ow)}_${pi(this,k2)._++}`,refCounter:1,isSvg:!1},v(this,uo).set(e,r),v(this,uo).set(r.id,r),r}getSvgUrl(e){const t=v(this,uo).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;v(this,uo)||L(this,uo,new Map);const t=v(this,uo).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${v(this,Ow)}_`)}};Ow=new WeakMap,k2=new WeakMap,uo=new WeakMap,Rw=new WeakSet,AP=async function(e,t){v(this,uo)||L(this,uo,new Map);let r=v(this,uo).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${v(this,Ow)}_${pi(this,k2)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(r.url=t,i=await vS(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=jW._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,d)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,u()},o.onload=async()=>{const h=r.svgUrl=o.result;a.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){cn(i),r=null}return v(this,uo).set(e,r),r&&v(this,uo).set(r.id,r),r};let M$=jW;var Ai,Ap,C2,ni;class UKe{constructor(e=128){G(this,Ai,[]);G(this,Ap,!1);G(this,C2);G(this,ni,-1);L(this,C2,e)}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),v(this,Ap))return;const c={cmd:e,undo:t,post:r,type:s};if(v(this,ni)===-1){v(this,Ai).length>0&&(v(this,Ai).length=0),L(this,ni,0),v(this,Ai).push(c);return}if(o&&v(this,Ai)[v(this,ni)].type===s){a&&(c.undo=v(this,Ai)[v(this,ni)].undo),v(this,Ai)[v(this,ni)]=c;return}const u=v(this,ni)+1;u===v(this,C2)?v(this,Ai).splice(0,1):(L(this,ni,u),u<v(this,Ai).length&&v(this,Ai).splice(u)),v(this,Ai).push(c)}undo(){if(v(this,ni)===-1)return;L(this,Ap,!0);const{undo:e,post:t}=v(this,Ai)[v(this,ni)];e(),t==null||t(),L(this,Ap,!1),L(this,ni,v(this,ni)-1)}redo(){if(v(this,ni)<v(this,Ai).length-1){L(this,ni,v(this,ni)+1),L(this,Ap,!0);const{cmd:e,post:t}=v(this,Ai)[v(this,ni)];e(),t==null||t(),L(this,Ap,!1)}}hasSomethingToUndo(){return v(this,ni)!==-1}hasSomethingToRedo(){return v(this,ni)<v(this,Ai).length-1}cleanType(e){if(v(this,ni)!==-1){for(let t=v(this,ni);t>=0;t--)if(v(this,Ai)[t].type!==e){v(this,Ai).splice(t+1,v(this,ni)-t),L(this,ni,t);return}v(this,Ai).length=0,L(this,ni,-1)}}destroy(){L(this,Ai,null)}}Ai=new WeakMap,Ap=new WeakMap,C2=new WeakMap,ni=new WeakMap;var kR,Cve;class $A{constructor(e){G(this,kR);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Es.platform;for(const[r,i,s={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(J(this,kR,Cve).call(this,t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...o,t)(),s||ii(t))}}kR=new WeakSet,Cve=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const CR=class CR{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return FKe(e),gn(this,"_colors",e)}convert(e){const t=yS(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return CR._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Tt.makeHexColor(...t):e}};j(CR,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let D$=CR;var Mw,rl,Dw,vi,ts,Lw,hc,Fw,fc,ho,Np,jp,Bw,Pp,kd,mc,Sy,E2,T2,$w,A2,Cd,Ip,Vw,Op,Ed,ER,Rp,Uw,N2,Mp,ky,zw,Dp,j2,Fi,Jn,of,Lp,Fp,P2,Hw,I2,Bp,Td,af,O2,R2,pc,mt,NP,L$,Eve,Tve,Gk,Ave,Nve,jve,F$,Pve,B$,$$,Ive,Ao,Jh,Ove,Rve,V$,Mve,Kk,U$;const Qb=class Qb{constructor(e,t,r,i,s,o,a,c,u,d,h,f,p,x,y,b){G(this,mt);G(this,Mw,new AbortController);G(this,rl,null);G(this,Dw,null);G(this,vi,new Map);G(this,ts,new Map);G(this,Lw,null);G(this,hc,null);G(this,Fw,null);G(this,fc,new UKe);G(this,ho,null);G(this,Np,null);G(this,jp,null);G(this,Bw,0);G(this,Pp,new Set);G(this,kd,null);G(this,mc,null);G(this,Sy,new Set);j(this,"_editorUndoBar",null);G(this,E2,!1);G(this,T2,!1);G(this,$w,!1);G(this,A2,null);G(this,Cd,null);G(this,Ip,null);G(this,Vw,null);G(this,Op,!1);G(this,Ed,null);G(this,ER,new VKe);G(this,Rp,!1);G(this,Uw,!1);G(this,N2,!1);G(this,Mp,null);G(this,ky,null);G(this,zw,null);G(this,Dp,null);G(this,j2,null);G(this,Fi,ln.NONE);G(this,Jn,new Set);G(this,of,null);G(this,Lp,null);G(this,Fp,null);G(this,P2,null);G(this,Hw,null);G(this,I2,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});G(this,Bp,[0,0]);G(this,Td,null);G(this,af,null);G(this,O2,null);G(this,R2,null);G(this,pc,null);const _=this._signal=v(this,Mw).signal;L(this,af,e),L(this,O2,t),L(this,R2,r),L(this,Lw,i),L(this,ho,s),L(this,Lp,o),L(this,Hw,c),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:_}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),a._on("setpreference",this.onSetPreference.bind(this),{signal:_}),a._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:_}),window.addEventListener("pointerdown",()=>{L(this,Uw,!0)},{capture:!0,signal:_}),window.addEventListener("pointerup",()=>{L(this,Uw,!1)},{capture:!0,signal:_}),J(this,mt,Ave).call(this),J(this,mt,Ive).call(this),J(this,mt,F$).call(this),L(this,hc,c.annotationStorage),L(this,A2,c.filterFactory),L(this,Fp,u),L(this,Vw,d||null),L(this,E2,h),L(this,T2,f),L(this,$w,p),L(this,j2,x||null),this.viewParameters={realScale:pm.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=b!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=Qb.prototype,t=o=>v(o,af).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return gn(this,"_keyboardManager",new $A([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&v(o,af).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&v(o,af).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,r,i,s,o,a,c,u;(e=v(this,pc))==null||e.resolve(),L(this,pc,null),(t=v(this,Mw))==null||t.abort(),L(this,Mw,null),this._signal=null;for(const d of v(this,ts).values())d.destroy();v(this,ts).clear(),v(this,vi).clear(),v(this,Sy).clear(),(r=v(this,Dp))==null||r.clear(),L(this,rl,null),v(this,Jn).clear(),v(this,fc).destroy(),(i=v(this,Lw))==null||i.destroy(),(s=v(this,ho))==null||s.destroy(),(o=v(this,Lp))==null||o.destroy(),(a=v(this,Ed))==null||a.hide(),L(this,Ed,null),(c=v(this,zw))==null||c.destroy(),L(this,zw,null),L(this,Dw,null),v(this,Cd)&&(clearTimeout(v(this,Cd)),L(this,Cd,null)),v(this,Td)&&(clearTimeout(v(this,Td)),L(this,Td,null)),(u=this._editorUndoBar)==null||u.destroy(),L(this,Hw,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return v(this,j2)}get useNewAltTextFlow(){return v(this,T2)}get useNewAltTextWhenAddingImage(){return v(this,$w)}get hcmFilter(){return gn(this,"hcmFilter",v(this,Fp)?v(this,A2).addHCMFilter(v(this,Fp).foreground,v(this,Fp).background):"none")}get direction(){return gn(this,"direction",getComputedStyle(v(this,af)).direction)}get _highlightColors(){return gn(this,"_highlightColors",v(this,Vw)?new Map(v(this,Vw).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return gn(this,"highlightColors",null);const t=new Map,r=!!v(this,Fp);for(const[i,s]of e){const o=i.endsWith("_HCM");if(r&&o){t.set(i.replace("_HCM",""),s);continue}!r&&!o&&t.set(i,s)}return gn(this,"highlightColors",t)}get highlightColorNames(){return gn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),L(this,jp,e)}setMainHighlightColorPicker(e){L(this,zw,e)}editAltText(e,t=!1){var r;(r=v(this,Lw))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!v(this,ho)}editComment(e,t,r,i){var s;(s=v(this,ho))==null||s.showDialog(this,e,t,r,i)}selectComment(e,t){const r=v(this,ts).get(e),i=r==null?void 0:r.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=v(this,ho))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=v(this,ho))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=v(this,ho))==null||t.removeComments([e.uid])}toggleComment(e,t,r=void 0){var i;(i=v(this,ho))==null||i.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var r;return e&&((r=v(this,ho))==null?void 0:r.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=v(this,ho))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(v(this,ts).has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){var t;(t=v(this,Lp))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return v(this,Lp)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":L(this,$w,t);break}}onPageChanging({pageNumber:e}){L(this,Bw,e-1)}focusMainContainer(){v(this,af).focus()}findParent(e,t){for(const r of v(this,ts).values()){const{x:i,y:s,width:o,height:a}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=s&&t<=s+a)return r}return null}disableUserSelect(e=!1){v(this,O2).classList.toggle("noUserSelect",e)}addShouldRescale(e){v(this,Sy).add(e)}removeShouldRescale(e){v(this,Sy).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*pm.PDF_TO_CSS_UNITS;for(const r of v(this,Sy))r.onScaleChanging();(t=v(this,jp))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a}=r,c=r.toString(),d=J(this,mt,NP).call(this,r).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;r.empty();const f=J(this,mt,L$).call(this,d),p=v(this,Fi)===ln.NONE,x=()=>{const y=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a,text:c});p&&this.showAllEditors("highlight",!0,!0),t&&(y==null||y.editComment())};if(p){this.switchToMode(ln.HIGHLIGHT,x);return}x()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!v(this,hc))return null;const t=`${kE}${e}`,r=v(this,hc).getRawValue(t);return r&&v(this,hc).remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&v(this,hc)&&!v(this,hc).has(e.id)&&v(this,hc).setValue(e.id,e)}a11yAlert(e,t=null){const r=v(this,R2);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,v(this,Op)&&(L(this,Op,!1),J(this,mt,Gk).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of v(this,Jn))if(t.div.contains(e)){L(this,ky,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!v(this,ky))return;const[e,t]=v(this,ky);L(this,ky,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){J(this,mt,F$).call(this),J(this,mt,B$).call(this)}removeEditListeners(){J(this,mt,Pve).call(this),J(this,mt,$$).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of v(this,mc))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of v(this,mc))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=v(this,rl))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of v(this,Jn)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of v(this,mc))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){cn(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const c of r){const u=await i.deserialize(c);if(!u)return;s.push(u)}const o=()=>{for(const c of s)J(this,mt,V$).call(this,c);J(this,mt,U$).call(this,s)},a=()=>{for(const c of s)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){cn(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),v(this,Fi)!==ln.NONE&&!this.isEditorHandlingKeyboard&&Qb._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,v(this,Op)&&(L(this,Op,!1),J(this,mt,Gk).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(J(this,mt,Nve).call(this),J(this,mt,B$).call(this),J(this,mt,Ao).call(this,{isEditing:v(this,Fi)!==ln.NONE,isEmpty:J(this,mt,Kk).call(this),hasSomethingToUndo:v(this,fc).hasSomethingToUndo(),hasSomethingToRedo:v(this,fc).hasSomethingToRedo(),hasSelectedEditor:!1})):(J(this,mt,jve).call(this),J(this,mt,$$).call(this),J(this,mt,Ao).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!v(this,mc)){L(this,mc,e);for(const t of v(this,mc))J(this,mt,Jh).call(this,t.defaultPropertiesToUpdate)}}getId(){return v(this,ER).id}get currentLayer(){return v(this,ts).get(v(this,Bw))}getLayer(e){return v(this,ts).get(e)}get currentPageIndex(){return v(this,Bw)}addLayer(e){v(this,ts).set(e.pageIndex,e),v(this,Rp)?e.enable():e.disable()}removeLayer(e){v(this,ts).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,i=!1,s=!1){var o,a,c,u,d,h;if(v(this,Fi)!==e&&!(v(this,pc)&&(await v(this,pc).promise,!v(this,pc)))){if(L(this,pc,Promise.withResolvers()),(o=v(this,jp))==null||o.commitOrRemove(),v(this,Fi)===ln.POPUP&&((a=v(this,ho))==null||a.hideSidebar()),(c=v(this,ho))==null||c.destroyPopup(),L(this,Fi,e),e===ln.NONE){this.setEditingState(!1),J(this,mt,Rve).call(this);for(const f of v(this,vi).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),v(this,pc).resolve();return}for(const f of v(this,vi).values())f.addStandaloneCommentButton();e===ln.SIGNATURE&&await((d=v(this,Lp))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await J(this,mt,Ove).call(this),this.unselectAll();for(const f of v(this,ts).values())f.updateMode(e);if(e===ln.POPUP){v(this,Dw)||L(this,Dw,await v(this,Hw).getAnnotationsByType(new Set(v(this,mc).map(x=>x._editorType))));const f=new Set,p=[];for(const x of v(this,vi).values()){const{annotationElementId:y,hasComment:b,deleted:_}=x;y&&f.add(y),b&&!_&&p.push(x.getData())}for(const x of v(this,Dw)){const{id:y,popupRef:b,contentsObj:_}=x;b&&(_!=null&&_.str)&&!f.has(y)&&!v(this,Pp).has(y)&&p.push(x)}(h=v(this,ho))==null||h.showSidebar(p)}if(!t){r&&this.addNewEditorFromKeyboard(),v(this,pc).resolve();return}for(const f of v(this,vi).values())f.uid===t?(this.setSelected(f),s?f.editComment():i?f.enterInEditMode():f.focus()):f.unselect();v(this,pc).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==v(this,Fi)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(v(this,mc)){switch(e){case jn.CREATE:this.currentLayer.addNewEditor(t);return;case jn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(v(this,P2)||L(this,P2,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of v(this,Jn))r.updateParams(e,t);else for(const r of v(this,mc))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var s;for(const o of v(this,vi).values())o.editorType===e&&o.show(t);(((s=v(this,P2))==null?void 0:s.get(jn.HIGHLIGHT_SHOW_ALL))??!0)!==t&&J(this,mt,Jh).call(this,[[jn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(v(this,N2)!==e){L(this,N2,e);for(const t of v(this,ts).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of v(this,vi).values())t.pageIndex===e&&(yield t)}getEditor(e){return v(this,vi).get(e)}addEditor(e){v(this,vi).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(v(this,Cd)&&clearTimeout(v(this,Cd)),L(this,Cd,setTimeout(()=>{this.focusMainContainer(),L(this,Cd,null)},0))),v(this,vi).delete(e.id),e.annotationElementId&&((t=v(this,Dp))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!v(this,Pp).has(e.annotationElementId))&&((r=v(this,hc))==null||r.remove(e.id))}addDeletedAnnotationElement(e){v(this,Pp).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return v(this,Pp).has(e)}removeDeletedAnnotationElement(e){v(this,Pp).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){v(this,rl)!==e&&(L(this,rl,e),e&&J(this,mt,Jh).call(this,e.propertiesToUpdate))}updateUI(e){v(this,mt,Mve)===e&&J(this,mt,Jh).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){J(this,mt,Jh).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(v(this,Jn).has(e)){v(this,Jn).delete(e),e.unselect(),J(this,mt,Ao).call(this,{hasSelectedEditor:this.hasSelection});return}v(this,Jn).add(e),e.select(),J(this,mt,Jh).call(this,e.propertiesToUpdate),J(this,mt,Ao).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=v(this,jp))==null||t.commitOrRemove();for(const r of v(this,Jn))r!==e&&r.unselect();v(this,Jn).clear(),v(this,Jn).add(e),e.select(),J(this,mt,Jh).call(this,e.propertiesToUpdate),J(this,mt,Ao).call(this,{hasSelectedEditor:!0})}isSelected(e){return v(this,Jn).has(e)}get firstSelectedEditor(){return v(this,Jn).values().next().value}unselect(e){e.unselect(),v(this,Jn).delete(e),J(this,mt,Ao).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return v(this,Jn).size!==0}get isEnterHandled(){return v(this,Jn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;v(this,fc).undo(),J(this,mt,Ao).call(this,{hasSomethingToUndo:v(this,fc).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:J(this,mt,Kk).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){v(this,fc).redo(),J(this,mt,Ao).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:v(this,fc).hasSomethingToRedo(),isEmpty:J(this,mt,Kk).call(this)})}addCommands(e){v(this,fc).add(e),J(this,mt,Ao).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:J(this,mt,Kk).call(this)})}cleanUndoStack(e){v(this,fc).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...v(this,Jn)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const o of t)J(this,mt,V$).call(this,o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=v(this,rl))==null||e.commitOrRemove()}hasSomethingToControl(){return v(this,rl)||this.hasSelection}selectAll(){for(const e of v(this,Jn))e.commit();J(this,mt,U$).call(this,v(this,vi).values())}unselectAll(){var e;if(!(v(this,rl)&&(v(this,rl).commitOrRemove(),v(this,Fi)!==ln.NONE))&&!((e=v(this,jp))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of v(this,Jn))t.unselect();v(this,Jn).clear(),J(this,mt,Ao).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;v(this,Bp)[0]+=e,v(this,Bp)[1]+=t;const[i,s]=v(this,Bp),o=[...v(this,Jn)],a=1e3;v(this,Td)&&clearTimeout(v(this,Td)),L(this,Td,setTimeout(()=>{L(this,Td,null),v(this,Bp)[0]=v(this,Bp)[1]=0,this.addCommands({cmd:()=>{for(const c of o)v(this,vi).has(c.id)&&(c.translateInPage(i,s),c.translationDone())},undo:()=>{for(const c of o)v(this,vi).has(c.id)&&(c.translateInPage(-i,-s),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),L(this,kd,new Map);for(const e of v(this,Jn))v(this,kd).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!v(this,kd))return!1;this.disableUserSelect(!1);const e=v(this,kd);L(this,kd,null);let t=!1;for(const[{x:i,y:s,pageIndex:o},a]of e)a.newX=i,a.newY=s,a.newPageIndex=o,t||(t=i!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(i,s,o,a)=>{if(v(this,vi).has(i.id)){const c=v(this,ts).get(a);c?i._setParentAndPosition(c,s,o):(i.pageIndex=a,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:a}]of e)r(i,s,o,a)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:a}]of e)r(i,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(v(this,kd))for(const r of v(this,kd).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||v(this,Jn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return v(this,rl)===e}getActive(){return v(this,rl)}getMode(){return v(this,Fi)}isEditingMode(){return v(this,Fi)!==ln.NONE}get imageManager(){return gn(this,"imageManager",new M$)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-i)/o,y:1-(u+h-r)/s,width:f/o,height:h/s});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-r)/s,y:1-(d+f-i)/o,width:h/s,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-i)/o,y:(u-r)/s,width:f/o,height:h/s});break;default:a=(u,d,h,f)=>({x:(u-r)/s,y:(d-i)/o,width:h/s,height:f/o});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:x,height:y}of h.getClientRects())x===0||y===0||c.push(a(f,p,x,y))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(v(this,Fw)||L(this,Fw,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=v(this,Fw))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=v(this,Fw))==null?void 0:i.get(e.data.id);if(!t)return;const r=v(this,hc).getRawValue(t);r&&(v(this,Fi)===ln.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var s;const i=(s=v(this,Dp))==null?void 0:s.get(e);i&&(i.setCanvas(t,r),v(this,Dp).delete(e))}addMissingCanvas(e,t){(v(this,Dp)||L(this,Dp,new Map)).set(e,t)}};Mw=new WeakMap,rl=new WeakMap,Dw=new WeakMap,vi=new WeakMap,ts=new WeakMap,Lw=new WeakMap,hc=new WeakMap,Fw=new WeakMap,fc=new WeakMap,ho=new WeakMap,Np=new WeakMap,jp=new WeakMap,Bw=new WeakMap,Pp=new WeakMap,kd=new WeakMap,mc=new WeakMap,Sy=new WeakMap,E2=new WeakMap,T2=new WeakMap,$w=new WeakMap,A2=new WeakMap,Cd=new WeakMap,Ip=new WeakMap,Vw=new WeakMap,Op=new WeakMap,Ed=new WeakMap,ER=new WeakMap,Rp=new WeakMap,Uw=new WeakMap,N2=new WeakMap,Mp=new WeakMap,ky=new WeakMap,zw=new WeakMap,Dp=new WeakMap,j2=new WeakMap,Fi=new WeakMap,Jn=new WeakMap,of=new WeakMap,Lp=new WeakMap,Fp=new WeakMap,P2=new WeakMap,Hw=new WeakMap,I2=new WeakMap,Bp=new WeakMap,Td=new WeakMap,af=new WeakMap,O2=new WeakMap,R2=new WeakMap,pc=new WeakMap,mt=new WeakSet,NP=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},L$=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of v(this,ts).values())if(r.hasTextLayer(e))return r;return null},Eve=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=J(this,mt,NP).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(v(this,Ed)||L(this,Ed,new $Ke(this)),v(this,Ed).show(r,i,this.direction==="ltr"))},Tve=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){v(this,of)&&((s=v(this,Ed))==null||s.hide(),L(this,of,null),J(this,mt,Ao).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===v(this,of))return;const i=J(this,mt,NP).call(this,e).closest(".textLayer");if(!i){v(this,of)&&((o=v(this,Ed))==null||o.hide(),L(this,of,null),J(this,mt,Ao).call(this,{hasSelectedText:!1}));return}if((a=v(this,Ed))==null||a.hide(),L(this,of,t),J(this,mt,Ao).call(this,{hasSelectedText:!0}),!(v(this,Fi)!==ln.HIGHLIGHT&&v(this,Fi)!==ln.NONE)&&(v(this,Fi)===ln.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),L(this,Op,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=v(this,Fi)===ln.HIGHLIGHT?J(this,mt,L$).call(this,i):null;if(c==null||c.toggleDrawing(),v(this,Uw)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&J(this,mt,Gk).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),J(this,mt,Gk).call(this,"main_toolbar")}},Gk=function(e=""){v(this,Fi)===ln.HIGHLIGHT?this.highlightSelection(e):v(this,E2)&&J(this,mt,Eve).call(this)},Ave=function(){document.addEventListener("selectionchange",J(this,mt,Tve).bind(this),{signal:this._signal})},Nve=function(){if(v(this,Ip))return;L(this,Ip,new AbortController);const e=this.combinedSignal(v(this,Ip));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},jve=function(){var e;(e=v(this,Ip))==null||e.abort(),L(this,Ip,null)},F$=function(){if(v(this,Mp))return;L(this,Mp,new AbortController);const e=this.combinedSignal(v(this,Mp));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Pve=function(){var e;(e=v(this,Mp))==null||e.abort(),L(this,Mp,null)},B$=function(){if(v(this,Np))return;L(this,Np,new AbortController);const e=this.combinedSignal(v(this,Np));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},$$=function(){var e;(e=v(this,Np))==null||e.abort(),L(this,Np,null)},Ive=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ao=function(e){Object.entries(e).some(([r,i])=>v(this,I2)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(v(this,I2),e)}),v(this,Fi)===ln.HIGHLIGHT&&e.hasSelectedEditor===!1&&J(this,mt,Jh).call(this,[[jn.HIGHLIGHT_FREE,!0]]))},Jh=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Ove=async function(){if(!v(this,Rp)){L(this,Rp,!0);const e=[];for(const t of v(this,ts).values())e.push(t.enable());await Promise.all(e);for(const t of v(this,vi).values())t.enable()}},Rve=function(){if(this.unselectAll(),v(this,Rp)){L(this,Rp,!1);for(const e of v(this,ts).values())e.disable();for(const e of v(this,vi).values())e.disable()}},V$=function(e){const t=v(this,ts).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Mve=function(){let e=null;for(e of v(this,Jn));return e},Kk=function(){if(v(this,vi).size===0)return!0;if(v(this,vi).size===1)for(const e of v(this,vi).values())return e.isEmpty();return!1},U$=function(e){for(const t of v(this,Jn))t.unselect();v(this,Jn).clear();for(const t of e)t.isEmpty()||(v(this,Jn).add(t),t.select());J(this,mt,Ao).call(this,{hasSelectedEditor:this.hasSelection})},j(Qb,"TRANSLATE_SMALL",1),j(Qb,"TRANSLATE_BIG",10);let Wg=Qb;var vs,Ad,nu,Ww,Nd,il,qw,jd,pa,lf,Cy,Pd,$p,Cu,Yk,jP;const No=class No{constructor(e){G(this,Cu);G(this,vs,null);G(this,Ad,!1);G(this,nu,null);G(this,Ww,null);G(this,Nd,null);G(this,il,null);G(this,qw,!1);G(this,jd,null);G(this,pa,null);G(this,lf,null);G(this,Cy,null);G(this,Pd,!1);L(this,pa,e),L(this,Pd,e._uiManager.useNewAltTextFlow),v(No,$p)||L(No,$p,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){No._l10n??(No._l10n=e)}async render(){const e=L(this,nu,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=L(this,Ww,document.createElement("span"));e.append(t),v(this,Pd)?(e.classList.add("new"),e.setAttribute("data-l10n-id",v(No,$p).missing),t.setAttribute("data-l10n-id",v(No,$p)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=v(this,pa)._uiManager._signal;e.addEventListener("contextmenu",Ul,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),v(this,pa)._uiManager.editAltText(v(this,pa)),v(this,Pd)&&v(this,pa)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:v(this,Cu,Yk)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(L(this,qw,!0),i(s))},{signal:r}),await J(this,Cu,jP).call(this),e}finish(){v(this,nu)&&(v(this,nu).focus({focusVisible:v(this,qw)}),L(this,qw,!1))}isEmpty(){return v(this,Pd)?v(this,vs)===null:!v(this,vs)&&!v(this,Ad)}hasData(){return v(this,Pd)?v(this,vs)!==null||!!v(this,lf):this.isEmpty()}get guessedText(){return v(this,lf)}async setGuessedText(e){v(this,vs)===null&&(L(this,lf,e),L(this,Cy,await No._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),J(this,Cu,jP).call(this))}toggleAltTextBadge(e=!1){var t;if(!v(this,Pd)||v(this,vs)){(t=v(this,jd))==null||t.remove(),L(this,jd,null);return}if(!v(this,jd)){const r=L(this,jd,document.createElement("div"));r.className="noAltTextBadge",v(this,pa).div.append(r)}v(this,jd).classList.toggle("hidden",!e)}serialize(e){let t=v(this,vs);return!e&&v(this,lf)===t&&(t=v(this,Cy)),{altText:t,decorative:v(this,Ad),guessedText:v(this,lf),textWithDisclaimer:v(this,Cy)}}get data(){return{altText:v(this,vs),decorative:v(this,Ad)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(L(this,lf,r),L(this,Cy,i)),!(v(this,vs)===e&&v(this,Ad)===t)&&(s||(L(this,vs,e),L(this,Ad,t)),J(this,Cu,jP).call(this))}toggle(e=!1){v(this,nu)&&(!e&&v(this,il)&&(clearTimeout(v(this,il)),L(this,il,null)),v(this,nu).disabled=!e)}shown(){v(this,pa)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:v(this,Cu,Yk)}})}destroy(){var e,t;(e=v(this,nu))==null||e.remove(),L(this,nu,null),L(this,Ww,null),L(this,Nd,null),(t=v(this,jd))==null||t.remove(),L(this,jd,null)}};vs=new WeakMap,Ad=new WeakMap,nu=new WeakMap,Ww=new WeakMap,Nd=new WeakMap,il=new WeakMap,qw=new WeakMap,jd=new WeakMap,pa=new WeakMap,lf=new WeakMap,Cy=new WeakMap,Pd=new WeakMap,$p=new WeakMap,Cu=new WeakSet,Yk=function(){return v(this,vs)&&"added"||v(this,vs)===null&&this.guessedText&&"review"||"missing"},jP=async function(){var i,s,o;const e=v(this,nu);if(!e)return;if(v(this,Pd)){if(e.classList.toggle("done",!!v(this,vs)),e.setAttribute("data-l10n-id",v(No,$p)[v(this,Cu,Yk)]),(i=v(this,Ww))==null||i.setAttribute("data-l10n-id",v(No,$p)[`${v(this,Cu,Yk)}-label`]),!v(this,vs)){(s=v(this,Nd))==null||s.remove();return}}else{if(!v(this,vs)&&!v(this,Ad)){e.classList.remove("done"),(o=v(this,Nd))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=v(this,Nd);if(!t){L(this,Nd,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${v(this,pa).id}`;const a=100,c=v(this,pa)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(v(this,il)),L(this,il,null)},{once:!0}),e.addEventListener("mouseenter",()=>{L(this,il,setTimeout(()=>{L(this,il,null),v(this,Nd).classList.add("show"),v(this,pa)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;v(this,il)&&(clearTimeout(v(this,il)),L(this,il,null)),(u=v(this,Nd))==null||u.classList.remove("show")},{signal:c})}v(this,Ad)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=v(this,vs)),t.parentNode||e.append(t);const r=v(this,pa).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},G(No,$p,null),j(No,"_l10n",null);let aO=No;var Ls,gc,Ey,_r,M2,Ty,ru,Ay,Ny,jy,D2,z$;class Mj{constructor(e){G(this,D2);G(this,Ls,null);G(this,gc,null);G(this,Ey,!1);G(this,_r,null);G(this,M2,null);G(this,Ty,null);G(this,ru,null);G(this,Ay,null);G(this,Ny,!1);G(this,jy,null);L(this,_r,e)}renderForToolbar(){const e=L(this,gc,document.createElement("button"));return e.className="comment",J(this,D2,z$).call(this,e,!1)}renderForStandalone(){const e=L(this,Ls,document.createElement("button"));e.className="annotationCommentButton";const t=v(this,_r).commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(v(this,_r)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=v(this,_r).commentButtonColor;i&&(r.backgroundColor=i)}return J(this,D2,z$).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=v(this,Ls)??v(this,gc))==null||e.focus()},0)}onUpdatedColor(){if(!v(this,Ls))return;const e=v(this,_r).commentButtonColor;e&&(v(this,Ls).style.backgroundColor=e),v(this,_r)._uiManager.updatePopupColor(v(this,_r))}get commentButtonWidth(){var e;return(((e=v(this,Ls))==null?void 0:e.getBoundingClientRect().width)??0)/v(this,_r).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(v(this,jy))return v(this,jy);if(!v(this,Ls))return null;const{x:e,y:t,height:r}=v(this,Ls).getBoundingClientRect(),{x:i,y:s,width:o,height:a}=v(this,_r).parent.boundingClientRect;return[(e-i)/o,(t+r-s)/a]}set commentPopupPositionInLayer(e){L(this,jy,e)}hasDefaultPopupPosition(){return v(this,jy)===null}removeStandaloneCommentButton(){var e;(e=v(this,Ls))==null||e.remove(),L(this,Ls,null)}removeToolbarCommentButton(){var e;(e=v(this,gc))==null||e.remove(),L(this,gc,null)}setCommentButtonStates({selected:e,hasPopup:t}){v(this,Ls)&&(v(this,Ls).classList.toggle("selected",e),v(this,Ls).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let r,i;if(t)[r,i]=t;else{[r,i]=v(this,_r).commentButtonPosition;const{width:d,height:h,x:f,y:p}=v(this,_r);r=f+r*d,i=p+i*h}const s=v(this,_r).parent.boundingClientRect,{x:o,y:a,width:c,height:u}=s;v(this,_r)._uiManager.editComment(v(this,_r),o+r*c,a+i*u,{...e,parentDimensions:s})}finish(){v(this,gc)&&(v(this,gc).focus({focusVisible:v(this,Ey)}),L(this,Ey,!1))}isDeleted(){return v(this,Ny)||v(this,ru)===""}isEmpty(){return v(this,ru)===null}hasBeenEdited(){return this.isDeleted()||v(this,ru)!==v(this,M2)}serialize(){return this.data}get data(){return{text:v(this,ru),richText:v(this,Ty),date:v(this,Ay),deleted:this.isDeleted()}}set data(e){if(e!==v(this,ru)&&L(this,Ty,null),e===null){L(this,ru,""),L(this,Ny,!0);return}L(this,ru,e),L(this,Ay,new Date),L(this,Ny,!1)}setInitialText(e,t=null){L(this,M2,e),this.data=e,L(this,Ay,null),L(this,Ty,t)}shown(){}destroy(){var e,t;(e=v(this,gc))==null||e.remove(),L(this,gc,null),(t=v(this,Ls))==null||t.remove(),L(this,Ls,null),L(this,ru,""),L(this,Ty,null),L(this,Ay,null),L(this,_r,null),L(this,Ey,!1),L(this,Ny,!1)}}Ls=new WeakMap,gc=new WeakMap,Ey=new WeakMap,_r=new WeakMap,M2=new WeakMap,Ty=new WeakMap,ru=new WeakMap,Ay=new WeakMap,Ny=new WeakMap,jy=new WeakMap,D2=new WeakSet,z$=function(e,t){if(!v(this,_r)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[v(this,_r)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const r=v(this,_r)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Ul,{signal:r}),t&&(e.addEventListener("focusin",s=>{v(this,_r)._focusEventsAllowed=!1,ii(s)},{capture:!0,signal:r}),e.addEventListener("focusout",s=>{v(this,_r)._focusEventsAllowed=!0,ii(s)},{capture:!0,signal:r})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),e===v(this,gc)?this.edit():v(this,_r).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(L(this,Ey,!0),i(s))},{signal:r}),e.addEventListener("pointerenter",()=>{v(this,_r).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{v(this,_r).toggleComment(!1,!1)},{signal:r}),e};var Gw,Py,L2,F2,B2,$2,V2,cf,Iy,uf,Oy,df,Xg,Dve,Lve,Fve;const PW=class PW{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){G(this,Xg);G(this,Gw);G(this,Py,!1);G(this,L2,null);G(this,F2);G(this,B2);G(this,$2);G(this,V2);G(this,cf,null);G(this,Iy);G(this,uf,null);G(this,Oy);G(this,df,null);L(this,Gw,e),L(this,L2,r),L(this,F2,t),L(this,B2,i),L(this,$2,s),L(this,V2,o),L(this,Oy,new AbortController),L(this,Iy,AbortSignal.any([a,v(this,Oy).signal])),e.addEventListener("touchstart",J(this,Xg,Dve).bind(this),{passive:!1,signal:v(this,Iy)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Vu.pixelRatio}destroy(){var e,t;(e=v(this,Oy))==null||e.abort(),L(this,Oy,null),(t=v(this,cf))==null||t.abort(),L(this,cf,null)}};Gw=new WeakMap,Py=new WeakMap,L2=new WeakMap,F2=new WeakMap,B2=new WeakMap,$2=new WeakMap,V2=new WeakMap,cf=new WeakMap,Iy=new WeakMap,uf=new WeakMap,Oy=new WeakMap,df=new WeakMap,Xg=new WeakSet,Dve=function(e){var i,s,o;if((i=v(this,F2))!=null&&i.call(this))return;if(e.touches.length===1){if(v(this,cf))return;const a=L(this,cf,new AbortController),c=AbortSignal.any([v(this,Iy),a.signal]),u=v(this,Gw),d={capture:!0,signal:c,passive:!1},h=f=>{var p;f.pointerType==="touch"&&((p=v(this,cf))==null||p.abort(),L(this,cf,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ii(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!v(this,df)){L(this,df,new AbortController);const a=AbortSignal.any([v(this,Iy),v(this,df).signal]),c=v(this,Gw),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",J(this,Xg,Lve).bind(this),u);const d=J(this,Xg,Fve).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",ii,u),c.addEventListener("pointermove",ii,u),c.addEventListener("pointercancel",ii,u),c.addEventListener("pointerup",ii,u),(s=v(this,B2))==null||s.call(this)}if(ii(e),e.touches.length!==2||(o=v(this,L2))!=null&&o.call(this)){L(this,uf,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),L(this,uf,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},Lve=function(e){var T;if(!v(this,uf)||e.touches.length!==2)return;ii(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:s}=t,{screenX:o,screenY:a}=r,c=v(this,uf),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,p=h-u,x=f-d,y=o-i,b=a-s,_=Math.hypot(y,b)||1,C=Math.hypot(p,x)||1;if(!v(this,Py)&&Math.abs(C-_)<=PW.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=s,c.touch1X=o,c.touch1Y=a,!v(this,Py)){L(this,Py,!0);return}const k=[(i+o)/2,(s+a)/2];(T=v(this,$2))==null||T.call(this,k,C,_)},Fve=function(e){var t;e.touches.length>=2||(v(this,df)&&(v(this,df).abort(),L(this,df,null),(t=v(this,V2))==null||t.call(this)),v(this,uf)&&(ii(e),L(this,uf,null),L(this,Py,!1)))};let AE=PW;var Ry,iu,Gr,mr,hf,Kw,Vp,U2,Fs,My,ff,Id,Up,z2,Dy,sl,H2,Ly,mf,Od,Yw,Xw,vc,Fy,W2,TR,Kt,H$,q2,W$,PP,Bve,$ve,q$,IP,G$,Vve,Uve,zve,K$,Hve,Y$,Wve,qve,Gve,X$,Xk;const hn=class hn{constructor(e){G(this,Kt);G(this,Ry,null);G(this,iu,null);G(this,Gr,null);G(this,mr,null);G(this,hf,null);G(this,Kw,!1);G(this,Vp,null);G(this,U2,"");G(this,Fs,null);G(this,My,null);G(this,ff,null);G(this,Id,null);G(this,Up,null);G(this,z2,"");G(this,Dy,!1);G(this,sl,null);G(this,H2,!1);G(this,Ly,!1);G(this,mf,!1);G(this,Od,null);G(this,Yw,0);G(this,Xw,0);G(this,vc,null);G(this,Fy,null);j(this,"isSelected",!1);j(this,"_isCopy",!1);j(this,"_editToolbar",null);j(this,"_initialOptions",Object.create(null));j(this,"_initialData",null);j(this,"_isVisible",!0);j(this,"_uiManager",null);j(this,"_focusEventsAllowed",!0);G(this,W2,!1);G(this,TR,hn._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=hn.prototype._resizeWithKeyboard,t=Wg.TRANSLATE_SMALL,r=Wg.TRANSLATE_BIG;return gn(this,"_resizerKeyboardManager",new $A([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],hn.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return gn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new zKe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(hn._l10n??(hn._l10n=e),hn._l10nResizer||(hn._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),hn._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);hn._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){xr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return v(this,W2)}set _isDraggable(e){var t;L(this,W2,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=v(this,TR)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(J(this,Kt,Xk).call(this),(t=v(this,Id))==null||t.remove(),L(this,Id,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(v(this,Dy)?L(this,Dy,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}translate(e,t){J(this,Kt,H$).call(this,this.parentDimensions,e,t)}translateInPage(e,t){v(this,sl)||L(this,sl,[this.x,this.y,this.width,this.height]),J(this,Kt,H$).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){v(this,sl)||L(this,sl,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:d}=r;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!v(this,sl)&&(v(this,sl)[0]!==this.x||v(this,sl)[1]!==this.y)}get _hasBeenResized(){return!!v(this,sl)&&(v(this,sl)[2]!==this.width||v(this,sl)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=hn,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:s,y:o,width:a,height:c}=this;if(a*=r,c*=i,s*=r,o*=i,this._mustFixPosition)switch(e){case 0:s=vo(s,0,r-a),o=vo(o,0,i-c);break;case 90:s=vo(s,0,r-c),o=vo(o,a,i);break;case 180:s=vo(s,a,r),o=vo(o,c,i);break;case 270:s=vo(s,c,r),o=vo(o,0,i-a);break}this.x=s/=r,this.y=o/=i;const[u,d]=this.getBaseTranslation();s+=u,o+=d,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return J(r=hn,q2,W$).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return J(r=hn,q2,W$).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=v(this,Gr))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||v(this,Ly))return this._editToolbar;this._editToolbar=new O$(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=v(this,Gr))==null||t.destroy()}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return v(this,Gr)||(aO.initialize(hn._l10n),L(this,Gr,new aO(this)),v(this,Ry)&&(v(this,Gr).data=v(this,Ry),L(this,Ry,null))),v(this,Gr)}get altTextData(){var e;return(e=v(this,Gr))==null?void 0:e.data}set altTextData(e){v(this,Gr)&&(v(this,Gr).data=e)}get guessedAltText(){var e;return(e=v(this,Gr))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=v(this,Gr))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=v(this,Gr))==null?void 0:t.serialize(e)}hasAltText(){return!!v(this,Gr)&&!v(this,Gr).isEmpty()}hasAltTextData(){var e;return((e=v(this,Gr))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=v(this,mr))==null||e.focusButton()}addCommentButton(){return v(this,mr)||L(this,mr,new Mj(this))}addStandaloneCommentButton(){if(v(this,hf)){this._uiManager.isEditingMode()&&v(this,hf).classList.remove("hidden");return}this.hasComment&&(L(this,hf,v(this,mr).renderForStandalone()),this.div.append(v(this,hf)))}removeStandaloneCommentButton(){v(this,mr).removeStandaloneCommentButton(),L(this,hf,null)}hideStandaloneCommentButton(){var e;(e=v(this,hf))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:i}}=v(this,mr);return{text:t,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){v(this,mr)||L(this,mr,new Mj(this)),v(this,mr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(v(this,mr)||L(this,mr,new Mj(this)),v(this,mr).setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=v(this,mr))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=v(this,mr))==null?void 0:e.isDeleted()}get hasComment(){return!!v(this,mr)&&!v(this,mr).isEmpty()&&!v(this,mr).isDeleted()}async editComment(e){v(this,mr)||L(this,mr,new Mj(this)),v(this,mr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){v(this,mr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,a=o+s+1,c=i-100,u=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){v(this,mr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=v(this,Kw)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),J(this,Kt,Y$).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),kve(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(v(this,Fy)||L(this,Fy,new AE({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:J(this,Kt,Vve).bind(this),onPinching:J(this,Kt,Uve).bind(this),onPinchEnd:J(this,Kt,zve).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Es.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(L(this,Dy,!0),this._isDraggable){J(this,Kt,Hve).call(this,e);return}J(this,Kt,K$).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){v(this,Od)&&clearTimeout(v(this,Od)),L(this,Od,setTimeout(()=>{var e;L(this,Od,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/i,d=t/i,h=this.x*s,f=this.y*o,p=this.width*s,x=this.height*o;switch(r){case 0:return[h+u+a,o-f-d-x+c,h+u+p+a,o-f-d+c];case 90:return[h+d+a,o-f+u+c,h+d+x+a,o-f+u+p+c];case 180:return[h-u-p+a,o-f+d+c,h-u+a,o-f+d+x+c];case 270:return[h-d-x+a,o-f-u-p+c,h-d+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,o]=e,a=s-r,c=o-i;switch(this.rotation){case 0:return[r,t-o,a,c];case 90:return[r,t-i,c,a];case 180:return[s,t-i,a,c];case 270:return[s,t-o,c,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&hn._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=v(this,mr))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:i,deleted:s,richText:o},uid:a,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:a,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:r||d,popupRef:!s,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),L(this,Ly,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),L(this,Ly,!1),!0):!1}isInEditMode(){return v(this,Ly)}shouldGetKeyboardEvents(){return v(this,mf)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return t<o&&i>0&&e<s&&r>0}rebuild(){J(this,Kt,Y$).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,L(i,Ry,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,o]=i.pageDimensions,[a,c,u,d]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/s,i.y=c/o,i.width=u/s,i.height=d/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=v(this,Up))==null||e.abort(),L(this,Up,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),v(this,Od)&&(clearTimeout(v(this,Od)),L(this,Od,null)),J(this,Kt,Xk).call(this),this.removeEditToolbar(),v(this,vc)){for(const r of v(this,vc).values())clearTimeout(r);L(this,vc,null)}this.parent=null,(t=v(this,Fy))==null||t.destroy(),L(this,Fy,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(J(this,Kt,Bve).call(this),v(this,Fs).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,i,s,o]=this.getPDFRect();return[hn._round(r+(s-r)*e),hn._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return v(this,mr).commentPopupPositionInLayer}set commentPopupPosition(e){v(this,mr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return v(this,mr).hasDefaultPopupPosition()}get commentButtonWidth(){return v(this,mr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){v(this,mr).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),L(this,ff,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=v(this,Fs).children;if(!v(this,iu)){L(this,iu,Array.from(t));const o=J(this,Kt,Wve).bind(this),a=J(this,Kt,qve).bind(this),c=this._uiManager._signal;for(const u of v(this,iu)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",J(this,Kt,Gve).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",hn._l10nResizer[d])}}const r=v(this,iu)[0];let i=0;for(const o of t){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(v(this,iu).length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)v(this,Fs).append(v(this,Fs).firstChild);else if(s>i)for(let a=0;a<s-i;a++)v(this,Fs).firstChild.before(v(this,Fs).lastChild);let o=0;for(const a of t){const u=v(this,iu)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",hn._l10nResizer[u])}}J(this,Kt,X$).call(this,0),L(this,mf,!0),v(this,Fs).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){v(this,mf)&&J(this,Kt,G$).call(this,v(this,z2),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){J(this,Kt,Xk).call(this),this.div.focus()}select(){var e,t,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(r=v(this,Gr))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,r,i,s;this.isSelected&&(this.isSelected=!1,(e=v(this,Fs))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=v(this,Gr))==null||s.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return v(this,H2)}set isEditing(e){L(this,H2,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){v(this,vc)||L(this,vc,new Map);const{action:r}=e;let i=v(this,vc).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),v(this,vc).delete(r),v(this,vc).size===0&&L(this,vc,null)},hn._telemetryTimeout),v(this,vc).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),L(this,Kw,!1)}disable(){this.div&&(this.div.tabIndex=-1),L(this,Kw,!0)}updateFakeAnnotationElement(e){if(!v(this,Id)&&!this.deleted){L(this,Id,e.addFakeAnnotation(this));return}if(this.deleted){v(this,Id).remove(),L(this,Id,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&v(this,Id).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ry=new WeakMap,iu=new WeakMap,Gr=new WeakMap,mr=new WeakMap,hf=new WeakMap,Kw=new WeakMap,Vp=new WeakMap,U2=new WeakMap,Fs=new WeakMap,My=new WeakMap,ff=new WeakMap,Id=new WeakMap,Up=new WeakMap,z2=new WeakMap,Dy=new WeakMap,sl=new WeakMap,H2=new WeakMap,Ly=new WeakMap,mf=new WeakMap,Od=new WeakMap,Yw=new WeakMap,Xw=new WeakMap,vc=new WeakMap,Fy=new WeakMap,W2=new WeakMap,TR=new WeakMap,Kt=new WeakSet,H$=function([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},q2=new WeakSet,W$=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},PP=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},Bve=function(){if(v(this,Fs))return;L(this,Fs,document.createElement("div")),v(this,Fs).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");v(this,Fs).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",J(this,Kt,$ve).bind(this,r),{signal:t}),i.addEventListener("contextmenu",Ul,{signal:t}),i.tabIndex=-1}this.div.prepend(v(this,Fs))},$ve=function(e,t){var d;t.preventDefault();const{isMac:r}=Es.platform;if(t.button!==0||t.ctrlKey&&r)return;(d=v(this,Gr))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,L(this,My,[t.screenX,t.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",J(this,Kt,G$).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ii,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ul,{signal:o}),L(this,ff,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=v(this,Gr))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=c,J(this,Kt,IP).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},q$=function(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},IP=function(){if(!v(this,ff))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=v(this,ff);L(this,ff,null);const s=this.x,o=this.y,a=this.width,c=this.height;s===e&&o===t&&a===r&&c===i||this.addCommands({cmd:J(this,Kt,q$).bind(this,s,o,a,c),undo:J(this,Kt,q$).bind(this,e,t,r,i),mustExec:!0})},G$=function(e,t){const[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,c=this.height,u=hn.MIN_SIZE/r,d=hn.MIN_SIZE/i,h=J(this,Kt,PP).call(this,this.rotation),f=(U,R)=>[h[0]*U+h[2]*R,h[1]*U+h[3]*R],p=J(this,Kt,PP).call(this,360-this.rotation),x=(U,R)=>[p[0]*U+p[2]*R,p[1]*U+p[3]*R];let y,b,_=!1,C=!1;switch(e){case"topLeft":_=!0,y=(U,R)=>[0,0],b=(U,R)=>[U,R];break;case"topMiddle":y=(U,R)=>[U/2,0],b=(U,R)=>[U/2,R];break;case"topRight":_=!0,y=(U,R)=>[U,0],b=(U,R)=>[0,R];break;case"middleRight":C=!0,y=(U,R)=>[U,R/2],b=(U,R)=>[0,R/2];break;case"bottomRight":_=!0,y=(U,R)=>[U,R],b=(U,R)=>[0,0];break;case"bottomMiddle":y=(U,R)=>[U/2,R],b=(U,R)=>[U/2,0];break;case"bottomLeft":_=!0,y=(U,R)=>[0,R],b=(U,R)=>[U,0];break;case"middleLeft":C=!0,y=(U,R)=>[0,R/2],b=(U,R)=>[U,R/2];break}const k=y(a,c),T=b(a,c);let E=f(...T);const N=hn._round(s+E[0]),P=hn._round(o+E[1]);let M=1,O=1,q,D;if(t.fromKeyboard)({deltaX:q,deltaY:D}=t);else{const{screenX:U,screenY:R}=t,[z,W]=v(this,My);[q,D]=this.screenToPageTranslation(U-z,R-W),v(this,My)[0]=U,v(this,My)[1]=R}if([q,D]=x(q/r,D/i),_){const U=Math.hypot(a,c);M=O=Math.max(Math.min(Math.hypot(T[0]-k[0]-q,T[1]-k[1]-D)/U,1/a,1/c),u/a,d/c)}else C?M=vo(Math.abs(T[0]-k[0]-q),u,1)/a:O=vo(Math.abs(T[1]-k[1]-D),d,1)/c;const F=hn._round(a*M),K=hn._round(c*O);E=f(...b(F,K));const ee=N-E[0],Y=P-E[1];v(this,sl)||L(this,sl,[this.x,this.y,this.width,this.height]),this.width=F,this.height=K,this.x=ee,this.y=Y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Vve=function(){var e;L(this,ff,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=v(this,Gr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Uve=function(e,t,r){let s=.7*(r/t)+1-.7;if(s===1)return;const o=J(this,Kt,PP).call(this,this.rotation),a=(N,P)=>[o[0]*N+o[2]*P,o[1]*N+o[3]*P],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,x=hn.MIN_SIZE/c,y=hn.MIN_SIZE/u;s=Math.max(Math.min(s,1/f,1/p),x/f,y/p);const b=hn._round(f*s),_=hn._round(p*s);if(b===f&&_===p)return;v(this,sl)||L(this,sl,[d,h,f,p]);const C=a(f/2,p/2),k=hn._round(d+C[0]),T=hn._round(h+C[1]),E=a(b/2,_/2);this.x=k-E[0],this.y=T-E[1],this.width=b,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()},zve=function(){var e;(e=v(this,Gr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),J(this,Kt,IP).call(this)},K$=function(e){const{isMac:t}=Es.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Hve=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},a=u=>{i.abort(),L(this,Vp,null),L(this,Dy,!1),this._uiManager.endDragSession()||J(this,Kt,K$).call(this,u),r&&this._onStopDragging()};t&&(L(this,Yw,e.clientX),L(this,Xw,e.clientY),L(this,Vp,e.pointerId),L(this,U2,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==v(this,Vp)){ii(u);return}const[p,x]=this.screenToPageTranslation(d-v(this,Yw),h-v(this,Xw));L(this,Yw,d),L(this,Xw,h),this._uiManager.dragSelectedEditors(p,x)},o),window.addEventListener("touchmove",ii,o),window.addEventListener("pointerdown",u=>{u.pointerType===v(this,U2)&&(v(this,Fy)||u.isPrimary)&&a(u),ii(u)},o));const c=u=>{if(!v(this,Vp)||v(this,Vp)===u.pointerId){a(u);return}ii(u)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},Y$=function(){if(v(this,Up)||!this.div)return;L(this,Up,new AbortController);const e=this._uiManager.combinedSignal(v(this,Up));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Wve=function(e){hn._resizerKeyboardManager.exec(this,e)},qve=function(e){var t;v(this,mf)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==v(this,Fs)&&J(this,Kt,Xk).call(this)},Gve=function(e){L(this,z2,v(this,mf)?e:"")},X$=function(e){if(v(this,iu))for(const t of v(this,iu))t.tabIndex=e},Xk=function(){L(this,mf,!1),J(this,Kt,X$).call(this,-1),J(this,Kt,IP).call(this)},G(hn,q2),j(hn,"_l10n",null),j(hn,"_l10nResizer",null),j(hn,"_borderLineWidth",-1),j(hn,"_colorManager",new D$),j(hn,"_zIndex",1),j(hn,"_telemetryTimeout",1e3);let Nr=hn;class zKe extends Nr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const CZ=3285377520,tc=4294901760,vd=65535;class Kve{constructor(e){this.h1=e?e&4294967295:CZ,this.h2=e?e&4294967295:CZ}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let y=0,b=e.length;y<b;y++){const _=e.charCodeAt(y);_<=255?t[r++]=_:(t[r++]=_>>>8,t[r++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&vd,x=f&vd;for(let y=0;y<i;y++)y&1?(a=o[y],a=a*h&tc|a*p&vd,a=a<<15|a>>>17,a=a*f&tc|a*x&vd,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[y],c=c*h&tc|c*p&vd,c=c<<15|c>>>17,c=c*f&tc|c*x&vd,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,s){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*h&tc|a*p&vd,a=a<<15|a>>>17,a=a*f&tc|a*x&vd,i&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&tc|e*36045&vd,t=t*4283543511&tc|((t<<16|e>>>16)*2950163797&tc)>>>16,e^=t>>>1,e=e*444984403&tc|e*60499&vd,t=t*3301882366&tc|((t<<16|e>>>16)*3120437893&tc)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const J$=Object.freeze({map:null,hash:"",transfer:void 0});var By,$y,pf,Bs,AR,Yve;class eH{constructor(){G(this,AR);G(this,By,!1);G(this,$y,null);G(this,pf,null);G(this,Bs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=v(this,Bs).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return v(this,Bs).get(e)}remove(e){const t=v(this,Bs).get(e);if(t!==void 0&&(t instanceof Nr&&v(this,pf).delete(t.annotationElementId),v(this,Bs).delete(e),v(this,Bs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of v(this,Bs).values())if(r instanceof Nr)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=v(this,Bs).get(e);let i=!1;if(r!==void 0)for(const[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,v(this,Bs).set(e,t);i&&J(this,AR,Yve).call(this),t instanceof Nr&&((v(this,pf)||L(this,pf,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return v(this,Bs).has(e)}get size(){return v(this,Bs).size}resetModified(){v(this,By)&&(L(this,By,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Xve(this)}get serializable(){if(v(this,Bs).size===0)return J$;const e=new Map,t=new Kve,r=[],i=Object.create(null);let s=!1;for(const[o,a]of v(this,Bs)){const c=a instanceof Nr?a.serialize(!1,i):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:J$}get editorStats(){let e=null;const t=new Map;let r=0,i=0;for(const s of v(this,Bs).values()){if(!(s instanceof Nr)){s.popup&&(s.popup.deleted?i+=1:r+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(r+=1);const o=s.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const c=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((i>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:r}),!e)return null;for(const[s,o]of t)e[s]=o.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){L(this,$y,null)}updateEditor(e,t){var i;const r=(i=v(this,pf))==null?void 0:i.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=v(this,pf))==null?void 0:t.get(e))||null}get modifiedIds(){if(v(this,$y))return v(this,$y);const e=[];if(v(this,pf))for(const t of v(this,pf).values())t.serialize()&&e.push(t.annotationElementId);return L(this,$y,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return v(this,Bs).entries()}}By=new WeakMap,$y=new WeakMap,pf=new WeakMap,Bs=new WeakMap,AR=new WeakSet,Yve=function(){v(this,By)||(L(this,By,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var G2;class Xve extends eH{constructor(t){super();G(this,G2);const{map:r,hash:i,transfer:s}=t.serializable,o=structuredClone(r,s?{transfer:s}:null);L(this,G2,{map:o,hash:i,transfer:s})}get print(){xr("Should not call PrintAnnotationStorage.print")}get serializable(){return v(this,G2)}get modifiedIds(){return gn(this,"modifiedIds",{ids:new Set,hash:""})}}G2=new WeakMap;var Jw;class HKe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){G(this,Jw,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),v(this,Jw).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||v(this,Jw).has(e.loadedName))){if(In(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:o}=e,a=new FontFace(i,s,o);this.addNativeFontFace(a);try{await a.load(),v(this,Jw).add(i),r==null||r(e)}catch{cn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}xr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw cn(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return gn(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return gn(this,"isSyncFontLoadingSupported",Ro||Es.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(In(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return gn(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(T,E){return T.charCodeAt(E)<<24|T.charCodeAt(E+1)<<16|T.charCodeAt(E+2)<<8|T.charCodeAt(E+3)&255}function i(T,E,N,P){const M=T.substring(0,E),O=T.substring(E+N);return M+P+O}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function d(T,E){if(++u>30){cn("Load test font never loaded."),E();return}if(c.font="30px "+T,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(d.bind(null,T,E))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const x=16,y=1482184792;let b=r(f,x);for(s=0,o=h.length-3;s<o;s+=4)b=b-y+r(h,s)|0;s<h.length&&(b=b-y+r(h+"XXX",s)|0),f=i(f,x,4,PKe(b));const _=`url(data:font/opentype;base64,${btoa(f)});`,C=`@font-face {font-family:"${h}";src:${_}}`;this.insertRule(C);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const T of[e.loadedName,h]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=T,k.append(E)}this._document.body.append(k),d(h,()=>{k.remove(),t.complete()})}}Jw=new WeakMap;var rr;class WKe{constructor(e,t=null,r,i){G(this,rr);this.compiledGlyphs=Object.create(null),L(this,rr,e),this._inspectFont=t,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${hve(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(o){cn(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=s}get black(){return v(this,rr).black}get bold(){return v(this,rr).bold}get disableFontFace(){return v(this,rr).disableFontFace??!1}get fontExtraProperties(){return v(this,rr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return v(this,rr).isInvalidPDFjsFont}get isType3Font(){return v(this,rr).isType3Font}get italic(){return v(this,rr).italic}get missingFile(){return v(this,rr).missingFile}get remeasure(){return v(this,rr).remeasure}get vertical(){return v(this,rr).vertical}get ascent(){return v(this,rr).ascent}get defaultWidth(){return v(this,rr).defaultWidth}get descent(){return v(this,rr).descent}get bbox(){return v(this,rr).bbox}get fontMatrix(){return v(this,rr).fontMatrix}get fallbackName(){return v(this,rr).fallbackName}get loadedName(){return v(this,rr).loadedName}get mimetype(){return v(this,rr).mimetype}get name(){return v(this,rr).name}get data(){return v(this,rr).data}clearData(){v(this,rr).clearData()}get cssFontInfo(){return v(this,rr).cssFontInfo}get systemFontInfo(){return v(this,rr).systemFontInfo}get defaultVMetrics(){return v(this,rr).defaultVMetrics}}rr=new WeakMap;function qKe(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Ro)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function GKe(n){if(Ro&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return LA(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Dj(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Q$=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,KKe=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",Jve=MKe.bind(null,Q$,KKe);var gf,NR;class YKe{constructor(){G(this,gf,new Map);G(this,NR,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};v(this,NR).then(()=>{for(const[i]of v(this,gf))i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){cn("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}v(this,gf).set(t,i)}removeEventListener(e,t){const r=v(this,gf).get(t);r==null||r(),v(this,gf).delete(t)}terminate(){for(const[,e]of v(this,gf))e==null||e();v(this,gf).clear()}}gf=new WeakMap,NR=new WeakMap;const Lj={DATA:1,ERROR:2},Di={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function EZ(){}function fa(n){if(n instanceof mm||n instanceof sO||n instanceof yZ||n instanceof CE||n instanceof U5)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||xr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new mm(n.message);case"InvalidPDFException":return new sO(n.message);case"PasswordException":return new yZ(n.message,n.code);case"ResponseException":return new CE(n.message,n.status,n.missing);case"UnknownErrorException":return new U5(n.message,n.details)}return new U5(n.message,n.toString())}var Qw,Tc,Qve,Zve,eye,OP;class Jk{constructor(e,t,r){G(this,Tc);G(this,Qw,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",J(this,Tc,Qve).bind(this),{signal:v(this,Qw).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:u.desiredSize},i),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,c.postMessage({sourceName:o,targetName:a,stream:Di.PULL,streamId:s,desiredSize:u.desiredSize}),d.promise},cancel:u=>{In(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Di.CANCEL,streamId:s,reason:fa(u)}),d.promise}},r)}destroy(){var e;(e=v(this,Qw))==null||e.abort(),L(this,Qw,null)}}Qw=new WeakMap,Tc=new WeakSet,Qve=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){J(this,Tc,eye).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Lj.DATA)i.resolve(e.data);else if(e.callback===Lj.ERROR)i.reject(fa(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:Lj.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:Lj.ERROR,callbackId:e.callbackId,reason:fa(o)})});return}if(e.streamId){J(this,Tc,Zve).call(this,e);return}t(e.data)},Zve=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:Di.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Di.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){In(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Di.ERROR,streamId:t,reason:fa(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(a,e.data,c).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Di.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:r,targetName:i,stream:Di.START_COMPLETE,streamId:t,reason:fa(u)})})},eye=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Di.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(fa(e.reason));break;case Di.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(fa(e.reason));break;case Di.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:Di.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||EZ).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Di.PULL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:r,targetName:i,stream:Di.PULL_COMPLETE,streamId:t,reason:fa(u)})});break;case Di.ENQUEUE:if(In(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Di.CLOSE:if(In(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),J(this,Tc,OP).call(this,o,t);break;case Di.ERROR:In(o,"error should have stream controller"),o.controller.error(fa(e.reason)),J(this,Tc,OP).call(this,o,t);break;case Di.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(fa(e.reason)),J(this,Tc,OP).call(this,o,t);break;case Di.CANCEL:if(!a)break;const c=fa(e.reason);Promise.try(a.onCancel||EZ,c).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Di.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:r,targetName:i,stream:Di.CANCEL_COMPLETE,streamId:t,reason:fa(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},OP=async function(e,t){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var K2;class tye{constructor({enableHWA:e=!1}){G(this,K2,!1);L(this,K2,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!v(this,K2)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){xr("Abstract method `_createCanvas` called.")}}K2=new WeakMap;class XKe extends tye{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class nye{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){xr("Abstract method `_fetch` called.")}}class TZ extends nye{async _fetch(e){const t=await vS(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):LA(t)}}class rye{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}var Vy,Zw,vf,yf,fo,Uy,zy,Ct,lo,Qk,Pb,RP,Ib,iye,Z$,Ob,Zk,eC,e7,tC;class JKe extends rye{constructor({docId:t,ownerDocument:r=globalThis.document}){super();G(this,Ct);G(this,Vy);G(this,Zw);G(this,vf);G(this,yf);G(this,fo);G(this,Uy);G(this,zy,0);L(this,yf,t),L(this,fo,r)}addFilter(t){if(!t)return"none";let r=v(this,Ct,lo).get(t);if(r)return r;const[i,s,o]=J(this,Ct,RP).call(this,t),a=t.length===1?i:`${i}${s}${o}`;if(r=v(this,Ct,lo).get(a),r)return v(this,Ct,lo).set(t,r),r;const c=`g_${v(this,yf)}_transfer_map_${pi(this,zy)._++}`,u=J(this,Ct,Ib).call(this,c);v(this,Ct,lo).set(t,u),v(this,Ct,lo).set(a,u);const d=J(this,Ct,Ob).call(this,c);return J(this,Ct,eC).call(this,i,s,o,d),u}addHCMFilter(t,r){var x;const i=`${t}-${r}`,s="base";let o=v(this,Ct,Qk).get(s);if((o==null?void 0:o.key)===i||(o?((x=o.filter)==null||x.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},v(this,Ct,Qk).set(s,o)),!t||!r))return o.url;const a=J(this,Ct,tC).call(this,t);t=Tt.makeHexColor(...a);const c=J(this,Ct,tC).call(this,r);if(r=Tt.makeHexColor(...c),v(this,Ct,Pb).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const u=new Array(256);for(let y=0;y<=255;y++){const b=y/255;u[y]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const d=u.join(","),h=`g_${v(this,yf)}_hcm_filter`,f=o.filter=J(this,Ct,Ob).call(this,h);J(this,Ct,eC).call(this,d,d,d,f),J(this,Ct,Z$).call(this,f);const p=(y,b)=>{const _=a[y]/255,C=c[y]/255,k=new Array(b+1);for(let T=0;T<=b;T++)k[T]=_+T/b*(C-_);return k.join(",")};return J(this,Ct,eC).call(this,p(0,5),p(1,5),p(2,5),f),o.url=J(this,Ct,Ib).call(this,h),o.url}addAlphaFilter(t){let r=v(this,Ct,lo).get(t);if(r)return r;const[i]=J(this,Ct,RP).call(this,[t]),s=`alpha_${i}`;if(r=v(this,Ct,lo).get(s),r)return v(this,Ct,lo).set(t,r),r;const o=`g_${v(this,yf)}_alpha_map_${pi(this,zy)._++}`,a=J(this,Ct,Ib).call(this,o);v(this,Ct,lo).set(t,a),v(this,Ct,lo).set(s,a);const c=J(this,Ct,Ob).call(this,o);return J(this,Ct,e7).call(this,i,c),a}addLuminosityFilter(t){let r=v(this,Ct,lo).get(t||"luminosity");if(r)return r;let i,s;if(t?([i]=J(this,Ct,RP).call(this,[t]),s=`luminosity_${i}`):s="luminosity",r=v(this,Ct,lo).get(s),r)return v(this,Ct,lo).set(t,r),r;const o=`g_${v(this,yf)}_luminosity_map_${pi(this,zy)._++}`,a=J(this,Ct,Ib).call(this,o);v(this,Ct,lo).set(t,a),v(this,Ct,lo).set(s,a);const c=J(this,Ct,Ob).call(this,o);return J(this,Ct,iye).call(this,c),t&&J(this,Ct,e7).call(this,i,c),a}addHighlightHCMFilter(t,r,i,s,o){var C;const a=`${r}-${i}-${s}-${o}`;let c=v(this,Ct,Qk).get(t);if((c==null?void 0:c.key)===a||(c?((C=c.filter)==null||C.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},v(this,Ct,Qk).set(t,c)),!r||!i))return c.url;const[u,d]=[r,i].map(J(this,Ct,tC).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,x]=[s,o].map(J(this,Ct,tC).bind(this));f<h&&([h,f,p,x]=[f,h,x,p]),v(this,Ct,Pb).style.color="";const y=(k,T,E)=>{const N=new Array(256),P=(f-h)/E,M=k/255,O=(T-k)/(255*E);let q=0;for(let D=0;D<=E;D++){const F=Math.round(h+D*P),K=M+D*O;for(let ee=q;ee<=F;ee++)N[ee]=K;q=F+1}for(let D=q;D<256;D++)N[D]=N[q-1];return N.join(",")},b=`g_${v(this,yf)}_hcm_${t}_filter`,_=c.filter=J(this,Ct,Ob).call(this,b);return J(this,Ct,Z$).call(this,_),J(this,Ct,eC).call(this,y(p[0],x[0],5),y(p[1],x[1],5),y(p[2],x[2],5),_),c.url=J(this,Ct,Ib).call(this,b),c.url}destroy(t=!1){var r,i,s,o;t&&((r=v(this,Uy))!=null&&r.size)||((i=v(this,vf))==null||i.parentNode.parentNode.remove(),L(this,vf,null),(s=v(this,Zw))==null||s.clear(),L(this,Zw,null),(o=v(this,Uy))==null||o.clear(),L(this,Uy,null),L(this,zy,0))}}Vy=new WeakMap,Zw=new WeakMap,vf=new WeakMap,yf=new WeakMap,fo=new WeakMap,Uy=new WeakMap,zy=new WeakMap,Ct=new WeakSet,lo=function(){return v(this,Zw)||L(this,Zw,new Map)},Qk=function(){return v(this,Uy)||L(this,Uy,new Map)},Pb=function(){if(!v(this,vf)){const t=v(this,fo).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=v(this,fo).createElementNS(Xh,"svg");i.setAttribute("width",0),i.setAttribute("height",0),L(this,vf,v(this,fo).createElementNS(Xh,"defs")),t.append(i),i.append(v(this,vf)),v(this,fo).body.append(t)}return v(this,vf)},RP=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[r,i,s]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=r[u]/255,a[u]=i[u]/255,c[u]=s[u]/255;return[o.join(","),a.join(","),c.join(",")]},Ib=function(t){if(v(this,Vy)===void 0){L(this,Vy,"");const r=v(this,fo).URL;r!==v(this,fo).baseURI&&(BA(r)?cn('#createUrl: ignore "data:"-URL for performance reasons.'):L(this,Vy,Yz(r,"")))}return`url(${v(this,Vy)}#${t})`},iye=function(t){const r=v(this,fo).createElementNS(Xh,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},Z$=function(t){const r=v(this,fo).createElementNS(Xh,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Ob=function(t){const r=v(this,fo).createElementNS(Xh,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),v(this,Ct,Pb).append(r),r},Zk=function(t,r,i){const s=v(this,fo).createElementNS(Xh,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},eC=function(t,r,i,s){const o=v(this,fo).createElementNS(Xh,"feComponentTransfer");s.append(o),J(this,Ct,Zk).call(this,o,"feFuncR",t),J(this,Ct,Zk).call(this,o,"feFuncG",r),J(this,Ct,Zk).call(this,o,"feFuncB",i)},e7=function(t,r){const i=v(this,fo).createElementNS(Xh,"feComponentTransfer");r.append(i),J(this,Ct,Zk).call(this,i,"feFuncA",t)},tC=function(t){return v(this,Ct,Pb).style.color=t,yS(getComputedStyle(v(this,Ct,Pb)).getPropertyValue("color"))};class sye{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){xr("Abstract method `_fetch` called.")}}class AZ extends sye{async _fetch(e){const t=await vS(e,"arraybuffer");return new Uint8Array(t)}}class oye{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){xr("Abstract method `_fetch` called.")}}class NZ extends oye{async _fetch(e){const t=await vS(e,"arraybuffer");return new Uint8Array(t)}}Ro&&cn("Please use the `legacy` build in Node.js environments.");async function tH(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class QKe extends rye{}class ZKe extends tye{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class eYe extends nye{async _fetch(e){return tH(e)}}class tYe extends sye{async _fetch(e){return tH(e)}}class nYe extends oye{async _fetch(e){return tH(e)}}const xb="__forcedDependency",{floor:jZ,ceil:PZ}=Math;function Fj(n,e,t,r,i,s){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],s)}const t7=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var e1,zp;class rYe{constructor(e,t){G(this,e1);G(this,zp);L(this,e1,e),L(this,zp,t)}get length(){return v(this,e1).length}isEmpty(e){return v(this,e1)[e]===t7}minX(e){return v(this,zp)[e*4+0]/256}minY(e){return v(this,zp)[e*4+1]/256}maxX(e){return(v(this,zp)[e*4+2]+1)/256}maxY(e){return(v(this,zp)[e*4+3]+1)/256}}e1=new WeakMap,zp=new WeakMap;const Bj=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var ga,va,Hy,su,Wy,xf,Qn,ir,bf,ya,Y2,t1,qy,Gy,wf,mo,Rd,X2,n7;class iYe{constructor(e,t,r=!1){G(this,X2);G(this,ga,{__proto__:null});G(this,va,{__proto__:null,transform:[],moveText:[],sameLineText:[],[xb]:[]});G(this,Hy,new Map);G(this,su,[]);G(this,Wy,[]);G(this,xf,[[1,0,0,1,0,0]]);G(this,Qn,[-1/0,-1/0,1/0,1/0]);G(this,ir,new Float64Array([1/0,1/0,-1/0,-1/0]));G(this,bf,-1);G(this,ya,new Set);G(this,Y2,new Map);G(this,t1,new Map);G(this,qy);G(this,Gy);G(this,wf);G(this,mo);G(this,Rd);L(this,qy,e.width),L(this,Gy,e.height),J(this,X2,n7).call(this,t),r&&L(this,Rd,new Map)}growOperationsCount(e){e>=v(this,mo).length&&J(this,X2,n7).call(this,e,v(this,mo))}save(e){return L(this,ga,{__proto__:v(this,ga)}),L(this,va,{__proto__:v(this,va),transform:{__proto__:v(this,va).transform},moveText:{__proto__:v(this,va).moveText},sameLineText:{__proto__:v(this,va).sameLineText},[xb]:{__proto__:v(this,va)[xb]}}),L(this,Qn,{__proto__:v(this,Qn)}),v(this,su).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(v(this,ga));if(t===null)return this;L(this,ga,t),L(this,va,Object.getPrototypeOf(v(this,va))),L(this,Qn,Object.getPrototypeOf(v(this,Qn)));const r=v(this,su).pop();return r!==void 0&&((i=Bj(v(this,Rd),e))==null||i.dependencies.add(r),v(this,mo)[e]=v(this,mo)[r]),this}recordOpenMarker(e){return v(this,su).push(e),this}getOpenMarker(){return v(this,su).length===0?null:v(this,su).at(-1)}recordCloseMarker(e){var r;const t=v(this,su).pop();return t!==void 0&&((r=Bj(v(this,Rd),e))==null||r.dependencies.add(t),v(this,mo)[e]=v(this,mo)[t]),this}beginMarkedContent(e){return v(this,Wy).push(e),this}endMarkedContent(e){var r;const t=v(this,Wy).pop();return t!==void 0&&((r=Bj(v(this,Rd),e))==null||r.dependencies.add(t),v(this,mo)[e]=v(this,mo)[t]),this}pushBaseTransform(e){return v(this,xf).push(Tt.multiplyByDOMMatrix(v(this,xf).at(-1),e.getTransform())),this}popBaseTransform(){return v(this,xf).length>1&&v(this,xf).pop(),this}recordSimpleData(e,t){return v(this,ga)[e]=t,this}recordIncrementalData(e,t){return v(this,va)[e].push(t),this}resetIncrementalData(e,t){return v(this,va)[e].length=0,this}recordNamedData(e,t){return v(this,Hy).set(e,t),this}recordSimpleDataFromNamed(e,t,r){v(this,ga)[e]=v(this,Hy).get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(xb,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in v(this,ga)&&this.recordFutureForcedDependency(t,v(this,ga)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of v(this,ya))this.recordFutureForcedDependency(xb,e);return this}resetBBox(e){return v(this,bf)!==e&&(L(this,bf,e),v(this,ir)[0]=1/0,v(this,ir)[1]=1/0,v(this,ir)[2]=-1/0,v(this,ir)[3]=-1/0),this}recordClipBox(e,t,r,i,s,o){const a=Tt.multiplyByDOMMatrix(v(this,xf).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];Tt.axialAlignedBoundingBox([r,s,i,o],a,c);const u=Tt.intersect(v(this,Qn),c);return u?(v(this,Qn)[0]=u[0],v(this,Qn)[1]=u[1],v(this,Qn)[2]=u[2],v(this,Qn)[3]=u[3]):(v(this,Qn)[0]=v(this,Qn)[1]=1/0,v(this,Qn)[2]=v(this,Qn)[3]=-1/0),this}recordBBox(e,t,r,i,s,o){const a=v(this,Qn);if(a[0]===1/0)return this;const c=Tt.multiplyByDOMMatrix(v(this,xf).at(-1),t.getTransform());if(a[0]===-1/0)return Tt.axialAlignedBoundingBox([r,s,i,o],c,v(this,ir)),this;const u=[1/0,1/0,-1/0,-1/0];return Tt.axialAlignedBoundingBox([r,s,i,o],c,u),v(this,ir)[0]=Math.min(v(this,ir)[0],Math.max(u[0],a[0])),v(this,ir)[1]=Math.min(v(this,ir)[1],Math.max(u[1],a[1])),v(this,ir)[2]=Math.max(v(this,ir)[2],Math.min(u[2],a[2])),v(this,ir)[3]=Math.max(v(this,ir)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(e,t,r,i=1,s=0,o=0,a){const c=r.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&v(this,t1).get(r),u!==!1&&(d=[0,0,0,0],Tt.axialAlignedBoundingBox(c,r.fontMatrix,d),(i!==1||s!==0||o!==0)&&Tt.scaleMinMax([i,0,0,-i,s,o],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return c&&d&&u===void 0&&(u=d[0]<=s-h.actualBoundingBoxLeft&&d[2]>=s+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,v(this,t1).set(r,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return v(this,ir)[0]=Math.max(0,v(this,Qn)[0]),v(this,ir)[1]=Math.max(0,v(this,Qn)[1]),v(this,ir)[2]=Math.min(v(this,qy),v(this,Qn)[2]),v(this,ir)[3]=Math.min(v(this,Gy),v(this,Qn)[3]),this}getSimpleIndex(e){return v(this,ga)[e]}recordDependencies(e,t){const r=v(this,ya),i=v(this,ga),s=v(this,va);for(const o of t)o in v(this,ga)?r.add(i[o]):o in s&&s[o].forEach(r.add,r);return this}recordNamedDependency(e,t){return v(this,Hy).has(t)&&v(this,ya).add(v(this,Hy).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[xb]),v(this,Rd)){const r=Bj(v(this,Rd),e),{dependencies:i}=r;v(this,ya).forEach(i.add,i),v(this,su).forEach(i.add,i),v(this,Wy).forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(v(this,bf)===e){const r=jZ(v(this,ir)[0]*256/v(this,qy)),i=jZ(v(this,ir)[1]*256/v(this,Gy)),s=PZ(v(this,ir)[2]*256/v(this,qy)),o=PZ(v(this,ir)[3]*256/v(this,Gy));Fj(v(this,wf),e,r,i,s,o);for(const a of v(this,ya))a!==e&&Fj(v(this,wf),a,r,i,s,o);for(const a of v(this,su))a!==e&&Fj(v(this,wf),a,r,i,s,o);for(const a of v(this,Wy))a!==e&&Fj(v(this,wf),a,r,i,s,o);t||(v(this,ya).clear(),L(this,bf,-1))}return this}recordShowTextOperation(e,t=!1){const r=Array.from(v(this,ya));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return v(this,bf)===e&&(L(this,bf,-1),v(this,Qn)[0]=Math.max(v(this,Qn)[0],v(this,ir)[0]),v(this,Qn)[1]=Math.max(v(this,Qn)[1],v(this,ir)[1]),v(this,Qn)[2]=Math.min(v(this,Qn)[2],v(this,ir)[2]),v(this,Qn)[3]=Math.min(v(this,Qn)[3],v(this,ir)[3]),t||v(this,ya).clear()),this}_takePendingDependencies(){const e=v(this,ya);return L(this,ya,new Set),e}_extractOperation(e){const t=v(this,Y2).get(e);return v(this,Y2).delete(e),t}_pushPendingDependencies(e){for(const t of e)v(this,ya).add(t)}take(){return v(this,t1).clear(),new rYe(v(this,mo),v(this,wf))}takeDebugMetadata(){return v(this,Rd)}}ga=new WeakMap,va=new WeakMap,Hy=new WeakMap,su=new WeakMap,Wy=new WeakMap,xf=new WeakMap,Qn=new WeakMap,ir=new WeakMap,bf=new WeakMap,ya=new WeakMap,Y2=new WeakMap,t1=new WeakMap,qy=new WeakMap,Gy=new WeakMap,wf=new WeakMap,mo=new WeakMap,Rd=new WeakMap,X2=new WeakSet,n7=function(e,t){const r=new ArrayBuffer(e*4);L(this,wf,new Uint8ClampedArray(r)),L(this,mo,new Uint32Array(r)),t&&t.length>0?(v(this,mo).set(t),v(this,mo).fill(t7,t.length)):v(this,mo).fill(t7)};var pr,yi,ou,n1,r1;const IW=class IW{constructor(e,t,r){G(this,pr);G(this,yi);G(this,ou);G(this,n1,0);G(this,r1,0);if(e instanceof IW&&v(e,ou)===!!r)return e;L(this,pr,e),L(this,yi,t),L(this,ou,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return pi(this,r1)._++,v(this,pr).save(v(this,yi)),this}restore(e){return v(this,r1)>0&&(v(this,pr).restore(v(this,yi)),pi(this,r1)._--),this}recordOpenMarker(e){return pi(this,n1)._++,this}getOpenMarker(){return v(this,n1)>0?v(this,yi):v(this,pr).getOpenMarker()}recordCloseMarker(e){return pi(this,n1)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return v(this,pr).pushBaseTransform(e),this}popBaseTransform(){return v(this,pr).popBaseTransform(),this}recordSimpleData(e,t){return v(this,pr).recordSimpleData(e,v(this,yi)),this}recordIncrementalData(e,t){return v(this,pr).recordIncrementalData(e,v(this,yi)),this}resetIncrementalData(e,t){return v(this,pr).resetIncrementalData(e,v(this,yi)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return v(this,pr).recordSimpleDataFromNamed(e,t,v(this,yi)),this}recordFutureForcedDependency(e,t){return v(this,pr).recordFutureForcedDependency(e,v(this,yi)),this}inheritSimpleDataAsFutureForcedDependencies(e){return v(this,pr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return v(this,pr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return v(this,ou)||v(this,pr).resetBBox(v(this,yi)),this}recordClipBox(e,t,r,i,s,o){return v(this,ou)||v(this,pr).recordClipBox(v(this,yi),t,r,i,s,o),this}recordBBox(e,t,r,i,s,o){return v(this,ou)||v(this,pr).recordBBox(v(this,yi),t,r,i,s,o),this}recordCharacterBBox(e,t,r,i,s,o,a){return v(this,ou)||v(this,pr).recordCharacterBBox(v(this,yi),t,r,i,s,o,a),this}recordFullPageBBox(e){return v(this,ou)||v(this,pr).recordFullPageBBox(v(this,yi)),this}getSimpleIndex(e){return v(this,pr).getSimpleIndex(e)}recordDependencies(e,t){return v(this,pr).recordDependencies(v(this,yi),t),this}recordNamedDependency(e,t){return v(this,pr).recordNamedDependency(v(this,yi),t),this}recordOperation(e){return v(this,pr).recordOperation(v(this,yi),!0),this}recordShowTextOperation(e){return v(this,pr).recordShowTextOperation(v(this,yi),!0),this}bboxToClipBoxDropOperation(e){return v(this,ou)||v(this,pr).bboxToClipBoxDropOperation(v(this,yi),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};pr=new WeakMap,yi=new WeakMap,ou=new WeakMap,n1=new WeakMap,r1=new WeakMap;let lO=IW;const nc={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Hs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function r7(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class nH{isModifyingCurrentTransform(){return!1}getPattern(){xr("Abstract method `getPattern` called.")}}class sYe extends nH{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===Hs.STROKE||i===Hs.FILL){const o=t.current.getClippedPathBoundingBox(i,ri(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),r=Tt.transform(r,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),r7(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(r);s.setTransform(h)}else r7(e,this._bbox),s=this._createGradient(e);return s}}function W5(n,e,t,r,i,s,o,a){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=s,s=o,o=f),c[r+1]>c[i+1]&&(f=r,r=i,i=f,f=o,o=a,a=f),c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=s,s=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,x=(c[t+1]+e.offsetY)*e.scaleY,y=(c[r]+e.offsetX)*e.scaleX,b=(c[r+1]+e.offsetY)*e.scaleY,_=(c[i]+e.offsetX)*e.scaleX,C=(c[i+1]+e.offsetY)*e.scaleY;if(x>=C)return;const k=u[s],T=u[s+1],E=u[s+2],N=u[o],P=u[o+1],M=u[o+2],O=u[a],q=u[a+1],D=u[a+2],F=Math.round(x),K=Math.round(C);let ee,Y,U,R,z,W,se,ne;for(let te=F;te<=K;te++){if(te<b){const ve=te<x?0:(x-te)/(x-b);ee=p-(p-y)*ve,Y=k-(k-N)*ve,U=T-(T-P)*ve,R=E-(E-M)*ve}else{let ve;te>C?ve=1:b===C?ve=0:ve=(b-te)/(b-C),ee=y-(y-_)*ve,Y=N-(N-O)*ve,U=P-(P-q)*ve,R=M-(M-D)*ve}let H;te<x?H=0:te>C?H=1:H=(x-te)/(x-C),z=p-(p-_)*H,W=k-(k-O)*H,se=T-(T-q)*H,ne=E-(E-D)*H;const ce=Math.round(Math.min(ee,z)),pe=Math.round(Math.max(ee,z));let oe=h*te+ce*4;for(let ve=ce;ve<=pe;ve++)H=(ee-ve)/(ee-z),H<0?H=0:H>1&&(H=1),d[oe++]=Y-(Y-W)*H|0,d[oe++]=U-(U-se)*H|0,d[oe++]=R-(R-ne)*H|0,d[oe++]=255}}function oYe(n,e,t){const r=e.coords,i=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(r.length/a)-1,u=a-1;for(s=0;s<c;s++){let d=s*a;for(let h=0;h<u;h++,d++)W5(n,t,r[d],r[d+1],r[d+a],i[d],i[d+1],i[d+a]),W5(n,t,r[d+a+1],r[d+1],r[d+a],i[d+a+1],i[d+1],i[d+a])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)W5(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class aYe extends nH{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=u/h,x=d/f,y={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/x},b=h+4,_=f+4,C=r.getCanvas("mesh",b,_),k=C.context,T=k.createImageData(h,f);if(t){const N=T.data;for(let P=0,M=N.length;P<M;P+=4)N[P]=t[0],N[P+1]=t[1],N[P+2]=t[2],N[P+3]=255}for(const N of this._figures)oYe(T,N,y);return k.putImageData(T,2,2),{canvas:C.canvas,offsetX:a-2*p,offsetY:c-2*x,scaleX:p,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){r7(e,this._bbox);const s=new Float32Array(2);if(i===Hs.SHADING)Tt.singularValueDecompose2dScale(ri(e),s);else if(this.matrix){Tt.singularValueDecompose2dScale(this.matrix,s);const[a,c]=s;Tt.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=a,s[1]*=c}else Tt.singularValueDecompose2dScale(t.baseTransform,s);const o=this._createMeshCanvas(s,i===Hs.SHADING?null:this._background,t.cachedCanvases);return i!==Hs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class lYe extends nH{getPattern(){return"hotpink"}}function cYe(n){switch(n[0]){case"RadialAxial":return new sYe(n);case"Mesh":return new aYe(n);case"Dummy":return new lYe}throw new Error(`Unknown IR type: ${n[0]}`)}const IZ={COLORED:1,UNCOLORED:2},jR=class jR{constructor(e,t,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,t){var W,se;const{bbox:r,operatorList:i,paintType:s,tilingType:o,color:a,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),ZM("TilingType: "+o);const h=r[0],f=r[1],p=r[2],x=r[3],y=p-h,b=x-f,_=new Float32Array(2);Tt.singularValueDecompose2dScale(this.matrix,_);const[C,k]=_;Tt.singularValueDecompose2dScale(this.baseTransform,_);const T=C*_[0],E=k*_[1];let N=y,P=b,M=!1,O=!1;const q=Math.ceil(u*T),D=Math.ceil(d*E),F=Math.ceil(y*T),K=Math.ceil(b*E);q>=F?N=u:M=!0,D>=K?P=d:O=!0;const ee=this.getSizeAndScale(N,this.ctx.canvas.width,T),Y=this.getSizeAndScale(P,this.ctx.canvas.height,E),U=e.cachedCanvases.getCanvas("pattern",ee.size,Y.size),R=U.context,z=c.createCanvasGraphics(R,t);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,s,a),R.translate(-ee.scale*h,-Y.scale*f),z.transform(0,ee.scale,0,0,Y.scale,0,0),R.save(),(W=z.dependencyTracker)==null||W.save(),this.clipBbox(z,h,f,p,x),z.baseTransform=ri(z.ctx),z.executeOperatorList(i),z.endDrawing(),(se=z.dependencyTracker)==null||se.restore(),R.restore(),M||O){const ne=U.canvas;M&&(N=u),O&&(P=d);const te=this.getSizeAndScale(N,this.ctx.canvas.width,T),H=this.getSizeAndScale(P,this.ctx.canvas.height,E),ce=te.size,pe=H.size,oe=e.cachedCanvases.getCanvas("pattern-workaround",ce,pe),ve=oe.context,be=M?Math.floor(y/u):0,fe=O?Math.floor(b/d):0;for(let we=0;we<=be;we++)for(let ue=0;ue<=fe;ue++)ve.drawImage(ne,ce*we,pe*ue,ce,pe,0,0,ce,pe);return{canvas:oe.canvas,scaleX:te.scale,scaleY:H.scale,offsetX:h,offsetY:f}}return{canvas:U.canvas,scaleX:ee.scale,scaleY:Y.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const i=Math.max(jR.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const o=i-t,a=s-r;e.ctx.rect(t,r,o,a),Tt.axialAlignedBoundingBox([t,r,i,s],ri(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case IZ.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=s.fillColor=o,i.strokeStyle=s.strokeColor=a;break;case IZ.UNCOLORED:i.fillStyle=i.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new jKe(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,i,s){let o=r;i!==Hs.SHADING&&(o=Tt.transform(o,t.baseTransform),this.matrix&&(o=Tt.transform(o,this.matrix)));const a=this.createPatternCanvas(t,s);let c=new DOMMatrix(o);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(c),u}};j(jR,"MAX_PATTERN_SIZE",3e3);let i7=jR;function uYe({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=Es.isLittleEndian?4278190080:255,[c,u]=o?[s,a]:[a,s],d=r>>3,h=r&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let x=0;x<i;x++){for(const b=e+d;e<b;e++){const _=e<f?n[e]:255;t[p++]=_&128?u:c,t[p++]=_&64?u:c,t[p++]=_&32?u:c,t[p++]=_&16?u:c,t[p++]=_&8?u:c,t[p++]=_&4?u:c,t[p++]=_&2?u:c,t[p++]=_&1?u:c}if(h===0)continue;const y=e<f?n[e++]:255;for(let b=0;b<h;b++)t[p++]=y&1<<7-b?u:c}return{srcPos:e,destPos:p}}const OZ=16,RZ=100,dYe=15,MZ=10,ka=16,q5=new DOMMatrix,Sl=new Float32Array(2),Wb=new Float32Array([1/0,1/0,-1/0,-1/0]);function hYe(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,s,o,a){e.transform(t,r,i,s,o,a),this.__originalTransform(t,r,i,s,o,a)},n.setTransform=function(t,r,i,s,o,a){e.setTransform(t,r,i,s,o,a),this.__originalSetTransform(t,r,i,s,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,a){e.bezierCurveTo(t,r,i,s,o,a),this.__originalBezierCurveTo(t,r,i,s,o,a)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class fYe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $j(n,e,t,r,i,s,o,a,c,u){const[d,h,f,p,x,y]=ri(n);if(h===0&&f===0){const C=o*d+x,k=Math.round(C),T=a*p+y,E=Math.round(T),N=(o+c)*d+x,P=Math.abs(Math.round(N)-k)||1,M=(a+u)*p+y,O=Math.abs(Math.round(M)-E)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),k,E),n.drawImage(e,t,r,i,s,0,0,P,O),n.setTransform(d,h,f,p,x,y),[P,O]}if(d===0&&p===0){const C=a*f+x,k=Math.round(C),T=o*h+y,E=Math.round(T),N=(a+u)*f+x,P=Math.abs(Math.round(N)-k)||1,M=(o+c)*h+y,O=Math.abs(Math.round(M)-E)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,k,E),n.drawImage(e,t,r,i,s,0,0,O,P),n.setTransform(d,h,f,p,x,y),[O,P]}n.drawImage(e,t,r,i,s,o,a,c,u);const b=Math.hypot(d,h),_=Math.hypot(f,p);return[b*c,_*u]}class DZ{constructor(e,t,r){j(this,"alphaIsShape",!1);j(this,"fontSize",0);j(this,"fontSizeScale",1);j(this,"textMatrix",null);j(this,"textMatrixScale",1);j(this,"fontMatrix",j$);j(this,"leading",0);j(this,"x",0);j(this,"y",0);j(this,"lineX",0);j(this,"lineY",0);j(this,"charSpacing",0);j(this,"wordSpacing",0);j(this,"textHScale",1);j(this,"textRenderingMode",Ds.FILL);j(this,"textRise",0);j(this,"fillColor","#000000");j(this,"strokeColor","#000000");j(this,"patternFill",!1);j(this,"patternStroke",!1);j(this,"fillAlpha",1);j(this,"strokeAlpha",1);j(this,"lineWidth",1);j(this,"activeSMask",null);j(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Wb.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Hs.FILL,t=null){const r=this.minMax.slice();if(e===Hs.STROKE){t||xr("Stroke bounding box must include transform."),Tt.singularValueDecompose2dScale(t,Sl);const i=Sl[0]*this.lineWidth/2,s=Sl[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=Tt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Wb,0)}getClippedPathBoundingBox(e=Hs.FILL,t=null){return Tt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function LZ(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%ka,s=(t-i)/ka,o=i===0?s:s+1,a=n.createImageData(r,ka);let c=0,u;const d=e.data,h=a.data;let f,p,x,y;if(e.kind===MC.GRAYSCALE_1BPP){const b=d.byteLength,_=new Uint32Array(h.buffer,0,h.byteLength>>2),C=_.length,k=r+7>>3,T=4294967295,E=Es.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(x=f<s?ka:i,u=0,p=0;p<x;p++){const N=b-c;let P=0;const M=N>k?r:N*8-7,O=M&-8;let q=0,D=0;for(;P<O;P+=8)D=d[c++],_[u++]=D&128?T:E,_[u++]=D&64?T:E,_[u++]=D&32?T:E,_[u++]=D&16?T:E,_[u++]=D&8?T:E,_[u++]=D&4?T:E,_[u++]=D&2?T:E,_[u++]=D&1?T:E;for(;P<M;P++)q===0&&(D=d[c++],q=128),_[u++]=D&q?T:E,q>>=1}for(;u<C;)_[u++]=0;n.putImageData(a,0,f*ka)}}else if(e.kind===MC.RGBA_32BPP){for(p=0,y=r*ka*4,f=0;f<s;f++)h.set(d.subarray(c,c+y)),c+=y,n.putImageData(a,0,p),p+=ka;f<o&&(y=r*i*4,h.set(d.subarray(c,c+y)),n.putImageData(a,0,p))}else if(e.kind===MC.RGB_24BPP)for(x=ka,y=r*x,f=0;f<o;f++){for(f>=s&&(x=i,y=r*x),u=0,p=y;p--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(a,0,f*ka)}else throw new Error(`bad image kind: ${e.kind}`)}function FZ(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%ka,s=(t-i)/ka,o=i===0?s:s+1,a=n.createImageData(r,ka);let c=0;const u=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<s?ka:i;({srcPos:c}=uYe({src:u,srcPos:c,dest:d,width:r,height:f,nonBlackColor:0})),n.putImageData(a,0,h*ka)}}function xk(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Vj(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function BZ(n,e){if(e)return!0;Tt.singularValueDecompose2dScale(n,Sl);const t=Math.fround(Vu.pixelRatio*pm.PDF_TO_CSS_UNITS);return Sl[0]<=t&&Sl[1]<=t}const mYe=["butt","round","square"],pYe=["miter","round","bevel"],gYe={},$Z={};var Uu,s7,o7,a7;const OW=class OW{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},c,u,d){G(this,Uu);this.ctx=e,this.current=new DZ(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new fYe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,r=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){const c=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ri(this.compositeCtx))}this.ctx.save(),Vj(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ri(this.ctx)}executeOperatorList(e,t,r,i,s){var _;const o=e.argsArray,a=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const d=u-c>MZ&&typeof r=="function",h=d?Date.now()+dYe:0;let f=0;const p=this.commonObjs,x=this.objs;let y,b;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,r),c;if(!s||s(c))if(y=a[c],b=o[c]??null,y!==E_.dependency)b===null?this[y](c):this[y](c,...b);else for(const C of b){(_=this.dependencyTracker)==null||_.recordNamedData(C,c);const k=C.startsWith("g_")?p:x;if(!k.has(C))return k.get(C,r),c}if(c++,c===u)return c;if(d&&++f>MZ){if(Date.now()>h)return r(),c;f=0}}}endDrawing(){J(this,Uu,s7).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),J(this,Uu,o7).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,c=i,u="prescale1",d,h;for(;s>2&&a>1||o>2&&c>1;){let f=a,p=c;s>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,a,c,0,0,f,p),e=d.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e,t){var q,D;const r=this.ctx,{width:i,height:s}=t,o=this.current.fillColor,a=this.current.patternFill,c=ri(r);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;d=JSON.stringify(a?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(F),u||(u=new Map,this._cachedBitmapsMap.set(F,u));const K=u.get(d);if(K&&!a){const ee=Math.round(Math.min(c[0],c[2])+c[4]),Y=Math.round(Math.min(c[1],c[3])+c[5]);return(q=this.dependencyTracker)==null||q.recordDependencies(e,nc.transformAndFill),{canvas:K,offsetX:ee,offsetY:Y}}h=K}h||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),FZ(f.context,t));let p=Tt.transform(c,[1/i,0,0,-1/s,0,0]);p=Tt.transform(p,[1,0,0,1,0,-s]);const x=Wb.slice();Tt.axialAlignedBoundingBox([0,0,i,s],p,x);const[y,b,_,C]=x,k=Math.round(_-y)||1,T=Math.round(C-b)||1,E=this.cachedCanvases.getCanvas("fillCanvas",k,T),N=E.context,P=y,M=b;N.translate(-P,-M),N.transform(...p),h||(h=this._scaleImage(f.canvas,gd(N)),h=h.img,u&&a&&u.set(d,h)),N.imageSmoothingEnabled=BZ(ri(N),t.interpolate),$j(N,h,0,0,h.width,h.height,0,0,i,s),N.globalCompositeOperation="source-in";const O=Tt.transform(gd(N),[1,0,0,1,-P,-M]);return N.fillStyle=a?o.getPattern(r,this,O,Hs.FILL,e):o,N.fillRect(0,0,i,s),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,E.canvas)),(D=this.dependencyTracker)==null||D.recordDependencies(e,nc.transformAndFill),{canvas:E.canvas,offsetX:Math.round(P),offsetY:Math.round(M)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=mYe[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=pYe[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,i,s,o,a;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,r);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),xk(this.suspendedCtx,o),hYe(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),xk(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],o=i[1],a=i[2]-s,c=i[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,r,a,c,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,a,c,u,d,h){let f=e.canvas,p=c-d,x=u-h;if(o)if(p<0||x<0||p+r>f.width||x+i>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",r,i),_=b.context;_.drawImage(f,-p,-x),_.globalCompositeOperation="destination-atop",_.fillStyle=o,_.fillRect(0,0,r,i),_.globalCompositeOperation="source-over",f=b.canvas,p=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(p,x,r,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,x,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const y=new Path2D;y.rect(c,u,r,i),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(f,p,x,r,i,c,u,r,i),t.restore()}save(e){var r;this.inSMaskMode&&xk(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&xk(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,i,s,o,a){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,r,i,s,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,i){let[s]=r;if(!i){s||(s=r[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const o=t===E_.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(s instanceof Path2D)){const o=r[0]=new Path2D;for(let a=0,c=s.length;a<c;)switch(s[a++]){case Rj.moveTo:o.moveTo(s[a++],s[a++]);break;case Rj.lineTo:o.lineTo(s[a++],s[a++]);break;case Rj.curveTo:o.bezierCurveTo(s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case Rj.closePath:o.closePath();break;default:cn(`Unrecognized drawing path operator: ${s[a-1]}`);break}s=o}Tt.axialAlignedBoundingBox(i,ri(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var o;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const a=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,gd(i),Hs.STROKE,e),a){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(a)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,nc.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Hs.STROKE,ri(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var u,d,h;const i=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=s.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=s.getPattern(i,this,gd(i),Hs.FILL,e),f){const p=new Path2D;p.addPath(t,i.getTransform().invertSelf().multiplySelf(f)),t=p}a=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,nc.fill),a&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),r&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,nc.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=gYe}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=$Z}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,s=r.getTransform().invertSelf();for(const{transform:o,x:a,y:c,fontSize:u,path:d}of t)d&&i.addPath(d,new DOMMatrix(o).preMultiplySelf(s).translate(a,c).scale(u,-u));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||j$,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&cn("Invalid font matrix for font "+t),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const o=i.loadedName||"sans-serif",a=((f=i.systemFontInfo)==null?void 0:f.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const u=i.italic?"italic":"normal";let d=r;r<OZ?d=OZ:r>RZ&&(d=RZ),this.current.fontSizeScale=r/d,this.ctx.font=`${u} ${c} ${d}px ${a}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,i,s,o){var _,C,k,T;const a=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&Ds.FILL_STROKE_MASK,p=!!(d&Ds.ADD_TO_PATH_FLAG),x=c.patternFill&&!u.missingFile,y=c.patternStroke&&!u.missingFile;let b;if((u.disableFontFace||p||x||y)&&!u.missingFile&&(b=u.getPathGenerator(this.commonObjs,t)),b&&(u.disableFontFace||x||y)){a.save(),a.translate(r,i),a.scale(h,-h),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,a,u);let E;if(f===Ds.FILL||f===Ds.FILL_STROKE)if(s){E=a.getTransform(),a.setTransform(...s);const N=J(this,Uu,a7).call(this,b,E,s);a.fill(N)}else a.fill(b);if(f===Ds.STROKE||f===Ds.FILL_STROKE)if(o){E||(E=a.getTransform()),a.setTransform(...o);const{a:N,b:P,c:M,d:O}=E,q=Tt.inverseTransform(o),D=Tt.transform([N,P,M,O,0,0],q);Tt.singularValueDecompose2dScale(D,Sl),a.lineWidth*=Math.max(Sl[0],Sl[1])/h,a.stroke(J(this,Uu,a7).call(this,b,E,o))}else a.lineWidth/=h,a.stroke(b);a.restore()}else(f===Ds.FILL||f===Ds.FILL_STROKE)&&(a.fillText(t,r,i),(C=this.dependencyTracker)==null||C.recordCharacterBBox(e,a,u,h,r,i,()=>a.measureText(t))),(f===Ds.STROKE||f===Ds.FILL_STROKE)&&(this.dependencyTracker&&((k=this.dependencyTracker)==null||k.recordCharacterBBox(e,a,u,h,r,i,()=>a.measureText(t)).recordDependencies(e,nc.stroke)),a.strokeText(t,r,i));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ri(a),x:r,y:i,fontSize:h,path:b}),(T=this.dependencyTracker)==null||T.recordCharacterBBox(e,a,u,h,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return gn(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var M,O,q,D;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,nc.showText).resetBBox(e),this.current.textRenderingMode&Ds.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,t),(M=this.dependencyTracker)==null||M.recordShowTextOperation(e);return}const s=r.fontSize;if(s===0){(O=this.dependencyTracker)==null||O.recordOperation(e);return}const o=this.ctx,a=r.fontSizeScale,c=r.charSpacing,u=r.wordSpacing,d=r.fontDirection,h=r.textHScale*d,f=t.length,p=i.vertical,x=p?1:-1,y=i.defaultVMetrics,b=s*r.fontMatrix[0],_=r.textRenderingMode===Ds.FILL&&!i.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),d>0?o.scale(h,-1):o.scale(h,1);let C,k;if(r.patternFill){o.save();const F=r.fillColor.getPattern(o,this,gd(o),Hs.FILL,e);C=ri(o),o.restore(),o.fillStyle=F}if(r.patternStroke){o.save();const F=r.strokeColor.getPattern(o,this,gd(o),Hs.STROKE,e);k=ri(o),o.restore(),o.strokeStyle=F}let T=r.lineWidth;const E=r.textMatrixScale;if(E===0||T===0){const F=r.textRenderingMode&Ds.FILL_STROKE_MASK;(F===Ds.STROKE||F===Ds.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=E;if(a!==1&&(o.scale(a,a),T/=a),o.lineWidth=T,i.isInvalidPDFjsFont){const F=[];let K=0;for(const Y of t)F.push(Y.unicode),K+=Y.width;const ee=F.join("");if(o.fillText(ee,0,0),this.dependencyTracker!==null){const Y=o.measureText(ee);this.dependencyTracker.recordBBox(e,this.ctx,-Y.actualBoundingBoxLeft,Y.actualBoundingBoxRight,-Y.actualBoundingBoxAscent,Y.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=K*b*h,o.restore(),this.compose();return}let N=0,P;for(P=0;P<f;++P){const F=t[P];if(typeof F=="number"){N+=x*F*s/1e3;continue}let K=!1;const ee=(F.isSpace?u:0)+c,Y=F.fontChar,U=F.accent;let R,z,W=F.width;if(p){const te=F.vmetric||y,H=-(F.vmetric?te[1]:W*.5)*b,ce=te[2]*b;W=te?-te[0]:W,R=H/a,z=(N+ce)/a}else R=N/a,z=0;let se;if(i.remeasure&&W>0){se=o.measureText(Y);const te=se.width*1e3/s*a;if(W<te&&this.isFontSubpixelAAEnabled){const H=W/te;K=!0,o.save(),o.scale(H,1),R/=H}else W!==te&&(R+=(W-te)/2e3*s/a)}if(this.contentVisible&&(F.isInFont||i.missingFile)){if(_&&!U)o.fillText(Y,R,z),(q=this.dependencyTracker)==null||q.recordCharacterBBox(e,o,se?{bbox:null}:i,s/a,R,z,()=>se??o.measureText(Y));else if(this.paintChar(e,Y,R,z,C,k),U){const te=R+s*U.offset.x/a,H=z-s*U.offset.y/a;this.paintChar(e,U.fontChar,te,H,C,k)}}const ne=p?W*b-ee*d:W*b+ee*d;N+=ne,K&&o.restore()}p?r.y-=N:r.x+=N*h,o.restore(),this.compose(),(D=this.dependencyTracker)==null||D.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,i=this.current,s=i.font,o=i.fontSize,a=i.fontDirection,c=s.vertical?1:-1,u=i.charSpacing,d=i.wordSpacing,h=i.textHScale*a,f=i.fontMatrix||j$,p=t.length,x=i.textRenderingMode===Ds.INVISIBLE;let y,b,_,C;if(x||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(h,a);const k=this.dependencyTracker;for(this.dependencyTracker=k?new lO(k,e):null,y=0;y<p;++y){if(b=t[y],typeof b=="number"){C=c*b*o/1e3,this.ctx.translate(C,0),i.x+=C*h;continue}const T=(b.isSpace?d:0)+u,E=s.charProcOperatorList[b.operatorListId];E?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...f),this.executeOperatorList(E),this.restore()):cn(`Type3 character "${b.operatorListId}" is not available.`);const N=[b.width,0];Tt.applyTransform(N,f),_=N[0]*o+T,r.translate(_,0),i.x+=_*h}r.restore(),k&&(this.dependencyTracker=k)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,i,s,o,a){var u;const c=new Path2D;c.rect(i,s,o-i,a-s),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,o,s,a).recordClipBox(e,this.ctx,i,o,s,a),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const i=this.baseTransform||ri(this.ctx),s={createCanvasGraphics:(o,a)=>new OW(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new lO(this.dependencyTracker,a,!0):null)};r=new i7(t,this.ctx,s,i)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=cYe(this.getObject(e,t)),this.cachedPatterns.set(t,i)),r&&(i.matrix=r),i}shadingFill(e,t){var o;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,gd(r),Hs.SHADING,e);const s=gd(r);if(s){const{width:a,height:c}=r.canvas,u=Wb.slice();Tt.axialAlignedBoundingBox([0,0,a,c],s,u);const[d,h,f,p]=u;this.ctx.fillRect(d,h,f-d,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,nc.transform).recordDependencies(e,nc.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){xr("Should not call beginInlineImage")}beginImageData(){xr("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ri(this.ctx),r)){Tt.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,o,a,c]=r,u=new Path2D;u.rect(s,o,a-s,c-o),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,a,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var k;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||ZM("TODO: Support non-isolated groups."),t.knockout&&cn("Knockout groups not supported.");const i=ri(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Wb.slice();Tt.axialAlignedBoundingBox(t.bbox,ri(r),s);const o=[0,0,r.canvas.width,r.canvas.height];s=Tt.intersect(s,o)||[0,0,0,0];const a=Math.floor(s[0]),c=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-a,1),d=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),p=f.context;p.translate(-a,-c),p.transform(...i);let x=new Path2D;const[y,b,_,C]=t.bbox;if(x.rect(y,b,_-y,C-b),t.matrix){const T=new Path2D;T.addPath(x,new DOMMatrix(t.matrix)),x=T}p.clip(x),t.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,c),r.save()),xk(r,p),this.ctx=p,(k=this.dependencyTracker)==null||k.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ri(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=Wb.slice();Tt.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,r,i,s,o){if(J(this,Uu,s7).call(this),Vj(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const a=r[2]-r[0],c=r[3]-r[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=a,r[3]=c,Tt.singularValueDecompose2dScale(ri(this.ctx),Sl);const{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Sl[0],0,0,-Sl[1],0,c*Sl[1]),Vj(this.ctx)}else{Vj(this.ctx),this.endPath(e);const u=new Path2D;u.rect(r[0],r[1],a,c),this.ctx.clip(u)}}this.current=new DZ(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),J(this,Uu,o7).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const i=this.ctx,s=this._createMaskCanvas(e,t),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,i=0,s=0,o,a){var h,f,p;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=ri(c);c.transform(r,i,s,o,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let x=0,y=a.length;x<y;x+=2){const b=Tt.transform(u,[r,i,s,o,a[x],a[x+1]]);c.drawImage(d.canvas,b[4],b[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,b[4],b[4]+d.canvas.width,b[5],b[5]+d.canvas.height)}c.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,c;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,nc.transformAndFill);for(const u of t){const{data:d,width:h,height:f,transform:p}=u,x=this.cachedCanvases.getCanvas("maskCanvas",h,f),y=x.context;y.save();const b=this.getObject(e,d,u);FZ(y,b),y.globalCompositeOperation="source-in",y.fillStyle=s?i.getPattern(y,this,gd(r),Hs.FILL,e):i,y.fillRect(0,0,h,f),y.restore(),r.save(),r.transform(...p),r.scale(1,-1),$j(r,x.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,h,0,f),r.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){cn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,i,s){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){cn("Dependent image isn't ready yet");return}const a=o.width,c=o.height,u=[];for(let d=0,h=s.length;d<h;d+=2)u.push({transform:[r,0,0,i,s[d],s[d+1]],x:0,y:0,w:a,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const r=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/r,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,i).context;LZ(h,t),a=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(a,gd(s));s.imageSmoothingEnabled=BZ(ri(s),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,nc.imageXObject).recordOperation(e),$j(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var o,a,c;if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const u=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;LZ(f,t),s=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of r)i.save(),i.transform(...u.transform),i.scale(1,-1),$j(i,s,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,i,0,1,-1,0),i.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,nc.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var o,a;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===$Z?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ri(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let o,a;if(r===0&&i===0){const c=Math.abs(t),u=Math.abs(s);if(c===u)if(e===0)o=a=1/c;else{const d=c*e;o=a=d<1?1/d:1}else if(e===0)o=1/c,a=1/u;else{const d=c*e,h=u*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const c=Math.abs(t*s-r*i),u=Math.hypot(t,r),d=Math.hypot(i,s);if(e===0)o=d/c,a=u/c;else{const h=e*c;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[s,o]=this.getScaleForStroking();if(s===o){r.lineWidth=(i||1)*s,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(s,o),q5.a=1/s,q5.d=1/o;const c=new Path2D;if(c.addPath(e,q5),a.length>0){const u=Math.max(s,o);r.setLineDash(a.map(d=>d/u)),r.lineDashOffset/=u}r.lineWidth=i||1,r.stroke(c),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Uu=new WeakSet,s7=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},o7=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},a7=function(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i};let vw=OW;for(const n in E_)vw.prototype[n]!==void 0&&(vw.prototype[E_[n]]=vw.prototype[n]);var i1,s1,J2,o1,MP;const Zb=class Zb{constructor(e){G(this,o1);G(this,i1);G(this,s1);G(this,J2);L(this,i1,e),L(this,s1,new DataView(v(this,i1))),L(this,J2,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let i=0;for(const u of Zb.strings){const d=t.encode(e[u]);r[u]=d,i+=4+d.length}const s=new ArrayBuffer(i),o=new Uint8Array(s),a=new DataView(s);let c=0;for(const u of Zb.strings){const d=r[u],h=d.length;a.setUint32(c,h),o.set(d,c+4),c+=4+h}return In(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return J(this,o1,MP).call(this,0)}get fontWeight(){return J(this,o1,MP).call(this,1)}get italicAngle(){return J(this,o1,MP).call(this,2)}};i1=new WeakMap,s1=new WeakMap,J2=new WeakMap,o1=new WeakSet,MP=function(e){In(e<Zb.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=v(this,s1).getUint32(t)+4;const r=v(this,s1).getUint32(t);return v(this,J2).decode(new Uint8Array(v(this,i1),t+4,r))},j(Zb,"strings",["fontFamily","fontWeight","italicAngle"]);let cO=Zb;var Hp,Md,Ky,Yy,nC;const ew=class ew{constructor(e){G(this,Yy);G(this,Hp);G(this,Md);G(this,Ky);L(this,Hp,e),L(this,Md,new DataView(v(this,Hp))),L(this,Ky,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let i=0;for(const f of ew.strings){const p=t.encode(e[f]);r[f]=p,i+=4+p.length}i+=4;let s,o,a=1+i;e.style&&(s=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+s.length+4+o.length);const c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,i=0;for(const f of ew.strings){const p=r[f],x=p.length;i+=4+x,d.setUint32(h,x),u.set(p,h+4),h+=4+x}return d.setUint32(h-i-4,i),e.style&&(d.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),In(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return v(this,Md).getUint8(0)!==0}get css(){return J(this,Yy,nC).call(this,0)}get loadedName(){return J(this,Yy,nC).call(this,1)}get baseFontName(){return J(this,Yy,nC).call(this,2)}get src(){return J(this,Yy,nC).call(this,3)}get style(){let e=1;e+=4+v(this,Md).getUint32(e);const t=v(this,Md).getUint32(e),r=v(this,Ky).decode(new Uint8Array(v(this,Hp),e+4,t));e+=4+t;const i=v(this,Md).getUint32(e),s=v(this,Ky).decode(new Uint8Array(v(this,Hp),e+4,i));return{style:r,weight:s}}};Hp=new WeakMap,Md=new WeakMap,Ky=new WeakMap,Yy=new WeakSet,nC=function(e){In(e<ew.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=v(this,Md).getUint32(t)+4;const r=v(this,Md).getUint32(t);return v(this,Ky).decode(new Uint8Array(v(this,Hp),t+4,r))},j(ew,"strings",["css","loadedName","baseFontName","src"]);let uO=ew;var a1,l1,c1,u1,ol,Dd,Q2,sr,_i,Yc,DP,rC;const mn=class mn{constructor({data:e,extra:t}){G(this,_i);G(this,Dd);G(this,Q2);G(this,sr);L(this,Dd,e),L(this,Q2,new TextDecoder),L(this,sr,new DataView(v(this,Dd))),t&&Object.assign(this,t)}get black(){return J(this,_i,Yc).call(this,0)}get bold(){return J(this,_i,Yc).call(this,1)}get disableFontFace(){return J(this,_i,Yc).call(this,2)}get fontExtraProperties(){return J(this,_i,Yc).call(this,3)}get isInvalidPDFjsFont(){return J(this,_i,Yc).call(this,4)}get isType3Font(){return J(this,_i,Yc).call(this,5)}get italic(){return J(this,_i,Yc).call(this,6)}get missingFile(){return J(this,_i,Yc).call(this,7)}get remeasure(){return J(this,_i,Yc).call(this,8)}get vertical(){return J(this,_i,Yc).call(this,9)}get ascent(){return J(this,_i,DP).call(this,0)}get defaultWidth(){return J(this,_i,DP).call(this,1)}get descent(){return J(this,_i,DP).call(this,2)}get bbox(){let e=v(mn,l1);if(v(this,sr).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(v(this,sr).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=v(mn,c1);if(v(this,sr).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(v(this,sr).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=v(mn,u1);if(v(this,sr).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(v(this,sr).getInt16(e,!0)),e+=2;return r}get fallbackName(){return J(this,_i,rC).call(this,0)}get loadedName(){return J(this,_i,rC).call(this,1)}get mimetype(){return J(this,_i,rC).call(this,2)}get name(){return J(this,_i,rC).call(this,3)}get data(){let e=v(mn,ol);const t=v(this,sr).getUint32(e);e+=4+t;const r=v(this,sr).getUint32(e);e+=4+r;const i=v(this,sr).getUint32(e);e+=4+i;const s=v(this,sr).getUint32(e);if(s!==0)return new Uint8Array(v(this,Dd),e+4,s)}clearData(){let e=v(mn,ol);const t=v(this,sr).getUint32(e);e+=4+t;const r=v(this,sr).getUint32(e);e+=4+r;const i=v(this,sr).getUint32(e);e+=4+i;const s=v(this,sr).getUint32(e);new Uint8Array(v(this,Dd),e+4,s).fill(0),v(this,sr).setUint32(e,0)}get cssFontInfo(){let e=v(mn,ol);const t=v(this,sr).getUint32(e);e+=4+t;const r=v(this,sr).getUint32(e);e+=4+r;const i=v(this,sr).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(v(this,Dd),e+4,i)),new cO(s.buffer)}get systemFontInfo(){let e=v(mn,ol);const t=v(this,sr).getUint32(e);e+=4+t;const r=v(this,sr).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(v(this,Dd),e+4,r)),new uO(i.buffer)}static write(e){const t=e.systemFontInfo?uO.write(e.systemFontInfo):null,r=e.cssFontInfo?cO.write(e.cssFontInfo):null,i=new TextEncoder,s={};let o=0;for(const y of mn.strings)s[y]=i.encode(e[y]),o+=4+s[y].length;const a=v(mn,ol)+4+o+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=mn.bools.length;let p=0,x=0;for(let y=0;y<f;y++){const b=e[mn.bools[y]];p|=(b===void 0?0:b?2:1)<<x,x+=2,(x===8||y===f-1)&&(d.setUint8(h++,p),p=0,x=0)}In(h===v(mn,a1),"FontInfo.write: Boolean properties offset mismatch");for(const y of mn.numbers)d.setFloat64(h,e[y]),h+=8;if(In(h===v(mn,l1),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const y of e.bbox)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=8;if(In(h===v(mn,c1),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const y of e.fontMatrix)d.setFloat64(h,y,!0),h+=8}else d.setUint8(h++,0),h+=48;if(In(h===v(mn,u1),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const y of e.defaultVMetrics)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=6;In(h===v(mn,ol),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(v(mn,ol),0),h+=4;for(const y of mn.strings){const b=s[y],_=b.length;d.setUint32(h,_),u.set(b,h+4),h+=4+_}if(d.setUint32(v(mn,ol),h-v(mn,ol)-4),!t)d.setUint32(h,0),h+=4;else{const y=t.byteLength;d.setUint32(h,y),In(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+y}if(!r)d.setUint32(h,0),h+=4;else{const y=r.byteLength;d.setUint32(h,y),In(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+y}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),In(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};a1=new WeakMap,l1=new WeakMap,c1=new WeakMap,u1=new WeakMap,ol=new WeakMap,Dd=new WeakMap,Q2=new WeakMap,sr=new WeakMap,_i=new WeakSet,Yc=function(e){In(e<mn.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,i=v(this,sr).getUint8(t)>>r&3;return i===0?void 0:i===2},DP=function(e){return In(e<mn.numbers.length,"Invalid number index"),v(this,sr).getFloat64(v(mn,a1)+e*8)},rC=function(e){In(e<mn.strings.length,"Invalid string index");let t=v(mn,ol)+4;for(let s=0;s<e;s++)t+=v(this,sr).getUint32(t)+4;const r=v(this,sr).getUint32(t),i=new Uint8Array(r);return i.set(new Uint8Array(v(this,Dd),t+4,r)),v(this,Q2).decode(i)},j(mn,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),j(mn,"numbers",["ascent","defaultWidth","descent"]),j(mn,"strings",["fallbackName","loadedName","mimetype","name"]),G(mn,a1,Math.ceil(mn.bools.length*2/8)),G(mn,l1,v(mn,a1)+mn.numbers.length*8),G(mn,c1,v(mn,l1)+1+8),G(mn,u1,v(mn,c1)+1+48),G(mn,ol,v(mn,u1)+1+6);let l7=mn;var Z2,eT;class _c{static get workerPort(){return v(this,Z2)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");L(this,Z2,e)}static get workerSrc(){return v(this,eT)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");L(this,eT,e)}}Z2=new WeakMap,eT=new WeakMap,G(_c,Z2,null),G(_c,eT,"");var d1,tT;class vYe{constructor({parsedData:e,rawData:t}){G(this,d1);G(this,tT);L(this,d1,e),L(this,tT,t)}getRaw(){return v(this,tT)}get(e){return v(this,d1).get(e)??null}[Symbol.iterator](){return v(this,d1).entries()}}d1=new WeakMap,tT=new WeakMap;const Rb=Symbol("INTERNAL");var nT,rT,iT,h1;class yYe{constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){G(this,nT,!1);G(this,rT,!1);G(this,iT,!1);G(this,h1,!0);L(this,nT,!!(e&bl.DISPLAY)),L(this,rT,!!(e&bl.PRINT)),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(v(this,iT))return v(this,h1);if(!v(this,h1))return!1;const{print:e,view:t}=this.usage;return v(this,nT)?(t==null?void 0:t.viewState)!=="OFF":v(this,rT)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Rb&&xr("Internal method `_setVisible` called."),L(this,iT,r),L(this,h1,t)}}nT=new WeakMap,rT=new WeakMap,iT=new WeakMap,h1=new WeakMap;var Wp,or,f1,m1,sT,c7;class xYe{constructor(e,t=bl.DISPLAY){G(this,sT);G(this,Wp,null);G(this,or,new Map);G(this,f1,null);G(this,m1,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,L(this,m1,e.order);for(const r of e.groups)v(this,or).set(r.id,new yYe(t,r));if(e.baseState==="OFF")for(const r of v(this,or).values())r._setVisible(Rb,!1);for(const r of e.on)v(this,or).get(r)._setVisible(Rb,!0);for(const r of e.off)v(this,or).get(r)._setVisible(Rb,!1);L(this,f1,this.getHash())}}isVisible(e){if(v(this,or).size===0)return!0;if(!e)return ZM("Optional content group not defined."),!0;if(e.type==="OCG")return v(this,or).has(e.id)?v(this,or).get(e.id).visible:(cn(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return J(this,sT,c7).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!v(this,or).has(t))return cn(`Optional content group not found: ${t}`),!0;if(v(this,or).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!v(this,or).has(t))return cn(`Optional content group not found: ${t}`),!0;if(!v(this,or).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!v(this,or).has(t))return cn(`Optional content group not found: ${t}`),!0;if(!v(this,or).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!v(this,or).has(t))return cn(`Optional content group not found: ${t}`),!0;if(v(this,or).get(t).visible)return!1}return!0}return cn(`Unknown optional content policy ${e.policy}.`),!0}return cn(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var s;const i=v(this,or).get(e);if(!i){cn(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((s=v(this,or).get(a))==null||s._setVisible(Rb,!1,!0));i._setVisible(Rb,!!t,!0),L(this,Wp,null)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=v(this,or).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}L(this,Wp,null)}get hasInitialVisibility(){return v(this,f1)===null||this.getHash()===v(this,f1)}getOrder(){return v(this,or).size?v(this,m1)?v(this,m1).slice():[...v(this,or).keys()]:null}getGroup(e){return v(this,or).get(e)||null}getHash(){if(v(this,Wp)!==null)return v(this,Wp);const e=new Kve;for(const[t,r]of v(this,or))e.update(`${t}:${r.visible}`);return L(this,Wp,e.hexdigest())}[Symbol.iterator](){return v(this,or).entries()}}Wp=new WeakMap,or=new WeakMap,f1=new WeakMap,m1=new WeakMap,sT=new WeakSet,c7=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let o;if(Array.isArray(s))o=J(this,sT,c7).call(this,s);else if(v(this,or).has(s))o=v(this,or).get(s).visible;else return cn(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class bYe{constructor(e,{disableRange:t=!1,disableStream:r=!1}){In(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});In(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,i,s;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){In(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new wYe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new _Ye(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class wYe{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=t3(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _Ye{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function SYe(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=c(d),d=u(d),s(d)}if(t=o(n),t){const d=u(t);return s(d)}if(t=r("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),s(d)}function r(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=LA(h);h=f.decode(p),e=!1}catch{}}return h}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),e&&(d=i("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,y,b,_]=f;if(y=parseInt(y,10),y in h){if(y===0)break;continue}h[y]=[b,_]}const x=[];for(let y=0;y<h.length&&y in h;++y){let[b,_]=h[y];_=a(_),b&&(_=unescape(_),y===0&&(_=c(_))),x.push(_)}return x.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),x=d.slice(h+1).replace(/^[^']*'/,"");return i(f,x)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,x){if(p==="q"||p==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,b){return String.fromCharCode(parseInt(b,16))}),i(f,x);try{x=atob(x)}catch{}return i(f,x)})}return""}function aye(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function n3(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function lye({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function cye(n){const e=n.get("Content-Disposition");if(e){let t=SYe(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(t3(t))return t}return null}function VA(n,e){return new CE(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function uye(n){return n===200||n===206}function dye(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function hye(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(cn(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class kYe{constructor(e){j(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=aye(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return In(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new CYe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new EYe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class CYe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,dye(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=n3(s.url),!uye(s.status))throw VA(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:c}=lye({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=cye(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new mm("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:hye(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class EYe{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const o=i.url;fetch(o,dye(s,this._withCredentials,this._abortController)).then(a=>{const c=n3(a.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!uye(a.status))throw VA(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:hye(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const G5=200,K5=206;function TYe(n){const e=n.response;return typeof e!="string"?e:LA(e).buffer}class AYe{constructor({url:e,httpHeaders:t,withCredentials:r}){j(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=aye(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=K5):i.expectedStatus=G5,t.responseType="arraybuffer",In(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||G5;if(!(s===G5&&r.expectedStatus===K5)&&s!==r.expectedStatus){r.onError(i.status);return}const a=TYe(i);if(s===K5){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?r.onDone({begin:parseInt(u[1],10),chunk:a}):(cn('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class NYe{constructor(e){this._source=e,this._manager=new AYe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return In(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new jYe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new PYe(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class jYe{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=n3(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=lye({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=cye(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=VA(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PYe{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=n3((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=VA(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const IYe=/^[a-z][a-z0-9\-+.]+:/i;function OYe(n){if(IYe.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class RYe{constructor(e){this.source=e,this.url=OYe(e.url),In(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return In(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new MYe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new DYe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class MYe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=VA(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new mm("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class DYe{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const bk=Symbol("INITIAL_DATA");var al,oT,u7;class fye{constructor(){G(this,oT);G(this,al,Object.create(null))}get(e,t=null){if(t){const i=J(this,oT,u7).call(this,e);return i.promise.then(()=>t(i.data)),null}const r=v(this,al)[e];if(!r||r.data===bk)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=v(this,al)[e];return!!t&&t.data!==bk}delete(e){const t=v(this,al)[e];return!t||t.data===bk?!1:(delete v(this,al)[e],!0)}resolve(e,t=null){const r=J(this,oT,u7).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in v(this,al)){const{data:r}=v(this,al)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}L(this,al,Object.create(null))}*[Symbol.iterator](){for(const e in v(this,al)){const{data:t}=v(this,al)[e];t!==bk&&(yield[e,t])}}}al=new WeakMap,oT=new WeakSet,u7=function(e){var t;return(t=v(this,al))[e]||(t[e]={...Promise.withResolvers(),data:bk})};const LYe=1e5,VZ=30;var pae,qp,xa,aT,lT,Xy,_f,cT,uT,Jy,p1,g1,Gp,v1,dT,y1,Qy,hT,fT,bi,x1,Zy,mT,Kp,b1,bm,mye,pye,d7,Fl,LP,h7,gye,vye;let NE=(bi=class{constructor({textContentSource:e,container:t,viewport:r}){G(this,bm);G(this,qp,Promise.withResolvers());G(this,xa,null);G(this,aT,!1);G(this,lT,!!((pae=globalThis.FontInspector)!=null&&pae.enabled));G(this,Xy,null);G(this,_f,null);G(this,cT,0);G(this,uT,0);G(this,Jy,null);G(this,p1,null);G(this,g1,0);G(this,Gp,0);G(this,v1,Object.create(null));G(this,dT,[]);G(this,y1,null);G(this,Qy,[]);G(this,hT,new WeakMap);G(this,fT,null);var c;if(e instanceof ReadableStream)L(this,y1,e);else if(typeof e=="object")L(this,y1,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');L(this,xa,L(this,p1,t)),L(this,Gp,r.scale*Vu.pixelRatio),L(this,g1,r.rotation),L(this,_f,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;L(this,fT,[1,0,0,-1,-o,a+s]),L(this,uT,i),L(this,cT,s),J(c=bi,Fl,gye).call(c),Hg(t,r),v(this,qp).promise.finally(()=>{v(bi,b1).delete(this),L(this,_f,null),L(this,v1,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Es.platform;return gn(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{v(this,Jy).read().then(({value:t,done:r})=>{if(r){v(this,qp).resolve();return}v(this,Xy)??L(this,Xy,t.lang),Object.assign(v(this,v1),t.styles),J(this,bm,mye).call(this,t.items),e()},v(this,qp).reject)};return L(this,Jy,v(this,y1).getReader()),v(bi,b1).add(this),e(),v(this,qp).promise}update({viewport:e,onBefore:t=null}){var s;const r=e.scale*Vu.pixelRatio,i=e.rotation;if(i!==v(this,g1)&&(t==null||t(),L(this,g1,i),Hg(v(this,p1),{rotation:i})),r!==v(this,Gp)){t==null||t(),L(this,Gp,r);const o={div:null,properties:null,ctx:J(s=bi,Fl,LP).call(s,v(this,Xy))};for(const a of v(this,Qy))o.properties=v(this,hT).get(a),o.div=a,J(this,bm,d7).call(this,o)}}cancel(){var t;const e=new mm("TextLayer task cancelled.");(t=v(this,Jy))==null||t.cancel(e).catch(()=>{}),L(this,Jy,null),v(this,qp).reject(e)}get textDivs(){return v(this,Qy)}get textContentItemsStr(){return v(this,dT)}static cleanup(){if(!(v(this,b1).size>0)){v(this,x1).clear();for(const{canvas:e}of v(this,Zy).values())e.remove();v(this,Zy).clear()}}},qp=new WeakMap,xa=new WeakMap,aT=new WeakMap,lT=new WeakMap,Xy=new WeakMap,_f=new WeakMap,cT=new WeakMap,uT=new WeakMap,Jy=new WeakMap,p1=new WeakMap,g1=new WeakMap,Gp=new WeakMap,v1=new WeakMap,dT=new WeakMap,y1=new WeakMap,Qy=new WeakMap,hT=new WeakMap,fT=new WeakMap,x1=new WeakMap,Zy=new WeakMap,mT=new WeakMap,Kp=new WeakMap,b1=new WeakMap,bm=new WeakSet,mye=function(e){var i,s;if(v(this,aT))return;(s=v(this,_f)).ctx??(s.ctx=J(i=bi,Fl,LP).call(i,v(this,Xy)));const t=v(this,Qy),r=v(this,dT);for(const o of e){if(t.length>LYe){cn("Ignoring additional textDivs for performance reasons."),L(this,aT,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=v(this,xa);L(this,xa,document.createElement("span")),v(this,xa).classList.add("markedContent"),o.id&&v(this,xa).setAttribute("id",`${o.id}`),a.append(v(this,xa))}else o.type==="endMarkedContent"&&L(this,xa,v(this,xa).parentNode);continue}r.push(o.str),J(this,bm,pye).call(this,o)}},pye=function(e){var y;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};v(this,Qy).push(t);const i=Tt.transform(v(this,fT),e.transform);let s=Math.atan2(i[1],i[0]);const o=v(this,v1)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=v(this,lT)&&o.fontSubstitution||o.fontFamily;a=bi.fontFamilyMap.get(a)||a;const c=Math.hypot(i[2],i[3]),u=c*J(y=bi,Fl,vye).call(y,a,o,v(this,Xy));let d,h;s===0?(d=i[4],h=i[5]-u):(d=i[4]+u*Math.sin(s),h=i[5]-u*Math.cos(s));const f="calc(var(--total-scale-factor) *",p=t.style;v(this,xa)===v(this,p1)?(p.left=`${(100*d/v(this,uT)).toFixed(2)}%`,p.top=`${(100*h/v(this,cT)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(v(bi,Kp)*c).toFixed(2)}px)`,p.fontFamily=a,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,v(this,lT)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);b!==_&&Math.max(b,_)/Math.min(b,_)>1.5&&(x=!0)}if(x&&(r.canvasWidth=o.vertical?e.height:e.width),v(this,hT).set(t,r),v(this,_f).div=t,v(this,_f).properties=r,J(this,bm,d7).call(this,v(this,_f)),r.hasText&&v(this,xa).append(t),r.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),v(this,xa).append(b)}},d7=function(e){var a;const{div:t,properties:r,ctx:i}=e,{style:s}=t;let o="";if(v(bi,Kp)>1&&(o=`scale(${1/v(bi,Kp)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=s,{canvasWidth:u,fontSize:d}=r;J(a=bi,Fl,h7).call(a,i,d*v(this,Gp),c);const{width:h}=i.measureText(t.textContent);h>0&&(o=`scaleX(${u*v(this,Gp)/h}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(s.transform=o)},Fl=new WeakSet,LP=function(e=null){let t=v(this,Zy).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),v(this,Zy).set(e,t),v(this,mT).set(t,{size:0,family:""})}return t},h7=function(e,t,r){const i=v(this,mT).get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)},gye=function(){if(v(this,Kp)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),L(this,Kp,e.getBoundingClientRect().height),e.remove()},vye=function(e,t,r){const i=v(this,x1).get(e);if(i)return i;const s=J(this,Fl,LP).call(this,r);s.canvas.width=s.canvas.height=VZ,J(this,Fl,h7).call(this,s,VZ,e);const o=s.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return a?u=a/(a+c):(Es.platform.isFirefox&&cn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),v(this,x1).set(e,u),u},G(bi,Fl),G(bi,x1,new Map),G(bi,Zy,new Map),G(bi,mT,new WeakMap),G(bi,Kp,null),G(bi,b1,new Set),bi);const FYe=100;function rH(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new f7,{docId:t}=e,r=n.url?qKe(n.url):null,i=n.data?GKe(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof iH?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof T_?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!BA(n.docBaseUrl)?n.docBaseUrl:null,p=Dj(n.cMapUrl),x=n.cMapPacked!==!1,y=n.CMapReaderFactory||(Ro?eYe:TZ),b=Dj(n.iccUrl),_=Dj(n.standardFontDataUrl),C=n.StandardFontDataFactory||(Ro?tYe:AZ),k=Dj(n.wasmUrl),T=n.WasmFactory||(Ro?nYe:NZ),E=n.stopAtErrors!==!0,N=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,M=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ro,O=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ro&&(Es.platform.isFirefox||!globalThis.chrome),q=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,D=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ro,F=n.fontExtraProperties===!0,K=n.enableXfa===!0,ee=n.ownerDocument||globalThis.document,Y=n.disableRange===!0,U=n.disableStream===!0,R=n.disableAutoFetch===!0,z=n.pdfBug===!0,W=n.CanvasFactory||(Ro?ZKe:XKe),se=n.FilterFactory||(Ro?QKe:JKe),ne=n.enableHWA===!0,te=n.useWasm!==!1,H=c?c.length:n.length??NaN,ce=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ro&&!D,pe=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(y===TZ&&C===AZ&&T===NZ&&p&&_&&k&&Wk(p,document.baseURI)&&Wk(_,document.baseURI)&&Wk(k,document.baseURI)),oe=null;TKe(h);const ve={canvasFactory:new W({ownerDocument:ee,enableHWA:ne}),filterFactory:new se({docId:t,ownerDocument:ee}),cMapReaderFactory:pe?null:new y({baseUrl:p,isCompressed:x}),standardFontDataFactory:pe?null:new C({baseUrl:_}),wasmFactory:pe?null:new T({baseUrl:k})};d||(d=T_.create({verbosity:h,port:_c.workerPort}),e._worker=d);const be={docId:t,apiVersion:"5.4.296",data:i,password:a,disableAutoFetch:R,rangeChunkSize:u,length:H,docBaseUrl:f,enableXfa:K,evaluatorOptions:{maxImageSize:N,disableFontFace:D,ignoreErrors:E,isEvalSupported:P,isOffscreenCanvasSupported:M,isImageDecoderSupported:O,canvasMaxAreaInBytes:q,fontExtraProperties:F,useSystemFonts:ce,useWasm:te,useWorkerFetch:pe,cMapUrl:p,iccUrl:b,standardFontDataUrl:_,wasmUrl:k}},fe={ownerDocument:ee,pdfBug:z,styleElement:oe,loadingParams:{disableAutoFetch:R,enableXfa:K}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const we=d.messageHandler.sendWithPromise("GetDocRequest",be,i?[i.buffer]:null);let ue;if(c)ue=new bYe(c,{disableRange:Y,disableStream:U});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Z=Wk(r)?kYe:Ro?RYe:NYe;ue=new Z({url:r,length:H,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:Y,disableStream:U})}return we.then(Z=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ge=new Jk(t,Z,d.port),he=new VYe(ge,e,ue,fe,ve,ne);e._transport=he,ge.send("Ready",null)})}).catch(e._capability.reject),e}var PR;const IR=class IR{constructor(){j(this,"_capability",Promise.withResolvers());j(this,"_transport",null);j(this,"_worker",null);j(this,"docId",`d${pi(IR,PR)._++}`);j(this,"destroyed",!1);j(this,"onPassword",null);j(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};PR=new WeakMap,G(IR,PR,0);let f7=IR;var e0,pT,gT,vT,yT,gae;let iH=(gae=class{constructor(e,t,r=!1,i=null){G(this,e0,Promise.withResolvers());G(this,pT,[]);G(this,gT,[]);G(this,vT,[]);G(this,yT,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){v(this,yT).push(e)}addProgressListener(e){v(this,vT).push(e)}addProgressiveReadListener(e){v(this,gT).push(e)}addProgressiveDoneListener(e){v(this,pT).push(e)}onDataRange(e,t){for(const r of v(this,yT))r(e,t)}onDataProgress(e,t){v(this,e0).promise.then(()=>{for(const r of v(this,vT))r(e,t)})}onDataProgressiveRead(e){v(this,e0).promise.then(()=>{for(const t of v(this,gT))t(e)})}onDataProgressiveDone(){v(this,e0).promise.then(()=>{for(const e of v(this,pT))e()})}transportReady(){v(this,e0).resolve()}requestDataRange(e,t){xr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},e0=new WeakMap,pT=new WeakMap,gT=new WeakMap,vT=new WeakMap,yT=new WeakMap,gae);class BYe{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return gn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Sf,t0,iC;class $Ye{constructor(e,t,r,i=!1){G(this,t0);G(this,Sf,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new bZ:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new fye,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new FA({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return gn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:i="display",annotationMode:s=Qd.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:x=null}){var O,q,D;(O=this._stats)==null||O.time("Overall");const y=this._transport.getRenderingIntent(i,s,h,f),{renderingIntent:b,cacheKey:_}=y;L(this,Sf,!1),c||(c=this._transport.getOptionalContentConfig(b));let C=this._intentStates.get(_);C||(C=Object.create(null),this._intentStates.set(_,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const k=!!(b&bl.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(q=this._stats)==null||q.time("Page Request"),this._pumpOperatorList(y));const T=!!(this._pdfBug&&((D=globalThis.StepperManager)!=null&&D.enabled)),E=!this.recordedBBoxes&&(p||T),N=F=>{var K,ee;if(C.renderTasks.delete(P),E){const Y=(K=P.gfx)==null?void 0:K.dependencyTracker.take();Y&&(P.stepper&&P.stepper.setOperatorBBoxes(Y,P.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=Y))}k&&L(this,Sf,!0),J(this,t0,iC).call(this),F?(P.capability.reject(F),this._abortOperatorList({intentState:C,reason:F instanceof Error?F:new Error(F)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(ee=globalThis.Stats)!=null&&ee.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new m7({callback:N,params:{canvas:t,canvasContext:e,dependencyTracker:E?new iYe(t,C.operatorList.length,T):null,viewport:r,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:x});(C.renderTasks||(C.renderTasks=new Set)).add(P);const M=P.task;return Promise.all([C.displayReadyCapability.promise,c]).then(([F,K])=>{var ee;if(this.destroyed){N();return}if((ee=this._stats)==null||ee.time("Rendering"),!(K.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:F,optionalContentConfig:K}),P.operatorListChanged()}).catch(N),M}getOperatorList({intent:e="display",annotationMode:t=Qd.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var u;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,r,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>EE.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:c,done:u}){if(u){r(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),s()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),L(this,Sf,!1),Promise.all(e)}cleanup(e=!1){L(this,Sf,!0);const t=J(this,t0,iC).call(this);return e&&t&&this._stats&&(this._stats=new bZ),t}_startRenderPage(e,t){var i,s;const r=this._intentStates.get(t);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&J(this,t0,iC).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();J(this,t0,iC).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof e3){let i=FYe;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new mm(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Sf=new WeakMap,t0=new WeakSet,iC=function(){if(!v(this,Sf)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),L(this,Sf,!1),!0};var Yp,au,kf,n0,OR,r0,i0,Ho,FP,yye,xye,sC,w1,BP;const Wr=class Wr{constructor({name:e=null,port:t=null,verbosity:r=AKe()}={}){G(this,Ho);G(this,Yp,Promise.withResolvers());G(this,au,null);G(this,kf,null);G(this,n0,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(v(Wr,i0).has(t))throw new Error("Cannot use more than one PDFWorker per port.");v(Wr,i0).set(t,this),J(this,Ho,yye).call(this,t)}else J(this,Ho,xye).call(this)}get promise(){return v(this,Yp).promise}get port(){return v(this,kf)}get messageHandler(){return v(this,au)}destroy(){var e,t;this.destroyed=!0,(e=v(this,n0))==null||e.terminate(),L(this,n0,null),v(Wr,i0).delete(v(this,kf)),L(this,kf,null),(t=v(this,au))==null||t.destroy(),L(this,au,null)}static create(e){const t=v(this,i0).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Wr(e)}static get workerSrc(){if(_c.workerSrc)return _c.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return gn(this,"_setupFakeWorkerGlobal",(async()=>v(this,w1,BP)?v(this,w1,BP):(await import(this.workerSrc)).WorkerMessageHandler)())}};Yp=new WeakMap,au=new WeakMap,kf=new WeakMap,n0=new WeakMap,OR=new WeakMap,r0=new WeakMap,i0=new WeakMap,Ho=new WeakSet,FP=function(){v(this,Yp).resolve(),v(this,au).send("configure",{verbosity:this.verbosity})},yye=function(e){L(this,kf,e),L(this,au,new Jk("main","worker",e)),v(this,au).on("ready",()=>{}),J(this,Ho,FP).call(this)},xye=function(){if(v(Wr,r0)||v(Wr,w1,BP)){J(this,Ho,sC).call(this);return}let{workerSrc:e}=Wr;try{Wr._isSameOrigin(window.location,e)||(e=Wr._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Jk("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?v(this,Yp).reject(new Error("Worker was destroyed")):J(this,Ho,sC).call(this)},s=new AbortController;t.addEventListener("error",()=>{v(this,n0)||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}L(this,au,r),L(this,kf,t),L(this,n0,t),J(this,Ho,FP).call(this)}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{J(this,Ho,sC).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{ZM("The worker has been disabled.")}J(this,Ho,sC).call(this)},sC=function(){v(Wr,r0)||(cn("Setting up fake worker."),L(Wr,r0,!0)),Wr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){v(this,Yp).reject(new Error("Worker was destroyed"));return}const t=new YKe;L(this,kf,t);const r=`fake${pi(Wr,OR)._++}`,i=new Jk(r+"_worker",r,t);e.setup(i,t),L(this,au,new Jk(r,r+"_worker",t)),J(this,Ho,FP).call(this)}).catch(e=>{v(this,Yp).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},w1=new WeakSet,BP=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},G(Wr,w1),G(Wr,OR,0),G(Wr,r0,!1),G(Wr,i0,new WeakMap),Ro&&(L(Wr,r0,!0),_c.workerSrc||(_c.workerSrc="./pdf.worker.mjs")),Wr._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},Wr._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Wr.fromPort=e=>{if(LKe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Wr.create(e)};let T_=Wr;var Cf,Ld,_1,S1,Ef,s0,oC;class VYe{constructor(e,t,r,i,s,o){G(this,s0);G(this,Cf,new Map);G(this,Ld,new Map);G(this,_1,new Map);G(this,S1,new Map);G(this,Ef,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new fye,this.fontLoader=new HKe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return gn(this,"annotationStorage",new eH)}getRenderingIntent(e,t=Qd.ENABLE,r=null,i=!1,s=!1){let o=bl.DISPLAY,a=J$;switch(e){case"any":o=bl.ANY;break;case"display":break;case"print":o=bl.PRINT;break;default:cn(`getRenderingIntent - invalid intent: ${e}`)}const c=o&bl.PRINT&&r instanceof Xve?r:this.annotationStorage;switch(t){case Qd.DISABLE:o+=bl.ANNOTATIONS_DISABLE;break;case Qd.ENABLE:break;case Qd.ENABLE_FORMS:o+=bl.ANNOTATIONS_FORMS;break;case Qd.ENABLE_STORAGE:o+=bl.ANNOTATIONS_STORAGE,a=c.serializable;break;default:cn(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=bl.IS_EDITING),s&&(o+=bl.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=v(this,Ef))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of v(this,Ld).values())e.push(i._destroy());v(this,Ld).clear(),v(this,_1).clear(),v(this,S1).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),v(this,Cf).clear(),this.filterFactory.destroy(),NE.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new mm("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{In(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}In(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{In(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}In(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new BYe(r,this))}),e.on("DocException",r=>{t._capability.reject(fa(r))}),e.on("PasswordRequest",r=>{L(this,Ef,Promise.withResolvers());try{if(!t.onPassword)throw fa(r);const i=s=>{s instanceof Error?v(this,Ef).reject(s):v(this,Ef).resolve({password:s})};t.onPassword(i,r.code)}catch(i){v(this,Ef).reject(i)}return v(this,Ef).promise}),e.on("DataLoaded",r=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;v(this,Ld).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const h=s.error;cn(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const a=new l7(s),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new WKe(a,c,s.extra,s.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:d}=s;In(d,"The imageRef must be defined.");for(const h of v(this,Ld).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{var c;if(this.destroyed)return;const a=v(this,Ld).get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(s){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&cn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=v(this,_1).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&v(this,S1).set(s.refStr,e);const o=new $Ye(t,s,this,this._params.pdfBug);return v(this,Ld).set(t,o),o});return v(this,_1).set(t,i),i}getPageIndex(e){return Q$(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return J(this,s0,oC).call(this,"GetFieldObjects")}hasJSActions(){return J(this,s0,oC).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return J(this,s0,oC).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return J(this,s0,oC).call(this,"GetOptionalContentConfig").then(t=>new xYe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=v(this,Cf).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,o;return{info:i[0],metadata:i[1]?new vYe(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return v(this,Cf).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of v(this,Ld).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),v(this,Cf).clear(),this.filterFactory.destroy(!0),NE.cleanup()}}cachedPageNumber(e){if(!Q$(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return v(this,S1).get(t)??null}}Cf=new WeakMap,Ld=new WeakMap,_1=new WeakMap,S1=new WeakMap,Ef=new WeakMap,s0=new WeakSet,oC=function(e,t=null){const r=v(this,Cf).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return v(this,Cf).set(e,i),i};var Xp;class UYe{constructor(e){G(this,Xp,null);j(this,"onContinue",null);j(this,"onError",null);L(this,Xp,e)}get promise(){return v(this,Xp).capability.promise}cancel(e=0){v(this,Xp).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=v(this,Xp).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=v(this,Xp);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Xp=new WeakMap;var Jp,o0;const sy=class sy{constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:x=null}){G(this,Jp,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new UYe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=x}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(v(sy,o0).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");v(sy,o0).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:s,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new vw(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var r,i,s;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),v(this,Jp)&&(window.cancelAnimationFrame(v(this,Jp)),L(this,Jp,null)),v(sy,o0).delete(this._canvas),e||(e=new e3(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?L(this,Jp,window.requestAnimationFrame(()=>{L(this,Jp,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),v(sy,o0).delete(this._canvas),this.callback())))}};Jp=new WeakMap,o0=new WeakMap,G(sy,o0,new WeakSet);let m7=sy;const bye="5.4.296",wye="f56dc8601";var ll,a0,k1,ns,xT,C1,Tf,bT,Qp,lu,wT,lr,p7,g7,v7,Jv,_ye,up;const ma=class ma{constructor({editor:e=null,uiManager:t=null}){G(this,lr);G(this,ll,null);G(this,a0,null);G(this,k1);G(this,ns,null);G(this,xT,!1);G(this,C1,!1);G(this,Tf,null);G(this,bT);G(this,Qp,null);G(this,lu,null);var r,i;e?(L(this,C1,!1),L(this,Tf,e)):L(this,C1,!0),L(this,lu,(e==null?void 0:e._uiManager)||t),L(this,bT,v(this,lu)._eventBus),L(this,k1,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=v(this,lu))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),v(ma,wT)||L(ma,wT,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return gn(this,"_keyboardManager",new $A([[["Escape","mac+Escape"],ma.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ma.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ma.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ma.prototype._moveToPrevious],[["Home","mac+Home"],ma.prototype._moveToBeginning],[["End","mac+End"],ma.prototype._moveToEnd]]))}renderButton(){const e=L(this,ll,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",v(this,Tf)&&(e.ariaControls=`${v(this,Tf).id}_colorpicker_dropdown`);const t=v(this,lu)._signal;e.addEventListener("click",J(this,lr,Jv).bind(this),{signal:t}),e.addEventListener("keydown",J(this,lr,v7).bind(this),{signal:t});const r=L(this,a0,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=v(this,k1),e.append(r),e}renderMainDropdown(){const e=L(this,ns,J(this,lr,p7).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===v(this,ll)){J(this,lr,Jv).call(this,e);return}const t=e.target.getAttribute("data-color");t&&J(this,lr,g7).call(this,t,e)}_moveToNext(e){var t,r;if(!v(this,lr,up)){J(this,lr,Jv).call(this,e);return}if(e.target===v(this,ll)){(t=v(this,ns).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=v(this,ns))==null?void 0:t.firstChild)||e.target===v(this,ll)){v(this,lr,up)&&this._hideDropdownFromKeyboard();return}v(this,lr,up)||J(this,lr,Jv).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!v(this,lr,up)){J(this,lr,Jv).call(this,e);return}(t=v(this,ns).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!v(this,lr,up)){J(this,lr,Jv).call(this,e);return}(t=v(this,ns).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=v(this,ns))==null||e.classList.add("hidden"),v(this,ll).ariaExpanded="false",(t=v(this,Qp))==null||t.abort(),L(this,Qp,null)}_hideDropdownFromKeyboard(){var e;if(!v(this,C1)){if(!v(this,lr,up)){(e=v(this,Tf))==null||e.unselect();return}this.hideDropdown(),v(this,ll).focus({preventScroll:!0,focusVisible:v(this,xT)})}}updateColor(e){if(v(this,a0)&&(v(this,a0).style.backgroundColor=e),!v(this,ns))return;const t=v(this,lu).highlightColors.values();for(const r of v(this,ns).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=v(this,ll))==null||e.remove(),L(this,ll,null),L(this,a0,null),(t=v(this,ns))==null||t.remove(),L(this,ns,null)}};ll=new WeakMap,a0=new WeakMap,k1=new WeakMap,ns=new WeakMap,xT=new WeakMap,C1=new WeakMap,Tf=new WeakMap,bT=new WeakMap,Qp=new WeakMap,lu=new WeakMap,wT=new WeakMap,lr=new WeakSet,p7=function(){const e=document.createElement("div"),t=v(this,lu)._signal;e.addEventListener("contextmenu",Ul,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),v(this,Tf)&&(e.id=`${v(this,Tf).id}_colorpicker_dropdown`);for(const[r,i]of v(this,lu).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",v(ma,wT)[r]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.ariaSelected=i===v(this,k1),s.addEventListener("click",J(this,lr,g7).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",J(this,lr,v7).bind(this),{signal:t}),e},g7=function(e,t){t.stopPropagation(),v(this,bT).dispatch("switchannotationeditorparams",{source:this,type:jn.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},v7=function(e){ma._keyboardManager.exec(this,e)},Jv=function(e){if(v(this,lr,up)){this.hideDropdown();return}if(L(this,xT,e.detail===0),v(this,Qp)||(L(this,Qp,new AbortController),window.addEventListener("pointerdown",J(this,lr,_ye).bind(this),{signal:v(this,lu).combinedSignal(v(this,Qp))})),v(this,ll).ariaExpanded="true",v(this,ns)){v(this,ns).classList.remove("hidden");return}const t=L(this,ns,J(this,lr,p7).call(this));v(this,ll).append(t)},_ye=function(e){var t;(t=v(this,ns))!=null&&t.contains(e.target)||this.hideDropdown()},up=function(){return v(this,ns)&&!v(this,ns).classList.contains("hidden")},G(ma,wT,null);let jE=ma;var Fd,_T,E1,ST;const oy=class oy{constructor(e){G(this,Fd,null);G(this,_T,null);G(this,E1,null);L(this,_T,e),L(this,E1,e._uiManager),v(oy,ST)||L(oy,ST,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(v(this,Fd))return v(this,Fd);const{editorType:e,colorType:t,colorValue:r}=v(this,_T),i=L(this,Fd,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",v(oy,ST)[e]),i.addEventListener("input",()=>{v(this,E1).updateParams(t,i.value)},{signal:v(this,E1)._signal}),i}update(e){v(this,Fd)&&(v(this,Fd).value=e)}destroy(){var e;(e=v(this,Fd))==null||e.remove(),L(this,Fd,null)}hideDropdown(){}};Fd=new WeakMap,_T=new WeakMap,E1=new WeakMap,ST=new WeakMap,G(oy,ST,null);let dO=oy;function UZ(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function wk(n){return Math.max(0,Math.min(255,255*n))}class zZ{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=wk(e),[e,e,e]}static G_HTML([e]){const t=UZ(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(wk)}static RGB_HTML(e){return`#${e.map(UZ).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[wk(1-Math.min(1,e+i)),wk(1-Math.min(1,r+i)),wk(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}}class zYe{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){xr("Abstract method `_createSVG` called.")}}class PE extends zYe{_createSVG(e){return document.createElementNS(Xh,e)}}const HYe=9,tx=new WeakSet,WYe=new Date().getTimezoneOffset()*60*1e3;class HZ{static create(e){switch(e.data.annotationType){case Ti.LINK:return new sH(e);case Ti.TEXT:return new GYe(e);case Ti.WIDGET:switch(e.data.fieldType){case"Tx":return new KYe(e);case"Btn":return e.data.radioButton?new Cye(e):e.data.checkBox?new XYe(e):new JYe(e);case"Ch":return new QYe(e);case"Sig":return new YYe(e)}return new vx(e);case Ti.POPUP:return new x7(e);case Ti.FREETEXT:return new jye(e);case Ti.LINE:return new eXe(e);case Ti.SQUARE:return new tXe(e);case Ti.CIRCLE:return new nXe(e);case Ti.POLYLINE:return new Pye(e);case Ti.CARET:return new iXe(e);case Ti.INK:return new oH(e);case Ti.POLYGON:return new rXe(e);case Ti.HIGHLIGHT:return new Iye(e);case Ti.UNDERLINE:return new sXe(e);case Ti.SQUIGGLY:return new oXe(e);case Ti.STRIKEOUT:return new aXe(e);case Ti.STAMP:return new Oye(e);case Ti.FILEATTACHMENT:return new lXe(e);default:return new ai(e)}}}var l0,T1,yc,kT,y7;const RW=class RW{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){G(this,kT);G(this,l0,null);G(this,T1,!1);G(this,yc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return RW._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,t=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:i}=this.data;let s=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],s=t[c+2]):t[c+1]===o&&(s=Math.max(s,t[c+2]));return[s,o]}if((r==null?void 0:r.length)>=1){for(const c of r)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>o?(o=c[u+1],s=c[u]):c[u+1]===o&&(s=Math.max(s,c[u]));if(s!==1/0)return[s,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/r,e[1]=100*(e[1]-o)/i,e}get commentText(){var t,r,i;const{data:e}=this;return((r=(t=this.annotationStorage.getRawValue(`${kE}${e.id}`))==null?void 0:t.popup)==null?void 0:r.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${kE}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=v(this,yc))==null?void 0:e.popup)||this.popup)==null||t.remove(),L(this,yc,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(v(this,l0)||L(this,l0,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&J(this,kT,y7).call(this,t);let i=((s=v(this,yc))==null?void 0:s.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=v(this,yc).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),L(this,yc,null),this.popup=null))}resetEdited(){var e;v(this,l0)&&(J(this,kT,y7).call(this,v(this,l0).rect),(e=v(this,yc))==null||e.popup.resetEdited(),L(this,l0,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof vx)&&!(this instanceof sH)&&(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof x7){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,s),s}const{width:a,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(y>0||b>0){const C=`calc(${y}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof Cye){const C=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=C}switch(t.borderStyle.style){case Nb.SOLID:o.borderStyle="solid";break;case Nb.DASHED:o.borderStyle="dashed";break;case Nb.BEVELED:cn("Unimplemented border style: beveled");break;case Nb.INSET:cn("Unimplemented border style: inset");break;case Nb.UNDERLINE:o.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(L(this,T1,!0),o.borderColor=Tt.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}const u=Tt.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-p)/h}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(o.width=`${100*a/d}%`,o.height=`${100*c/h}%`):this.setRotation(x,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:o}=this;e%180!==0&&([s,o]=[o,s]),t.style.width=`${100*s/r}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],o=s[0],a=s.slice(1);i.target.style[r]=zZ[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:zZ[`${o}_rgb`](a)})};return gn(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||r[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const o=r[i];if(o){const a={detail:{[i]:s},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,b,_,C]=e.subarray(2,6);if(i===y&&s===b&&t===_&&r===C)return}const{style:o}=this.container;let a;if(v(this,T1)){const{borderColor:y,borderWidth:b}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const c=i-t,u=s-r,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),x=`clippath_${this.data.id}`;p.setAttribute("id",x),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,b=e.length;y<b;y+=8){const _=e[y],C=e[y+1],k=e[y+2],T=e[y+3],E=d.createElement("rect"),N=(k-t)/c,P=(s-C)/u,M=(_-k)/c,O=(C-T)/u;E.setAttribute("x",N),E.setAttribute("y",P),E.setAttribute("width",M),E.setAttribute("height",O),p.append(E),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${P}" width="${M}" height="${O}"/>`)}v(this,T1)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:t}=this;let r,i;e?(r={str:e.text},i=e.date):(r=t.contentsObj,i=t.modificationDate);const s=L(this,yc,new x7({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(s.render())}get hasPopupElement(){return!!(v(this,yc)||this.popup||this.data.popupRef)}get extraPopupElement(){return v(this,yc)}render(){xr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:a}of i){if(s===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!tx.has(u)){cn(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:u})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&tx.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};l0=new WeakMap,T1=new WeakMap,yc=new WeakMap,kT=new WeakSet,y7=function(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:c}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+c)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let ai=RW;class qYe extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var El,Qv,Sye,kye;class sH extends ai{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});G(this,El);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(r.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(J(this,El,Sye).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(J(this,El,kye).call(this,i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(t,r,i=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&J(this,El,Qv).call(this),i&&(t.title=i)}_bindNamedAction(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(t.title=i),J(this,El,Qv).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const o=i.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),J(this,El,Qv).call(this)}_bindResetFormAction(t,r){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),J(this,El,Qv).call(this),!this._fieldObjects){cn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:s,refs:o,include:a}=r,c=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const p of s){const x=this._fieldObjects[p]||[];for(const{id:y}of x)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const x of p)f.has(x.id)===a&&c.push(x)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:p}=f;switch(d.push(p),f.type){case"text":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}default:continue}const x=document.querySelector(`[data-element-id="${p}"]`);if(x){if(!tx.has(x)){cn(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}El=new WeakSet,Qv=function(){this.container.setAttribute("data-internal-link","")},Sye=function(t,r,i="",s=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:i&&(t.title=i),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(r.content,r.filename,s),!1},J(this,El,Qv).call(this)},kye=function(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(t.title=i),J(this,El,Qv).call(this)};class GYe extends ai{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class vx extends ai{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Es.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}}))})}_setEventListeners(e,t,r,i){var s,o,a;for(const[c,u]of r)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Tt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||HYe,s=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(V5*i))||1,h=u/d;o=Math.min(i,c(h/V5))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,c(u/V5))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=Tt.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class KYe extends vx{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),tx.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,x=!!f&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(r,"value",b.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",b=>{const _=this.data.defaultFieldValue??"";r.value=d.userValue=_,d.formattedValue=null});let y=b=>{const{formattedValue:_}=d;_!=null&&(b.target.value=_),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",_=>{var k;if(d.focused)return;const{target:C}=_;if(x&&(C.type=f,p&&(C.step=p)),d.userValue){const T=d.userValue;if(x)if(f==="time"){const E=new Date(T),N=[E.getHours(),E.getMinutes(),E.getSeconds()];C.value=N.map(P=>P.toString().padStart(2,"0")).join(":")}else C.value=new Date(T-WYe).toISOString().split(f==="date"?"T":".",1)[0];else C.value=T}d.lastCommittedValue=C.value,d.commitKey=1,(k=this.data.actions)!=null&&k.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const C={value(k){d.userValue=k.detail.value??"",x||e.setValue(t,{value:d.userValue.toString()}),k.target.value=d.userValue},formattedValue(k){const{formattedValue:T}=k.detail;d.formattedValue=T,T!=null&&k.target!==document.activeElement&&(k.target.value=T);const E={formattedValue:T};x&&(E.value=T),e.setValue(t,E)},selRange(k){k.target.setSelectionRange(...k.detail.selRange)},charLimit:k=>{var P;const{charLimit:T}=k.detail,{target:E}=k;if(T===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",T);let N=d.userValue;!N||N.length<=T||(N=N.slice(0,T),E.value=d.userValue=N,e.setValue(t,{value:N}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(C,_)}),r.addEventListener("keydown",_=>{var T;d.commitKey=1;let C=-1;if(_.key==="Escape"?C=0:_.key==="Enter"&&!this.data.multiLine?C=2:_.key==="Tab"&&(d.commitKey=3),C===-1)return;const{value:k}=_.target;d.lastCommittedValue!==k&&(d.lastCommittedValue=k,d.userValue=k,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:C,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const b=y;y=null,r.addEventListener("blur",_=>{var T,E;if(!d.focused||!_.relatedTarget)return;(T=this.data.actions)!=null&&T.Blur||(d.focused=!1);const{target:C}=_;let{value:k}=C;if(x){if(k&&f==="time"){const N=k.split(":").map(P=>parseInt(P,10));k=new Date(2e3,0,1,N[0],N[1],N[2]||0).valueOf(),C.step=""}else k.includes("T")||(k=`${k}T00:00`),k=new Date(k).valueOf();C.type="text"}d.userValue=k,d.lastCommittedValue!==k&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:d.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),b(_)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",_=>{var O;d.lastCommittedValue=null;const{data:C,target:k}=_,{value:T,selectionStart:E,selectionEnd:N}=k;let P=E,M=N;switch(_.inputType){case"deleteWordBackward":{const q=T.substring(0,E).match(/\w*[^\w]*$/);q&&(P-=q[0].length);break}case"deleteWordForward":{const q=T.substring(E).match(/^[^\w]*\w*/);q&&(M+=q[0].length);break}case"deleteContentBackward":E===N&&(P-=1);break;case"deleteContentForward":E===N&&(M+=1);break}_.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,change:C||"",willCommit:!1,selStart:P,selEnd:M}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(y&&r.addEventListener("blur",y),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class YYe extends vx{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class XYe extends vx{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return tx.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(r,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Cye extends vx{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(tx.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class JYe extends sH{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class QYe extends vx{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");tx.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,r.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let o=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),o=()=>{d.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,x=>x.selected).map(x=>x[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,x=new Set(Array.isArray(p)?p:[p]);for(const y of i.options)y.selected=x.has(y.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,x=f.detail.remove;p[x].selected=!1,i.remove(x),p.length>0&&Array.prototype.findIndex.call(p,b=>b.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:x,exportValue:y}=f.detail.insert,b=i.children[p],_=document.createElement("option");_.textContent=x,_.value=y,b?b.before(_):i.append(_),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const x of p){const{displayValue:y,exportValue:b}=x,_=document.createElement("option");_.textContent=y,_.value=b,i.append(_)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const x of f.target.options)x.selected=p.has(x.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("input",d=>{var p;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var CT,b7;class x7 extends ai{constructor(t){const{data:r,elements:i,parent:s}=t,o=!!s._commentManager;super(t,{isRenderable:!o&&ai._hasPopupData(r)});G(this,CT);if(this.elements=i,o&&ai._hasPopupData(r)){const a=this.popup=J(this,CT,b7).call(this);for(const c of i)c.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const r=this.popup=J(this,CT,b7).call(this),i=[];for(const s of this.elements)s.popup=r,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${Jz}${s}`).join(",")),this.container}}CT=new WeakSet,b7=function(){return new ZYe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var cl,Zp,RR,MR,A1,N1,xi,Bd,eg,c0,j1,P1,$d,ul,Af,Nf,ys,jf,tg,ET,Pf,I1,u0,ng,po,rg,xn,$P,w7,_7,S7,VP,k7,Eye,Tye,Aye,Nye,UP,zP,C7;class ZYe{constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){G(this,xn);G(this,cl,null);G(this,Zp,J(this,xn,Aye).bind(this));G(this,RR,J(this,xn,C7).bind(this));G(this,MR,J(this,xn,zP).bind(this));G(this,A1,J(this,xn,UP).bind(this));G(this,N1,null);G(this,xi,null);G(this,Bd,null);G(this,eg,null);G(this,c0,null);G(this,j1,null);G(this,P1,null);G(this,$d,!1);G(this,ul,null);G(this,Af,null);G(this,Nf,null);G(this,ys,null);G(this,jf,null);G(this,tg,null);G(this,ET,null);G(this,Pf,null);G(this,I1,null);G(this,u0,null);G(this,ng,!1);G(this,po,null);G(this,rg,null);L(this,xi,e),L(this,I1,i),L(this,Bd,o),L(this,Pf,a),L(this,j1,c),L(this,N1,t),L(this,ET,u),L(this,P1,d),L(this,c0,r),L(this,cl,f),L(this,po,r[0]),L(this,eg,TE.toDateObject(s)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),f?this.renderCommentButton():(J(this,xn,$P).call(this),v(this,xi).hidden=!0,h&&J(this,xn,UP).call(this))}renderCommentButton(){if(v(this,ys)||(v(this,jf)||J(this,xn,w7).call(this),!v(this,jf)))return;const{signal:e}=L(this,Af,new AbortController),t=!!v(this,po).extraPopupElement,r=()=>{v(this,cl).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{v(this,cl).toggleCommentPopup(this,!1,!0,!t)},s=()=>{v(this,cl).toggleCommentPopup(this,!1,!1)};if(t){L(this,ys,v(this,po).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",v(this,Zp),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=L(this,ys,document.createElement("button"));o.className="annotationCommentButton";const a=v(this,po).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),J(this,xn,S7).call(this),J(this,xn,_7).call(this),o.addEventListener("keydown",v(this,Zp),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=v(this,po).commentData;return e?v(this,j1)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=v(this,ys))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:i,modificationDate:s}=v(this,po).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:i,modificationDate:s}}get elementBeforePopup(){return v(this,ys)}get comment(){return v(this,rg)||L(this,rg,v(this,po).commentText),v(this,rg)}set comment(e){e!==this.comment&&(v(this,po).commentText=L(this,rg,e))}get parentBoundingClientRect(){return v(this,po).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){v(this,ys)&&(v(this,ys).classList.toggle("selected",e),v(this,ys).ariaExpanded=t)}setSelectedCommentButton(e){v(this,ys).classList.toggle("selected",e)}get commentPopupPosition(){if(v(this,tg))return v(this,tg);const{x:e,y:t,height:r}=v(this,ys).getBoundingClientRect(),{x:i,y:s,width:o,height:a}=v(this,po).layer.getBoundingClientRect();return[(e-i)/o,(t+r-s)/a]}set commentPopupPosition(e){L(this,tg,e)}hasDefaultPopupPosition(){return v(this,tg)===null}get commentButtonPosition(){return v(this,jf)}get commentButtonWidth(){return v(this,ys).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=v(this,tg)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:s,y:o,width:a,height:c}=i;v(this,cl).showDialog(null,this,s+t*a,o+r*c,{...e,parentDimensions:i})}render(){var r,i;if(v(this,ul))return;const e=L(this,ul,document.createElement("div"));if(e.className="popup",v(this,N1)){const s=e.style.outlineColor=Tt.makeHexColor(...v(this,N1));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=v(this,I1))!=null&&r.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=v(this,I1)}if(e.append(t),v(this,eg)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:v(this,eg).valueOf()})),s.dateTime=v(this,eg).toISOString(),t.append(s)}Zz({html:v(this,xn,VP)||v(this,Bd).str,dir:(i=v(this,Bd))==null?void 0:i.dir,className:"popupContent"},e),v(this,xi).append(e)}updateEdited({rect:e,popup:t,deleted:r}){var i;if(v(this,cl)){r?(this.remove(),L(this,rg,null)):t&&(t.deleted?this.remove():(J(this,xn,S7).call(this),L(this,rg,t.text))),e&&(L(this,jf,null),J(this,xn,w7).call(this),J(this,xn,_7).call(this));return}if(r||t!=null&&t.deleted){this.remove();return}J(this,xn,$P).call(this),v(this,u0)||L(this,u0,{contentsObj:v(this,Bd),richText:v(this,Pf)}),e&&L(this,Nf,null),t&&t.text&&(L(this,Pf,J(this,xn,Tye).call(this,t.text)),L(this,eg,TE.toDateObject(t.date)),L(this,Bd,null)),(i=v(this,ul))==null||i.remove(),L(this,ul,null)}resetEdited(){var e;v(this,u0)&&({contentsObj:pi(this,Bd)._,richText:pi(this,Pf)._}=v(this,u0),L(this,u0,null),(e=v(this,ul))==null||e.remove(),L(this,ul,null),L(this,Nf,null))}remove(){var e,t,r;if((e=v(this,Af))==null||e.abort(),L(this,Af,null),(t=v(this,ul))==null||t.remove(),L(this,ul,null),L(this,ng,!1),L(this,$d,!1),(r=v(this,ys))==null||r.remove(),L(this,ys,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){L(this,ng,this.isVisible),v(this,ng)&&(v(this,xi).hidden=!0)}maybeShow(){v(this,cl)||(J(this,xn,$P).call(this),v(this,ng)&&(v(this,ul)||J(this,xn,zP).call(this),L(this,ng,!1),v(this,xi).hidden=!1))}get isVisible(){return v(this,cl)?!1:v(this,xi).hidden===!1}}cl=new WeakMap,Zp=new WeakMap,RR=new WeakMap,MR=new WeakMap,A1=new WeakMap,N1=new WeakMap,xi=new WeakMap,Bd=new WeakMap,eg=new WeakMap,c0=new WeakMap,j1=new WeakMap,P1=new WeakMap,$d=new WeakMap,ul=new WeakMap,Af=new WeakMap,Nf=new WeakMap,ys=new WeakMap,jf=new WeakMap,tg=new WeakMap,ET=new WeakMap,Pf=new WeakMap,I1=new WeakMap,u0=new WeakMap,ng=new WeakMap,po=new WeakMap,rg=new WeakMap,xn=new WeakSet,$P=function(){var t;if(v(this,Af))return;L(this,Af,new AbortController);const{signal:e}=v(this,Af);for(const r of this.trigger)r.addEventListener("click",v(this,A1),{signal:e}),r.addEventListener("pointerenter",v(this,MR),{signal:e}),r.addEventListener("pointerleave",v(this,RR),{signal:e}),r.classList.add("popupTriggerArea");for(const r of v(this,c0))(t=r.container)==null||t.addEventListener("keydown",v(this,Zp),{signal:e})},w7=function(){const e=v(this,c0).find(t=>t.hasCommentButton);e&&L(this,jf,e._normalizePoint(e.commentButtonPosition))},_7=function(){if(v(this,po).extraPopupElement&&!v(this,po).editor)return;this.renderCommentButton();const[e,t]=v(this,jf),{style:r}=v(this,ys);r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`},S7=function(){v(this,po).extraPopupElement||(this.renderCommentButton(),v(this,ys).style.backgroundColor=this.commentButtonColor||"")},VP=function(){const e=v(this,Pf),t=v(this,Bd);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&v(this,Pf).html||null},k7=function(){var e,t,r;return((r=(t=(e=v(this,xn,VP))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},Eye=function(){var e,t,r;return((r=(t=(e=v(this,xn,VP))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},Tye=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:v(this,xn,Eye),fontSize:v(this,xn,k7)?`calc(${v(this,xn,k7)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r},Aye=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&v(this,$d))&&J(this,xn,UP).call(this)},Nye=function(){if(v(this,Nf)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=v(this,j1);let o=!!v(this,P1),a=o?v(this,P1):v(this,ET);for(const x of v(this,c0))if(!a||Tt.intersect(x.data.rect,a)!==null){a=x.data.rect,o=!0;break}const c=Tt.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,h=c[0]+d,f=c[1];L(this,Nf,[100*(h-i)/t,100*(f-s)/r]);const{style:p}=v(this,xi);p.left=`${v(this,Nf)[0]}%`,p.top=`${v(this,Nf)[1]}%`},UP=function(){if(v(this,cl)){v(this,cl).toggleCommentPopup(this,!1);return}L(this,$d,!v(this,$d)),v(this,$d)?(J(this,xn,zP).call(this),v(this,xi).addEventListener("click",v(this,A1)),v(this,xi).addEventListener("keydown",v(this,Zp))):(J(this,xn,C7).call(this),v(this,xi).removeEventListener("click",v(this,A1)),v(this,xi).removeEventListener("keydown",v(this,Zp)))},zP=function(){v(this,ul)||this.render(),this.isVisible?v(this,$d)&&v(this,xi).classList.add("focused"):(J(this,xn,Nye).call(this),v(this,xi).hidden=!1,v(this,xi).style.zIndex=parseInt(v(this,xi).style.zIndex)+1e3)},C7=function(){v(this,xi).classList.remove("focused"),!(v(this,$d)||!this.isVisible)&&(v(this,xi).hidden=!0,v(this,xi).style.zIndex=parseInt(v(this,xi).style.zIndex)-1e3)};class jye extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ln.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var TT;class eXe extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});G(this,TT,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=L(this,TT,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,TT)}addHighlightArea(){this.container.classList.add("highlightArea")}}TT=new WeakMap;var AT;class tXe extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});G(this,AT,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=L(this,AT,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,AT)}addHighlightArea(){this.container.classList.add("highlightArea")}}AT=new WeakMap;var NT;class nXe extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});G(this,NT,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=L(this,NT,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",i/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,NT)}addHighlightArea(){this.container.classList.add("highlightArea")}}NT=new WeakMap;var jT;class Pye extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});G(this,jT,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:i,popupRef:s},width:o,height:a}=this;if(!r)return this.container;const c=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=r.length;h<f;h+=2){const p=r[h]-t[0],x=t[3]-r[h+1];u.push(`${p},${x}`)}u=u.join(" ");const d=L(this,jT,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,jT)}addHighlightArea(){this.container.classList.add("highlightArea")}}jT=new WeakMap;class rXe extends Pye{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class iXe extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var PT,d0,IT,E7;class oH extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});G(this,IT);G(this,PT,null);G(this,d0,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ln.HIGHLIGHT:ln.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:i,borderStyle:s,popupRef:o}}=this,{transform:a,width:c,height:u}=J(this,IT,E7).call(this,r,t),d=this.svgFactory.create(c,u,!0),h=L(this,PT,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,p=i.length;f<p;f++){const x=this.svgFactory.createElement(this.svgElementName);v(this,d0).push(x),x.setAttribute("points",i[f].join(",")),h.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:i,rect:s}=t,o=v(this,PT);if(r>=0&&o.setAttribute("stroke-width",r||1),i)for(let a=0,c=v(this,d0).length;a<c;a++)v(this,d0)[a].setAttribute("points",i[a].join(","));if(s){const{transform:a,width:c,height:u}=J(this,IT,E7).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return v(this,d0)}addHighlightArea(){this.container.classList.add("highlightArea")}}PT=new WeakMap,d0=new WeakMap,IT=new WeakSet,E7=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class Iye extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ln.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class sXe extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class oXe extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class aXe extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Oye extends ai{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ln.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var OT,RT,T7;class lXe extends ai{constructor(t){var i;super(t,{isRenderable:!0});G(this,RT);G(this,OT,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",J(this,RT,T7).bind(this)),L(this,OT,i);const{isMac:s}=Es.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&J(this,RT,T7).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return v(this,OT)}addHighlightArea(){this.container.classList.add("highlightArea")}}OT=new WeakMap,RT=new WeakSet,T7=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var O1,h0,R1,ig,MT,f0,Jg,A7,N7,M1;let aH=(M1=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a,commentManager:c,linkService:u,annotationStorage:d}){G(this,Jg);G(this,O1,null);G(this,h0,null);G(this,R1,null);G(this,ig,new Map);G(this,MT,null);G(this,f0,null);this.div=e,L(this,O1,t),L(this,h0,r),L(this,MT,a||null),L(this,f0,u||null),L(this,R1,d||new eH),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return v(this,ig).size>0}async render(e){var o,a,c;const{annotations:t}=e,r=this.div;Hg(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:v(this,f0),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new PE,annotationStorage:v(this,R1),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===Ti.POPUP;if(d){const p=i.get(u.id);if(!p)continue;s.elements=p}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;s.data=u;const h=HZ.create(s);if(!h.isRenderable)continue;if(!d&&u.popupRef){const p=i.get(u.popupRef);p?p.push(h):i.set(u.popupRef,[h])}const f=h.render();u.hidden&&(f.style.visibility="hidden"),await J(this,Jg,A7).call(this,f,u.id,s.elements),(a=(o=h.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),h._isEditable&&(v(this,ig).set(h.data.id,h),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(h))}J(this,Jg,N7).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:v(this,f0),svgFactory:new PE,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=M1._defaultBorderStyle),t.data=r;const i=HZ.create(t);if(!i.isRenderable)continue;const s=i.render();await J(this,Jg,A7).call(this,s,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Hg(t,{rotation:e.rotation}),J(this,Jg,N7).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(v(this,ig).values())}getEditableAnnotation(e){return v(this,ig).get(e)}addFakeAnnotation(e){var a;const{div:t}=this,{id:r,rotation:i}=e,s=new qYe({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:v(this,f0),annotationStorage:v(this,R1)}),o=s.render();return t.append(o),(a=v(this,O1))==null||a.moveElementInDOM(t,o,o,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return gn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Nb.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},O1=new WeakMap,h0=new WeakMap,R1=new WeakMap,ig=new WeakMap,MT=new WeakMap,f0=new WeakMap,Jg=new WeakSet,A7=async function(e,t,r){var a,c;const i=e.firstChild||e,s=i.id=`${Jz}${t}`,o=await((a=v(this,MT))==null?void 0:a.getAriaAttributes(s));if(o)for(const[u,d]of o)i.setAttribute(u,d);r?r.at(-1).container.after(e):(this.div.append(e),(c=v(this,O1))==null||c.moveElementInDOM(this.div,e,i,!1))},N7=function(){var t;if(!v(this,h0))return;const e=this.div;for(const[r,i]of v(this,h0)){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):s.append(i);const a=v(this,ig).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,s.id,i),a._hasNoCanvas=!1):a.canvas=i)}v(this,h0).clear()},M1);const Uj=/\r\n?|\n/g;var dl,DT,m0,hl,Hi,Rye,Mye,Dye,HP,rm,WP,qP,Lye,P7,Fye;const Dr=class Dr extends Nr{constructor(t){super({...t,name:"freeTextEditor"});G(this,Hi);G(this,dl,"");G(this,DT,`${this.id}-editor`);G(this,m0,null);G(this,hl);j(this,"_colorPicker",null);this.color=t.color||Dr._defaultColor||Nr._defaultLineColor,L(this,hl,t.fontSize||Dr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Dr.prototype,r=o=>o.isEmpty(),i=Wg.TRANSLATE_SMALL,s=Wg.TRANSLATE_BIG;return gn(this,"_keyboardManager",new $A([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(t,r){Nr.initialize(t,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case jn.FREETEXT_SIZE:Dr._defaultFontSize=r;break;case jn.FREETEXT_COLOR:Dr._defaultColor=r;break}}updateParams(t,r){switch(t){case jn.FREETEXT_SIZE:J(this,Hi,Rye).call(this,r);break;case jn.FREETEXT_COLOR:J(this,Hi,Mye).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[jn.FREETEXT_SIZE,Dr._defaultFontSize],[jn.FREETEXT_COLOR,Dr._defaultColor||Nr._defaultLineColor]]}get propertiesToUpdate(){return[[jn.FREETEXT_SIZE,v(this,hl)],[jn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new dO(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jn.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Dr._internalPadding*t,-(Dr._internalPadding+v(this,hl))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),L(this,m0,new AbortController);const t=this._uiManager.combinedSignal(v(this,m0));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",v(this,DT)),this._isDraggable=!0,(t=v(this,m0))==null||t.abort(),L(this,m0,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=v(this,dl),r=L(this,dl,J(this,Hi,Dye).call(this).trimEnd());if(t===r)return;const i=s=>{if(L(this,dl,s),!s){this.remove();return}J(this,Hi,qP).call(this),this._uiManager.rebuild(this),J(this,Hi,HP).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(t)},mustExec:!1}),J(this,Hi,HP).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Dr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",v(this,DT)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${v(this,hl)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let x,y;switch(this.rotation){case 0:x=t+(a[0]-f)/d,y=r+this.height-(a[1]-p)/h;break;case 90:x=t+(a[0]-f)/d,y=r-(a[1]-p)/h,[c,u]=[u,-c];break;case 180:x=t-this.width+(a[0]-f)/d,y=r-(a[1]-p)/h,[c,u]=[-c,-u];break;case 270:x=t+(a[0]-f-this.height*h)/d,y=r+(a[1]-p-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(x*s,y*o,c,u)}else this._moveAfterPaste(t,r);J(this,Hi,qP).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var x,y,b;const r=t.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=J(x=Dr,rm,P7).call(x,r.getData("text")||"").replaceAll(Uj,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const _=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(Uj,"")),_!==this.editorDiv){let C=d;for(const k of this.editorDiv.childNodes){if(k===_){C=h;continue}C.push(J(y=Dr,rm,WP).call(y,k))}}d.push(c.nodeValue.slice(0,u).replaceAll(Uj,""))}else if(c===this.editorDiv){let _=d,C=0;for(const k of this.editorDiv.childNodes)C++===u&&(_=h),_.push(J(b=Dr,rm,WP).call(b,k))}L(this,dl,`${d.join(`
`)}${s}${h.join(`
`)}`),J(this,Hi,qP).call(this);const f=new Range;let p=Math.sumPrecise(d.map(_=>_.length));for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const C=_.nodeValue.length;if(p<=C){f.setStart(_,p),f.setEnd(_,p);break}p-=C}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Dr._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,i){var a;let s=null;if(t instanceof jye){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:p,richText:x,contentsObj:y,creationDate:b,modificationDate:_},textContent:C,textPosition:k,parent:{page:{pageNumber:T}}}=t;if(!C||C.length===0)return null;s=t={annotationType:ln.FREETEXT,color:Array.from(u),fontSize:c,value:C.join(`
`),position:k,pageIndex:T-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(y==null?void 0:y.str)||null,richText:x,creationDate:b,modificationDate:_}}const o=await super.deserialize(t,r,i);return L(o,hl,t.fontSize),o.color=Tt.makeHexColor(...t.color),L(o,dl,J(a=Dr,rm,P7).call(a,t.value)),o._initialData=s,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Nr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:r,fontSize:v(this,hl),value:J(this,Hi,Lye).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!J(this,Hi,Fye).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${v(this,hl)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(const s of v(this,dl).split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),r.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:v(this,dl)}}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};dl=new WeakMap,DT=new WeakMap,m0=new WeakMap,hl=new WeakMap,Hi=new WeakSet,Rye=function(t){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-v(this,hl))*this.parentScale),L(this,hl,s),J(this,Hi,HP).call(this)},i=v(this,hl);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Mye=function(t){const r=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Dye=function(){var i;const t=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(J(i=Dr,rm,WP).call(i,s)),r=s);return t.join(`
`)},HP=function(){const[t,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/r):(this.width=i.height/t,this.height=i.width/r),this.fixAndSetPosition()},rm=new WeakSet,WP=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Uj,"")},qP=function(){if(this.editorDiv.replaceChildren(),!!v(this,dl))for(const t of v(this,dl).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},Lye=function(){return v(this,dl).replaceAll(" "," ")},P7=function(t){return t.replaceAll(" "," ")},Fye=function(t){const{value:r,fontSize:i,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==i||t.color.some((a,c)=>a!==s[c])||t.pageIndex!==o},G(Dr,rm),j(Dr,"_freeTextDefaultContent",""),j(Dr,"_internalPadding",0),j(Dr,"_defaultColor",null),j(Dr,"_defaultFontSize",10),j(Dr,"_type","freetext"),j(Dr,"_editorType",ln.FREETEXT);let j7=Dr;class Et{toSVGPath(){xr("Abstract method `toSVGPath` must be implemented.")}get box(){xr("Abstract getter `box` must be implemented.")}serialize(e,t){xr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a]*i,o[a+1]=r+e[a+1]*s;return o}static _rescaleAndSwap(e,t,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a+1]*i,o[a+1]=r+e[a]*s;return o}static _translate(e,t,r,i){i||(i=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)i[s]=t+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,s){switch(s){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,s,o){return[(e+5*r)/6,(t+5*i)/6,(5*r+s)/6,(5*i+o)/6,(r+s)/2,(i+o)/2]}}j(Et,"PRECISION",1e-4);var fl,cu,D1,L1,Vd,kn,p0,g0,LT,FT,F1,B1,sg,BT,DR,LR,os,aC,Bye,$ye,Vye,Uye,zye,Hye;const tf=class tf{constructor({x:e,y:t},r,i,s,o,a=0){G(this,os);G(this,fl);G(this,cu,[]);G(this,D1);G(this,L1);G(this,Vd,[]);G(this,kn,new Float32Array(18));G(this,p0);G(this,g0);G(this,LT);G(this,FT);G(this,F1);G(this,B1);G(this,sg,[]);L(this,fl,r),L(this,B1,s*i),L(this,L1,o),v(this,kn).set([NaN,NaN,NaN,NaN,e,t],6),L(this,D1,a),L(this,FT,v(tf,BT)*i),L(this,LT,v(tf,LR)*i),L(this,F1,i),v(this,sg).push(e,t)}isEmpty(){return isNaN(v(this,kn)[8])}add({x:e,y:t}){var O;L(this,p0,e),L(this,g0,t);const[r,i,s,o]=v(this,fl);let[a,c,u,d]=v(this,kn).subarray(8,12);const h=e-u,f=t-d,p=Math.hypot(h,f);if(p<v(this,LT))return!1;const x=p-v(this,FT),y=x/p,b=y*h,_=y*f;let C=a,k=c;a=u,c=d,u+=b,d+=_,(O=v(this,sg))==null||O.push(e,t);const T=-_/x,E=b/x,N=T*v(this,B1),P=E*v(this,B1);return v(this,kn).set(v(this,kn).subarray(2,8),0),v(this,kn).set([u+N,d+P],4),v(this,kn).set(v(this,kn).subarray(14,18),12),v(this,kn).set([u-N,d-P],16),isNaN(v(this,kn)[6])?(v(this,Vd).length===0&&(v(this,kn).set([a+N,c+P],2),v(this,Vd).push(NaN,NaN,NaN,NaN,(a+N-r)/s,(c+P-i)/o),v(this,kn).set([a-N,c-P],14),v(this,cu).push(NaN,NaN,NaN,NaN,(a-N-r)/s,(c-P-i)/o)),v(this,kn).set([C,k,a,c,u,d],6),!this.isEmpty()):(v(this,kn).set([C,k,a,c,u,d],6),Math.abs(Math.atan2(k-c,C-a)-Math.atan2(_,b))<Math.PI/2?([a,c,u,d]=v(this,kn).subarray(2,6),v(this,Vd).push(NaN,NaN,NaN,NaN,((a+u)/2-r)/s,((c+d)/2-i)/o),[a,c,C,k]=v(this,kn).subarray(14,18),v(this,cu).push(NaN,NaN,NaN,NaN,((C+a)/2-r)/s,((k+c)/2-i)/o),!0):([C,k,a,c,u,d]=v(this,kn).subarray(0,6),v(this,Vd).push(((C+5*a)/6-r)/s,((k+5*c)/6-i)/o,((5*a+u)/6-r)/s,((5*c+d)/6-i)/o,((a+u)/2-r)/s,((c+d)/2-i)/o),[u,d,a,c,C,k]=v(this,kn).subarray(12,18),v(this,cu).push(((C+5*a)/6-r)/s,((k+5*c)/6-i)/o,((5*a+u)/6-r)/s,((5*c+d)/6-i)/o,((a+u)/2-r)/s,((c+d)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=v(this,Vd),t=v(this,cu);if(isNaN(v(this,kn)[6])&&!this.isEmpty())return J(this,os,Bye).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);J(this,os,Vye).call(this,r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return J(this,os,$ye).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,i,s,o){return new Wye(e,t,r,i,s,o)}getOutlines(){var h;const e=v(this,Vd),t=v(this,cu),r=v(this,kn),[i,s,o,a]=v(this,fl),c=new Float32Array((((h=v(this,sg))==null?void 0:h.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(v(this,sg)[f]-i)/o,c[f+1]=(v(this,sg)[f+1]-s)/a;if(c[c.length-2]=(v(this,p0)-i)/o,c[c.length-1]=(v(this,g0)-s)/a,isNaN(r[6])&&!this.isEmpty())return J(this,os,Uye).call(this,c);const u=new Float32Array(v(this,Vd).length+24+v(this,cu).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=J(this,os,Hye).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+p],u[d+1]=t[f+p+1],d+=2}return J(this,os,zye).call(this,u,d),this.newFreeDrawOutline(u,c,v(this,fl),v(this,F1),v(this,D1),v(this,L1))}};fl=new WeakMap,cu=new WeakMap,D1=new WeakMap,L1=new WeakMap,Vd=new WeakMap,kn=new WeakMap,p0=new WeakMap,g0=new WeakMap,LT=new WeakMap,FT=new WeakMap,F1=new WeakMap,B1=new WeakMap,sg=new WeakMap,BT=new WeakMap,DR=new WeakMap,LR=new WeakMap,os=new WeakSet,aC=function(){const e=v(this,kn).subarray(4,6),t=v(this,kn).subarray(16,18),[r,i,s,o]=v(this,fl);return[(v(this,p0)+(e[0]-t[0])/2-r)/s,(v(this,g0)+(e[1]-t[1])/2-i)/o,(v(this,p0)+(t[0]-e[0])/2-r)/s,(v(this,g0)+(t[1]-e[1])/2-i)/o]},Bye=function(){const[e,t,r,i]=v(this,fl),[s,o,a,c]=J(this,os,aC).call(this);return`M${(v(this,kn)[2]-e)/r} ${(v(this,kn)[3]-t)/i} L${(v(this,kn)[4]-e)/r} ${(v(this,kn)[5]-t)/i} L${s} ${o} L${a} ${c} L${(v(this,kn)[16]-e)/r} ${(v(this,kn)[17]-t)/i} L${(v(this,kn)[14]-e)/r} ${(v(this,kn)[15]-t)/i} Z`},$ye=function(e){const t=v(this,cu);e.push(`L${t[4]} ${t[5]} Z`)},Vye=function(e){const[t,r,i,s]=v(this,fl),o=v(this,kn).subarray(4,6),a=v(this,kn).subarray(16,18),[c,u,d,h]=J(this,os,aC).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-r)/s} L${c} ${u} L${d} ${h} L${(a[0]-t)/i} ${(a[1]-r)/s}`)},Uye=function(e){const t=v(this,kn),[r,i,s,o]=v(this,fl),[a,c,u,d]=J(this,os,aC).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/o],0),this.newFreeDrawOutline(h,e,v(this,fl),v(this,F1),v(this,D1),v(this,L1))},zye=function(e,t){const r=v(this,cu);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},Hye=function(e,t){const r=v(this,kn).subarray(4,6),i=v(this,kn).subarray(16,18),[s,o,a,c]=v(this,fl),[u,d,h,f]=J(this,os,aC).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/c],t),t+=24},G(tf,BT,8),G(tf,DR,2),G(tf,LR,v(tf,BT)+v(tf,DR));let hO=tf;var $1,v0,If,$T,ml,VT,Ni,FR,qye;class Wye extends Et{constructor(t,r,i,s,o,a){super();G(this,FR);G(this,$1);G(this,v0,new Float32Array(4));G(this,If);G(this,$T);G(this,ml);G(this,VT);G(this,Ni);L(this,Ni,t),L(this,ml,r),L(this,$1,i),L(this,VT,s),L(this,If,o),L(this,$T,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],J(this,FR,qye).call(this,a);const[c,u,d,h]=v(this,v0);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,p=r.length;f<p;f+=2)r[f]=(r[f]-c)/d,r[f+1]=(r[f+1]-u)/h}toSVGPath(){const t=[`M${v(this,Ni)[4]} ${v(this,Ni)[5]}`];for(let r=6,i=v(this,Ni).length;r<i;r+=6){if(isNaN(v(this,Ni)[r])){t.push(`L${v(this,Ni)[r+4]} ${v(this,Ni)[r+5]}`);continue}t.push(`C${v(this,Ni)[r]} ${v(this,Ni)[r+1]} ${v(this,Ni)[r+2]} ${v(this,Ni)[r+3]} ${v(this,Ni)[r+4]} ${v(this,Ni)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,i,s],o){const a=i-t,c=s-r;let u,d;switch(o){case 0:u=Et._rescale(v(this,Ni),t,s,a,-c),d=Et._rescale(v(this,ml),t,s,a,-c);break;case 90:u=Et._rescaleAndSwap(v(this,Ni),t,r,a,c),d=Et._rescaleAndSwap(v(this,ml),t,r,a,c);break;case 180:u=Et._rescale(v(this,Ni),i,r,-a,c),d=Et._rescale(v(this,ml),i,r,-a,c);break;case 270:u=Et._rescaleAndSwap(v(this,Ni),i,s,-a,-c),d=Et._rescaleAndSwap(v(this,ml),i,s,-a,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return v(this,v0)}newOutliner(t,r,i,s,o,a=0){return new hO(t,r,i,s,o,a)}getNewOutline(t,r){const[i,s,o,a]=v(this,v0),[c,u,d,h]=v(this,$1),f=o*d,p=a*h,x=i*d+c,y=s*h+u,b=this.newOutliner({x:v(this,ml)[0]*f+x,y:v(this,ml)[1]*p+y},v(this,$1),v(this,VT),t,v(this,$T),r??v(this,If));for(let _=2;_<v(this,ml).length;_+=2)b.add({x:v(this,ml)[_]*f+x,y:v(this,ml)[_+1]*p+y});return b.getOutlines()}}$1=new WeakMap,v0=new WeakMap,If=new WeakMap,$T=new WeakMap,ml=new WeakMap,VT=new WeakMap,Ni=new WeakMap,FR=new WeakSet,qye=function(t){const r=v(this,Ni);let i=r[4],s=r[5];const o=[i,s,i,s];let a=i,c=s,u=i,d=s;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let x=6,y=r.length;x<y;x+=6){const b=r[x+4],_=r[x+5];isNaN(r[x])?(Tt.pointBoundingBox(b,_,o),c>_?(a=b,c=_):c===_&&(a=h(a,b)),d<_?(u=b,d=_):d===_&&(u=h(u,b))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,Tt.bezierBoundingBox(i,s,...r.slice(x,x+6),f),Tt.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(a=f[0],c=f[1]):c===f[1]&&(a=h(a,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),i=b,s=_}const p=v(this,v0);p[0]=o[0]-v(this,If),p[1]=o[1]-v(this,If),p[2]=o[2]-o[0]+2*v(this,If),p[3]=o[3]-o[1]+2*v(this,If),this.firstPoint=[a,c],this.lastPoint=[u,d]};var UT,zT,HT,og,uu,Go,Gye,GP,Kye,Yye,O7;class I7{constructor(e,t=0,r=0,i=!0){G(this,Go);G(this,UT);G(this,zT);G(this,HT);G(this,og,[]);G(this,uu,[]);const s=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:y,y:b,width:_,height:C}of e){const k=Math.floor((y-t)/o)*o,T=Math.ceil((y+_+t)/o)*o,E=Math.floor((b-t)/o)*o,N=Math.ceil((b+C+t)/o)*o,P=[k,E,N,!0],M=[T,E,N,!1];v(this,og).push(P,M),Tt.rectBoundingBox(k,E,T,N,s)}const a=s[2]-s[0]+2*r,c=s[3]-s[1]+2*r,u=s[0]-r,d=s[1]-r;let h=i?-1/0:1/0,f=1/0;const p=v(this,og).at(i?-1:-2),x=[p[0],p[2]];for(const y of v(this,og)){const[b,_,C,k]=y;!k&&i?_<f?(f=_,h=b):_===f&&(h=Math.max(h,b)):k&&!i&&(_<f?(f=_,h=b):_===f&&(h=Math.min(h,b))),y[0]=(b-u)/a,y[1]=(_-d)/c,y[2]=(C-d)/c}L(this,UT,new Float32Array([u,d,a,c])),L(this,zT,[h,f]),L(this,HT,x)}getOutlines(){v(this,og).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of v(this,og))t[3]?(e.push(...J(this,Go,O7).call(this,t)),J(this,Go,Kye).call(this,t)):(J(this,Go,Yye).call(this,t),e.push(...J(this,Go,O7).call(this,t)));return J(this,Go,Gye).call(this,e)}}UT=new WeakMap,zT=new WeakMap,HT=new WeakMap,og=new WeakMap,uu=new WeakMap,Go=new WeakSet,Gye=function(e){const t=[],r=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[a,c,u,d,h]=o;r.delete(o);let f=a,p=c;for(s=[a,u],i.push(s);;){let x;if(r.has(d))x=d;else if(r.has(h))x=h;else break;r.delete(x),[a,c,u,d,h]=x,f!==a&&(s.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}s.push(f,p)}return new cXe(i,v(this,UT),v(this,zT),v(this,HT))},GP=function(e){const t=v(this,uu);let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1},Kye=function([,e,t]){const r=J(this,Go,GP).call(this,e);v(this,uu).splice(r,0,[e,t])},Yye=function([,e,t]){const r=J(this,Go,GP).call(this,e);for(let i=r;i<v(this,uu).length;i++){const[s,o]=v(this,uu)[i];if(s!==e)break;if(s===e&&o===t){v(this,uu).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,o]=v(this,uu)[i];if(s!==e)break;if(s===e&&o===t){v(this,uu).splice(i,1);return}}},O7=function(e){const[t,r,i]=e,s=[[t,r,i]],o=J(this,Go,GP).call(this,i);for(let a=0;a<o;a++){const[c,u]=v(this,uu)[a];for(let d=0,h=s.length;d<h;d++){const[,f,p]=s[d];if(!(u<=f||p<=c)){if(f>=c){if(p>u)s[d][1]=u;else{if(h===1)return[];s.splice(d,1),d--,h--}continue}s[d][2]=c,p>u&&s.push([t,u,p])}}}return s};var WT,V1;class cXe extends Et{constructor(t,r,i,s){super();G(this,WT);G(this,V1);L(this,V1,t),L(this,WT,r),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const t=[];for(const r of v(this,V1)){let[i,s]=r;t.push(`M${i} ${s}`);for(let o=2;o<r.length;o+=2){const a=r[o],c=r[o+1];a===i?(t.push(`V${c}`),s=c):c===s&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,r,i,s],o){const a=[],c=i-t,u=s-r;for(const d of v(this,V1)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=s-d[f+1]*u;a.push(h)}return a}get box(){return v(this,WT)}get classNamesForOutlining(){return["highlightOutline"]}}WT=new WeakMap,V1=new WeakMap;class R7 extends hO{newFreeDrawOutline(e,t,r,i,s,o){return new uXe(e,t,r,i,s,o)}}class uXe extends Wye{newOutliner(e,t,r,i,s,o=0){return new R7(e,t,r,i,s,o)}}var U1,qT,Of,y0,GT,ba,KT,YT,x0,pl,gl,$s,z1,H1,go,W1,xc,XT,vn,M7,KP,Xye,Jye,Qye,D7,Zv,kc,Mb,Zye,YP,XP,e0e,t0e,n0e,r0e,i0e;const Wn=class Wn extends Nr{constructor(t){super({...t,name:"highlightEditor"});G(this,vn);G(this,U1,null);G(this,qT,0);G(this,Of);G(this,y0,null);G(this,GT,null);G(this,ba,null);G(this,KT,null);G(this,YT,0);G(this,x0,null);G(this,pl,null);G(this,gl,null);G(this,$s,!1);G(this,z1,null);G(this,H1,null);G(this,go,null);G(this,W1,"");G(this,xc);G(this,XT,"");this.color=t.color||Wn._defaultColor,L(this,xc,t.thickness||Wn._defaultThickness),this.opacity=t.opacity||Wn._defaultOpacity,L(this,Of,t.boxes||null),L(this,XT,t.methodOfCreation||""),L(this,W1,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(L(this,$s,!0),J(this,vn,KP).call(this,t),J(this,vn,Zv).call(this)):v(this,Of)&&(L(this,U1,t.anchorNode),L(this,qT,t.anchorOffset),L(this,KT,t.focusNode),L(this,YT,t.focusOffset),J(this,vn,M7).call(this),J(this,vn,Zv).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Wn.prototype;return gn(this,"_keyboardManager",new $A([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:v(this,$s)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:v(this,xc),methodOfCreation:v(this,XT)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var i;Nr.initialize(t,r),Wn._defaultColor||(Wn._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case jn.HIGHLIGHT_COLOR:Wn._defaultColor=r;break;case jn.HIGHLIGHT_THICKNESS:Wn._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return v(this,H1)}get commentButtonPosition(){return v(this,z1)}updateParams(t,r){switch(t){case jn.HIGHLIGHT_COLOR:J(this,vn,Xye).call(this,r);break;case jn.HIGHLIGHT_THICKNESS:J(this,vn,Jye).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[jn.HIGHLIGHT_COLOR,Wn._defaultColor],[jn.HIGHLIGHT_THICKNESS,Wn._defaultThickness]]}get propertiesToUpdate(){return[[jn.HIGHLIGHT_COLOR,this.color||Wn._defaultColor],[jn.HIGHLIGHT_THICKNESS,v(this,xc)||Wn._defaultThickness],[jn.HIGHLIGHT_FREE,v(this,$s)]]}onUpdatedColor(){var t,r;(t=this.parent)==null||t.drawLayer.updateProperties(v(this,gl),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=v(this,GT))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",L(this,GT,new jE({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(J(this,vn,XP).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,J(this,vn,XP).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){J(this,vn,D7).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(J(this,vn,Zv).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?J(this,vn,D7).call(this):t&&(J(this,vn,Zv).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var s,o,a;const{drawLayer:r}=this.parent;let i;v(this,$s)?(t=(t-this.rotation+360)%360,i=J(s=Wn,kc,Mb).call(s,v(this,pl).box,t)):i=J(o=Wn,kc,Mb).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(v(this,gl),{bbox:i,root:{"data-main-rotation":t}}),r.updateProperties(v(this,go),{bbox:J(a=Wn,kc,Mb).call(a,v(this,ba).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();v(this,W1)&&(t.setAttribute("aria-label",v(this,W1)),t.setAttribute("role","mark")),v(this,$s)?t.classList.add("free"):this.div.addEventListener("keydown",J(this,vn,Zye).bind(this),{signal:this._uiManager._signal});const r=L(this,x0,document.createElement("div"));return t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=v(this,y0),this.setDims(this.width,this.height),kve(this,v(this,x0),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(v(this,go),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(v(this,go),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:J(this,vn,YP).call(this,!0);break;case 1:case 3:J(this,vn,YP).call(this,!1);break}}select(){var t;super.select(),v(this,go)&&((t=this.parent)==null||t.drawLayer.updateProperties(v(this,go),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),v(this,go)&&((t=this.parent)==null||t.drawLayer.updateProperties(v(this,go),{rootClass:{selected:!1}}),v(this,$s)||J(this,vn,YP).call(this,!1))}get _mustFixPosition(){return!v(this,$s)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(v(this,gl),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(v(this,go),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:i,x:s,y:o}){const{x:a,y:c,width:u,height:d}=i.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),p=x=>{h.abort(),J(this,kc,r0e).call(this,t,x)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",ii,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ul,{signal:f}),i.addEventListener("pointermove",J(this,kc,n0e).bind(this,t),{signal:f}),this._freeHighlight=new R7({x:s,y:o},[a,c,u,d],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,i){var y,b,_,C;let s=null;if(t instanceof Iye){const{data:{quadPoints:k,rect:T,rotation:E,id:N,color:P,opacity:M,popupRef:O,richText:q,contentsObj:D,creationDate:F,modificationDate:K},parent:{page:{pageNumber:ee}}}=t;s=t={annotationType:ln.HIGHLIGHT,color:Array.from(P),opacity:M,quadPoints:k,boxes:null,pageIndex:ee-1,rect:T.slice(0),rotation:E,annotationElementId:N,id:N,deleted:!1,popupRef:O,richText:q,comment:(D==null?void 0:D.str)||null,creationDate:F,modificationDate:K}}else if(t instanceof oH){const{data:{inkLists:k,rect:T,rotation:E,id:N,color:P,borderStyle:{rawWidth:M},popupRef:O,richText:q,contentsObj:D,creationDate:F,modificationDate:K},parent:{page:{pageNumber:ee}}}=t;s=t={annotationType:ln.HIGHLIGHT,color:Array.from(P),thickness:M,inkLists:k,boxes:null,pageIndex:ee-1,rect:T.slice(0),rotation:E,annotationElementId:N,id:N,deleted:!1,popupRef:O,richText:q,comment:(D==null?void 0:D.str)||null,creationDate:F,modificationDate:K}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,d=await super.deserialize(t,r,i);d.color=Tt.makeHexColor(...o),d.opacity=u||1,c&&L(d,xc,t.thickness),d._initialData=s,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[p,x]=d.pageTranslation;if(a){const k=L(d,Of,[]);for(let T=0;T<a.length;T+=8)k.push({x:(a[T]-p)/h,y:1-(a[T+1]-x)/f,width:(a[T+2]-a[T])/h,height:(a[T+1]-a[T+5])/f});J(y=d,vn,M7).call(y),J(b=d,vn,Zv).call(b),d.rotate(d.rotation)}else if(c){L(d,$s,!0);const k=c[0],T={x:k[0]-p,y:f-(k[1]-x)},E=new R7(T,[0,0,h,f],1,v(d,xc)/2,!0,.001);for(let M=0,O=k.length;M<O;M+=2)T.x=k[M]-p,T.y=f-(k[M+1]-x),E.add(T);const{id:N,clipPathId:P}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);J(_=d,vn,KP).call(_,{highlightOutlines:E.getOutlines(),highlightId:N,clipPathId:P}),J(C=d,vn,Zv).call(C),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=Nr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:r,opacity:this.opacity,thickness:v(this,xc),quadPoints:J(this,vn,e0e).call(this),outlines:J(this,vn,t0e).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!J(this,vn,i0e).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};U1=new WeakMap,qT=new WeakMap,Of=new WeakMap,y0=new WeakMap,GT=new WeakMap,ba=new WeakMap,KT=new WeakMap,YT=new WeakMap,x0=new WeakMap,pl=new WeakMap,gl=new WeakMap,$s=new WeakMap,z1=new WeakMap,H1=new WeakMap,go=new WeakMap,W1=new WeakMap,xc=new WeakMap,XT=new WeakMap,vn=new WeakSet,M7=function(){const t=new I7(v(this,Of),.001);L(this,pl,t.getOutlines()),[this.x,this.y,this.width,this.height]=v(this,pl).box;const r=new I7(v(this,Of),.0025,.001,this._uiManager.direction==="ltr");L(this,ba,r.getOutlines());const{firstPoint:i}=v(this,pl);L(this,z1,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=v(this,ba);L(this,H1,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},KP=function({highlightOutlines:t,highlightId:r,clipPathId:i}){var f,p;if(L(this,pl,t),L(this,ba,t.getNewOutline(v(this,xc)/2+1.5,.0025)),r>=0)L(this,gl,r),L(this,y0,i),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),L(this,go,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:v(this,ba).box,path:{d:v(this,ba).toSVGPath()}},!0));else if(this.parent){const x=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(v(this,gl),{bbox:J(f=Wn,kc,Mb).call(f,v(this,pl).box,(x-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(v(this,go),{bbox:J(p=Wn,kc,Mb).call(p,v(this,ba).box,x),path:{d:v(this,ba).toSVGPath()}})}const[o,a,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[x,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*y/x,this.height=u*x/y;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[x,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*y/x,this.height=u*x/y;break}}const{firstPoint:d}=t;L(this,z1,[(d[0]-o)/c,(d[1]-a)/u]);const{lastPoint:h}=v(this,ba);L(this,H1,[(h[0]-o)/c,(h[1]-a)/u])},Xye=function(t){const r=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:r.bind(this,t,Wn._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},Jye=function(t){const r=v(this,xc),i=s=>{L(this,xc,s),J(this,vn,Qye).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Qye=function(t){v(this,$s)&&(J(this,vn,KP).call(this,{highlightOutlines:v(this,pl).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},D7=function(){v(this,gl)===null||!this.parent||(this.parent.drawLayer.remove(v(this,gl)),L(this,gl,null),this.parent.drawLayer.remove(v(this,go)),L(this,go,null))},Zv=function(t=this.parent){v(this,gl)===null&&({id:pi(this,gl)._,clipPathId:pi(this,y0)._}=t.drawLayer.draw({bbox:v(this,pl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:v(this,$s)},path:{d:v(this,pl).toSVGPath()}},!1,!0),L(this,go,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:v(this,$s)},bbox:v(this,ba).box,path:{d:v(this,ba).toSVGPath()}},v(this,$s))),v(this,x0)&&(v(this,x0).style.clipPath=v(this,y0)))},kc=new WeakSet,Mb=function([t,r,i,s],o){switch(o){case 90:return[1-r-s,t,s,i];case 180:return[1-t-i,1-r-s,i,s];case 270:return[r,1-t-i,s,i]}return[t,r,i,s]},Zye=function(t){Wn._keyboardManager.exec(this,t)},YP=function(t){if(!v(this,U1))return;const r=window.getSelection();t?r.setPosition(v(this,U1),v(this,qT)):r.setPosition(v(this,KT),v(this,YT))},XP=function(){return v(this,$s)?this.rotation:0},e0e=function(){if(v(this,$s))return null;const[t,r]=this.pageDimensions,[i,s]=this.pageTranslation,o=v(this,Of),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const p=u*t+i,x=(1-d)*r+s;a[c]=a[c+4]=p,a[c+1]=a[c+3]=x,a[c+2]=a[c+6]=p+h*t,a[c+5]=a[c+7]=x-f*r,c+=8}return a},t0e=function(t){return v(this,pl).serialize(t,J(this,vn,XP).call(this))},n0e=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},r0e=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},i0e=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==r[s])},G(Wn,kc),j(Wn,"_defaultColor",null),j(Wn,"_defaultOpacity",1),j(Wn,"_defaultThickness",12),j(Wn,"_type","highlight"),j(Wn,"_editorType",ln.HIGHLIGHT),j(Wn,"_freeHighlightId",-1),j(Wn,"_freeHighlight",null),j(Wn,"_freeHighlightClipId","");let fO=Wn;var b0;class s0e{constructor(){G(this,b0,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){v(this,b0)[e]=t}toSVGProperties(){const e=v(this,b0);return L(this,b0,Object.create(null)),{root:e}}reset(){L(this,b0,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){xr("Not implemented")}}b0=new WeakMap;var vl,q1,xs,w0,_0,ag,lg,cg,S0,Ln,L7,F7,B7,lC,o0e,JP,cC,Db;const Pt=class Pt extends Nr{constructor(t){super(t);G(this,Ln);G(this,vl,null);G(this,q1);j(this,"_colorPicker",null);j(this,"_drawId",null);L(this,q1,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(J(this,Ln,L7).call(this,t),J(this,Ln,lC).call(this))}static _mergeSVGProperties(t,r){const i=new Set(Object.keys(t));for(const[s,o]of Object.entries(r))i.has(s)?Object.assign(t[s],o):t[s]=o;return t}static getDefaultDrawingOptions(t){xr("Not implemented")}static get typesMap(){xr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(v(Pt,xs).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,r[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,r[s]]);return t}_updateProperty(t,r,i){const s=this._drawingOptions,o=s[r],a=c=>{var d;s.updateProperty(r,c);const u=v(this,vl).updateProperty(r,c);u&&J(this,Ln,cC).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(v(this,vl).getPathResizingSVGProperties(J(this,Ln,JP).call(this)),{bbox:J(this,Ln,Db).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(v(this,vl).getPathResizedSVGProperties(J(this,Ln,JP).call(this)),{bbox:J(this,Ln,Db).call(this)}))}_onTranslating(t,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:J(this,Ln,Db).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(v(this,vl).getPathTranslatedSVGProperties(J(this,Ln,JP).call(this),this.parentDimensions),{bbox:J(this,Ln,Db).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,v(this,q1)&&(L(this,q1,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){J(this,Ln,B7).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(J(this,Ln,lC).call(this),J(this,Ln,cC).call(this,v(this,vl).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),J(this,Ln,B7).call(this)):t&&(this._uiManager.addShouldRescale(this),J(this,Ln,lC).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties({bbox:J(this,Ln,Db).call(this)},v(this,vl).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&J(this,Ln,cC).call(this,v(this,vl).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),i}static createDrawerInstance(t,r,i,s,o){xr("Not implemented")}static startDrawing(t,r,i,s){var b;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:d}=s;if(v(Pt,lg)&&v(Pt,lg)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:p}=o.getBoundingClientRect(),x=L(Pt,w0,new AbortController),y=t.combinedSignal(x);if(v(Pt,ag)||L(Pt,ag,u),v(Pt,lg)??L(Pt,lg,d),window.addEventListener("pointerup",_=>{var C;v(Pt,ag)===_.pointerId?this._endDraw(_):(C=v(Pt,cg))==null||C.delete(_.pointerId)},{signal:y}),window.addEventListener("pointercancel",_=>{var C;v(Pt,ag)===_.pointerId?this._currentParent.endDrawingSession():(C=v(Pt,cg))==null||C.delete(_.pointerId)},{signal:y}),window.addEventListener("pointerdown",_=>{v(Pt,lg)===_.pointerType&&((v(Pt,cg)||L(Pt,cg,new Set)).add(_.pointerId),v(Pt,xs).isCancellable()&&(v(Pt,xs).removeLastElement(),v(Pt,xs).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Ul,{signal:y}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),o.addEventListener("touchmove",_=>{_.timeStamp===v(Pt,S0)&&ii(_)},{signal:y}),t.toggleDrawing(),(b=r._editorUndoBar)==null||b.hide(),v(Pt,xs)){t.drawLayer.updateProperties(this._currentDrawId,v(Pt,xs).startNew(a,c,f,p,h));return}r.updateUIForDefaultProperties(this),L(Pt,xs,this.createDrawerInstance(a,c,f,p,h)),L(Pt,_0,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(v(Pt,_0).toSVGProperties(),v(Pt,xs).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(L(Pt,S0,-1),!v(Pt,xs))return;const{offsetX:r,offsetY:i,pointerId:s}=t;if(v(Pt,ag)===s){if(((o=v(Pt,cg))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,v(Pt,xs).add(r,i)),L(Pt,S0,t.timeStamp),ii(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,L(Pt,xs,null),L(Pt,_0,null),L(Pt,lg,null),L(Pt,S0,NaN)),v(Pt,w0)&&(v(Pt,w0).abort(),L(Pt,w0,null),L(Pt,ag,NaN),L(Pt,cg,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,v(Pt,xs).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=v(Pt,xs),s=this._currentDrawId,o=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:jn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(jn.DRAW_STEP),!v(Pt,xs).isEmpty()){const{pageDimensions:[i,s],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:v(Pt,xs).getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:v(Pt,_0),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,i,s,o,a){xr("Not implemented")}static async deserialize(t,r,i){var h,f;const{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:c}}=r.viewport,u=this.deserializeDraw(a,c,s,o,this._INNER_MARGIN,t),d=await super.deserialize(t,r,i);return d.createDrawingOptions(t),J(h=d,Ln,L7).call(h,{drawOutlines:u}),J(f=d,Ln,lC).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[r,i]=this.pageTranslation,[s,o]=this.pageDimensions;return v(this,vl).serialize([r,i,s,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};vl=new WeakMap,q1=new WeakMap,xs=new WeakMap,w0=new WeakMap,_0=new WeakMap,ag=new WeakMap,lg=new WeakMap,cg=new WeakMap,S0=new WeakMap,Ln=new WeakSet,L7=function({drawOutlines:t,drawId:r,drawingOptions:i}){L(this,vl,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=J(this,Ln,F7).call(this,t,this.parent),J(this,Ln,cC).call(this,t.box)},F7=function(t,r){const{id:i}=r.drawLayer.draw(Pt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},B7=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},lC=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=J(this,Ln,F7).call(this,v(this,vl),t)}},o0e=function([t,r,i,s]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[r,1-t,i*(a/o),s*(o/a)];case 180:return[1-t,1-r,i,s];case 270:return[1-r,t,i*(a/o),s*(o/a)];default:return[t,r,i,s]}},JP=function(){const{x:t,y:r,width:i,height:s,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-r,t,i*(o/a),s*(a/o)];case 180:return[1-t,1-r,i,s];case 270:return[r,1-t,i*(o/a),s*(a/o)];default:return[t,r,i,s]}},cC=function(t){[this.x,this.y,this.width,this.height]=J(this,Ln,o0e).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Db=function(){const{x:t,y:r,width:i,height:s,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-r-s,t,s,i];case 2:return[1-t-i,1-r-s,i,s];case 3:return[r,1-t-i,s,i];case 4:return[t,r-i*(c/u),s*(u/c),i*(c/u)];case 5:return[1-r,t,i*(c/u),s*(u/c)];case 6:return[1-t-s*(u/c),1-r,s*(u/c),i*(c/u)];case 7:return[r-i*(c/u),1-t-s*(u/c),i*(c/u),s*(u/c)];case 8:return[t-i,r-s,i,s];case 9:return[1-r,t-i,s,i];case 10:return[1-t,1-r,i,s];case 11:return[r-s,1-t,s,i];case 12:return[t-s*(u/c),r,s*(u/c),i*(c/u)];case 13:return[1-r-i*(c/u),t-s*(u/c),i*(c/u),s*(u/c)];case 14:return[1-t,1-r-i*(c/u),s*(u/c),i*(c/u)];case 15:return[r,1-t,i*(c/u),s*(u/c)];default:return[t,r,i,s]}},j(Pt,"_currentDrawId",-1),j(Pt,"_currentParent",null),G(Pt,xs,null),G(Pt,w0,null),G(Pt,_0,null),G(Pt,ag,NaN),G(Pt,lg,null),G(Pt,cg,null),G(Pt,S0,NaN),j(Pt,"_INNER_MARGIN",3);let mO=Pt;var Ud,bs,ws,k0,G1,Po,Vs,bc,C0,E0,T0,K1,QP;class dXe{constructor(e,t,r,i,s,o){G(this,K1);G(this,Ud,new Float64Array(6));G(this,bs);G(this,ws);G(this,k0);G(this,G1);G(this,Po);G(this,Vs,"");G(this,bc,0);G(this,C0,new UA);G(this,E0);G(this,T0);L(this,E0,r),L(this,T0,i),L(this,k0,s),L(this,G1,o),[e,t]=J(this,K1,QP).call(this,e,t);const a=L(this,bs,[NaN,NaN,NaN,NaN,e,t]);L(this,Po,[e,t]),L(this,ws,[{line:a,points:v(this,Po)}]),v(this,Ud).set(a,0)}updateProperty(e,t){e==="stroke-width"&&L(this,G1,t)}isEmpty(){return!v(this,ws)||v(this,ws).length===0}isCancellable(){return v(this,Po).length<=10}add(e,t){[e,t]=J(this,K1,QP).call(this,e,t);const[r,i,s,o]=v(this,Ud).subarray(2,6),a=e-s,c=t-o;return Math.hypot(v(this,E0)*a,v(this,T0)*c)<=2?null:(v(this,Po).push(e,t),isNaN(r)?(v(this,Ud).set([s,o,e,t],2),v(this,bs).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(v(this,Ud)[0])&&v(this,bs).splice(6,6),v(this,Ud).set([r,i,s,o,e,t],0),v(this,bs).push(...Et.createBezierPoints(r,i,s,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(v(this,Po).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,s){L(this,E0,r),L(this,T0,i),L(this,k0,s),[e,t]=J(this,K1,QP).call(this,e,t);const o=L(this,bs,[NaN,NaN,NaN,NaN,e,t]);L(this,Po,[e,t]);const a=v(this,ws).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),v(this,ws).push({line:o,points:v(this,Po)}),v(this,Ud).set(o,0),L(this,bc,0),this.toSVGPath(),null}getLastElement(){return v(this,ws).at(-1)}setLastElement(e){return v(this,ws)?(v(this,ws).push(e),L(this,bs,e.line),L(this,Po,e.points),L(this,bc,0),{path:{d:this.toSVGPath()}}):v(this,C0).setLastElement(e)}removeLastElement(){if(!v(this,ws))return v(this,C0).removeLastElement();v(this,ws).pop(),L(this,Vs,"");for(let e=0,t=v(this,ws).length;e<t;e++){const{line:r,points:i}=v(this,ws)[e];L(this,bs,r),L(this,Po,i),L(this,bc,0),this.toSVGPath()}return{path:{d:v(this,Vs)}}}toSVGPath(){const e=Et.svgRound(v(this,bs)[4]),t=Et.svgRound(v(this,bs)[5]);if(v(this,Po).length===2)return L(this,Vs,`${v(this,Vs)} M ${e} ${t} Z`),v(this,Vs);if(v(this,Po).length<=6){const i=v(this,Vs).lastIndexOf("M");L(this,Vs,`${v(this,Vs).slice(0,i)} M ${e} ${t}`),L(this,bc,6)}if(v(this,Po).length===4){const i=Et.svgRound(v(this,bs)[10]),s=Et.svgRound(v(this,bs)[11]);return L(this,Vs,`${v(this,Vs)} L ${i} ${s}`),L(this,bc,12),v(this,Vs)}const r=[];v(this,bc)===0&&(r.push(`M ${e} ${t}`),L(this,bc,6));for(let i=v(this,bc),s=v(this,bs).length;i<s;i+=6){const[o,a,c,u,d,h]=v(this,bs).slice(i,i+6).map(Et.svgRound);r.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}return L(this,Vs,v(this,Vs)+r.join(" ")),L(this,bc,v(this,bs).length),v(this,Vs)}getOutlines(e,t,r,i){const s=v(this,ws).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),v(this,C0).build(v(this,ws),e,t,r,v(this,k0),v(this,G1),i),L(this,Ud,null),L(this,bs,null),L(this,ws,null),L(this,Vs,null),v(this,C0)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ud=new WeakMap,bs=new WeakMap,ws=new WeakMap,k0=new WeakMap,G1=new WeakMap,Po=new WeakMap,Vs=new WeakMap,bc=new WeakMap,C0=new WeakMap,E0=new WeakMap,T0=new WeakMap,K1=new WeakSet,QP=function(e,t){return Et._normalizePoint(e,t,v(this,E0),v(this,T0),v(this,k0))};var Io,JT,QT,yl,zd,Hd,Y1,X1,A0,Ws,Qh,a0e,l0e,c0e;class UA extends Et{constructor(){super(...arguments);G(this,Ws);G(this,Io);G(this,JT,0);G(this,QT);G(this,yl);G(this,zd);G(this,Hd);G(this,Y1);G(this,X1);G(this,A0)}build(t,r,i,s,o,a,c){L(this,zd,r),L(this,Hd,i),L(this,Y1,s),L(this,X1,o),L(this,A0,a),L(this,QT,c??0),L(this,yl,t),J(this,Ws,l0e).call(this)}get thickness(){return v(this,A0)}setLastElement(t){return v(this,yl).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return v(this,yl).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of v(this,yl)){if(t.push(`M${Et.svgRound(r[4])} ${Et.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${Et.svgRound(r[10])} ${Et.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[o,a,c,u,d,h]=r.subarray(i,i+6).map(Et.svgRound);t.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,r,i,s],o){const a=[],c=[],[u,d,h,f]=J(this,Ws,a0e).call(this);let p,x,y,b,_,C,k,T,E;switch(v(this,X1)){case 0:E=Et._rescale,p=t,x=r+s,y=i,b=-s,_=t+u*i,C=r+(1-d-f)*s,k=t+(u+h)*i,T=r+(1-d)*s;break;case 90:E=Et._rescaleAndSwap,p=t,x=r,y=i,b=s,_=t+d*i,C=r+u*s,k=t+(d+f)*i,T=r+(u+h)*s;break;case 180:E=Et._rescale,p=t+i,x=r,y=-i,b=s,_=t+(1-u-h)*i,C=r+d*s,k=t+(1-u)*i,T=r+(d+f)*s;break;case 270:E=Et._rescaleAndSwap,p=t+i,x=r+s,y=-i,b=-s,_=t+(1-d-f)*i,C=r+(1-u-h)*s,k=t+(1-d)*i,T=r+(1-u)*s;break}for(const{line:N,points:P}of v(this,yl))a.push(E(N,p,x,y,b,o?new Array(N.length):null)),c.push(E(P,p,x,y,b,o?new Array(P.length):null));return{lines:a,points:c,rect:[_,C,k,T]}}static deserialize(t,r,i,s,o,{paths:{lines:a,points:c},rotation:u,thickness:d}){const h=[];let f,p,x,y,b;switch(u){case 0:b=Et._rescale,f=-t/i,p=r/s+1,x=1/i,y=-1/s;break;case 90:b=Et._rescaleAndSwap,f=-r/s,p=-t/i,x=1/s,y=1/i;break;case 180:b=Et._rescale,f=t/i+1,p=-r/s,x=-1/i,y=1/s;break;case 270:b=Et._rescaleAndSwap,f=r/s+1,p=t/i+1,x=-1/s,y=-1/i;break}if(!a){a=[];for(const C of c){const k=C.length;if(k===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(k===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const T=new Float32Array(3*(k-2));a.push(T);let[E,N,P,M]=C.subarray(0,4);T.set([NaN,NaN,NaN,NaN,E,N],0);for(let O=4;O<k;O+=2){const q=C[O],D=C[O+1];T.set(Et.createBezierPoints(E,N,P,M,q,D),(O-2)*3),[E,N,P,M]=[P,M,q,D]}}}for(let C=0,k=a.length;C<k;C++)h.push({line:b(a[C].map(T=>T??NaN),f,p,x,y),points:b(c[C].map(T=>T??NaN),f,p,x,y)});const _=new this.prototype.constructor;return _.build(h,i,s,1,u,d,o),_}get box(){return v(this,Io)}updateProperty(t,r){return t==="stroke-width"?J(this,Ws,c0e).call(this,r):null}updateParentDimensions([t,r],i){const[s,o]=J(this,Ws,Qh).call(this);L(this,zd,t),L(this,Hd,r),L(this,Y1,i);const[a,c]=J(this,Ws,Qh).call(this),u=a-s,d=c-o,h=v(this,Io);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return L(this,JT,t),{path:{transform:this.rotationTransform}}}get viewBox(){return v(this,Io).map(Et.svgRound).join(" ")}get defaultProperties(){const[t,r]=v(this,Io);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Et.svgRound(t)} ${Et.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=v(this,Io);let i=0,s=0,o=0,a=0,c=0,u=0;switch(v(this,JT)){case 90:s=r/t,o=-t/r,c=t;break;case 180:i=-1,a=-1,c=t,u=r;break;case 270:s=-r/t,o=t/r,u=r;break;default:return""}return`matrix(${i} ${s} ${o} ${a} ${Et.svgRound(c)} ${Et.svgRound(u)})`}getPathResizingSVGProperties([t,r,i,s]){const[o,a]=J(this,Ws,Qh).call(this),[c,u,d,h]=v(this,Io);if(Math.abs(d-o)<=Et.PRECISION||Math.abs(h-a)<=Et.PRECISION){const b=t+i/2-(c+d/2),_=r+s/2-(u+h/2);return{path:{"transform-origin":`${Et.svgRound(t)} ${Et.svgRound(r)}`,transform:`${this.rotationTransform} translate(${b} ${_})`}}}const f=(i-2*o)/(d-2*o),p=(s-2*a)/(h-2*a),x=d/i,y=h/s;return{path:{"transform-origin":`${Et.svgRound(c)} ${Et.svgRound(u)}`,transform:`${this.rotationTransform} scale(${x} ${y}) translate(${Et.svgRound(o)} ${Et.svgRound(a)}) scale(${f} ${p}) translate(${Et.svgRound(-o)} ${Et.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,i,s]){const[o,a]=J(this,Ws,Qh).call(this),c=v(this,Io),[u,d,h,f]=c;if(c[0]=t,c[1]=r,c[2]=i,c[3]=s,Math.abs(h-o)<=Et.PRECISION||Math.abs(f-a)<=Et.PRECISION){const _=t+i/2-(u+h/2),C=r+s/2-(d+f/2);for(const{line:k,points:T}of v(this,yl))Et._translate(k,_,C,k),Et._translate(T,_,C,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Et.svgRound(t)} ${Et.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(h-2*o),x=(s-2*a)/(f-2*a),y=-p*(u+o)+t+o,b=-x*(d+a)+r+a;if(p!==1||x!==1||y!==0||b!==0)for(const{line:_,points:C}of v(this,yl))Et._rescale(_,y,b,p,x,_),Et._rescale(C,y,b,p,x,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Et.svgRound(t)} ${Et.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],i){const[s,o]=i,a=v(this,Io),c=t-a[0],u=r-a[1];if(v(this,zd)===s&&v(this,Hd)===o)for(const{line:d,points:h}of v(this,yl))Et._translate(d,c,u,d),Et._translate(h,c,u,h);else{const d=v(this,zd)/s,h=v(this,Hd)/o;L(this,zd,s),L(this,Hd,o);for(const{line:f,points:p}of v(this,yl))Et._rescale(f,c,u,d,h,f),Et._rescale(p,c,u,d,h,p);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Et.svgRound(t)} ${Et.svgRound(r)}`}}}get defaultSVGProperties(){const t=v(this,Io);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Et.svgRound(t[0])} ${Et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Io=new WeakMap,JT=new WeakMap,QT=new WeakMap,yl=new WeakMap,zd=new WeakMap,Hd=new WeakMap,Y1=new WeakMap,X1=new WeakMap,A0=new WeakMap,Ws=new WeakSet,Qh=function(t=v(this,A0)){const r=v(this,QT)+t/2*v(this,Y1);return v(this,X1)%180===0?[r/v(this,zd),r/v(this,Hd)]:[r/v(this,Hd),r/v(this,zd)]},a0e=function(){const[t,r,i,s]=v(this,Io),[o,a]=J(this,Ws,Qh).call(this,0);return[t+o,r+a,i-2*o,s-2*a]},l0e=function(){const t=L(this,Io,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of v(this,yl)){if(s.length<=12){for(let c=4,u=s.length;c<u;c+=6)Tt.pointBoundingBox(s[c],s[c+1],t);continue}let o=s[4],a=s[5];for(let c=6,u=s.length;c<u;c+=6){const[d,h,f,p,x,y]=s.subarray(c,c+6);Tt.bezierBoundingBox(o,a,d,h,f,p,x,y,t),o=x,a=y}}const[r,i]=J(this,Ws,Qh).call(this);t[0]=vo(t[0]-r,0,1),t[1]=vo(t[1]-i,0,1),t[2]=vo(t[2]+r,0,1),t[3]=vo(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},c0e=function(t){const[r,i]=J(this,Ws,Qh).call(this);L(this,A0,t);const[s,o]=J(this,Ws,Qh).call(this),[a,c]=[s-r,o-i],u=v(this,Io);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};class r3 extends s0e{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Nr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new r3(this._viewParameters);return e.updateAll(this),e}}var BR,u0e;const tw=class tw extends mO{constructor(t){super({...t,name:"inkEditor"});G(this,BR);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){Nr.initialize(t,r),this._defaultDrawingOptions=new r3(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return gn(this,"typesMap",new Map([[jn.INK_THICKNESS,"stroke-width"],[jn.INK_COLOR,"stroke"],[jn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,i,s,o){return new dXe(t,r,i,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,i,s,o,a){return UA.deserialize(t,r,i,s,o,a)}static async deserialize(t,r,i){let s=null;if(t instanceof oH){const{data:{inkLists:a,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:x,richText:y,contentsObj:b,creationDate:_,modificationDate:C},parent:{page:{pageNumber:k}}}=t;s=t={annotationType:ln.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:k-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:x,richText:y,comment:(b==null?void 0:b.str)||null,creationDate:_,modificationDate:C}}const o=await super.deserialize(t,r,i);return o._initialData=s,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new dO(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:i}){this._drawingOptions=tw.getDefaultDrawingOptions({stroke:Tt.makeHexColor(...t),"stroke-width":r,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":a}}=this,c=Object.assign(super.serialize(t),{color:Nr._colorManager.convert(s),opacity:o,thickness:a,paths:{lines:r,points:i}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!J(this,BR,u0e).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};BR=new WeakSet,u0e=function(t){const{color:r,thickness:i,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,c)=>a!==r[c])||t.thickness!==i||t.opacity!==s||t.pageIndex!==o},j(tw,"_type","ink"),j(tw,"_editorType",ln.INK),j(tw,"_defaultDrawingOptions",null);let $7=tw;class V7 extends UA{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const zj=8,_k=3;var N0,Xn,U7,du,d0e,h0e,z7,ZP,f0e,m0e,p0e,H7,W7,g0e;class Zd{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},s,o,a,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${r} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:x,actualBoundingBoxAscent:y,actualBoundingBoxDescent:b,fontBoundingBoxAscent:_,fontBoundingBoxDescent:C,width:k}=d.measureText(e),T=1.5,E=Math.ceil(Math.max(Math.abs(p)+Math.abs(x)||0,k)*T),N=Math.ceil(Math.max(Math.abs(y)+Math.abs(b)||h,Math.abs(_)+Math.abs(C)||h)*T);u=new OffscreenCanvas(E,N),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,E,N),d.fillStyle="black",d.fillText(e,E*(T-1)/2,N*(3-T)/2);const P=J(this,Xn,H7).call(this,d.getImageData(0,0,E,N).data),M=J(this,Xn,p0e).call(this,P),O=J(this,Xn,W7).call(this,M),q=J(this,Xn,z7).call(this,P,E,N,O);return this.processDrawnLines({lines:{curves:q,width:E,height:N},pageWidth:s,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,s){const[o,a,c]=J(this,Xn,g0e).call(this,e),[u,d]=J(this,Xn,m0e).call(this,o,a,c,Math.hypot(a,c)*v(this,N0).sigmaSFactor,v(this,N0).sigmaR,v(this,N0).kernelSize),h=J(this,Xn,W7).call(this,d),f=J(this,Xn,z7).call(this,u,a,c,h);return this.processDrawnLines({lines:{curves:f,width:a,height:c},pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:o,areContours:a}){i%180!==0&&([t,r]=[r,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],p=Math.min(t/u,r/d),x=p/t,y=p/r,b=[];for(const{points:C}of c){const k=o?J(this,Xn,f0e).call(this,C):C;if(!k)continue;b.push(k);const T=k.length,E=new Float32Array(T),N=new Float32Array(3*(T===2?2:T-2));if(f.push({line:N,points:E}),T===2){E[0]=k[0]*x,E[1]=k[1]*y,N.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[P,M,O,q]=k;P*=x,M*=y,O*=x,q*=y,E.set([P,M,O,q],0),N.set([NaN,NaN,NaN,NaN,P,M],0);for(let D=4;D<T;D+=2){const F=E[D]=k[D]*x,K=E[D+1]=k[D+1]*y;N.set(Et.createBezierPoints(P,M,O,q,F,K),(D-2)*3),[P,M,O,q]=[O,q,F,K]}}if(f.length===0)return null;const _=a?new V7:new UA;return _.build(f,t,r,1,i,a?0:h,s),{outline:_,newCurves:b,areContours:a,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:s}){let o=1/0,a=-1/0,c=0;for(const k of e){c+=k.length;for(let T=2,E=k.length;T<E;T++){const N=k[T]-k[T-2];o=Math.min(o,N),a=Math.max(a,N)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=zj+_k*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=s,f[p++]=t?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(const k of e)f[p++]=k.length-2,f[p++]=k[0],f[p++]=k[1];const x=new CompressionStream("deflate-raw"),y=x.writable.getWriter();await y.ready,y.write(f);const b=u.prototype.constructor;for(const k of e){const T=new b(k.length-2);for(let E=2,N=k.length;E<N;E++)T[E-2]=k[E]-k[E-2];y.write(T)}y.close();const _=await new Response(x.readable).arrayBuffer(),C=new Uint8Array(_);return hve(C)}static async decompressSignature(e){try{const t=DKe(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,a=0;for await(const k of r)o||(o=new Uint8Array(new Uint32Array(k.buffer,0,4)[0])),o.set(k,a),a+=k.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,p=c[5],x=c[6],y=c[7],b=[],_=(zj+_k*x)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(y){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,_);break}a=0;for(let k=0;k<x;k++){const T=c[_k*k+zj],E=new Float32Array(T+2);b.push(E);for(let N=0;N<_k-1;N++)E[N]=c[_k*k+zj+N+1];for(let N=0;N<T;N++)E[N+2]=E[N]+C[a++]}return{areContours:f,thickness:p,outlines:b,width:d,height:h}}catch(t){return cn(`decompressSignature: ${t}`),null}}}N0=new WeakMap,Xn=new WeakSet,U7=function(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i},du=new WeakMap,d0e=function(e,t,r,i,s,o,a){const c=J(this,Xn,U7).call(this,r,i,s,o);for(let u=0;u<8;u++){const d=(-u+c-a+16)%8,h=v(this,du)[2*d],f=v(this,du)[2*d+1];if(e[(r+h)*t+(i+f)]!==0)return d}return-1},h0e=function(e,t,r,i,s,o,a){const c=J(this,Xn,U7).call(this,r,i,s,o);for(let u=0;u<8;u++){const d=(u+c+a+16)%8,h=v(this,du)[2*d],f=v(this,du)[2*d+1];if(e[(r+h)*t+(i+f)]!==0)return d}return-1},z7=function(e,t,r,i){const s=e.length,o=new Int32Array(s);for(let d=0;d<s;d++)o[d]=e[d]<=i?1:0;for(let d=1;d<r-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*r-1-d]=0;let a=1,c;const u=[];for(let d=1;d<r-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,p=o[f];if(p===0)continue;let x=d,y=h;if(p===1&&o[f-1]===0)a+=1,y-=1;else if(p>=1&&o[f+1]===0)a+=1,y+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const b=[h,d],_=y===h+1,C={isHole:_,points:b,id:a,parent:0};u.push(C);let k;for(const D of u)if(D.id===c){k=D;break}k?k.isHole?C.parent=_?k.parent:c:C.parent=_?c:k.parent:C.parent=_?c:0;const T=J(this,Xn,d0e).call(this,o,t,d,h,x,y,0);if(T===-1){o[f]=-a,o[f]!==1&&(c=Math.abs(o[f]));continue}let E=v(this,du)[2*T],N=v(this,du)[2*T+1];const P=d+E,M=h+N;x=P,y=M;let O=d,q=h;for(;;){const D=J(this,Xn,h0e).call(this,o,t,O,q,x,y,1);E=v(this,du)[2*D],N=v(this,du)[2*D+1];const F=O+E,K=q+N;b.push(K,F);const ee=O*t+q;if(o[ee+1]===0?o[ee]=-a:o[ee]===1&&(o[ee]=a),F===d&&K===h&&O===P&&q===M){o[f]!==1&&(c=Math.abs(o[f]));break}else x=O,y=q,O=F,q=K}}}return u},ZP=function(e,t,r,i){if(r-t<=4){for(let P=t;P<r-2;P+=2)i.push(e[P],e[P+1]);return}const s=e[t],o=e[t+1],a=e[r-4]-s,c=e[r-3]-o,u=Math.hypot(a,c),d=a/u,h=c/u,f=d*o-h*s,p=c/a,x=1/u,y=Math.atan(p),b=Math.cos(y),_=Math.sin(y),C=x*(Math.abs(b)+Math.abs(_)),k=x*(1-C+C**2),T=Math.max(Math.atan(Math.abs(_+b)*k),Math.atan(Math.abs(_-b)*k));let E=0,N=t;for(let P=t+2;P<r-2;P+=2){const M=Math.abs(f-d*e[P+1]+h*e[P]);M>E&&(N=P,E=M)}E>(u*T)**2?(J(this,Xn,ZP).call(this,e,t,N+2,i),J(this,Xn,ZP).call(this,e,N,r,i)):i.push(s,o)},f0e=function(e){const t=[],r=e.length;return J(this,Xn,ZP).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},m0e=function(e,t,r,i,s,o){const a=new Float32Array(o**2),c=-2*i**2,u=o>>1;for(let y=0;y<o;y++){const b=(y-u)**2;for(let _=0;_<o;_++)a[y*o+_]=Math.exp((b+(_-u)**2)/c)}const d=new Float32Array(256),h=-2*s**2;for(let y=0;y<256;y++)d[y]=Math.exp(y**2/h);const f=e.length,p=new Uint8Array(f),x=new Uint32Array(256);for(let y=0;y<r;y++)for(let b=0;b<t;b++){const _=y*t+b,C=e[_];let k=0,T=0;for(let N=0;N<o;N++){const P=y+N-u;if(!(P<0||P>=r))for(let M=0;M<o;M++){const O=b+M-u;if(O<0||O>=t)continue;const q=e[P*t+O],D=a[N*o+M]*d[Math.abs(q-C)];k+=q*D,T+=D}}const E=p[_]=Math.round(k/T);x[E]++}return[p,x]},p0e=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},H7=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let a=0,c=r.length;a<c;a++){const u=r[a]=e[a<<2];i=Math.max(i,u),s=Math.min(s,u)}const o=255/(i-s);for(let a=0,c=r.length;a<c;a++)r[a]=(r[a]-s)*o;return r},W7=function(e){let t,r=-1/0,i=-1/0;const s=e.findIndex(c=>c!==0);let o=s,a=s;for(t=s;t<256;t++){const c=e[t];c>r&&(t-o>i&&(i=t-o,a=t-1),r=c,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},g0e=function(e){const t=e,{width:r,height:i}=e,{maxDim:s}=v(this,N0);let o=r,a=i;if(r>s||i>s){let f=r,p=i,x=Math.log2(Math.max(r,i)/s);const y=Math.floor(x);x=x===y?y-1:y;for(let _=0;_<x;_++){o=Math.ceil(f/2),a=Math.ceil(p/2);const C=new OffscreenCanvas(o,a);C.getContext("2d").drawImage(e,0,0,f,p,0,0,o,a),f=o,p=a,e!==t&&e.close(),e=C.transferToImageBitmap()}const b=Math.min(s/o,s/a);o=Math.round(o*b),a=Math.round(a*b)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=u.getImageData(0,0,o,a).data;return[J(this,Xn,H7).call(this,d),o,a]},G(Zd,Xn),G(Zd,N0,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),G(Zd,du,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class lH extends s0e{constructor(){super(),super.updateProperties({fill:Nr._defaultLineColor,"stroke-width":0})}clone(){const e=new lH;return e.updateAll(this),e}}class cH extends r3{constructor(e){super(e),super.updateProperties({stroke:Nr._defaultLineColor,"stroke-width":1})}clone(){const e=new cH(this._viewParameters);return e.updateAll(this),e}}var ug,Wd,dg,j0;const tl=class tl extends mO{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});G(this,ug,!1);G(this,Wd,null);G(this,dg,null);G(this,j0,null);this._willKeepAspectRatio=!0,L(this,dg,t.signatureData||null),L(this,Wd,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){Nr.initialize(t,r),this._defaultDrawingOptions=new lH,this._defaultDrawnSignatureOptions=new cH(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return gn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!v(this,Wd)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(v(this,dg)){const{lines:s,mustSmooth:o,areContours:a,description:c,uuid:u,heightInPage:d}=v(this,dg),{rawDims:{pageWidth:h,pageHeight:f},rotation:p}=this.parent.viewport,x=Zd.processDrawnLines({lines:s,pageWidth:h,pageHeight:f,rotation:p,innerMargin:tl._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(x,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:v(this,Wd)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){L(this,j0,t),this.addEditToolbar()}getUuid(){return v(this,j0)}get description(){return v(this,Wd)}set description(t){L(this,Wd,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:i,width:s,height:o}=v(this,dg),a=Math.max(s,o),c=Zd.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:s,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,i,s){const{x:o,y:a}=this,{outline:c}=L(this,dg,t);L(this,ug,c instanceof V7),this.description=i;let u;v(this,ug)?u=tl.getDefaultDrawingOptions():(u=tl._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=r/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Zd.process(t,r,i,s,tl._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:i,pageHeight:s},rotation:o}=this.parent.viewport;return Zd.extractContoursFromText(t,r,i,s,o,tl._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Zd.processDrawnLines({lines:t,pageWidth:r,pageHeight:i,rotation:s,innerMargin:tl._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=tl.getDefaultDrawingOptions():(this._drawingOptions=tl._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:v(this,ug),color:[0,0,0],thickness:v(this,ug)?0:s});return this.addComment(o),t?(o.paths={lines:r,points:i},o.uuid=v(this,j0),o.isCopy=!0):o.lines=r,v(this,Wd)&&(o.accessibilityData={type:"Figure",alt:v(this,Wd)}),o}static deserializeDraw(t,r,i,s,o,a){return a.areContours?V7.deserialize(t,r,i,s,o,a):UA.deserialize(t,r,i,s,o,a)}static async deserialize(t,r,i){var o;const s=await super.deserialize(t,r,i);return L(s,ug,t.areContours),s.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",L(s,j0,t.uuid),s}};ug=new WeakMap,Wd=new WeakMap,dg=new WeakMap,j0=new WeakMap,j(tl,"_type","signature"),j(tl,"_editorType",ln.SIGNATURE),j(tl,"_defaultDrawingOptions",null);let q7=tl;var Kr,_s,hg,Rf,fg,J1,Mf,P0,qd,xl,Q1,Fn,uC,dC,eI,tI,nI,K7,rI,v0e;class G7 extends Nr{constructor(t){super({...t,name:"stampEditor"});G(this,Fn);G(this,Kr,null);G(this,_s,null);G(this,hg,null);G(this,Rf,null);G(this,fg,null);G(this,J1,"");G(this,Mf,null);G(this,P0,!1);G(this,qd,null);G(this,xl,!1);G(this,Q1,!1);L(this,Rf,t.bitmapUrl),L(this,fg,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){Nr.initialize(t,r)}static isHandlingMimeForPasting(t){return oO.includes(t)}static paste(t,r){r.pasteEditor({mode:ln.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;v(this,_s)&&(L(this,Kr,null),this._uiManager.imageManager.deleteId(v(this,_s)),(t=v(this,Mf))==null||t.remove(),L(this,Mf,null),v(this,qd)&&(clearTimeout(v(this,qd)),L(this,qd,null))),super.remove()}rebuild(){if(!this.parent){v(this,_s)&&J(this,Fn,eI).call(this);return}super.rebuild(),this.div!==null&&(v(this,_s)&&v(this,Mf)===null&&J(this,Fn,eI).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(v(this,hg)||v(this,Kr)||v(this,Rf)||v(this,fg)||v(this,_s)||v(this,P0))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),v(this,P0)||(v(this,Kr)?J(this,Fn,tI).call(this):J(this,Fn,eI).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(L(this,_s,i),s&&L(this,Kr,s),L(this,P0,!1),J(this,Fn,tI).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;v(this,qd)!==null&&clearTimeout(v(this,qd)),L(this,qd,setTimeout(()=>{L(this,qd,null),J(this,Fn,K7).call(this)},200))}copyCanvas(t,r,i=!1){t||(t=224);const{width:s,height:o}=v(this,Kr),a=new Vu;let c=v(this,Kr),u=s,d=o,h=null;if(r){if(s>r||o>r){const P=Math.min(r/s,r/o);u=Math.floor(s*P),d=Math.floor(o*P)}h=document.createElement("canvas");const p=h.width=Math.ceil(u*a.sx),x=h.height=Math.ceil(d*a.sy);v(this,xl)||(c=J(this,Fn,nI).call(this,p,x));const y=h.getContext("2d");y.filter=this._uiManager.hcmFilter;let b="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":BKe.isDarkMode&&(b="#8f8f9d",_="#42414d");const C=15,k=C*a.sx,T=C*a.sy,E=new OffscreenCanvas(k*2,T*2),N=E.getContext("2d");N.fillStyle=b,N.fillRect(0,0,k*2,T*2),N.fillStyle=_,N.fillRect(0,0,k,T),N.fillRect(k,T,k,T),y.fillStyle=y.createPattern(E,"repeat"),y.fillRect(0,0,p,x),y.drawImage(c,0,0,c.width,c.height,0,0,p,x)}let f=null;if(i){let p,x;if(a.symmetric&&c.width<t&&c.height<t)p=c.width,x=c.height;else if(c=v(this,Kr),s>t||o>t){const _=Math.min(t/s,t/o);p=Math.floor(s*_),x=Math.floor(o*_),v(this,xl)||(c=J(this,Fn,nI).call(this,p,x))}const b=new OffscreenCanvas(p,x).getContext("2d",{willReadFrequently:!0});b.drawImage(c,0,0,c.width,c.height,0,0,p,x),f={width:p,height:x,data:b.getImageData(0,0,p,x).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,r,i){var b;let s=null,o=!1;if(t instanceof Oye){const{data:{rect:_,rotation:C,id:k,structParent:T,popupRef:E,richText:N,contentsObj:P,creationDate:M,modificationDate:O},container:q,parent:{page:{pageNumber:D}},canvas:F}=t;let K,ee;F?(delete t.canvas,{id:K,bitmap:ee}=i.imageManager.getFromCanvas(q.id,F),F.remove()):(o=!0,t._hasNoCanvas=!0);const Y=((b=await r._structTree.getAriaAttributes(`${Jz}${k}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:ln.STAMP,bitmapId:K,bitmap:ee,pageIndex:D-1,rect:_.slice(0),rotation:C,annotationElementId:k,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:Y},isSvg:!1,structParent:T,popupRef:E,richText:N,comment:(P==null?void 0:P.str)||null,creationDate:M,modificationDate:O}}const a=await super.deserialize(t,r,i),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=t;o?(i.addMissingCanvas(t.id,a),L(a,P0,!0)):h&&i.imageManager.isValidId(h)?(L(a,_s,h),u&&L(a,Kr,u)):L(a,Rf,d),L(a,xl,f);const[x,y]=a.pageDimensions;return a.width=(c[2]-c[0])/x,a.height=(c[3]-c[1])/y,p&&(a.altTextData=p),a._initialData=s,t.comment&&a.setCommentData(t),L(a,Q1,!!s),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:v(this,_s),isSvg:v(this,xl)});if(this.addComment(i),t)return i.bitmapUrl=J(this,Fn,rI).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=J(this,Fn,v0e).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);const a=v(this,xl)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(v(this,_s)))r.stamps.set(v(this,_s),{area:a,serialized:i}),i.bitmap=J(this,Fn,rI).call(this,!1);else if(v(this,xl)){const c=r.stamps.get(v(this,_s));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=J(this,Fn,rI).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Kr=new WeakMap,_s=new WeakMap,hg=new WeakMap,Rf=new WeakMap,fg=new WeakMap,J1=new WeakMap,Mf=new WeakMap,P0=new WeakMap,qd=new WeakMap,xl=new WeakMap,Q1=new WeakMap,Fn=new WeakSet,uC=function(t,r=!1){if(!t){this.remove();return}L(this,Kr,t.bitmap),r||(L(this,_s,t.id),L(this,xl,t.isSvg)),t.file&&L(this,J1,t.file.name),J(this,Fn,tI).call(this)},dC=function(){if(L(this,hg,null),this._uiManager.enableWaiting(!1),!!v(this,Mf)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&v(this,Kr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&v(this,Kr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},eI=function(){if(v(this,_s)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(v(this,_s)).then(i=>J(this,Fn,uC).call(this,i,!0)).finally(()=>J(this,Fn,dC).call(this));return}if(v(this,Rf)){const i=v(this,Rf);L(this,Rf,null),this._uiManager.enableWaiting(!0),L(this,hg,this._uiManager.imageManager.getFromUrl(i).then(s=>J(this,Fn,uC).call(this,s)).finally(()=>J(this,Fn,dC).call(this)));return}if(v(this,fg)){const i=v(this,fg);L(this,fg,null),this._uiManager.enableWaiting(!0),L(this,hg,this._uiManager.imageManager.getFromFile(i).then(s=>J(this,Fn,uC).call(this,s)).finally(()=>J(this,Fn,dC).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=oO.join(",");const r=this._uiManager._signal;L(this,hg,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),J(this,Fn,uC).call(this,s)}i()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>J(this,Fn,dC).call(this))),t.click()},tI=function(){var u;const{div:t}=this;let{width:r,height:i}=v(this,Kr);const[s,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*s,i=this.height*o;else if(r>a*s||i>a*o){const d=Math.min(a*s/r,a*o/i);r*=d,i*=d}this._uiManager.enableWaiting(!1);const c=L(this,Mf,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/s,this.height=i/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),J(this,Fn,K7).call(this),v(this,Q1)||(this.parent.addUndoableEditor(this),L(this,Q1,!0)),this._reportTelemetry({action:"inserted_image"}),v(this,J1)&&this.div.setAttribute("aria-description",v(this,J1)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},nI=function(t,r){const{width:i,height:s}=v(this,Kr);let o=i,a=s,c=v(this,Kr);for(;o>2*t||a>2*r;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,a),c=h.transferToImageBitmap()}return c},K7=function(){const[t,r]=this.parentDimensions,{width:i,height:s}=this,o=new Vu,a=Math.ceil(i*t*o.sx),c=Math.ceil(s*r*o.sy),u=v(this,Mf);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const d=v(this,xl)?v(this,Kr):J(this,Fn,nI).call(this,a,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,c)},rI=function(t){if(t){if(v(this,xl)){const s=this._uiManager.imageManager.getSvgUrl(v(this,_s));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=v(this,Kr),r.getContext("2d").drawImage(v(this,Kr),0,0),r.toDataURL()}if(v(this,xl)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*pm.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*pm.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(v(this,Kr),0,0,v(this,Kr).width,v(this,Kr).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(v(this,Kr))},v0e=function(t){var a;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===r,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},j(G7,"_type","stamp"),j(G7,"_editorType",ln.STAMP);var I0,Z1,mg,pg,Df,wa,gg,e_,t_,hu,Lf,Ss,Ff,vg,n_,Dt,yg,yr,Y7,y0e,yd,X7,J7,iI;const Qc=class Qc{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:d}){G(this,yr);G(this,I0);G(this,Z1,!1);G(this,mg,null);G(this,pg,null);G(this,Df,null);G(this,wa,new Map);G(this,gg,!1);G(this,e_,!1);G(this,t_,!1);G(this,hu,null);G(this,Lf,null);G(this,Ss,null);G(this,Ff,null);G(this,vg,null);G(this,n_,-1);G(this,Dt);const h=[...v(Qc,yg).values()];if(!Qc._initialized){Qc._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),L(this,Dt,e),this.pageIndex=t,this.div=r,L(this,I0,s),L(this,mg,o),this.viewport=u,L(this,Ss,c),this.drawLayer=a,this._structTree=i,v(this,Dt).addLayer(this)}get isEmpty(){return v(this,wa).size===0}get isInvisible(){return this.isEmpty&&v(this,Dt).getMode()===ln.NONE}updateToolbar(e){v(this,Dt).updateToolbar(e)}updateMode(e=v(this,Dt).getMode()){switch(J(this,yr,iI).call(this),e){case ln.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ln.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ln.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===ln.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of v(Qc,yg).values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=v(this,Ss))==null?void 0:t.div)}setEditingState(e){v(this,Dt).setEditingState(e)}addCommands(e){v(this,Dt).addCommands(e)}cleanUndoStack(e){v(this,Dt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=v(this,mg))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;L(this,t_,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=v(this,vg))==null||r.abort(),L(this,vg,null);const e=new Set;for(const i of v(this,yr,Y7))i.enableEditing(),i.show(!0),i.annotationElementId&&(v(this,Dt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=v(this,mg);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),v(this,Dt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}L(this,t_,!1),v(this,Dt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(L(this,e_,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),v(this,Ss)&&!v(this,vg)){L(this,vg,new AbortController);const i=v(this,Dt).combinedSignal(v(this,vg));v(this,Ss).div.addEventListener("pointerdown",s=>{const{clientX:a,clientY:c,timeStamp:u}=s,d=v(this,n_);if(u-d>500){L(this,n_,u);return}L(this,n_,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(a,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const x=new RegExp(`^${kE}[0-9]+$`);for(const b of f)if(x.test(b.id)){p=b.id;break}if(!p)return;const y=v(this,wa).get(p);(y==null?void 0:y.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),y.dblclick(s))},{signal:i,capture:!0})}const e=v(this,mg);if(e){const i=new Map,s=new Map;for(const a of v(this,yr,Y7)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(e);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else s.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}const o=e.getEditableAnnotations();for(const a of o){const{id:c}=a.data;if(v(this,Dt).isDeletedAnnotationElement(c)){a.updateEdited({deleted:!0});continue}let u=s.get(c);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=i.get(c),u&&(v(this,Dt).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}J(this,yr,iI).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const i of v(Qc,yg).values())t.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),L(this,e_,!1)}getEditableAnnotation(e){var t;return((t=v(this,mg))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){v(this,Dt).getActive()!==e&&v(this,Dt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=v(this,Ss))!=null&&e.div&&!v(this,Ff)){L(this,Ff,new AbortController);const t=v(this,Dt).combinedSignal(v(this,Ff));v(this,Ss).div.addEventListener("pointerdown",J(this,yr,y0e).bind(this),{signal:t}),v(this,Ss).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=v(this,Ss))!=null&&e.div&&v(this,Ff)&&(v(this,Ff).abort(),L(this,Ff,null),v(this,Ss).div.classList.remove("highlighting"))}enableClick(){if(v(this,pg))return;L(this,pg,new AbortController);const e=v(this,Dt).combinedSignal(v(this,pg));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=v(this,pg))==null||e.abort(),L(this,pg,null)}attach(e){v(this,wa).set(e.id,e);const{annotationElementId:t}=e;t&&v(this,Dt).isDeletedAnnotationElement(t)&&v(this,Dt).removeDeletedAnnotationElement(e)}detach(e){var t;v(this,wa).delete(e.id),(t=v(this,I0))==null||t.removePointerInTextLayer(e.contentDiv),!v(this,e_)&&e.annotationElementId&&v(this,Dt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),v(this,Dt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(v(this,Dt).addDeletedAnnotationElement(e.annotationElementId),Nr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),v(this,Dt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!v(this,t_)),v(this,Dt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!v(this,Df)&&(e._focusEventsAllowed=!1,L(this,Df,setTimeout(()=>{L(this,Df,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:v(this,Dt)._signal}),t.focus())},0))),e._structTreeParentId=(r=v(this,I0))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of v(this,wa).values())if(t.uid===e)return t;return null}getNextId(){return v(this,Dt).getId()}combinedSignal(e){return v(this,Dt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=v(this,yr,yd))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await v(this,Dt).updateMode(e.mode);const{offsetX:r,offsetY:i}=J(this,yr,J7).call(this),s=this.getNextId(),o=J(this,yr,X7).call(this,{parent:this,id:s,x:r,y:i,uiManager:v(this,Dt),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=v(Qc,yg).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,v(this,Dt)))||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=J(this,yr,X7).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:v(this,Dt),isCentered:t,...r});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(J(this,yr,J7).call(this),!0,e)}setSelected(e){v(this,Dt).setSelected(e)}toggleSelected(e){v(this,Dt).toggleSelected(e)}unselect(e){v(this,Dt).unselect(e)}pointerup(e){var i;const{isMac:t}=Es.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!v(this,gg)||(L(this,gg,!1),(i=v(this,yr,yd))!=null&&i.isDrawer&&v(this,yr,yd).supportMultipleDrawings))return;if(!v(this,Z1)){L(this,Z1,!0);return}const r=v(this,Dt).getMode();if(r===ln.STAMP||r===ln.SIGNATURE){v(this,Dt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(v(this,Dt).getMode()===ln.HIGHLIGHT&&this.enableTextSelection(),v(this,gg)){L(this,gg,!1);return}const{isMac:t}=Es.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(L(this,gg,!0),(i=v(this,yr,yd))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=v(this,Dt).getActive();L(this,Z1,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),v(this,hu)){v(this,yr,yd).startDrawing(this,v(this,Dt),!1,e);return}v(this,Dt).setCurrentDrawingSession(this),L(this,hu,new AbortController);const t=v(this,Dt).combinedSignal(v(this,hu));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(L(this,Lf,null),this.commitOrRemove())},{signal:t}),v(this,yr,yd).startDrawing(this,v(this,Dt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&L(this,Lf,t);return}v(this,Lf)&&setTimeout(()=>{var t;(t=v(this,Lf))==null||t.focus(),L(this,Lf,null)},0)}endDrawingSession(e=!1){return v(this,hu)?(v(this,Dt).setCurrentDrawingSession(null),v(this,hu).abort(),L(this,hu,null),L(this,Lf,null),v(this,yr,yd).endDrawing(e)):null}findNewParent(e,t,r){const i=v(this,Dt).findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return v(this,hu)?(this.endDrawingSession(),!0):!1}onScaleChanging(){v(this,hu)&&v(this,yr,yd).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=v(this,Dt).getActive())==null?void 0:e.parent)===this&&(v(this,Dt).commitOrRemove(),v(this,Dt).setActiveEditor(null)),v(this,Df)&&(clearTimeout(v(this,Df)),L(this,Df,null));for(const r of v(this,wa).values())(t=v(this,I0))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,v(this,wa).clear(),v(this,Dt).removeLayer(this)}render({viewport:e}){this.viewport=e,Hg(this.div,e);for(const t of v(this,Dt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){v(this,Dt).commitOrRemove(),J(this,yr,iI).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Hg(this.div,{rotation:r}),t!==r)for(const i of v(this,wa).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return v(this,Dt).viewParameters.realScale}};I0=new WeakMap,Z1=new WeakMap,mg=new WeakMap,pg=new WeakMap,Df=new WeakMap,wa=new WeakMap,gg=new WeakMap,e_=new WeakMap,t_=new WeakMap,hu=new WeakMap,Lf=new WeakMap,Ss=new WeakMap,Ff=new WeakMap,vg=new WeakMap,n_=new WeakMap,Dt=new WeakMap,yg=new WeakMap,yr=new WeakSet,Y7=function(){return v(this,wa).size!==0?v(this,wa).values():v(this,Dt).getEditors(this.pageIndex)},y0e=function(e){v(this,Dt).unselectAll();const{target:t}=e;if(t===v(this,Ss).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&v(this,Ss).div.contains(t)){const{isMac:r}=Es.platform;if(e.button!==0||e.ctrlKey&&r)return;v(this,Dt).showAllEditors("highlight",!0,!0),v(this,Ss).div.classList.add("free"),this.toggleDrawing(),fO.startHighlighting(this,v(this,Dt).direction==="ltr",{target:v(this,Ss).div,x:e.x,y:e.y}),v(this,Ss).div.addEventListener("pointerup",()=>{v(this,Ss).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:v(this,Dt)._signal}),e.preventDefault()}},yd=function(){return v(Qc,yg).get(v(this,Dt).getMode())},X7=function(e){const t=v(this,yr,yd);return t?new t.prototype.constructor(e):null},J7=function(){const{x:e,y:t,width:r,height:i}=this.boundingClientRect,s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+i),u=(s+a)/2-e,d=(o+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},iI=function(){for(const e of v(this,wa).values())e.isEmpty()&&e.remove()},j(Qc,"_initialized",!1),G(Qc,yg,new Map([j7,$7,G7,fO,q7].map(e=>[e._editorType,e])));let pO=Qc;var fu,Oo,O0,ZT,$R,x0e,yh,Q7,b0e,Z7;const es=class es{constructor({pageIndex:e}){G(this,yh);G(this,fu,null);G(this,Oo,new Map);G(this,O0,new Map);this.pageIndex=e}setParent(e){if(!v(this,fu)){L(this,fu,e);return}if(v(this,fu)!==e){if(v(this,Oo).size>0)for(const t of v(this,Oo).values())t.remove(),e.append(t);L(this,fu,e)}}static get _svgFactory(){return gn(this,"_svgFactory",new PE)}draw(e,t=!1,r=!1){const i=pi(es,ZT)._++,s=J(this,yh,Q7).call(this),o=es._svgFactory.createElement("defs");s.append(o);const a=es._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),t&&v(this,O0).set(i,a);const u=r?J(this,yh,b0e).call(this,o,c):null,d=es._svgFactory.createElement("use");return s.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(s,e),v(this,Oo).set(i,s),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=pi(es,ZT)._++,i=J(this,yh,Q7).call(this),s=es._svgFactory.createElement("defs");i.append(s);const o=es._svgFactory.createElement("path");s.append(o);const a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=es._svgFactory.createElement("mask");s.append(h),c=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=es._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=es._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=es._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return i.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,e),v(this,Oo).set(r,i),r}finalizeDraw(e,t){v(this,O0).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:r,bbox:i,rootClass:s,path:o}=t,a=typeof e=="number"?v(this,Oo).get(e):e;if(a){if(r&&J(this,yh,Z7).call(this,a,r),i&&J(c=es,$R,x0e).call(c,a,i),s){const{classList:u}=a;for(const[d,h]of Object.entries(s))u.toggle(d,h)}if(o){const d=a.firstChild.firstChild;J(this,yh,Z7).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const r=v(this,Oo).get(e);r&&(v(t,fu).append(r),v(this,Oo).delete(e),v(t,Oo).set(e,r))}remove(e){v(this,O0).delete(e),v(this,fu)!==null&&(v(this,Oo).get(e).remove(),v(this,Oo).delete(e))}destroy(){L(this,fu,null);for(const e of v(this,Oo).values())e.remove();v(this,Oo).clear(),v(this,O0).clear()}};fu=new WeakMap,Oo=new WeakMap,O0=new WeakMap,ZT=new WeakMap,$R=new WeakSet,x0e=function(e,[t,r,i,s]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*s}%`},yh=new WeakSet,Q7=function(){const e=es._svgFactory.create(1,1,!0);return v(this,fu).append(e),e.setAttribute("aria-hidden",!0),e},b0e=function(e,t){const r=es._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=es._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},Z7=function(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)},G(es,$R),G(es,ZT,0);let gO=es;globalThis._pdfjsTestingUtils={HighlightOutliner:I7};globalThis.pdfjsLib={AbortException:mm,AnnotationEditorLayer:pO,AnnotationEditorParamsType:jn,AnnotationEditorType:ln,AnnotationEditorUIManager:Wg,AnnotationLayer:aH,AnnotationMode:Qd,AnnotationType:Ti,applyOpacity:vve,build:wye,ColorPicker:jE,createValidAbsoluteUrl:Kz,CSSConstants:gve,DOMSVGFactory:PE,DrawLayer:gO,FeatureTest:Es,fetchData:vS,findContrastColor:yve,getDocument:rH,getFilenameFromUrl:fve,getPdfFilenameFromUrl:mve,getRGB:yS,getUuid:Xz,getXfaPageViewport:pve,GlobalWorkerOptions:_c,ImageKind:MC,InvalidPDFException:sO,isDataScheme:BA,isPdfFile:t3,isValidExplicitDest:Jve,MathClamp:vo,noContextMenu:Ul,normalizeUnicode:dve,OPS:E_,OutputScale:Vu,PasswordResponses:cve,PDFDataRangeTransport:iH,PDFDateString:TE,PDFWorker:T_,PermissionFlag:lve,PixelsPerInch:pm,RenderingCancelledException:e3,renderRichText:Zz,ResponseException:CE,setLayerDimensions:Hg,shadow:gn,SignatureExtractor:Zd,stopEvent:ii,SupportedImageMimeTypes:oO,TextLayer:NE,TouchManager:AE,updateUrlHash:Yz,Util:Tt,VerbosityLevel:DA,version:bye,XfaLayer:Qz};const hXe=Object.freeze(Object.defineProperty({__proto__:null,AbortException:mm,AnnotationEditorLayer:pO,AnnotationEditorParamsType:jn,AnnotationEditorType:ln,AnnotationEditorUIManager:Wg,AnnotationLayer:aH,AnnotationMode:Qd,AnnotationType:Ti,CSSConstants:gve,ColorPicker:jE,DOMSVGFactory:PE,DrawLayer:gO,FeatureTest:Es,GlobalWorkerOptions:_c,ImageKind:MC,InvalidPDFException:sO,MathClamp:vo,OPS:E_,OutputScale:Vu,PDFDataRangeTransport:iH,PDFDateString:TE,PDFWorker:T_,PasswordResponses:cve,PermissionFlag:lve,PixelsPerInch:pm,RenderingCancelledException:e3,ResponseException:CE,SignatureExtractor:Zd,SupportedImageMimeTypes:oO,TextLayer:NE,TouchManager:AE,Util:Tt,VerbosityLevel:DA,XfaLayer:Qz,applyOpacity:vve,build:wye,createValidAbsoluteUrl:Kz,fetchData:vS,findContrastColor:yve,getDocument:rH,getFilenameFromUrl:fve,getPdfFilenameFromUrl:mve,getRGB:yS,getUuid:Xz,getXfaPageViewport:pve,isDataScheme:BA,isPdfFile:t3,isValidExplicitDest:Jve,noContextMenu:Ul,normalizeUnicode:dve,renderRichText:Zz,setLayerDimensions:Hg,shadow:gn,stopEvent:ii,updateUrlHash:Yz,version:bye},Symbol.toStringTag,{value:"Module"}));var WZ=Object.prototype.hasOwnProperty;function qZ(n,e,t){for(t of n.keys())if(yw(t,e))return t}function yw(n,e){var t,r,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&yw(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(i=r,i&&typeof i=="object"&&(i=qZ(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(i=r[0],i&&typeof i=="object"&&(i=qZ(e,i),!i)||!yw(r[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(WZ.call(n,t)&&++r&&!WZ.call(e,t)||!(t in e)||!yw(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function zA(n){let e=!1;return{promise:new Promise((r,i)=>{n.then(s=>!e&&r(s)).catch(s=>!e&&i(s))}),cancel(){e=!0}}}const fXe=["onCopy","onCut","onPaste"],mXe=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],pXe=["onFocus","onBlur"],gXe=["onInput","onInvalid","onReset","onSubmit"],vXe=["onLoad","onError"],yXe=["onKeyDown","onKeyPress","onKeyUp"],xXe=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],bXe=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],wXe=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],_Xe=["onSelect"],SXe=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],kXe=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],CXe=["onScroll"],EXe=["onWheel"],TXe=["onAnimationStart","onAnimationEnd","onAnimationIteration"],AXe=["onTransitionEnd"],NXe=["onToggle"],jXe=["onChange"],PXe=[...fXe,...mXe,...pXe,...gXe,...vXe,...yXe,...xXe,...bXe,...wXe,..._Xe,...SXe,...kXe,...CXe,...EXe,...TXe,...AXe,...jXe,...NXe];function w0e(n,e){const t={};for(const r of PXe){const i=n[r];i&&(e?t[r]=(s=>i(s,e(r))):t[r]=i)}return t}var IXe="Invariant failed";function Rn(n,e){if(!n)throw new Error(IXe)}var Y5,GZ;function OXe(){if(GZ)return Y5;GZ=1;var n=function(){};return Y5=n,Y5}var RXe=OXe();const bo=qn(RXe),_0e=S.createContext(null),MXe="noopener noreferrer nofollow";class DXe{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Rn(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Rn(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||MXe,e.target=r?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Rn(this.pdfDocument),Rn(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Rn(Array.isArray(t));const r=t[0];new Promise(i=>{Rn(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(s=>{i(s)}).catch(()=>{Rn(!1)}):typeof r=="number"?i(r):Rn(!1)}).then(i=>{const s=i+1;Rn(this.pdfViewer),Rn(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:s})})})}goToPage(e){const t=e-1;Rn(this.pdfViewer),Rn(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function xw({children:n,type:e}){return l.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const KZ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function LXe(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function A_(){return S.useReducer(LXe,{value:void 0,error:void 0})}const i3=typeof window<"u",S0e=i3&&window.location.protocol==="file:";function FXe(n){return typeof n<"u"}function Wv(n){return FXe(n)&&n!==null}function BXe(n){return typeof n=="string"}function $Xe(n){return n instanceof ArrayBuffer}function VXe(n){return Rn(i3),n instanceof Blob}function eV(n){return BXe(n)&&/^data:/.test(n)}function YZ(n){Rn(eV(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function UXe(){return i3&&window.devicePixelRatio||1}const k0e="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function XZ(){bo(!S0e,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${k0e}`)}function zXe(){bo(!S0e,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${k0e}`)}function nx(n){n!=null&&n.cancel&&n.cancel()}function tV(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function HXe(n){return n.name==="RenderingCancelledException"}function WXe(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:s}=i.target;if(!s)return t(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:qXe}=hXe,GXe=(n,e)=>{switch(e){case KZ.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case KZ.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function JZ(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const QZ=S.forwardRef(function({children:e,className:t,error:r="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:s,file:o,inputRef:a,imageResourcesPath:c,loading:u="Loading PDF…",noData:d="No PDF file specified.",onItemClick:h,onLoadError:f,onLoadProgress:p,onLoadSuccess:x,onPassword:y=GXe,onSourceError:b,onSourceSuccess:_,options:C,renderMode:k,rotate:T,scale:E,...N},P){const[M,O]=A_(),{value:q,error:D}=M,[F,K]=A_(),{value:ee,error:Y}=F,U=S.useRef(new DXe),R=S.useRef([]),z=S.useRef(void 0),W=S.useRef(void 0);o&&o!==z.current&&JZ(o)&&(bo(!yw(o,z.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),z.current=o),C&&C!==W.current&&(bo(!yw(C,W.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),W.current=C);const se=S.useRef({scrollPageIntoView:ge=>{const{dest:he,pageNumber:Ee,pageIndex:Be=Ee-1}=ge;if(h){h({dest:he,pageIndex:Be,pageNumber:Ee});return}const vt=R.current[Be];if(vt){vt.scrollIntoView();return}bo(!1,`An internal link leading to page ${Ee} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});S.useImperativeHandle(P,()=>({linkService:U,pages:R,viewer:se}),[]);function ne(){_&&_()}function te(){D&&(bo(!1,D.toString()),b&&b(D))}function H(){O({type:"RESET"})}S.useEffect(H,[o,O]);const ce=S.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return eV(o)?{data:YZ(o)}:(XZ(),{url:o});if(o instanceof qXe)return{range:o};if($Xe(o))return{data:o};if(i3&&VXe(o))return{data:await WXe(o)};if(Rn(typeof o=="object"),Rn(JZ(o)),"url"in o&&typeof o.url=="string"){if(eV(o.url)){const{url:ge,...he}=o;return{data:YZ(ge),...he}}XZ()}return o},[o]);S.useEffect(()=>{const ge=zA(ce());return ge.promise.then(he=>{O({type:"RESOLVE",value:he})}).catch(he=>{O({type:"REJECT",error:he})}),()=>{nx(ge)}},[ce,O]),S.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){te();return}ne()}},[q]);function pe(){ee&&(x&&x(ee),R.current=new Array(ee.numPages),U.current.setDocument(ee))}function oe(){Y&&(bo(!1,Y.toString()),f&&f(Y))}S.useEffect(function(){K({type:"RESET"})},[K,q]),S.useEffect(function(){if(!q)return;const he=C?{...q,...C}:q,Ee=rH(he);p&&(Ee.onProgress=p),y&&(Ee.onPassword=y);const Be=Ee,vt=Be.promise.then(xt=>{K({type:"RESOLVE",value:xt})}).catch(xt=>{Be.destroyed||K({type:"REJECT",error:xt})});return()=>{vt.finally(()=>Be.destroy())}},[C,K,q]),S.useEffect(()=>{if(!(typeof ee>"u")){if(ee===!1){oe();return}pe()}},[ee]),S.useEffect(function(){U.current.setViewer(se.current),U.current.setExternalLinkRel(i),U.current.setExternalLinkTarget(s)},[i,s]);const ve=S.useCallback((ge,he)=>{R.current[ge]=he},[]),be=S.useCallback(ge=>{delete R.current[ge]},[]),fe=S.useMemo(()=>({imageResourcesPath:c,linkService:U.current,onItemClick:h,pdf:ee,registerPage:ve,renderMode:k,rotate:T,scale:E,unregisterPage:be}),[c,h,ee,ve,k,T,E,be]),we=S.useMemo(()=>w0e(N,()=>ee),[N,ee]);function ue(){function ge(Ee){return!!(Ee!=null&&Ee.pdf)}if(!ge(fe))throw new Error("pdf is undefined");const he=typeof e=="function"?e(fe):e;return l.jsx(_0e.Provider,{value:fe,children:he})}function Z(){return o?ee==null?l.jsx(xw,{type:"loading",children:typeof u=="function"?u():u}):ee===!1?l.jsx(xw,{type:"error",children:typeof r=="function"?r():r}):ue():l.jsx(xw,{type:"no-data",children:typeof d=="function"?d():d})}return l.jsx("div",{className:rn("react-pdf__Document",t),ref:a,...we,children:Z()})});function C0e(){return S.useContext(_0e)}function E0e(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(s){for(var o=0,a=t;o<a.length;o++){var c=a[o];typeof c=="function"?c(s):c&&(c.current=s)}}}const T0e=S.createContext(null);function s3(){return S.useContext(T0e)}function KXe(){const n=C0e(),e=s3();Rn(e);const t={...n,...e},{imageResourcesPath:r,linkService:i,onGetAnnotationsError:s,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:c,page:u,pdf:d,renderForms:h,rotate:f,scale:p=1}=t;Rn(d),Rn(u),Rn(i);const[x,y]=A_(),{value:b,error:_}=x,C=S.useRef(null);bo(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function k(){b&&o&&o(b)}function T(){_&&(bo(!1,_.toString()),s&&s(_))}S.useEffect(function(){y({type:"RESET"})},[y,u]),S.useEffect(function(){if(!u)return;const O=zA(u.getAnnotations()),q=O;return O.promise.then(D=>{y({type:"RESOLVE",value:D})}).catch(D=>{y({type:"REJECT",error:D})}),()=>{nx(q)}},[y,u]),S.useEffect(()=>{if(b!==void 0){if(b===!1){T();return}k()}},[b]);function E(){c&&c()}function N(M){bo(!1,`${M}`),a&&a(M)}const P=S.useMemo(()=>u.getViewport({scale:p,rotation:f}),[u,f,p]);return S.useEffect(function(){if(!d||!u||!i||!b)return;const{current:O}=C;if(!O)return;const q=P.clone({dontFlip:!0}),D={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:O,l10n:null,linkService:i,page:u,structTreeLayer:null,viewport:q},F={annotations:b,annotationStorage:d.annotationStorage,div:O,imageResourcesPath:r,linkService:i,page:u,renderForms:h,viewport:q};O.innerHTML="";try{new aH(D).render(F),E()}catch(K){N(K)}return()=>{}},[b,r,i,u,d,h,P]),l.jsx("div",{className:rn("react-pdf__Page__annotations","annotationLayer"),ref:C})}const A0e={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},YXe=/^H(\d+)$/;function XXe(n){return n in A0e}function o3(n){return"children"in n}function N0e(n){return o3(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function JXe(n){const e={};if(o3(n)){const{role:t}=n,r=t.match(YXe);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(XXe(t)){const i=A0e[t];i&&(e.role=i)}}return e}function j0e(n){const e={};if(o3(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),N0e(n)){const[t]=n.children;if(t){const r=j0e(t);return{...e,...r}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function QXe(n){return n?{...JXe(n),...j0e(n)}:null}function P0e({className:n,node:e}){const t=S.useMemo(()=>QXe(e),[e]),r=S.useMemo(()=>!o3(e)||N0e(e)?null:e.children.map((i,s)=>l.jsx(P0e,{node:i},s)),[e]);return l.jsx("span",{className:n,...t,children:r})}function ZXe(){const n=s3();Rn(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,i]=A_(),{value:s,error:o}=r,{customTextRenderer:a,page:c}=n;function u(){s&&t&&t(s)}function d(){o&&(bo(!1,o.toString()),e&&e(o))}return S.useEffect(function(){i({type:"RESET"})},[i,c]),S.useEffect(function(){if(a||!c)return;const f=zA(c.getStructTree()),p=f;return f.promise.then(x=>{i({type:"RESOLVE",value:x})}).catch(x=>{i({type:"REJECT",error:x})}),()=>nx(p)},[a,c,i]),S.useEffect(()=>{if(s!==void 0){if(s===!1){d();return}u()}},[s]),s?l.jsx(P0e,{className:"react-pdf__Page__structTree structTree",node:s}):null}const ZZ=Qd;function eJe(n){const e=s3();Rn(e);const t={...e,...n},{_className:r,canvasBackground:i,devicePixelRatio:s=UXe(),onRenderError:o,onRenderSuccess:a,page:c,renderForms:u,renderTextLayer:d,rotate:h,scale:f}=t,{canvasRef:p}=n;Rn(c);const x=S.useRef(null);function y(){c&&a&&a(tV(c,f))}function b(T){HXe(T)||(bo(!1,T.toString()),o&&o(T))}const _=S.useMemo(()=>c.getViewport({scale:f*s,rotation:h}),[s,c,h,f]),C=S.useMemo(()=>c.getViewport({scale:f,rotation:h}),[c,h,f]);S.useEffect(function(){if(!c)return;c.cleanup();const{current:E}=x;if(!E)return;E.width=_.width,E.height=_.height,E.style.width=`${Math.floor(C.width)}px`,E.style.height=`${Math.floor(C.height)}px`,E.style.visibility="hidden";const N={annotationMode:u?ZZ.ENABLE_FORMS:ZZ.ENABLE,canvas:E,canvasContext:E.getContext("2d",{alpha:!1}),viewport:_};i&&(N.background=i);const P=c.render(N),M=P;return P.promise.then(()=>{E.style.visibility="",y()}).catch(b),()=>nx(M)},[i,c,u,_,C]);const k=S.useCallback(()=>{const{current:T}=x;T&&(T.width=0,T.height=0)},[]);return S.useEffect(()=>k,[k]),l.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:E0e(p,x),style:{display:"block",userSelect:"none"},children:d?l.jsx(ZXe,{}):null})}function tJe(n){return"str"in n}function nJe(){const n=s3();Rn(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:i,onRenderTextLayerSuccess:s,page:o,pageIndex:a,pageNumber:c,rotate:u,scale:d}=n;Rn(o);const[h,f]=A_(),{value:p,error:x}=h,y=S.useRef(null);bo(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){p&&r&&r(p)}function _(){x&&(bo(!1,x.toString()),t&&t(x))}S.useEffect(function(){f({type:"RESET"})},[o,f]),S.useEffect(function(){if(!o)return;const M=zA(o.getTextContent()),O=M;return M.promise.then(q=>{f({type:"RESOLVE",value:q})}).catch(q=>{f({type:"REJECT",error:q})}),()=>nx(O)},[o,f]),S.useEffect(()=>{if(p!==void 0){if(p===!1){_();return}b()}},[p]);const C=S.useCallback(()=>{s&&s()},[s]),k=S.useCallback(P=>{bo(!1,P.toString()),i&&i(P)},[i]);function T(){const P=y.current;P&&P.classList.add("selecting")}function E(){const P=y.current;P&&P.classList.remove("selecting")}const N=S.useMemo(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return S.useLayoutEffect(function(){if(!o||!p)return;const{current:M}=y;if(!M)return;M.innerHTML="";const O=o.streamTextContent({includeMarkedContent:!0}),q={container:M,textContentSource:O,viewport:N},D=new NE(q),F=D;return D.render().then(()=>{const K=document.createElement("div");K.className="endOfContent",M.append(K);const ee=M.querySelectorAll('[role="presentation"]');if(e){let Y=0;p.items.forEach((U,R)=>{if(!tJe(U))return;const z=ee[Y];if(!z)return;const W=e({pageIndex:a,pageNumber:c,itemIndex:R,...U});z.innerHTML=W,Y+=U.str&&U.hasEOL?2:1})}C()}).catch(k),()=>nx(F)},[e,k,C,o,a,c,p,N]),l.jsx("div",{className:rn("react-pdf__Page__textContent","textLayer"),onMouseUp:E,onMouseDown:T,ref:y})}const eee=1;function tee(n){const t={...C0e(),...n},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:s,canvasRef:o,children:a,className:c,customRenderer:u,customTextRenderer:d,devicePixelRatio:h,error:f="Failed to load the page.",height:p,inputRef:x,loading:y="Loading page…",noData:b="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:C,onGetStructTreeError:k,onGetStructTreeSuccess:T,onGetTextError:E,onGetTextSuccess:N,onLoadError:P,onLoadSuccess:M,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:q,onRenderError:D,onRenderSuccess:F,onRenderTextLayerError:K,onRenderTextLayerSuccess:ee,pageIndex:Y,pageNumber:U,pdf:R,registerPage:z,renderAnnotationLayer:W=!0,renderForms:se=!1,renderMode:ne="canvas",renderTextLayer:te=!0,rotate:H,scale:ce=eee,unregisterPage:pe,width:oe,...ve}=t,[be,fe]=A_(),{value:we,error:ue}=be,Z=S.useRef(null);Rn(R);const ge=Wv(U)?U-1:Y??null,he=U??(Wv(Y)?Y+1:null),Ee=H??(we?we.rotate:null),Be=S.useMemo(()=>{if(!we)return null;let Bt=1;const Jt=ce??eee;if(oe||p){const Pn=we.getViewport({scale:1,rotation:Ee});oe?Bt=oe/Pn.width:p&&(Bt=p/Pn.height)}return Jt*Bt},[p,we,Ee,ce,oe]);S.useEffect(function(){return()=>{Wv(ge)&&i&&pe&&pe(ge)}},[i,R,ge,pe]);function vt(){if(M){if(!we||!Be)return;M(tV(we,Be))}if(i&&z){if(!Wv(ge)||!Z.current)return;z(ge,Z.current)}}function xt(){ue&&(bo(!1,ue.toString()),P&&P(ue))}S.useEffect(function(){fe({type:"RESET"})},[fe,R,ge]),S.useEffect(function(){if(!R||!he)return;const Jt=zA(R.getPage(he)),Pn=Jt;return Jt.promise.then(Hn=>{fe({type:"RESOLVE",value:Hn})}).catch(Hn=>{fe({type:"REJECT",error:Hn})}),()=>nx(Pn)},[fe,R,he]),S.useEffect(()=>{if(we!==void 0){if(we===!1){xt();return}vt()}},[we,Be]);const Rt=S.useMemo(()=>Wv(ge)&&he&&Wv(Ee)&&Wv(Be)?{_className:r,canvasBackground:s,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:_,onGetAnnotationsSuccess:C,onGetStructTreeError:k,onGetStructTreeSuccess:T,onGetTextError:E,onGetTextSuccess:N,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:q,onRenderError:D,onRenderSuccess:F,onRenderTextLayerError:K,onRenderTextLayerSuccess:ee,page:we,pageIndex:ge,pageNumber:he,renderForms:se,renderTextLayer:te,rotate:Ee,scale:Be}:null,[r,s,d,h,_,C,k,T,E,N,O,q,D,F,K,ee,we,ge,he,se,te,Ee,Be]),xe=S.useMemo(()=>w0e(ve,()=>we&&(Be?tV(we,Be):void 0)),[ve,we,Be]),Ne=`${ge}@${Be}/${Ee}`;function Oe(){switch(ne){case"custom":return Rn(u),l.jsx(u,{},`${Ne}_custom`);case"none":return null;case"canvas":default:return l.jsx(eJe,{canvasRef:o},`${Ne}_canvas`)}}function qe(){return te?l.jsx(nJe,{},`${Ne}_text`):null}function Ze(){return W?l.jsx(KXe,{},`${Ne}_annotations`):null}function Ye(){function Bt(Pn){return!!(Pn!=null&&Pn.page)}if(!Bt(Rt))throw new Error("page is undefined");const Jt=typeof a=="function"?a(Rt):a;return l.jsxs(T0e.Provider,{value:Rt,children:[Oe(),qe(),Ze(),Jt]})}function ht(){return he?R===null||we===void 0||we===null?l.jsx(xw,{type:"loading",children:typeof y=="function"?y():y}):R===!1||we===!1?l.jsx(xw,{type:"error",children:typeof f=="function"?f():f}):Ye():l.jsx(xw,{type:"no-data",children:typeof b=="function"?b():b})}return l.jsx("div",{className:rn(r,c),"data-page-number":he,ref:E0e(x,Z),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Be}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...xe,children:ht()})}zXe();_c.workerSrc="pdf.worker.mjs";_c.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const Sk=n=>{var t;const e=(t=n.split(".").pop())==null?void 0:t.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(e||"")?"image":e==="pdf"?"pdf":"unknown"},X5=({files:n,title:e="Tài liệu"})=>{const[t,r]=S.useState(!1),[i,s]=S.useState(0),[o,a]=S.useState({}),c=p=>x=>{a(y=>({...y,[p]:x.numPages}))},u=S.useMemo(()=>l.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:l.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-gray-300 border-t-transparent rounded-full"})}),[]);if(!n||n.length===0)return l.jsx("div",{className:"text-sm text-gray-500 italic",children:"Không có tài liệu nào"});const d=p=>{switch(Sk(p)){case"image":return l.jsx(zae,{className:"w-4 h-4"});case"pdf":return l.jsx(i_,{className:"w-4 h-4"});default:return l.jsx(sj,{className:"w-4 h-4"})}},h=p=>{switch(Sk(p)){case"image":return l.jsx(ct,{variant:"secondary",className:"text-xs",children:"Hình ảnh"});case"pdf":return l.jsx(ct,{variant:"default",className:"text-xs",children:"PDF"});default:return l.jsx(ct,{variant:"outline",className:"text-xs",children:"File"})}},f=p=>{const x=document.createElement("a");x.href=p,x.download=p.split("/").pop()||"file",document.body.appendChild(x),x.click(),document.body.removeChild(x)};return l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:e}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:n.map((p,x)=>{const y=Sk(p);return l.jsx("div",{className:"relative group",children:l.jsxs("div",{className:"border rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d(p),h(p)]}),y==="image"?l.jsx("div",{className:"aspect-video bg-gray-100 rounded overflow-hidden",children:l.jsx("img",{src:p,alt:`Document ${x+1}`,className:"w-full h-full object-cover"})}):y==="pdf"?l.jsx("div",{className:"aspect-video bg-gray-100 rounded flex items-center justify-center",children:l.jsx(i_,{className:"w-8 h-8 text-gray-400"})}):l.jsx("div",{className:"aspect-video bg-gray-100 rounded flex items-center justify-center",children:l.jsx(sj,{className:"w-8 h-8 text-gray-400"})}),l.jsxs("div",{className:"flex gap-1 mt-2",children:[l.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>{s(x),r(!0)},className:"flex-1",children:[l.jsx(Ts,{className:"w-3 h-3 mr-1"}),"Xem"]}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>f(p),children:l.jsx(Mk,{className:"w-3 h-3"})})]})]})},x)})}),l.jsx(Qr,{open:t,onOpenChange:r,children:l.jsxs(Br,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[l.jsx($r,{children:l.jsxs(Vr,{className:"flex items-center gap-2",children:[l.jsx(Ts,{className:"w-5 h-5"}),e," - ",i+1," / ",n.length]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:n.length>1?l.jsxs(rve,{className:"w-full",opts:{startIndex:i},setApi:p=>{p&&p.on("select",()=>{s(p.selectedScrollSnap())})},children:[l.jsx(ive,{children:n.map((p,x)=>{const y=Sk(p);return l.jsx(sve,{className:"flex justify-center",children:l.jsx("div",{className:"w-full h-[70vh] overflow-hidden",children:y==="image"?l.jsx("img",{src:p,alt:`Document ${x+1}`,className:"w-full h-full object-contain"}):y==="pdf"?l.jsx("div",{className:"w-full h-full overflow-auto p-2",children:l.jsx(QZ,{file:p,onLoadSuccess:c(p),loading:u,error:l.jsx("div",{className:"text-center text-red-500",children:"Không thể tải PDF"}),children:Array.from({length:o[p]||1},(b,_)=>l.jsx("div",{className:"mb-4 flex justify-center",children:l.jsx(tee,{pageNumber:_+1,width:900,loading:u,renderTextLayer:!1,renderAnnotationLayer:!1})},_))})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[l.jsx(sj,{className:"w-16 h-16 mb-4"}),l.jsx("p",{children:"Không thể xem trước file này"}),l.jsxs(Ce,{variant:"outline",className:"mt-4",onClick:()=>f(p),children:[l.jsx(Mk,{className:"w-4 h-4 mr-2"}),"Tải xuống"]})]})})},x)})}),l.jsx(ove,{}),l.jsx(ave,{})]}):l.jsx("div",{className:"w-full h-[70vh] overflow-hidden",children:(()=>{const p=n[0];switch(Sk(p)){case"image":return l.jsx("img",{src:p,alt:"Document",className:"w-full h-full object-contain"});case"pdf":return l.jsx("div",{className:"w-full h-full overflow-auto p-2",children:l.jsx(QZ,{file:p,onLoadSuccess:c(p),loading:u,error:l.jsx("div",{className:"text-center text-red-500",children:"Không thể tải PDF"}),children:Array.from({length:o[p]||1},(y,b)=>l.jsx("div",{className:"mb-4 flex justify-center",children:l.jsx(tee,{pageNumber:b+1,width:900,loading:u,renderTextLayer:!1,renderAnnotationLayer:!1})},b))})});default:return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[l.jsx(sj,{className:"w-16 h-16 mb-4"}),l.jsx("p",{children:"Không thể xem trước file này"}),l.jsxs(Ce,{variant:"outline",className:"mt-4",onClick:()=>f(n[0]),children:[l.jsx(Mk,{className:"w-4 h-4 mr-2"}),"Tải xuống"]})]})}})()})}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[l.jsx("div",{className:"flex gap-2",children:n.map((p,x)=>l.jsx("button",{onClick:()=>s(x),className:`w-2 h-2 rounded-full transition-colors ${x===i?"bg-blue-500":"bg-gray-300"}`},x))}),l.jsx("div",{className:"flex gap-2",children:n.map((p,x)=>l.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>f(p),children:[l.jsx(Mk,{className:"w-4 h-4 mr-1"}),"Tải ",x+1]},x))})]})]})})]})},rJe=()=>{const[n,e]=S.useState(!0),[t,r]=S.useState([]),[i,s]=S.useState(null),[o,a]=S.useState(!1),[c,u]=S.useState(!1),[d,h]=S.useState(""),[f,p]=S.useState("all"),[x,y]=S.useState(1),[b,_]=S.useState(1),[C,k]=S.useState(0),[T,E]=S.useState("approved"),[N,P]=S.useState(""),M=10,O={pending_review:{label:"Chờ xem xét",color:"bg-yellow-100 text-yellow-800"},approved:{label:"Đã phê duyệt",color:"bg-green-100 text-green-800"},rejected:{label:"Bị từ chối",color:"bg-red-100 text-red-800"},allow_edit:{label:"Cho phép chỉnh sửa",color:"bg-blue-100 text-blue-800"}},q=async()=>{try{e(!0);const W=new URLSearchParams({page:x.toString(),pageSize:M.toString()});f!=="all"&&W.append("status",f),d&&W.append("search",d);const se=await $o(`${Ge()}/api/auth/tour-guide-applications?${W}`);if(se.ok){const ne=await se.json();r(ne.applications),_(ne.totalPages),k(ne.totalCount)}else Ae.error("Không thể tải danh sách đơn đăng ký")}catch(W){console.error("Error loading applications:",W),Ae.error("Không thể tải danh sách đơn đăng ký")}finally{e(!1)}},D=async W=>{try{const se=await $o(`${Ge()}/api/auth/tour-guide-applications/${W}`);if(se.ok){const ne=await se.json();s(ne),P(ne.feedback||""),a(!0)}else Ae.error("Không thể tải chi tiết đơn đăng ký")}catch(se){console.error("Error loading application detail:",se),Ae.error("Không thể tải chi tiết đơn đăng ký")}},F=async()=>{if(i){if(i.status!=="pending_review"){Ae.error("Chỉ có thể cập nhật đơn ở trạng thái chờ xem xét");return}try{u(!0);const W=await $o(`${Ge()}/api/auth/tour-guide-applications/${i.id}/review`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:T,feedback:N})});if(W.ok)Ae.success("Đánh giá đơn đăng ký thành công"),a(!1),s(null),q();else{const se=await W.text();Ae.error(se||"Không thể đánh giá đơn đăng ký")}}catch(W){console.error("Error reviewing application:",W),Ae.error("Không thể đánh giá đơn đăng ký")}finally{u(!1)}}},K=()=>{y(1),q()},ee=W=>{p(W),y(1),q()},Y=W=>{y(W),q()};S.useEffect(()=>{q()},[x,f]);const U=W=>new Date(W).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),R=()=>{var W,se;if(!i)return null;try{const ne=JSON.parse(i.applicationData);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Họ và tên"}),l.jsx("p",{className:"text-sm",children:ne.fullName})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Email"}),l.jsx("p",{className:"text-sm",children:ne.email})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Số điện thoại"}),l.jsx("p",{className:"text-sm",children:ne.phone})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Ngày sinh"}),l.jsx("p",{className:"text-sm",children:ne.birthDate})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"CCCD/CMND"}),l.jsx("p",{className:"text-sm",children:ne.idNumber})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Địa chỉ"}),l.jsx("p",{className:"text-sm",children:ne.address})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ne.avatar&&l.jsx("div",{children:l.jsx(X5,{files:[ne.avatar],title:"Ảnh đại diện"})}),ne.idCard&&l.jsx("div",{children:l.jsx(X5,{files:[ne.idCard],title:"Ảnh CCCD/CMND"})})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Kinh nghiệm"}),l.jsx("p",{className:"text-sm whitespace-pre-wrap",children:ne.experience})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Ngôn ngữ"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(W=ne.languages)==null?void 0:W.map((te,H)=>l.jsx(ct,{variant:"secondary",children:te},H))})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Chuyên môn"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(se=ne.specializations)==null?void 0:se.map((te,H)=>l.jsx(ct,{variant:"secondary",children:te},H))})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-600",children:"Giới thiệu bản thân"}),l.jsx("p",{className:"text-sm whitespace-pre-wrap",children:ne.introduction})]})]})}catch{return l.jsx("p",{className:"text-sm text-gray-500",children:"Không thể hiển thị dữ liệu"})}},z=()=>{if(!(i!=null&&i.documents))return null;try{const W=JSON.parse(i.documents);return!Array.isArray(W)||W.length===0?null:l.jsx(X5,{files:W,title:"Tài liệu đính kèm"})}catch{return null}};return l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý đơn đăng ký hướng dẫn viên"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Quản lý và đánh giá các đơn đăng ký trở thành hướng dẫn viên"})]})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(HR,{className:"w-5 h-5"}),"Bộ lọc"]})}),l.jsx(nt,{children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(Se,{htmlFor:"search",children:"Tìm kiếm"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(We,{id:"search",placeholder:"Tìm theo tên hoặc email...",value:d,onChange:W=>h(W.target.value),onKeyPress:W=>W.key==="Enter"&&K()}),l.jsx(Ce,{onClick:K,variant:"outline",children:l.jsx(as,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"w-full md:w-48",children:[l.jsx(Se,{htmlFor:"status",children:"Trạng thái"}),l.jsxs(Cn,{value:f,onValueChange:ee,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"pending_review",children:"Chờ xem xét"}),l.jsx(ze,{value:"approved",children:"Đã phê duyệt"}),l.jsx(ze,{value:"rejected",children:"Bị từ chối"}),l.jsx(ze,{value:"allow_edit",children:"Cho phép chỉnh sửa"})]})]})]})]})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{children:["Danh sách đơn đăng ký (",C,")"]})}),l.jsx(nt,{children:n?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx(C_,{size:"lg"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Người đăng ký"}),l.jsx(Ot,{children:"Liên hệ"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Ngày tạo"}),l.jsx(Ot,{children:"Thao tác"})]})}),l.jsx(Xu,{children:t.map(W=>{var se,ne;return l.jsxs(ur,{children:[l.jsx(wt,{children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fo,{className:"w-4 h-4 text-gray-500"}),l.jsx("div",{children:l.jsxs("p",{className:"font-medium",children:[W.userFirstName," ",W.userLastName]})})]})}),l.jsx(wt,{children:l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(WR,{className:"w-3 h-3 text-gray-500"}),l.jsx("span",{className:"text-sm",children:W.userEmail})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qC,{className:"w-3 h-3 text-gray-500"}),l.jsx("span",{className:"text-sm",children:W.userPhone})]})]})}),l.jsx(wt,{children:l.jsx(ct,{className:((se=O[W.status])==null?void 0:se.color)||"bg-gray-100 text-gray-800",children:((ne=O[W.status])==null?void 0:ne.label)||W.status})}),l.jsx(wt,{children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(er,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-sm",children:U(W.createdAt)})]})}),l.jsx(wt,{children:l.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>D(W.id),children:[l.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Xem"]})})]},W.id)})})]})}),b>1&&l.jsx("div",{className:"flex justify-center mt-6",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>Y(x-1),disabled:x===1,children:"Trước"}),Array.from({length:b},(W,se)=>se+1).map(W=>l.jsx(Ce,{variant:W===x?"default":"outline",size:"sm",onClick:()=>Y(W),children:W},W)),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>Y(x+1),disabled:x===b,children:"Sau"})]})})]})})]}),l.jsx(Qr,{open:o,onOpenChange:a,children:l.jsxs(Br,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Đánh giá đơn đăng ký"}),l.jsx(Ma,{children:"Xem xét và đánh giá đơn đăng ký hướng dẫn viên"})]}),i&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[l.jsx(i_,{className:"w-5 h-5"}),"Thông tin đơn đăng ký"]}),R()]}),z(),l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Đánh giá"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"review-status",children:"Quyết định"}),l.jsxs(Cn,{value:T,onValueChange:E,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn quyết định"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"approved",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(iS,{className:"w-4 h-4 text-green-600"}),"Phê duyệt"]})}),l.jsx(ze,{value:"rejected",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vae,{className:"w-4 h-4 text-red-600"}),"Từ chối"]})}),l.jsx(ze,{value:"allow_edit",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(dh,{className:"w-4 h-4 text-blue-600"}),"Cho phép chỉnh sửa"]})})]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"review-feedback",children:"Phản hồi (tùy chọn)"}),l.jsx(is,{id:"review-feedback",placeholder:"Nhập phản hồi cho ứng viên...",value:N,onChange:W=>P(W.target.value),rows:4})]}),i.status==="pending_review"?l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>a(!1),children:"Hủy"}),l.jsxs(Ce,{onClick:F,disabled:c,children:[c?l.jsx(C_,{size:"sm",className:"mr-2"}):null,"Gửi đánh giá"]})]}):l.jsx("div",{className:"text-sm text-gray-500",children:"Đơn không ở trạng thái chờ xem xét, không thể cập nhật."})]})]})]})]})})]})})},iJe=()=>{const[n,e]=re.useState(!0),[t,r]=re.useState([]),[i,s]=re.useState(""),[o,a]=re.useState("all"),[c,u]=re.useState(1),[d,h]=re.useState(1),[f,p]=re.useState(0),x=10,[y,b]=re.useState(!1),[_,C]=re.useState(null),[k,T]=re.useState(!1),[E,N]=re.useState(null),[P,M]=re.useState({email:"",password:"",firstName:"",lastName:"",phoneNumber:"",role:"Customer",isActive:!0}),O=async()=>{try{e(!0);const R=new URLSearchParams({page:String(c),pageSize:String(x)});i&&R.append("search",i),o!=="all"&&R.append("role",o);const z=await $o(`${Ge()}/api/auth/users?${R.toString()}`);if(z.ok){const W=await z.json();r(W.items||[]),h(W.totalPages||1),p(W.totalCount||0)}}finally{e(!1)}},q=()=>{u(1),O()},D=R=>{a(R),u(1),O()},F=R=>{u(R),O()};re.useEffect(()=>{O()},[c,o]);const K=async R=>{const z=await $o(`${Ge()}/api/auth/users/${R}`);if(z.ok){const W=await z.json();C(W),b(!0)}},ee=async(R,z)=>{if(R.role==="Admin"){Ae.error("Không thể thay đổi trạng thái quản trị");return}r(W=>W.map(se=>se.id===R.id?{...se,isActive:z}:se));try{const W=await $o(`${Ge()}/api/auth/users/${R.id}/active`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:z})});W.ok?(Ae.success("Cập nhật trạng thái thành công"),(_==null?void 0:_.id)===R.id&&C({..._,isActive:z})):(r(se=>se.map(ne=>ne.id===R.id?{...ne,isActive:!z}:ne)),Ae.error(await W.text()))}catch(W){r(se=>se.map(ne=>ne.id===R.id?{...ne,isActive:!z}:ne)),Ae.error((W==null?void 0:W.message)||"Lỗi cập nhật")}},Y=async()=>{try{const R=await $o(`${Ge()}/api/auth/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!R.ok){const z=await R.text();Ae.error(z||"Tạo người dùng thất bại");return}Ae.success("Tạo người dùng thành công"),T(!1),M({email:"",password:"",firstName:"",lastName:"",phoneNumber:"",role:"Customer",isActive:!0}),O()}catch(R){Ae.error((R==null?void 0:R.message)||"Tạo người dùng thất bại")}},U=async()=>{if(E){if(E.role==="Admin"){Ae.error("Không thể chỉnh sửa tài khoản quản trị");return}try{const R={firstName:E.firstName,lastName:E.lastName,phoneNumber:E.phoneNumber,avatar:E.avatar,role:E.role},z=await $o(`${Ge()}/api/auth/users/${E.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!z.ok){const W=await z.text();Ae.error(W||"Cập nhật thất bại");return}Ae.success("Cập nhật người dùng thành công"),N(null),O(),(_==null?void 0:_.id)===E.id&&C({..._,...R})}catch(R){Ae.error((R==null?void 0:R.message)||"Cập nhật thất bại")}}};return l.jsxs(Ns,{children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý người dùng"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Xem và tìm kiếm người dùng hệ thống"})]}),l.jsxs(Ce,{onClick:()=>T(!0),children:[l.jsx(Il,{className:"w-4 h-4 mr-2"})," Thêm người dùng"]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Bộ lọc"})}),l.jsx(nt,{children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(Se,{children:"Tìm kiếm"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(We,{placeholder:"Tìm theo tên, email, sđt...",value:i,onChange:R=>s(R.target.value),onKeyPress:R=>R.key==="Enter"&&q()}),l.jsx(Ce,{onClick:q,variant:"outline",children:l.jsx(as,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"w-full md:w-56",children:[l.jsx(Se,{children:"Vai trò"}),l.jsxs(Cn,{value:o,onValueChange:D,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn vai trò"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"Customer",children:"Khách hàng"}),l.jsx(ze,{value:"TourGuide",children:"Hướng dẫn viên"}),l.jsx(ze,{value:"Admin",children:"Quản trị"})]})]})]})]})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{children:["Danh sách người dùng (",f,")"]})}),l.jsx(nt,{children:n?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx(C_,{size:"lg"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Email"}),l.jsx(Ot,{children:"Tên"}),l.jsx(Ot,{children:"Vai trò"}),l.jsx(Ot,{children:"Số điện thoại"}),l.jsx(Ot,{children:"Đăng nhập cuối"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Hành động"})]})}),l.jsxs(Xu,{children:[t.map(R=>l.jsxs(ur,{children:[l.jsx(wt,{children:R.email}),l.jsx(wt,{children:`${R.firstName} ${R.lastName}`.trim()}),l.jsx(wt,{children:R.role}),l.jsx(wt,{children:R.phoneNumber||"-"}),l.jsx(wt,{children:R.lastLoginAt?new Date(R.lastLoginAt).toLocaleString("vi-VN"):"-"}),l.jsx(wt,{children:l.jsx(Ml,{checked:!!R.isActive,onCheckedChange:z=>ee(R,!!z),disabled:R.role==="Admin"})}),l.jsx(wt,{children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ce,{variant:"ghost",size:"icon",onClick:()=>K(R.id),title:"Xem",children:l.jsx(Ts,{className:"w-4 h-4"})}),l.jsx(Ce,{variant:"ghost",size:"icon",onClick:()=>N(R),title:"Sửa",disabled:R.role==="Admin",children:l.jsx(qae,{className:"w-4 h-4"})})]})})]},R.id)),t.length===0&&l.jsx(ur,{children:l.jsx(wt,{colSpan:5,className:"text-center text-gray-500",children:"Không có dữ liệu"})})]})]})}),d>1&&l.jsx("div",{className:"flex justify-center mt-6",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>F(c-1),disabled:c===1,children:"Trước"}),Array.from({length:d},(R,z)=>z+1).map(R=>l.jsx(Ce,{variant:R===c?"default":"outline",size:"sm",onClick:()=>F(R),children:R},R)),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>F(c+1),disabled:c===d,children:"Sau"})]})})]})})]})]}),l.jsx(Qr,{open:y,onOpenChange:b,children:l.jsxs(Br,{className:"max-w-3xl",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Chi tiết người dùng"})}),_&&l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{children:"Email"}),l.jsx("div",{className:"text-sm",children:_.email})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Tên"}),l.jsxs("div",{className:"text-sm",children:[_.firstName," ",_.lastName]})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Vai trò"}),l.jsx("div",{className:"text-sm",children:_.role})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Kích hoạt"}),l.jsx("div",{className:"mt-1",children:l.jsx(Ml,{checked:!!_.isActive,onCheckedChange:R=>ee(_,!!R),disabled:_.role==="Admin"})})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx(Se,{children:"Địa chỉ"}),l.jsx("div",{className:"text-sm",children:_.address||"-"})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx(Se,{children:"Giới thiệu"}),l.jsx("div",{className:"text-sm prose",dangerouslySetInnerHTML:{__html:_.bio||"-"}})]})]})]})}),l.jsx(Qr,{open:k,onOpenChange:T,children:l.jsxs(Br,{className:"max-w-lg",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Tạo người dùng"})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(Se,{children:"Email"}),l.jsx(We,{value:P.email,onChange:R=>M({...P,email:R.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Mật khẩu"}),l.jsx(We,{type:"password",value:P.password,onChange:R=>M({...P,password:R.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Họ"}),l.jsx(We,{value:P.firstName,onChange:R=>M({...P,firstName:R.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Tên"}),l.jsx(We,{value:P.lastName,onChange:R=>M({...P,lastName:R.target.value})})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx(Se,{children:"Số điện thoại"}),l.jsx(We,{value:P.phoneNumber,onChange:R=>M({...P,phoneNumber:R.target.value})})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Se,{children:"Kích hoạt"}),l.jsx(Ml,{checked:P.isActive,onCheckedChange:R=>M({...P,isActive:!!R})})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>T(!1),children:"Hủy"}),l.jsx(Ce,{onClick:Y,children:"Tạo"})]})]})]})}),l.jsx(Qr,{open:!!E,onOpenChange:R=>!R&&N(null),children:l.jsxs(Br,{className:"max-w-lg",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Cập nhật người dùng"})}),E&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(Se,{children:"Họ"}),l.jsx(We,{value:E.firstName||"",onChange:R=>N({...E,firstName:R.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Tên"}),l.jsx(We,{value:E.lastName||"",onChange:R=>N({...E,lastName:R.target.value})})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx(Se,{children:"Số điện thoại"}),l.jsx(We,{value:E.phoneNumber||"",onChange:R=>N({...E,phoneNumber:R.target.value})})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>N(null),children:"Hủy"}),l.jsx(Ce,{onClick:U,children:"Lưu"})]})]})]})})]})};function sJe(){const[n,e]=re.useState([]),[t,r]=re.useState(!0),[i,s]=re.useState(""),[o,a]=re.useState(1),[c,u]=re.useState(1),[d,h]=re.useState(0),f=10,[p,x]=re.useState(!1),[y,b]=re.useState(null),[_,C]=re.useState([]),[k,T]=re.useState(""),E=async()=>{try{r(!0);const F=new URLSearchParams({page:String(o),pageSize:String(f)});i&&F.append("search",i);const K=await $o(`${Ge()}/api/auth/guides?${F.toString()}`);if(K.ok){const ee=await K.json();e(ee.items||[]),u(ee.totalPages||1),h(ee.totalCount||0)}}finally{r(!1)}},N=()=>{a(1),E()},P=F=>{a(F),E()};re.useEffect(()=>{E()},[o]);const M=async(F="")=>{const K=new URLSearchParams({page:"1",pageSize:"50",role:"Customer"});F&&K.set("search",F);const ee=await $o(`${Ge()}/api/auth/users?${K.toString()}`);if(ee.ok){const Y=await ee.json();C(Y.items||[])}},O=async()=>{if(!k){Ae.error("Chọn người dùng");return}const F={role:"TourGuide"},K=await $o(`${Ge()}/api/auth/users/${k}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});K.ok?(Ae.success("Đã tạo hướng dẫn viên"),x(!1),T(""),E()):Ae.error(await K.text())},q=async F=>{const K=await $o(`${Ge()}/api/auth/guides/${F}/revoke`,{method:"POST"});K.ok?(Ae.success("Đã thu hồi quyền hướng dẫn viên"),E()):Ae.error(await K.text())},D=async()=>{if(!y)return;const F={firstName:y.firstName,lastName:y.lastName,phoneNumber:y.phoneNumber},K=await $o(`${Ge()}/api/auth/users/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});K.ok?(Ae.success("Cập nhật thành công"),b(null),E()):Ae.error(await K.text())};return l.jsxs(Ns,{children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý hướng dẫn viên"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Danh sách hướng dẫn viên đã được phê duyệt"})]}),l.jsxs(Ce,{onClick:()=>{x(!0),M()},children:[l.jsx(Il,{className:"w-4 h-4 mr-2"})," Thêm hướng dẫn viên"]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Bộ lọc"})}),l.jsx(nt,{children:l.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx(Se,{children:"Tìm kiếm"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(We,{placeholder:"Tìm theo tên, email, sđt...",value:i,onChange:F=>s(F.target.value),onKeyPress:F=>F.key==="Enter"&&N()}),l.jsx(Ce,{onClick:N,variant:"outline",children:l.jsx(as,{className:"w-4 h-4"})})]})]})})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{children:["Danh sách hướng dẫn viên (",d,")"]})}),l.jsx(nt,{children:t?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx(C_,{size:"lg"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Email"}),l.jsx(Ot,{children:"Tên"}),l.jsx(Ot,{children:"Số điện thoại"}),l.jsx(Ot,{children:"Ngày tham gia"}),l.jsx(Ot,{children:"Hành động"})]})}),l.jsxs(Xu,{children:[n.map(F=>l.jsxs(ur,{children:[l.jsx(wt,{children:F.email}),l.jsx(wt,{children:`${F.firstName} ${F.lastName}`.trim()}),l.jsx(wt,{children:F.phoneNumber||"-"}),l.jsx(wt,{children:F.createdAt?new Date(F.createdAt).toLocaleDateString("vi-VN"):"-"}),l.jsx(wt,{children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ce,{variant:"ghost",size:"icon",title:"Sửa",onClick:()=>b(F),children:l.jsx(qae,{className:"w-4 h-4"})}),l.jsx(Ce,{variant:"ghost",size:"icon",title:"Thu hồi",onClick:()=>q(F.id),children:l.jsx(ECe,{className:"w-4 h-4"})})]})})]},F.id)),n.length===0&&l.jsx(ur,{children:l.jsx(wt,{colSpan:4,className:"text-center text-gray-500",children:"Không có dữ liệu"})})]})]})}),c>1&&l.jsx("div",{className:"flex justify-center mt-6",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>P(o-1),disabled:o===1,children:"Trước"}),Array.from({length:c},(F,K)=>K+1).map(F=>l.jsx(Ce,{variant:F===o?"default":"outline",size:"sm",onClick:()=>P(F),children:F},F)),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>P(o+1),disabled:o===c,children:"Sau"})]})})]})})]})]}),l.jsx(Qr,{open:p,onOpenChange:x,children:l.jsxs(Br,{className:"max-w-lg",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Thêm hướng dẫn viên"})}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Se,{children:"Chọn người dùng"}),l.jsx(fh,{value:k,onValueChange:F=>T(F),placeholder:"Chọn người dùng",searchPlaceholder:"Tìm người dùng...",options:_.map(F=>({value:F.id,label:`${F.email} - ${F.firstName} ${F.lastName}`})),className:"w-full"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>x(!1),children:"Hủy"}),l.jsx(Ce,{onClick:O,children:"Thêm"})]})]})]})}),l.jsx(Qr,{open:!!y,onOpenChange:F=>!F&&b(null),children:l.jsxs(Br,{className:"max-w-lg",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Chỉnh sửa hướng dẫn viên"})}),y&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx(Se,{children:"Họ"}),l.jsx(We,{value:y.firstName||"",onChange:F=>b({...y,firstName:F.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{children:"Tên"}),l.jsx(We,{value:y.lastName||"",onChange:F=>b({...y,lastName:F.target.value})})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx(Se,{children:"Số điện thoại"}),l.jsx(We,{value:y.phoneNumber||"",onChange:F=>b({...y,phoneNumber:F.target.value})})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>b(null),children:"Hủy"}),l.jsx(Ce,{onClick:D,children:"Lưu"})]})]})]})})]})}var nee=1,oJe=.9,aJe=.8,lJe=.17,J5=.1,Q5=.999,cJe=.9999,uJe=.99,dJe=/[\\\/_+.#"@\[\(\{&]/,hJe=/[\\\/_+.#"@\[\(\{&]/g,fJe=/[\s-]/,I0e=/[\s-]/g;function nV(n,e,t,r,i,s,o){if(s===e.length)return i===n.length?nee:uJe;var a=`${i},${s}`;if(o[a]!==void 0)return o[a];for(var c=r.charAt(s),u=t.indexOf(c,i),d=0,h,f,p,x;u>=0;)h=nV(n,e,t,r,u+1,s+1,o),h>d&&(u===i?h*=nee:dJe.test(n.charAt(u-1))?(h*=aJe,p=n.slice(i,u-1).match(hJe),p&&i>0&&(h*=Math.pow(Q5,p.length))):fJe.test(n.charAt(u-1))?(h*=oJe,x=n.slice(i,u-1).match(I0e),x&&i>0&&(h*=Math.pow(Q5,x.length))):(h*=lJe,i>0&&(h*=Math.pow(Q5,u-i))),n.charAt(u)!==e.charAt(s)&&(h*=cJe)),(h<J5&&t.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&t.charAt(u-1)!==r.charAt(s))&&(f=nV(n,e,t,r,u+1,s+2,o),f*J5>h&&(h=f*J5)),h>d&&(d=h),u=t.indexOf(c,u+1);return o[a]=d,d}function ree(n){return n.toLowerCase().replace(I0e," ")}function mJe(n,e,t){return n=t&&t.length>0?`${n+" "+t.join(" ")}`:n,nV(n,e,ree(n),ree(e),0,0,{})}var kk='[cmdk-group=""]',Z5='[cmdk-group-items=""]',pJe='[cmdk-group-heading=""]',O0e='[cmdk-item=""]',iee=`${O0e}:not([aria-disabled="true"])`,rV="cmdk-item-select",Lb="data-value",gJe=(n,e,t)=>mJe(n,e,t),R0e=S.createContext(void 0),HA=()=>S.useContext(R0e),M0e=S.createContext(void 0),uH=()=>S.useContext(M0e),D0e=S.createContext(void 0),L0e=S.forwardRef((n,e)=>{let t=Fb(()=>{var te,H;return{search:"",value:(H=(te=n.value)!=null?te:n.defaultValue)!=null?H:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Fb(()=>new Set),i=Fb(()=>new Map),s=Fb(()=>new Map),o=Fb(()=>new Set),a=F0e(n),{label:c,children:u,value:d,onValueChange:h,filter:f,shouldFilter:p,loop:x,disablePointerSelection:y=!1,vimBindings:b=!0,..._}=n,C=Ys(),k=Ys(),T=Ys(),E=S.useRef(null),N=TJe();rx(()=>{if(d!==void 0){let te=d.trim();t.current.value=te,P.emit()}},[d]),rx(()=>{N(6,K)},[]);let P=S.useMemo(()=>({subscribe:te=>(o.current.add(te),()=>o.current.delete(te)),snapshot:()=>t.current,setState:(te,H,ce)=>{var pe,oe,ve,be;if(!Object.is(t.current[te],H)){if(t.current[te]=H,te==="search")F(),q(),N(1,D);else if(te==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let fe=document.getElementById(T);fe?fe.focus():(pe=document.getElementById(C))==null||pe.focus()}if(N(7,()=>{var fe;t.current.selectedItemId=(fe=ee())==null?void 0:fe.id,P.emit()}),ce||N(5,K),((oe=a.current)==null?void 0:oe.value)!==void 0){let fe=H??"";(be=(ve=a.current).onValueChange)==null||be.call(ve,fe);return}}P.emit()}},emit:()=>{o.current.forEach(te=>te())}}),[]),M=S.useMemo(()=>({value:(te,H,ce)=>{var pe;H!==((pe=s.current.get(te))==null?void 0:pe.value)&&(s.current.set(te,{value:H,keywords:ce}),t.current.filtered.items.set(te,O(H,ce)),N(2,()=>{q(),P.emit()}))},item:(te,H)=>(r.current.add(te),H&&(i.current.has(H)?i.current.get(H).add(te):i.current.set(H,new Set([te]))),N(3,()=>{F(),q(),t.current.value||D(),P.emit()}),()=>{s.current.delete(te),r.current.delete(te),t.current.filtered.items.delete(te);let ce=ee();N(4,()=>{F(),(ce==null?void 0:ce.getAttribute("id"))===te&&D(),P.emit()})}),group:te=>(i.current.has(te)||i.current.set(te,new Set),()=>{s.current.delete(te),i.current.delete(te)}),filter:()=>a.current.shouldFilter,label:c||n["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:C,inputId:T,labelId:k,listInnerRef:E}),[]);function O(te,H){var ce,pe;let oe=(pe=(ce=a.current)==null?void 0:ce.filter)!=null?pe:gJe;return te?oe(te,t.current.search,H):0}function q(){if(!t.current.search||a.current.shouldFilter===!1)return;let te=t.current.filtered.items,H=[];t.current.filtered.groups.forEach(pe=>{let oe=i.current.get(pe),ve=0;oe.forEach(be=>{let fe=te.get(be);ve=Math.max(fe,ve)}),H.push([pe,ve])});let ce=E.current;Y().sort((pe,oe)=>{var ve,be;let fe=pe.getAttribute("id"),we=oe.getAttribute("id");return((ve=te.get(we))!=null?ve:0)-((be=te.get(fe))!=null?be:0)}).forEach(pe=>{let oe=pe.closest(Z5);oe?oe.appendChild(pe.parentElement===oe?pe:pe.closest(`${Z5} > *`)):ce.appendChild(pe.parentElement===ce?pe:pe.closest(`${Z5} > *`))}),H.sort((pe,oe)=>oe[1]-pe[1]).forEach(pe=>{var oe;let ve=(oe=E.current)==null?void 0:oe.querySelector(`${kk}[${Lb}="${encodeURIComponent(pe[0])}"]`);ve==null||ve.parentElement.appendChild(ve)})}function D(){let te=Y().find(ce=>ce.getAttribute("aria-disabled")!=="true"),H=te==null?void 0:te.getAttribute(Lb);P.setState("value",H||void 0)}function F(){var te,H,ce,pe;if(!t.current.search||a.current.shouldFilter===!1){t.current.filtered.count=r.current.size;return}t.current.filtered.groups=new Set;let oe=0;for(let ve of r.current){let be=(H=(te=s.current.get(ve))==null?void 0:te.value)!=null?H:"",fe=(pe=(ce=s.current.get(ve))==null?void 0:ce.keywords)!=null?pe:[],we=O(be,fe);t.current.filtered.items.set(ve,we),we>0&&oe++}for(let[ve,be]of i.current)for(let fe of be)if(t.current.filtered.items.get(fe)>0){t.current.filtered.groups.add(ve);break}t.current.filtered.count=oe}function K(){var te,H,ce;let pe=ee();pe&&(((te=pe.parentElement)==null?void 0:te.firstChild)===pe&&((ce=(H=pe.closest(kk))==null?void 0:H.querySelector(pJe))==null||ce.scrollIntoView({block:"nearest"})),pe.scrollIntoView({block:"nearest"}))}function ee(){var te;return(te=E.current)==null?void 0:te.querySelector(`${O0e}[aria-selected="true"]`)}function Y(){var te;return Array.from(((te=E.current)==null?void 0:te.querySelectorAll(iee))||[])}function U(te){let H=Y()[te];H&&P.setState("value",H.getAttribute(Lb))}function R(te){var H;let ce=ee(),pe=Y(),oe=pe.findIndex(be=>be===ce),ve=pe[oe+te];(H=a.current)!=null&&H.loop&&(ve=oe+te<0?pe[pe.length-1]:oe+te===pe.length?pe[0]:pe[oe+te]),ve&&P.setState("value",ve.getAttribute(Lb))}function z(te){let H=ee(),ce=H==null?void 0:H.closest(kk),pe;for(;ce&&!pe;)ce=te>0?CJe(ce,kk):EJe(ce,kk),pe=ce==null?void 0:ce.querySelector(iee);pe?P.setState("value",pe.getAttribute(Lb)):R(te)}let W=()=>U(Y().length-1),se=te=>{te.preventDefault(),te.metaKey?W():te.altKey?z(1):R(1)},ne=te=>{te.preventDefault(),te.metaKey?U(0):te.altKey?z(-1):R(-1)};return S.createElement(kt.div,{ref:e,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:te=>{var H;(H=_.onKeyDown)==null||H.call(_,te);let ce=te.nativeEvent.isComposing||te.keyCode===229;if(!(te.defaultPrevented||ce))switch(te.key){case"n":case"j":{b&&te.ctrlKey&&se(te);break}case"ArrowDown":{se(te);break}case"p":case"k":{b&&te.ctrlKey&&ne(te);break}case"ArrowUp":{ne(te);break}case"Home":{te.preventDefault(),U(0);break}case"End":{te.preventDefault(),W();break}case"Enter":{te.preventDefault();let pe=ee();if(pe){let oe=new Event(rV);pe.dispatchEvent(oe)}}}}},S.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:NJe},c),a3(n,te=>S.createElement(M0e.Provider,{value:P},S.createElement(R0e.Provider,{value:M},te))))}),vJe=S.forwardRef((n,e)=>{var t,r;let i=Ys(),s=S.useRef(null),o=S.useContext(D0e),a=HA(),c=F0e(n),u=(r=(t=c.current)==null?void 0:t.forceMount)!=null?r:o==null?void 0:o.forceMount;rx(()=>{if(!u)return a.item(i,o==null?void 0:o.id)},[u]);let d=B0e(i,s,[n.value,n.children,s],n.keywords),h=uH(),f=qg(N=>N.value&&N.value===d.current),p=qg(N=>u||a.filter()===!1?!0:N.search?N.filtered.items.get(i)>0:!0);S.useEffect(()=>{let N=s.current;if(!(!N||n.disabled))return N.addEventListener(rV,x),()=>N.removeEventListener(rV,x)},[p,n.onSelect,n.disabled]);function x(){var N,P;y(),(P=(N=c.current).onSelect)==null||P.call(N,d.current)}function y(){h.setState("value",d.current,!0)}if(!p)return null;let{disabled:b,value:_,onSelect:C,forceMount:k,keywords:T,...E}=n;return S.createElement(kt.div,{ref:am(s,e),...E,id:i,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!f,"data-disabled":!!b,"data-selected":!!f,onPointerMove:b||a.getDisablePointerSelection()?void 0:y,onClick:b?void 0:x},n.children)}),yJe=S.forwardRef((n,e)=>{let{heading:t,children:r,forceMount:i,...s}=n,o=Ys(),a=S.useRef(null),c=S.useRef(null),u=Ys(),d=HA(),h=qg(p=>i||d.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);rx(()=>d.group(o),[]),B0e(o,a,[n.value,n.heading,c]);let f=S.useMemo(()=>({id:o,forceMount:i}),[i]);return S.createElement(kt.div,{ref:am(a,e),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&S.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),a3(n,p=>S.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},S.createElement(D0e.Provider,{value:f},p))))}),xJe=S.forwardRef((n,e)=>{let{alwaysRender:t,...r}=n,i=S.useRef(null),s=qg(o=>!o.search);return!t&&!s?null:S.createElement(kt.div,{ref:am(i,e),...r,"cmdk-separator":"",role:"separator"})}),bJe=S.forwardRef((n,e)=>{let{onValueChange:t,...r}=n,i=n.value!=null,s=uH(),o=qg(u=>u.search),a=qg(u=>u.selectedItemId),c=HA();return S.useEffect(()=>{n.value!=null&&s.setState("search",n.value)},[n.value]),S.createElement(kt.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":a,id:c.inputId,type:"text",value:i?n.value:o,onChange:u=>{i||s.setState("search",u.target.value),t==null||t(u.target.value)}})}),wJe=S.forwardRef((n,e)=>{let{children:t,label:r="Suggestions",...i}=n,s=S.useRef(null),o=S.useRef(null),a=qg(u=>u.selectedItemId),c=HA();return S.useEffect(()=>{if(o.current&&s.current){let u=o.current,d=s.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let p=u.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return f.observe(u),()=>{cancelAnimationFrame(h),f.unobserve(u)}}},[]),S.createElement(kt.div,{ref:am(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:c.listId},a3(n,u=>S.createElement("div",{ref:am(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),_Je=S.forwardRef((n,e)=>{let{open:t,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...a}=n;return S.createElement(VU,{open:t,onOpenChange:r},S.createElement(UU,{container:o},S.createElement(_M,{"cmdk-overlay":"",className:i}),S.createElement(SM,{"aria-label":n.label,"cmdk-dialog":"",className:s},S.createElement(L0e,{ref:e,...a}))))}),SJe=S.forwardRef((n,e)=>qg(t=>t.filtered.count===0)?S.createElement(kt.div,{ref:e,...n,"cmdk-empty":"",role:"presentation"}):null),kJe=S.forwardRef((n,e)=>{let{progress:t,children:r,label:i="Loading...",...s}=n;return S.createElement(kt.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},a3(n,o=>S.createElement("div",{"aria-hidden":!0},o)))}),za=Object.assign(L0e,{List:wJe,Item:vJe,Input:bJe,Group:yJe,Separator:xJe,Dialog:_Je,Empty:SJe,Loading:kJe});function CJe(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function EJe(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function F0e(n){let e=S.useRef(n);return rx(()=>{e.current=n}),e}var rx=typeof window>"u"?S.useEffect:S.useLayoutEffect;function Fb(n){let e=S.useRef();return e.current===void 0&&(e.current=n()),e}function qg(n){let e=uH(),t=()=>n(e.snapshot());return S.useSyncExternalStore(e.subscribe,t,t)}function B0e(n,e,t,r=[]){let i=S.useRef(),s=HA();return rx(()=>{var o;let a=(()=>{var u;for(let d of t){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():i.current}})(),c=r.map(u=>u.trim());s.value(n,a,c),(o=e.current)==null||o.setAttribute(Lb,a),i.current=a}),i}var TJe=()=>{let[n,e]=S.useState(),t=Fb(()=>new Map);return rx(()=>{t.current.forEach(r=>r()),t.current=new Map},[n]),(r,i)=>{t.current.set(r,i),e({})}};function AJe(n){let e=n.type;return typeof e=="function"?e(n.props):"render"in e?e.render(n.props):n}function a3({asChild:n,children:e},t){return n&&S.isValidElement(e)?S.cloneElement(AJe(e),{ref:e.ref},t(e.props.children)):t(e)}var NJe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const dH=S.forwardRef(({className:n,...e},t)=>l.jsx(za,{ref:t,className:Qe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...e}));dH.displayName=za.displayName;const hH=S.forwardRef(({className:n,...e},t)=>l.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[l.jsx(as,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),l.jsx(za.Input,{ref:t,className:Qe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...e})]}));hH.displayName=za.Input.displayName;const fH=S.forwardRef(({className:n,...e},t)=>l.jsx(za.List,{ref:t,className:Qe("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...e}));fH.displayName=za.List.displayName;const mH=S.forwardRef((n,e)=>l.jsx(za.Empty,{ref:e,className:"py-6 text-center text-sm",...n}));mH.displayName=za.Empty.displayName;const pH=S.forwardRef(({className:n,...e},t)=>l.jsx(za.Group,{ref:t,className:Qe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...e}));pH.displayName=za.Group.displayName;const jJe=S.forwardRef(({className:n,...e},t)=>l.jsx(za.Separator,{ref:t,className:Qe("-mx-1 h-px bg-border",n),...e}));jJe.displayName=za.Separator.displayName;const vO=S.forwardRef(({className:n,...e},t)=>l.jsx(za.Item,{ref:t,className:Qe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",n),...e}));vO.displayName=za.Item.displayName;function PJe({options:n,value:e,onValueChange:t,onSearch:r,onLoadMore:i,placeholder:s="Select option...",emptyMessage:o="No options found.",loading:a=!1,hasMore:c=!1,className:u,disabled:d=!1,searchPlaceholder:h="Search..."}){const[f,p]=S.useState(!1),[x,y]=S.useState("");S.useEffect(()=>{const k=setTimeout(()=>{r&&x!==""&&r(x)},300);return()=>clearTimeout(k)},[x,r]);const b=S.useCallback(k=>{y(k)},[]),_=S.useCallback(()=>{i&&c&&!a&&i()},[i,c,a]),C=n.find(k=>k.value===e);return l.jsxs(f_,{open:f,onOpenChange:p,children:[l.jsx(m_,{asChild:!0,children:l.jsxs(Ce,{variant:"outline",role:"combobox","aria-expanded":f,className:Qe("w-full justify-between",!C&&"text-muted-foreground",u),disabled:d,children:[C?C.label:s,l.jsx(yCe,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),l.jsx(K0,{className:"w-full p-0",align:"start",children:l.jsxs(dH,{shouldFilter:!1,children:[l.jsx(hH,{placeholder:h,value:x,onValueChange:b}),l.jsxs(fH,{children:[l.jsx(mH,{children:a?"Loading...":o}),l.jsxs(pH,{children:[n.map(k=>l.jsxs(vO,{value:k.value,onSelect:T=>{t==null||t(T===e?"":T),p(!1)},children:[l.jsx(Fr,{className:Qe("mr-2 h-4 w-4",e===k.value?"opacity-100":"opacity-0")}),k.label]},k.value)),c&&l.jsx(vO,{onSelect:_,disabled:a,className:"justify-center",children:a?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),"Loading more..."]}):"Load more..."})]})]})]})})]})}function IJe(n,e=20){const[t,r]=S.useState([]),[i,s]=S.useState(!1),[o,a]=S.useState(!0),[c,u]=S.useState(1),[d,h]=S.useState(""),f=S.useCallback(async(b,_,C=!1)=>{try{s(!0);const k=await n({search:_,page:b,pageSize:e});r(C?T=>[...T,...k.data]:k.data),a(k.hasMore),u(b)}catch(k){console.error("Error loading data:",k)}finally{s(!1)}},[e]),p=S.useCallback(b=>{h(b),u(1),f(1,b,!1)},[]),x=S.useCallback(()=>{o&&!i&&f(c+1,d,!0)},[o,i,c,d]),y=S.useCallback(()=>{r([]),u(1),a(!0),h(""),f(1,void 0,!1)},[]);return S.useEffect(()=>{f(1,void 0,!1)},[]),{options:t,loading:i,hasMore:o,search:p,loadMore:x,reset:y}}var iV=["Enter"," "],OJe=["ArrowDown","PageUp","Home"],$0e=["ArrowUp","PageDown","End"],RJe=[...OJe,...$0e],MJe={ltr:[...iV,"ArrowRight"],rtl:[...iV,"ArrowLeft"]},DJe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},WA="Menu",[IE,LJe,FJe]=uA(WA),[yx,V0e]=_o(WA,[FJe,tv,xM]),l3=tv(),U0e=xM(),[BJe,xx]=yx(WA),[$Je,qA]=yx(WA),z0e=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=n,a=l3(e),[c,u]=S.useState(null),d=S.useRef(!1),h=Yo(s),f=pA(i);return S.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),l.jsx(pU,{...a,children:l.jsx(BJe,{scope:e,open:t,onOpenChange:h,content:c,onContentChange:u,children:l.jsx($Je,{scope:e,onClose:S.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};z0e.displayName=WA;var VJe="MenuAnchor",gH=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=l3(t);return l.jsx(mA,{...i,...r,ref:e})});gH.displayName=VJe;var vH="MenuPortal",[UJe,H0e]=yx(vH,{forceMount:void 0}),W0e=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=xx(vH,e);return l.jsx(UJe,{scope:e,forceMount:t,children:l.jsx(Da,{present:t||s.open,children:l.jsx(oS,{asChild:!0,container:i,children:r})})})};W0e.displayName=vH;var Ec="MenuContent",[zJe,yH]=yx(Ec),q0e=S.forwardRef((n,e)=>{const t=H0e(Ec,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=xx(Ec,n.__scopeMenu),o=qA(Ec,n.__scopeMenu);return l.jsx(IE.Provider,{scope:n.__scopeMenu,children:l.jsx(Da,{present:r||s.open,children:l.jsx(IE.Slot,{scope:n.__scopeMenu,children:o.modal?l.jsx(HJe,{...i,ref:e}):l.jsx(WJe,{...i,ref:e})})})})}),HJe=S.forwardRef((n,e)=>{const t=xx(Ec,n.__scopeMenu),r=S.useRef(null),i=an(e,r);return S.useEffect(()=>{const s=r.current;if(s)return dM(s)},[]),l.jsx(xH,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:st(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),WJe=S.forwardRef((n,e)=>{const t=xx(Ec,n.__scopeMenu);return l.jsx(xH,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),qJe=Rg("MenuContent.ScrollLock"),xH=S.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,disableOutsideScroll:x,...y}=n,b=xx(Ec,t),_=qA(Ec,t),C=l3(t),k=U0e(t),T=LJe(t),[E,N]=S.useState(null),P=S.useRef(null),M=an(e,P,b.onContentChange),O=S.useRef(0),q=S.useRef(""),D=S.useRef(0),F=S.useRef(null),K=S.useRef("right"),ee=S.useRef(0),Y=x?vA:S.Fragment,U=x?{as:qJe,allowPinchZoom:!0}:void 0,R=W=>{var ve,be;const se=q.current+W,ne=T().filter(fe=>!fe.disabled),te=document.activeElement,H=(ve=ne.find(fe=>fe.ref.current===te))==null?void 0:ve.textValue,ce=ne.map(fe=>fe.textValue),pe=iQe(ce,se,H),oe=(be=ne.find(fe=>fe.textValue===pe))==null?void 0:be.ref.current;(function fe(we){q.current=we,window.clearTimeout(O.current),we!==""&&(O.current=window.setTimeout(()=>fe(""),1e3))})(se),oe&&setTimeout(()=>oe.focus())};S.useEffect(()=>()=>window.clearTimeout(O.current),[]),cM();const z=S.useCallback(W=>{var ne,te;return K.current===((ne=F.current)==null?void 0:ne.side)&&oQe(W,(te=F.current)==null?void 0:te.area)},[]);return l.jsx(zJe,{scope:t,searchRef:q,onItemEnter:S.useCallback(W=>{z(W)&&W.preventDefault()},[z]),onItemLeave:S.useCallback(W=>{var se;z(W)||((se=P.current)==null||se.focus(),N(null))},[z]),onTriggerLeave:S.useCallback(W=>{z(W)&&W.preventDefault()},[z]),pointerGraceTimerRef:D,onPointerGraceIntentChange:S.useCallback(W=>{F.current=W},[]),children:l.jsx(Y,{...U,children:l.jsx(gA,{asChild:!0,trapped:i,onMountAutoFocus:st(s,W=>{var se;W.preventDefault(),(se=P.current)==null||se.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:l.jsx(cx,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,children:l.jsx(she,{asChild:!0,...k,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:N,onEntryFocus:st(c,W=>{_.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(rM,{role:"menu","aria-orientation":"vertical","data-state":lxe(b.open),"data-radix-menu-content":"",dir:_.dir,...C,...y,ref:M,style:{outline:"none",...y.style},onKeyDown:st(y.onKeyDown,W=>{const ne=W.target.closest("[data-radix-menu-content]")===W.currentTarget,te=W.ctrlKey||W.altKey||W.metaKey,H=W.key.length===1;ne&&(W.key==="Tab"&&W.preventDefault(),!te&&H&&R(W.key));const ce=P.current;if(W.target!==ce||!RJe.includes(W.key))return;W.preventDefault();const oe=T().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);$0e.includes(W.key)&&oe.reverse(),nQe(oe)}),onBlur:st(n.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(O.current),q.current="")}),onPointerMove:st(n.onPointerMove,OE(W=>{const se=W.target,ne=ee.current!==W.clientX;if(W.currentTarget.contains(se)&&ne){const te=W.clientX>ee.current?"right":"left";K.current=te,ee.current=W.clientX}}))})})})})})})});q0e.displayName=Ec;var GJe="MenuGroup",bH=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return l.jsx(kt.div,{role:"group",...r,ref:e})});bH.displayName=GJe;var KJe="MenuLabel",G0e=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return l.jsx(kt.div,{...r,ref:e})});G0e.displayName=KJe;var yO="MenuItem",see="menu.itemSelect",c3=S.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=S.useRef(null),o=qA(yO,n.__scopeMenu),a=yH(yO,n.__scopeMenu),c=an(e,s),u=S.useRef(!1),d=()=>{const h=s.current;if(!t&&h){const f=new CustomEvent(see,{bubbles:!0,cancelable:!0});h.addEventListener(see,p=>r==null?void 0:r(p),{once:!0}),nU(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return l.jsx(K0e,{...i,ref:c,disabled:t,onClick:st(n.onClick,d),onPointerDown:h=>{var f;(f=n.onPointerDown)==null||f.call(n,h),u.current=!0},onPointerUp:st(n.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:st(n.onKeyDown,h=>{const f=a.searchRef.current!=="";t||f&&h.key===" "||iV.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});c3.displayName=yO;var K0e=S.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,o=yH(yO,t),a=U0e(t),c=S.useRef(null),u=an(e,c),[d,h]=S.useState(!1),[f,p]=S.useState("");return S.useEffect(()=>{const x=c.current;x&&p((x.textContent??"").trim())},[s.children]),l.jsx(IE.ItemSlot,{scope:t,disabled:r,textValue:i??f,children:l.jsx(ohe,{asChild:!0,...a,focusable:!r,children:l.jsx(kt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:st(n.onPointerMove,OE(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:st(n.onPointerLeave,OE(x=>o.onItemLeave(x))),onFocus:st(n.onFocus,()=>h(!0)),onBlur:st(n.onBlur,()=>h(!1))})})})}),YJe="MenuCheckboxItem",Y0e=S.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return l.jsx(exe,{scope:n.__scopeMenu,checked:t,children:l.jsx(c3,{role:"menuitemcheckbox","aria-checked":xO(t)?"mixed":t,...i,ref:e,"data-state":_H(t),onSelect:st(i.onSelect,()=>r==null?void 0:r(xO(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Y0e.displayName=YJe;var X0e="MenuRadioGroup",[XJe,JJe]=yx(X0e,{value:void 0,onValueChange:()=>{}}),J0e=S.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=Yo(r);return l.jsx(XJe,{scope:n.__scopeMenu,value:t,onValueChange:s,children:l.jsx(bH,{...i,ref:e})})});J0e.displayName=X0e;var Q0e="MenuRadioItem",Z0e=S.forwardRef((n,e)=>{const{value:t,...r}=n,i=JJe(Q0e,n.__scopeMenu),s=t===i.value;return l.jsx(exe,{scope:n.__scopeMenu,checked:s,children:l.jsx(c3,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":_H(s),onSelect:st(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,t)},{checkForDefaultPrevented:!1})})})});Z0e.displayName=Q0e;var wH="MenuItemIndicator",[exe,QJe]=yx(wH,{checked:!1}),txe=S.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=QJe(wH,t);return l.jsx(Da,{present:r||xO(s.checked)||s.checked===!0,children:l.jsx(kt.span,{...i,ref:e,"data-state":_H(s.checked)})})});txe.displayName=wH;var ZJe="MenuSeparator",nxe=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return l.jsx(kt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});nxe.displayName=ZJe;var eQe="MenuArrow",rxe=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=l3(t);return l.jsx(iM,{...i,...r,ref:e})});rxe.displayName=eQe;var tQe="MenuSub",[rvt,ixe]=yx(tQe),hC="MenuSubTrigger",sxe=S.forwardRef((n,e)=>{const t=xx(hC,n.__scopeMenu),r=qA(hC,n.__scopeMenu),i=ixe(hC,n.__scopeMenu),s=yH(hC,n.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,u={__scopeMenu:n.__scopeMenu},d=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>d,[d]),S.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),c(null)}},[a,c]),l.jsx(gH,{asChild:!0,...u,children:l.jsx(K0e,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":lxe(t.open),...n,ref:am(e,i.onTriggerChange),onClick:h=>{var f;(f=n.onClick)==null||f.call(n,h),!(n.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:st(n.onPointerMove,OE(h=>{s.onItemEnter(h),!h.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),d()},100))})),onPointerLeave:st(n.onPointerLeave,OE(h=>{var p,x;d();const f=(p=t.content)==null?void 0:p.getBoundingClientRect();if(f){const y=(x=t.content)==null?void 0:x.dataset.side,b=y==="right",_=b?-5:5,C=f[b?"left":"right"],k=f[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+_,y:h.clientY},{x:C,y:f.top},{x:k,y:f.top},{x:k,y:f.bottom},{x:C,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:st(n.onKeyDown,h=>{var p;const f=s.searchRef.current!=="";n.disabled||f&&h.key===" "||MJe[r.dir].includes(h.key)&&(t.onOpenChange(!0),(p=t.content)==null||p.focus(),h.preventDefault())})})})});sxe.displayName=hC;var oxe="MenuSubContent",axe=S.forwardRef((n,e)=>{const t=H0e(Ec,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=xx(Ec,n.__scopeMenu),o=qA(Ec,n.__scopeMenu),a=ixe(oxe,n.__scopeMenu),c=S.useRef(null),u=an(e,c);return l.jsx(IE.Provider,{scope:n.__scopeMenu,children:l.jsx(Da,{present:r||s.open,children:l.jsx(IE.Slot,{scope:n.__scopeMenu,children:l.jsx(xH,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:st(n.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:st(n.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:st(n.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),f=DJe[o.dir].includes(d.key);h&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});axe.displayName=oxe;function lxe(n){return n?"open":"closed"}function xO(n){return n==="indeterminate"}function _H(n){return xO(n)?"indeterminate":n?"checked":"unchecked"}function nQe(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function rQe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function iQe(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=rQe(n,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==t?c:void 0}function sQe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],u=a.x,d=a.y,h=c.x,f=c.y;d>r!=f>r&&t<(h-u)*(r-d)/(f-d)+u&&(i=!i)}return i}function oQe(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return sQe(t,e)}function OE(n){return e=>e.pointerType==="mouse"?n(e):void 0}var aQe=z0e,lQe=gH,cQe=W0e,uQe=q0e,dQe=bH,hQe=G0e,fQe=c3,mQe=Y0e,pQe=J0e,gQe=Z0e,vQe=txe,yQe=nxe,xQe=rxe,bQe=sxe,wQe=axe,u3="DropdownMenu",[_Qe]=_o(u3,[V0e]),Jo=V0e(),[SQe,cxe]=_Qe(u3),uxe=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=n,c=Jo(e),u=S.useRef(null),[d,h]=Pu({prop:i,defaultProp:s??!1,onChange:o,caller:u3});return l.jsx(SQe,{scope:e,triggerId:Ys(),triggerRef:u,contentId:Ys(),open:d,onOpenChange:h,onOpenToggle:S.useCallback(()=>h(f=>!f),[h]),modal:a,children:l.jsx(aQe,{...c,open:d,onOpenChange:h,dir:r,modal:a,children:t})})};uxe.displayName=u3;var dxe="DropdownMenuTrigger",hxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,s=cxe(dxe,t),o=Jo(t);return l.jsx(lQe,{asChild:!0,...o,children:l.jsx(kt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:am(e,s.triggerRef),onPointerDown:st(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:st(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});hxe.displayName=dxe;var kQe="DropdownMenuPortal",fxe=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Jo(e);return l.jsx(cQe,{...r,...t})};fxe.displayName=kQe;var mxe="DropdownMenuContent",pxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=cxe(mxe,t),s=Jo(t),o=S.useRef(!1);return l.jsx(uQe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:st(n.onCloseAutoFocus,a=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:st(n.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pxe.displayName=mxe;var CQe="DropdownMenuGroup",EQe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(dQe,{...i,...r,ref:e})});EQe.displayName=CQe;var TQe="DropdownMenuLabel",gxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(hQe,{...i,...r,ref:e})});gxe.displayName=TQe;var AQe="DropdownMenuItem",vxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(fQe,{...i,...r,ref:e})});vxe.displayName=AQe;var NQe="DropdownMenuCheckboxItem",yxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(mQe,{...i,...r,ref:e})});yxe.displayName=NQe;var jQe="DropdownMenuRadioGroup",PQe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(pQe,{...i,...r,ref:e})});PQe.displayName=jQe;var IQe="DropdownMenuRadioItem",xxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(gQe,{...i,...r,ref:e})});xxe.displayName=IQe;var OQe="DropdownMenuItemIndicator",bxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(vQe,{...i,...r,ref:e})});bxe.displayName=OQe;var RQe="DropdownMenuSeparator",wxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(yQe,{...i,...r,ref:e})});wxe.displayName=RQe;var MQe="DropdownMenuArrow",DQe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(xQe,{...i,...r,ref:e})});DQe.displayName=MQe;var LQe="DropdownMenuSubTrigger",_xe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(bQe,{...i,...r,ref:e})});_xe.displayName=LQe;var FQe="DropdownMenuSubContent",Sxe=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=Jo(t);return l.jsx(wQe,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Sxe.displayName=FQe;var BQe=uxe,$Qe=hxe,VQe=fxe,kxe=pxe,Cxe=gxe,Exe=vxe,Txe=yxe,Axe=xxe,Nxe=bxe,jxe=wxe,Pxe=_xe,Ixe=Sxe;const SH=BQe,kH=$Qe,UQe=S.forwardRef(({className:n,inset:e,children:t,...r},i)=>l.jsxs(Pxe,{ref:i,className:Qe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,l.jsx(kg,{className:"ml-auto h-4 w-4"})]}));UQe.displayName=Pxe.displayName;const zQe=S.forwardRef(({className:n,...e},t)=>l.jsx(Ixe,{ref:t,className:Qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));zQe.displayName=Ixe.displayName;const d3=S.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(VQe,{children:l.jsx(kxe,{ref:r,sideOffset:e,className:Qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));d3.displayName=kxe.displayName;const lh=S.forwardRef(({className:n,inset:e,...t},r)=>l.jsx(Exe,{ref:r,className:Qe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));lh.displayName=Exe.displayName;const HQe=S.forwardRef(({className:n,children:e,checked:t,...r},i)=>l.jsxs(Txe,{ref:i,className:Qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Nxe,{children:l.jsx(Fr,{className:"h-4 w-4"})})}),e]}));HQe.displayName=Txe.displayName;const WQe=S.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(Axe,{ref:r,className:Qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Nxe,{children:l.jsx(xCe,{className:"h-2 w-2 fill-current"})})}),e]}));WQe.displayName=Axe.displayName;const qQe=S.forwardRef(({className:n,inset:e,...t},r)=>l.jsx(Cxe,{ref:r,className:Qe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));qQe.displayName=Cxe.displayName;const GQe=S.forwardRef(({className:n,...e},t)=>l.jsx(jxe,{ref:t,className:Qe("-mx-1 my-1 h-px bg-muted",n),...e}));GQe.displayName=jxe.displayName;function KQe(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(!0),[s,o]=S.useState(""),[a,c]=S.useState("all"),[u,d]=S.useState(""),h=IJe(async({search:Y,page:U,pageSize:R})=>{const z=new URLSearchParams({page:U.toString(),pageSize:R.toString(),isActive:"true",status:"Approved"});Y&&z.append("searchTerm",Y);const W=await ot(`${Ge()}/api/tour?${z.toString()}`);return{data:W.tours.map(se=>({value:se.id,label:se.title})),totalCount:W.tours.length,hasMore:W.tours.length===R}},20),[f,p]=S.useState(1),[x,y]=S.useState(1),[b,_]=S.useState(0),[C,k]=S.useState(null),[T,E]=S.useState(!1),[N,P]=S.useState(null);S.useEffect(()=>{M()},[f,a,u,s]);const M=async()=>{try{i(!0);const Y=new URLSearchParams({page:f.toString(),pageSize:"20"});a!=="all"&&Y.append("status",a),u&&Y.append("tourId",u),s.trim()&&Y.append("search",s.trim());const U=await ot(`${Ge()}/api/reviews/admin?${Y.toString()}`);t(U.reviews),y(U.pagination.totalPages),_(U.pagination.totalCount)}catch(Y){console.error("Error fetching reviews:",Y),Ae.error("Không thể tải danh sách đánh giá")}finally{i(!1)}},O=async(Y,U)=>{try{P(Y);const z={Approved:2,Pending:1,Rejected:3}[U];if(z===void 0)throw new Error("Trạng thái không hợp lệ");await ot(`${Ge()}/api/reviews/${Y}/status`,{method:"PUT",body:JSON.stringify({status:z})}),Ae.success("Cập nhật trạng thái thành công"),M()}catch(R){console.error("Error updating review status:",R),Ae.error(R.message||"Không thể cập nhật trạng thái")}finally{P(null)}},q=async Y=>{try{P(Y),await ot(`${Ge()}/api/reviews/${Y}/admin`,{method:"DELETE"}),Ae.success("Xóa đánh giá thành công"),M()}catch(U){console.error("Error deleting review:",U),Ae.error(U.message||"Không thể xóa đánh giá")}finally{P(null)}},D=Y=>{switch(Y){case 2:return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Đã duyệt"});case 1:return l.jsx(ct,{className:"bg-yellow-100 text-yellow-800",children:"Chờ duyệt"});case 3:return l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Từ chối"});default:return l.jsx(ct,{variant:"secondary",children:"Unknown"})}},F=Y=>Array.from({length:5},(U,R)=>l.jsx(ki,{className:`w-4 h-4 ${R<Y?"text-yellow-400 fill-current":"text-gray-300"}`},R)),K=Y=>new Date(Y).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ee=(Y,U=100)=>Y.length<=U?Y:Y.substring(0,U)+"...";return!n||n.role!=="Admin"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(nw,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị để truy cập trang này."})]})}):l.jsxs(Ns,{children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quản lý đánh giá"}),l.jsx("p",{className:"text-gray-600",children:"Quản lý và kiểm duyệt đánh giá tour"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Tổng cộng: ",b," đánh giá"]})]}),l.jsx(tt,{children:l.jsx(nt,{className:"p-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("div",{className:"md:col-span-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(We,{placeholder:"Tìm kiếm theo nội dung, tên người dùng, tour...",value:s,onChange:Y=>o(Y.target.value),className:"pl-10"})]})}),l.jsx("div",{children:l.jsxs(Cn,{value:a,onValueChange:c,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"approved",children:"Đã duyệt"}),l.jsx(ze,{value:"pending",children:"Chờ duyệt"}),l.jsx(ze,{value:"rejected",children:"Từ chối"})]})]})}),l.jsx("div",{children:l.jsx(PJe,{options:[{value:"",label:"Tất cả Tour"},...h.options],value:u,onValueChange:d,onSearch:h.search,onLoadMore:h.loadMore,placeholder:"Lọc theo Tour",emptyMessage:"Không tìm thấy tour nào",loading:h.loading,hasMore:h.hasMore,searchPlaceholder:"Tìm kiếm tour..."})})]})})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách đánh giá"})}),l.jsxs(nt,{children:[r?l.jsx("div",{className:"space-y-4",children:[...Array(5)].map((Y,U)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"h-16 bg-gray-200 rounded"})},U))}):e.length>0?l.jsx("div",{className:"space-y-4",children:e.map(Y=>l.jsxs("div",{className:`border rounded-lg p-4 hover:bg-gray-50 transition-colors ${Y.reportCount>0?"border-red-500 bg-red-50":""}`,children:[Y.reportCount>0&&l.jsxs("div",{className:"mb-3 flex items-center gap-2 p-2 bg-red-100 border border-red-300 rounded",children:[l.jsx(nw,{className:"w-5 h-5 text-red-600"}),l.jsxs("span",{className:"text-red-700 font-semibold",children:["⚠️ Đánh giá này đã bị báo cáo ",Y.reportCount," lần"]})]}),l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex items-center gap-1",children:F(Y.rating)}),D(Y.status),l.jsx("span",{className:"text-sm text-gray-500",children:K(Y.createdAt)})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Fo,{className:"w-4 h-4"}),l.jsxs("span",{children:[Y.user.firstName," ",Y.user.lastName]})]}),Y.tour&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(s_,{className:"w-4 h-4"}),l.jsx("span",{children:Y.tour.title})]}),Y.bookingNumber&&l.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:Y.bookingNumber})]}),l.jsxs("div",{className:"space-y-2",children:[Y.title&&l.jsx("h4",{className:"font-medium text-gray-900",children:Y.title}),l.jsx("p",{className:"text-gray-700 text-sm",children:ee(Y.content)})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Gae,{className:"w-4 h-4"}),l.jsxs("span",{children:[Y.helpfulVotes," hữu ích"]})]}),Y.reportCount>0&&l.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[l.jsx(nw,{className:"w-4 h-4"}),l.jsxs("span",{children:[Y.reportCount," báo cáo"]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>{k(Y),E(!0)},children:l.jsx(Ts,{className:"w-4 h-4"})}),l.jsxs(SH,{children:[l.jsx(kH,{asChild:!0,children:l.jsx(Ce,{variant:"outline",size:"sm",disabled:N===Y.id,children:l.jsx($9,{className:"w-4 h-4"})})}),l.jsxs(d3,{align:"end",children:[Y.status!==2&&l.jsxs(lh,{onClick:()=>O(Y.id,"Approved"),disabled:N===Y.id,children:[l.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Duyệt"]}),Y.status!==3&&l.jsxs(lh,{onClick:()=>O(Y.id,"Rejected"),disabled:N===Y.id,children:[l.jsx(si,{className:"w-4 h-4 mr-2"}),"Từ chối"]}),l.jsxs(Hl,{children:[l.jsx(ux,{asChild:!0,children:l.jsxs(lh,{onSelect:U=>U.preventDefault(),children:[l.jsx(Sm,{className:"w-4 h-4 mr-2"}),"Xóa"]})}),l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xác nhận xóa đánh giá"}),l.jsx(Wu,{children:"Bạn có chắc chắn muốn xóa đánh giá này? Hành động này không thể hoàn tác."})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:()=>q(Y.id),className:"bg-red-600 hover:bg-red-700",children:"Xóa"})]})]})]})]})]})]})]})]},Y.id))}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(s_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không có đánh giá nào"}),l.jsx("p",{className:"text-gray-600",children:s||a!=="all"?"Không tìm thấy đánh giá phù hợp với bộ lọc":"Chưa có đánh giá nào trong hệ thống"})]}),x>1&&l.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>p(Y=>Math.max(1,Y-1)),disabled:f===1,children:"Trước"}),l.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,x)},(Y,U)=>{const R=U+1;return l.jsx(Ce,{variant:f===R?"default":"outline",size:"sm",onClick:()=>p(R),className:"w-8 h-8 p-0",children:R},R)})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>p(Y=>Math.min(x,Y+1)),disabled:f===x,children:"Sau"})]})]})]})]}),C&&l.jsx(YQe,{review:C,open:T,onOpenChange:E,onStatusChange:O,onDelete:q,actionLoading:N})]})}function YQe({review:n,open:e,onOpenChange:t,onStatusChange:r,onDelete:i,actionLoading:s}){const[o,a]=S.useState([]),[c,u]=S.useState(!1),d=async()=>{if(n.reportCount!==0)try{u(!0);const b=await ot(`${Ge()}/api/reviews/${n.id}/reports`);a(b)}catch(b){console.error("Error fetching reports:",b)}finally{u(!1)}};S.useEffect(()=>{e&&n.reportCount>0&&d()},[e,n.id,n.reportCount]);const h=b=>Array.from({length:5},(_,C)=>l.jsx(ki,{className:`w-5 h-5 ${C<b?"text-yellow-400 fill-current":"text-gray-300"}`},C)),f=b=>new Date(b).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=b=>({"Inappropriate content":"Nội dung không phù hợp",Spam:"Spam","Fake review":"Đánh giá giả mạo","Offensive language":"Ngôn ngữ xúc phạm",Harassment:"Quấy rối",Other:"Khác"})[b]||b,x=b=>({pending:"Chờ xử lý",investigating:"Đang điều tra",resolved:"Đã giải quyết",dismissed:"Đã bỏ qua"})[b]||b,y=n.images?JSON.parse(n.images):[];return l.jsx(Hl,{open:e,onOpenChange:t,children:l.jsxs(La,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Fa,{children:l.jsx($a,{children:"Chi tiết đánh giá"})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[h(n.rating),l.jsxs("span",{className:"text-lg font-medium",children:[n.rating,"/5"]})]}),l.jsx(ct,{className:n.status===2?"bg-green-100 text-green-800":n.status===1?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:n.status===2?"Đã duyệt":n.status===1?"Chờ duyệt":"Từ chối"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-semibold",children:"Thông tin người đánh giá"}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Tên:"})," ",n.user.firstName," ",n.user.lastName]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",n.user.email]}),n.bookingNumber&&l.jsxs("p",{children:[l.jsx("strong",{children:"Mã đặt tour:"})," ",n.bookingNumber]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Ngày đánh giá:"})," ",f(n.createdAt)]})]})]}),n.tour&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-semibold",children:"Tour được đánh giá"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Tên tour:"})," ",n.tour.title]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-semibold",children:"Nội dung đánh giá"}),n.title&&l.jsx("h5",{className:"font-medium text-lg",children:n.title}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:n.content})})]}),y.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-semibold",children:"Hình ảnh đính kèm"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:y.map((b,_)=>l.jsx("img",{src:b,alt:`Review image ${_+1}`,className:"w-full h-24 object-cover rounded-lg"},_))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-semibold",children:"Thống kê"}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Số lượt hữu ích:"})," ",n.helpfulVotes]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Số lượt báo cáo:"})," ",n.reportCount]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Cập nhật lần cuối:"})," ",f(n.updatedAt)]})]})]}),n.reportCount>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-semibold text-red-600",children:["Lý do báo cáo (",n.reportCount,")"]}),c?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-red-600 mx-auto"}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Đang tải thông tin báo cáo..."})]}):l.jsx("div",{className:"space-y-3",children:o.map(b=>l.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ct,{variant:"destructive",className:"text-xs",children:p(b.reason)}),l.jsx(ct,{variant:"outline",className:"text-xs",children:x(b.status)})]}),l.jsx("span",{className:"text-xs text-gray-500",children:f(b.reportedAt)})]}),b.description&&l.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[l.jsx("strong",{children:"Mô tả:"})," ",b.description]}),l.jsxs("p",{className:"text-xs text-gray-600",children:[l.jsx("strong",{children:"Báo cáo bởi:"})," ",b.reportedBy.firstName," ",b.reportedBy.lastName," (",b.reportedBy.email,")"]}),b.resolution&&l.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:[l.jsxs("p",{className:"text-xs text-green-700",children:[l.jsx("strong",{children:"Giải quyết:"})," ",b.resolution]}),b.reviewedAt&&l.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Giải quyết lúc: ",f(b.reviewedAt)]})]})]},b.id))})]})]}),l.jsxs(Ba,{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>t(!1),children:"Đóng"}),n.status!==2&&l.jsxs(Ce,{onClick:()=>r(n.id,"Approved"),disabled:s===n.id,className:"bg-green-600 hover:bg-green-700",children:[l.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Duyệt"]}),n.status!==3&&l.jsxs(Ce,{onClick:()=>r(n.id,"Rejected"),disabled:s===n.id,variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",children:[l.jsx(si,{className:"w-4 h-4 mr-2"}),"Từ chối"]})]})]})})}var eL,oee;function Ha(){if(oee)return eL;oee=1;var n=Array.isArray;return eL=n,eL}var tL,aee;function Oxe(){if(aee)return tL;aee=1;var n=typeof nj=="object"&&nj&&nj.Object===Object&&nj;return tL=n,tL}var nL,lee;function Sh(){if(lee)return nL;lee=1;var n=Oxe(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return nL=t,nL}var rL,cee;function GA(){if(cee)return rL;cee=1;var n=Sh(),e=n.Symbol;return rL=e,rL}var iL,uee;function XQe(){if(uee)return iL;uee=1;var n=GA(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(o){var a=t.call(o,i),c=o[i];try{o[i]=void 0;var u=!0}catch{}var d=r.call(o);return u&&(a?o[i]=c:delete o[i]),d}return iL=s,iL}var sL,dee;function JQe(){if(dee)return sL;dee=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return sL=t,sL}var oL,hee;function Tm(){if(hee)return oL;hee=1;var n=GA(),e=XQe(),t=JQe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):t(a)}return oL=o,oL}var aL,fee;function Am(){if(fee)return aL;fee=1;function n(e){return e!=null&&typeof e=="object"}return aL=n,aL}var lL,mee;function xS(){if(mee)return lL;mee=1;var n=Tm(),e=Am(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return lL=r,lL}var cL,pee;function CH(){if(pee)return cL;pee=1;var n=Ha(),e=xS(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(n(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||o!=null&&s in Object(o)}return cL=i,cL}var uL,gee;function ov(){if(gee)return uL;gee=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return uL=n,uL}var dL,vee;function EH(){if(vee)return dL;vee=1;var n=Tm(),e=ov(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var c=n(a);return c==r||c==i||c==t||c==s}return dL=o,dL}var hL,yee;function QQe(){if(yee)return hL;yee=1;var n=Sh(),e=n["__core-js_shared__"];return hL=e,hL}var fL,xee;function ZQe(){if(xee)return fL;xee=1;var n=QQe(),e=(function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function t(r){return!!e&&e in r}return fL=t,fL}var mL,bee;function Rxe(){if(bee)return mL;bee=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return mL=t,mL}var pL,wee;function eZe(){if(wee)return pL;wee=1;var n=EH(),e=ZQe(),t=ov(),r=Rxe(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,c=o.toString,u=a.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(f){if(!t(f)||e(f))return!1;var p=n(f)?d:s;return p.test(r(f))}return pL=h,pL}var gL,_ee;function tZe(){if(_ee)return gL;_ee=1;function n(e,t){return e==null?void 0:e[t]}return gL=n,gL}var vL,See;function bx(){if(See)return vL;See=1;var n=eZe(),e=tZe();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return vL=t,vL}var yL,kee;function h3(){if(kee)return yL;kee=1;var n=bx(),e=n(Object,"create");return yL=e,yL}var xL,Cee;function nZe(){if(Cee)return xL;Cee=1;var n=h3();function e(){this.__data__=n?n(null):{},this.size=0}return xL=e,xL}var bL,Eee;function rZe(){if(Eee)return bL;Eee=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return bL=n,bL}var wL,Tee;function iZe(){if(Tee)return wL;Tee=1;var n=h3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var o=this.__data__;if(n){var a=o[s];return a===e?void 0:a}return r.call(o,s)?o[s]:void 0}return wL=i,wL}var _L,Aee;function sZe(){if(Aee)return _L;Aee=1;var n=h3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return _L=r,_L}var SL,Nee;function oZe(){if(Nee)return SL;Nee=1;var n=h3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return SL=t,SL}var kL,jee;function aZe(){if(jee)return kL;jee=1;var n=nZe(),e=rZe(),t=iZe(),r=sZe(),i=oZe();function s(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,kL=s,kL}var CL,Pee;function lZe(){if(Pee)return CL;Pee=1;function n(){this.__data__=[],this.size=0}return CL=n,CL}var EL,Iee;function TH(){if(Iee)return EL;Iee=1;function n(e,t){return e===t||e!==e&&t!==t}return EL=n,EL}var TL,Oee;function f3(){if(Oee)return TL;Oee=1;var n=TH();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return TL=e,TL}var AL,Ree;function cZe(){if(Ree)return AL;Ree=1;var n=f3(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,o=n(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return AL=r,AL}var NL,Mee;function uZe(){if(Mee)return NL;Mee=1;var n=f3();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return NL=e,NL}var jL,Dee;function dZe(){if(Dee)return jL;Dee=1;var n=f3();function e(t){return n(this.__data__,t)>-1}return jL=e,jL}var PL,Lee;function hZe(){if(Lee)return PL;Lee=1;var n=f3();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return PL=e,PL}var IL,Fee;function m3(){if(Fee)return IL;Fee=1;var n=lZe(),e=cZe(),t=uZe(),r=dZe(),i=hZe();function s(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,IL=s,IL}var OL,Bee;function AH(){if(Bee)return OL;Bee=1;var n=bx(),e=Sh(),t=n(e,"Map");return OL=t,OL}var RL,$ee;function fZe(){if($ee)return RL;$ee=1;var n=aZe(),e=m3(),t=AH();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return RL=r,RL}var ML,Vee;function mZe(){if(Vee)return ML;Vee=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return ML=n,ML}var DL,Uee;function p3(){if(Uee)return DL;Uee=1;var n=mZe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return DL=e,DL}var LL,zee;function pZe(){if(zee)return LL;zee=1;var n=p3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return LL=e,LL}var FL,Hee;function gZe(){if(Hee)return FL;Hee=1;var n=p3();function e(t){return n(this,t).get(t)}return FL=e,FL}var BL,Wee;function vZe(){if(Wee)return BL;Wee=1;var n=p3();function e(t){return n(this,t).has(t)}return BL=e,BL}var $L,qee;function yZe(){if(qee)return $L;qee=1;var n=p3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return $L=e,$L}var VL,Gee;function NH(){if(Gee)return VL;Gee=1;var n=fZe(),e=pZe(),t=gZe(),r=vZe(),i=yZe();function s(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,VL=s,VL}var UL,Kee;function Mxe(){if(Kee)return UL;Kee=1;var n=NH(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],c=s.cache;if(c.has(a))return c.get(a);var u=r.apply(this,o);return s.cache=c.set(a,u)||c,u};return s.cache=new(t.Cache||n),s}return t.Cache=n,UL=t,UL}var zL,Yee;function xZe(){if(Yee)return zL;Yee=1;var n=Mxe(),e=500;function t(r){var i=n(r,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return zL=t,zL}var HL,Xee;function bZe(){if(Xee)return HL;Xee=1;var n=xZe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,a,c,u){s.push(c?u.replace(t,"$1"):a||o)}),s});return HL=r,HL}var WL,Jee;function jH(){if(Jee)return WL;Jee=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return WL=n,WL}var qL,Qee;function wZe(){if(Qee)return qL;Qee=1;var n=GA(),e=jH(),t=Ha(),r=xS(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(t(a))return e(a,o)+"";if(r(a))return s?s.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return qL=o,qL}var GL,Zee;function Dxe(){if(Zee)return GL;Zee=1;var n=wZe();function e(t){return t==null?"":n(t)}return GL=e,GL}var KL,ete;function Lxe(){if(ete)return KL;ete=1;var n=Ha(),e=CH(),t=bZe(),r=Dxe();function i(s,o){return n(s)?s:e(s,o)?[s]:t(r(s))}return KL=i,KL}var YL,tte;function g3(){if(tte)return YL;tte=1;var n=xS();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return YL=e,YL}var XL,nte;function PH(){if(nte)return XL;nte=1;var n=Lxe(),e=g3();function t(r,i){i=n(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[e(i[s++])];return s&&s==o?r:void 0}return XL=t,XL}var JL,rte;function Fxe(){if(rte)return JL;rte=1;var n=PH();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return JL=e,JL}var _Ze=Fxe();const Dl=qn(_Ze);var QL,ite;function SZe(){if(ite)return QL;ite=1;function n(e){return e==null}return QL=n,QL}var kZe=SZe();const un=qn(kZe);var ZL,ste;function CZe(){if(ste)return ZL;ste=1;var n=Tm(),e=Ha(),t=Am(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return ZL=i,ZL}var EZe=CZe();const ix=qn(EZe);var TZe=EH();const nn=qn(TZe);var AZe=ov();const bS=qn(AZe);var e6={exports:{}},Gn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ote;function NZe(){if(ote)return Gn;ote=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function y(b){if(typeof b=="object"&&b!==null){var _=b.$$typeof;switch(_){case n:switch(b=b.type,b){case t:case i:case r:case u:case d:return b;default:switch(b=b&&b.$$typeof,b){case a:case o:case c:case f:case h:case s:return b;default:return _}}case e:return _}}}return Gn.ContextConsumer=o,Gn.ContextProvider=s,Gn.Element=n,Gn.ForwardRef=c,Gn.Fragment=t,Gn.Lazy=f,Gn.Memo=h,Gn.Portal=e,Gn.Profiler=i,Gn.StrictMode=r,Gn.Suspense=u,Gn.SuspenseList=d,Gn.isAsyncMode=function(){return!1},Gn.isConcurrentMode=function(){return!1},Gn.isContextConsumer=function(b){return y(b)===o},Gn.isContextProvider=function(b){return y(b)===s},Gn.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===n},Gn.isForwardRef=function(b){return y(b)===c},Gn.isFragment=function(b){return y(b)===t},Gn.isLazy=function(b){return y(b)===f},Gn.isMemo=function(b){return y(b)===h},Gn.isPortal=function(b){return y(b)===e},Gn.isProfiler=function(b){return y(b)===i},Gn.isStrictMode=function(b){return y(b)===r},Gn.isSuspense=function(b){return y(b)===u},Gn.isSuspenseList=function(b){return y(b)===d},Gn.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===t||b===i||b===r||b===u||b===d||b===p||typeof b=="object"&&b!==null&&(b.$$typeof===f||b.$$typeof===h||b.$$typeof===s||b.$$typeof===o||b.$$typeof===c||b.$$typeof===x||b.getModuleId!==void 0)},Gn.typeOf=y,Gn}var ate;function jZe(){return ate||(ate=1,e6.exports=NZe()),e6.exports}var PZe=jZe(),t6,lte;function Bxe(){if(lte)return t6;lte=1;var n=Tm(),e=Am(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return t6=r,t6}var n6,cte;function IZe(){if(cte)return n6;cte=1;var n=Bxe();function e(t){return n(t)&&t!=+t}return n6=e,n6}var OZe=IZe();const KA=qn(OZe);var RZe=Bxe();const MZe=qn(RZe);var Vo=function(e){return e===0?0:e>0?1:-1},hy=function(e){return ix(e)&&e.indexOf("%")===e.length-1},ut=function(e){return MZe(e)&&!KA(e)},DZe=function(e){return un(e)},ss=function(e){return ut(e)||ix(e)},LZe=0,wS=function(e){var t=++LZe;return"".concat(e||"").concat(t)},Uo=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ut(e)&&!ix(e))return r;var s;if(hy(e)){var o=e.indexOf("%");s=t*parseFloat(e.slice(0,o))/100}else s=+e;return KA(s)&&(s=r),i&&s>t&&(s=t),s},yp=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},FZe=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Cl=function(e,t){return ut(e)&&ut(t)?function(r){return e+r*(t-e)}:function(){return t}};function bO(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):Dl(r,e))===t})}var BZe=function(e,t){return ut(e)&&ut(t)?e-t:ix(e)&&ix(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function bw(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function sV(n){"@babel/helpers - typeof";return sV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sV(n)}var $Ze=["viewBox","children"],VZe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ute=["points","pathLength"],r6={svg:$Ze,polygon:ute,polyline:ute},IH=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],wO=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),!bS(r))return null;var i={};return Object.keys(r).forEach(function(s){IH.includes(s)&&(i[s]=t||function(o){return r[s](r,o)})}),i},UZe=function(e,t,r){return function(i){return e(t,r,i),null}},sx=function(e,t,r){if(!bS(e)||sV(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];IH.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=UZe(o,t,r))}),i},zZe=["children"],HZe=["children"];function dte(n,e){if(n==null)return{};var t=WZe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function WZe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function oV(n){"@babel/helpers - typeof";return oV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oV(n)}var hte={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Zf=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},fte=null,i6=null,OH=function n(e){if(e===fte&&Array.isArray(i6))return i6;var t=[];return S.Children.forEach(e,function(r){un(r)||(PZe.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),i6=t,fte=e,t};function Ll(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Zf(i)}):r=[Zf(e)],OH(n).forEach(function(i){var s=Dl(i,"type.displayName")||Dl(i,"type.name");r.indexOf(s)!==-1&&t.push(i)}),t}function _l(n,e){var t=Ll(n,e);return t&&t[0]}var mte=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!ut(r)||r<=0||!ut(i)||i<=0)},qZe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],GZe=function(e){return e&&e.type&&ix(e.type)&&qZe.indexOf(e.type)>=0},KZe=function(e){return e&&oV(e)==="object"&&"clipDot"in e},YZe=function(e,t,r,i){var s,o=(s=r6==null?void 0:r6[i])!==null&&s!==void 0?s:[];return t.startsWith("data-")||!nn(e)&&(i&&o.includes(t)||VZe.includes(t))||r&&IH.includes(t)},Wt=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(S.isValidElement(e)&&(i=e.props),!bS(i))return null;var s={};return Object.keys(i).forEach(function(o){var a;YZe((a=i)===null||a===void 0?void 0:a[o],o,t,r)&&(s[o]=i[o])}),s},aV=function n(e,t){if(e===t)return!0;var r=S.Children.count(e);if(r!==S.Children.count(t))return!1;if(r===0)return!0;if(r===1)return pte(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var s=e[i],o=t[i];if(Array.isArray(s)||Array.isArray(o)){if(!n(s,o))return!1}else if(!pte(s,o))return!1}return!0},pte=function(e,t){if(un(e)&&un(t))return!0;if(!un(e)&&!un(t)){var r=e.props||{},i=r.children,s=dte(r,zZe),o=t.props||{},a=o.children,c=dte(o,HZe);return i&&a?bw(s,c)&&aV(i,a):!i&&!a?bw(s,c):!1}return!1},gte=function(e,t){var r=[],i={};return OH(e).forEach(function(s,o){if(GZe(s))r.push(s);else if(s){var a=Zf(s.type),c=t[a]||{},u=c.handler,d=c.once;if(u&&(!d||!i[a])){var h=u(s,a,o);r.push(h),i[a]=!0}}}),r},XZe=function(e){var t=e&&e.type;return t&&hte[t]?hte[t]:null},JZe=function(e,t){return OH(t).indexOf(e)},QZe=["children","width","height","viewBox","className","style","title","desc"];function lV(){return lV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lV.apply(this,arguments)}function ZZe(n,e){if(n==null)return{};var t=eet(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function eet(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function cV(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,s=n.className,o=n.style,a=n.title,c=n.desc,u=ZZe(n,QZe),d=i||{width:t,height:r,x:0,y:0},h=rn("recharts-surface",s);return re.createElement("svg",lV({},Wt(u,!0,"svg"),{className:h,width:t,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),re.createElement("title",null,a),re.createElement("desc",null,c),e)}var tet=["children","className"];function uV(){return uV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uV.apply(this,arguments)}function net(n,e){if(n==null)return{};var t=ret(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ret(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Vn=re.forwardRef(function(n,e){var t=n.children,r=n.className,i=net(n,tet),s=rn("recharts-layer",r);return re.createElement("g",uV({className:s},Wt(i,!0),{ref:e}),t)}),Nu=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},s6,vte;function iet(){if(vte)return s6;vte=1;function n(e,t,r){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+t];return o}return s6=n,s6}var o6,yte;function set(){if(yte)return o6;yte=1;var n=iet();function e(t,r,i){var s=t.length;return i=i===void 0?s:i,!r&&i>=s?t:n(t,r,i)}return o6=e,o6}var a6,xte;function $xe(){if(xte)return a6;xte=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+n+i+s+"]");function c(u){return a.test(u)}return a6=c,a6}var l6,bte;function oet(){if(bte)return l6;bte=1;function n(e){return e.split("")}return l6=n,l6}var c6,wte;function aet(){if(wte)return c6;wte=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,s="\\ufe0e\\ufe0f",o="["+n+"]",a="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+a+"|"+c+")",d="[^"+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",x=u+"?",y="["+s+"]?",b="(?:"+p+"(?:"+[d,h,f].join("|")+")"+y+x+")*",_=y+x+b,C="(?:"+[d+a+"?",a,h,f,o].join("|")+")",k=RegExp(c+"(?="+c+")|"+C+_,"g");function T(E){return E.match(k)||[]}return c6=T,c6}var u6,_te;function cet(){if(_te)return u6;_te=1;var n=oet(),e=$xe(),t=aet();function r(i){return e(i)?t(i):n(i)}return u6=r,u6}var d6,Ste;function uet(){if(Ste)return d6;Ste=1;var n=set(),e=$xe(),t=cet(),r=Dxe();function i(s){return function(o){o=r(o);var a=e(o)?t(o):void 0,c=a?a[0]:o.charAt(0),u=a?n(a,1).join(""):o.slice(1);return c[s]()+u}}return d6=i,d6}var h6,kte;function det(){if(kte)return h6;kte=1;var n=uet(),e=n("toUpperCase");return h6=e,h6}var het=det();const v3=qn(het);function kr(n){return function(){return n}}const Vxe=Math.cos,_O=Math.sin,Ju=Math.sqrt,SO=Math.PI,y3=2*SO,dV=Math.PI,hV=2*dV,ey=1e-6,fet=hV-ey;function Uxe(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function met(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return Uxe;const t=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class pet{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Uxe:met(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,s,o){this._append`C${+e},${+t},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,r,i,s){if(e=+e,t=+t,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,c=r-e,u=i-t,d=o-e,h=a-t,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(f>ey)if(!(Math.abs(h*c-u*d)>ey)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let p=r-o,x=i-a,y=c*c+u*u,b=p*p+x*x,_=Math.sqrt(y),C=Math.sqrt(f),k=s*Math.tan((dV-Math.acos((y+f-b)/(2*_*C)))/2),T=k/C,E=k/_;Math.abs(T-1)>ey&&this._append`L${e+T*d},${t+T*h}`,this._append`A${s},${s},0,0,${+(h*p>d*x)},${this._x1=e+E*c},${this._y1=t+E*u}`}}arc(e,t,r,i,s,o){if(e=+e,t=+t,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),u=e+a,d=t+c,h=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ey||Math.abs(this._y1-d)>ey)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%hV+hV),f>fet?this._append`A${r},${r},0,1,${h},${e-a},${t-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>ey&&this._append`A${r},${r},0,${+(f>=dV)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function RH(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new pet(e)}function MH(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function zxe(n){this._context=n}zxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function x3(n){return new zxe(n)}function Hxe(n){return n[0]}function Wxe(n){return n[1]}function qxe(n,e){var t=kr(!0),r=null,i=x3,s=null,o=RH(a);n=typeof n=="function"?n:n===void 0?Hxe:kr(n),e=typeof e=="function"?e:e===void 0?Wxe:kr(e);function a(c){var u,d=(c=MH(c)).length,h,f=!1,p;for(r==null&&(s=i(p=o())),u=0;u<=d;++u)!(u<d&&t(h=c[u],u,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+n(h,u,c),+e(h,u,c));if(p)return s=null,p+""||null}return a.x=function(c){return arguments.length?(n=typeof c=="function"?c:kr(+c),a):n},a.y=function(c){return arguments.length?(e=typeof c=="function"?c:kr(+c),a):e},a.defined=function(c){return arguments.length?(t=typeof c=="function"?c:kr(!!c),a):t},a.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),a):r},a}function Hj(n,e,t){var r=null,i=kr(!0),s=null,o=x3,a=null,c=RH(u);n=typeof n=="function"?n:n===void 0?Hxe:kr(+n),e=typeof e=="function"?e:kr(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?Wxe:kr(+t);function u(h){var f,p,x,y=(h=MH(h)).length,b,_=!1,C,k=new Array(y),T=new Array(y);for(s==null&&(a=o(C=c())),f=0;f<=y;++f){if(!(f<y&&i(b=h[f],f,h))===_)if(_=!_)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),x=f-1;x>=p;--x)a.point(k[x],T[x]);a.lineEnd(),a.areaEnd()}_&&(k[f]=+n(b,f,h),T[f]=+e(b,f,h),a.point(r?+r(b,f,h):k[f],t?+t(b,f,h):T[f]))}if(C)return a=null,C+""||null}function d(){return qxe().defined(i).curve(o).context(s)}return u.x=function(h){return arguments.length?(n=typeof h=="function"?h:kr(+h),r=null,u):n},u.x0=function(h){return arguments.length?(n=typeof h=="function"?h:kr(+h),u):n},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:kr(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:kr(+h),t=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:kr(+h),u):e},u.y1=function(h){return arguments.length?(t=h==null?null:typeof h=="function"?h:kr(+h),u):t},u.lineX0=u.lineY0=function(){return d().x(n).y(e)},u.lineY1=function(){return d().x(n).y(t)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:kr(!!h),u):i},u.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),u):o},u.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),u):s},u}class Gxe{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function get(n){return new Gxe(n,!0)}function vet(n){return new Gxe(n,!1)}const DH={draw(n,e){const t=Ju(e/SO);n.moveTo(t,0),n.arc(0,0,t,0,y3)}},yet={draw(n,e){const t=Ju(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},Kxe=Ju(1/3),xet=Kxe*2,bet={draw(n,e){const t=Ju(e/xet),r=t*Kxe;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},wet={draw(n,e){const t=Ju(e),r=-t/2;n.rect(r,r,t,t)}},_et=.8908130915292852,Yxe=_O(SO/10)/_O(7*SO/10),ket=_O(y3/10)*Yxe,Cet=-Vxe(y3/10)*Yxe,Eet={draw(n,e){const t=Ju(e*_et),r=ket*t,i=Cet*t;n.moveTo(0,-t),n.lineTo(r,i);for(let s=1;s<5;++s){const o=y3*s/5,a=Vxe(o),c=_O(o);n.lineTo(c*t,-a*t),n.lineTo(a*r-c*i,c*r+a*i)}n.closePath()}},f6=Ju(3),Tet={draw(n,e){const t=-Ju(e/(f6*3));n.moveTo(0,t*2),n.lineTo(-f6*t,-t),n.lineTo(f6*t,-t),n.closePath()}},rc=-.5,ic=Ju(3)/2,fV=1/Ju(12),Aet=(fV/2+1)*3,Net={draw(n,e){const t=Ju(e/Aet),r=t/2,i=t*fV,s=r,o=t*fV+t,a=-s,c=o;n.moveTo(r,i),n.lineTo(s,o),n.lineTo(a,c),n.lineTo(rc*r-ic*i,ic*r+rc*i),n.lineTo(rc*s-ic*o,ic*s+rc*o),n.lineTo(rc*a-ic*c,ic*a+rc*c),n.lineTo(rc*r+ic*i,rc*i-ic*r),n.lineTo(rc*s+ic*o,rc*o-ic*s),n.lineTo(rc*a+ic*c,rc*c-ic*a),n.closePath()}};function jet(n,e){let t=null,r=RH(i);n=typeof n=="function"?n:kr(n||DH),e=typeof e=="function"?e:kr(e===void 0?64:+e);function i(){let s;if(t||(t=s=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),s)return t=null,s+""||null}return i.type=function(s){return arguments.length?(n=typeof s=="function"?s:kr(s),i):n},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:kr(+s),i):e},i.context=function(s){return arguments.length?(t=s??null,i):t},i}function kO(){}function CO(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function Xxe(n){this._context=n}Xxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:CO(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:CO(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Pet(n){return new Xxe(n)}function Jxe(n){this._context=n}Jxe.prototype={areaStart:kO,areaEnd:kO,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:CO(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Iet(n){return new Jxe(n)}function Qxe(n){this._context=n}Qxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:CO(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function Oet(n){return new Qxe(n)}function Zxe(n){this._context=n}Zxe.prototype={areaStart:kO,areaEnd:kO,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function Ret(n){return new Zxe(n)}function Cte(n){return n<0?-1:1}function Ete(n,e,t){var r=n._x1-n._x0,i=e-n._x1,s=(n._y1-n._y0)/(r||i<0&&-0),o=(t-n._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Cte(s)+Cte(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Tte(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function m6(n,e,t){var r=n._x0,i=n._y0,s=n._x1,o=n._y1,a=(s-r)/3;n._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*t,s,o)}function EO(n){this._context=n}EO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:m6(this,this._t0,Tte(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,m6(this,Tte(this,t=Ete(this,n,e)),t);break;default:m6(this,this._t0,t=Ete(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function ebe(n){this._context=new tbe(n)}(ebe.prototype=Object.create(EO.prototype)).point=function(n,e){EO.prototype.point.call(this,e,n)};function tbe(n){this._context=n}tbe.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,s){this._context.bezierCurveTo(e,n,r,t,s,i)}};function Met(n){return new EO(n)}function Det(n){return new ebe(n)}function nbe(n){this._context=n}nbe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=Ate(n),i=Ate(e),s=0,o=1;o<t;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function Ate(n){var e,t=n.length-1,r,i=new Array(t),s=new Array(t),o=new Array(t);for(i[0]=0,s[0]=2,o[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,s[e]=4,o[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,s[t-1]=7,o[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[t-1]=o[t-1]/s[t-1],e=t-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)s[e]=2*n[e+1]-i[e+1];return[i,s]}function Let(n){return new nbe(n)}function b3(n,e){this._context=n,this._t=e}b3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function Fet(n){return new b3(n,.5)}function Bet(n){return new b3(n,0)}function $et(n){return new b3(n,1)}function N_(n,e){if((o=n.length)>1)for(var t=1,r,i,s=n[e[0]],o,a=s.length;t<o;++t)for(i=s,s=n[e[t]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function mV(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function Vet(n,e){return n[e]}function Uet(n){const e=[];return e.key=n,e}function zet(){var n=kr([]),e=mV,t=N_,r=Vet;function i(s){var o=Array.from(n.apply(this,arguments),Uet),a,c=o.length,u=-1,d;for(const h of s)for(a=0,++u;a<c;++a)(o[a][u]=[0,+r(h,o[a].key,u,s)]).data=h;for(a=0,d=MH(e(o));a<c;++a)o[d[a]].index=a;return t(o,d),o}return i.keys=function(s){return arguments.length?(n=typeof s=="function"?s:kr(Array.from(s)),i):n},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:kr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?mV:typeof s=="function"?s:kr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(t=s??N_,i):t},i}function Het(n,e){if((r=n.length)>0){for(var t,r,i=0,s=n[0].length,o;i<s;++i){for(o=t=0;t<r;++t)o+=n[t][i][1]||0;if(o)for(t=0;t<r;++t)n[t][i][1]/=o}N_(n,e)}}function Wet(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,s=r.length;t<s;++t){for(var o=0,a=0;o<i;++o)a+=n[o][t][1]||0;r[t][1]+=r[t][0]=-a/2}N_(n,e)}}function qet(n,e){if(!(!((o=n.length)>0)||!((s=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,s,o;r<s;++r){for(var a=0,c=0,u=0;a<o;++a){for(var d=n[e[a]],h=d[r][1]||0,f=d[r-1][1]||0,p=(h-f)/2,x=0;x<a;++x){var y=n[e[x]],b=y[r][1]||0,_=y[r-1][1]||0;p+=b-_}c+=h,u+=p*h}i[r-1][1]+=i[r-1][0]=t,c&&(t-=u/c)}i[r-1][1]+=i[r-1][0]=t,N_(n,e)}}function RE(n){"@babel/helpers - typeof";return RE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RE(n)}var Get=["type","size","sizeType"];function pV(){return pV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pV.apply(this,arguments)}function Nte(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jte(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nte(Object(t),!0).forEach(function(r){Ket(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Nte(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ket(n,e,t){return e=Yet(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yet(n){var e=Xet(n,"string");return RE(e)=="symbol"?e:e+""}function Xet(n,e){if(RE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(RE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jet(n,e){if(n==null)return{};var t=Qet(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Qet(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var rbe={symbolCircle:DH,symbolCross:yet,symbolDiamond:bet,symbolSquare:wet,symbolStar:Eet,symbolTriangle:Tet,symbolWye:Net},Zet=Math.PI/180,ett=function(e){var t="symbol".concat(v3(e));return rbe[t]||DH},ttt=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Zet;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ntt=function(e,t){rbe["symbol".concat(v3(e))]=t},LH=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,s=i===void 0?64:i,o=e.sizeType,a=o===void 0?"area":o,c=Jet(e,Get),u=jte(jte({},c),{},{type:r,size:s,sizeType:a}),d=function(){var b=ett(r),_=jet().type(b).size(ttt(s,a,r));return _()},h=u.className,f=u.cx,p=u.cy,x=Wt(u,!0);return f===+f&&p===+p&&s===+s?re.createElement("path",pV({},x,{className:rn("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:d()})):null};LH.registerSymbol=ntt;function j_(n){"@babel/helpers - typeof";return j_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j_(n)}function gV(){return gV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gV.apply(this,arguments)}function Pte(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function rtt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pte(Object(t),!0).forEach(function(r){ME(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pte(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function itt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function stt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,sbe(r.key),r)}}function ott(n,e,t){return e&&stt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function att(n,e,t){return e=TO(e),ltt(n,ibe()?Reflect.construct(e,t||[],TO(n).constructor):e.apply(n,t))}function ltt(n,e){if(e&&(j_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ctt(n)}function ctt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ibe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ibe=function(){return!!n})()}function TO(n){return TO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},TO(n)}function utt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vV(n,e)}function vV(n,e){return vV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vV(n,e)}function ME(n,e,t){return e=sbe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sbe(n){var e=dtt(n,"string");return j_(e)=="symbol"?e:e+""}function dtt(n,e){if(j_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(j_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var sc=32,FH=(function(n){function e(){return itt(this,e),att(this,e,arguments)}return utt(e,n),ott(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=sc/2,o=sc/6,a=sc/3,c=r.inactive?i:r.color;if(r.type==="plainline")return re.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:sc,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return re.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(sc,"M").concat(2*a,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return re.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(sc/8,"h").concat(sc,"v").concat(sc*3/4,"h").concat(-sc,"z"),className:"recharts-legend-icon"});if(re.isValidElement(r.legendIcon)){var u=rtt({},r);return delete u.legendIcon,re.cloneElement(r.legendIcon,u)}return re.createElement(LH,{fill:c,cx:s,cy:s,size:sc,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,o=i.iconSize,a=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:sc,height:sc},h={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,x){var y=p.formatter||c,b=rn(ME(ME({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",p.inactive));if(p.type==="none")return null;var _=nn(p.value)?null:p.value;Nu(!nn(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var C=p.inactive?u:p.color;return re.createElement("li",gV({className:b,style:h,key:"legend-item-".concat(x)},sx(r.props,p,x)),re.createElement(cV,{width:o,height:o,viewBox:d,style:f},r.renderIcon(p)),re.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},y?y(_,p,x):_))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,o=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return re.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])})(S.PureComponent);ME(FH,"displayName","Legend");ME(FH,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var p6,Ite;function htt(){if(Ite)return p6;Ite=1;var n=m3();function e(){this.__data__=new n,this.size=0}return p6=e,p6}var g6,Ote;function ftt(){if(Ote)return g6;Ote=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return g6=n,g6}var v6,Rte;function mtt(){if(Rte)return v6;Rte=1;function n(e){return this.__data__.get(e)}return v6=n,v6}var y6,Mte;function ptt(){if(Mte)return y6;Mte=1;function n(e){return this.__data__.has(e)}return y6=n,y6}var x6,Dte;function gtt(){if(Dte)return x6;Dte=1;var n=m3(),e=AH(),t=NH(),r=200;function i(s,o){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<r-1)return c.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(s,o),this.size=a.size,this}return x6=i,x6}var b6,Lte;function obe(){if(Lte)return b6;Lte=1;var n=m3(),e=htt(),t=ftt(),r=mtt(),i=ptt(),s=gtt();function o(a){var c=this.__data__=new n(a);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,b6=o,b6}var w6,Fte;function vtt(){if(Fte)return w6;Fte=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return w6=e,w6}var _6,Bte;function ytt(){if(Bte)return _6;Bte=1;function n(e){return this.__data__.has(e)}return _6=n,_6}var S6,$te;function abe(){if($te)return S6;$te=1;var n=NH(),e=vtt(),t=ytt();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new n;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,S6=r,S6}var k6,Vte;function lbe(){if(Vte)return k6;Vte=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return k6=n,k6}var C6,Ute;function cbe(){if(Ute)return C6;Ute=1;function n(e,t){return e.has(t)}return C6=n,C6}var E6,zte;function ube(){if(zte)return E6;zte=1;var n=abe(),e=lbe(),t=cbe(),r=1,i=2;function s(o,a,c,u,d,h){var f=c&r,p=o.length,x=a.length;if(p!=x&&!(f&&x>p))return!1;var y=h.get(o),b=h.get(a);if(y&&b)return y==a&&b==o;var _=-1,C=!0,k=c&i?new n:void 0;for(h.set(o,a),h.set(a,o);++_<p;){var T=o[_],E=a[_];if(u)var N=f?u(E,T,_,a,o,h):u(T,E,_,o,a,h);if(N!==void 0){if(N)continue;C=!1;break}if(k){if(!e(a,function(P,M){if(!t(k,M)&&(T===P||d(T,P,c,u,h)))return k.push(M)})){C=!1;break}}else if(!(T===E||d(T,E,c,u,h))){C=!1;break}}return h.delete(o),h.delete(a),C}return E6=s,E6}var T6,Hte;function xtt(){if(Hte)return T6;Hte=1;var n=Sh(),e=n.Uint8Array;return T6=e,T6}var A6,Wte;function btt(){if(Wte)return A6;Wte=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return A6=n,A6}var N6,qte;function BH(){if(qte)return N6;qte=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return N6=n,N6}var j6,Gte;function wtt(){if(Gte)return j6;Gte=1;var n=GA(),e=xtt(),t=TH(),r=ube(),i=btt(),s=BH(),o=1,a=2,c="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Map]",f="[object Number]",p="[object RegExp]",x="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",C="[object DataView]",k=n?n.prototype:void 0,T=k?k.valueOf:void 0;function E(N,P,M,O,q,D,F){switch(M){case C:if(N.byteLength!=P.byteLength||N.byteOffset!=P.byteOffset)return!1;N=N.buffer,P=P.buffer;case _:return!(N.byteLength!=P.byteLength||!D(new e(N),new e(P)));case c:case u:case f:return t(+N,+P);case d:return N.name==P.name&&N.message==P.message;case p:case y:return N==P+"";case h:var K=i;case x:var ee=O&o;if(K||(K=s),N.size!=P.size&&!ee)return!1;var Y=F.get(N);if(Y)return Y==P;O|=a,F.set(N,P);var U=r(K(N),K(P),O,q,D,F);return F.delete(N),U;case b:if(T)return T.call(N)==T.call(P)}return!1}return j6=E,j6}var P6,Kte;function dbe(){if(Kte)return P6;Kte=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return P6=n,P6}var I6,Yte;function _tt(){if(Yte)return I6;Yte=1;var n=dbe(),e=Ha();function t(r,i,s){var o=i(r);return e(r)?o:n(o,s(r))}return I6=t,I6}var O6,Xte;function Stt(){if(Xte)return O6;Xte=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var a=e[r];t(a,r,e)&&(o[s++]=a)}return o}return O6=n,O6}var R6,Jte;function ktt(){if(Jte)return R6;Jte=1;function n(){return[]}return R6=n,R6}var M6,Qte;function Ctt(){if(Qte)return M6;Qte=1;var n=Stt(),e=ktt(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(a){return r.call(o,a)}))}:e;return M6=s,M6}var D6,Zte;function Ett(){if(Zte)return D6;Zte=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return D6=n,D6}var L6,ene;function Ttt(){if(ene)return L6;ene=1;var n=Tm(),e=Am(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return L6=r,L6}var F6,tne;function $H(){if(tne)return F6;tne=1;var n=Ttt(),e=Am(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n((function(){return arguments})())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return F6=s,F6}var fC={exports:{}},B6,nne;function Att(){if(nne)return B6;nne=1;function n(){return!1}return B6=n,B6}fC.exports;var rne;function hbe(){return rne||(rne=1,(function(n,e){var t=Sh(),r=Att(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,c=a?a.isBuffer:void 0,u=c||r;n.exports=u})(fC,fC.exports)),fC.exports}var $6,ine;function VH(){if(ine)return $6;ine=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return $6=t,$6}var V6,sne;function UH(){if(sne)return V6;sne=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return V6=e,V6}var U6,one;function Ntt(){if(one)return U6;one=1;var n=Tm(),e=UH(),t=Am(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",f="[object RegExp]",p="[object Set]",x="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",C="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",E="[object Int16Array]",N="[object Int32Array]",P="[object Uint8Array]",M="[object Uint8ClampedArray]",O="[object Uint16Array]",q="[object Uint32Array]",D={};D[C]=D[k]=D[T]=D[E]=D[N]=D[P]=D[M]=D[O]=D[q]=!0,D[r]=D[i]=D[b]=D[s]=D[_]=D[o]=D[a]=D[c]=D[u]=D[d]=D[h]=D[f]=D[p]=D[x]=D[y]=!1;function F(K){return t(K)&&e(K.length)&&!!D[n(K)]}return U6=F,U6}var z6,ane;function fbe(){if(ane)return z6;ane=1;function n(e){return function(t){return e(t)}}return z6=n,z6}var mC={exports:{}};mC.exports;var lne;function jtt(){return lne||(lne=1,(function(n,e){var t=Oxe(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=(function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();n.exports=a})(mC,mC.exports)),mC.exports}var H6,cne;function mbe(){if(cne)return H6;cne=1;var n=Ntt(),e=fbe(),t=jtt(),r=t&&t.isTypedArray,i=r?e(r):n;return H6=i,H6}var W6,une;function Ptt(){if(une)return W6;une=1;var n=Ett(),e=$H(),t=Ha(),r=hbe(),i=VH(),s=mbe(),o=Object.prototype,a=o.hasOwnProperty;function c(u,d){var h=t(u),f=!h&&e(u),p=!h&&!f&&r(u),x=!h&&!f&&!p&&s(u),y=h||f||p||x,b=y?n(u.length,String):[],_=b.length;for(var C in u)(d||a.call(u,C))&&!(y&&(C=="length"||p&&(C=="offset"||C=="parent")||x&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||i(C,_)))&&b.push(C);return b}return W6=c,W6}var q6,dne;function Itt(){if(dne)return q6;dne=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return q6=e,q6}var G6,hne;function pbe(){if(hne)return G6;hne=1;function n(e,t){return function(r){return e(t(r))}}return G6=n,G6}var K6,fne;function Ott(){if(fne)return K6;fne=1;var n=pbe(),e=n(Object.keys,Object);return K6=e,K6}var Y6,mne;function Rtt(){if(mne)return Y6;mne=1;var n=Itt(),e=Ott(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var o=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&o.push(a);return o}return Y6=i,Y6}var X6,pne;function YA(){if(pne)return X6;pne=1;var n=EH(),e=UH();function t(r){return r!=null&&e(r.length)&&!n(r)}return X6=t,X6}var J6,gne;function w3(){if(gne)return J6;gne=1;var n=Ptt(),e=Rtt(),t=YA();function r(i){return t(i)?n(i):e(i)}return J6=r,J6}var Q6,vne;function Mtt(){if(vne)return Q6;vne=1;var n=_tt(),e=Ctt(),t=w3();function r(i){return n(i,t,e)}return Q6=r,Q6}var Z6,yne;function Dtt(){if(yne)return Z6;yne=1;var n=Mtt(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,o,a,c,u,d){var h=a&e,f=n(s),p=f.length,x=n(o),y=x.length;if(p!=y&&!h)return!1;for(var b=p;b--;){var _=f[b];if(!(h?_ in o:r.call(o,_)))return!1}var C=d.get(s),k=d.get(o);if(C&&k)return C==o&&k==s;var T=!0;d.set(s,o),d.set(o,s);for(var E=h;++b<p;){_=f[b];var N=s[_],P=o[_];if(c)var M=h?c(P,N,_,o,s,d):c(N,P,_,s,o,d);if(!(M===void 0?N===P||u(N,P,a,c,d):M)){T=!1;break}E||(E=_=="constructor")}if(T&&!E){var O=s.constructor,q=o.constructor;O!=q&&"constructor"in s&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof q=="function"&&q instanceof q)&&(T=!1)}return d.delete(s),d.delete(o),T}return Z6=i,Z6}var eF,xne;function Ltt(){if(xne)return eF;xne=1;var n=bx(),e=Sh(),t=n(e,"DataView");return eF=t,eF}var tF,bne;function Ftt(){if(bne)return tF;bne=1;var n=bx(),e=Sh(),t=n(e,"Promise");return tF=t,tF}var nF,wne;function gbe(){if(wne)return nF;wne=1;var n=bx(),e=Sh(),t=n(e,"Set");return nF=t,nF}var rF,_ne;function Btt(){if(_ne)return rF;_ne=1;var n=bx(),e=Sh(),t=n(e,"WeakMap");return rF=t,rF}var iF,Sne;function $tt(){if(Sne)return iF;Sne=1;var n=Ltt(),e=AH(),t=Ftt(),r=gbe(),i=Btt(),s=Tm(),o=Rxe(),a="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",f="[object DataView]",p=o(n),x=o(e),y=o(t),b=o(r),_=o(i),C=s;return(n&&C(new n(new ArrayBuffer(1)))!=f||e&&C(new e)!=a||t&&C(t.resolve())!=u||r&&C(new r)!=d||i&&C(new i)!=h)&&(C=function(k){var T=s(k),E=T==c?k.constructor:void 0,N=E?o(E):"";if(N)switch(N){case p:return f;case x:return a;case y:return u;case b:return d;case _:return h}return T}),iF=C,iF}var sF,kne;function Vtt(){if(kne)return sF;kne=1;var n=obe(),e=ube(),t=wtt(),r=Dtt(),i=$tt(),s=Ha(),o=hbe(),a=mbe(),c=1,u="[object Arguments]",d="[object Array]",h="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function x(y,b,_,C,k,T){var E=s(y),N=s(b),P=E?d:i(y),M=N?d:i(b);P=P==u?h:P,M=M==u?h:M;var O=P==h,q=M==h,D=P==M;if(D&&o(y)){if(!o(b))return!1;E=!0,O=!1}if(D&&!O)return T||(T=new n),E||a(y)?e(y,b,_,C,k,T):t(y,b,P,_,C,k,T);if(!(_&c)){var F=O&&p.call(y,"__wrapped__"),K=q&&p.call(b,"__wrapped__");if(F||K){var ee=F?y.value():y,Y=K?b.value():b;return T||(T=new n),k(ee,Y,_,C,T)}}return D?(T||(T=new n),r(y,b,_,C,k,T)):!1}return sF=x,sF}var oF,Cne;function zH(){if(Cne)return oF;Cne=1;var n=Vtt(),e=Am();function t(r,i,s,o,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,o,t,a)}return oF=t,oF}var aF,Ene;function Utt(){if(Ene)return aF;Ene=1;var n=obe(),e=zH(),t=1,r=2;function i(s,o,a,c){var u=a.length,d=u,h=!c;if(s==null)return!d;for(s=Object(s);u--;){var f=a[u];if(h&&f[2]?f[1]!==s[f[0]]:!(f[0]in s))return!1}for(;++u<d;){f=a[u];var p=f[0],x=s[p],y=f[1];if(h&&f[2]){if(x===void 0&&!(p in s))return!1}else{var b=new n;if(c)var _=c(x,y,p,s,o,b);if(!(_===void 0?e(y,x,t|r,c,b):_))return!1}}return!0}return aF=i,aF}var lF,Tne;function vbe(){if(Tne)return lF;Tne=1;var n=ov();function e(t){return t===t&&!n(t)}return lF=e,lF}var cF,Ane;function ztt(){if(Ane)return cF;Ane=1;var n=vbe(),e=w3();function t(r){for(var i=e(r),s=i.length;s--;){var o=i[s],a=r[o];i[s]=[o,a,n(a)]}return i}return cF=t,cF}var uF,Nne;function ybe(){if(Nne)return uF;Nne=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return uF=n,uF}var dF,jne;function Htt(){if(jne)return dF;jne=1;var n=Utt(),e=ztt(),t=ybe();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(o){return o===i||n(o,i,s)}}return dF=r,dF}var hF,Pne;function Wtt(){if(Pne)return hF;Pne=1;function n(e,t){return e!=null&&t in Object(e)}return hF=n,hF}var fF,Ine;function qtt(){if(Ine)return fF;Ine=1;var n=Lxe(),e=$H(),t=Ha(),r=VH(),i=UH(),s=g3();function o(a,c,u){c=n(c,a);for(var d=-1,h=c.length,f=!1;++d<h;){var p=s(c[d]);if(!(f=a!=null&&u(a,p)))break;a=a[p]}return f||++d!=h?f:(h=a==null?0:a.length,!!h&&i(h)&&r(p,h)&&(t(a)||e(a)))}return fF=o,fF}var mF,One;function Gtt(){if(One)return mF;One=1;var n=Wtt(),e=qtt();function t(r,i){return r!=null&&e(r,i,n)}return mF=t,mF}var pF,Rne;function Ktt(){if(Rne)return pF;Rne=1;var n=zH(),e=Fxe(),t=Gtt(),r=CH(),i=vbe(),s=ybe(),o=g3(),a=1,c=2;function u(d,h){return r(d)&&i(h)?s(o(d),h):function(f){var p=e(f,d);return p===void 0&&p===h?t(f,d):n(h,p,a|c)}}return pF=u,pF}var gF,Mne;function _S(){if(Mne)return gF;Mne=1;function n(e){return e}return gF=n,gF}var vF,Dne;function Ytt(){if(Dne)return vF;Dne=1;function n(e){return function(t){return t==null?void 0:t[e]}}return vF=n,vF}var yF,Lne;function Xtt(){if(Lne)return yF;Lne=1;var n=PH();function e(t){return function(r){return n(r,t)}}return yF=e,yF}var xF,Fne;function Jtt(){if(Fne)return xF;Fne=1;var n=Ytt(),e=Xtt(),t=CH(),r=g3();function i(s){return t(s)?n(r(s)):e(s)}return xF=i,xF}var bF,Bne;function kh(){if(Bne)return bF;Bne=1;var n=Htt(),e=Ktt(),t=_S(),r=Ha(),i=Jtt();function s(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?r(o)?e(o[0],o[1]):n(o):i(o)}return bF=s,bF}var wF,$ne;function xbe(){if($ne)return wF;$ne=1;function n(e,t,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(t(e[o],o,e))return o;return-1}return wF=n,wF}var _F,Vne;function Qtt(){if(Vne)return _F;Vne=1;function n(e){return e!==e}return _F=n,_F}var SF,Une;function Ztt(){if(Une)return SF;Une=1;function n(e,t,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===t)return i;return-1}return SF=n,SF}var kF,zne;function ent(){if(zne)return kF;zne=1;var n=xbe(),e=Qtt(),t=Ztt();function r(i,s,o){return s===s?t(i,s,o):n(i,e,o)}return kF=r,kF}var CF,Hne;function tnt(){if(Hne)return CF;Hne=1;var n=ent();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return CF=e,CF}var EF,Wne;function nnt(){if(Wne)return EF;Wne=1;function n(e,t,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(t,e[i]))return!0;return!1}return EF=n,EF}var TF,qne;function rnt(){if(qne)return TF;qne=1;function n(){}return TF=n,TF}var AF,Gne;function int(){if(Gne)return AF;Gne=1;var n=gbe(),e=rnt(),t=BH(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(s){return new n(s)}:e;return AF=i,AF}var NF,Kne;function snt(){if(Kne)return NF;Kne=1;var n=abe(),e=tnt(),t=nnt(),r=cbe(),i=int(),s=BH(),o=200;function a(c,u,d){var h=-1,f=e,p=c.length,x=!0,y=[],b=y;if(d)x=!1,f=t;else if(p>=o){var _=u?null:i(c);if(_)return s(_);x=!1,f=r,b=new n}else b=u?[]:y;e:for(;++h<p;){var C=c[h],k=u?u(C):C;if(C=d||C!==0?C:0,x&&k===k){for(var T=b.length;T--;)if(b[T]===k)continue e;u&&b.push(k),y.push(C)}else f(b,k,d)||(b!==y&&b.push(k),y.push(C))}return y}return NF=a,NF}var jF,Yne;function ont(){if(Yne)return jF;Yne=1;var n=kh(),e=snt();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return jF=t,jF}var ant=ont();const Xne=qn(ant);function bbe(n,e,t){return e===!0?Xne(n,t):nn(e)?Xne(n,e):n}function P_(n){"@babel/helpers - typeof";return P_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P_(n)}var lnt=["ref"];function Jne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jne(Object(t),!0).forEach(function(r){_3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Jne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cnt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Qne(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,_be(r.key),r)}}function unt(n,e,t){return e&&Qne(n.prototype,e),t&&Qne(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function dnt(n,e,t){return e=AO(e),hnt(n,wbe()?Reflect.construct(e,t||[],AO(n).constructor):e.apply(n,t))}function hnt(n,e){if(e&&(P_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fnt(n)}function fnt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wbe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wbe=function(){return!!n})()}function AO(n){return AO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},AO(n)}function mnt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&yV(n,e)}function yV(n,e){return yV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yV(n,e)}function _3(n,e,t){return e=_be(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _be(n){var e=pnt(n,"string");return P_(e)=="symbol"?e:e+""}function pnt(n,e){if(P_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(P_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function gnt(n,e){if(n==null)return{};var t=vnt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function vnt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function ynt(n){return n.value}function xnt(n,e){if(re.isValidElement(n))return re.cloneElement(n,e);if(typeof n=="function")return re.createElement(n,e);e.ref;var t=gnt(e,lnt);return re.createElement(FH,t)}var Zne=1,ju=(function(n){function e(){var t;cnt(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=dnt(this,e,[].concat(i)),_3(t,"lastBoundingBox",{width:-1,height:-1}),t}return mnt(e,n),unt(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Zne||Math.abs(i.height-this.lastBoundingBox.height)>Zne)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Gh({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,o=i.align,a=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();h={left:((u||0)-p.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var x=this.getBBoxSnapshot();f={top:((d||0)-x.height)/2}}else f=a==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Gh(Gh({},h),f)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,o=i.width,a=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=Gh(Gh({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(c)),c);return re.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){r.wrapperNode=p}},xnt(s,Gh(Gh({},this.props),{},{payload:bbe(d,u,ynt)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Gh(Gh({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&ut(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])})(S.PureComponent);_3(ju,"displayName","Legend");_3(ju,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var PF,ere;function bnt(){if(ere)return PF;ere=1;var n=GA(),e=$H(),t=Ha(),r=n?n.isConcatSpreadable:void 0;function i(s){return t(s)||e(s)||!!(r&&s&&s[r])}return PF=i,PF}var IF,tre;function Sbe(){if(tre)return IF;tre=1;var n=dbe(),e=bnt();function t(r,i,s,o,a){var c=-1,u=r.length;for(s||(s=e),a||(a=[]);++c<u;){var d=r[c];i>0&&s(d)?i>1?t(d,i-1,s,o,a):n(a,d):o||(a[a.length]=d)}return a}return IF=t,IF}var OF,nre;function wnt(){if(nre)return OF;nre=1;function n(e){return function(t,r,i){for(var s=-1,o=Object(t),a=i(t),c=a.length;c--;){var u=a[e?c:++s];if(r(o[u],u,o)===!1)break}return t}}return OF=n,OF}var RF,rre;function _nt(){if(rre)return RF;rre=1;var n=wnt(),e=n();return RF=e,RF}var MF,ire;function kbe(){if(ire)return MF;ire=1;var n=_nt(),e=w3();function t(r,i){return r&&n(r,i,e)}return MF=t,MF}var DF,sre;function Snt(){if(sre)return DF;sre=1;var n=YA();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var o=i.length,a=r?o:-1,c=Object(i);(r?a--:++a<o)&&s(c[a],a,c)!==!1;);return i}}return DF=e,DF}var LF,ore;function HH(){if(ore)return LF;ore=1;var n=kbe(),e=Snt(),t=e(n);return LF=t,LF}var FF,are;function Cbe(){if(are)return FF;are=1;var n=HH(),e=YA();function t(r,i){var s=-1,o=e(r)?Array(r.length):[];return n(r,function(a,c,u){o[++s]=i(a,c,u)}),o}return FF=t,FF}var BF,lre;function knt(){if(lre)return BF;lre=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return BF=n,BF}var $F,cre;function Cnt(){if(cre)return $F;cre=1;var n=xS();function e(t,r){if(t!==r){var i=t!==void 0,s=t===null,o=t===t,a=n(t),c=r!==void 0,u=r===null,d=r===r,h=n(r);if(!u&&!h&&!a&&t>r||a&&c&&d&&!u&&!h||s&&c&&d||!i&&d||!o)return 1;if(!s&&!a&&!h&&t<r||h&&i&&o&&!s&&!a||u&&i&&o||!c&&o||!d)return-1}return 0}return $F=e,$F}var VF,ure;function Ent(){if(ure)return VF;ure=1;var n=Cnt();function e(t,r,i){for(var s=-1,o=t.criteria,a=r.criteria,c=o.length,u=i.length;++s<c;){var d=n(o[s],a[s]);if(d){if(s>=u)return d;var h=i[s];return d*(h=="desc"?-1:1)}}return t.index-r.index}return VF=e,VF}var UF,dre;function Tnt(){if(dre)return UF;dre=1;var n=jH(),e=PH(),t=kh(),r=Cbe(),i=knt(),s=fbe(),o=Ent(),a=_S(),c=Ha();function u(d,h,f){h.length?h=n(h,function(y){return c(y)?function(b){return e(b,y.length===1?y[0]:y)}:y}):h=[a];var p=-1;h=n(h,s(t));var x=r(d,function(y,b,_){var C=n(h,function(k){return k(y)});return{criteria:C,index:++p,value:y}});return i(x,function(y,b){return o(y,b,f)})}return UF=u,UF}var zF,hre;function Ant(){if(hre)return zF;hre=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return zF=n,zF}var HF,fre;function Nnt(){if(fre)return HF;fre=1;var n=Ant(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,a=-1,c=e(o.length-i,0),u=Array(c);++a<c;)u[a]=o[i+a];a=-1;for(var d=Array(i+1);++a<i;)d[a]=o[a];return d[i]=s(u),n(r,this,d)}}return HF=t,HF}var WF,mre;function jnt(){if(mre)return WF;mre=1;function n(e){return function(){return e}}return WF=n,WF}var qF,pre;function Ebe(){if(pre)return qF;pre=1;var n=bx(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return qF=e,qF}var GF,gre;function Pnt(){if(gre)return GF;gre=1;var n=jnt(),e=Ebe(),t=_S(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return GF=r,GF}var KF,vre;function Int(){if(vre)return KF;vre=1;var n=800,e=16,t=Date.now;function r(i){var s=0,o=0;return function(){var a=t(),c=e-(a-o);if(o=a,c>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return KF=r,KF}var YF,yre;function Ont(){if(yre)return YF;yre=1;var n=Pnt(),e=Int(),t=e(n);return YF=t,YF}var XF,xre;function Rnt(){if(xre)return XF;xre=1;var n=_S(),e=Nnt(),t=Ont();function r(i,s){return t(e(i,s,n),i+"")}return XF=r,XF}var JF,bre;function S3(){if(bre)return JF;bre=1;var n=TH(),e=YA(),t=VH(),r=ov();function i(s,o,a){if(!r(a))return!1;var c=typeof o;return(c=="number"?e(a)&&t(o,a.length):c=="string"&&o in a)?n(a[o],s):!1}return JF=i,JF}var QF,wre;function Mnt(){if(wre)return QF;wre=1;var n=Sbe(),e=Tnt(),t=Rnt(),r=S3(),i=t(function(s,o){if(s==null)return[];var a=o.length;return a>1&&r(s,o[0],o[1])?o=[]:a>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(s,n(o,1),[])});return QF=i,QF}var Dnt=Mnt();const WH=qn(Dnt);function DE(n){"@babel/helpers - typeof";return DE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DE(n)}function xV(){return xV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xV.apply(this,arguments)}function Lnt(n,e){return Vnt(n)||$nt(n,e)||Bnt(n,e)||Fnt()}function Fnt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bnt(n,e){if(n){if(typeof n=="string")return _re(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _re(n,e)}}function _re(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function $nt(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Vnt(n){if(Array.isArray(n))return n}function Sre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ZF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sre(Object(t),!0).forEach(function(r){Unt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Unt(n,e,t){return e=znt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function znt(n){var e=Hnt(n,"string");return DE(e)=="symbol"?e:e+""}function Hnt(n,e){if(DE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(DE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wnt(n){return Array.isArray(n)&&ss(n[0])&&ss(n[1])?n.join(" ~ "):n}var qnt=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,a=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,p=e.wrapperClassName,x=e.labelClassName,y=e.label,b=e.labelFormatter,_=e.accessibilityLayer,C=_===void 0?!1:_,k=function(){if(d&&d.length){var F={padding:0,margin:0},K=(f?WH(d,f):d).map(function(ee,Y){if(ee.type==="none")return null;var U=ZF({display:"block",paddingTop:4,paddingBottom:4,color:ee.color||"#000"},a),R=ee.formatter||h||Wnt,z=ee.value,W=ee.name,se=z,ne=W;if(R&&se!=null&&ne!=null){var te=R(z,W,ee,Y,d);if(Array.isArray(te)){var H=Lnt(te,2);se=H[0],ne=H[1]}else se=te}return re.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:U},ss(ne)?re.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,ss(ne)?re.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,re.createElement("span",{className:"recharts-tooltip-item-value"},se),re.createElement("span",{className:"recharts-tooltip-item-unit"},ee.unit||""))});return re.createElement("ul",{className:"recharts-tooltip-item-list",style:F},K)}return null},T=ZF({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),E=ZF({margin:0},u),N=!un(y),P=N?y:"",M=rn("recharts-default-tooltip",p),O=rn("recharts-tooltip-label",x);N&&b&&d!==void 0&&d!==null&&(P=b(y,d));var q=C?{role:"status","aria-live":"assertive"}:{};return re.createElement("div",xV({className:M,style:T},q),re.createElement("p",{className:O,style:E},re.isValidElement(P)?P:"".concat(P)),k())};function LE(n){"@babel/helpers - typeof";return LE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LE(n)}function Wj(n,e,t){return e=Gnt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gnt(n){var e=Knt(n,"string");return LE(e)=="symbol"?e:e+""}function Knt(n,e){if(LE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(LE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Ck="recharts-tooltip-wrapper",Ynt={visibility:"hidden"};function Xnt(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return rn(Ck,Wj(Wj(Wj(Wj({},"".concat(Ck,"-right"),ut(t)&&e&&ut(e.x)&&t>=e.x),"".concat(Ck,"-left"),ut(t)&&e&&ut(e.x)&&t<e.x),"".concat(Ck,"-bottom"),ut(r)&&e&&ut(e.y)&&r>=e.y),"".concat(Ck,"-top"),ut(r)&&e&&ut(e.y)&&r<e.y))}function kre(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,s=n.position,o=n.reverseDirection,a=n.tooltipDimension,c=n.viewBox,u=n.viewBoxDimension;if(s&&ut(s[r]))return s[r];var d=t[r]-a-i,h=t[r]+i;if(e[r])return o[r]?d:h;if(o[r]){var f=d,p=c[r];return f<p?Math.max(h,c[r]):Math.max(d,c[r])}var x=h+a,y=c[r]+u;return x>y?Math.max(d,c[r]):Math.max(h,c[r])}function Jnt(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function Qnt(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,s=n.reverseDirection,o=n.tooltipBox,a=n.useTranslate3d,c=n.viewBox,u,d,h;return o.height>0&&o.width>0&&t?(d=kre({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=kre({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Jnt({translateX:d,translateY:h,useTranslate3d:a})):u=Ynt,{cssProperties:u,cssClasses:Xnt({translateX:d,translateY:h,coordinate:t})}}function I_(n){"@babel/helpers - typeof";return I_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I_(n)}function Cre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ere(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cre(Object(t),!0).forEach(function(r){wV(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Znt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ert(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Abe(r.key),r)}}function trt(n,e,t){return e&&ert(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function nrt(n,e,t){return e=NO(e),rrt(n,Tbe()?Reflect.construct(e,t||[],NO(n).constructor):e.apply(n,t))}function rrt(n,e){if(e&&(I_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return irt(n)}function irt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Tbe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tbe=function(){return!!n})()}function NO(n){return NO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NO(n)}function srt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&bV(n,e)}function bV(n,e){return bV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bV(n,e)}function wV(n,e,t){return e=Abe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Abe(n){var e=ort(n,"string");return I_(e)=="symbol"?e:e+""}function ort(n,e){if(I_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(I_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Tre=1,art=(function(n){function e(){var t;Znt(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=nrt(this,e,[].concat(i)),wV(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),wV(t,"handleKeyDown",function(o){if(o.key==="Escape"){var a,c,u,d;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(c=t.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&a!==void 0?a:0,y:(u=(d=t.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),t}return srt(e,n),trt(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Tre||Math.abs(r.height-this.state.lastBoundingBox.height)>Tre)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,p=i.offset,x=i.position,y=i.reverseDirection,b=i.useTranslate3d,_=i.viewBox,C=i.wrapperStyle,k=Qnt({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:x,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:_}),T=k.cssClasses,E=k.cssProperties,N=Ere(Ere({transition:f&&s?"transform ".concat(a,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},C);return re.createElement("div",{tabIndex:-1,className:T,style:N,ref:function(M){r.wrapperNode=M}},u)}}])})(S.PureComponent),lrt=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},wx={isSsr:lrt()};function O_(n){"@babel/helpers - typeof";return O_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O_(n)}function Are(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Nre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Are(Object(t),!0).forEach(function(r){qH(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Are(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function crt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function urt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,jbe(r.key),r)}}function drt(n,e,t){return e&&urt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function hrt(n,e,t){return e=jO(e),frt(n,Nbe()?Reflect.construct(e,t||[],jO(n).constructor):e.apply(n,t))}function frt(n,e){if(e&&(O_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mrt(n)}function mrt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Nbe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nbe=function(){return!!n})()}function jO(n){return jO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jO(n)}function prt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&_V(n,e)}function _V(n,e){return _V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_V(n,e)}function qH(n,e,t){return e=jbe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jbe(n){var e=grt(n,"string");return O_(e)=="symbol"?e:e+""}function grt(n,e){if(O_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(O_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function vrt(n){return n.dataKey}function yrt(n,e){return re.isValidElement(n)?re.cloneElement(n,e):typeof n=="function"?re.createElement(n,e):re.createElement(qnt,e)}var Aa=(function(n){function e(){return crt(this,e),hrt(this,e,arguments)}return prt(e,n),drt(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,f=i.isAnimationActive,p=i.offset,x=i.payload,y=i.payloadUniqBy,b=i.position,_=i.reverseDirection,C=i.useTranslate3d,k=i.viewBox,T=i.wrapperStyle,E=x??[];h&&E.length&&(E=bbe(x.filter(function(P){return P.value!=null&&(P.hide!==!0||r.props.includeHidden)}),y,vrt));var N=E.length>0;return re.createElement(art,{allowEscapeViewBox:o,animationDuration:a,animationEasing:c,isAnimationActive:f,active:s,coordinate:d,hasPayload:N,offset:p,position:b,reverseDirection:_,useTranslate3d:C,viewBox:k,wrapperStyle:T},yrt(u,Nre(Nre({},this.props),{},{payload:E})))}}])})(S.PureComponent);qH(Aa,"displayName","Tooltip");qH(Aa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!wx.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var e8,jre;function xrt(){if(jre)return e8;jre=1;var n=Sh(),e=function(){return n.Date.now()};return e8=e,e8}var t8,Pre;function brt(){if(Pre)return t8;Pre=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return t8=e,t8}var n8,Ire;function wrt(){if(Ire)return n8;Ire=1;var n=brt(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return n8=t,n8}var r8,Ore;function Pbe(){if(Ore)return r8;Ore=1;var n=wrt(),e=ov(),t=xS(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function c(u){if(typeof u=="number")return u;if(t(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=n(u);var h=s.test(u);return h||o.test(u)?a(u.slice(2),h?2:8):i.test(u)?r:+u}return r8=c,r8}var i8,Rre;function _rt(){if(Rre)return i8;Rre=1;var n=ov(),e=xrt(),t=Pbe(),r="Expected a function",i=Math.max,s=Math.min;function o(a,c,u){var d,h,f,p,x,y,b=0,_=!1,C=!1,k=!0;if(typeof a!="function")throw new TypeError(r);c=t(c)||0,n(u)&&(_=!!u.leading,C="maxWait"in u,f=C?i(t(u.maxWait)||0,c):f,k="trailing"in u?!!u.trailing:k);function T(K){var ee=d,Y=h;return d=h=void 0,b=K,p=a.apply(Y,ee),p}function E(K){return b=K,x=setTimeout(M,c),_?T(K):p}function N(K){var ee=K-y,Y=K-b,U=c-ee;return C?s(U,f-Y):U}function P(K){var ee=K-y,Y=K-b;return y===void 0||ee>=c||ee<0||C&&Y>=f}function M(){var K=e();if(P(K))return O(K);x=setTimeout(M,N(K))}function O(K){return x=void 0,k&&d?T(K):(d=h=void 0,p)}function q(){x!==void 0&&clearTimeout(x),b=0,d=y=h=x=void 0}function D(){return x===void 0?p:O(e())}function F(){var K=e(),ee=P(K);if(d=arguments,h=this,y=K,ee){if(x===void 0)return E(y);if(C)return clearTimeout(x),x=setTimeout(M,c),T(y)}return x===void 0&&(x=setTimeout(M,c)),p}return F.cancel=q,F.flush=D,F}return i8=o,i8}var s8,Mre;function Srt(){if(Mre)return s8;Mre=1;var n=_rt(),e=ov(),t="Expected a function";function r(i,s,o){var a=!0,c=!0;if(typeof i!="function")throw new TypeError(t);return e(o)&&(a="leading"in o?!!o.leading:a,c="trailing"in o?!!o.trailing:c),n(i,s,{leading:a,maxWait:s,trailing:c})}return s8=r,s8}var krt=Srt();const Ibe=qn(krt);function FE(n){"@babel/helpers - typeof";return FE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FE(n)}function Dre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qj(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dre(Object(t),!0).forEach(function(r){Crt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Dre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Crt(n,e,t){return e=Ert(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ert(n){var e=Trt(n,"string");return FE(e)=="symbol"?e:e+""}function Trt(n,e){if(FE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(FE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Art(n,e){return Irt(n)||Prt(n,e)||jrt(n,e)||Nrt()}function Nrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jrt(n,e){if(n){if(typeof n=="string")return Lre(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Lre(n,e)}}function Lre(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Prt(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Irt(n){if(Array.isArray(n))return n}var BE=S.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=n.width,o=s===void 0?"100%":s,a=n.height,c=a===void 0?"100%":a,u=n.minWidth,d=u===void 0?0:u,h=n.minHeight,f=n.maxHeight,p=n.children,x=n.debounce,y=x===void 0?0:x,b=n.id,_=n.className,C=n.onResize,k=n.style,T=k===void 0?{}:k,E=S.useRef(null),N=S.useRef();N.current=C,S.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var P=S.useState({containerWidth:i.width,containerHeight:i.height}),M=Art(P,2),O=M[0],q=M[1],D=S.useCallback(function(K,ee){q(function(Y){var U=Math.round(K),R=Math.round(ee);return Y.containerWidth===U&&Y.containerHeight===R?Y:{containerWidth:U,containerHeight:R}})},[]);S.useEffect(function(){var K=function(W){var se,ne=W[0].contentRect,te=ne.width,H=ne.height;D(te,H),(se=N.current)===null||se===void 0||se.call(N,te,H)};y>0&&(K=Ibe(K,y,{trailing:!0,leading:!1}));var ee=new ResizeObserver(K),Y=E.current.getBoundingClientRect(),U=Y.width,R=Y.height;return D(U,R),ee.observe(E.current),function(){ee.disconnect()}},[D,y]);var F=S.useMemo(function(){var K=O.containerWidth,ee=O.containerHeight;if(K<0||ee<0)return null;Nu(hy(o)||hy(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Nu(!t||t>0,"The aspect(%s) must be greater than zero.",t);var Y=hy(o)?K:o,U=hy(c)?ee:c;t&&t>0&&(Y?U=Y/t:U&&(Y=U*t),f&&U>f&&(U=f)),Nu(Y>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,U,o,c,d,h,t);var R=!Array.isArray(p)&&Zf(p.type).endsWith("Chart");return re.Children.map(p,function(z){return re.isValidElement(z)?S.cloneElement(z,qj({width:Y,height:U},R?{style:qj({height:"100%",width:"100%",maxHeight:U,maxWidth:Y},z.props.style)}:{})):z})},[t,p,c,f,h,d,O,o]);return re.createElement("div",{id:b?"".concat(b):void 0,className:rn("recharts-responsive-container",_),style:qj(qj({},T),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:E},F)}),k3=function(e){return null};k3.displayName="Cell";function $E(n){"@babel/helpers - typeof";return $E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$E(n)}function Fre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function SV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fre(Object(t),!0).forEach(function(r){Ort(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ort(n,e,t){return e=Rrt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rrt(n){var e=Mrt(n,"string");return $E(e)=="symbol"?e:e+""}function Mrt(n,e){if($E(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($E(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var bb={widthCache:{},cacheCount:0},Drt=2e3,Lrt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Bre="recharts_measurement_span";function Frt(n){var e=SV({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var DC=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||wx.isSsr)return{width:0,height:0};var r=Frt(t),i=JSON.stringify({text:e,copyStyle:r});if(bb.widthCache[i])return bb.widthCache[i];try{var s=document.getElementById(Bre);s||(s=document.createElement("span"),s.setAttribute("id",Bre),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=SV(SV({},Lrt),r);Object.assign(s.style,o),s.textContent="".concat(e);var a=s.getBoundingClientRect(),c={width:a.width,height:a.height};return bb.widthCache[i]=c,++bb.cacheCount>Drt&&(bb.cacheCount=0,bb.widthCache={}),c}catch{return{width:0,height:0}}},Brt=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function VE(n){"@babel/helpers - typeof";return VE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VE(n)}function PO(n,e){return zrt(n)||Urt(n,e)||Vrt(n,e)||$rt()}function $rt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vrt(n,e){if(n){if(typeof n=="string")return $re(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $re(n,e)}}function $re(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Urt(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function zrt(n){if(Array.isArray(n))return n}function Hrt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Vre(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,qrt(r.key),r)}}function Wrt(n,e,t){return e&&Vre(n.prototype,e),t&&Vre(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function qrt(n){var e=Grt(n,"string");return VE(e)=="symbol"?e:e+""}function Grt(n,e){if(VE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(VE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Ure=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zre=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Krt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Yrt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Obe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Xrt=Object.keys(Obe),qb="NaN";function Jrt(n,e){return n*Obe[e]}var Gj=(function(){function n(e,t){Hrt(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!Krt.test(t)&&(this.num=NaN,this.unit=""),Xrt.includes(t)&&(this.num=Jrt(e,t),this.unit="px")}return Wrt(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=Yrt.exec(t))!==null&&r!==void 0?r:[],s=PO(i,3),o=s[1],a=s[2];return new n(parseFloat(o),a??"")}}])})();function Rbe(n){if(n.includes(qb))return qb;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=Ure.exec(e))!==null&&t!==void 0?t:[],i=PO(r,4),s=i[1],o=i[2],a=i[3],c=Gj.parse(s??""),u=Gj.parse(a??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return qb;e=e.replace(Ure,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=zre.exec(e))!==null&&h!==void 0?h:[],p=PO(f,4),x=p[1],y=p[2],b=p[3],_=Gj.parse(x??""),C=Gj.parse(b??""),k=y==="+"?_.add(C):_.subtract(C);if(k.isNaN())return qb;e=e.replace(zre,k.toString())}return e}var Hre=/\(([^()]*)\)/;function Qrt(n){for(var e=n;e.includes("(");){var t=Hre.exec(e),r=PO(t,2),i=r[1];e=e.replace(Hre,Rbe(i))}return e}function Zrt(n){var e=n.replace(/\s+/g,"");return e=Qrt(e),e=Rbe(e),e}function eit(n){try{return Zrt(n)}catch{return qb}}function o8(n){var e=eit(n.slice(5,-1));return e===qb?"":e}var tit=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],nit=["dx","dy","angle","className","breakAll"];function kV(){return kV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kV.apply(this,arguments)}function Wre(n,e){if(n==null)return{};var t=rit(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rit(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function qre(n,e){return ait(n)||oit(n,e)||sit(n,e)||iit()}function iit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sit(n,e){if(n){if(typeof n=="string")return Gre(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gre(n,e)}}function Gre(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function oit(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function ait(n){if(Array.isArray(n))return n}var Mbe=/[ \f\n\r\t\v\u2028\u2029]+/,Dbe=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var s=[];un(t)||(r?s=t.toString().split(""):s=t.toString().split(Mbe));var o=s.map(function(c){return{word:c,width:DC(c,i).width}}),a=r?0:DC(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},lit=function(e,t,r,i,s){var o=e.maxLines,a=e.children,c=e.style,u=e.breakAll,d=ut(o),h=a,f=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(U,R){var z=R.word,W=R.width,se=U[U.length-1];if(se&&(i==null||s||se.width+W+r<Number(i)))se.words.push(z),se.width+=W+r;else{var ne={words:[z],width:W};U.push(ne)}return U},[])},p=f(t),x=function(Y){return Y.reduce(function(U,R){return U.width>R.width?U:R})};if(!d)return p;for(var y="…",b=function(Y){var U=h.slice(0,Y),R=Dbe({breakAll:u,style:c,children:U+y}).wordsWithComputedWidth,z=f(R),W=z.length>o||x(z).width>Number(i);return[W,z]},_=0,C=h.length-1,k=0,T;_<=C&&k<=h.length-1;){var E=Math.floor((_+C)/2),N=E-1,P=b(N),M=qre(P,2),O=M[0],q=M[1],D=b(E),F=qre(D,1),K=F[0];if(!O&&!K&&(_=E+1),O&&K&&(C=E-1),!O&&K){T=q;break}k++}return T||p},Kre=function(e){var t=un(e)?[]:e.toString().split(Mbe);return[{words:t}]},cit=function(e){var t=e.width,r=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,a=e.maxLines;if((t||r)&&!wx.isSsr){var c,u,d=Dbe({breakAll:o,children:i,style:s});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return Kre(i);return lit({breakAll:o,children:i,maxLines:a,style:s},c,u,t,r)}return Kre(i)},Yre="#808080",ox=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,s=i===void 0?0:i,o=e.lineHeight,a=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,p=f===void 0?"start":f,x=e.verticalAnchor,y=x===void 0?"end":x,b=e.fill,_=b===void 0?Yre:b,C=Wre(e,tit),k=S.useMemo(function(){return cit({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:h,style:C.style,width:C.width})},[C.breakAll,C.children,C.maxLines,h,C.style,C.width]),T=C.dx,E=C.dy,N=C.angle,P=C.className,M=C.breakAll,O=Wre(C,nit);if(!ss(r)||!ss(s))return null;var q=r+(ut(T)?T:0),D=s+(ut(E)?E:0),F;switch(y){case"start":F=o8("calc(".concat(u,")"));break;case"middle":F=o8("calc(".concat((k.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:F=o8("calc(".concat(k.length-1," * -").concat(a,")"));break}var K=[];if(h){var ee=k[0].width,Y=C.width;K.push("scale(".concat((ut(Y)?Y/ee:1)/ee,")"))}return N&&K.push("rotate(".concat(N,", ").concat(q,", ").concat(D,")")),K.length&&(O.transform=K.join(" ")),re.createElement("text",kV({},Wt(O,!0),{x:q,y:D,className:rn("recharts-text",P),textAnchor:p,fill:_.includes("url")?Yre:_}),k.map(function(U,R){var z=U.words.join(M?"":" ");return re.createElement("tspan",{x:q,dy:R===0?F:a,key:"".concat(z,"-").concat(R)},z)}))};function Ig(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function uit(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function GH(n){let e,t,r;n.length!==2?(e=Ig,t=(a,c)=>Ig(n(a),c),r=(a,c)=>n(a)-c):(e=n===Ig||n===uit?n:dit,t=n,r=n);function i(a,c,u=0,d=a.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;t(a[h],c)<0?u=h+1:d=h}while(u<d)}return u}function s(a,c,u=0,d=a.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;t(a[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(a,c,u=0,d=a.length){const h=i(a,c,u,d-1);return h>u&&r(a[h-1],c)>-r(a[h],c)?h-1:h}return{left:i,center:o,right:s}}function dit(){return 0}function Lbe(n){return n===null?NaN:+n}function*hit(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const fit=GH(Ig),XA=fit.right;GH(Lbe).center;class Xre extends Map{constructor(e,t=git){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Jre(this,e))}has(e){return super.has(Jre(this,e))}set(e,t){return super.set(mit(this,e),t)}delete(e){return super.delete(pit(this,e))}}function Jre({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function mit({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function pit({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function git(n){return n!==null&&typeof n=="object"?n.valueOf():n}function vit(n=Ig){if(n===Ig)return Fbe;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function Fbe(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const yit=Math.sqrt(50),xit=Math.sqrt(10),bit=Math.sqrt(2);function IO(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=yit?10:s>=xit?5:s>=bit?2:1;let a,c,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(n*u),c=Math.round(e*u),a/u<n&&++a,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,a=Math.round(n/u),c=Math.round(e/u),a*u<n&&++a,c*u>e&&--c),c<a&&.5<=t&&t<2?IO(n,e,t*2):[a,c,u]}function CV(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,s,o]=r?IO(e,n,t):IO(n,e,t);if(!(s>=i))return[];const a=s-i+1,c=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)c[u]=(s-u)/-o;else for(let u=0;u<a;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)c[u]=(i+u)/-o;else for(let u=0;u<a;++u)c[u]=(i+u)*o;return c}function EV(n,e,t){return e=+e,n=+n,t=+t,IO(n,e,t)[2]}function TV(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?EV(e,n,t):EV(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function Qre(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function Zre(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function Bbe(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?Fbe:vit(i);r>t;){if(r-t>600){const c=r-t+1,u=e-t+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),p=Math.max(t,Math.floor(e-u*h/c+f)),x=Math.min(r,Math.floor(e+(c-u)*h/c+f));Bbe(n,e,p,x,i)}const s=n[e];let o=t,a=r;for(Ek(n,t,e),i(n[r],s)>0&&Ek(n,t,r);o<a;){for(Ek(n,o,a),++o,--a;i(n[o],s)<0;)++o;for(;i(n[a],s)>0;)--a}i(n[t],s)===0?Ek(n,t,a):(++a,Ek(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}return n}function Ek(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function wit(n,e,t){if(n=Float64Array.from(hit(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return Zre(n);if(e>=1)return Qre(n);var r,i=(r-1)*e,s=Math.floor(i),o=Qre(Bbe(n,s).subarray(0,s+1)),a=Zre(n.subarray(s+1));return o+(a-o)*(i-s)}}function _it(n,e,t=Lbe){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,s=Math.floor(i),o=+t(n[s],s,n),a=+t(n[s+1],s+1,n);return o+(a-o)*(i-s)}}function Sit(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(i);++r<i;)s[r]=n+r*t;return s}function Rc(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Nm(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const AV=Symbol("implicit");function KH(){var n=new Xre,e=[],t=[],r=AV;function i(s){let o=n.get(s);if(o===void 0){if(r!==AV)return r;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new Xre;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return KH(e,t).unknown(r)},Rc.apply(i,arguments),i}function UE(){var n=KH().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,s,o,a=!1,c=0,u=0,d=.5;delete n.unknown;function h(){var f=e().length,p=i<r,x=p?i:r,y=p?r:i;s=(y-x)/Math.max(1,f-c+u*2),a&&(s=Math.floor(s)),x+=(y-x-s*(f-c))*d,o=s*(1-c),a&&(x=Math.round(x),o=Math.round(o));var b=Sit(f).map(function(_){return x+s*_});return t(p?b.reverse():b)}return n.domain=function(f){return arguments.length?(e(f),h()):e()},n.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},n.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,h()},n.bandwidth=function(){return o},n.step=function(){return s},n.round=function(f){return arguments.length?(a=!!f,h()):a},n.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},n.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},n.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},n.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},n.copy=function(){return UE(e(),[r,i]).round(a).paddingInner(c).paddingOuter(u).align(d)},Rc.apply(h(),arguments)}function $be(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return $be(e())},n}function LC(){return $be(UE.apply(null,arguments).paddingInner(1))}function YH(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Vbe(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function JA(){}var zE=.7,OO=1/zE,ww="\\s*([+-]?\\d+)\\s*",HE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ch="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kit=/^#([0-9a-f]{3,8})$/,Cit=new RegExp(`^rgb\\(${ww},${ww},${ww}\\)$`),Eit=new RegExp(`^rgb\\(${ch},${ch},${ch}\\)$`),Tit=new RegExp(`^rgba\\(${ww},${ww},${ww},${HE}\\)$`),Ait=new RegExp(`^rgba\\(${ch},${ch},${ch},${HE}\\)$`),Nit=new RegExp(`^hsl\\(${HE},${ch},${ch}\\)$`),jit=new RegExp(`^hsla\\(${HE},${ch},${ch},${HE}\\)$`),eie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};YH(JA,WE,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:tie,formatHex:tie,formatHex8:Pit,formatHsl:Iit,formatRgb:nie,toString:nie});function tie(){return this.rgb().formatHex()}function Pit(){return this.rgb().formatHex8()}function Iit(){return Ube(this).formatHsl()}function nie(){return this.rgb().formatRgb()}function WE(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=kit.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?rie(e):t===3?new ja(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Kj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Kj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Cit.exec(n))?new ja(e[1],e[2],e[3],1):(e=Eit.exec(n))?new ja(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tit.exec(n))?Kj(e[1],e[2],e[3],e[4]):(e=Ait.exec(n))?Kj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Nit.exec(n))?oie(e[1],e[2]/100,e[3]/100,1):(e=jit.exec(n))?oie(e[1],e[2]/100,e[3]/100,e[4]):eie.hasOwnProperty(n)?rie(eie[n]):n==="transparent"?new ja(NaN,NaN,NaN,0):null}function rie(n){return new ja(n>>16&255,n>>8&255,n&255,1)}function Kj(n,e,t,r){return r<=0&&(n=e=t=NaN),new ja(n,e,t,r)}function Oit(n){return n instanceof JA||(n=WE(n)),n?(n=n.rgb(),new ja(n.r,n.g,n.b,n.opacity)):new ja}function NV(n,e,t,r){return arguments.length===1?Oit(n):new ja(n,e,t,r??1)}function ja(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}YH(ja,NV,Vbe(JA,{brighter(n){return n=n==null?OO:Math.pow(OO,n),new ja(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?zE:Math.pow(zE,n),new ja(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ja($0(this.r),$0(this.g),$0(this.b),RO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iie,formatHex:iie,formatHex8:Rit,formatRgb:sie,toString:sie}));function iie(){return`#${fy(this.r)}${fy(this.g)}${fy(this.b)}`}function Rit(){return`#${fy(this.r)}${fy(this.g)}${fy(this.b)}${fy((isNaN(this.opacity)?1:this.opacity)*255)}`}function sie(){const n=RO(this.opacity);return`${n===1?"rgb(":"rgba("}${$0(this.r)}, ${$0(this.g)}, ${$0(this.b)}${n===1?")":`, ${n})`}`}function RO(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function $0(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function fy(n){return n=$0(n),(n<16?"0":"")+n.toString(16)}function oie(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new wu(n,e,t,r)}function Ube(n){if(n instanceof wu)return new wu(n.h,n.s,n.l,n.opacity);if(n instanceof JA||(n=WE(n)),!n)return new wu;if(n instanceof wu)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,c=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new wu(o,a,c,n.opacity)}function Mit(n,e,t,r){return arguments.length===1?Ube(n):new wu(n,e,t,r??1)}function wu(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}YH(wu,Mit,Vbe(JA,{brighter(n){return n=n==null?OO:Math.pow(OO,n),new wu(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?zE:Math.pow(zE,n),new wu(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new ja(a8(n>=240?n-240:n+120,i,r),a8(n,i,r),a8(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new wu(aie(this.h),Yj(this.s),Yj(this.l),RO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=RO(this.opacity);return`${n===1?"hsl(":"hsla("}${aie(this.h)}, ${Yj(this.s)*100}%, ${Yj(this.l)*100}%${n===1?")":`, ${n})`}`}}));function aie(n){return n=(n||0)%360,n<0?n+360:n}function Yj(n){return Math.max(0,Math.min(1,n||0))}function a8(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const XH=n=>()=>n;function Dit(n,e){return function(t){return n+t*e}}function Lit(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Fit(n){return(n=+n)==1?zbe:function(e,t){return t-e?Lit(e,t,n):XH(isNaN(e)?t:e)}}function zbe(n,e){var t=e-n;return t?Dit(n,t):XH(isNaN(n)?e:n)}const lie=(function n(e){var t=Fit(e);function r(i,s){var o=t((i=NV(i)).r,(s=NV(s)).r),a=t(i.g,s.g),c=t(i.b,s.b),u=zbe(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=n,r})(1);function Bit(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(s){for(i=0;i<t;++i)r[i]=n[i]*(1-s)+e[i]*s;return r}}function $it(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Vit(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),s=new Array(t),o;for(o=0;o<r;++o)i[o]=SS(n[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Uit(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function MO(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function zit(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=SS(n[i],e[i]):r[i]=e[i];return function(s){for(i in t)r[i]=t[i](s);return r}}var jV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l8=new RegExp(jV.source,"g");function Hit(n){return function(){return n}}function Wit(n){return function(e){return n(e)+""}}function qit(n,e){var t=jV.lastIndex=l8.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(n=n+"",e=e+"";(r=jV.exec(n))&&(i=l8.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:MO(r,i)})),t=l8.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Wit(c[0].x):Hit(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)a[(h=c[d]).i]=h.x(u);return a.join("")})}function SS(n,e){var t=typeof e,r;return e==null||t==="boolean"?XH(e):(t==="number"?MO:t==="string"?(r=WE(e))?(e=r,lie):qit:e instanceof WE?lie:e instanceof Date?Uit:$it(e)?Bit:Array.isArray(e)?Vit:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zit:MO)(n,e)}function JH(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Git(n,e){e===void 0&&(e=n,n=SS);for(var t=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);t<r;)s[t]=n(i,i=e[++t]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Kit(n){return function(){return n}}function DO(n){return+n}var cie=[0,1];function zo(n){return n}function PV(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Kit(isNaN(e)?NaN:.5)}function Yit(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function Xit(n,e,t){var r=n[0],i=n[1],s=e[0],o=e[1];return i<r?(r=PV(i,r),s=t(o,s)):(r=PV(r,i),s=t(s,o)),function(a){return s(r(a))}}function Jit(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=PV(n[o],n[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var c=XA(n,a,1,r)-1;return s[c](i[c](a))}}function QA(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function C3(){var n=cie,e=cie,t=SS,r,i,s,o=zo,a,c,u;function d(){var f=Math.min(n.length,e.length);return o!==zo&&(o=Yit(n[0],n[f-1])),a=f>2?Jit:Xit,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(c||(c=a(n.map(r),e,t)))(r(o(f)))}return h.invert=function(f){return o(i((u||(u=a(e,n.map(r),MO)))(f)))},h.domain=function(f){return arguments.length?(n=Array.from(f,DO),d()):n.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),t=JH,d()},h.clamp=function(f){return arguments.length?(o=f?!0:zo,d()):o!==zo},h.interpolate=function(f){return arguments.length?(t=f,d()):t},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,p){return r=f,i=p,d()}}function QH(){return C3()(zo,zo)}function Qit(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function LO(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function R_(n){return n=LO(Math.abs(n)),n?n[1]:NaN}function Zit(n,e){return function(t,r){for(var i=t.length,s=[],o=0,a=n[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(t.substring(i-=a,i+a)),!((c+=a+1)>r));)a=n[o=(o+1)%n.length];return s.reverse().join(e)}}function est(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var tst=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qE(n){if(!(e=tst.exec(n)))throw new Error("invalid format: "+n);var e;return new ZH({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}qE.prototype=ZH.prototype;function ZH(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}ZH.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nst(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var Hbe;function rst(n,e){var t=LO(n,e);if(!t)return n+"";var r=t[0],i=t[1],s=i-(Hbe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+LO(n,Math.max(0,e+s-1))[0]}function uie(n,e){var t=LO(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const die={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Qit,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>uie(n*100,e),r:uie,s:rst,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function hie(n){return n}var fie=Array.prototype.map,mie=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ist(n){var e=n.grouping===void 0||n.thousands===void 0?hie:Zit(fie.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?hie:est(fie.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function u(h){h=qE(h);var f=h.fill,p=h.align,x=h.sign,y=h.symbol,b=h.zero,_=h.width,C=h.comma,k=h.precision,T=h.trim,E=h.type;E==="n"?(C=!0,E="g"):die[E]||(k===void 0&&(k=12),T=!0,E="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var N=y==="$"?t:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",P=y==="$"?r:/[%p]/.test(E)?o:"",M=die[E],O=/[defgprs%]/.test(E);k=k===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function q(D){var F=N,K=P,ee,Y,U;if(E==="c")K=M(D)+K,D="";else{D=+D;var R=D<0||1/D<0;if(D=isNaN(D)?c:M(Math.abs(D),k),T&&(D=nst(D)),R&&+D==0&&x!=="+"&&(R=!1),F=(R?x==="("?x:a:x==="-"||x==="("?"":x)+F,K=(E==="s"?mie[8+Hbe/3]:"")+K+(R&&x==="("?")":""),O){for(ee=-1,Y=D.length;++ee<Y;)if(U=D.charCodeAt(ee),48>U||U>57){K=(U===46?i+D.slice(ee+1):D.slice(ee))+K,D=D.slice(0,ee);break}}}C&&!b&&(D=e(D,1/0));var z=F.length+D.length+K.length,W=z<_?new Array(_-z+1).join(f):"";switch(C&&b&&(D=e(W+D,W.length?_-K.length:1/0),W=""),p){case"<":D=F+D+K+W;break;case"=":D=F+W+D+K;break;case"^":D=W.slice(0,z=W.length>>1)+F+D+K+W.slice(z);break;default:D=W+F+D+K;break}return s(D)}return q.toString=function(){return h+""},q}function d(h,f){var p=u((h=qE(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(R_(f)/3)))*3,y=Math.pow(10,-x),b=mie[8+x/3];return function(_){return p(y*_)+b}}return{format:u,formatPrefix:d}}var Xj,eW,Wbe;sst({thousands:",",grouping:[3],currency:["$",""]});function sst(n){return Xj=ist(n),eW=Xj.format,Wbe=Xj.formatPrefix,Xj}function ost(n){return Math.max(0,-R_(Math.abs(n)))}function ast(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(R_(e)/3)))*3-R_(Math.abs(n)))}function lst(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,R_(e)-R_(n))+1}function qbe(n,e,t,r){var i=TV(n,e,t),s;switch(r=qE(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(s=ast(i,o))&&(r.precision=s),Wbe(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=lst(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=ost(i))&&(r.precision=s-(r.type==="%")*2);break}}return eW(r)}function av(n){var e=n.domain;return n.ticks=function(t){var r=e();return CV(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return qbe(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],c,u,d=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);d-- >0;){if(u=EV(o,a,t),u===c)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;c=u}return n},n}function FO(){var n=QH();return n.copy=function(){return QA(n,FO())},Rc.apply(n,arguments),av(n)}function Gbe(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,DO),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return Gbe(n).unknown(e)},n=arguments.length?Array.from(n,DO):[0,1],av(t)}function Kbe(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],s=n[r],o;return s<i&&(o=t,t=r,r=o,o=i,i=s,s=o),n[t]=e.floor(i),n[r]=e.ceil(s),n}function pie(n){return Math.log(n)}function gie(n){return Math.exp(n)}function cst(n){return-Math.log(-n)}function ust(n){return-Math.exp(-n)}function dst(n){return isFinite(n)?+("1e"+n):n<0?0:n}function hst(n){return n===10?dst:n===Math.E?Math.exp:e=>Math.pow(n,e)}function fst(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function vie(n){return(e,t)=>-n(-e,t)}function tW(n){const e=n(pie,gie),t=e.domain;let r=10,i,s;function o(){return i=fst(r),s=hst(r),t()[0]<0?(i=vie(i),s=vie(s),n(cst,ust)):n(pie,gie),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(t(a),o()):t()},e.ticks=a=>{const c=t();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=i(u),p=i(d),x,y;const b=a==null?10:+a;let _=[];if(!(r%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(x=1;x<r;++x)if(y=f<0?x/s(-f):x*s(f),!(y<u)){if(y>d)break;_.push(y)}}else for(;f<=p;++f)for(x=r-1;x>=1;--x)if(y=f>0?x/s(-f):x*s(f),!(y<u)){if(y>d)break;_.push(y)}_.length*2<b&&(_=CV(u,d,b))}else _=CV(f,p,Math.min(p-f,b)).map(s);return h?_.reverse():_},e.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=qE(c)).precision==null&&(c.trim=!0),c=eW(c)),a===1/0)return c;const u=Math.max(1,r*a/e.ticks().length);return d=>{let h=d/s(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>t(Kbe(t(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Ybe(){const n=tW(C3()).domain([1,10]);return n.copy=()=>QA(n,Ybe()).base(n.base()),Rc.apply(n,arguments),n}function yie(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function xie(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function nW(n){var e=1,t=n(yie(e),xie(e));return t.constant=function(r){return arguments.length?n(yie(e=+r),xie(e)):e},av(t)}function Xbe(){var n=nW(C3());return n.copy=function(){return QA(n,Xbe()).constant(n.constant())},Rc.apply(n,arguments)}function bie(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function mst(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function pst(n){return n<0?-n*n:n*n}function rW(n){var e=n(zo,zo),t=1;function r(){return t===1?n(zo,zo):t===.5?n(mst,pst):n(bie(t),bie(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},av(e)}function iW(){var n=rW(C3());return n.copy=function(){return QA(n,iW()).exponent(n.exponent())},Rc.apply(n,arguments),n}function gst(){return iW.apply(null,arguments).exponent(.5)}function wie(n){return Math.sign(n)*n*n}function vst(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function Jbe(){var n=QH(),e=[0,1],t=!1,r;function i(s){var o=vst(n(s));return isNaN(o)?r:t?Math.round(o):o}return i.invert=function(s){return n.invert(wie(s))},i.domain=function(s){return arguments.length?(n.domain(s),i):n.domain()},i.range=function(s){return arguments.length?(n.range((e=Array.from(s,DO)).map(wie)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(t=!!s,i):t},i.clamp=function(s){return arguments.length?(n.clamp(s),i):n.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Jbe(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},Rc.apply(i,arguments),av(i)}function Qbe(){var n=[],e=[],t=[],r;function i(){var o=0,a=Math.max(1,e.length);for(t=new Array(a-1);++o<a;)t[o-1]=_it(n,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[XA(t,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?t[a-1]:n[0],a<t.length?t[a]:n[n.length-1]]},s.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let a of o)a!=null&&!isNaN(a=+a)&&n.push(a);return n.sort(Ig),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return t.slice()},s.copy=function(){return Qbe().domain(n).range(e).unknown(r)},Rc.apply(s,arguments)}function Zbe(){var n=0,e=1,t=1,r=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[XA(r,c,0,t)]:s}function a(){var c=-1;for(r=new Array(t);++c<t;)r[c]=((c+1)*e-(c-t)*n)/(t+1);return o}return o.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,a()):[n,e]},o.range=function(c){return arguments.length?(t=(i=Array.from(c)).length-1,a()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[n,r[0]]:u>=t?[r[t-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Zbe().domain([n,e]).range(i).unknown(s)},Rc.apply(av(o),arguments)}function ewe(){var n=[.5],e=[0,1],t,r=1;function i(s){return s!=null&&s<=s?e[XA(n,s,0,r)]:t}return i.domain=function(s){return arguments.length?(n=Array.from(s),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[n[o-1],n[o]]},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return ewe().domain(n).range(e).unknown(t)},Rc.apply(i,arguments)}const c8=new Date,u8=new Date;function cs(n,e,t,r){function i(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(n(s=new Date(+s)),s),i.ceil=s=>(n(s=new Date(s-1)),e(s,1),n(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const c=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return c;let u;do c.push(u=new Date(+s)),e(s,a),n(s);while(u<s&&s<o);return c},i.filter=s=>cs(o=>{if(o>=o)for(;n(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),t&&(i.count=(s,o)=>(c8.setTime(+s),u8.setTime(+o),n(c8),n(u8),Math.floor(t(c8,u8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const BO=cs(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);BO.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?cs(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):BO);BO.range;const qf=1e3,Cc=qf*60,Gf=Cc*60,gm=Gf*24,sW=gm*7,_ie=gm*30,d8=gm*365,my=cs(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*qf)},(n,e)=>(e-n)/qf,n=>n.getUTCSeconds());my.range;const oW=cs(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qf)},(n,e)=>{n.setTime(+n+e*Cc)},(n,e)=>(e-n)/Cc,n=>n.getMinutes());oW.range;const aW=cs(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Cc)},(n,e)=>(e-n)/Cc,n=>n.getUTCMinutes());aW.range;const lW=cs(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qf-n.getMinutes()*Cc)},(n,e)=>{n.setTime(+n+e*Gf)},(n,e)=>(e-n)/Gf,n=>n.getHours());lW.range;const cW=cs(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*Gf)},(n,e)=>(e-n)/Gf,n=>n.getUTCHours());cW.range;const ZA=cs(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Cc)/gm,n=>n.getDate()-1);ZA.range;const E3=cs(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/gm,n=>n.getUTCDate()-1);E3.range;const twe=cs(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/gm,n=>Math.floor(n/gm));twe.range;function _x(n){return cs(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Cc)/sW)}const T3=_x(0),$O=_x(1),yst=_x(2),xst=_x(3),M_=_x(4),bst=_x(5),wst=_x(6);T3.range;$O.range;yst.range;xst.range;M_.range;bst.range;wst.range;function Sx(n){return cs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/sW)}const A3=Sx(0),VO=Sx(1),_st=Sx(2),Sst=Sx(3),D_=Sx(4),kst=Sx(5),Cst=Sx(6);A3.range;VO.range;_st.range;Sst.range;D_.range;kst.range;Cst.range;const uW=cs(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());uW.range;const dW=cs(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());dW.range;const vm=cs(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());vm.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:cs(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});vm.range;const ym=cs(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());ym.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:cs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});ym.range;function nwe(n,e,t,r,i,s){const o=[[my,1,qf],[my,5,5*qf],[my,15,15*qf],[my,30,30*qf],[s,1,Cc],[s,5,5*Cc],[s,15,15*Cc],[s,30,30*Cc],[i,1,Gf],[i,3,3*Gf],[i,6,6*Gf],[i,12,12*Gf],[r,1,gm],[r,2,2*gm],[t,1,sW],[e,1,_ie],[e,3,3*_ie],[n,1,d8]];function a(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const p=h&&typeof h.range=="function"?h:c(u,d,h),x=p?p.range(u,+d+1):[];return f?x.reverse():x}function c(u,d,h){const f=Math.abs(d-u)/h,p=GH(([,,b])=>b).right(o,f);if(p===o.length)return n.every(TV(u/d8,d/d8,h));if(p===0)return BO.every(Math.max(TV(u,d,h),1));const[x,y]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return x.every(y)}return[a,c]}const[Est,Tst]=nwe(ym,dW,A3,twe,cW,aW),[Ast,Nst]=nwe(vm,uW,T3,ZA,lW,oW);function h8(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function f8(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Tk(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function jst(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,s=n.days,o=n.shortDays,a=n.months,c=n.shortMonths,u=Ak(i),d=Nk(i),h=Ak(s),f=Nk(s),p=Ak(o),x=Nk(o),y=Ak(a),b=Nk(a),_=Ak(c),C=Nk(c),k={a:R,A:z,b:W,B:se,c:null,d:Aie,e:Aie,f:Zst,g:cot,G:dot,H:Xst,I:Jst,j:Qst,L:rwe,m:eot,M:tot,p:ne,q:te,Q:Pie,s:Iie,S:not,u:rot,U:iot,V:sot,w:oot,W:aot,x:null,X:null,y:lot,Y:uot,Z:hot,"%":jie},T={a:H,A:ce,b:pe,B:oe,c:null,d:Nie,e:Nie,f:got,g:Eot,G:Aot,H:fot,I:mot,j:pot,L:swe,m:vot,M:yot,p:ve,q:be,Q:Pie,s:Iie,S:xot,u:bot,U:wot,V:_ot,w:Sot,W:kot,x:null,X:null,y:Cot,Y:Tot,Z:Not,"%":jie},E={a:q,A:D,b:F,B:K,c:ee,d:Eie,e:Eie,f:qst,g:Cie,G:kie,H:Tie,I:Tie,j:Ust,L:Wst,m:Vst,M:zst,p:O,q:$st,Q:Kst,s:Yst,S:Hst,u:Mst,U:Dst,V:Lst,w:Rst,W:Fst,x:Y,X:U,y:Cie,Y:kie,Z:Bst,"%":Gst};k.x=N(t,k),k.X=N(r,k),k.c=N(e,k),T.x=N(t,T),T.X=N(r,T),T.c=N(e,T);function N(fe,we){return function(ue){var Z=[],ge=-1,he=0,Ee=fe.length,Be,vt,xt;for(ue instanceof Date||(ue=new Date(+ue));++ge<Ee;)fe.charCodeAt(ge)===37&&(Z.push(fe.slice(he,ge)),(vt=Sie[Be=fe.charAt(++ge)])!=null?Be=fe.charAt(++ge):vt=Be==="e"?" ":"0",(xt=we[Be])&&(Be=xt(ue,vt)),Z.push(Be),he=ge+1);return Z.push(fe.slice(he,ge)),Z.join("")}}function P(fe,we){return function(ue){var Z=Tk(1900,void 0,1),ge=M(Z,fe,ue+="",0),he,Ee;if(ge!=ue.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(we&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(he=f8(Tk(Z.y,0,1)),Ee=he.getUTCDay(),he=Ee>4||Ee===0?VO.ceil(he):VO(he),he=E3.offset(he,(Z.V-1)*7),Z.y=he.getUTCFullYear(),Z.m=he.getUTCMonth(),Z.d=he.getUTCDate()+(Z.w+6)%7):(he=h8(Tk(Z.y,0,1)),Ee=he.getDay(),he=Ee>4||Ee===0?$O.ceil(he):$O(he),he=ZA.offset(he,(Z.V-1)*7),Z.y=he.getFullYear(),Z.m=he.getMonth(),Z.d=he.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),Ee="Z"in Z?f8(Tk(Z.y,0,1)).getUTCDay():h8(Tk(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(Ee+5)%7:Z.w+Z.U*7-(Ee+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,f8(Z)):h8(Z)}}function M(fe,we,ue,Z){for(var ge=0,he=we.length,Ee=ue.length,Be,vt;ge<he;){if(Z>=Ee)return-1;if(Be=we.charCodeAt(ge++),Be===37){if(Be=we.charAt(ge++),vt=E[Be in Sie?we.charAt(ge++):Be],!vt||(Z=vt(fe,ue,Z))<0)return-1}else if(Be!=ue.charCodeAt(Z++))return-1}return Z}function O(fe,we,ue){var Z=u.exec(we.slice(ue));return Z?(fe.p=d.get(Z[0].toLowerCase()),ue+Z[0].length):-1}function q(fe,we,ue){var Z=p.exec(we.slice(ue));return Z?(fe.w=x.get(Z[0].toLowerCase()),ue+Z[0].length):-1}function D(fe,we,ue){var Z=h.exec(we.slice(ue));return Z?(fe.w=f.get(Z[0].toLowerCase()),ue+Z[0].length):-1}function F(fe,we,ue){var Z=_.exec(we.slice(ue));return Z?(fe.m=C.get(Z[0].toLowerCase()),ue+Z[0].length):-1}function K(fe,we,ue){var Z=y.exec(we.slice(ue));return Z?(fe.m=b.get(Z[0].toLowerCase()),ue+Z[0].length):-1}function ee(fe,we,ue){return M(fe,e,we,ue)}function Y(fe,we,ue){return M(fe,t,we,ue)}function U(fe,we,ue){return M(fe,r,we,ue)}function R(fe){return o[fe.getDay()]}function z(fe){return s[fe.getDay()]}function W(fe){return c[fe.getMonth()]}function se(fe){return a[fe.getMonth()]}function ne(fe){return i[+(fe.getHours()>=12)]}function te(fe){return 1+~~(fe.getMonth()/3)}function H(fe){return o[fe.getUTCDay()]}function ce(fe){return s[fe.getUTCDay()]}function pe(fe){return c[fe.getUTCMonth()]}function oe(fe){return a[fe.getUTCMonth()]}function ve(fe){return i[+(fe.getUTCHours()>=12)]}function be(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var we=N(fe+="",k);return we.toString=function(){return fe},we},parse:function(fe){var we=P(fe+="",!1);return we.toString=function(){return fe},we},utcFormat:function(fe){var we=N(fe+="",T);return we.toString=function(){return fe},we},utcParse:function(fe){var we=P(fe+="",!0);return we.toString=function(){return fe},we}}}var Sie={"-":"",_:" ",0:"0"},js=/^\s*\d+/,Pst=/^%/,Ist=/[\\^$*+?|[\]().{}]/g;function zn(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",s=i.length;return r+(s<t?new Array(t-s+1).join(e)+i:i)}function Ost(n){return n.replace(Ist,"\\$&")}function Ak(n){return new RegExp("^(?:"+n.map(Ost).join("|")+")","i")}function Nk(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function Rst(n,e,t){var r=js.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function Mst(n,e,t){var r=js.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function Dst(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function Lst(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function Fst(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function kie(n,e,t){var r=js.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function Cie(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function Bst(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function $st(n,e,t){var r=js.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function Vst(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function Eie(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function Ust(n,e,t){var r=js.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function Tie(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function zst(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function Hst(n,e,t){var r=js.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function Wst(n,e,t){var r=js.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function qst(n,e,t){var r=js.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Gst(n,e,t){var r=Pst.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function Kst(n,e,t){var r=js.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function Yst(n,e,t){var r=js.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function Aie(n,e){return zn(n.getDate(),e,2)}function Xst(n,e){return zn(n.getHours(),e,2)}function Jst(n,e){return zn(n.getHours()%12||12,e,2)}function Qst(n,e){return zn(1+ZA.count(vm(n),n),e,3)}function rwe(n,e){return zn(n.getMilliseconds(),e,3)}function Zst(n,e){return rwe(n,e)+"000"}function eot(n,e){return zn(n.getMonth()+1,e,2)}function tot(n,e){return zn(n.getMinutes(),e,2)}function not(n,e){return zn(n.getSeconds(),e,2)}function rot(n){var e=n.getDay();return e===0?7:e}function iot(n,e){return zn(T3.count(vm(n)-1,n),e,2)}function iwe(n){var e=n.getDay();return e>=4||e===0?M_(n):M_.ceil(n)}function sot(n,e){return n=iwe(n),zn(M_.count(vm(n),n)+(vm(n).getDay()===4),e,2)}function oot(n){return n.getDay()}function aot(n,e){return zn($O.count(vm(n)-1,n),e,2)}function lot(n,e){return zn(n.getFullYear()%100,e,2)}function cot(n,e){return n=iwe(n),zn(n.getFullYear()%100,e,2)}function uot(n,e){return zn(n.getFullYear()%1e4,e,4)}function dot(n,e){var t=n.getDay();return n=t>=4||t===0?M_(n):M_.ceil(n),zn(n.getFullYear()%1e4,e,4)}function hot(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zn(e/60|0,"0",2)+zn(e%60,"0",2)}function Nie(n,e){return zn(n.getUTCDate(),e,2)}function fot(n,e){return zn(n.getUTCHours(),e,2)}function mot(n,e){return zn(n.getUTCHours()%12||12,e,2)}function pot(n,e){return zn(1+E3.count(ym(n),n),e,3)}function swe(n,e){return zn(n.getUTCMilliseconds(),e,3)}function got(n,e){return swe(n,e)+"000"}function vot(n,e){return zn(n.getUTCMonth()+1,e,2)}function yot(n,e){return zn(n.getUTCMinutes(),e,2)}function xot(n,e){return zn(n.getUTCSeconds(),e,2)}function bot(n){var e=n.getUTCDay();return e===0?7:e}function wot(n,e){return zn(A3.count(ym(n)-1,n),e,2)}function owe(n){var e=n.getUTCDay();return e>=4||e===0?D_(n):D_.ceil(n)}function _ot(n,e){return n=owe(n),zn(D_.count(ym(n),n)+(ym(n).getUTCDay()===4),e,2)}function Sot(n){return n.getUTCDay()}function kot(n,e){return zn(VO.count(ym(n)-1,n),e,2)}function Cot(n,e){return zn(n.getUTCFullYear()%100,e,2)}function Eot(n,e){return n=owe(n),zn(n.getUTCFullYear()%100,e,2)}function Tot(n,e){return zn(n.getUTCFullYear()%1e4,e,4)}function Aot(n,e){var t=n.getUTCDay();return n=t>=4||t===0?D_(n):D_.ceil(n),zn(n.getUTCFullYear()%1e4,e,4)}function Not(){return"+0000"}function jie(){return"%"}function Pie(n){return+n}function Iie(n){return Math.floor(+n/1e3)}var wb,awe,lwe;jot({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jot(n){return wb=jst(n),awe=wb.format,wb.parse,lwe=wb.utcFormat,wb.utcParse,wb}function Pot(n){return new Date(n)}function Iot(n){return n instanceof Date?+n:+new Date(+n)}function hW(n,e,t,r,i,s,o,a,c,u){var d=QH(),h=d.invert,f=d.domain,p=u(".%L"),x=u(":%S"),y=u("%I:%M"),b=u("%I %p"),_=u("%a %d"),C=u("%b %d"),k=u("%B"),T=u("%Y");function E(N){return(c(N)<N?p:a(N)<N?x:o(N)<N?y:s(N)<N?b:r(N)<N?i(N)<N?_:C:t(N)<N?k:T)(N)}return d.invert=function(N){return new Date(h(N))},d.domain=function(N){return arguments.length?f(Array.from(N,Iot)):f().map(Pot)},d.ticks=function(N){var P=f();return n(P[0],P[P.length-1],N??10)},d.tickFormat=function(N,P){return P==null?E:u(P)},d.nice=function(N){var P=f();return(!N||typeof N.range!="function")&&(N=e(P[0],P[P.length-1],N??10)),N?f(Kbe(P,N)):d},d.copy=function(){return QA(d,hW(n,e,t,r,i,s,o,a,c,u))},d}function Oot(){return Rc.apply(hW(Ast,Nst,vm,uW,T3,ZA,lW,oW,my,awe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Rot(){return Rc.apply(hW(Est,Tst,ym,dW,A3,E3,cW,aW,my,lwe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function N3(){var n=0,e=1,t,r,i,s,o=zo,a=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(s(h)-t)*i,a?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([n,e]=h,t=s(n=+n),r=s(e=+e),i=t===r?0:1/(r-t),u):[n,e]},u.clamp=function(h){return arguments.length?(a=!!h,u):a},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var p,x;return arguments.length?([p,x]=f,o=h(p,x),u):[o(0),o(1)]}}return u.range=d(SS),u.rangeRound=d(JH),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return s=h,t=h(n),r=h(e),i=t===r?0:1/(r-t),u}}function lv(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function cwe(){var n=av(N3()(zo));return n.copy=function(){return lv(n,cwe())},Nm.apply(n,arguments)}function uwe(){var n=tW(N3()).domain([1,10]);return n.copy=function(){return lv(n,uwe()).base(n.base())},Nm.apply(n,arguments)}function dwe(){var n=nW(N3());return n.copy=function(){return lv(n,dwe()).constant(n.constant())},Nm.apply(n,arguments)}function fW(){var n=rW(N3());return n.copy=function(){return lv(n,fW()).exponent(n.exponent())},Nm.apply(n,arguments)}function Mot(){return fW.apply(null,arguments).exponent(.5)}function hwe(){var n=[],e=zo;function t(r){if(r!=null&&!isNaN(r=+r))return e((XA(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(Ig),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,s)=>wit(n,s/r))},t.copy=function(){return hwe(e).domain(n)},Nm.apply(t,arguments)}function j3(){var n=0,e=.5,t=1,r=1,i,s,o,a,c,u=zo,d,h=!1,f;function p(y){return isNaN(y=+y)?f:(y=.5+((y=+d(y))-s)*(r*y<r*s?a:c),u(h?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([n,e,t]=y,i=d(n=+n),s=d(e=+e),o=d(t=+t),a=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,p):[n,e,t]},p.clamp=function(y){return arguments.length?(h=!!y,p):h},p.interpolator=function(y){return arguments.length?(u=y,p):u};function x(y){return function(b){var _,C,k;return arguments.length?([_,C,k]=b,u=Git(y,[_,C,k]),p):[u(0),u(.5),u(1)]}}return p.range=x(SS),p.rangeRound=x(JH),p.unknown=function(y){return arguments.length?(f=y,p):f},function(y){return d=y,i=y(n),s=y(e),o=y(t),a=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,p}}function fwe(){var n=av(j3()(zo));return n.copy=function(){return lv(n,fwe())},Nm.apply(n,arguments)}function mwe(){var n=tW(j3()).domain([.1,1,10]);return n.copy=function(){return lv(n,mwe()).base(n.base())},Nm.apply(n,arguments)}function pwe(){var n=nW(j3());return n.copy=function(){return lv(n,pwe()).constant(n.constant())},Nm.apply(n,arguments)}function mW(){var n=rW(j3());return n.copy=function(){return lv(n,mW()).exponent(n.exponent())},Nm.apply(n,arguments)}function Dot(){return mW.apply(null,arguments).exponent(.5)}const Oie=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:UE,scaleDiverging:fwe,scaleDivergingLog:mwe,scaleDivergingPow:mW,scaleDivergingSqrt:Dot,scaleDivergingSymlog:pwe,scaleIdentity:Gbe,scaleImplicit:AV,scaleLinear:FO,scaleLog:Ybe,scaleOrdinal:KH,scalePoint:LC,scalePow:iW,scaleQuantile:Qbe,scaleQuantize:Zbe,scaleRadial:Jbe,scaleSequential:cwe,scaleSequentialLog:uwe,scaleSequentialPow:fW,scaleSequentialQuantile:hwe,scaleSequentialSqrt:Mot,scaleSequentialSymlog:dwe,scaleSqrt:gst,scaleSymlog:Xbe,scaleThreshold:ewe,scaleTime:Oot,scaleUtc:Rot,tickFormat:qbe},Symbol.toStringTag,{value:"Module"}));var m8,Rie;function P3(){if(Rie)return m8;Rie=1;var n=xS();function e(t,r,i){for(var s=-1,o=t.length;++s<o;){var a=t[s],c=r(a);if(c!=null&&(u===void 0?c===c&&!n(c):i(c,u)))var u=c,d=a}return d}return m8=e,m8}var p8,Mie;function gwe(){if(Mie)return p8;Mie=1;function n(e,t){return e>t}return p8=n,p8}var g8,Die;function Lot(){if(Die)return g8;Die=1;var n=P3(),e=gwe(),t=_S();function r(i){return i&&i.length?n(i,t,e):void 0}return g8=r,g8}var Fot=Lot();const I3=qn(Fot);var v8,Lie;function vwe(){if(Lie)return v8;Lie=1;function n(e,t){return e<t}return v8=n,v8}var y8,Fie;function Bot(){if(Fie)return y8;Fie=1;var n=P3(),e=vwe(),t=_S();function r(i){return i&&i.length?n(i,t,e):void 0}return y8=r,y8}var $ot=Bot();const O3=qn($ot);var x8,Bie;function Vot(){if(Bie)return x8;Bie=1;var n=jH(),e=kh(),t=Cbe(),r=Ha();function i(s,o){var a=r(s)?n:t;return a(s,e(o,3))}return x8=i,x8}var b8,$ie;function Uot(){if($ie)return b8;$ie=1;var n=Sbe(),e=Vot();function t(r,i){return n(e(r,i),1)}return b8=t,b8}var zot=Uot();const Hot=qn(zot);var w8,Vie;function Wot(){if(Vie)return w8;Vie=1;var n=zH();function e(t,r){return n(t,r)}return w8=e,w8}var qot=Wot();const eN=qn(qot);var kS=1e9,Got={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gW,Jr=!0,jc="[DecimalError] ",V0=jc+"Invalid argument: ",pW=jc+"Exponent out of range: ",CS=Math.floor,ty=Math.pow,Kot=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nl,ks=1e7,Lr=7,ywe=9007199254740991,UO=CS(ywe/Lr),jt={};jt.absoluteValue=jt.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};jt.comparedTo=jt.cmp=function(n){var e,t,r,i,s=this;if(n=new s.constructor(n),s.s!==n.s)return s.s||-n.s;if(s.e!==n.e)return s.e>n.e^s.s<0?1:-1;for(r=s.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(s.d[e]!==n.d[e])return s.d[e]>n.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Lr;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};jt.dividedBy=jt.div=function(n){return em(this,new this.constructor(n))};jt.dividedToIntegerBy=jt.idiv=function(n){var e=this,t=e.constructor;return br(em(e,new t(n),0,1),t.precision)};jt.equals=jt.eq=function(n){return!this.cmp(n)};jt.exponent=function(){return zi(this)};jt.greaterThan=jt.gt=function(n){return this.cmp(n)>0};jt.greaterThanOrEqualTo=jt.gte=function(n){return this.cmp(n)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(n){return this.cmp(n)<0};jt.lessThanOrEqualTo=jt.lte=function(n){return this.cmp(n)<1};jt.logarithm=jt.log=function(n){var e,t=this,r=t.constructor,i=r.precision,s=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(Nl))throw Error(jc+"NaN");if(t.s<1)throw Error(jc+(t.s?"NaN":"-Infinity"));return t.eq(Nl)?new r(0):(Jr=!1,e=em(GE(t,s),GE(n,s),s),Jr=!0,br(e,i))};jt.minus=jt.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?wwe(e,n):xwe(e,(n.s=-n.s,n))};jt.modulo=jt.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(jc+"NaN");return t.s?(Jr=!1,e=em(t,n,0,1).times(n),Jr=!0,t.minus(e)):br(new r(t),i)};jt.naturalExponential=jt.exp=function(){return bwe(this)};jt.naturalLogarithm=jt.ln=function(){return GE(this)};jt.negated=jt.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};jt.plus=jt.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?xwe(e,n):wwe(e,(n.s=-n.s,n))};jt.precision=jt.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(V0+n);if(e=zi(i)+1,r=i.d.length-1,t=r*Lr+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};jt.squareRoot=jt.sqrt=function(){var n,e,t,r,i,s,o,a=this,c=a.constructor;if(a.s<1){if(!a.s)return new c(0);throw Error(jc+"NaN")}for(n=zi(a),Jr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=nh(a.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=CS((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new c(e)):r=new c(i.toString()),t=c.precision,i=o=t+3;;)if(s=r,r=s.plus(em(a,s,o+2)).times(.5),nh(s.d).slice(0,o)===(e=nh(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(br(s,t+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Jr=!0,br(r,t)};jt.times=jt.mul=function(n){var e,t,r,i,s,o,a,c,u,d=this,h=d.constructor,f=d.d,p=(n=new h(n)).d;if(!d.s||!n.s)return new h(0);for(n.s*=d.s,t=d.e+n.e,c=f.length,u=p.length,c<u&&(s=f,f=p,p=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)a=s[i]+p[r]*f[i-r-1]+e,s[i--]=a%ks|0,e=a/ks|0;s[i]=(s[i]+e)%ks|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),n.d=s,n.e=t,Jr?br(n,h.precision):n};jt.toDecimalPlaces=jt.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(gh(n,0,kS),e===void 0?e=r.rounding:gh(e,0,8),br(t,n+zi(t)+1,e))};jt.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=ax(r,!0):(gh(n,0,kS),e===void 0?e=i.rounding:gh(e,0,8),r=br(new i(r),n+1,e),t=ax(r,!0,n+1)),t};jt.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?ax(i):(gh(n,0,kS),e===void 0?e=s.rounding:gh(e,0,8),r=br(new s(i),n+zi(i)+1,e),t=ax(r.abs(),!1,n+zi(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};jt.toInteger=jt.toint=function(){var n=this,e=n.constructor;return br(new e(n),zi(n)+1,e.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(n){var e,t,r,i,s,o,a=this,c=a.constructor,u=12,d=+(n=new c(n));if(!n.s)return new c(Nl);if(a=new c(a),!a.s){if(n.s<1)throw Error(jc+"Infinity");return a}if(a.eq(Nl))return a;if(r=c.precision,n.eq(Nl))return br(a,r);if(e=n.e,t=n.d.length-1,o=e>=t,s=a.s,o){if((t=d<0?-d:d)<=ywe){for(i=new c(Nl),e=Math.ceil(r/Lr+4),Jr=!1;t%2&&(i=i.times(a),zie(i.d,e)),t=CS(t/2),t!==0;)a=a.times(a),zie(a.d,e);return Jr=!0,n.s<0?new c(Nl).div(i):br(i,r)}}else if(s<0)throw Error(jc+"NaN");return s=s<0&&n.d[Math.max(e,t)]&1?-1:1,a.s=1,Jr=!1,i=n.times(GE(a,r+u)),Jr=!0,i=bwe(i),i.s=s,i};jt.toPrecision=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?(t=zi(i),r=ax(i,t<=s.toExpNeg||t>=s.toExpPos)):(gh(n,1,kS),e===void 0?e=s.rounding:gh(e,0,8),i=br(new s(i),n,e),t=zi(i),r=ax(i,n<=t||t<=s.toExpNeg,n)),r};jt.toSignificantDigits=jt.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(gh(n,1,kS),e===void 0?e=r.rounding:gh(e,0,8)),br(new r(t),n,e)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=zi(n),t=n.constructor;return ax(n,e<=t.toExpNeg||e>=t.toExpPos)};function xwe(n,e){var t,r,i,s,o,a,c,u,d=n.constructor,h=d.precision;if(!n.s||!e.s)return e.s||(e=new d(n)),Jr?br(e,h):e;if(c=n.d,u=e.d,o=n.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(r=c,s=-s,a=u.length):(r=u,i=o,a=c.length),o=Math.ceil(h/Lr),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=c.length,s=u.length,a-s<0&&(s=a,r=u,u=c,c=r),t=0;s;)t=(c[--s]=c[s]+u[s]+t)/ks|0,c[s]%=ks;for(t&&(c.unshift(t),++i),a=c.length;c[--a]==0;)c.pop();return e.d=c,e.e=i,Jr?br(e,h):e}function gh(n,e,t){if(n!==~~n||n<e||n>t)throw Error(V0+n)}function nh(n){var e,t,r,i=n.length-1,s="",o=n[0];if(i>0){for(s+=o,e=1;e<i;e++)r=n[e]+"",t=Lr-r.length,t&&(s+=dp(t)),s+=r;o=n[e],r=o+"",t=Lr-r.length,t&&(s+=dp(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var em=(function(){function n(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%ks|0,o=s/ks|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,c;if(s!=o)c=s>o?1:-1;else for(a=c=0;a<s;a++)if(r[a]!=i[a]){c=r[a]>i[a]?1:-1;break}return c}function t(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*ks+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,c,u,d,h,f,p,x,y,b,_,C,k,T,E,N,P,M,O=r.constructor,q=r.s==i.s?1:-1,D=r.d,F=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(jc+"Division by zero");for(c=r.e-i.e,P=F.length,E=D.length,p=new O(q),x=p.d=[],u=0;F[u]==(D[u]||0);)++u;if(F[u]>(D[u]||0)&&--c,s==null?C=s=O.precision:o?C=s+(zi(r)-zi(i))+1:C=s,C<0)return new O(0);if(C=C/Lr+2|0,u=0,P==1)for(d=0,F=F[0],C++;(u<E||d)&&C--;u++)k=d*ks+(D[u]||0),x[u]=k/F|0,d=k%F|0;else{for(d=ks/(F[0]+1)|0,d>1&&(F=n(F,d),D=n(D,d),P=F.length,E=D.length),T=P,y=D.slice(0,P),b=y.length;b<P;)y[b++]=0;M=F.slice(),M.unshift(0),N=F[0],F[1]>=ks/2&&++N;do d=0,a=e(F,y,P,b),a<0?(_=y[0],P!=b&&(_=_*ks+(y[1]||0)),d=_/N|0,d>1?(d>=ks&&(d=ks-1),h=n(F,d),f=h.length,b=y.length,a=e(h,y,f,b),a==1&&(d--,t(h,P<f?M:F,f))):(d==0&&(a=d=1),h=F.slice()),f=h.length,f<b&&h.unshift(0),t(y,h,b),a==-1&&(b=y.length,a=e(F,y,P,b),a<1&&(d++,t(y,P<b?M:F,b))),b=y.length):a===0&&(d++,y=[0]),x[u++]=d,a&&y[0]?y[b++]=D[T]||0:(y=[D[T]],b=1);while((T++<E||y[0]!==void 0)&&C--)}return x[0]||x.shift(),p.e=c,br(p,o?s+zi(p)+1:s)}})();function bwe(n,e){var t,r,i,s,o,a,c=0,u=0,d=n.constructor,h=d.precision;if(zi(n)>16)throw Error(pW+zi(n));if(!n.s)return new d(Nl);for(Jr=!1,a=h,o=new d(.03125);n.abs().gte(.1);)n=n.times(o),u+=5;for(r=Math.log(ty(2,u))/Math.LN10*2+5|0,a+=r,t=i=s=new d(Nl),d.precision=a;;){if(i=br(i.times(n),a),t=t.times(++c),o=s.plus(em(i,t,a)),nh(o.d).slice(0,a)===nh(s.d).slice(0,a)){for(;u--;)s=br(s.times(s),a);return d.precision=h,e==null?(Jr=!0,br(s,h)):s}s=o}}function zi(n){for(var e=n.e*Lr,t=n.d[0];t>=10;t/=10)e++;return e}function _8(n,e,t){if(e>n.LN10.sd())throw Jr=!0,t&&(n.precision=t),Error(jc+"LN10 precision limit exceeded");return br(new n(n.LN10),e)}function dp(n){for(var e="";n--;)e+="0";return e}function GE(n,e){var t,r,i,s,o,a,c,u,d,h=1,f=10,p=n,x=p.d,y=p.constructor,b=y.precision;if(p.s<1)throw Error(jc+(p.s?"NaN":"-Infinity"));if(p.eq(Nl))return new y(0);if(e==null?(Jr=!1,u=b):u=e,p.eq(10))return e==null&&(Jr=!0),_8(y,u);if(u+=f,y.precision=u,t=nh(x),r=t.charAt(0),s=zi(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)p=p.times(n),t=nh(p.d),r=t.charAt(0),h++;s=zi(p),r>1?(p=new y("0."+t),s++):p=new y(r+"."+t.slice(1))}else return c=_8(y,u+2,b).times(s+""),p=GE(new y(r+"."+t.slice(1)),u-f).plus(c),y.precision=b,e==null?(Jr=!0,br(p,b)):p;for(a=o=p=em(p.minus(Nl),p.plus(Nl),u),d=br(p.times(p),u),i=3;;){if(o=br(o.times(d),u),c=a.plus(em(o,new y(i),u)),nh(c.d).slice(0,u)===nh(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(_8(y,u+2,b).times(s+""))),a=em(a,new y(h),u),y.precision=b,e==null?(Jr=!0,br(a,b)):a;a=c,i+=2}}function Uie(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=CS(t/Lr),n.d=[],r=(t+1)%Lr,t<0&&(r+=Lr),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Lr;r<i;)n.d.push(+e.slice(r,r+=Lr));e=e.slice(r),r=Lr-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),Jr&&(n.e>UO||n.e<-UO))throw Error(pW+t)}else n.s=0,n.e=0,n.d=[0];return n}function br(n,e,t){var r,i,s,o,a,c,u,d,h=n.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Lr,i=e,u=h[d=0];else{if(d=Math.ceil((r+1)/Lr),s=h.length,d>=s)return n;for(u=s=h[d],o=1;s>=10;s/=10)o++;r%=Lr,i=r-Lr+o}if(t!==void 0&&(s=ty(10,o-i-1),a=u/s%10|0,c=e<0||h[d+1]!==void 0||u%s,c=t<4?(a||c)&&(t==0||t==(n.s<0?3:2)):a>5||a==5&&(t==4||c||t==6&&(r>0?i>0?u/ty(10,o-i):0:h[d-1])%10&1||t==(n.s<0?8:7))),e<1||!h[0])return c?(s=zi(n),h.length=1,e=e-s-1,h[0]=ty(10,(Lr-e%Lr)%Lr),n.e=CS(-e/Lr)||0):(h.length=1,h[0]=n.e=n.s=0),n;if(r==0?(h.length=d,s=1,d--):(h.length=d+1,s=ty(10,Lr-r),h[d]=i>0?(u/ty(10,o-i)%ty(10,i)|0)*s:0),c)for(;;)if(d==0){(h[0]+=s)==ks&&(h[0]=1,++n.e);break}else{if(h[d]+=s,h[d]!=ks)break;h[d--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(Jr&&(n.e>UO||n.e<-UO))throw Error(pW+zi(n));return n}function wwe(n,e){var t,r,i,s,o,a,c,u,d,h,f=n.constructor,p=f.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new f(n),Jr?br(e,p):e;if(c=n.d,h=e.d,r=e.e,u=n.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(t=c,o=-o,a=h.length):(t=h,r=u,a=c.length),i=Math.max(Math.ceil(p/Lr),a)+2,o>i&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for(i=c.length,a=h.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}o=0}for(d&&(t=c,c=h,h=t,e.s=-e.s),a=c.length,i=h.length-a;i>0;--i)c[a++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(s=i;s&&c[--s]===0;)c[s]=ks-1;--c[s],c[i]+=ks}c[i]-=h[i]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Jr?br(e,p):e):new f(0)}function ax(n,e,t){var r,i=zi(n),s=nh(n.d),o=s.length;return e?(t&&(r=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+dp(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+dp(-i-1)+s,t&&(r=t-o)>0&&(s+=dp(r))):i>=o?(s+=dp(i+1-o),t&&(r=t-i-1)>0&&(s=s+"."+dp(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(s+="."),s+=dp(r))),n.s<0?"-"+s:s}function zie(n,e){if(n.length>e)return n.length=e,!0}function _we(n){var e,t,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(V0+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Uie(o,s.toString())}else if(typeof s!="string")throw Error(V0+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Kot.test(s))Uie(o,s);else throw Error(V0+s)}if(i.prototype=jt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=_we,i.config=i.set=Yot,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function Yot(n){if(!n||typeof n!="object")throw Error(jc+"Object expected");var e,t,r,i=["precision",1,kS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(CS(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(V0+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(V0+t+": "+r);return this}var gW=_we(Got);Nl=new gW(1);const ar=gW;function Xot(n){return eat(n)||Zot(n)||Qot(n)||Jot()}function Jot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qot(n,e){if(n){if(typeof n=="string")return IV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return IV(n,e)}}function Zot(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function eat(n){if(Array.isArray(n))return IV(n)}function IV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var tat=function(e){return e},Swe={},kwe=function(e){return e===Swe},Hie=function(e){return function t(){return arguments.length===0||arguments.length===1&&kwe(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},nat=function n(e,t){return e===1?t:Hie(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter(function(a){return a!==Swe}).length;return o>=e?t.apply(void 0,i):n(e-o,Hie(function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];var d=i.map(function(h){return kwe(h)?c.shift():h});return t.apply(void 0,Xot(d).concat(c))}))})},R3=function(e){return nat(e.length,e)},OV=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},rat=R3(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),iat=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return tat;var i=t.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(a,c){return c(a)},s.apply(void 0,arguments))}},RV=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Cwe=function(e){var t=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t&&s.every(function(a,c){return a===t[c]})||(t=s,r=e.apply(void 0,s)),r}};function sat(n){var e;return n===0?e=1:e=Math.floor(new ar(n).abs().log(10).toNumber())+1,e}function oat(n,e,t){for(var r=new ar(n),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(t),i++;return s}var aat=R3(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),lat=R3(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),cat=R3(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const M3={rangeStep:oat,getDigitCount:sat,interpolateNumber:aat,uninterpolateNumber:lat,uninterpolateTruncation:cat};function MV(n){return hat(n)||dat(n)||Ewe(n)||uat()}function uat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dat(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function hat(n){if(Array.isArray(n))return DV(n)}function KE(n,e){return pat(n)||mat(n,e)||Ewe(n,e)||fat()}function fat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ewe(n,e){if(n){if(typeof n=="string")return DV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return DV(n,e)}}function DV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function mat(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,s=void 0;try{for(var o=n[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(t.push(a.value),!(e&&t.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return t}}function pat(n){if(Array.isArray(n))return n}function Twe(n){var e=KE(n,2),t=e[0],r=e[1],i=t,s=r;return t>r&&(i=r,s=t),[i,s]}function Awe(n,e,t){if(n.lte(0))return new ar(0);var r=M3.getDigitCount(n.toNumber()),i=new ar(10).pow(r),s=n.div(i),o=r!==1?.05:.1,a=new ar(Math.ceil(s.div(o).toNumber())).add(t).mul(o),c=a.mul(i);return e?c:new ar(Math.ceil(c))}function gat(n,e,t){var r=1,i=new ar(n);if(!i.isint()&&t){var s=Math.abs(n);s<1?(r=new ar(10).pow(M3.getDigitCount(n)-1),i=new ar(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new ar(Math.floor(n)))}else n===0?i=new ar(Math.floor((e-1)/2)):t||(i=new ar(Math.floor(n)));var o=Math.floor((e-1)/2),a=iat(rat(function(c){return i.add(new ar(c-o).mul(r)).toNumber()}),OV);return a(0,e)}function Nwe(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new ar(0),tickMin:new ar(0),tickMax:new ar(0)};var s=Awe(new ar(e).sub(n).div(t-1),r,i),o;n<=0&&e>=0?o=new ar(0):(o=new ar(n).add(e).div(2),o=o.sub(new ar(o).mod(s)));var a=Math.ceil(o.sub(n).div(s).toNumber()),c=Math.ceil(new ar(e).sub(o).div(s).toNumber()),u=a+c+1;return u>t?Nwe(n,e,t,r,i+1):(u<t&&(c=e>0?c+(t-u):c,a=e>0?a:a+(t-u)),{step:s,tickMin:o.sub(new ar(a).mul(s)),tickMax:o.add(new ar(c).mul(s))})}function vat(n){var e=KE(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),a=Twe([t,r]),c=KE(a,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(MV(OV(0,i-1).map(function(){return 1/0}))):[].concat(MV(OV(0,i-1).map(function(){return-1/0})),[d]);return t>r?RV(h):h}if(u===d)return gat(u,i,s);var f=Nwe(u,d,o,s),p=f.step,x=f.tickMin,y=f.tickMax,b=M3.rangeStep(x,y.add(new ar(.1).mul(p)),p);return t>r?RV(b):b}function yat(n,e){var t=KE(n,2),r=t[0],i=t[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Twe([r,i]),a=KE(o,2),c=a[0],u=a[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),h=Awe(new ar(u).sub(c).div(d-1),s,0),f=[].concat(MV(M3.rangeStep(new ar(c),new ar(u).sub(new ar(.99).mul(h)),h)),[u]);return r>i?RV(f):f}var xat=Cwe(vat),bat=Cwe(yat),wat=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function L_(n){"@babel/helpers - typeof";return L_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L_(n)}function zO(){return zO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zO.apply(this,arguments)}function _at(n,e){return Eat(n)||Cat(n,e)||kat(n,e)||Sat()}function Sat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kat(n,e){if(n){if(typeof n=="string")return Wie(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Wie(n,e)}}function Wie(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Cat(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Eat(n){if(Array.isArray(n))return n}function Tat(n,e){if(n==null)return{};var t=Aat(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Aat(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Nat(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jat(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Iwe(r.key),r)}}function Pat(n,e,t){return e&&jat(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Iat(n,e,t){return e=HO(e),Oat(n,jwe()?Reflect.construct(e,t||[],HO(n).constructor):e.apply(n,t))}function Oat(n,e){if(e&&(L_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rat(n)}function Rat(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jwe=function(){return!!n})()}function HO(n){return HO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HO(n)}function Mat(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&LV(n,e)}function LV(n,e){return LV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LV(n,e)}function Pwe(n,e,t){return e=Iwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Iwe(n){var e=Dat(n,"string");return L_(e)=="symbol"?e:e+""}function Dat(n,e){if(L_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var tN=(function(n){function e(){return Nat(this,e),Iat(this,e,arguments)}return Mat(e,n),Pat(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,o=r.width,a=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=Tat(r,wat),p=Wt(f,!1);this.props.direction==="x"&&d.type!=="number"&&Rn(!1);var x=c.map(function(y){var b=u(y,a),_=b.x,C=b.y,k=b.value,T=b.errorVal;if(!T)return null;var E=[],N,P;if(Array.isArray(T)){var M=_at(T,2);N=M[0],P=M[1]}else N=P=T;if(s==="vertical"){var O=d.scale,q=C+i,D=q+o,F=q-o,K=O(k-N),ee=O(k+P);E.push({x1:ee,y1:D,x2:ee,y2:F}),E.push({x1:K,y1:q,x2:ee,y2:q}),E.push({x1:K,y1:D,x2:K,y2:F})}else if(s==="horizontal"){var Y=h.scale,U=_+i,R=U-o,z=U+o,W=Y(k-N),se=Y(k+P);E.push({x1:R,y1:se,x2:z,y2:se}),E.push({x1:U,y1:W,x2:U,y2:se}),E.push({x1:R,y1:W,x2:z,y2:W})}return re.createElement(Vn,zO({className:"recharts-errorBar",key:"bar-".concat(E.map(function(ne){return"".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))},p),E.map(function(ne){return re.createElement("line",zO({},ne,{key:"line-".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))}))});return re.createElement(Vn,{className:"recharts-errorBars"},x)}}])})(re.Component);Pwe(tN,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Pwe(tN,"displayName","ErrorBar");function YE(n){"@babel/helpers - typeof";return YE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YE(n)}function qie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qie(Object(t),!0).forEach(function(r){Lat(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Lat(n,e,t){return e=Fat(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fat(n){var e=Bat(n,"string");return YE(e)=="symbol"?e:e+""}function Bat(n,e){if(YE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(YE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Owe=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=_l(t,ju);if(!o)return null;var a=ju.defaultProps,c=a!==void 0?qv(qv({},a),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,p=h.props,x=p.sectors||p.data||[];return d.concat(x.map(function(y){return{type:o.props.iconType||f.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,p=f!==void 0?qv(qv({},f),h.props):{},x=p.dataKey,y=p.name,b=p.legendType,_=p.hide;return{inactive:_,dataKey:x,type:c.iconType||b||"square",color:vW(h),value:y||x,payload:p}}),qv(qv(qv({},c),ju.getWithHeight(o,i)),{},{payload:u,item:o})};function XE(n){"@babel/helpers - typeof";return XE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XE(n)}function Gie(n){return zat(n)||Uat(n)||Vat(n)||$at()}function $at(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vat(n,e){if(n){if(typeof n=="string")return FV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return FV(n,e)}}function Uat(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zat(n){if(Array.isArray(n))return FV(n)}function FV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Kie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Si(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kie(Object(t),!0).forEach(function(r){_w(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _w(n,e,t){return e=Hat(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hat(n){var e=Wat(n,"string");return XE(e)=="symbol"?e:e+""}function Wat(n,e){if(XE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(XE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rs(n,e,t){return un(n)||un(e)?t:ss(e)?Dl(n,e,t):nn(e)?e(n):t}function FC(n,e,t,r){var i=Hot(n,function(a){return rs(a,e)});if(t==="number"){var s=i.filter(function(a){return ut(a)||parseFloat(a)});return s.length?[O3(s),I3(s)]:[1/0,-1/0]}var o=r?i.filter(function(a){return!un(a)}):i;return o.map(function(a){return ss(a)||a instanceof Date?a:""})}var qat=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,a=(t=r==null?void 0:r.length)!==null&&t!==void 0?t:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<a;u++){var d=u>0?i[u-1].coordinate:i[a-1].coordinate,h=i[u].coordinate,f=u>=a-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Vo(h-d)!==Vo(f-h)){var x=[];if(Vo(f-h)===Vo(c[1]-c[0])){p=f;var y=h+c[1]-c[0];x[0]=Math.min(y,(y+d)/2),x[1]=Math.max(y,(y+d)/2)}else{p=d;var b=f+c[1]-c[0];x[0]=Math.min(h,(b+h)/2),x[1]=Math.max(h,(b+h)/2)}var _=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(e>_[0]&&e<=_[1]||e>=x[0]&&e<=x[1]){o=i[u].index;break}}else{var C=Math.min(d,f),k=Math.max(d,f);if(e>(C+h)/2&&e<=(k+h)/2){o=i[u].index;break}}}else for(var T=0;T<a;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<a-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===a-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){o=r[T].index;break}return o},vW=function(e){var t,r=e,i=r.type.displayName,s=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Si(Si({},e.type.defaultProps),e.props):e.props,o=s.stroke,a=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:a;break;default:c=a;break}return c},Gat=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},a=Object.keys(s),c=0,u=a.length;c<u;c++)for(var d=s[a[c]].stackGroups,h=Object.keys(d),f=0,p=h.length;f<p;f++){var x=d[h[f]],y=x.items,b=x.cateAxisId,_=y.filter(function(P){return Zf(P.type).indexOf("Bar")>=0});if(_&&_.length){var C=_[0].type.defaultProps,k=C!==void 0?Si(Si({},C),_[0].props):_[0].props,T=k.barSize,E=k[b];o[E]||(o[E]=[]);var N=un(T)?t:T;o[E].push({item:_[0],stackList:_.slice(1),barSize:un(N)?void 0:Uo(N,r,0)})}}return o},Kat=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,a=e.maxBarSize,c=o.length;if(c<1)return null;var u=Uo(t,i,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,p=i/c,x=o.reduce(function(T,E){return T+E.barSize||0},0);x+=(c-1)*u,x>=i&&(x-=(c-1)*u,u=0),x>=i&&p>0&&(f=!0,p*=.9,x=c*p);var y=(i-x)/2>>0,b={offset:y-u,size:0};d=o.reduce(function(T,E){var N={item:E.item,position:{offset:b.offset+b.size+u,size:f?p:E.barSize}},P=[].concat(Gie(T),[N]);return b=P[P.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(M){P.push({item:M,position:b})}),P},h)}else{var _=Uo(r,i,0,!0);i-2*_-(c-1)*u<=0&&(u=0);var C=(i-2*_-(c-1)*u)/c;C>1&&(C>>=0);var k=a===+a?Math.min(C,a):C;d=o.reduce(function(T,E,N){var P=[].concat(Gie(T),[{item:E.item,position:{offset:_+(C+u)*N+(C-k)/2,size:k}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(M){P.push({item:M,position:P[P.length-1].position})}),P},h)}return d},Yat=function(e,t,r,i){var s=r.children,o=r.width,a=r.margin,c=o-(a.left||0)-(a.right||0),u=Owe({children:s,legendWidth:c});if(u){var d=i||{},h=d.width,f=d.height,p=u.align,x=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&x==="middle")&&p!=="center"&&ut(e[p]))return Si(Si({},e),{},_w({},p,e[p]+(h||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&x!=="middle"&&ut(e[x]))return Si(Si({},e),{},_w({},x,e[x]+(f||0)))}return e},Xat=function(e,t,r){return un(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},Rwe=function(e,t,r,i,s){var o=t.props.children,a=Ll(o,tN).filter(function(u){return Xat(i,s,u.props.direction)});if(a&&a.length){var c=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=rs(d,r);if(un(h))return u;var f=Array.isArray(h)?[O3(h),I3(h)]:[h,h],p=c.reduce(function(x,y){var b=rs(d,y,0),_=f[0]-Math.abs(Array.isArray(b)?b[0]:b),C=f[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(_,x[0]),Math.max(C,x[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Jat=function(e,t,r,i,s){var o=t.map(function(a){return Rwe(e,a,r,s,i)}).filter(function(a){return!un(a)});return o&&o.length?o.reduce(function(a,c){return[Math.min(a[0],c[0]),Math.max(a[1],c[1])]},[1/0,-1/0]):null},Mwe=function(e,t,r,i,s){var o=t.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&Rwe(e,c,u,i)||FC(e,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var a={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)a[u[d]]||(a[u[d]]=!0,c.push(u[d]));return c},[])},Dwe=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},Lwe=function(e,t,r,i){if(i)return e.map(function(c){return c.coordinate});var s,o,a=e.map(function(c){return c.coordinate===t&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||a.push(t),o||a.push(r),a},Kf=function(e,t,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,a=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(t||r)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Vo(a[0]-a[1])*2*u:u,t&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=s?s.indexOf(h):h;return{coordinate:i(f)+u,value:h,offset:u}});return d.filter(function(h){return!KA(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:i(h)+u,value:h,index:f,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,f){return{coordinate:i(h)+u,value:s?s[h]:h,index:f,offset:u}})},S8=new WeakMap,Jj=function(e,t){if(typeof t!="function")return e;S8.has(e)||S8.set(e,new WeakMap);var r=S8.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},Fwe=function(e,t,r){var i=e.scale,s=e.type,o=e.layout,a=e.axisType;if(i==="auto")return o==="radial"&&a==="radiusAxis"?{scale:UE(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:FO(),realScaleType:"linear"}:s==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:LC(),realScaleType:"point"}:s==="category"?{scale:UE(),realScaleType:"band"}:{scale:FO(),realScaleType:"linear"};if(ix(i)){var c="scale".concat(v3(i));return{scale:(Oie[c]||LC)(),realScaleType:Oie[c]?c:"point"}}return nn(i)?{scale:i}:{scale:LC(),realScaleType:"point"}},Yie=1e-4,Bwe=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),s=Math.min(i[0],i[1])-Yie,o=Math.max(i[0],i[1])+Yie,a=e(t[0]),c=e(t[r-1]);(a<s||a>o||c<s||c>o)&&e.domain([t[0],t[r-1]])}},Qat=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},Zat=function(e,t){if(!t||t.length!==2||!ut(t[0])||!ut(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ut(e[0])||e[0]<r)&&(s[0]=r),(!ut(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},elt=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0,a=0;a<t;++a){var c=KA(e[a][r][1])?e[a][r][0]:e[a][r][1];c>=0?(e[a][r][0]=s,e[a][r][1]=s+c,s=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+c,o=e[a][r][1])}},tlt=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0;o<t;++o){var a=KA(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},nlt={sign:elt,expand:Het,none:N_,silhouette:Wet,wiggle:qet,positive:tlt},rlt=function(e,t,r){var i=t.map(function(a){return a.props.dataKey}),s=nlt[r],o=zet().keys(i).value(function(a,c){return+rs(a,c,0)}).order(mV).offset(s);return o(e)},ilt=function(e,t,r,i,s,o){if(!e)return null;var a=o?t.reverse():t,c={},u=a.reduce(function(h,f){var p,x=(p=f.type)!==null&&p!==void 0&&p.defaultProps?Si(Si({},f.type.defaultProps),f.props):f.props,y=x.stackId,b=x.hide;if(b)return h;var _=x[r],C=h[_]||{hasStack:!1,stackGroups:{}};if(ss(y)){var k=C.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};k.items.push(f),C.hasStack=!0,C.stackGroups[y]=k}else C.stackGroups[wS("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return Si(Si({},h),{},_w({},_,C))},c),d={};return Object.keys(u).reduce(function(h,f){var p=u[f];if(p.hasStack){var x={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,b){var _=p.stackGroups[b];return Si(Si({},y),{},_w({},b,{numericAxisId:r,cateAxisId:i,items:_.items,stackedData:rlt(e,_.items,s)}))},x)}return Si(Si({},h),{},_w({},f,p))},d)},$we=function(e,t){var r=t.realScaleType,i=t.type,s=t.tickCount,o=t.originalDomain,a=t.allowDecimals,c=r||t.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=xat(u,s,a);return e.domain([O3(d),I3(d)]),{niceTicks:d}}if(s&&i==="number"){var h=e.domain(),f=bat(h,s,a);return{niceTicks:f}}return null};function Xie(n){var e=n.axis,t=n.ticks,r=n.bandSize,i=n.entry,s=n.index,o=n.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!un(i[e.dataKey])){var a=bO(t,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return t[s]?t[s].coordinate+r/2:null}var c=rs(i,un(o)?e.dataKey:o);return un(c)?null:e.scale(c)}var Jie=function(e){var t=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,a=e.index;if(t.type==="category")return r[a]?r[a].coordinate+i:null;var c=rs(o,t.dataKey,t.domain[a]);return un(c)?null:t.scale(c)-s/2+i},slt=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},olt=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Si(Si({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(ss(s)){var o=t[s];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},alt=function(e){return e.reduce(function(t,r){return[O3(r.concat([t[0]]).filter(ut)),I3(r.concat([t[1]]).filter(ut))]},[1/0,-1/0])},Vwe=function(e,t,r){return Object.keys(e).reduce(function(i,s){var o=e[s],a=o.stackedData,c=a.reduce(function(u,d){var h=alt(d.slice(t,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Qie=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zie=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BV=function(e,t,r){if(nn(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(ut(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(Qie.test(e[0])){var s=+Qie.exec(e[0])[1];i[0]=t[0]-s}else nn(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(ut(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(Zie.test(e[1])){var o=+Zie.exec(e[1])[1];i[1]=t[1]+o}else nn(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},WO=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var s=WH(t,function(h){return h.coordinate}),o=1/0,a=1,c=s.length;a<c;a++){var u=s[a],d=s[a-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},ese=function(e,t,r){return!e||!e.length||eN(e,Dl(r,"type.defaultProps.domain"))?t:e},Uwe=function(e,t){var r=e.type.defaultProps?Si(Si({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,o=r.unit,a=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Si(Si({},Wt(e,!1)),{},{dataKey:i,unit:o,formatter:a,name:s||i,color:vW(e),value:rs(t,i),type:c,payload:t,chartType:u,hide:d})};function JE(n){"@babel/helpers - typeof";return JE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JE(n)}function tse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tse(Object(t),!0).forEach(function(r){zwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zwe(n,e,t){return e=llt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function llt(n){var e=clt(n,"string");return JE(e)=="symbol"?e:e+""}function clt(n,e){if(JE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(JE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ult(n,e){return mlt(n)||flt(n,e)||hlt(n,e)||dlt()}function dlt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hlt(n,e){if(n){if(typeof n=="string")return nse(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nse(n,e)}}function nse(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function flt(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function mlt(n){if(Array.isArray(n))return n}var qO=Math.PI/180,plt=function(e){return e*180/Math.PI},jr=function(e,t,r,i){return{x:e+Math.cos(-qO*i)*r,y:t+Math.sin(-qO*i)*r}},Hwe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},glt=function(e,t,r,i,s){var o=e.width,a=e.height,c=e.startAngle,u=e.endAngle,d=Uo(e.cx,o,o/2),h=Uo(e.cy,a,a/2),f=Hwe(o,a,r),p=Uo(e.innerRadius,f,0),x=Uo(e.outerRadius,f,f*.8),y=Object.keys(t);return y.reduce(function(b,_){var C=t[_],k=C.domain,T=C.reversed,E;if(un(C.range))i==="angleAxis"?E=[c,u]:i==="radiusAxis"&&(E=[p,x]),T&&(E=[E[1],E[0]]);else{E=C.range;var N=E,P=ult(N,2);c=P[0],u=P[1]}var M=Fwe(C,s),O=M.realScaleType,q=M.scale;q.domain(k).range(E),Bwe(q);var D=$we(q,Zh(Zh({},C),{},{realScaleType:O})),F=Zh(Zh(Zh({},C),D),{},{range:E,radius:x,realScaleType:O,scale:q,cx:d,cy:h,innerRadius:p,outerRadius:x,startAngle:c,endAngle:u});return Zh(Zh({},b),{},zwe({},_,F))},{})},vlt=function(e,t){var r=e.x,i=e.y,s=t.x,o=t.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-o,2))},ylt=function(e,t){var r=e.x,i=e.y,s=t.cx,o=t.cy,a=vlt({x:r,y:i},{x:s,y:o});if(a<=0)return{radius:a};var c=(r-s)/a,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:a,angle:plt(u),angleInRadian:u}},xlt=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),s=Math.floor(r/360),o=Math.min(i,s);return{startAngle:t-o*360,endAngle:r-o*360}},blt=function(e,t){var r=t.startAngle,i=t.endAngle,s=Math.floor(r/360),o=Math.floor(i/360),a=Math.min(s,o);return e+a*360},rse=function(e,t){var r=e.x,i=e.y,s=ylt({x:r,y:i},t),o=s.radius,a=s.angle,c=t.innerRadius,u=t.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=xlt(t),h=d.startAngle,f=d.endAngle,p=a,x;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;x=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;x=p>=f&&p<=h}return x?Zh(Zh({},t),{},{radius:o,angle:blt(p,t)}):null},Wwe=function(e){return!S.isValidElement(e)&&!nn(e)&&typeof e!="boolean"?e.className:""};function QE(n){"@babel/helpers - typeof";return QE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QE(n)}var wlt=["offset"];function _lt(n){return Elt(n)||Clt(n)||klt(n)||Slt()}function Slt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function klt(n,e){if(n){if(typeof n=="string")return $V(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $V(n,e)}}function Clt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Elt(n){if(Array.isArray(n))return $V(n)}function $V(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Tlt(n,e){if(n==null)return{};var t=Alt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Alt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function ise(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ise(Object(t),!0).forEach(function(r){Nlt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ise(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nlt(n,e,t){return e=jlt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jlt(n){var e=Plt(n,"string");return QE(e)=="symbol"?e:e+""}function Plt(n,e){if(QE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(QE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZE(){return ZE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ZE.apply(this,arguments)}var Ilt=function(e){var t=e.value,r=e.formatter,i=un(e.children)?t:e.children;return nn(r)?r(i):i},Olt=function(e,t){var r=Vo(t-e),i=Math.min(Math.abs(t-e),360);return r*i},Rlt=function(e,t,r){var i=e.position,s=e.viewBox,o=e.offset,a=e.className,c=s,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,p=c.startAngle,x=c.endAngle,y=c.clockWise,b=(h+f)/2,_=Olt(p,x),C=_>=0?1:-1,k,T;i==="insideStart"?(k=p+C*o,T=y):i==="insideEnd"?(k=x-C*o,T=!y):i==="end"&&(k=x+C*o,T=y),T=_<=0?T:!T;var E=jr(u,d,b,k),N=jr(u,d,b,k+(T?1:-1)*359),P="M".concat(E.x,",").concat(E.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(N.x,",").concat(N.y),M=un(e.id)?wS("recharts-radial-line-"):e.id;return re.createElement("text",ZE({},r,{dominantBaseline:"central",className:rn("recharts-radial-bar-label",a)}),re.createElement("defs",null,re.createElement("path",{id:M,d:P})),re.createElement("textPath",{xlinkHref:"#".concat(M)},t))},Mlt=function(e){var t=e.viewBox,r=e.offset,i=e.position,s=t,o=s.cx,a=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,h=s.endAngle,f=(d+h)/2;if(i==="outside"){var p=jr(o,a,u+r,f),x=p.x,y=p.y;return{x,y,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,_=jr(o,a,b,f),C=_.x,k=_.y;return{x:C,y:k,textAnchor:"middle",verticalAnchor:"middle"}},Dlt=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,o=t,a=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*i,p=h>0?"end":"start",x=h>0?"start":"end",y=u>=0?1:-1,b=y*i,_=y>0?"end":"start",C=y>0?"start":"end";if(s==="top"){var k={x:a+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:p};return Zi(Zi({},k),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var T={x:a+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:x};return Zi(Zi({},T),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var E={x:a-b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return Zi(Zi({},E),r?{width:Math.max(E.x-r.x,0),height:d}:{})}if(s==="right"){var N={x:a+u+b,y:c+d/2,textAnchor:C,verticalAnchor:"middle"};return Zi(Zi({},N),r?{width:Math.max(r.x+r.width-N.x,0),height:d}:{})}var P=r?{width:u,height:d}:{};return s==="insideLeft"?Zi({x:a+b,y:c+d/2,textAnchor:C,verticalAnchor:"middle"},P):s==="insideRight"?Zi({x:a+u-b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},P):s==="insideTop"?Zi({x:a+u/2,y:c+f,textAnchor:"middle",verticalAnchor:x},P):s==="insideBottom"?Zi({x:a+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:p},P):s==="insideTopLeft"?Zi({x:a+b,y:c+f,textAnchor:C,verticalAnchor:x},P):s==="insideTopRight"?Zi({x:a+u-b,y:c+f,textAnchor:_,verticalAnchor:x},P):s==="insideBottomLeft"?Zi({x:a+b,y:c+d-f,textAnchor:C,verticalAnchor:p},P):s==="insideBottomRight"?Zi({x:a+u-b,y:c+d-f,textAnchor:_,verticalAnchor:p},P):bS(s)&&(ut(s.x)||hy(s.x))&&(ut(s.y)||hy(s.y))?Zi({x:a+Uo(s.x,u),y:c+Uo(s.y,d),textAnchor:"end",verticalAnchor:"end"},P):Zi({x:a+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},Llt=function(e){return"cx"in e&&ut(e.cx)};function Cs(n){var e=n.offset,t=e===void 0?5:e,r=Tlt(n,wlt),i=Zi({offset:t},r),s=i.viewBox,o=i.position,a=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,f=i.textBreakAll;if(!s||un(a)&&un(c)&&!S.isValidElement(u)&&!nn(u))return null;if(S.isValidElement(u))return S.cloneElement(u,i);var p;if(nn(u)){if(p=S.createElement(u,i),S.isValidElement(p))return p}else p=Ilt(i);var x=Llt(s),y=Wt(i,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Rlt(i,p,y);var b=x?Mlt(i):Dlt(i);return re.createElement(ox,ZE({className:rn("recharts-label",h)},y,b,{breakAll:f}),p)}Cs.displayName="Label";var qwe=function(e){var t=e.cx,r=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,a=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,p=e.top,x=e.left,y=e.width,b=e.height,_=e.clockWise,C=e.labelViewBox;if(C)return C;if(ut(y)&&ut(b)){if(ut(h)&&ut(f))return{x:h,y:f,width:y,height:b};if(ut(p)&&ut(x))return{x:p,y:x,width:y,height:b}}return ut(h)&&ut(f)?{x:h,y:f,width:0,height:0}:ut(t)&&ut(r)?{cx:t,cy:r,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||a||0,clockWise:_}:e.viewBox?e.viewBox:{}},Flt=function(e,t){return e?e===!0?re.createElement(Cs,{key:"label-implicit",viewBox:t}):ss(e)?re.createElement(Cs,{key:"label-implicit",viewBox:t,value:e}):S.isValidElement(e)?e.type===Cs?S.cloneElement(e,{key:"label-implicit",viewBox:t}):re.createElement(Cs,{key:"label-implicit",content:e,viewBox:t}):nn(e)?re.createElement(Cs,{key:"label-implicit",content:e,viewBox:t}):bS(e)?re.createElement(Cs,ZE({viewBox:t},e,{key:"label-implicit"})):null:null},Blt=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=qwe(e),o=Ll(i,Cs).map(function(c,u){return S.cloneElement(c,{viewBox:t||s,key:"label-".concat(u)})});if(!r)return o;var a=Flt(e.label,t||s);return[a].concat(_lt(o))};Cs.parseViewBox=qwe;Cs.renderCallByParent=Blt;var k8,sse;function $lt(){if(sse)return k8;sse=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return k8=n,k8}var Vlt=$lt();const Ult=qn(Vlt);function e2(n){"@babel/helpers - typeof";return e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e2(n)}var zlt=["valueAccessor"],Hlt=["data","dataKey","clockWise","id","textBreakAll"];function Wlt(n){return Ylt(n)||Klt(n)||Glt(n)||qlt()}function qlt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Glt(n,e){if(n){if(typeof n=="string")return VV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VV(n,e)}}function Klt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ylt(n){if(Array.isArray(n))return VV(n)}function VV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function GO(){return GO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},GO.apply(this,arguments)}function ose(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ase(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ose(Object(t),!0).forEach(function(r){Xlt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ose(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xlt(n,e,t){return e=Jlt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jlt(n){var e=Qlt(n,"string");return e2(e)=="symbol"?e:e+""}function Qlt(n,e){if(e2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(e2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lse(n,e){if(n==null)return{};var t=Zlt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Zlt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var ect=function(e){return Array.isArray(e.value)?Ult(e.value):e.value};function tm(n){var e=n.valueAccessor,t=e===void 0?ect:e,r=lse(n,zlt),i=r.data,s=r.dataKey,o=r.clockWise,a=r.id,c=r.textBreakAll,u=lse(r,Hlt);return!i||!i.length?null:re.createElement(Vn,{className:"recharts-label-list"},i.map(function(d,h){var f=un(s)?t(d,h):rs(d&&d.payload,s),p=un(a)?{}:{id:"".concat(a,"-").concat(h)};return re.createElement(Cs,GO({},Wt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Cs.parseViewBox(un(o)?d:ase(ase({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}tm.displayName="LabelList";function tct(n,e){return n?n===!0?re.createElement(tm,{key:"labelList-implicit",data:e}):re.isValidElement(n)||nn(n)?re.createElement(tm,{key:"labelList-implicit",data:e,content:n}):bS(n)?re.createElement(tm,GO({data:e},n,{key:"labelList-implicit"})):null:null}function nct(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=Ll(r,tm).map(function(o,a){return S.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!t)return i;var s=tct(n.label,e);return[s].concat(Wlt(i))}tm.renderCallByParent=nct;function t2(n){"@babel/helpers - typeof";return t2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t2(n)}function UV(){return UV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UV.apply(this,arguments)}function cse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function use(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cse(Object(t),!0).forEach(function(r){rct(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rct(n,e,t){return e=ict(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ict(n){var e=sct(n,"string");return t2(e)=="symbol"?e:e+""}function sct(n,e){if(t2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(t2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var oct=function(e,t){var r=Vo(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},Qj=function(e){var t=e.cx,r=e.cy,i=e.radius,s=e.angle,o=e.sign,a=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(a?1:-1)+i,h=Math.asin(c/d)/qO,f=u?s:s+o*h,p=jr(t,r,d,f),x=jr(t,r,i,f),y=u?s-o*h:s,b=jr(t,r,d*Math.cos(h*qO),y);return{center:p,circleTangency:x,lineTangency:b,theta:h}},Gwe=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,a=e.endAngle,c=oct(o,a),u=o+c,d=jr(t,r,s,o),h=jr(t,r,s,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var p=jr(t,r,i,o),x=jr(t,r,i,u);f+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},act=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Vo(d-u),f=Qj({cx:t,cy:r,radius:s,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),p=f.circleTangency,x=f.lineTangency,y=f.theta,b=Qj({cx:t,cy:r,radius:s,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),_=b.circleTangency,C=b.lineTangency,k=b.theta,T=c?Math.abs(u-d):Math.abs(u-d)-y-k;if(T<0)return a?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Gwe({cx:t,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var E="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,`
  `);if(i>0){var N=Qj({cx:t,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=N.circleTangency,M=N.lineTangency,O=N.theta,q=Qj({cx:t,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),D=q.circleTangency,F=q.lineTangency,K=q.theta,ee=c?Math.abs(u-d):Math.abs(u-d)-O-K;if(ee<0&&o===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ee>180),",").concat(+(h>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},lct={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Kwe=function(e){var t=use(use({},lct),e),r=t.cx,i=t.cy,s=t.innerRadius,o=t.outerRadius,a=t.cornerRadius,c=t.forceCornerRadius,u=t.cornerIsExternal,d=t.startAngle,h=t.endAngle,f=t.className;if(o<s||d===h)return null;var p=rn("recharts-sector",f),x=o-s,y=Uo(a,x,0,!0),b;return y>0&&Math.abs(d-h)<360?b=act({cx:r,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(y,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):b=Gwe({cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:d,endAngle:h}),re.createElement("path",UV({},Wt(t,!0),{className:p,d:b,role:"img"}))};function n2(n){"@babel/helpers - typeof";return n2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n2(n)}function zV(){return zV=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zV.apply(this,arguments)}function dse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hse(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dse(Object(t),!0).forEach(function(r){cct(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cct(n,e,t){return e=uct(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uct(n){var e=dct(n,"string");return n2(e)=="symbol"?e:e+""}function dct(n,e){if(n2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(n2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var fse={curveBasisClosed:Iet,curveBasisOpen:Oet,curveBasis:Pet,curveBumpX:get,curveBumpY:vet,curveLinearClosed:Ret,curveLinear:x3,curveMonotoneX:Met,curveMonotoneY:Det,curveNatural:Let,curveStep:Fet,curveStepAfter:$et,curveStepBefore:Bet},Zj=function(e){return e.x===+e.x&&e.y===+e.y},jk=function(e){return e.x},Pk=function(e){return e.y},hct=function(e,t){if(nn(e))return e;var r="curve".concat(v3(e));return(r==="curveMonotone"||r==="curveBump")&&t?fse["".concat(r).concat(t==="vertical"?"Y":"X")]:fse[r]||x3},fct=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,s=i===void 0?[]:i,o=e.baseLine,a=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=hct(r,a),h=u?s.filter(function(y){return Zj(y)}):s,f;if(Array.isArray(o)){var p=u?o.filter(function(y){return Zj(y)}):o,x=h.map(function(y,b){return hse(hse({},y),{},{base:p[b]})});return a==="vertical"?f=Hj().y(Pk).x1(jk).x0(function(y){return y.base.x}):f=Hj().x(jk).y1(Pk).y0(function(y){return y.base.y}),f.defined(Zj).curve(d),f(x)}return a==="vertical"&&ut(o)?f=Hj().y(Pk).x1(jk).x0(o):ut(o)?f=Hj().x(jk).y1(Pk).y0(o):f=qxe().x(jk).y(Pk),f.defined(Zj).curve(d),f(h)},KO=function(e){var t=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?fct(e):i;return S.createElement("path",zV({},Wt(e,!1),wO(e),{className:rn("recharts-curve",t),d:o,ref:s}))},C8={exports:{}},E8,mse;function mct(){if(mse)return E8;mse=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return E8=n,E8}var T8,pse;function pct(){if(pse)return T8;pse=1;var n=mct();function e(){}function t(){}return t.resetWarningCache=e,T8=function(){function r(o,a,c,u,d,h){if(h!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},T8}var gse;function gct(){return gse||(gse=1,C8.exports=pct()()),C8.exports}var vct=gct();const Kn=qn(vct);var yct=Object.getOwnPropertyNames,xct=Object.getOwnPropertySymbols,bct=Object.prototype.hasOwnProperty;function vse(n,e){return function(r,i,s){return n(r,i,s)&&e(r,i,s)}}function eP(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var s=i.cache,o=s.get(t),a=s.get(r);if(o&&a)return o===r&&a===t;s.set(t,r),s.set(r,t);var c=n(t,r,i);return s.delete(t),s.delete(r),c}}function wct(n){return n!=null?n[Symbol.toStringTag]:void 0}function yse(n){return yct(n).concat(xct(n))}var _ct=Object.hasOwn||(function(n,e){return bct.call(n,e)});function kx(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var Sct="__v",kct="__o",Cct="_owner",xse=Object.getOwnPropertyDescriptor,bse=Object.keys;function Ect(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function Tct(n,e){return kx(n.getTime(),e.getTime())}function Act(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function Nct(n,e){return n===e}function wse(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.entries(),o,a,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(a=u.next())&&!a.done;){if(i[h]){h++;continue}var f=o.value,p=a.value;if(t.equals(f[0],p[0],c,h,n,e,t)&&t.equals(f[1],p[1],f[0],p[0],n,e,t)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}var jct=kx;function Pct(n,e,t){var r=bse(n),i=r.length;if(bse(e).length!==i)return!1;for(;i-- >0;)if(!Ywe(n,e,t,r[i]))return!1;return!0}function Ik(n,e,t){var r=yse(n),i=r.length;if(yse(e).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=r[i],!Ywe(n,e,t,s)||(o=xse(n,s),a=xse(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Ict(n,e){return kx(n.valueOf(),e.valueOf())}function Oct(n,e){return n.source===e.source&&n.flags===e.flags}function _se(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.values(),o,a;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(a=c.next())&&!a.done;){if(!i[d]&&t.equals(o.value,a.value,o.value,a.value,n,e,t)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Rct(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function Mct(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function Ywe(n,e,t,r){return(r===Cct||r===kct||r===Sct)&&(n.$$typeof||e.$$typeof)?!0:_ct(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var Dct="[object Arguments]",Lct="[object Boolean]",Fct="[object Date]",Bct="[object Error]",$ct="[object Map]",Vct="[object Number]",Uct="[object Object]",zct="[object RegExp]",Hct="[object Set]",Wct="[object String]",qct="[object URL]",Gct=Array.isArray,Sse=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,kse=Object.assign,Kct=Object.prototype.toString.call.bind(Object.prototype.toString);function Yct(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,s=n.areMapsEqual,o=n.areNumbersEqual,a=n.areObjectsEqual,c=n.arePrimitiveWrappersEqual,u=n.areRegExpsEqual,d=n.areSetsEqual,h=n.areTypedArraysEqual,f=n.areUrlsEqual,p=n.unknownTagComparators;return function(y,b,_){if(y===b)return!0;if(y==null||b==null)return!1;var C=typeof y;if(C!==typeof b)return!1;if(C!=="object")return C==="number"?o(y,b,_):C==="function"?i(y,b,_):!1;var k=y.constructor;if(k!==b.constructor)return!1;if(k===Object)return a(y,b,_);if(Gct(y))return e(y,b,_);if(Sse!=null&&Sse(y))return h(y,b,_);if(k===Date)return t(y,b,_);if(k===RegExp)return u(y,b,_);if(k===Map)return s(y,b,_);if(k===Set)return d(y,b,_);var T=Kct(y);if(T===Fct)return t(y,b,_);if(T===zct)return u(y,b,_);if(T===$ct)return s(y,b,_);if(T===Hct)return d(y,b,_);if(T===Uct)return typeof y.then!="function"&&typeof b.then!="function"&&a(y,b,_);if(T===qct)return f(y,b,_);if(T===Bct)return r(y,b,_);if(T===Dct)return a(y,b,_);if(T===Lct||T===Vct||T===Wct)return c(y,b,_);if(p){var E=p[T];if(!E){var N=wct(y);N&&(E=p[N])}if(E)return E(y,b,_)}return!1}}function Xct(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?Ik:Ect,areDatesEqual:Tct,areErrorsEqual:Act,areFunctionsEqual:Nct,areMapsEqual:r?vse(wse,Ik):wse,areNumbersEqual:jct,areObjectsEqual:r?Ik:Pct,arePrimitiveWrappersEqual:Ict,areRegExpsEqual:Oct,areSetsEqual:r?vse(_se,Ik):_se,areTypedArraysEqual:r?Ik:Rct,areUrlsEqual:Mct,unknownTagComparators:void 0};if(t&&(i=kse({},i,t(i))),e){var s=eP(i.areArraysEqual),o=eP(i.areMapsEqual),a=eP(i.areObjectsEqual),c=eP(i.areSetsEqual);i=kse({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:c})}return i}function Jct(n){return function(e,t,r,i,s,o,a){return n(e,t,a)}}function Qct(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,s=n.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?e?new WeakMap:void 0:h,p=d.meta;return t(c,u,{cache:f,equals:i,meta:p,strict:s})};if(e)return function(c,u){return t(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return t(c,u,o)}}var Zct=cv();cv({strict:!0});cv({circular:!0});cv({circular:!0,strict:!0});cv({createInternalComparator:function(){return kx}});cv({strict:!0,createInternalComparator:function(){return kx}});cv({circular:!0,createInternalComparator:function(){return kx}});cv({circular:!0,createInternalComparator:function(){return kx},strict:!0});function cv(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,s=n.strict,o=s===void 0?!1:s,a=Xct(n),c=Yct(a),u=r?r(c):Jct(c);return Qct({circular:t,comparator:c,createState:i,equals:u,strict:o})}function eut(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function Cse(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(s){t<0&&(t=s),s-t>e?(n(s),t=-1):eut(i)};requestAnimationFrame(r)}function HV(n){"@babel/helpers - typeof";return HV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HV(n)}function tut(n){return sut(n)||iut(n)||rut(n)||nut()}function nut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rut(n,e){if(n){if(typeof n=="string")return Ese(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ese(n,e)}}function Ese(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function iut(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function sut(n){if(Array.isArray(n))return n}function out(){var n={},e=function(){return null},t=!1,r=function i(s){if(!t){if(Array.isArray(s)){if(!s.length)return;var o=s,a=tut(o),c=a[0],u=a.slice(1);if(typeof c=="number"){Cse(i.bind(null,u),c);return}i(c),Cse(i.bind(null,u));return}HV(s)==="object"&&(n=s,e(n)),typeof s=="function"&&s()}};return{stop:function(){t=!0},start:function(s){t=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function r2(n){"@babel/helpers - typeof";return r2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r2(n)}function Tse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ase(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tse(Object(t),!0).forEach(function(r){Xwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xwe(n,e,t){return e=aut(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aut(n){var e=lut(n,"string");return r2(e)==="symbol"?e:String(e)}function lut(n,e){if(r2(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(r2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var cut=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},uut=function(e){return e},dut=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},BC=function(e,t){return Object.keys(t).reduce(function(r,i){return Ase(Ase({},r),{},Xwe({},i,e(i,t[i])))},{})},Nse=function(e,t,r){return e.map(function(i){return"".concat(dut(i)," ").concat(t,"ms ").concat(r)}).join(",")};function hut(n,e){return put(n)||mut(n,e)||Jwe(n,e)||fut()}function fut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mut(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function put(n){if(Array.isArray(n))return n}function gut(n){return xut(n)||yut(n)||Jwe(n)||vut()}function vut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jwe(n,e){if(n){if(typeof n=="string")return WV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WV(n,e)}}function yut(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xut(n){if(Array.isArray(n))return WV(n)}function WV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var YO=1e-4,Qwe=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Zwe=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},jse=function(e,t){return function(r){var i=Qwe(e,t);return Zwe(i,r)}},but=function(e,t){return function(r){var i=Qwe(e,t),s=[].concat(gut(i.map(function(o,a){return o*a}).slice(1)),[0]);return Zwe(s,r)}},Pse=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],s=t[1],o=t[2],a=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,s=0,o=1,a=1;break;case"ease":i=.25,s=.1,o=.25,a=1;break;case"ease-in":i=.42,s=0,o=1,a=1;break;case"ease-out":i=.42,s=0,o=.58,a=1;break;case"ease-in-out":i=0,s=0,o=.58,a=1;break;default:{var c=t[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=hut(u,4);i=d[0],s=d[1],o=d[2],a=d[3]}}}var h=jse(i,o),f=jse(s,a),p=but(i,o),x=function(_){return _>1?1:_<0?0:_},y=function(_){for(var C=_>1?1:_,k=C,T=0;T<8;++T){var E=h(k)-C,N=p(k);if(Math.abs(E-C)<YO||N<YO)return f(k);k=x(k-E/N)}return f(k)};return y.isStepper=!1,y},wut=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,s=i===void 0?8:i,o=e.dt,a=o===void 0?17:o,c=function(d,h,f){var p=-(d-h)*r,x=f*s,y=f+(p-x)*a/1e3,b=f*a/1e3+d;return Math.abs(b-h)<YO&&Math.abs(y)<YO?[h,0]:[b,y]};return c.isStepper=!0,c.dt=a,c},_ut=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Pse(i);case"spring":return wut();default:if(i.split("(")[0]==="cubic-bezier")return Pse(i)}return typeof i=="function"?i:null};function i2(n){"@babel/helpers - typeof";return i2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i2(n)}function Ise(n){return Cut(n)||kut(n)||e1e(n)||Sut()}function Sut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kut(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Cut(n){if(Array.isArray(n))return GV(n)}function Ose(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Us(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ose(Object(t),!0).forEach(function(r){qV(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ose(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qV(n,e,t){return e=Eut(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Eut(n){var e=Tut(n,"string");return i2(e)==="symbol"?e:String(e)}function Tut(n,e){if(i2(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(i2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Aut(n,e){return Put(n)||jut(n,e)||e1e(n,e)||Nut()}function Nut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e1e(n,e){if(n){if(typeof n=="string")return GV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return GV(n,e)}}function GV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function jut(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Put(n){if(Array.isArray(n))return n}var XO=function(e,t,r){return e+(t-e)*r},KV=function(e){var t=e.from,r=e.to;return t!==r},Iut=function n(e,t,r){var i=BC(function(s,o){if(KV(o)){var a=e(o.from,o.to,o.velocity),c=Aut(a,2),u=c[0],d=c[1];return Us(Us({},o),{},{from:u,velocity:d})}return o},t);return r<1?BC(function(s,o){return KV(o)?Us(Us({},o),{},{velocity:XO(o.velocity,i[s].velocity,r),from:XO(o.from,i[s].from,r)}):o},t):n(e,i,r-1)};const Out=(function(n,e,t,r,i){var s=cut(n,e),o=s.reduce(function(b,_){return Us(Us({},b),{},qV({},_,[n[_],e[_]]))},{}),a=s.reduce(function(b,_){return Us(Us({},b),{},qV({},_,{from:n[_],velocity:0,to:e[_]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return BC(function(_,C){return C.from},a)},p=function(){return!Object.values(a).filter(KV).length},x=function(_){u||(u=_);var C=_-u,k=C/t.dt;a=Iut(t,a,k),i(Us(Us(Us({},n),e),f())),u=_,p()||(c=requestAnimationFrame(h))},y=function(_){d||(d=_);var C=(_-d)/r,k=BC(function(E,N){return XO.apply(void 0,Ise(N).concat([t(C)]))},o);if(i(Us(Us(Us({},n),e),k)),C<1)c=requestAnimationFrame(h);else{var T=BC(function(E,N){return XO.apply(void 0,Ise(N).concat([t(1)]))},o);i(Us(Us(Us({},n),e),T))}};return h=t.isStepper?x:y,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}});function F_(n){"@babel/helpers - typeof";return F_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F_(n)}var Rut=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Mut(n,e){if(n==null)return{};var t=Dut(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Dut(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function A8(n){return $ut(n)||But(n)||Fut(n)||Lut()}function Lut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fut(n,e){if(n){if(typeof n=="string")return YV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return YV(n,e)}}function But(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $ut(n){if(Array.isArray(n))return YV(n)}function YV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Rse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Kc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rse(Object(t),!0).forEach(function(r){pC(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pC(n,e,t){return e=t1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vut(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Uut(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,t1e(r.key),r)}}function zut(n,e,t){return e&&Uut(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function t1e(n){var e=Hut(n,"string");return F_(e)==="symbol"?e:String(e)}function Hut(n,e){if(F_(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(F_(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wut(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&XV(n,e)}function XV(n,e){return XV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XV(n,e)}function qut(n){var e=Gut();return function(){var r=JO(n),i;if(e){var s=JO(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return JV(this,i)}}function JV(n,e){if(e&&(F_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QV(n)}function QV(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gut(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function JO(n){return JO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},JO(n)}var vh=(function(n){Wut(t,n);var e=qut(t);function t(r,i){var s;Vut(this,t),s=e.call(this,r,i);var o=s.props,a=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,p=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(QV(s)),s.changeStyle=s.changeStyle.bind(QV(s)),!a||p<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:d}),JV(s);if(h&&h.length)s.state={style:h[0].style};else if(u){if(typeof f=="function")return s.state={style:u},JV(s);s.state={style:c?pC({},c,u):u}}else s.state={style:{}};return s}return zut(t,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,a=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,h=s.from,f=this.state.style;if(a){if(!o){var p={style:c?pC({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(p);return}if(!(Zct(i.to,d)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=x||u?h:i.to;if(this.state&&f){var b={style:c?pC({},c,y):y};(c&&f[c]!==y||!c&&f!==y)&&this.setState(b)}this.runAnimation(Kc(Kc({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,a=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,p=Out(o,a,_ut(u),c,this.changeStyle),x=function(){s.stopJSAnimation=p()};this.manager.start([f,d,x,c,h])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,a=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,p=function(y,b,_){if(_===0)return y;var C=b.duration,k=b.easing,T=k===void 0?"ease":k,E=b.style,N=b.properties,P=b.onAnimationEnd,M=_>0?o[_-1]:b,O=N||Object.keys(E);if(typeof T=="function"||T==="spring")return[].concat(A8(y),[s.runJSAnimation.bind(s,{from:M.style,to:E,duration:C,easing:T}),C]);var q=Nse(O,C,T),D=Kc(Kc(Kc({},M.style),E),{},{transition:q});return[].concat(A8(y),[D,C,P]).filter(uut)};return this.manager.start([c].concat(A8(o.reduce(p,[d,Math.max(f,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=out());var s=i.begin,o=i.duration,a=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,p=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var y=a?pC({},a,c):c,b=Nse(Object.keys(y),o,u);x.start([d,s,Kc(Kc({},y),{},{transition:b}),o,h])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=Mut(i,Rut),u=S.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!a||u===0||o<=0)return s;var h=function(p){var x=p.props,y=x.style,b=y===void 0?{}:y,_=x.className,C=S.cloneElement(p,Kc(Kc({},c),{},{style:Kc(Kc({},b),d),className:_}));return C};return u===1?h(S.Children.only(s)):re.createElement("div",null,S.Children.map(s,function(f){return h(f)}))}}]),t})(S.PureComponent);vh.displayName="Animate";vh.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};vh.propTypes={from:Kn.oneOfType([Kn.object,Kn.string]),to:Kn.oneOfType([Kn.object,Kn.string]),attributeName:Kn.string,duration:Kn.number,begin:Kn.number,easing:Kn.oneOfType([Kn.string,Kn.func]),steps:Kn.arrayOf(Kn.shape({duration:Kn.number.isRequired,style:Kn.object.isRequired,easing:Kn.oneOfType([Kn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Kn.func]),properties:Kn.arrayOf("string"),onAnimationEnd:Kn.func})),children:Kn.oneOfType([Kn.node,Kn.func]),isActive:Kn.bool,canBegin:Kn.bool,onAnimationEnd:Kn.func,shouldReAnimate:Kn.bool,onAnimationStart:Kn.func,onAnimationReStart:Kn.func};function s2(n){"@babel/helpers - typeof";return s2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s2(n)}function QO(){return QO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},QO.apply(this,arguments)}function Kut(n,e){return Qut(n)||Jut(n,e)||Xut(n,e)||Yut()}function Yut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xut(n,e){if(n){if(typeof n=="string")return Mse(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mse(n,e)}}function Mse(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Jut(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Qut(n){if(Array.isArray(n))return n}function Dse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Lse(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dse(Object(t),!0).forEach(function(r){Zut(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Dse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Zut(n,e,t){return e=edt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function edt(n){var e=tdt(n,"string");return s2(e)=="symbol"?e:e+""}function tdt(n,e){if(s2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(s2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Fse=function(e,t,r,i,s){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(o>0&&s instanceof Array){for(var h=[0,0,0,0],f=0,p=4;f<p;f++)h[f]=s[f]>o?o:s[f];d="M".concat(e,",").concat(t+a*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(t)),d+="L ".concat(e+r-c*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(t+a*h[1])),d+="L ".concat(e+r,",").concat(t+i-a*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(t+i)),d+="L ".concat(e+c*h[3],",").concat(t+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+i-a*h[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var x=Math.min(o,s);d="M ".concat(e,",").concat(t+a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+c*x,",").concat(t,`
            L `).concat(e+r-c*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+r,",").concat(t+a*x,`
            L `).concat(e+r,",").concat(t+i-a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+r-c*x,",").concat(t+i,`
            L `).concat(e+c*x,",").concat(t+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e,",").concat(t+i-a*x," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},ndt=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,s=t.x,o=t.y,a=t.width,c=t.height;if(Math.abs(a)>0&&Math.abs(c)>0){var u=Math.min(s,s+a),d=Math.max(s,s+a),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&i>=h&&i<=f}return!1},rdt={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yW=function(e){var t=Lse(Lse({},rdt),e),r=S.useRef(),i=S.useState(-1),s=Kut(i,2),o=s[0],a=s[1];S.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&a(T)}catch{}},[]);var c=t.x,u=t.y,d=t.width,h=t.height,f=t.radius,p=t.className,x=t.animationEasing,y=t.animationDuration,b=t.animationBegin,_=t.isAnimationActive,C=t.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var k=rn("recharts-rectangle",p);return C?re.createElement(vh,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:y,animationEasing:x,isActive:C},function(T){var E=T.width,N=T.height,P=T.x,M=T.y;return re.createElement(vh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:_,easing:x},re.createElement("path",QO({},Wt(t,!0),{className:k,d:Fse(P,M,E,N,f),ref:r})))}):re.createElement("path",QO({},Wt(t,!0),{className:k,d:Fse(c,u,d,h,f)}))},idt=["points","className","baseLinePoints","connectNulls"];function Gb(){return Gb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gb.apply(this,arguments)}function sdt(n,e){if(n==null)return{};var t=odt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function odt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Bse(n){return udt(n)||cdt(n)||ldt(n)||adt()}function adt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ldt(n,e){if(n){if(typeof n=="string")return ZV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ZV(n,e)}}function cdt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function udt(n){if(Array.isArray(n))return ZV(n)}function ZV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var $se=function(e){return e&&e.x===+e.x&&e.y===+e.y},ddt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[[]];return e.forEach(function(r){$se(r)?t[t.length-1].push(r):t[t.length-1].length>0&&t.push([])}),$se(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},$C=function(e,t){var r=ddt(e);t&&(r=[r.reduce(function(s,o){return[].concat(Bse(s),Bse(o))},[])]);var i=r.map(function(s){return s.reduce(function(o,a,c){return"".concat(o).concat(c===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},hdt=function(e,t,r){var i=$C(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat($C(t.reverse(),r).slice(1))},fdt=function(e){var t=e.points,r=e.className,i=e.baseLinePoints,s=e.connectNulls,o=sdt(e,idt);if(!t||!t.length)return null;var a=rn("recharts-polygon",r);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=hdt(t,i,s);return re.createElement("g",{className:a},re.createElement("path",Gb({},Wt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?re.createElement("path",Gb({},Wt(o,!0),{fill:"none",d:$C(t,s)})):null,c?re.createElement("path",Gb({},Wt(o,!0),{fill:"none",d:$C(i,s)})):null)}var d=$C(t,s);return re.createElement("path",Gb({},Wt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:a,d}))};function e9(){return e9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},e9.apply(this,arguments)}var D3=function(e){var t=e.cx,r=e.cy,i=e.r,s=e.className,o=rn("recharts-dot",s);return t===+t&&r===+r&&i===+i?S.createElement("circle",e9({},Wt(e,!1),wO(e),{className:o,cx:t,cy:r,r:i})):null};function o2(n){"@babel/helpers - typeof";return o2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o2(n)}var mdt=["x","y","top","left","width","height","className"];function t9(){return t9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},t9.apply(this,arguments)}function Vse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pdt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vse(Object(t),!0).forEach(function(r){gdt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gdt(n,e,t){return e=vdt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vdt(n){var e=ydt(n,"string");return o2(e)=="symbol"?e:e+""}function ydt(n,e){if(o2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(o2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xdt(n,e){if(n==null)return{};var t=bdt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bdt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var wdt=function(e,t,r,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(r)},_dt=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,s=i===void 0?0:i,o=e.top,a=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,p=f===void 0?0:f,x=e.className,y=xdt(e,mdt),b=pdt({x:r,y:s,top:a,left:u,width:h,height:p},y);return!ut(r)||!ut(s)||!ut(h)||!ut(p)||!ut(a)||!ut(u)?null:re.createElement("path",t9({},Wt(b,!0),{className:rn("recharts-cross",x),d:wdt(r,s,h,p,a,u)}))},N8,Use;function Sdt(){if(Use)return N8;Use=1;var n=P3(),e=gwe(),t=kh();function r(i,s){return i&&i.length?n(i,t(s,2),e):void 0}return N8=r,N8}var kdt=Sdt();const Cdt=qn(kdt);var j8,zse;function Edt(){if(zse)return j8;zse=1;var n=P3(),e=kh(),t=vwe();function r(i,s){return i&&i.length?n(i,e(s,2),t):void 0}return j8=r,j8}var Tdt=Edt();const Adt=qn(Tdt);var Ndt=["cx","cy","angle","ticks","axisLine"],jdt=["ticks","tick","angle","tickFormatter","stroke"];function B_(n){"@babel/helpers - typeof";return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B_(n)}function VC(){return VC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},VC.apply(this,arguments)}function Hse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hse(Object(t),!0).forEach(function(r){L3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Wse(n,e){if(n==null)return{};var t=Pdt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Pdt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Idt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function qse(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r1e(r.key),r)}}function Odt(n,e,t){return e&&qse(n.prototype,e),t&&qse(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Rdt(n,e,t){return e=ZO(e),Mdt(n,n1e()?Reflect.construct(e,t||[],ZO(n).constructor):e.apply(n,t))}function Mdt(n,e){if(e&&(B_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ddt(n)}function Ddt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function n1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n1e=function(){return!!n})()}function ZO(n){return ZO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZO(n)}function Ldt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&n9(n,e)}function n9(n,e){return n9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},n9(n,e)}function L3(n,e,t){return e=r1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r1e(n){var e=Fdt(n,"string");return B_(e)=="symbol"?e:e+""}function Fdt(n,e){if(B_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(B_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var F3=(function(n){function e(){return Idt(this,e),Rdt(this,e,arguments)}return Ldt(e,n),Odt(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,o=s.angle,a=s.cx,c=s.cy;return jr(a,c,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.angle,a=r.ticks,c=Cdt(a,function(d){return d.coordinate||0}),u=Adt(a,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.angle,a=r.ticks,c=r.axisLine,u=Wse(r,Ndt),d=a.reduce(function(x,y){return[Math.min(x[0],y.coordinate),Math.max(x[1],y.coordinate)]},[1/0,-1/0]),h=jr(i,s,d[0],o),f=jr(i,s,d[1],o),p=Gv(Gv(Gv({},Wt(u,!1)),{},{fill:"none"},Wt(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return re.createElement("line",VC({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,o=i.tick,a=i.angle,c=i.tickFormatter,u=i.stroke,d=Wse(i,jdt),h=this.getTickTextAnchor(),f=Wt(d,!1),p=Wt(o,!1),x=s.map(function(y,b){var _=r.getTickValueCoord(y),C=Gv(Gv(Gv(Gv({textAnchor:h,transform:"rotate(".concat(90-a,", ").concat(_.x,", ").concat(_.y,")")},f),{},{stroke:"none",fill:u},p),{},{index:b},_),{},{payload:y});return re.createElement(Vn,VC({className:rn("recharts-polar-radius-axis-tick",Wwe(o)),key:"tick-".concat(y.coordinate)},sx(r.props,y,b)),e.renderTickItem(o,C,c?c(y.value,b):y.value))});return re.createElement(Vn,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,o=r.tick;return!i||!i.length?null:re.createElement(Vn,{className:rn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Cs.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var o;return re.isValidElement(r)?o=re.cloneElement(r,i):nn(r)?o=r(i):o=re.createElement(ox,VC({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])})(S.PureComponent);L3(F3,"displayName","PolarRadiusAxis");L3(F3,"axisType","radiusAxis");L3(F3,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $_(n){"@babel/helpers - typeof";return $_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$_(n)}function ry(){return ry=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ry.apply(this,arguments)}function Gse(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Kv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gse(Object(t),!0).forEach(function(r){B3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Gse(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Bdt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Kse(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,s1e(r.key),r)}}function $dt(n,e,t){return e&&Kse(n.prototype,e),t&&Kse(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Vdt(n,e,t){return e=eR(e),Udt(n,i1e()?Reflect.construct(e,t||[],eR(n).constructor):e.apply(n,t))}function Udt(n,e){if(e&&($_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zdt(n)}function zdt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function i1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i1e=function(){return!!n})()}function eR(n){return eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eR(n)}function Hdt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&r9(n,e)}function r9(n,e){return r9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},r9(n,e)}function B3(n,e,t){return e=s1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s1e(n){var e=Wdt(n,"string");return $_(e)=="symbol"?e:e+""}function Wdt(n,e){if($_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var qdt=Math.PI/180,Yse=1e-5,$3=(function(n){function e(){return Bdt(this,e),Vdt(this,e,arguments)}return Hdt(e,n),$dt(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,o=i.cy,a=i.radius,c=i.orientation,u=i.tickSize,d=u||8,h=jr(s,o,a,r.coordinate),f=jr(s,o,a+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*qdt),o;return s>Yse?o=i==="outer"?"start":"end":s<-Yse?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.radius,a=r.axisLine,c=r.axisLineType,u=Kv(Kv({},Wt(this.props,!1)),{},{fill:"none"},Wt(a,!1));if(c==="circle")return re.createElement(D3,ry({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var d=this.props.ticks,h=d.map(function(f){return jr(i,s,o,f.coordinate)});return re.createElement(fdt,ry({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,o=i.tick,a=i.tickLine,c=i.tickFormatter,u=i.stroke,d=Wt(this.props,!1),h=Wt(o,!1),f=Kv(Kv({},d),{},{fill:"none"},Wt(a,!1)),p=s.map(function(x,y){var b=r.getTickLineCoord(x),_=r.getTickTextAnchor(x),C=Kv(Kv(Kv({textAnchor:_},d),{},{stroke:"none",fill:u},h),{},{index:y,payload:x,x:b.x2,y:b.y2});return re.createElement(Vn,ry({className:rn("recharts-polar-angle-axis-tick",Wwe(o)),key:"tick-".concat(x.coordinate)},sx(r.props,x,y)),a&&re.createElement("line",ry({className:"recharts-polar-angle-axis-tick-line"},f,b)),o&&e.renderTickItem(o,C,c?c(x.value,y):x.value))});return re.createElement(Vn,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,o=r.axisLine;return s<=0||!i||!i.length?null:re.createElement(Vn,{className:rn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var o;return re.isValidElement(r)?o=re.cloneElement(r,i):nn(r)?o=r(i):o=re.createElement(ox,ry({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])})(S.PureComponent);B3($3,"displayName","PolarAngleAxis");B3($3,"axisType","angleAxis");B3($3,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var P8,Xse;function Gdt(){if(Xse)return P8;Xse=1;var n=pbe(),e=n(Object.getPrototypeOf,Object);return P8=e,P8}var I8,Jse;function Kdt(){if(Jse)return I8;Jse=1;var n=Tm(),e=Gdt(),t=Am(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,c=o.call(Object);function u(d){if(!t(d)||n(d)!=r)return!1;var h=e(d);if(h===null)return!0;var f=a.call(h,"constructor")&&h.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==c}return I8=u,I8}var Ydt=Kdt();const Xdt=qn(Ydt);var O8,Qse;function Jdt(){if(Qse)return O8;Qse=1;var n=Tm(),e=Am(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return O8=r,O8}var Qdt=Jdt();const Zdt=qn(Qdt);function a2(n){"@babel/helpers - typeof";return a2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a2(n)}function tR(){return tR=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tR.apply(this,arguments)}function eht(n,e){return iht(n)||rht(n,e)||nht(n,e)||tht()}function tht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nht(n,e){if(n){if(typeof n=="string")return Zse(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zse(n,e)}}function Zse(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function rht(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function iht(n){if(Array.isArray(n))return n}function eoe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function toe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eoe(Object(t),!0).forEach(function(r){sht(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eoe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sht(n,e,t){return e=oht(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oht(n){var e=aht(n,"string");return a2(e)=="symbol"?e:e+""}function aht(n,e){if(a2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(a2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var noe=function(e,t,r,i,s){var o=r-i,a;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+r,",").concat(t),a+="L ".concat(e+r-o/2,",").concat(t+s),a+="L ".concat(e+r-o/2-i,",").concat(t+s),a+="L ".concat(e,",").concat(t," Z"),a},lht={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cht=function(e){var t=toe(toe({},lht),e),r=S.useRef(),i=S.useState(-1),s=eht(i,2),o=s[0],a=s[1];S.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var k=r.current.getTotalLength();k&&a(k)}catch{}},[]);var c=t.x,u=t.y,d=t.upperWidth,h=t.lowerWidth,f=t.height,p=t.className,x=t.animationEasing,y=t.animationDuration,b=t.animationBegin,_=t.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var C=rn("recharts-trapezoid",p);return _?re.createElement(vh,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:y,animationEasing:x,isActive:_},function(k){var T=k.upperWidth,E=k.lowerWidth,N=k.height,P=k.x,M=k.y;return re.createElement(vh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:x},re.createElement("path",tR({},Wt(t,!0),{className:C,d:noe(P,M,T,E,N),ref:r})))}):re.createElement("g",null,re.createElement("path",tR({},Wt(t,!0),{className:C,d:noe(c,u,d,h,f)})))},uht=["option","shapeType","propTransformer","activeClassName","isActive"];function l2(n){"@babel/helpers - typeof";return l2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l2(n)}function dht(n,e){if(n==null)return{};var t=hht(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function hht(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function roe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function nR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?roe(Object(t),!0).forEach(function(r){fht(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):roe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fht(n,e,t){return e=mht(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mht(n){var e=pht(n,"string");return l2(e)=="symbol"?e:e+""}function pht(n,e){if(l2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(l2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ght(n,e){return nR(nR({},e),n)}function vht(n,e){return n==="symbols"}function ioe(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return re.createElement(yW,t);case"trapezoid":return re.createElement(cht,t);case"sector":return re.createElement(Kwe,t);case"symbols":if(vht(e))return re.createElement(LH,t);break;default:return null}}function yht(n){return S.isValidElement(n)?n.props:n}function o1e(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?ght:r,s=n.activeClassName,o=s===void 0?"recharts-active-shape":s,a=n.isActive,c=dht(n,uht),u;if(S.isValidElement(e))u=S.cloneElement(e,nR(nR({},c),yht(e)));else if(nn(e))u=e(c);else if(Xdt(e)&&!Zdt(e)){var d=i(e,c);u=re.createElement(ioe,{shapeType:t,elementProps:d})}else{var h=c;u=re.createElement(ioe,{shapeType:t,elementProps:h})}return a?re.createElement(Vn,{className:o},u):u}function V3(n,e){return e!=null&&"trapezoids"in n.props}function U3(n,e){return e!=null&&"sectors"in n.props}function c2(n,e){return e!=null&&"points"in n.props}function xht(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,s=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&s}function bht(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function wht(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function _ht(n,e){var t;return V3(n,e)?t=xht:U3(n,e)?t=bht:c2(n,e)&&(t=wht),t}function Sht(n,e){var t;return V3(n,e)?t="trapezoids":U3(n,e)?t="sectors":c2(n,e)&&(t="points"),t}function kht(n,e){if(V3(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(U3(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return c2(n,e)?e.payload:{}}function Cht(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=Sht(t,e),s=kht(t,e),o=r.filter(function(c,u){var d=eN(s,c),h=t.props[i].filter(function(x){var y=_ht(t,e);return y(x,e)}),f=t.props[i].indexOf(h[h.length-1]),p=u===f;return d&&p}),a=r.indexOf(o[o.length-1]);return a}var sI;function V_(n){"@babel/helpers - typeof";return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V_(n)}function Kb(){return Kb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kb.apply(this,arguments)}function soe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?soe(Object(t),!0).forEach(function(r){Sc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):soe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Eht(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ooe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,l1e(r.key),r)}}function Tht(n,e,t){return e&&ooe(n.prototype,e),t&&ooe(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Aht(n,e,t){return e=rR(e),Nht(n,a1e()?Reflect.construct(e,t||[],rR(n).constructor):e.apply(n,t))}function Nht(n,e){if(e&&(V_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jht(n)}function jht(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function a1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a1e=function(){return!!n})()}function rR(n){return rR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rR(n)}function Pht(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&i9(n,e)}function i9(n,e){return i9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},i9(n,e)}function Sc(n,e,t){return e=l1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l1e(n){var e=Iht(n,"string");return V_(e)=="symbol"?e:e+""}function Iht(n,e){if(V_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(V_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var jm=(function(n){function e(t){var r;return Eht(this,e),r=Aht(this,e,[t]),Sc(r,"pieRef",null),Sc(r,"sectorRefs",[]),Sc(r,"id",wS("recharts-pie-")),Sc(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),nn(i)&&i()}),Sc(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),nn(i)&&i()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return Pht(e,n),Tht(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,a=s.labelLine,c=s.dataKey,u=s.valueKey,d=Wt(this.props,!1),h=Wt(o,!1),f=Wt(a,!1),p=o&&o.offsetRadius||20,x=r.map(function(y,b){var _=(y.startAngle+y.endAngle)/2,C=jr(y.cx,y.cy,y.outerRadius+p,_),k=Sr(Sr(Sr(Sr({},d),y),{},{stroke:"none"},h),{},{index:b,textAnchor:e.getTextAnchor(C.x,y.cx)},C),T=Sr(Sr(Sr(Sr({},d),y),{},{fill:"none",stroke:y.fill},f),{},{index:b,points:[jr(y.cx,y.cy,y.outerRadius,_),C]}),E=c;return un(c)&&un(u)?E="value":un(c)&&(E=u),re.createElement(Vn,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},a&&e.renderLabelLineItem(a,T,"line"),e.renderLabelItem(o,k,rs(y,E)))});return re.createElement(Vn,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,o=s.activeShape,a=s.blendStroke,c=s.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=i.isActiveIndex(d),f=c&&i.hasActiveIndex()?c:null,p=h?o:f,x=Sr(Sr({},u),{},{stroke:a?u.fill:u.stroke,tabIndex:-1});return re.createElement(Vn,Kb({ref:function(b){b&&!i.sectorRefs.includes(b)&&i.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},sx(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),re.createElement(o1e,Kb({option:p,isActive:h,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,o=i.isAnimationActive,a=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state,f=h.prevSectors,p=h.prevIsAnimationActive;return re.createElement(vh,{begin:a,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var y=x.t,b=[],_=s&&s[0],C=_.startAngle;return s.forEach(function(k,T){var E=f&&f[T],N=T>0?Dl(k,"paddingAngle",0):0;if(E){var P=Cl(E.endAngle-E.startAngle,k.endAngle-k.startAngle),M=Sr(Sr({},k),{},{startAngle:C+N,endAngle:C+P(y)+N});b.push(M),C=M.endAngle}else{var O=k.endAngle,q=k.startAngle,D=Cl(0,O-q),F=D(y),K=Sr(Sr({},k),{},{startAngle:C+N,endAngle:C+F+N});b.push(K),C=K.endAngle}}),re.createElement(Vn,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var a=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!eN(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,o=i.sectors,a=i.className,c=i.label,u=i.cx,d=i.cy,h=i.innerRadius,f=i.outerRadius,p=i.isAnimationActive,x=this.state.isAnimationFinished;if(s||!o||!o.length||!ut(u)||!ut(d)||!ut(h)||!ut(f))return null;var y=rn("recharts-pie",a);return re.createElement(Vn,{tabIndex:this.props.rootTabIndex,className:y,ref:function(_){r.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Cs.renderCallByParent(this.props,null,!1),(!p||x)&&tm.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(re.isValidElement(r))return re.cloneElement(r,i);if(nn(r))return r(i);var o=rn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return re.createElement(KO,Kb({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,s){if(re.isValidElement(r))return re.cloneElement(r,i);var o=s;if(nn(r)&&(o=r(i),re.isValidElement(o)))return o;var a=rn("recharts-pie-label-text",typeof r!="boolean"&&!nn(r)?r.className:"");return re.createElement(ox,Kb({},i,{alignmentBaseline:"middle",className:a}),o)}}])})(S.PureComponent);sI=jm;Sc(jm,"displayName","Pie");Sc(jm,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!wx.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Sc(jm,"parseDeltaAngle",function(n,e){var t=Vo(e-n),r=Math.min(Math.abs(e-n),360);return t*r});Sc(jm,"getRealPieData",function(n){var e=n.data,t=n.children,r=Wt(n,!1),i=Ll(t,k3);return e&&e.length?e.map(function(s,o){return Sr(Sr(Sr({payload:s},r),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Sr(Sr({},r),s.props)}):[]});Sc(jm,"parseCoordinateOfPie",function(n,e){var t=e.top,r=e.left,i=e.width,s=e.height,o=Hwe(i,s),a=r+Uo(n.cx,i,i/2),c=t+Uo(n.cy,s,s/2),u=Uo(n.innerRadius,o,0),d=Uo(n.outerRadius,o,o*.8),h=n.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:a,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});Sc(jm,"getComposedData",function(n){var e=n.item,t=n.offset,r=e.type.defaultProps!==void 0?Sr(Sr({},e.type.defaultProps),e.props):e.props,i=sI.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,o=r.startAngle,a=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,p=Math.abs(r.minAngle),x=sI.parseCoordinateOfPie(r,t),y=sI.parseDeltaAngle(o,a),b=Math.abs(y),_=u;un(u)&&un(h)?(Nu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):un(u)&&(Nu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=h);var C=i.filter(function(M){return rs(M,_,0)!==0}).length,k=(b>=360?C:C-1)*c,T=b-C*p-k,E=i.reduce(function(M,O){var q=rs(O,_,0);return M+(ut(q)?q:0)},0),N;if(E>0){var P;N=i.map(function(M,O){var q=rs(M,_,0),D=rs(M,d,O),F=(ut(q)?q:0)/E,K;O?K=P.endAngle+Vo(y)*c*(q!==0?1:0):K=o;var ee=K+Vo(y)*((q!==0?p:0)+F*T),Y=(K+ee)/2,U=(x.innerRadius+x.outerRadius)/2,R=[{name:D,value:q,payload:M,dataKey:_,type:f}],z=jr(x.cx,x.cy,U,Y);return P=Sr(Sr(Sr({percent:F,cornerRadius:s,name:D,tooltipPayload:R,midAngle:Y,middleRadius:U,tooltipPosition:z},M),x),{},{value:rs(M,_),startAngle:K,endAngle:ee,payload:M,paddingAngle:Vo(y)*c}),P})}return Sr(Sr({},x),{},{sectors:N,data:i})});var R8,aoe;function Oht(){if(aoe)return R8;aoe=1;var n=Math.ceil,e=Math.max;function t(r,i,s,o){for(var a=-1,c=e(n((i-r)/(s||1)),0),u=Array(c);c--;)u[o?c:++a]=r,r+=s;return u}return R8=t,R8}var M8,loe;function c1e(){if(loe)return M8;loe=1;var n=Pbe(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var s=i<0?-1:1;return s*t}return i===i?i:0}return M8=r,M8}var D8,coe;function Rht(){if(coe)return D8;coe=1;var n=Oht(),e=S3(),t=c1e();function r(i){return function(s,o,a){return a&&typeof a!="number"&&e(s,o,a)&&(o=a=void 0),s=t(s),o===void 0?(o=s,s=0):o=t(o),a=a===void 0?s<o?1:-1:t(a),n(s,o,a,i)}}return D8=r,D8}var L8,uoe;function Mht(){if(uoe)return L8;uoe=1;var n=Rht(),e=n();return L8=e,L8}var Dht=Mht();const iR=qn(Dht);function u2(n){"@babel/helpers - typeof";return u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u2(n)}function doe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hoe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?doe(Object(t),!0).forEach(function(r){u1e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):doe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function u1e(n,e,t){return e=Lht(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lht(n){var e=Fht(n,"string");return u2(e)=="symbol"?e:e+""}function Fht(n,e){if(u2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(u2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Bht=["Webkit","Moz","O","ms"],$ht=function(e,t){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=Bht.reduce(function(s,o){return hoe(hoe({},s),{},u1e({},o+r,t))},{});return i[e]=t,i};function U_(n){"@babel/helpers - typeof";return U_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U_(n)}function sR(){return sR=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sR.apply(this,arguments)}function foe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function F8(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?foe(Object(t),!0).forEach(function(r){nl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):foe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Vht(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function moe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,h1e(r.key),r)}}function Uht(n,e,t){return e&&moe(n.prototype,e),t&&moe(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function zht(n,e,t){return e=oR(e),Hht(n,d1e()?Reflect.construct(e,t||[],oR(n).constructor):e.apply(n,t))}function Hht(n,e){if(e&&(U_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wht(n)}function Wht(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function d1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d1e=function(){return!!n})()}function oR(n){return oR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oR(n)}function qht(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&s9(n,e)}function s9(n,e){return s9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s9(n,e)}function nl(n,e,t){return e=h1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h1e(n){var e=Ght(n,"string");return U_(e)=="symbol"?e:e+""}function Ght(n,e){if(U_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(U_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Kht=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,s=e.x,o=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var c=t.length,u=LC().domain(iR(0,c)).range([s,s+o-a]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},poe=function(e){return e.changedTouches&&!!e.changedTouches.length},z_=(function(n){function e(t){var r;return Vht(this,e),r=zht(this,e,[t]),nl(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),nl(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),nl(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,o=i.onDragEnd,a=i.startIndex;o==null||o({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),nl(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),nl(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),nl(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),nl(r,"handleSlideDragStart",function(i){var s=poe(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return qht(e,n),Uht(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,o=this.state.scaleValues,a=this.props,c=a.gap,u=a.data,d=u.length-1,h=Math.min(i,s),f=Math.max(i,s),p=e.getIndexInRange(o,h),x=e.getIndexInRange(o,f);return{startIndex:p-p%c,endIndex:x===d?d:x-x%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,o=i.tickFormatter,a=i.dataKey,c=rs(s[r],a,r);return nn(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,o=i.startX,a=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,p=c.endIndex,x=c.onChange,y=r.pageX-s;y>0?y=Math.min(y,u+d-h-a,u+d-h-o):y<0&&(y=Math.max(y,u-o,u-a));var b=this.getIndex({startX:o+y,endX:a+y});(b.startIndex!==f||b.endIndex!==p)&&x&&x(b),this.setState({startX:o+y,endX:a+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=poe(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,a=i.endX,c=i.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,p=d.travellerWidth,x=d.onChange,y=d.gap,b=d.data,_={startX:this.state.startX,endX:this.state.endX},C=r.pageX-s;C>0?C=Math.min(C,h+f-p-u):C<0&&(C=Math.max(C,h-u)),_[o]=u+C;var k=this.getIndex(_),T=k.startIndex,E=k.endIndex,N=function(){var M=b.length-1;return o==="startX"&&(a>c?T%y===0:E%y===0)||a<c&&E===M||o==="endX"&&(a>c?E%y===0:T%y===0)||a>c&&E===M};this.setState(nl(nl({},o,u+C),"brushMoveStartX",r.pageX),function(){x&&N()&&x(k)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,o=this.state,a=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],h=a.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=a.length)){var p=a[f];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(nl({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,c=r.fill,u=r.stroke;return re.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,c=r.data,u=r.children,d=r.padding,h=S.Children.only(u);return h?re.cloneElement(h,{x:i,y:s,width:o,height:a,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,o,a=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,p=c.ariaLabel,x=c.data,y=c.startIndex,b=c.endIndex,_=Math.max(r,this.props.x),C=F8(F8({},Wt(this.props,!1)),{},{x:_,y:u,width:d,height:h}),k=p||"Min value: ".concat((s=x[y])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=x[b])===null||o===void 0?void 0:o.name);return re.createElement(Vn,{tabIndex:0,role:"slider","aria-label":k,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),a.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,C))}},{key:"renderSlide",value:function(r,i){var s=this.props,o=s.y,a=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return re.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,o=r.y,a=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,p=5,x={pointerEvents:"none",fill:u};return re.createElement(Vn,{className:"recharts-brush-texts"},re.createElement(ox,sR({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-p,y:o+a/2},x),this.getTextOfTick(i)),re.createElement(ox,sR({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+p,y:o+a/2},x),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,o=r.children,a=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,p=f.startX,x=f.endX,y=f.isTextActive,b=f.isSlideMoving,_=f.isTravellerMoving,C=f.isTravellerFocused;if(!i||!i.length||!ut(a)||!ut(c)||!ut(u)||!ut(d)||u<=0||d<=0)return null;var k=rn("recharts-brush",s),T=re.Children.count(o)===1,E=$ht("userSelect","none");return re.createElement(Vn,{className:k,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(p,x),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(x,"endX"),(y||b||_||C||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,o=r.width,a=r.height,c=r.stroke,u=Math.floor(s+a/2)-1;return re.createElement(re.Fragment,null,re.createElement("rect",{x:i,y:s,width:o,height:a,fill:c,stroke:"none"}),re.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),re.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return re.isValidElement(r)?s=re.cloneElement(r,i):nn(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,o=r.width,a=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return F8({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:a,prevWidth:o},s&&s.length?Kht({data:s,width:o,x:a,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||a!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([a,a+o-c]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:a,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,o=0,a=s-1;a-o>1;){var c=Math.floor((o+a)/2);r[c]>i?a=c:o=c}return i>=r[a]?a:o}}])})(S.PureComponent);nl(z_,"displayName","Brush");nl(z_,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var B8,goe;function Yht(){if(goe)return B8;goe=1;var n=HH();function e(t,r){var i;return n(t,function(s,o,a){return i=r(s,o,a),!i}),!!i}return B8=e,B8}var $8,voe;function Xht(){if(voe)return $8;voe=1;var n=lbe(),e=kh(),t=Yht(),r=Ha(),i=S3();function s(o,a,c){var u=r(o)?n:t;return c&&i(o,a,c)&&(a=void 0),u(o,e(a,3))}return $8=s,$8}var Jht=Xht();const Qht=qn(Jht);var uh=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},V8,yoe;function Zht(){if(yoe)return V8;yoe=1;var n=Ebe();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return V8=e,V8}var U8,xoe;function eft(){if(xoe)return U8;xoe=1;var n=Zht(),e=kbe(),t=kh();function r(i,s){var o={};return s=t(s,3),e(i,function(a,c,u){n(o,c,s(a,c,u))}),o}return U8=r,U8}var tft=eft();const nft=qn(tft);var z8,boe;function rft(){if(boe)return z8;boe=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return z8=n,z8}var H8,woe;function ift(){if(woe)return H8;woe=1;var n=HH();function e(t,r){var i=!0;return n(t,function(s,o,a){return i=!!r(s,o,a),i}),i}return H8=e,H8}var W8,_oe;function sft(){if(_oe)return W8;_oe=1;var n=rft(),e=ift(),t=kh(),r=Ha(),i=S3();function s(o,a,c){var u=r(o)?n:e;return c&&i(o,a,c)&&(a=void 0),u(o,t(a,3))}return W8=s,W8}var oft=sft();const f1e=qn(oft);var aft=["x","y"];function d2(n){"@babel/helpers - typeof";return d2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d2(n)}function o9(){return o9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o9.apply(this,arguments)}function Soe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ok(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Soe(Object(t),!0).forEach(function(r){lft(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Soe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lft(n,e,t){return e=cft(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cft(n){var e=uft(n,"string");return d2(e)=="symbol"?e:e+""}function uft(n,e){if(d2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(d2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dft(n,e){if(n==null)return{};var t=hft(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function hft(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function fft(n,e){var t=n.x,r=n.y,i=dft(n,aft),s="".concat(t),o=parseInt(s,10),a="".concat(r),c=parseInt(a,10),u="".concat(e.height||i.height),d=parseInt(u,10),h="".concat(e.width||i.width),f=parseInt(h,10);return Ok(Ok(Ok(Ok(Ok({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function koe(n){return re.createElement(o1e,o9({shapeType:"rectangle",propTransformer:fft,activeClassName:"recharts-active-bar"},n))}var mft=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=ut(r)||DZe(r);return s?e(r,i):(s||Rn(!1),t)}},pft=["value","background"],m1e;function H_(n){"@babel/helpers - typeof";return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H_(n)}function gft(n,e){if(n==null)return{};var t=vft(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function vft(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function aR(){return aR=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},aR.apply(this,arguments)}function Coe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Coe(Object(t),!0).forEach(function(r){_g(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Coe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yft(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Eoe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,g1e(r.key),r)}}function xft(n,e,t){return e&&Eoe(n.prototype,e),t&&Eoe(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function bft(n,e,t){return e=lR(e),wft(n,p1e()?Reflect.construct(e,t||[],lR(n).constructor):e.apply(n,t))}function wft(n,e){if(e&&(H_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ft(n)}function _ft(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function p1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p1e=function(){return!!n})()}function lR(n){return lR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lR(n)}function Sft(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&a9(n,e)}function a9(n,e){return a9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},a9(n,e)}function _g(n,e,t){return e=g1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g1e(n){var e=kft(n,"string");return H_(e)=="symbol"?e:e+""}function kft(n,e){if(H_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(H_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Cx=(function(n){function e(){var t;yft(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=bft(this,e,[].concat(i)),_g(t,"state",{isAnimationFinished:!1}),_g(t,"id",wS("recharts-bar-")),_g(t,"handleAnimationEnd",function(){var o=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),o&&o()}),_g(t,"handleAnimationStart",function(){var o=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),o&&o()}),t}return Sft(e,n),xft(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,o=s.shape,a=s.dataKey,c=s.activeIndex,u=s.activeBar,d=Wt(this.props,!1);return r&&r.map(function(h,f){var p=f===c,x=p?u:o,y=Bi(Bi(Bi({},d),h),{},{isActive:p,option:x,index:f,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return re.createElement(Vn,aR({className:"recharts-bar-rectangle"},sx(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),re.createElement(koe,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,o=i.layout,a=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,f=this.state.prevData;return re.createElement(vh,{begin:c,duration:u,isActive:a,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var x=p.t,y=s.map(function(b,_){var C=f&&f[_];if(C){var k=Cl(C.x,b.x),T=Cl(C.y,b.y),E=Cl(C.width,b.width),N=Cl(C.height,b.height);return Bi(Bi({},b),{},{x:k(x),y:T(x),width:E(x),height:N(x)})}if(o==="horizontal"){var P=Cl(0,b.height),M=P(x);return Bi(Bi({},b),{},{y:b.y+b.height-M,height:M})}var O=Cl(0,b.width),q=O(x);return Bi(Bi({},b),{},{width:q})});return re.createElement(Vn,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!eN(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,o=i.dataKey,a=i.activeIndex,c=Wt(this.props.background,!1);return s.map(function(u,d){u.value;var h=u.background,f=gft(u,pft);if(!h)return null;var p=Bi(Bi(Bi(Bi(Bi({},f),{},{fill:"#eee"},h),c),sx(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return re.createElement(koe,aR({key:"background-bar-".concat(d),option:r.props.background,isActive:d===a},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,a=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=Ll(d,tN);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,p=function(b,_){var C=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:C,errorVal:rs(b,_)}},x={clipPath:r?"url(#clipPath-".concat(i,")"):null};return re.createElement(Vn,x,h.map(function(y){return re.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:o,xAxis:a,yAxis:c,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,o=r.className,a=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,p=r.isAnimationActive,x=r.background,y=r.id;if(i||!s||!s.length)return null;var b=this.state.isAnimationFinished,_=rn("recharts-bar",o),C=a&&a.allowDataOverflow,k=c&&c.allowDataOverflow,T=C||k,E=un(y)?this.id:y;return re.createElement(Vn,{className:_},C||k?re.createElement("defs",null,re.createElement("clipPath",{id:"clipPath-".concat(E)},re.createElement("rect",{x:C?u:u-h/2,y:k?d:d-f/2,width:C?h:h*2,height:k?f:f*2}))):null,re.createElement(Vn,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(E,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,E),(!p||b)&&tm.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(S.PureComponent);m1e=Cx;_g(Cx,"displayName","Bar");_g(Cx,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!wx.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_g(Cx,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,s=n.xAxis,o=n.yAxis,a=n.xAxisTicks,c=n.yAxisTicks,u=n.stackedData,d=n.dataStartIndex,h=n.displayedData,f=n.offset,p=Qat(r,t);if(!p)return null;var x=e.layout,y=t.type.defaultProps,b=y!==void 0?Bi(Bi({},y),t.props):t.props,_=b.dataKey,C=b.children,k=b.minPointSize,T=x==="horizontal"?o:s,E=u?T.scale.domain():null,N=slt({numericAxis:T}),P=Ll(C,k3),M=h.map(function(O,q){var D,F,K,ee,Y,U;u?D=Zat(u[d+q],E):(D=rs(O,_),Array.isArray(D)||(D=[N,D]));var R=mft(k,m1e.defaultProps.minPointSize)(D[1],q);if(x==="horizontal"){var z,W=[o.scale(D[0]),o.scale(D[1])],se=W[0],ne=W[1];F=Jie({axis:s,ticks:a,bandSize:i,offset:p.offset,entry:O,index:q}),K=(z=ne??se)!==null&&z!==void 0?z:void 0,ee=p.size;var te=se-ne;if(Y=Number.isNaN(te)?0:te,U={x:F,y:o.y,width:ee,height:o.height},Math.abs(R)>0&&Math.abs(Y)<Math.abs(R)){var H=Vo(Y||R)*(Math.abs(R)-Math.abs(Y));K-=H,Y+=H}}else{var ce=[s.scale(D[0]),s.scale(D[1])],pe=ce[0],oe=ce[1];if(F=pe,K=Jie({axis:o,ticks:c,bandSize:i,offset:p.offset,entry:O,index:q}),ee=oe-pe,Y=p.size,U={x:s.x,y:K,width:s.width,height:Y},Math.abs(R)>0&&Math.abs(ee)<Math.abs(R)){var ve=Vo(ee||R)*(Math.abs(R)-Math.abs(ee));ee+=ve}}return Bi(Bi(Bi({},O),{},{x:F,y:K,width:ee,height:Y,value:u?D:D[1],payload:O,background:U},P&&P[q]&&P[q].props),{},{tooltipPayload:[Uwe(t,O)],tooltipPosition:{x:F+ee/2,y:K+Y/2}})});return Bi({data:M,layout:x},f)});function h2(n){"@babel/helpers - typeof";return h2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h2(n)}function Cft(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Toe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,v1e(r.key),r)}}function Eft(n,e,t){return e&&Toe(n.prototype,e),t&&Toe(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Aoe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Aoe(Object(t),!0).forEach(function(r){z3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Aoe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function z3(n,e,t){return e=v1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v1e(n){var e=Tft(n,"string");return h2(e)=="symbol"?e:e+""}function Tft(n,e){if(h2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(h2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var y1e=function(e,t,r,i,s){var o=e.width,a=e.height,c=e.layout,u=e.children,d=Object.keys(t),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!_l(u,Cx);return d.reduce(function(p,x){var y=t[x],b=y.orientation,_=y.domain,C=y.padding,k=C===void 0?{}:C,T=y.mirror,E=y.reversed,N="".concat(b).concat(T?"Mirror":""),P,M,O,q,D;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var F=_[1]-_[0],K=1/0,ee=y.categoricalDomain.sort(BZe);if(ee.forEach(function(ce,pe){pe>0&&(K=Math.min((ce||0)-(ee[pe-1]||0),K))}),Number.isFinite(K)){var Y=K/F,U=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(P=Y*U/2),y.padding==="no-gap"){var R=Uo(e.barCategoryGap,Y*U),z=Y*U/2;P=z-R-(z-R)/U*R}}}i==="xAxis"?M=[r.left+(k.left||0)+(P||0),r.left+r.width-(k.right||0)-(P||0)]:i==="yAxis"?M=c==="horizontal"?[r.top+r.height-(k.bottom||0),r.top+(k.top||0)]:[r.top+(k.top||0)+(P||0),r.top+r.height-(k.bottom||0)-(P||0)]:M=y.range,E&&(M=[M[1],M[0]]);var W=Fwe(y,s,f),se=W.scale,ne=W.realScaleType;se.domain(_).range(M),Bwe(se);var te=$we(se,mu(mu({},y),{},{realScaleType:ne}));i==="xAxis"?(D=b==="top"&&!T||b==="bottom"&&T,O=r.left,q=h[N]-D*y.height):i==="yAxis"&&(D=b==="left"&&!T||b==="right"&&T,O=h[N]-D*y.width,q=r.top);var H=mu(mu(mu({},y),te),{},{realScaleType:ne,x:O,y:q,scale:se,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return H.bandSize=WO(H,te),!y.hide&&i==="xAxis"?h[N]+=(D?-1:1)*H.height:y.hide||(h[N]+=(D?-1:1)*H.width),mu(mu({},p),{},z3({},x,H))},{})},x1e=function(e,t){var r=e.x,i=e.y,s=t.x,o=t.y;return{x:Math.min(r,s),y:Math.min(i,o),width:Math.abs(s-r),height:Math.abs(o-i)}},Aft=function(e){var t=e.x1,r=e.y1,i=e.x2,s=e.y2;return x1e({x:t,y:r},{x:i,y:s})},b1e=(function(){function n(e){Cft(this,n),this.scale=e}return Eft(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?t>=i&&t<=s:t>=s&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])})();z3(b1e,"EPS",1e-4);var xW=function(e){var t=Object.keys(e).reduce(function(r,i){return mu(mu({},r),{},z3({},i,b1e.create(e[i])))},{});return mu(mu({},t),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,a=s.position;return nft(i,function(c,u){return t[u].apply(c,{bandAware:o,position:a})})},isInRange:function(i){return f1e(i,function(s,o){return t[o].isInRange(s)})}})};function Nft(n){return(n%180+180)%180}var jft=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Nft(i),o=s*Math.PI/180,a=Math.atan(r/t),c=o>a&&o<Math.PI-a?r/Math.sin(o):t/Math.cos(o);return Math.abs(c)},q8,Noe;function Pft(){if(Noe)return q8;Noe=1;var n=kh(),e=YA(),t=w3();function r(i){return function(s,o,a){var c=Object(s);if(!e(s)){var u=n(o,3);s=t(s),o=function(h){return u(c[h],h,c)}}var d=i(s,o,a);return d>-1?c[u?s[d]:d]:void 0}}return q8=r,q8}var G8,joe;function Ift(){if(joe)return G8;joe=1;var n=c1e();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return G8=e,G8}var K8,Poe;function Oft(){if(Poe)return K8;Poe=1;var n=xbe(),e=kh(),t=Ift(),r=Math.max;function i(s,o,a){var c=s==null?0:s.length;if(!c)return-1;var u=a==null?0:t(a);return u<0&&(u=r(c+u,0)),n(s,e(o,3),u)}return K8=i,K8}var Y8,Ioe;function Rft(){if(Ioe)return Y8;Ioe=1;var n=Pft(),e=Oft(),t=n(e);return Y8=t,Y8}var Mft=Rft();const Dft=qn(Mft);var Lft=Mxe();const Fft=qn(Lft);var Bft=Fft(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),bW=S.createContext(void 0),wW=S.createContext(void 0),w1e=S.createContext(void 0),_1e=S.createContext({}),S1e=S.createContext(void 0),k1e=S.createContext(0),C1e=S.createContext(0),Ooe=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,s=t.offset,o=e.clipPathId,a=e.children,c=e.width,u=e.height,d=Bft(s);return re.createElement(bW.Provider,{value:r},re.createElement(wW.Provider,{value:i},re.createElement(_1e.Provider,{value:s},re.createElement(w1e.Provider,{value:d},re.createElement(S1e.Provider,{value:o},re.createElement(k1e.Provider,{value:u},re.createElement(C1e.Provider,{value:c},a)))))))},$ft=function(){return S.useContext(S1e)},E1e=function(e){var t=S.useContext(bW);t==null&&Rn(!1);var r=t[e];return r==null&&Rn(!1),r},Vft=function(){var e=S.useContext(bW);return yp(e)},Uft=function(){var e=S.useContext(wW),t=Dft(e,function(r){return f1e(r.domain,Number.isFinite)});return t||yp(e)},T1e=function(e){var t=S.useContext(wW);t==null&&Rn(!1);var r=t[e];return r==null&&Rn(!1),r},zft=function(){var e=S.useContext(w1e);return e},Hft=function(){return S.useContext(_1e)},_W=function(){return S.useContext(C1e)},SW=function(){return S.useContext(k1e)};function W_(n){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W_(n)}function Wft(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function qft(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,N1e(r.key),r)}}function Gft(n,e,t){return e&&qft(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Kft(n,e,t){return e=cR(e),Yft(n,A1e()?Reflect.construct(e,t||[],cR(n).constructor):e.apply(n,t))}function Yft(n,e){if(e&&(W_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xft(n)}function Xft(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function A1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A1e=function(){return!!n})()}function cR(n){return cR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cR(n)}function Jft(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&l9(n,e)}function l9(n,e){return l9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},l9(n,e)}function Roe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Moe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Roe(Object(t),!0).forEach(function(r){kW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Roe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function kW(n,e,t){return e=N1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N1e(n){var e=Qft(n,"string");return W_(e)=="symbol"?e:e+""}function Qft(n,e){if(W_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(W_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Zft(n,e){return rmt(n)||nmt(n,e)||tmt(n,e)||emt()}function emt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tmt(n,e){if(n){if(typeof n=="string")return Doe(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Doe(n,e)}}function Doe(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function nmt(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function rmt(n){if(Array.isArray(n))return n}function c9(){return c9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},c9.apply(this,arguments)}var imt=function(e,t){var r;return re.isValidElement(e)?r=re.cloneElement(e,t):nn(e)?r=e(t):r=re.createElement("line",c9({},t,{className:"recharts-reference-line-line"})),r},smt=function(e,t,r,i,s,o,a,c,u){var d=s.x,h=s.y,f=s.width,p=s.height;if(r){var x=u.y,y=e.y.apply(x,{position:o});if(uh(u,"discard")&&!e.y.isInRange(y))return null;var b=[{x:d+f,y},{x:d,y}];return c==="left"?b.reverse():b}if(t){var _=u.x,C=e.x.apply(_,{position:o});if(uh(u,"discard")&&!e.x.isInRange(C))return null;var k=[{x:C,y:h+p},{x:C,y:h}];return a==="top"?k.reverse():k}if(i){var T=u.segment,E=T.map(function(N){return e.apply(N,{position:o})});return uh(u,"discard")&&Qht(E,function(N){return!e.isInRange(N)})?null:E}return null};function omt(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,s=n.yAxisId,o=n.shape,a=n.className,c=n.alwaysShow,u=$ft(),d=E1e(i),h=T1e(s),f=zft();if(!u||!f)return null;Nu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=xW({x:d.scale,y:h.scale}),x=ss(e),y=ss(t),b=r&&r.length===2,_=smt(p,x,y,b,f,n.position,d.orientation,h.orientation,n);if(!_)return null;var C=Zft(_,2),k=C[0],T=k.x,E=k.y,N=C[1],P=N.x,M=N.y,O=uh(n,"hidden")?"url(#".concat(u,")"):void 0,q=Moe(Moe({clipPath:O},Wt(n,!0)),{},{x1:T,y1:E,x2:P,y2:M});return re.createElement(Vn,{className:rn("recharts-reference-line",a)},imt(o,q),Cs.renderCallByParent(n,Aft({x1:T,y1:E,x2:P,y2:M})))}var CW=(function(n){function e(){return Wft(this,e),Kft(this,e,arguments)}return Jft(e,n),Gft(e,[{key:"render",value:function(){return re.createElement(omt,this.props)}}])})(re.Component);kW(CW,"displayName","ReferenceLine");kW(CW,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function u9(){return u9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u9.apply(this,arguments)}function q_(n){"@babel/helpers - typeof";return q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q_(n)}function Loe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Foe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Loe(Object(t),!0).forEach(function(r){H3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Loe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function amt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function lmt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,P1e(r.key),r)}}function cmt(n,e,t){return e&&lmt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function umt(n,e,t){return e=uR(e),dmt(n,j1e()?Reflect.construct(e,t||[],uR(n).constructor):e.apply(n,t))}function dmt(n,e){if(e&&(q_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hmt(n)}function hmt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function j1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j1e=function(){return!!n})()}function uR(n){return uR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uR(n)}function fmt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&d9(n,e)}function d9(n,e){return d9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d9(n,e)}function H3(n,e,t){return e=P1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P1e(n){var e=mmt(n,"string");return q_(e)=="symbol"?e:e+""}function mmt(n,e){if(q_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(q_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var pmt=function(e){var t=e.x,r=e.y,i=e.xAxis,s=e.yAxis,o=xW({x:i.scale,y:s.scale}),a=o.apply({x:t,y:r},{bandAware:!0});return uh(e,"discard")&&!o.isInRange(a)?null:a},W3=(function(n){function e(){return amt(this,e),umt(this,e,arguments)}return fmt(e,n),cmt(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,o=r.r,a=r.alwaysShow,c=r.clipPathId,u=ss(i),d=ss(s);if(Nu(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=pmt(this.props);if(!h)return null;var f=h.x,p=h.y,x=this.props,y=x.shape,b=x.className,_=uh(this.props,"hidden")?"url(#".concat(c,")"):void 0,C=Foe(Foe({clipPath:_},Wt(this.props,!0)),{},{cx:f,cy:p});return re.createElement(Vn,{className:rn("recharts-reference-dot",b)},e.renderDot(y,C),Cs.renderCallByParent(this.props,{x:f-o,y:p-o,width:2*o,height:2*o}))}}])})(re.Component);H3(W3,"displayName","ReferenceDot");H3(W3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});H3(W3,"renderDot",function(n,e){var t;return re.isValidElement(n)?t=re.cloneElement(n,e):nn(n)?t=n(e):t=re.createElement(D3,u9({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function h9(){return h9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},h9.apply(this,arguments)}function G_(n){"@babel/helpers - typeof";return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G_(n)}function Boe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $oe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Boe(Object(t),!0).forEach(function(r){q3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Boe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gmt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function vmt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,O1e(r.key),r)}}function ymt(n,e,t){return e&&vmt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function xmt(n,e,t){return e=dR(e),bmt(n,I1e()?Reflect.construct(e,t||[],dR(n).constructor):e.apply(n,t))}function bmt(n,e){if(e&&(G_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wmt(n)}function wmt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function I1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I1e=function(){return!!n})()}function dR(n){return dR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dR(n)}function _mt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&f9(n,e)}function f9(n,e){return f9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f9(n,e)}function q3(n,e,t){return e=O1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O1e(n){var e=Smt(n,"string");return G_(e)=="symbol"?e:e+""}function Smt(n,e){if(G_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(G_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var kmt=function(e,t,r,i,s){var o=s.x1,a=s.x2,c=s.y1,u=s.y2,d=s.xAxis,h=s.yAxis;if(!d||!h)return null;var f=xW({x:d.scale,y:h.scale}),p={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},x={x:t?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return uh(s,"discard")&&(!f.isInRange(p)||!f.isInRange(x))?null:x1e(p,x)},G3=(function(n){function e(){return gmt(this,e),xmt(this,e,arguments)}return _mt(e,n),ymt(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,o=r.y1,a=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Nu(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=ss(i),f=ss(s),p=ss(o),x=ss(a),y=this.props.shape;if(!h&&!f&&!p&&!x&&!y)return null;var b=kmt(h,f,p,x,this.props);if(!b&&!y)return null;var _=uh(this.props,"hidden")?"url(#".concat(d,")"):void 0;return re.createElement(Vn,{className:rn("recharts-reference-area",c)},e.renderRect(y,$oe($oe({clipPath:_},Wt(this.props,!0)),b)),Cs.renderCallByParent(this.props,b))}}])})(re.Component);q3(G3,"displayName","ReferenceArea");q3(G3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});q3(G3,"renderRect",function(n,e){var t;return re.isValidElement(n)?t=re.cloneElement(n,e):nn(n)?t=n(e):t=re.createElement(yW,h9({},e,{className:"recharts-reference-area-rect"})),t});function R1e(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function Cmt(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return jft(r,t)}function Emt(n,e,t){var r=t==="width",i=n.x,s=n.y,o=n.width,a=n.height;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function hR(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var s=t();return n*(e-n*s/2-r)>=0&&n*(e+n*s/2-i)<=0}function Tmt(n,e){return R1e(n,e+1)}function Amt(n,e,t,r,i){for(var s=(r||[]).slice(),o=e.start,a=e.end,c=0,u=1,d=o,h=function(){var x=r==null?void 0:r[c];if(x===void 0)return{v:R1e(r,u)};var y=c,b,_=function(){return b===void 0&&(b=t(x,y)),b},C=x.coordinate,k=c===0||hR(n,C,_,d,a);k||(c=0,d=o,u+=1),k&&(d=C+n*(_()/2+i),c+=u)},f;u<=s.length;)if(f=h(),f)return f.v;return[]}function f2(n){"@babel/helpers - typeof";return f2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f2(n)}function Voe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Voe(Object(t),!0).forEach(function(r){Nmt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Voe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nmt(n,e,t){return e=jmt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jmt(n){var e=Pmt(n,"string");return f2(e)=="symbol"?e:e+""}function Pmt(n,e){if(f2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(f2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Imt(n,e,t,r,i){for(var s=(r||[]).slice(),o=s.length,a=e.start,c=e.end,u=function(f){var p=s[f],x,y=function(){return x===void 0&&(x=t(p,f)),x};if(f===o-1){var b=n*(p.coordinate+n*y()/2-c);s[f]=p=yo(yo({},p),{},{tickCoord:b>0?p.coordinate-b*n:p.coordinate})}else s[f]=p=yo(yo({},p),{},{tickCoord:p.coordinate});var _=hR(n,p.tickCoord,y,a,c);_&&(c=p.tickCoord-n*(y()/2+i),s[f]=yo(yo({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function Omt(n,e,t,r,i,s){var o=(r||[]).slice(),a=o.length,c=e.start,u=e.end;if(s){var d=r[a-1],h=t(d,a-1),f=n*(d.coordinate+n*h/2-u);o[a-1]=d=yo(yo({},d),{},{tickCoord:f>0?d.coordinate-f*n:d.coordinate});var p=hR(n,d.tickCoord,function(){return h},c,u);p&&(u=d.tickCoord-n*(h/2+i),o[a-1]=yo(yo({},d),{},{isShow:!0}))}for(var x=s?a-1:a,y=function(C){var k=o[C],T,E=function(){return T===void 0&&(T=t(k,C)),T};if(C===0){var N=n*(k.coordinate-n*E()/2-c);o[C]=k=yo(yo({},k),{},{tickCoord:N<0?k.coordinate-N*n:k.coordinate})}else o[C]=k=yo(yo({},k),{},{tickCoord:k.coordinate});var P=hR(n,k.tickCoord,E,c,u);P&&(c=k.tickCoord+n*(E()/2+i),o[C]=yo(yo({},k),{},{isShow:!0}))},b=0;b<x;b++)y(b);return o}function EW(n,e,t){var r=n.tick,i=n.ticks,s=n.viewBox,o=n.minTickGap,a=n.orientation,c=n.interval,u=n.tickFormatter,d=n.unit,h=n.angle;if(!i||!i.length||!r)return[];if(ut(c)||wx.isSsr)return Tmt(i,typeof c=="number"&&ut(c)?c:0);var f=[],p=a==="top"||a==="bottom"?"width":"height",x=d&&p==="width"?DC(d,{fontSize:e,letterSpacing:t}):{width:0,height:0},y=function(k,T){var E=nn(u)?u(k.value,T):k.value;return p==="width"?Cmt(DC(E,{fontSize:e,letterSpacing:t}),x,h):DC(E,{fontSize:e,letterSpacing:t})[p]},b=i.length>=2?Vo(i[1].coordinate-i[0].coordinate):1,_=Emt(s,b,p);return c==="equidistantPreserveStart"?Amt(b,_,y,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=Omt(b,_,y,i,o,c==="preserveStartEnd"):f=Imt(b,_,y,i,o),f.filter(function(C){return C.isShow}))}var Rmt=["viewBox"],Mmt=["viewBox"],Dmt=["ticks"];function K_(n){"@babel/helpers - typeof";return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K_(n)}function Yb(){return Yb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yb.apply(this,arguments)}function Uoe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Uoe(Object(t),!0).forEach(function(r){TW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Uoe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function X8(n,e){if(n==null)return{};var t=Lmt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Lmt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Fmt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zoe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,D1e(r.key),r)}}function Bmt(n,e,t){return e&&zoe(n.prototype,e),t&&zoe(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function $mt(n,e,t){return e=fR(e),Vmt(n,M1e()?Reflect.construct(e,t||[],fR(n).constructor):e.apply(n,t))}function Vmt(n,e){if(e&&(K_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Umt(n)}function Umt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M1e=function(){return!!n})()}function fR(n){return fR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fR(n)}function zmt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&m9(n,e)}function m9(n,e){return m9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m9(n,e)}function TW(n,e,t){return e=D1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D1e(n){var e=Hmt(n,"string");return K_(e)=="symbol"?e:e+""}function Hmt(n,e){if(K_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(K_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var ES=(function(n){function e(t){var r;return Fmt(this,e),r=$mt(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return zmt(e,n),Bmt(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=X8(r,Rmt),a=this.props,c=a.viewBox,u=X8(a,Mmt);return!bw(s,c)||!bw(o,u)||!bw(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,a=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,f=i.tickMargin,p,x,y,b,_,C,k=h?-1:1,T=r.tickSize||d,E=ut(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=x=r.coordinate,b=o+ +!h*c,y=b-k*T,C=y-k*f,_=E;break;case"left":y=b=r.coordinate,x=s+ +!h*a,p=x-k*T,_=p-k*f,C=E;break;case"right":y=b=r.coordinate,x=s+ +h*a,p=x+k*T,_=p+k*f,C=E;break;default:p=x=r.coordinate,b=o+ +h*c,y=b+k*T,C=y+k*f,_=E;break}return{line:{x1:p,y1:y,x2:x,y2:b},tick:{x:_,y:C}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Qi(Qi(Qi({},Wt(this.props,!1)),Wt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Qi(Qi({},h),{},{x1:i,y1:s+f*a,x2:i+o,y2:s+f*a})}else{var p=+(c==="left"&&!u||c==="right"&&u);h=Qi(Qi({},h),{},{x1:i+p*o,y1:s,x2:i+p*o,y2:s+a})}return re.createElement("line",Yb({},h,{className:rn("recharts-cartesian-axis-line",Dl(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,a=this.props,c=a.tickLine,u=a.stroke,d=a.tick,h=a.tickFormatter,f=a.unit,p=EW(Qi(Qi({},this.props),{},{ticks:r}),i,s),x=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=Wt(this.props,!1),_=Wt(d,!1),C=Qi(Qi({},b),{},{fill:"none"},Wt(c,!1)),k=p.map(function(T,E){var N=o.getTickLineCoord(T),P=N.line,M=N.tick,O=Qi(Qi(Qi(Qi({textAnchor:x,verticalAnchor:y},b),{},{stroke:"none",fill:u},_),M),{},{index:E,payload:T,visibleTicksCount:p.length,tickFormatter:h});return re.createElement(Vn,Yb({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},sx(o.props,T,E)),c&&re.createElement("line",Yb({},C,P,{className:rn("recharts-cartesian-axis-tick-line",Dl(c,"className"))})),d&&e.renderTickItem(d,O,"".concat(nn(h)?h(T.value,E):T.value).concat(f||"")))});return re.createElement("g",{className:"recharts-cartesian-axis-ticks"},k)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,a=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,f=h.ticks,p=X8(h,Dmt),x=f;return nn(c)&&(x=f&&f.length>0?c(this.props):c(p)),o<=0||a<=0||!x||!x.length?null:re.createElement(Vn,{className:rn("recharts-cartesian-axis",u),ref:function(b){r.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Cs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o,a=rn(i.className,"recharts-cartesian-axis-tick-value");return re.isValidElement(r)?o=re.cloneElement(r,Qi(Qi({},i),{},{className:a})):nn(r)?o=r(Qi(Qi({},i),{},{className:a})):o=re.createElement(ox,Yb({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])})(S.Component);TW(ES,"displayName","CartesianAxis");TW(ES,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Wmt=["x1","y1","x2","y2","key"],qmt=["offset"];function lx(n){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lx(n)}function Hoe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hoe(Object(t),!0).forEach(function(r){Gmt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hoe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Gmt(n,e,t){return e=Kmt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kmt(n){var e=Ymt(n,"string");return lx(e)=="symbol"?e:e+""}function Ymt(n,e){if(lx(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function py(){return py=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},py.apply(this,arguments)}function Woe(n,e){if(n==null)return{};var t=Xmt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Xmt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Jmt=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,o=e.width,a=e.height,c=e.ry;return re.createElement("rect",{x:i,y:s,ry:c,width:o,height:a,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function L1e(n,e){var t;if(re.isValidElement(n))t=re.cloneElement(n,e);else if(nn(n))t=n(e);else{var r=e.x1,i=e.y1,s=e.x2,o=e.y2,a=e.key,c=Woe(e,Wmt),u=Wt(c,!1);u.offset;var d=Woe(u,qmt);t=re.createElement("line",py({},d,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:a}))}return t}function Qmt(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,s=n.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,c){var u=xo(xo({},n),{},{x1:e,y1:a,x2:e+t,y2:a,key:"line-".concat(c),index:c});return L1e(i,u)});return re.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Zmt(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,s=n.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,c){var u=xo(xo({},n),{},{x1:a,y1:e,x2:a,y2:e+t,key:"line-".concat(c),index:c});return L1e(i,u)});return re.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function ept(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,s=n.width,o=n.height,a=n.horizontalPoints,c=n.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=a.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var x=!d[p+1],y=x?i+o-f:d[p+1]-f;if(y<=0)return null;var b=p%e.length;return re.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:y,width:s,stroke:"none",fill:e[b],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return re.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function tpt(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,s=n.x,o=n.y,a=n.width,c=n.height,u=n.verticalPoints;if(!t||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+s-s)}).sort(function(f,p){return f-p});s!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var x=!d[p+1],y=x?s+a-f:d[p+1]-f;if(y<=0)return null;var b=p%r.length;return re.createElement("rect",{key:"react-".concat(p),x:f,y:o,width:y,height:c,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return re.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var npt=function(e,t){var r=e.xAxis,i=e.width,s=e.height,o=e.offset;return Lwe(EW(xo(xo(xo({},ES.defaultProps),r),{},{ticks:Kf(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,t)},rpt=function(e,t){var r=e.yAxis,i=e.width,s=e.height,o=e.offset;return Lwe(EW(xo(xo(xo({},ES.defaultProps),r),{},{ticks:Kf(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,t)},_b={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function m2(n){var e,t,r,i,s,o,a=_W(),c=SW(),u=Hft(),d=xo(xo({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:_b.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:_b.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:_b.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:_b.horizontalFill,vertical:(s=n.vertical)!==null&&s!==void 0?s:_b.vertical,verticalFill:(o=n.verticalFill)!==null&&o!==void 0?o:_b.verticalFill,x:ut(n.x)?n.x:u.left,y:ut(n.y)?n.y:u.top,width:ut(n.width)?n.width:u.width,height:ut(n.height)?n.height:u.height}),h=d.x,f=d.y,p=d.width,x=d.height,y=d.syncWithTicks,b=d.horizontalValues,_=d.verticalValues,C=Vft(),k=Uft();if(!ut(p)||p<=0||!ut(x)||x<=0||!ut(h)||h!==+h||!ut(f)||f!==+f)return null;var T=d.verticalCoordinatesGenerator||npt,E=d.horizontalCoordinatesGenerator||rpt,N=d.horizontalPoints,P=d.verticalPoints;if((!N||!N.length)&&nn(E)){var M=b&&b.length,O=E({yAxis:k?xo(xo({},k),{},{ticks:M?b:k.ticks}):void 0,width:a,height:c,offset:u},M?!0:y);Nu(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(lx(O),"]")),Array.isArray(O)&&(N=O)}if((!P||!P.length)&&nn(T)){var q=_&&_.length,D=T({xAxis:C?xo(xo({},C),{},{ticks:q?_:C.ticks}):void 0,width:a,height:c,offset:u},q?!0:y);Nu(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(lx(D),"]")),Array.isArray(D)&&(P=D)}return re.createElement("g",{className:"recharts-cartesian-grid"},re.createElement(Jmt,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),re.createElement(Qmt,py({},d,{offset:u,horizontalPoints:N,xAxis:C,yAxis:k})),re.createElement(Zmt,py({},d,{offset:u,verticalPoints:P,xAxis:C,yAxis:k})),re.createElement(ept,py({},d,{horizontalPoints:N})),re.createElement(tpt,py({},d,{verticalPoints:P})))}m2.displayName="CartesianGrid";var ipt=["type","layout","connectNulls","ref"],spt=["key"];function Y_(n){"@babel/helpers - typeof";return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y_(n)}function qoe(n,e){if(n==null)return{};var t=opt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function opt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function UC(){return UC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UC.apply(this,arguments)}function Goe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Za(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Goe(Object(t),!0).forEach(function(r){pu(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Goe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Sb(n){return upt(n)||cpt(n)||lpt(n)||apt()}function apt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lpt(n,e){if(n){if(typeof n=="string")return p9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p9(n,e)}}function cpt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function upt(n){if(Array.isArray(n))return p9(n)}function p9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function dpt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Koe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,B1e(r.key),r)}}function hpt(n,e,t){return e&&Koe(n.prototype,e),t&&Koe(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function fpt(n,e,t){return e=mR(e),mpt(n,F1e()?Reflect.construct(e,t||[],mR(n).constructor):e.apply(n,t))}function mpt(n,e){if(e&&(Y_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ppt(n)}function ppt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function F1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F1e=function(){return!!n})()}function mR(n){return mR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mR(n)}function gpt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&g9(n,e)}function g9(n,e){return g9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g9(n,e)}function pu(n,e,t){return e=B1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B1e(n){var e=vpt(n,"string");return Y_(e)=="symbol"?e:e+""}function vpt(n,e){if(Y_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Y_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Gg=(function(n){function e(){var t;dpt(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=fpt(this,e,[].concat(i)),pu(t,"state",{isAnimationFinished:!0,totalLength:0}),pu(t,"generateSimpleStrokeDasharray",function(o,a){return"".concat(a,"px ").concat(o-a,"px")}),pu(t,"getStrokeDasharray",function(o,a,c){var u=c.reduce(function(_,C){return _+C});if(!u)return t.generateSimpleStrokeDasharray(a,o);for(var d=Math.floor(o/u),h=o%u,f=a-o,p=[],x=0,y=0;x<c.length;y+=c[x],++x)if(y+c[x]>h){p=[].concat(Sb(c.slice(0,x)),[h-y]);break}var b=p.length%2===0?[0,f]:[f];return[].concat(Sb(e.repeat(c,d)),Sb(p),b).map(function(_){return"".concat(_,"px")}).join(", ")}),pu(t,"id",wS("recharts-line-")),pu(t,"pathRef",function(o){t.mainCurve=o}),pu(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),pu(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return gpt(e,n),hpt(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,a=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=Ll(d,tN);if(!h)return null;var f=function(y,b){return{x:y.x,y:y.y,value:y.value,errorVal:rs(y.payload,b)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return re.createElement(Vn,p,h.map(function(x){return re.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:a,yAxis:c,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var a=this.props,c=a.dot,u=a.points,d=a.dataKey,h=Wt(this.props,!1),f=Wt(c,!0),p=u.map(function(y,b){var _=Za(Za(Za({key:"dot-".concat(b),r:3},h),f),{},{index:b,cx:y.x,cy:y.y,value:y.value,dataKey:d,payload:y.payload,points:u});return e.renderDotItem(c,_)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return re.createElement(Vn,UC({className:"recharts-line-dots",key:"dots"},x),p)}},{key:"renderCurveStatically",value:function(r,i,s,o){var a=this.props,c=a.type,u=a.layout,d=a.connectNulls;a.ref;var h=qoe(a,ipt),f=Za(Za(Za({},Wt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:d});return re.createElement(KO,UC({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,o=this.props,a=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,p=o.animationId,x=o.animateNewValues,y=o.width,b=o.height,_=this.state,C=_.prevPoints,k=_.totalLength;return re.createElement(vh,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var E=T.t;if(C){var N=C.length/a.length,P=a.map(function(F,K){var ee=Math.floor(K*N);if(C[ee]){var Y=C[ee],U=Cl(Y.x,F.x),R=Cl(Y.y,F.y);return Za(Za({},F),{},{x:U(E),y:R(E)})}if(x){var z=Cl(y*2,F.x),W=Cl(b/2,F.y);return Za(Za({},F),{},{x:z(E),y:W(E)})}return Za(Za({},F),{},{x:F.x,y:F.y})});return s.renderCurveStatically(P,r,i)}var M=Cl(0,k),O=M(E),q;if(c){var D="".concat(c).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});q=s.getStrokeDasharray(O,k,D)}else q=s.generateSimpleStrokeDasharray(k,O);return s.renderCurveStatically(a,r,i,{strokeDasharray:q})})}},{key:"renderCurve",value:function(r,i){var s=this.props,o=s.points,a=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return a&&o&&o.length&&(!u&&d>0||!eN(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,a=i.points,c=i.className,u=i.xAxis,d=i.yAxis,h=i.top,f=i.left,p=i.width,x=i.height,y=i.isAnimationActive,b=i.id;if(s||!a||!a.length)return null;var _=this.state.isAnimationFinished,C=a.length===1,k=rn("recharts-line",c),T=u&&u.allowDataOverflow,E=d&&d.allowDataOverflow,N=T||E,P=un(b)?this.id:b,M=(r=Wt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},O=M.r,q=O===void 0?3:O,D=M.strokeWidth,F=D===void 0?2:D,K=KZe(o)?o:{},ee=K.clipDot,Y=ee===void 0?!0:ee,U=q*2+F;return re.createElement(Vn,{className:k},T||E?re.createElement("defs",null,re.createElement("clipPath",{id:"clipPath-".concat(P)},re.createElement("rect",{x:T?f:f-p/2,y:E?h:h-x/2,width:T?p:p*2,height:E?x:x*2})),!Y&&re.createElement("clipPath",{id:"clipPath-dots-".concat(P)},re.createElement("rect",{x:f-U/2,y:h-U/2,width:p+U,height:x+U}))):null,!C&&this.renderCurve(N,P),this.renderErrorBar(N,P),(C||o)&&this.renderDots(N,Y,P),(!y||_)&&tm.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(Sb(r),[0]):r,o=[],a=0;a<i;++a)o=[].concat(Sb(o),Sb(s));return o}},{key:"renderDotItem",value:function(r,i){var s;if(re.isValidElement(r))s=re.cloneElement(r,i);else if(nn(r))s=r(i);else{var o=i.key,a=qoe(i,spt),c=rn("recharts-line-dot",typeof r!="boolean"?r.className:"");s=re.createElement(D3,UC({key:o},a,{className:c}))}return s}}])})(S.PureComponent);pu(Gg,"displayName","Line");pu(Gg,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!wx.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});pu(Gg,"getComposedData",function(n){var e=n.props,t=n.xAxis,r=n.yAxis,i=n.xAxisTicks,s=n.yAxisTicks,o=n.dataKey,a=n.bandSize,c=n.displayedData,u=n.offset,d=e.layout,h=c.map(function(f,p){var x=rs(f,o);return d==="horizontal"?{x:Xie({axis:t,ticks:i,bandSize:a,entry:f,index:p}),y:un(x)?null:r.scale(x),value:x,payload:f}:{x:un(x)?null:t.scale(x),y:Xie({axis:r,ticks:s,bandSize:a,entry:f,index:p}),value:x,payload:f}});return Za({points:h,layout:d},u)});function X_(n){"@babel/helpers - typeof";return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X_(n)}function ypt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xpt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,U1e(r.key),r)}}function bpt(n,e,t){return e&&xpt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function wpt(n,e,t){return e=pR(e),_pt(n,$1e()?Reflect.construct(e,t||[],pR(n).constructor):e.apply(n,t))}function _pt(n,e){if(e&&(X_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Spt(n)}function Spt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($1e=function(){return!!n})()}function pR(n){return pR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pR(n)}function kpt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&v9(n,e)}function v9(n,e){return v9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},v9(n,e)}function V1e(n,e,t){return e=U1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U1e(n){var e=Cpt(n,"string");return X_(e)=="symbol"?e:e+""}function Cpt(n,e){if(X_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(X_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function y9(){return y9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},y9.apply(this,arguments)}function Ept(n){var e=n.xAxisId,t=_W(),r=SW(),i=E1e(e);return i==null?null:S.createElement(ES,y9({},i,{className:rn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(o){return Kf(o,!0)}}))}var Kg=(function(n){function e(){return ypt(this,e),wpt(this,e,arguments)}return kpt(e,n),bpt(e,[{key:"render",value:function(){return S.createElement(Ept,this.props)}}])})(S.Component);V1e(Kg,"displayName","XAxis");V1e(Kg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function J_(n){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J_(n)}function Tpt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Apt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,W1e(r.key),r)}}function Npt(n,e,t){return e&&Apt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function jpt(n,e,t){return e=gR(e),Ppt(n,z1e()?Reflect.construct(e,t||[],gR(n).constructor):e.apply(n,t))}function Ppt(n,e){if(e&&(J_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ipt(n)}function Ipt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function z1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z1e=function(){return!!n})()}function gR(n){return gR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gR(n)}function Opt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&x9(n,e)}function x9(n,e){return x9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},x9(n,e)}function H1e(n,e,t){return e=W1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W1e(n){var e=Rpt(n,"string");return J_(e)=="symbol"?e:e+""}function Rpt(n,e){if(J_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(J_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function b9(){return b9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},b9.apply(this,arguments)}var Mpt=function(e){var t=e.yAxisId,r=_W(),i=SW(),s=T1e(t);return s==null?null:S.createElement(ES,b9({},s,{className:rn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return Kf(a,!0)}}))},Yg=(function(n){function e(){return Tpt(this,e),jpt(this,e,arguments)}return Opt(e,n),Npt(e,[{key:"render",value:function(){return S.createElement(Mpt,this.props)}}])})(S.Component);H1e(Yg,"displayName","YAxis");H1e(Yg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Yoe(n){return Bpt(n)||Fpt(n)||Lpt(n)||Dpt()}function Dpt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lpt(n,e){if(n){if(typeof n=="string")return w9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w9(n,e)}}function Fpt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Bpt(n){if(Array.isArray(n))return w9(n)}function w9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var _9=function(e,t,r,i,s){var o=Ll(e,CW),a=Ll(e,W3),c=[].concat(Yoe(o),Yoe(a)),u=Ll(e,G3),d="".concat(i,"Id"),h=i[0],f=t;if(c.length&&(f=c.reduce(function(y,b){if(b.props[d]===r&&uh(b.props,"extendDomain")&&ut(b.props[h])){var _=b.props[h];return[Math.min(y[0],_),Math.max(y[1],_)]}return y},f)),u.length){var p="".concat(h,"1"),x="".concat(h,"2");f=u.reduce(function(y,b){if(b.props[d]===r&&uh(b.props,"extendDomain")&&ut(b.props[p])&&ut(b.props[x])){var _=b.props[p],C=b.props[x];return[Math.min(y[0],_,C),Math.max(y[1],_,C)]}return y},f)}return s&&s.length&&(f=s.reduce(function(y,b){return ut(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},f)),f},J8={exports:{}},Xoe;function $pt(){return Xoe||(Xoe=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,h||c,f),x=t?t+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],p]:c._events[x].push(p):(c._events[x]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=t?t+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,x=new Array(p);f<p;f++)x[f]=h[f].fn;return x},a.prototype.listenerCount=function(u){var d=t?t+u:u,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,d,h,f,p,x){var y=t?t+u:u;if(!this._events[y])return!1;var b=this._events[y],_=arguments.length,C,k;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),_){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,f),!0;case 5:return b.fn.call(b.context,d,h,f,p),!0;case 6:return b.fn.call(b.context,d,h,f,p,x),!0}for(k=1,C=new Array(_-1);k<_;k++)C[k-1]=arguments[k];b.fn.apply(b.context,C)}else{var T=b.length,E;for(k=0;k<T;k++)switch(b[k].once&&this.removeListener(u,b[k].fn,void 0,!0),_){case 1:b[k].fn.call(b[k].context);break;case 2:b[k].fn.call(b[k].context,d);break;case 3:b[k].fn.call(b[k].context,d,h);break;case 4:b[k].fn.call(b[k].context,d,h,f);break;default:if(!C)for(E=1,C=new Array(_-1);E<_;E++)C[E-1]=arguments[E];b[k].fn.apply(b[k].context,C)}}return!0},a.prototype.on=function(u,d,h){return s(this,u,d,h,!1)},a.prototype.once=function(u,d,h){return s(this,u,d,h,!0)},a.prototype.removeListener=function(u,d,h,f){var p=t?t+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var x=this._events[p];if(x.fn)x.fn===d&&(!f||x.once)&&(!h||x.context===h)&&o(this,p);else{for(var y=0,b=[],_=x.length;y<_;y++)(x[y].fn!==d||f&&!x[y].once||h&&x[y].context!==h)&&b.push(x[y]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=t?t+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(J8)),J8.exports}var Vpt=$pt();const Upt=qn(Vpt);var Q8=new Upt,Z8="recharts.syncMouseEvents";function p2(n){"@babel/helpers - typeof";return p2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p2(n)}function zpt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Hpt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,q1e(r.key),r)}}function Wpt(n,e,t){return e&&Hpt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function eB(n,e,t){return e=q1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q1e(n){var e=qpt(n,"string");return p2(e)=="symbol"?e:e+""}function qpt(n,e){if(p2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(p2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Gpt=(function(){function n(){zpt(this,n),eB(this,"activeIndex",0),eB(this,"coordinateList",[]),eB(this,"layout","horizontal")}return Wpt(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,s=i===void 0?null:i,o=t.container,a=o===void 0?null:o,c=t.layout,u=c===void 0?null:c,d=t.offset,h=d===void 0?null:d,f=t.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,a=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((t=window)===null||t===void 0?void 0:t.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=s+c+u,f=o+this.offset.top+a/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])})();function Kpt(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n==null?void 0:n[0],i=n==null?void 0:n[1];if(r&&i&&ut(r)&&ut(i))return!0}return!1}function Ypt(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function G1e(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,s=n.endAngle,o=jr(e,t,r,i),a=jr(e,t,r,s);return{points:[o,a],cx:e,cy:t,radius:r,startAngle:i,endAngle:s}}function Xpt(n,e,t){var r,i,s,o;if(n==="horizontal")r=e.x,s=r,i=t.top,o=t.top+t.height;else if(n==="vertical")i=e.y,o=i,r=t.left,s=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var a=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=jr(a,c,u,h),p=jr(a,c,d,h);r=f.x,i=f.y,s=p.x,o=p.y}else return G1e(e);return[{x:r,y:i},{x:s,y:o}]}function g2(n){"@babel/helpers - typeof";return g2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g2(n)}function Joe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Joe(Object(t),!0).forEach(function(r){Jpt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Joe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Jpt(n,e,t){return e=Qpt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qpt(n){var e=Zpt(n,"string");return g2(e)=="symbol"?e:e+""}function Zpt(n,e){if(g2(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(g2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function egt(n){var e,t,r=n.element,i=n.tooltipEventType,s=n.isActive,o=n.activeCoordinate,a=n.activePayload,c=n.offset,u=n.activeTooltipIndex,d=n.tooltipAxisBandSize,h=n.layout,f=n.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!p||!s||!o||f!=="ScatterChart"&&i!=="axis")return null;var x,y=KO;if(f==="ScatterChart")x=o,y=_dt;else if(f==="BarChart")x=Ypt(h,o,c,d),y=yW;else if(h==="radial"){var b=G1e(o),_=b.cx,C=b.cy,k=b.radius,T=b.startAngle,E=b.endAngle;x={cx:_,cy:C,startAngle:T,endAngle:E,innerRadius:k,outerRadius:k},y=Kwe}else x={points:Xpt(h,o,c)},y=KO;var N=tP(tP(tP(tP({stroke:"#ccc",pointerEvents:"none"},c),x),Wt(p,!1)),{},{payload:a,payloadIndex:u,className:rn("recharts-tooltip-cursor",p.className)});return S.isValidElement(p)?S.cloneElement(p,N):S.createElement(y,N)}var tgt=["item"],ngt=["children","className","width","height","style","compact","title","desc"];function Q_(n){"@babel/helpers - typeof";return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q_(n)}function Xb(){return Xb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xb.apply(this,arguments)}function Qoe(n,e){return sgt(n)||igt(n,e)||Y1e(n,e)||rgt()}function rgt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function igt(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function sgt(n){if(Array.isArray(n))return n}function Zoe(n,e){if(n==null)return{};var t=ogt(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ogt(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function agt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function lgt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,X1e(r.key),r)}}function cgt(n,e,t){return e&&lgt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ugt(n,e,t){return e=vR(e),dgt(n,K1e()?Reflect.construct(e,t||[],vR(n).constructor):e.apply(n,t))}function dgt(n,e){if(e&&(Q_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hgt(n)}function hgt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function K1e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K1e=function(){return!!n})()}function vR(n){return vR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vR(n)}function fgt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&S9(n,e)}function S9(n,e){return S9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S9(n,e)}function Z_(n){return ggt(n)||pgt(n)||Y1e(n)||mgt()}function mgt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y1e(n,e){if(n){if(typeof n=="string")return k9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k9(n,e)}}function pgt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ggt(n){if(Array.isArray(n))return k9(n)}function k9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function eae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eae(Object(t),!0).forEach(function(r){Xt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xt(n,e,t){return e=X1e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function X1e(n){var e=vgt(n,"string");return Q_(e)=="symbol"?e:e+""}function vgt(n,e){if(Q_(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Q_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ygt={xAxis:["bottom","top"],yAxis:["left","right"]},xgt={width:"100%",height:"100%"},J1e={x:0,y:0};function nP(n){return n}var bgt=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},wgt=function(e,t,r,i){var s=t.find(function(d){return d&&d.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,a=i.radius;return $e($e($e({},i),jr(i.cx,i.cy,a,o)),{},{angle:o,radius:a})}var c=s.coordinate,u=i.angle;return $e($e($e({},i),jr(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return J1e},K3=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,s=t.dataEndIndex,o=(r??[]).reduce(function(a,c){var u=c.props.data;return u&&u.length?[].concat(Z_(a),Z_(u)):a},[]);return o.length>0?o:e&&e.length&&ut(i)&&ut(s)?e.slice(i,s+1):[]};function Q1e(n){return n==="number"?[0,"auto"]:void 0}var C9=function(e,t,r,i){var s=e.graphicalItems,o=e.tooltipAxis,a=K3(t,e);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:t;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var p=h===void 0?a:h;f=bO(p,o.dataKey,i)}else f=h&&h[r]||a[r];return f?[].concat(Z_(c),[Uwe(u,f)]):c},[])},tae=function(e,t,r,i){var s=i||{x:e.chartX,y:e.chartY},o=bgt(s,r),a=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=qat(o,a,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=C9(e,t,d,h),p=wgt(r,a,d,s);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:p}}return null},_gt=function(e,t){var r=t.axes,i=t.graphicalItems,s=t.axisType,o=t.axisIdKey,a=t.stackGroups,c=t.dataStartIndex,u=t.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,p=Dwe(d,s);return r.reduce(function(x,y){var b,_=y.type.defaultProps!==void 0?$e($e({},y.type.defaultProps),y.props):y.props,C=_.type,k=_.dataKey,T=_.allowDataOverflow,E=_.allowDuplicatedCategory,N=_.scale,P=_.ticks,M=_.includeHidden,O=_[o];if(x[O])return x;var q=K3(e.data,{graphicalItems:i.filter(function(te){var H,ce=o in te.props?te.props[o]:(H=te.type.defaultProps)===null||H===void 0?void 0:H[o];return ce===O}),dataStartIndex:c,dataEndIndex:u}),D=q.length,F,K,ee;Kpt(_.domain,T,C)&&(F=BV(_.domain,null,T),p&&(C==="number"||N!=="auto")&&(ee=FC(q,k,"category")));var Y=Q1e(C);if(!F||F.length===0){var U,R=(U=_.domain)!==null&&U!==void 0?U:Y;if(k){if(F=FC(q,k,C),C==="category"&&p){var z=FZe(F);E&&z?(K=F,F=iR(0,D)):E||(F=ese(R,F,y).reduce(function(te,H){return te.indexOf(H)>=0?te:[].concat(Z_(te),[H])},[]))}else if(C==="category")E?F=F.filter(function(te){return te!==""&&!un(te)}):F=ese(R,F,y).reduce(function(te,H){return te.indexOf(H)>=0||H===""||un(H)?te:[].concat(Z_(te),[H])},[]);else if(C==="number"){var W=Jat(q,i.filter(function(te){var H,ce,pe=o in te.props?te.props[o]:(H=te.type.defaultProps)===null||H===void 0?void 0:H[o],oe="hide"in te.props?te.props.hide:(ce=te.type.defaultProps)===null||ce===void 0?void 0:ce.hide;return pe===O&&(M||!oe)}),k,s,d);W&&(F=W)}p&&(C==="number"||N!=="auto")&&(ee=FC(q,k,"category"))}else p?F=iR(0,D):a&&a[O]&&a[O].hasStack&&C==="number"?F=f==="expand"?[0,1]:Vwe(a[O].stackGroups,c,u):F=Mwe(q,i.filter(function(te){var H=o in te.props?te.props[o]:te.type.defaultProps[o],ce="hide"in te.props?te.props.hide:te.type.defaultProps.hide;return H===O&&(M||!ce)}),C,d,!0);if(C==="number")F=_9(h,F,O,s,P),R&&(F=BV(R,F,T));else if(C==="category"&&R){var se=R,ne=F.every(function(te){return se.indexOf(te)>=0});ne&&(F=se)}}return $e($e({},x),{},Xt({},O,$e($e({},_),{},{axisType:s,domain:F,categoricalDomain:ee,duplicateDomain:K,originalDomain:(b=_.domain)!==null&&b!==void 0?b:Y,isCategorical:p,layout:d})))},{})},Sgt=function(e,t){var r=t.graphicalItems,i=t.Axis,s=t.axisType,o=t.axisIdKey,a=t.stackGroups,c=t.dataStartIndex,u=t.dataEndIndex,d=e.layout,h=e.children,f=K3(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=f.length,x=Dwe(d,s),y=-1;return r.reduce(function(b,_){var C=_.type.defaultProps!==void 0?$e($e({},_.type.defaultProps),_.props):_.props,k=C[o],T=Q1e("number");if(!b[k]){y++;var E;return x?E=iR(0,p):a&&a[k]&&a[k].hasStack?(E=Vwe(a[k].stackGroups,c,u),E=_9(h,E,k,s)):(E=BV(T,Mwe(f,r.filter(function(N){var P,M,O=o in N.props?N.props[o]:(P=N.type.defaultProps)===null||P===void 0?void 0:P[o],q="hide"in N.props?N.props.hide:(M=N.type.defaultProps)===null||M===void 0?void 0:M.hide;return O===k&&!q}),"number",d),i.defaultProps.allowDataOverflow),E=_9(h,E,k,s)),$e($e({},b),{},Xt({},k,$e($e({axisType:s},i.defaultProps),{},{hide:!0,orientation:Dl(ygt,"".concat(s,".").concat(y%2),null),domain:E,originalDomain:T,isCategorical:x,layout:d})))}return b},{})},kgt=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,s=t.AxisComp,o=t.graphicalItems,a=t.stackGroups,c=t.dataStartIndex,u=t.dataEndIndex,d=e.children,h="".concat(i,"Id"),f=Ll(d,s),p={};return f&&f.length?p=_gt(e,{axes:f,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:a,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=Sgt(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:a,dataStartIndex:c,dataEndIndex:u})),p},Cgt=function(e){var t=yp(e),r=Kf(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:WH(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:WO(t,r)}},nae=function(e){var t=e.children,r=e.defaultShowTooltip,i=_l(t,z_),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},Egt=function(e){return!e||!e.length?!1:e.some(function(t){var r=Zf(t&&t.type);return r&&r.indexOf("Bar")>=0})},rae=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Tgt=function(e,t){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,a=e.yAxisMap,c=a===void 0?{}:a,u=r.width,d=r.height,h=r.children,f=r.margin||{},p=_l(h,z_),x=_l(h,ju),y=Object.keys(c).reduce(function(E,N){var P=c[N],M=P.orientation;return!P.mirror&&!P.hide?$e($e({},E),{},Xt({},M,E[M]+P.width)):E},{left:f.left||0,right:f.right||0}),b=Object.keys(o).reduce(function(E,N){var P=o[N],M=P.orientation;return!P.mirror&&!P.hide?$e($e({},E),{},Xt({},M,Dl(E,"".concat(M))+P.height)):E},{top:f.top||0,bottom:f.bottom||0}),_=$e($e({},b),y),C=_.bottom;p&&(_.bottom+=p.props.height||z_.defaultProps.height),x&&t&&(_=Yat(_,i,r,t));var k=u-_.left-_.right,T=d-_.top-_.bottom;return $e($e({brushBottom:C},_),{},{width:Math.max(k,0),height:Math.max(T,0)})},Agt=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},AW=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(_,C){var k=C.graphicalItems,T=C.stackGroups,E=C.offset,N=C.updateId,P=C.dataStartIndex,M=C.dataEndIndex,O=_.barSize,q=_.layout,D=_.barGap,F=_.barCategoryGap,K=_.maxBarSize,ee=rae(q),Y=ee.numericAxisName,U=ee.cateAxisName,R=Egt(k),z=[];return k.forEach(function(W,se){var ne=K3(_.data,{graphicalItems:[W],dataStartIndex:P,dataEndIndex:M}),te=W.type.defaultProps!==void 0?$e($e({},W.type.defaultProps),W.props):W.props,H=te.dataKey,ce=te.maxBarSize,pe=te["".concat(Y,"Id")],oe=te["".concat(U,"Id")],ve={},be=c.reduce(function(Ne,Oe){var qe=C["".concat(Oe.axisType,"Map")],Ze=te["".concat(Oe.axisType,"Id")];qe&&qe[Ze]||Oe.axisType==="zAxis"||Rn(!1);var Ye=qe[Ze];return $e($e({},Ne),{},Xt(Xt({},Oe.axisType,Ye),"".concat(Oe.axisType,"Ticks"),Kf(Ye)))},ve),fe=be[U],we=be["".concat(U,"Ticks")],ue=T&&T[pe]&&T[pe].hasStack&&olt(W,T[pe].stackGroups),Z=Zf(W.type).indexOf("Bar")>=0,ge=WO(fe,we),he=[],Ee=R&&Gat({barSize:O,stackGroups:T,totalSize:Agt(be,U)});if(Z){var Be,vt,xt=un(ce)?K:ce,Rt=(Be=(vt=WO(fe,we,!0))!==null&&vt!==void 0?vt:xt)!==null&&Be!==void 0?Be:0;he=Kat({barGap:D,barCategoryGap:F,bandSize:Rt!==ge?Rt:ge,sizeList:Ee[oe],maxBarSize:xt}),Rt!==ge&&(he=he.map(function(Ne){return $e($e({},Ne),{},{position:$e($e({},Ne.position),{},{offset:Ne.position.offset-Rt/2})})}))}var xe=W&&W.type&&W.type.getComposedData;xe&&z.push({props:$e($e({},xe($e($e({},be),{},{displayedData:ne,props:_,dataKey:H,item:W,bandSize:ge,barPosition:he,offset:E,stackedData:ue,layout:q,dataStartIndex:P,dataEndIndex:M}))),{},Xt(Xt(Xt({key:W.key||"item-".concat(se)},Y,be[Y]),U,be[U]),"animationId",N)),childIndex:JZe(W,_.children),item:W})}),z},p=function(_,C){var k=_.props,T=_.dataStartIndex,E=_.dataEndIndex,N=_.updateId;if(!mte({props:k}))return null;var P=k.children,M=k.layout,O=k.stackOffset,q=k.data,D=k.reverseStackOrder,F=rae(M),K=F.numericAxisName,ee=F.cateAxisName,Y=Ll(P,r),U=ilt(q,Y,"".concat(K,"Id"),"".concat(ee,"Id"),O,D),R=c.reduce(function(te,H){var ce="".concat(H.axisType,"Map");return $e($e({},te),{},Xt({},ce,kgt(k,$e($e({},H),{},{graphicalItems:Y,stackGroups:H.axisType===K&&U,dataStartIndex:T,dataEndIndex:E}))))},{}),z=Tgt($e($e({},R),{},{props:k,graphicalItems:Y}),C==null?void 0:C.legendBBox);Object.keys(R).forEach(function(te){R[te]=d(k,R[te],z,te.replace("Map",""),t)});var W=R["".concat(ee,"Map")],se=Cgt(W),ne=f(k,$e($e({},R),{},{dataStartIndex:T,dataEndIndex:E,updateId:N,graphicalItems:Y,stackGroups:U,offset:z}));return $e($e({formattedGraphicalItems:ne,graphicalItems:Y,offset:z,stackGroups:U},se),R)},x=(function(b){function _(C){var k,T,E;return agt(this,_),E=ugt(this,_,[C]),Xt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xt(E,"accessibilityManager",new Gpt),Xt(E,"handleLegendBBoxUpdate",function(N){if(N){var P=E.state,M=P.dataStartIndex,O=P.dataEndIndex,q=P.updateId;E.setState($e({legendBBox:N},p({props:E.props,dataStartIndex:M,dataEndIndex:O,updateId:q},$e($e({},E.state),{},{legendBBox:N}))))}}),Xt(E,"handleReceiveSyncEvent",function(N,P,M){if(E.props.syncId===N){if(M===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(P)}}),Xt(E,"handleBrushChange",function(N){var P=N.startIndex,M=N.endIndex;if(P!==E.state.dataStartIndex||M!==E.state.dataEndIndex){var O=E.state.updateId;E.setState(function(){return $e({dataStartIndex:P,dataEndIndex:M},p({props:E.props,dataStartIndex:P,dataEndIndex:M,updateId:O},E.state))}),E.triggerSyncEvent({dataStartIndex:P,dataEndIndex:M})}}),Xt(E,"handleMouseEnter",function(N){var P=E.getMouseInfo(N);if(P){var M=$e($e({},P),{},{isTooltipActive:!0});E.setState(M),E.triggerSyncEvent(M);var O=E.props.onMouseEnter;nn(O)&&O(M,N)}}),Xt(E,"triggeredAfterMouseMove",function(N){var P=E.getMouseInfo(N),M=P?$e($e({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(M),E.triggerSyncEvent(M);var O=E.props.onMouseMove;nn(O)&&O(M,N)}),Xt(E,"handleItemMouseEnter",function(N){E.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),Xt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Xt(E,"handleMouseMove",function(N){N.persist(),E.throttleTriggeredAfterMouseMove(N)}),Xt(E,"handleMouseLeave",function(N){E.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};E.setState(P),E.triggerSyncEvent(P);var M=E.props.onMouseLeave;nn(M)&&M(P,N)}),Xt(E,"handleOuterEvent",function(N){var P=XZe(N),M=Dl(E.props,"".concat(P));if(P&&nn(M)){var O,q;/.*touch.*/i.test(P)?q=E.getMouseInfo(N.changedTouches[0]):q=E.getMouseInfo(N),M((O=q)!==null&&O!==void 0?O:{},N)}}),Xt(E,"handleClick",function(N){var P=E.getMouseInfo(N);if(P){var M=$e($e({},P),{},{isTooltipActive:!0});E.setState(M),E.triggerSyncEvent(M);var O=E.props.onClick;nn(O)&&O(M,N)}}),Xt(E,"handleMouseDown",function(N){var P=E.props.onMouseDown;if(nn(P)){var M=E.getMouseInfo(N);P(M,N)}}),Xt(E,"handleMouseUp",function(N){var P=E.props.onMouseUp;if(nn(P)){var M=E.getMouseInfo(N);P(M,N)}}),Xt(E,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),Xt(E,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&E.handleMouseDown(N.changedTouches[0])}),Xt(E,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&E.handleMouseUp(N.changedTouches[0])}),Xt(E,"handleDoubleClick",function(N){var P=E.props.onDoubleClick;if(nn(P)){var M=E.getMouseInfo(N);P(M,N)}}),Xt(E,"handleContextMenu",function(N){var P=E.props.onContextMenu;if(nn(P)){var M=E.getMouseInfo(N);P(M,N)}}),Xt(E,"triggerSyncEvent",function(N){E.props.syncId!==void 0&&Q8.emit(Z8,E.props.syncId,N,E.eventEmitterSymbol)}),Xt(E,"applySyncEvent",function(N){var P=E.props,M=P.layout,O=P.syncMethod,q=E.state.updateId,D=N.dataStartIndex,F=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)E.setState($e({dataStartIndex:D,dataEndIndex:F},p({props:E.props,dataStartIndex:D,dataEndIndex:F,updateId:q},E.state)));else if(N.activeTooltipIndex!==void 0){var K=N.chartX,ee=N.chartY,Y=N.activeTooltipIndex,U=E.state,R=U.offset,z=U.tooltipTicks;if(!R)return;if(typeof O=="function")Y=O(z,N);else if(O==="value"){Y=-1;for(var W=0;W<z.length;W++)if(z[W].value===N.activeLabel){Y=W;break}}var se=$e($e({},R),{},{x:R.left,y:R.top}),ne=Math.min(K,se.x+se.width),te=Math.min(ee,se.y+se.height),H=z[Y]&&z[Y].value,ce=C9(E.state,E.props.data,Y),pe=z[Y]?{x:M==="horizontal"?z[Y].coordinate:ne,y:M==="horizontal"?te:z[Y].coordinate}:J1e;E.setState($e($e({},N),{},{activeLabel:H,activeCoordinate:pe,activePayload:ce,activeTooltipIndex:Y}))}else E.setState(N)}),Xt(E,"renderCursor",function(N){var P,M=E.state,O=M.isTooltipActive,q=M.activeCoordinate,D=M.activePayload,F=M.offset,K=M.activeTooltipIndex,ee=M.tooltipAxisBandSize,Y=E.getTooltipEventType(),U=(P=N.props.active)!==null&&P!==void 0?P:O,R=E.props.layout,z=N.key||"_recharts-cursor";return re.createElement(egt,{key:z,activeCoordinate:q,activePayload:D,activeTooltipIndex:K,chartName:t,element:N,isActive:U,layout:R,offset:F,tooltipAxisBandSize:ee,tooltipEventType:Y})}),Xt(E,"renderPolarAxis",function(N,P,M){var O=Dl(N,"type.axisType"),q=Dl(E.state,"".concat(O,"Map")),D=N.type.defaultProps,F=D!==void 0?$e($e({},D),N.props):N.props,K=q&&q[F["".concat(O,"Id")]];return S.cloneElement(N,$e($e({},K),{},{className:rn(O,K.className),key:N.key||"".concat(P,"-").concat(M),ticks:Kf(K,!0)}))}),Xt(E,"renderPolarGrid",function(N){var P=N.props,M=P.radialLines,O=P.polarAngles,q=P.polarRadius,D=E.state,F=D.radiusAxisMap,K=D.angleAxisMap,ee=yp(F),Y=yp(K),U=Y.cx,R=Y.cy,z=Y.innerRadius,W=Y.outerRadius;return S.cloneElement(N,{polarAngles:Array.isArray(O)?O:Kf(Y,!0).map(function(se){return se.coordinate}),polarRadius:Array.isArray(q)?q:Kf(ee,!0).map(function(se){return se.coordinate}),cx:U,cy:R,innerRadius:z,outerRadius:W,key:N.key||"polar-grid",radialLines:M})}),Xt(E,"renderLegend",function(){var N=E.state.formattedGraphicalItems,P=E.props,M=P.children,O=P.width,q=P.height,D=E.props.margin||{},F=O-(D.left||0)-(D.right||0),K=Owe({children:M,formattedGraphicalItems:N,legendWidth:F,legendContent:u});if(!K)return null;var ee=K.item,Y=Zoe(K,tgt);return S.cloneElement(ee,$e($e({},Y),{},{chartWidth:O,chartHeight:q,margin:D,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Xt(E,"renderTooltip",function(){var N,P=E.props,M=P.children,O=P.accessibilityLayer,q=_l(M,Aa);if(!q)return null;var D=E.state,F=D.isTooltipActive,K=D.activeCoordinate,ee=D.activePayload,Y=D.activeLabel,U=D.offset,R=(N=q.props.active)!==null&&N!==void 0?N:F;return S.cloneElement(q,{viewBox:$e($e({},U),{},{x:U.left,y:U.top}),active:R,label:Y,payload:R?ee:[],coordinate:K,accessibilityLayer:O})}),Xt(E,"renderBrush",function(N){var P=E.props,M=P.margin,O=P.data,q=E.state,D=q.offset,F=q.dataStartIndex,K=q.dataEndIndex,ee=q.updateId;return S.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Jj(E.handleBrushChange,N.props.onChange),data:O,x:ut(N.props.x)?N.props.x:D.left,y:ut(N.props.y)?N.props.y:D.top+D.height+D.brushBottom-(M.bottom||0),width:ut(N.props.width)?N.props.width:D.width,startIndex:F,endIndex:K,updateId:"brush-".concat(ee)})}),Xt(E,"renderReferenceElement",function(N,P,M){if(!N)return null;var O=E,q=O.clipPathId,D=E.state,F=D.xAxisMap,K=D.yAxisMap,ee=D.offset,Y=N.type.defaultProps||{},U=N.props,R=U.xAxisId,z=R===void 0?Y.xAxisId:R,W=U.yAxisId,se=W===void 0?Y.yAxisId:W;return S.cloneElement(N,{key:N.key||"".concat(P,"-").concat(M),xAxis:F[z],yAxis:K[se],viewBox:{x:ee.left,y:ee.top,width:ee.width,height:ee.height},clipPathId:q})}),Xt(E,"renderActivePoints",function(N){var P=N.item,M=N.activePoint,O=N.basePoint,q=N.childIndex,D=N.isRange,F=[],K=P.props.key,ee=P.item.type.defaultProps!==void 0?$e($e({},P.item.type.defaultProps),P.item.props):P.item.props,Y=ee.activeDot,U=ee.dataKey,R=$e($e({index:q,dataKey:U,cx:M.x,cy:M.y,r:4,fill:vW(P.item),strokeWidth:2,stroke:"#fff",payload:M.payload,value:M.value},Wt(Y,!1)),wO(Y));return F.push(_.renderActiveDot(Y,R,"".concat(K,"-activePoint-").concat(q))),O?F.push(_.renderActiveDot(Y,$e($e({},R),{},{cx:O.x,cy:O.y}),"".concat(K,"-basePoint-").concat(q))):D&&F.push(null),F}),Xt(E,"renderGraphicChild",function(N,P,M){var O=E.filterFormatItem(N,P,M);if(!O)return null;var q=E.getTooltipEventType(),D=E.state,F=D.isTooltipActive,K=D.tooltipAxis,ee=D.activeTooltipIndex,Y=D.activeLabel,U=E.props.children,R=_l(U,Aa),z=O.props,W=z.points,se=z.isRange,ne=z.baseLine,te=O.item.type.defaultProps!==void 0?$e($e({},O.item.type.defaultProps),O.item.props):O.item.props,H=te.activeDot,ce=te.hide,pe=te.activeBar,oe=te.activeShape,ve=!!(!ce&&F&&R&&(H||pe||oe)),be={};q!=="axis"&&R&&R.props.trigger==="click"?be={onClick:Jj(E.handleItemMouseEnter,N.props.onClick)}:q!=="axis"&&(be={onMouseLeave:Jj(E.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Jj(E.handleItemMouseEnter,N.props.onMouseEnter)});var fe=S.cloneElement(N,$e($e({},O.props),be));function we(Oe){return typeof K.dataKey=="function"?K.dataKey(Oe.payload):null}if(ve)if(ee>=0){var ue,Z;if(K.dataKey&&!K.allowDuplicatedCategory){var ge=typeof K.dataKey=="function"?we:"payload.".concat(K.dataKey.toString());ue=bO(W,ge,Y),Z=se&&ne&&bO(ne,ge,Y)}else ue=W==null?void 0:W[ee],Z=se&&ne&&ne[ee];if(oe||pe){var he=N.props.activeIndex!==void 0?N.props.activeIndex:ee;return[S.cloneElement(N,$e($e($e({},O.props),be),{},{activeIndex:he})),null,null]}if(!un(ue))return[fe].concat(Z_(E.renderActivePoints({item:O,activePoint:ue,basePoint:Z,childIndex:ee,isRange:se})))}else{var Ee,Be=(Ee=E.getItemByXY(E.state.activeCoordinate))!==null&&Ee!==void 0?Ee:{graphicalItem:fe},vt=Be.graphicalItem,xt=vt.item,Rt=xt===void 0?N:xt,xe=vt.childIndex,Ne=$e($e($e({},O.props),be),{},{activeIndex:xe});return[S.cloneElement(Rt,Ne),null,null]}return se?[fe,null,null]:[fe,null]}),Xt(E,"renderCustomized",function(N,P,M){return S.cloneElement(N,$e($e({key:"recharts-customized-".concat(M)},E.props),E.state))}),Xt(E,"renderMap",{CartesianGrid:{handler:nP,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:nP},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:nP},YAxis:{handler:nP},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((k=C.id)!==null&&k!==void 0?k:wS("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=Ibe(E.triggeredAfterMouseMove,(T=C.throttleDelay)!==null&&T!==void 0?T:1e3/60),E.state={},E}return fgt(_,b),cgt(_,[{key:"componentDidMount",value:function(){var k,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var k=this.props,T=k.children,E=k.data,N=k.height,P=k.layout,M=_l(T,Aa);if(M){var O=M.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var q=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,D=C9(this.state,E,O,q),F=this.state.tooltipTicks[O].coordinate,K=(this.state.offset.top+N)/2,ee=P==="horizontal",Y=ee?{x:F,y:K}:{y:F,x:K},U=this.state.formattedGraphicalItems.find(function(z){var W=z.item;return W.type.name==="Scatter"});U&&(Y=$e($e({},Y),U.props.points[O].tooltipPosition),D=U.props.points[O].tooltipPayload);var R={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:q,activePayload:D,activeCoordinate:Y};this.setState(R),this.renderCursor(M),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(k,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==k.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==k.margin){var E,N;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(k){aV([_l(k.children,Aa)],[_l(this.props.children,Aa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var k=_l(this.props.children,Aa);if(k&&typeof k.props.shared=="boolean"){var T=k.props.shared?"axis":"item";return a.indexOf(T)>=0?T:s}return s}},{key:"getMouseInfo",value:function(k){if(!this.container)return null;var T=this.container,E=T.getBoundingClientRect(),N=Brt(E),P={chartX:Math.round(k.pageX-N.left),chartY:Math.round(k.pageY-N.top)},M=E.width/T.offsetWidth||1,O=this.inRange(P.chartX,P.chartY,M);if(!O)return null;var q=this.state,D=q.xAxisMap,F=q.yAxisMap,K=this.getTooltipEventType(),ee=tae(this.state,this.props.data,this.props.layout,O);if(K!=="axis"&&D&&F){var Y=yp(D).scale,U=yp(F).scale,R=Y&&Y.invert?Y.invert(P.chartX):null,z=U&&U.invert?U.invert(P.chartY):null;return $e($e({},P),{},{xValue:R,yValue:z},ee)}return ee?$e($e({},P),ee):null}},{key:"inRange",value:function(k,T){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,P=k/E,M=T/E;if(N==="horizontal"||N==="vertical"){var O=this.state.offset,q=P>=O.left&&P<=O.left+O.width&&M>=O.top&&M<=O.top+O.height;return q?{x:P,y:M}:null}var D=this.state,F=D.angleAxisMap,K=D.radiusAxisMap;if(F&&K){var ee=yp(F);return rse({x:P,y:M},ee)}return null}},{key:"parseEventsOfWrapper",value:function(){var k=this.props.children,T=this.getTooltipEventType(),E=_l(k,Aa),N={};E&&T==="axis"&&(E.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=wO(this.props,this.handleOuterEvent);return $e($e({},P),N)}},{key:"addListener",value:function(){Q8.on(Z8,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Q8.removeListener(Z8,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(k,T,E){for(var N=this.state.formattedGraphicalItems,P=0,M=N.length;P<M;P++){var O=N[P];if(O.item===k||O.props.key===k.key||T===Zf(O.item.type)&&E===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var k=this.clipPathId,T=this.state.offset,E=T.left,N=T.top,P=T.height,M=T.width;return re.createElement("defs",null,re.createElement("clipPath",{id:k},re.createElement("rect",{x:E,y:N,height:P,width:M})))}},{key:"getXScales",value:function(){var k=this.state.xAxisMap;return k?Object.entries(k).reduce(function(T,E){var N=Qoe(E,2),P=N[0],M=N[1];return $e($e({},T),{},Xt({},P,M.scale))},{}):null}},{key:"getYScales",value:function(){var k=this.state.yAxisMap;return k?Object.entries(k).reduce(function(T,E){var N=Qoe(E,2),P=N[0],M=N[1];return $e($e({},T),{},Xt({},P,M.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(k){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[k])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(k){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[k])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(k){var T=this.state,E=T.formattedGraphicalItems,N=T.activeItem;if(E&&E.length)for(var P=0,M=E.length;P<M;P++){var O=E[P],q=O.props,D=O.item,F=D.type.defaultProps!==void 0?$e($e({},D.type.defaultProps),D.props):D.props,K=Zf(D.type);if(K==="Bar"){var ee=(q.data||[]).find(function(z){return ndt(k,z)});if(ee)return{graphicalItem:O,payload:ee}}else if(K==="RadialBar"){var Y=(q.data||[]).find(function(z){return rse(k,z)});if(Y)return{graphicalItem:O,payload:Y}}else if(V3(O,N)||U3(O,N)||c2(O,N)){var U=Cht({graphicalItem:O,activeTooltipItem:N,itemData:F.data}),R=F.activeIndex===void 0?U:F.activeIndex;return{graphicalItem:$e($e({},O),{},{childIndex:R}),payload:c2(O,N)?F.data[U]:O.props.data[U]}}}return null}},{key:"render",value:function(){var k=this;if(!mte(this))return null;var T=this.props,E=T.children,N=T.className,P=T.width,M=T.height,O=T.style,q=T.compact,D=T.title,F=T.desc,K=Zoe(T,ngt),ee=Wt(K,!1);if(q)return re.createElement(Ooe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},re.createElement(cV,Xb({},ee,{width:P,height:M,title:D,desc:F}),this.renderClipPath(),gte(E,this.renderMap)));if(this.props.accessibilityLayer){var Y,U;ee.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,ee.role=(U=this.props.role)!==null&&U!==void 0?U:"application",ee.onKeyDown=function(z){k.accessibilityManager.keyboardEvent(z)},ee.onFocus=function(){k.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return re.createElement(Ooe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},re.createElement("div",Xb({className:rn("recharts-wrapper",N),style:$e({position:"relative",cursor:"default",width:P,height:M},O)},R,{ref:function(W){k.container=W}}),re.createElement(cV,Xb({},ee,{width:P,height:M,title:D,desc:F,style:xgt}),this.renderClipPath(),gte(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(S.Component);Xt(x,"displayName",t),Xt(x,"defaultProps",$e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Xt(x,"getDerivedStateFromProps",function(b,_){var C=b.dataKey,k=b.data,T=b.children,E=b.width,N=b.height,P=b.layout,M=b.stackOffset,O=b.margin,q=_.dataStartIndex,D=_.dataEndIndex;if(_.updateId===void 0){var F=nae(b);return $e($e($e({},F),{},{updateId:0},p($e($e({props:b},F),{},{updateId:0}),_)),{},{prevDataKey:C,prevData:k,prevWidth:E,prevHeight:N,prevLayout:P,prevStackOffset:M,prevMargin:O,prevChildren:T})}if(C!==_.prevDataKey||k!==_.prevData||E!==_.prevWidth||N!==_.prevHeight||P!==_.prevLayout||M!==_.prevStackOffset||!bw(O,_.prevMargin)){var K=nae(b),ee={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},Y=$e($e({},tae(_,k,P)),{},{updateId:_.updateId+1}),U=$e($e($e({},K),ee),Y);return $e($e($e({},U),p($e({props:b},U),_)),{},{prevDataKey:C,prevData:k,prevWidth:E,prevHeight:N,prevLayout:P,prevStackOffset:M,prevMargin:O,prevChildren:T})}if(!aV(T,_.prevChildren)){var R,z,W,se,ne=_l(T,z_),te=ne&&(R=(z=ne.props)===null||z===void 0?void 0:z.startIndex)!==null&&R!==void 0?R:q,H=ne&&(W=(se=ne.props)===null||se===void 0?void 0:se.endIndex)!==null&&W!==void 0?W:D,ce=te!==q||H!==D,pe=!un(k),oe=pe&&!ce?_.updateId:_.updateId+1;return $e($e({updateId:oe},p($e($e({props:b},_),{},{updateId:oe,dataStartIndex:te,dataEndIndex:H}),_)),{},{prevChildren:T,dataStartIndex:te,dataEndIndex:H})}return null}),Xt(x,"renderActiveDot",function(b,_,C){var k;return S.isValidElement(b)?k=S.cloneElement(b,_):nn(b)?k=b(_):k=re.createElement(D3,_),re.createElement(Vn,{className:"recharts-active-dot",key:C},k)});var y=S.forwardRef(function(_,C){return re.createElement(x,Xb({},_,{ref:C}))});return y.displayName=x.displayName,y},NW=AW({chartName:"LineChart",GraphicalChild:Gg,axisComponents:[{axisType:"xAxis",AxisComp:Kg},{axisType:"yAxis",AxisComp:Yg}],formatAxisMap:y1e}),Ngt=AW({chartName:"BarChart",GraphicalChild:Cx,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Kg},{axisType:"yAxis",AxisComp:Yg}],formatAxisMap:y1e}),jgt=AW({chartName:"PieChart",GraphicalChild:jm,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:$3},{axisType:"radiusAxis",AxisComp:F3}],formatAxisMap:glt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Pgt(){var x,y,b,_,C,k,T;const{user:n}=Zr(),[e,t]=S.useState(null),[r,i]=S.useState([]),[s,o]=S.useState(!0),[a,c]=S.useState("30");S.useEffect(()=>{u()},[a]);const u=async()=>{try{o(!0);const[E,N]=await Promise.all([ot(`${Ge()}/api/dashboard/metrics`),ot(`${Ge()}/api/dashboard/revenue-chart`)]);t(E);const P=new Date().getFullYear(),O=Array.from({length:12},(q,D)=>({year:P,month:D+1,revenue:0,monthName:`Tháng ${D+1}`})).map(q=>{const D=N.find(F=>F.year===q.year&&F.month===q.month);return D?{...q,revenue:D.revenue,monthName:`Tháng ${q.month}`}:q});i(O)}catch(E){console.error("Error fetching dashboard data:",E),Ae.error("Không thể tải dữ liệu dashboard")}finally{o(!1)}},d=E=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(E),h=E=>new Intl.NumberFormat("vi-VN").format(E),f=E=>{switch(E.toLowerCase()){case"completed":case"approved":return"bg-green-100 text-green-800";case"pending":case"pendingpayment":return"bg-yellow-100 text-yellow-800";case"cancelled":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},p=E=>{switch(E.toLowerCase()){case"pendingpayment":return"Chờ thanh toán";case"confirmed":return"Xác nhận";case"completed":return"Hoàn thành";case"cancelled":return"Đã hủy";case"approved":return"Đã duyệt";case"rejected":return"Từ chối";case"pending":return"Chờ duyệt";default:return E}};return!n||n.role!=="Admin"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị để truy cập trang này."})]})}):s?l.jsx(Ns,{children:l.jsx("div",{className:"space-y-6",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((E,N)=>l.jsx(tt,{children:l.jsx(nt,{className:"p-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),l.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})})},N))})})}):l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),l.jsx("p",{className:"text-gray-600",children:"Tổng quan hệ thống TouriMate"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(Cn,{value:a,onValueChange:c,children:[l.jsx(wn,{className:"w-32",children:l.jsx(En,{})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"7",children:"7 ngày"}),l.jsx(ze,{value:"30",children:"30 ngày"}),l.jsx(ze,{value:"90",children:"90 ngày"}),l.jsx(ze,{value:"365",children:"1 năm"})]})]}),l.jsxs(Ce,{onClick:u,variant:"outline",children:[l.jsx(hCe,{className:"w-4 h-4 mr-2"}),"Làm mới"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng doanh thu"}),l.jsx(wo,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:d((e==null?void 0:e.totalRevenue)||0)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.jsxs("span",{className:"text-green-600",children:["+",d((e==null?void 0:e.recent.revenue)||0)]})," trong ",a," ngày qua"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng người dùng"}),l.jsx(Bo,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:h((e==null?void 0:e.totalUsers)||0)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.jsxs("span",{className:"text-green-600",children:["+",h((e==null?void 0:e.recent.users)||0)]})," người dùng mới"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng giao dịch"}),l.jsx(_u,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:h((e==null?void 0:e.totalTransactions)||0)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.jsxs("span",{className:"text-green-600",children:["+",h((e==null?void 0:e.recent.transactions)||0)]})," giao dịch mới"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng đánh giá"}),l.jsx(s_,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:h((e==null?void 0:e.totalReviews)||0)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.jsxs("span",{className:"text-green-600",children:["+",h((e==null?void 0:e.recent.reviews)||0)]})," đánh giá mới"]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(vCe,{className:"w-5 h-5"}),"Doanh thu theo tháng"]})}),l.jsx(nt,{children:l.jsx(BE,{width:"100%",height:300,children:l.jsxs(NW,{data:r||[],children:[l.jsx(m2,{strokeDasharray:"3 3"}),l.jsx(Kg,{dataKey:"monthName"}),l.jsx(Yg,{}),l.jsx(Aa,{formatter:E=>d(Number(E))}),l.jsx(ju,{}),l.jsx(Gg,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",name:"Doanh thu"})]})})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(z9,{className:"w-5 h-5"}),"Tour phổ biến nhất"]})}),l.jsx(nt,{children:l.jsx("div",{className:"space-y-4",children:(x=e==null?void 0:e.topTours)==null?void 0:x.slice(0,5).map((E,N)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-semibold",children:N+1}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:E.tourTitle}),l.jsxs("p",{className:"text-xs text-gray-500",children:[E.bookingCount," đặt tour"]})]})]}),l.jsx("span",{className:"text-sm font-medium text-green-600",children:d(E.revenue)})]},E.tourId||`tour-${N}`))})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(er,{className:"w-5 h-5"}),"Trạng thái đặt tour"]})}),l.jsx(nt,{children:l.jsx("div",{className:"space-y-3",children:(b=(y=e==null?void 0:e.statistics)==null?void 0:y.bookings)==null?void 0:b.map((E,N)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(ct,{className:f(E.status),children:p(E.status)}),l.jsx("span",{className:"text-sm font-medium",children:h(E.count)})]},`booking-${E.status}`))})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(_u,{className:"w-5 h-5"}),"Trạng thái đơn hàng"]})}),l.jsx(nt,{children:l.jsx("div",{className:"space-y-3",children:(C=(_=e==null?void 0:e.statistics)==null?void 0:_.orders)==null?void 0:C.map((E,N)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(ct,{className:f(E.status),children:p(E.status)}),l.jsx("span",{className:"text-sm font-medium",children:h(E.count)})]},`order-${E.status}`))})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(s_,{className:"w-5 h-5"}),"Trạng thái đánh giá"]})}),l.jsx(nt,{children:l.jsx("div",{className:"space-y-3",children:(T=(k=e==null?void 0:e.statistics)==null?void 0:k.reviews)==null?void 0:T.map((E,N)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(ct,{className:f(E.status),children:p(E.status)}),l.jsx("span",{className:"text-sm font-medium",children:h(E.count)})]},`review-${E.status}`))})})]})]})]})})}function Igt(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(null),[s,o]=S.useState(!0),[a,c]=S.useState(""),[u,d]=S.useState("all"),[h,f]=S.useState("all"),[p,x]=S.useState(1),[y,b]=S.useState(1),[_,C]=S.useState(0),[k,T]=S.useState(null),[E,N]=S.useState(!1),[P,M]=S.useState(null);S.useEffect(()=>{O(),q()},[p,u,h,a]);const O=async()=>{try{o(!0);const U=new URLSearchParams({page:p.toString(),pageSize:"20"});u!=="all"&&U.append("status",u),h!=="all"&&U.append("type",h),a.trim()&&U.append("search",a.trim());const R=await ot(`${Ge()}/api/transactions?${U.toString()}`);t(R.transactions),b(R.pagination.totalPages),C(R.pagination.totalCount)}catch(U){console.error("Error fetching transactions:",U),Ae.error("Không thể tải danh sách giao dịch")}finally{o(!1)}},q=async()=>{try{const U=await ot(`${Ge()}/api/transactions/statistics`);i(U)}catch(U){console.error("Error fetching transaction stats:",U)}},D=async(U,R)=>{try{M(U);const z=e.find(W=>W.id===U);if(!z)return;await ot(`${Ge()}/api/transactions/${U}/status?type=${z.type}`,{method:"PUT",body:JSON.stringify({status:R})}),Ae.success("Cập nhật trạng thái thành công"),O()}catch(z){console.error("Error updating transaction status:",z),Ae.error(z.message||"Không thể cập nhật trạng thái")}finally{M(null)}},F=U=>{switch(U.toLowerCase()){case"completed":return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Hoàn thành"});case"confirmed":case"confirm":return l.jsx(ct,{className:"bg-blue-100 text-blue-800",children:"Đã chuyển khoản"});case"pendingpayment":return l.jsx(ct,{className:"bg-yellow-100 text-yellow-800",children:"Chờ thanh toán"});case"cancelled":return l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Đã hủy"});case"pending":return l.jsx(ct,{className:"bg-blue-100 text-blue-800",children:"Chờ duyệt"});default:return l.jsx(ct,{variant:"secondary",children:U})}},K=U=>{switch(U.toLowerCase()){case"booking":return l.jsx(ct,{className:"bg-blue-100 text-blue-800",children:"Đặt tour"});case"order":return l.jsx(ct,{className:"bg-purple-100 text-purple-800",children:"Đơn hàng"});default:return l.jsx(ct,{variant:"outline",children:U})}},ee=U=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(U),Y=U=>new Date(U).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return!n||n.role!=="Admin"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị để truy cập trang này."})]})}):l.jsxs(Ns,{children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quản lý giao dịch"}),l.jsx("p",{className:"text-gray-600",children:"Quản lý tất cả giao dịch đặt tour và đơn hàng"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Tổng cộng: ",_," giao dịch"]})]}),r&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng doanh thu"}),l.jsx(wo,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:ee(r.totalRevenue)})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Doanh thu chờ"}),l.jsx(z9,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:ee(r.pendingRevenue)})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Đặt tour"}),l.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:r.bookingStats.reduce((U,R)=>U+R.count,0)})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Đơn hàng"}),l.jsx(_u,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:r.orderStats.reduce((U,R)=>U+R.count,0)})})]})]}),l.jsx(tt,{children:l.jsx(nt,{className:"p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(We,{placeholder:"Tìm kiếm theo mã giao dịch, tên khách hàng, tour...",value:a,onChange:U=>c(U.target.value),className:"pl-10"})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:u,onValueChange:d,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"completed",children:"Hoàn thành"}),l.jsx(ze,{value:"confirmed",children:"Đã chuyển khoản"}),l.jsx(ze,{value:"pendingpayment",children:"Chờ thanh toán"}),l.jsx(ze,{value:"cancelled",children:"Đã hủy"}),l.jsx(ze,{value:"pending",children:"Chờ duyệt"})]})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:h,onValueChange:f,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Loại giao dịch"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"booking",children:"Đặt tour"}),l.jsx(ze,{value:"order",children:"Đơn hàng"})]})]})})]})})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách giao dịch"})}),l.jsxs(nt,{children:[s?l.jsx("div",{className:"space-y-4",children:[...Array(5)].map((U,R)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"h-16 bg-gray-200 rounded"})},R))}):e.length>0?l.jsx("div",{className:"space-y-4",children:e.map(U=>l.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[K(U.type),F(U.status)]}),l.jsx("span",{className:"text-sm text-gray-500",children:Y(U.createdAt)})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(_u,{className:"w-4 h-4"}),l.jsx("span",{children:U.transactionNumber})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Fo,{className:"w-4 h-4"}),l.jsx("span",{children:U.customerName})]}),U.tourTitle&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(er,{className:"w-4 h-4"}),l.jsx("span",{children:U.tourTitle})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-lg font-semibold text-green-600",children:ee(U.amount)}),U.participants&&l.jsxs("span",{className:"text-sm text-gray-500",children:[U.participants," người"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>{T(U),N(!0)},children:l.jsx(Ts,{className:"w-4 h-4"})}),l.jsxs(SH,{children:[l.jsx(kH,{asChild:!0,children:l.jsx(Ce,{variant:"outline",size:"sm",disabled:P===U.id,children:l.jsx($9,{className:"w-4 h-4"})})}),l.jsxs(d3,{align:"end",children:[U.status!=="Confirmed"&&U.status!=="confirm"&&U.status!=="Completed"&&l.jsxs(lh,{onClick:()=>D(U.id,"Confirmed"),disabled:P===U.id,children:[l.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Đã chuyển khoản"]}),U.status!=="Completed"&&l.jsxs(lh,{onClick:()=>D(U.id,"Completed"),disabled:P===U.id,children:[l.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Hoàn thành"]}),U.status!=="Cancelled"&&l.jsxs(lh,{onClick:()=>D(U.id,"Cancelled"),disabled:P===U.id,children:[l.jsx(si,{className:"w-4 h-4 mr-2"}),"Hủy"]})]})]})]})]})},U.id))}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(_u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không có giao dịch nào"}),l.jsx("p",{className:"text-gray-600",children:a||u!=="all"||h!=="all"?"Không tìm thấy giao dịch phù hợp với bộ lọc":"Chưa có giao dịch nào trong hệ thống"})]}),y>1&&l.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>x(U=>Math.max(1,U-1)),disabled:p===1,children:"Trước"}),l.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,y)},(U,R)=>{const z=R+1;return l.jsx(Ce,{variant:p===z?"default":"outline",size:"sm",onClick:()=>x(z),className:"w-8 h-8 p-0",children:z},z)})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>x(U=>Math.min(y,U+1)),disabled:p===y,children:"Sau"})]})]})]})]}),k&&l.jsx(Hl,{open:E,onOpenChange:N,children:l.jsxs(La,{className:"max-w-2xl",children:[l.jsx(Fa,{children:l.jsx($a,{children:"Chi tiết giao dịch"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Mã giao dịch"}),l.jsx("p",{className:"text-lg font-semibold",children:k.transactionNumber})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Loại"}),l.jsx("div",{className:"mt-1",children:K(k.type)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Trạng thái"}),l.jsx("div",{className:"mt-1",children:F(k.status)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Số tiền"}),l.jsx("p",{className:"text-lg font-semibold text-green-600",children:ee(k.amount)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Khách hàng"}),l.jsx("p",{className:"text-lg",children:k.customerName}),l.jsx("p",{className:"text-sm text-gray-600",children:k.customerEmail})]}),k.tourTitle&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tour"}),l.jsx("p",{className:"text-lg",children:k.tourTitle}),k.tourDate&&l.jsxs("p",{className:"text-sm text-gray-600",children:["Ngày: ",new Date(k.tourDate).toLocaleDateString("vi-VN")]}),k.participants&&l.jsxs("p",{className:"text-sm text-gray-600",children:["Số người: ",k.participants]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Ngày tạo"}),l.jsx("p",{className:"text-sm",children:Y(k.createdAt)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Cập nhật cuối"}),l.jsx("p",{className:"text-sm",children:Y(k.updatedAt)})]})]})]}),l.jsx(Ba,{children:l.jsx(Wl,{children:"Đóng"})})]})})]})}function Ogt(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(!0),[s,o]=S.useState(""),[a,c]=S.useState("all"),[u,d]=S.useState(1),[h,f]=S.useState(1),[p,x]=S.useState(0),[y,b]=S.useState(null),[_,C]=S.useState(!1),[k,T]=S.useState(null);S.useEffect(()=>{E()},[u,a,s]);const E=async()=>{try{i(!0);const F=new URLSearchParams({page:u.toString(),pageSize:"20"});a!=="all"&&F.append("status",a),s.trim()&&F.append("search",s.trim());const K=await ot(`${Ge()}/api/bookings/admin?${F.toString()}`);t(K.bookings),f(K.pagination.totalPages),x(K.pagination.totalCount)}catch(F){console.error("Error fetching bookings:",F),Ae.error("Không thể tải danh sách đặt tour")}finally{i(!1)}},N=async(F,K)=>{try{T(F),await ot(`${Ge()}/api/bookings/${F}`,{method:"PUT",body:JSON.stringify({status:K})}),Ae.success("Cập nhật trạng thái thành công"),E()}catch(ee){console.error("Error updating booking status:",ee),Ae.error(ee.message||"Không thể cập nhật trạng thái")}finally{T(null)}},P=F=>{switch(F){case 1:return l.jsx(ct,{className:"bg-yellow-100 text-yellow-800",children:"Chờ thanh toán"});case 2:return l.jsx(ct,{className:"bg-blue-100 text-blue-800",children:"Đã xác nhận"});case 3:return l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Đã hủy"});case 4:return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Hoàn thành"});case 5:return l.jsx(ct,{className:"bg-purple-100 text-purple-800",children:"Đã hoàn tiền"});default:return l.jsx(ct,{variant:"secondary",children:"Unknown"})}},M=F=>{switch(F){case 1:return l.jsx(ct,{className:"bg-yellow-100 text-yellow-800",children:"Chờ thanh toán"});case 2:return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Đã thanh toán"});case 3:return l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Thanh toán thất bại"});case 4:return l.jsx(ct,{className:"bg-purple-100 text-purple-800",children:"Đã hoàn tiền"});default:return l.jsx(ct,{variant:"secondary",children:"Unknown"})}},O=F=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(F),q=F=>new Date(F).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=F=>{try{return JSON.parse(F)}catch{return null}};return!n||n.role!=="Admin"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị để truy cập trang này."})]})}):l.jsxs(Ns,{children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quản lý đặt tour"}),l.jsx("p",{className:"text-gray-600",children:"Quản lý tất cả đặt tour của khách hàng"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Tổng cộng: ",p," đặt tour"]})]}),l.jsx(tt,{children:l.jsx(nt,{className:"p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(We,{placeholder:"Tìm kiếm theo mã đặt tour, tên khách hàng, tour...",value:s,onChange:F=>o(F.target.value),className:"pl-10"})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:a,onValueChange:c,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"completed",children:"Hoàn thành"}),l.jsx(ze,{value:"pendingpayment",children:"Chờ thanh toán"}),l.jsx(ze,{value:"confirmed",children:"Đã xác nhận"}),l.jsx(ze,{value:"cancelled",children:"Đã hủy"})]})]})})]})})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách đặt tour"})}),l.jsxs(nt,{children:[r?l.jsx("div",{className:"space-y-4",children:[...Array(5)].map((F,K)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"h-20 bg-gray-200 rounded"})},K))}):e.length>0?l.jsx("div",{className:"space-y-4",children:e.map(F=>{const K=D(F.contactInfo);return l.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[P(F.status),M(F.paymentStatus)]}),l.jsx("span",{className:"text-sm text-gray-500",children:q(F.createdAt)})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Xr,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"font-medium",children:F.tour.title})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(er,{className:"w-4 h-4"}),l.jsx("span",{children:new Date(F.tourAvailability.date).toLocaleDateString("vi-VN")})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(Bo,{className:"w-4 h-4"}),l.jsxs("span",{children:[F.participants," người"]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Fo,{className:"w-4 h-4 text-gray-500"}),l.jsxs("span",{children:[F.customer.firstName," ",F.customer.lastName]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(WR,{className:"w-4 h-4"}),l.jsx("span",{children:F.customer.email})]}),(K==null?void 0:K.phone)&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx(qC,{className:"w-4 h-4"}),l.jsx("span",{children:K.phone})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-lg font-semibold text-green-600",children:O(F.totalAmount)}),l.jsx("span",{className:"text-sm text-gray-500 font-mono",children:F.bookingNumber})]}),F.specialRequests&&l.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:[l.jsx("strong",{children:"Yêu cầu đặc biệt:"})," ",F.specialRequests]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>{b(F),C(!0)},children:l.jsx(Ts,{className:"w-4 h-4"})}),l.jsxs(SH,{children:[l.jsx(kH,{asChild:!0,children:l.jsx(Ce,{variant:"outline",size:"sm",disabled:k===F.id,children:l.jsx($9,{className:"w-4 h-4"})})}),l.jsxs(d3,{align:"end",children:[F.status!==3&&l.jsxs(lh,{onClick:()=>N(F.id,"Completed"),disabled:k===F.id,children:[l.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Hoàn thành"]}),F.status!==2&&F.status!==3&&l.jsxs(lh,{onClick:()=>N(F.id,"Confirmed"),disabled:k===F.id,children:[l.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Xác nhận"]}),F.status!==4&&l.jsxs(lh,{onClick:()=>N(F.id,"Cancelled"),disabled:k===F.id,children:[l.jsx(si,{className:"w-4 h-4 mr-2"}),"Hủy"]})]})]})]})]})},F.id)})}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(er,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không có đặt tour nào"}),l.jsx("p",{className:"text-gray-600",children:s||a!=="all"?"Không tìm thấy đặt tour phù hợp với bộ lọc":"Chưa có đặt tour nào trong hệ thống"})]}),h>1&&l.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>d(F=>Math.max(1,F-1)),disabled:u===1,children:"Trước"}),l.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,h)},(F,K)=>{const ee=K+1;return l.jsx(Ce,{variant:u===ee?"default":"outline",size:"sm",onClick:()=>d(ee),className:"w-8 h-8 p-0",children:ee},ee)})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>d(F=>Math.min(h,F+1)),disabled:u===h,children:"Sau"})]})]})]})]}),y&&l.jsx(Hl,{open:_,onOpenChange:C,children:l.jsxs(La,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Fa,{children:l.jsx($a,{children:"Chi tiết đặt tour"})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[P(y.status),M(y.paymentStatus),l.jsx("span",{className:"text-lg font-semibold text-green-600",children:O(y.totalAmount)})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Mã đặt tour"}),l.jsx("p",{className:"text-lg font-mono",children:y.bookingNumber})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tour"}),l.jsx("p",{className:"text-lg font-semibold",children:y.tour.title}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Ngày: ",new Date(y.tourAvailability.date).toLocaleDateString("vi-VN")]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Số người tham gia"}),l.jsxs("p",{className:"text-lg",children:[y.participants," người"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Khách hàng"}),l.jsxs("p",{className:"text-lg",children:[y.customer.firstName," ",y.customer.lastName]}),l.jsx("p",{className:"text-sm text-gray-600",children:y.customer.email})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Thông tin liên hệ"}),(()=>{const F=D(y.contactInfo);return F?l.jsxs("div",{className:"space-y-1",children:[l.jsxs("p",{className:"text-sm",children:["Tên: ",F.name]}),l.jsxs("p",{className:"text-sm",children:["Email: ",F.email]}),l.jsxs("p",{className:"text-sm",children:["Điện thoại: ",F.phone]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Không có thông tin"})})()]})]})]}),y.specialRequests&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Yêu cầu đặc biệt"}),l.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:l.jsx("p",{className:"text-sm",children:y.specialRequests})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Ngày tạo"}),l.jsx("p",{className:"text-sm",children:q(y.createdAt)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Cập nhật cuối"}),l.jsx("p",{className:"text-sm",children:q(y.updatedAt)})]})]})]}),l.jsx(Ba,{children:l.jsx(Wl,{children:"Đóng"})})]})})]})}function Rgt(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(null),[s,o]=S.useState(!0),[a,c]=S.useState(!0),[u,d]=S.useState(null),[h,f]=S.useState(!1);if(!n||n.role!=="Admin"&&n.role!=="TourGuide")return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị hoặc hướng dẫn viên để truy cập trang này."})]})});const[p,x]=S.useState(1),[y]=S.useState(20),[b,_]=S.useState(""),[C,k]=S.useState(""),[T,E]=S.useState(""),[N,P]=S.useState(""),[M,O]=S.useState("all"),[q,D]=S.useState({totalRevenue:0,totalBookings:0,averageRevenue:0}),[F,K]=S.useState({page:1,pageSize:20,totalCount:0,totalPages:0});S.useEffect(()=>{ee(),Y()},[p,M,C,T,N]);const ee=async()=>{try{o(!0);const oe=new URLSearchParams({page:p.toString(),pageSize:y.toString()});C&&oe.append("dateFrom",C),T&&oe.append("dateTo",T),N&&oe.append("tourId",N),M&&M!=="all"&&oe.append("paymentStatus",M);const ve=await ot(`${Ge()}/api/revenue?${oe.toString()}`);t(ve.revenues),D(ve.summary),K(ve.pagination)}catch(oe){console.error("Error fetching revenues:",oe),Ae.error("Không thể tải dữ liệu doanh thu")}finally{o(!1)}},Y=async()=>{try{c(!0);const oe=new URLSearchParams;C&&oe.append("dateFrom",C),T&&oe.append("dateTo",T);const ve=await ot(`${Ge()}/api/revenue/statistics?${oe.toString()}`);i(ve)}catch(oe){console.error("Error fetching statistics:",oe),Ae.error("Không thể tải thống kê doanh thu")}finally{c(!1)}},U=async()=>{try{const oe=new URLSearchParams;C&&oe.append("dateFrom",C),T&&oe.append("dateTo",T);const ve=await ot(`${Ge()}/api/revenue/export?${oe.toString()}`),be=R(ve),fe=new Blob([be],{type:"text/csv"}),we=window.URL.createObjectURL(fe),ue=document.createElement("a");ue.href=we,ue.download=`revenue-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),window.URL.revokeObjectURL(we),Ae.success("Xuất dữ liệu thành công")}catch(oe){console.error("Error exporting data:",oe),Ae.error("Không thể xuất dữ liệu")}},R=oe=>{if(oe.length===0)return"";const ve=Object.keys(oe[0]);return[ve.join(","),...oe.map(fe=>ve.map(we=>{const ue=fe[we];return typeof ue=="string"&&ue.includes(",")?`"${ue}"`:ue}).join(","))].join(`
`)},z=oe=>{switch(oe){case 1:return l.jsx(ct,{className:"bg-yellow-100 text-yellow-800",children:"Chờ thanh toán"});case 2:return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Đã thanh toán"});case 3:return l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Thất bại"});case 4:return l.jsx(ct,{className:"bg-purple-100 text-purple-800",children:"Đã hoàn tiền"});default:return l.jsx(ct,{variant:"secondary",children:"Unknown"})}},W=oe=>{switch(oe){case 1:return l.jsx(ct,{className:"bg-yellow-100 text-yellow-800",children:"Chờ thanh toán"});case 2:return l.jsx(ct,{className:"bg-blue-100 text-blue-800",children:"Xác nhận"});case 3:return l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Đã hủy"});case 4:return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Hoàn thành"});case 5:return l.jsx(ct,{className:"bg-purple-100 text-purple-800",children:"Đã hoàn tiền"});default:return l.jsx(ct,{variant:"secondary",children:"Unknown"})}},se=oe=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(oe),ne=oe=>new Date(oe).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),te=oe=>["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"][oe-1]||`Tháng ${oe}`,H=()=>r!=null&&r.revenueByMonth?r.revenueByMonth.map(oe=>({...oe,monthName:te(oe.month)})):[],ce=oe=>{d(oe),f(!0)},pe=e.filter(oe=>oe.bookingNumber.toLowerCase().includes(b.toLowerCase())||oe.tour.title.toLowerCase().includes(b.toLowerCase())||oe.customer.firstName.toLowerCase().includes(b.toLowerCase())||oe.customer.lastName.toLowerCase().includes(b.toLowerCase()));return l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Quản lý Doanh thu"}),l.jsx("p",{className:"text-gray-600 mt-1",children:(n==null?void 0:n.role)==="Admin"?"Xem và quản lý doanh thu từ tất cả các tour":"Xem doanh thu từ các tour của bạn"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Ce,{variant:"outline",onClick:ee,children:[l.jsx(GC,{className:"h-4 w-4 mr-2"}),"Làm mới"]}),l.jsxs(Ce,{onClick:U,children:[l.jsx(Mk,{className:"h-4 w-4 mr-2"}),"Xuất dữ liệu"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng doanh thu"}),l.jsx(wo,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:se(q.totalRevenue)})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng số booking"}),l.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:q.totalBookings})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Doanh thu trung bình"}),l.jsx(z9,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:se(q.averageRevenue)})})]})]}),!a&&r&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Doanh thu theo tháng"})}),l.jsx(nt,{children:l.jsx(BE,{width:"100%",height:300,children:l.jsxs(NW,{data:H(),children:[l.jsx(m2,{strokeDasharray:"3 3"}),l.jsx(Kg,{dataKey:"monthName"}),l.jsx(Yg,{}),l.jsx(Aa,{formatter:oe=>se(Number(oe))}),l.jsx(ju,{}),l.jsx(Gg,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",name:"Doanh thu"})]})})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Top 10 Tour theo doanh thu"})}),l.jsx(nt,{children:l.jsx(BE,{width:"100%",height:300,children:l.jsxs(Ngt,{data:r.revenueByTour,children:[l.jsx(m2,{strokeDasharray:"3 3"}),l.jsx(Kg,{dataKey:"tourTitle",angle:-45,textAnchor:"end",height:100}),l.jsx(Yg,{}),l.jsx(Aa,{formatter:oe=>se(Number(oe))}),l.jsx(ju,{}),l.jsx(Cx,{dataKey:"revenue",fill:"#82ca9d",name:"Doanh thu"})]})})})]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(HR,{className:"h-5 w-5"}),"Bộ lọc"]})}),l.jsx(nt,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx(We,{placeholder:"Tìm kiếm...",value:b,onChange:oe=>_(oe.target.value),className:"pl-10"})]}),l.jsx(We,{type:"date",placeholder:"Từ ngày",value:C,onChange:oe=>k(oe.target.value)}),l.jsx(We,{type:"date",placeholder:"Đến ngày",value:T,onChange:oe=>E(oe.target.value)}),l.jsxs(Cn,{value:M,onValueChange:O,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái thanh toán"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"Paid",children:"Đã thanh toán"}),l.jsx(ze,{value:"Pending",children:"Chờ thanh toán"}),l.jsx(ze,{value:"Failed",children:"Thất bại"}),l.jsx(ze,{value:"Refunded",children:"Đã hoàn tiền"})]})]}),l.jsx(Ce,{variant:"outline",onClick:()=>{_(""),k(""),E(""),O("all"),P(""),x(1)},children:"Xóa bộ lọc"})]})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách Doanh thu"})}),l.jsxs(nt,{children:[s?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):pe.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(wo,{className:"mx-auto h-12 w-12 text-gray-400"}),l.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"Không có dữ liệu doanh thu"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Chưa có giao dịch nào trong khoảng thời gian này."})]}):l.jsx("div",{className:"space-y-4",children:pe.map(oe=>l.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg mb-2",children:oe.tour.title}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Mã booking:"})," ",l.jsx("span",{className:"font-mono",children:oe.bookingNumber})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Khách hàng:"})," ",oe.customer.firstName," ",oe.customer.lastName]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Email:"})," ",oe.customer.email]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Ngày tour:"})," ",ne(oe.tourAvailability.date)]})]}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[z(oe.paymentStatus),W(oe.status)]})]}),l.jsxs("div",{className:"text-right flex flex-col items-end gap-3",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:se(oe.totalAmount)}),l.jsx("div",{className:"text-sm text-gray-500",children:ne(oe.createdAt)}),l.jsxs(Ce,{size:"sm",variant:"outline",onClick:()=>ce(oe),children:[l.jsx(Ts,{className:"h-4 w-4 mr-1"}),"Chi tiết"]})]})]})},oe.id))}),F.totalPages>1&&l.jsxs("div",{className:"flex items-center justify-between mt-6",children:[l.jsxs("div",{className:"text-sm text-gray-500",children:["Hiển thị ",(p-1)*y+1," -"," ",Math.min(p*y,F.totalCount)," trong tổng số"," ",F.totalCount," doanh thu"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>x(p-1),disabled:p===1,children:"Trước"}),l.jsxs("span",{className:"flex items-center px-4",children:["Trang ",p," / ",F.totalPages]}),l.jsx(Ce,{variant:"outline",onClick:()=>x(p+1),disabled:p===F.totalPages,children:"Sau"})]})]})]})]}),l.jsx(Qr,{open:h,onOpenChange:f,children:l.jsxs(Br,{className:"max-w-2xl",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Chi tiết Doanh thu"})}),u&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Booking"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Mã booking"}),l.jsx("p",{className:"font-mono font-semibold",children:u.bookingNumber})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Tổng tiền"}),l.jsx("p",{className:"font-semibold text-green-600",children:se(u.totalAmount)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Trạng thái thanh toán"}),l.jsx("div",{className:"mt-1",children:z(u.paymentStatus)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Trạng thái booking"}),l.jsx("div",{className:"mt-1",children:W(u.status)})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Tour"}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Tên tour"}),l.jsx("p",{className:"font-semibold",children:u.tour.title})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Ngày khởi hành"}),l.jsx("p",{children:ne(u.tourAvailability.date)})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Giá người lớn"}),l.jsx("p",{children:se(u.tourAvailability.adultPrice)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Giá trẻ em"}),l.jsx("p",{children:se(u.tourAvailability.childPrice||0)})]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Khách hàng"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Tên khách hàng"}),l.jsxs("p",{children:[u.customer.firstName," ",u.customer.lastName]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Email"}),l.jsx("p",{children:u.customer.email})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Thời gian"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Ngày tạo"}),l.jsx("p",{children:ne(u.createdAt)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Cập nhật cuối"}),l.jsx("p",{children:ne(u.updatedAt)})]})]})]})]})]})})]})})}const iae=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function Mgt(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(null),[s,o]=S.useState(!0),[a,c]=S.useState(!0),[u,d]=S.useState(null),[h,f]=S.useState(!1),[p,x]=S.useState(!1),[y,b]=S.useState(1),[_]=S.useState(20),[C,k]=S.useState(""),[T,E]=S.useState(""),[N,P]=S.useState(""),[M,O]=S.useState(""),[q,D]=S.useState(""),[F,K]=S.useState(""),[ee,Y]=S.useState(""),[U,R]=S.useState(!1),[z,W]=S.useState({totalRefundAmount:0,totalOriginalAmount:0,totalCount:0,averageRefundAmount:0}),[se,ne]=S.useState({page:1,pageSize:20,totalCount:0,totalPages:0});S.useEffect(()=>{te(),H()},[y,M,T,N]);const te=async()=>{try{o(!0);const Z=new URLSearchParams({page:y.toString(),pageSize:_.toString()});T&&Z.append("dateFrom",T),N&&Z.append("dateTo",N),M&&M!=="all"&&Z.append("status",M),C.trim()&&Z.append("search",C.trim());const ge=await ot(`${Ge()}/api/refund?${Z.toString()}`);t(ge.refunds),W(ge.summary),ne(ge.pagination)}catch(Z){console.error("Error fetching refunds:",Z),Ae.error("Không thể tải dữ liệu hoàn tiền")}finally{o(!1)}},H=async()=>{try{c(!0);const Z=new URLSearchParams;T&&Z.append("dateFrom",T),N&&Z.append("dateTo",N);const ge=await ot(`${Ge()}/api/refund/statistics?${Z.toString()}`);i(ge)}catch(Z){console.error("Error fetching statistics:",Z),Ae.error("Không thể tải thống kê hoàn tiền")}finally{c(!1)}},ce=async()=>{if(!u||!q){Ae.error("Vui lòng chọn trạng thái");return}try{R(!0),await ot(`${Ge()}/api/refund/${u.id}/status`,{method:"PUT",body:JSON.stringify({status:q,refundReference:F.trim()||null,notes:ee.trim()||null})}),Ae.success("Cập nhật trạng thái thành công"),x(!1),D(""),K(""),Y(""),te(),H()}catch(Z){console.error("Error updating status:",Z),Ae.error("Không thể cập nhật trạng thái")}finally{R(!1)}},pe=Z=>{switch(Z){case"Pending":return l.jsx(ct,{className:"bg-yellow-100 text-yellow-800",children:"Chờ xử lý"});case"Processing":return l.jsx(ct,{className:"bg-blue-100 text-blue-800",children:"Đang xử lý"});case"Completed":return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Hoàn thành"});case"Failed":return l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Thất bại"});case"Cancelled":return l.jsx(ct,{className:"bg-gray-100 text-gray-800",children:"Đã hủy"});default:return l.jsx(ct,{variant:"secondary",children:Z})}},oe=Z=>{switch(Z){case"Pending":return l.jsx(_m,{className:"h-4 w-4 text-yellow-600"});case"Processing":return l.jsx(GC,{className:"h-4 w-4 text-blue-600"});case"Completed":return l.jsx(iS,{className:"h-4 w-4 text-green-600"});case"Failed":return l.jsx(Vae,{className:"h-4 w-4 text-red-600"});case"Cancelled":return l.jsx(nw,{className:"h-4 w-4 text-gray-600"});default:return null}},ve=Z=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Z),be=Z=>new Date(Z).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),fe=Z=>{d(Z),f(!0)},we=Z=>{d(Z),D(Z.refundStatus),K(Z.refundReference||""),Y(""),x(!0)},ue=e.filter(Z=>Z.booking.bookingNumber.toLowerCase().includes(C.toLowerCase())||Z.booking.tour.title.toLowerCase().includes(C.toLowerCase())||Z.booking.customer.firstName.toLowerCase().includes(C.toLowerCase())||Z.booking.customer.lastName.toLowerCase().includes(C.toLowerCase())||Z.refundReference&&Z.refundReference.toLowerCase().includes(C.toLowerCase()));return(n==null?void 0:n.role)!=="Admin"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(nw,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị để truy cập trang này."})]})}):l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Quản lý Hoàn tiền"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Xem và quản lý các yêu cầu hoàn tiền"})]}),l.jsx("div",{className:"flex gap-2",children:l.jsxs(Ce,{variant:"outline",onClick:te,children:[l.jsx(GC,{className:"h-4 w-4 mr-2"}),"Làm mới"]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng hoàn tiền"}),l.jsx(KC,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:ve(z.totalRefundAmount)})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng tiền gốc"}),l.jsx(wo,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:ve(z.totalOriginalAmount)})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Số yêu cầu"}),l.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:z.totalCount})})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Trung bình"}),l.jsx(wo,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(nt,{children:l.jsx("div",{className:"text-2xl font-bold",children:ve(z.averageRefundAmount)})})]})]}),!a&&r&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Hoàn tiền theo tháng"})}),l.jsx(nt,{children:l.jsx(BE,{width:"100%",height:300,children:l.jsxs(NW,{data:r.refundsByMonth||[],children:[l.jsx(m2,{strokeDasharray:"3 3"}),l.jsx(Kg,{dataKey:"monthName"}),l.jsx(Yg,{}),l.jsx(Aa,{formatter:Z=>ve(Number(Z))}),l.jsx(ju,{}),l.jsx(Gg,{type:"monotone",dataKey:"totalAmount",stroke:"#f59e0b",name:"Số tiền"}),l.jsx(Gg,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",name:"Số lượng"})]})})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Phân bố theo trạng thái"})}),l.jsx(nt,{children:l.jsx(BE,{width:"100%",height:300,children:l.jsxs(jgt,{children:[l.jsx(jm,{data:r.refundsByStatus||[],dataKey:"count",nameKey:"status",cx:"50%",cy:"50%",outerRadius:100,label:Z=>`${Z.status}: ${Z.count}`,children:(r.refundsByStatus||[]).map((Z,ge)=>l.jsx(k3,{fill:iae[ge%iae.length]},`cell-${ge}`))}),l.jsx(Aa,{}),l.jsx(ju,{})]})})})]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(HR,{className:"h-5 w-5"}),"Bộ lọc"]})}),l.jsx(nt,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx(We,{placeholder:"Tìm kiếm...",value:C,onChange:Z=>k(Z.target.value),className:"pl-10"})]}),l.jsx(We,{type:"date",placeholder:"Từ ngày",value:T,onChange:Z=>E(Z.target.value)}),l.jsx(We,{type:"date",placeholder:"Đến ngày",value:N,onChange:Z=>P(Z.target.value)}),l.jsxs(Cn,{value:M,onValueChange:O,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"Pending",children:"Chờ xử lý"}),l.jsx(ze,{value:"Processing",children:"Đang xử lý"}),l.jsx(ze,{value:"Completed",children:"Hoàn thành"}),l.jsx(ze,{value:"Failed",children:"Thất bại"}),l.jsx(ze,{value:"Cancelled",children:"Đã hủy"})]})]}),l.jsx(Ce,{variant:"outline",onClick:()=>{k(""),E(""),P(""),O("all"),b(1)},children:"Xóa bộ lọc"})]})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách Hoàn tiền"})}),l.jsxs(nt,{children:[s?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):ue.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(KC,{className:"mx-auto h-12 w-12 text-gray-400"}),l.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"Không có dữ liệu hoàn tiền"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Chưa có yêu cầu hoàn tiền nào."})]}):l.jsx("div",{className:"space-y-4",children:ue.map(Z=>l.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg mb-2",children:Z.booking.tour.title}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Mã booking:"})," ",l.jsx("span",{className:"font-mono",children:Z.booking.bookingNumber})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Khách hàng:"})," ",Z.booking.customer.firstName," ",Z.booking.customer.lastName]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Email:"})," ",Z.booking.customer.email]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Số tiền gốc:"})," ",ve(Z.originalAmount)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Số tiền hoàn:"})," ",l.jsxs("span",{className:"text-green-600 font-semibold",children:[ve(Z.refundAmount)," (",Z.refundPercentage,"%)"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Hủy trước:"})," ",Z.daysBeforeTour," ngày"]})]}),Z.refundBankName&&l.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded text-sm",children:[l.jsx("div",{className:"font-medium text-blue-900",children:"Thông tin tài khoản:"}),l.jsxs("div",{className:"text-blue-700",children:[Z.refundBankName," - ",Z.refundBankAccount," - ",Z.refundAccountName]})]}),l.jsxs("div",{className:"flex gap-2 mt-3 items-center",children:[oe(Z.refundStatus),pe(Z.refundStatus),Z.refundReference&&l.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:["Ref: ",Z.refundReference]})]})]}),l.jsxs("div",{className:"text-right flex flex-col items-end gap-3",children:[l.jsx("div",{className:"text-sm text-gray-500",children:be(Z.createdAt)}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Ce,{size:"sm",variant:"outline",onClick:()=>fe(Z),children:[l.jsx(Ts,{className:"h-4 w-4 mr-1"}),"Chi tiết"]}),l.jsx(Ce,{size:"sm",onClick:()=>we(Z),children:"Cập nhật"})]})]})]})},Z.id))}),se.totalPages>1&&l.jsxs("div",{className:"flex items-center justify-between mt-6",children:[l.jsxs("div",{className:"text-sm text-gray-500",children:["Hiển thị ",(y-1)*_+1," -"," ",Math.min(y*_,se.totalCount)," trong tổng số"," ",se.totalCount," hoàn tiền"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>b(y-1),disabled:y===1,children:"Trước"}),l.jsxs("span",{className:"flex items-center px-4",children:["Trang ",y," / ",se.totalPages]}),l.jsx(Ce,{variant:"outline",onClick:()=>b(y+1),disabled:y===se.totalPages,children:"Sau"})]})]})]})]}),l.jsx(Qr,{open:h,onOpenChange:f,children:l.jsxs(Br,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Chi tiết Hoàn tiền"})}),u&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Hoàn tiền"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Số tiền gốc"}),l.jsx("p",{className:"font-semibold",children:ve(u.originalAmount)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Số tiền hoàn"}),l.jsxs("p",{className:"font-semibold text-green-600",children:[ve(u.refundAmount)," (",u.refundPercentage,"%)"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Trạng thái"}),l.jsx("div",{className:"mt-1",children:pe(u.refundStatus)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Hủy trước tour"}),l.jsxs("p",{children:[u.daysBeforeTour," ngày"]})]}),u.refundReference&&l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{className:"text-gray-500",children:"Mã tham chiếu"}),l.jsx("p",{className:"font-mono",children:u.refundReference})]})]})]}),u.refundBankName&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Tài khoản"}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Ngân hàng"}),l.jsx("p",{children:u.refundBankName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Số tài khoản"}),l.jsx("p",{className:"font-mono",children:u.refundBankAccount})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Tên tài khoản"}),l.jsx("p",{children:u.refundAccountName})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Booking"}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Mã booking"}),l.jsx("p",{className:"font-mono font-semibold",children:u.booking.bookingNumber})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Tour"}),l.jsx("p",{children:u.booking.tour.title})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Ngày tour"}),l.jsx("p",{children:be(u.booking.tourAvailability.date)})]}),u.booking.cancellationReason&&l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Lý do hủy"}),l.jsx("p",{className:"whitespace-pre-wrap",children:u.booking.cancellationReason})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin Khách hàng"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Tên khách hàng"}),l.jsxs("p",{children:[u.booking.customer.firstName," ",u.booking.customer.lastName]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Email"}),l.jsx("p",{children:u.booking.customer.email})]}),u.booking.customer.phoneNumber&&l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Số điện thoại"}),l.jsx("p",{children:u.booking.customer.phoneNumber})]})]})]}),u.refundNotes&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Ghi chú"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap text-sm",children:u.refundNotes})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-lg",children:"Thời gian"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Ngày tạo"}),l.jsx("p",{children:be(u.createdAt)})]}),u.refundProcessedAt&&l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Ngày xử lý"}),l.jsx("p",{children:be(u.refundProcessedAt)})]}),u.refundCompletedAt&&l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-500",children:"Ngày hoàn thành"}),l.jsx("p",{children:be(u.refundCompletedAt)})]})]})]})]})]})}),l.jsx(Qr,{open:p,onOpenChange:x,children:l.jsxs(Br,{children:[l.jsx($r,{children:l.jsx(Vr,{children:"Cập nhật trạng thái Hoàn tiền"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Trạng thái"}),l.jsxs(Cn,{value:q,onValueChange:D,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"Pending",children:"Chờ xử lý"}),l.jsx(ze,{value:"Processing",children:"Đang xử lý"}),l.jsx(ze,{value:"Completed",children:"Hoàn thành"}),l.jsx(ze,{value:"Failed",children:"Thất bại"}),l.jsx(ze,{value:"Cancelled",children:"Đã hủy"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Mã tham chiếu (tùy chọn)"}),l.jsx(We,{placeholder:"Nhập mã tham chiếu giao dịch",value:F,onChange:Z=>K(Z.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Ghi chú (tùy chọn)"}),l.jsx("textarea",{className:"w-full border rounded-md p-2",rows:3,placeholder:"Nhập ghi chú...",value:ee,onChange:Z=>Y(Z.target.value)})]})]}),l.jsxs(Z0,{children:[l.jsx(Ce,{variant:"outline",onClick:()=>x(!1),children:"Hủy"}),l.jsx(Ce,{onClick:ce,disabled:U,children:U?"Đang xử lý...":"Cập nhật"})]})]})})]})})}function Dgt(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(!0),[s,o]=S.useState(""),[a,c]=S.useState("all"),[u,d]=S.useState("all"),[h,f]=S.useState(1),[p,x]=S.useState(1),[y,b]=S.useState(0),[_,C]=S.useState(!1),[k,T]=S.useState(!1),[E,N]=S.useState(null),[P,M]=S.useState(null),[O,q]=S.useState({configKey:"",configName:"",description:"",value:0,unit:"VND",category:"",isActive:!0,effectiveDate:"",expiryDate:"",notes:""}),D=["TourPush","TourCommission","ProductCommission"],F=["VND","USD","EUR","%"];S.useEffect(()=>{K()},[h,a,u,s]);const K=async()=>{try{i(!0);const H=new URLSearchParams({page:h.toString(),pageSize:"20"});a!=="all"&&H.append("category",a),u!=="all"&&H.append("isActive",u==="active"?"true":"false"),s.trim()&&H.append("searchTerm",s.trim());const ce=await ot(`${Ge()}/api/pricingconfig?${H.toString()}`);t(ce.configs),x(ce.pagination.totalPages),b(ce.pagination.totalCount)}catch(H){console.error("Error fetching pricing configs:",H),Ae.error("Không thể tải danh sách cấu hình giá")}finally{i(!1)}},ee=async()=>{try{M("create");const H={...O,value:Number(O.value),effectiveDate:O.effectiveDate?new Date(O.effectiveDate).toISOString():null,expiryDate:O.expiryDate?new Date(O.expiryDate).toISOString():null,notes:O.notes||null};await ot(`${Ge()}/api/pricingconfig`,{method:"POST",body:JSON.stringify(H)}),Ae.success("Tạo cấu hình giá thành công"),C(!1),R(),K()}catch(H){console.error("Error creating pricing config:",H),Ae.error(H.message||"Không thể tạo cấu hình giá")}finally{M(null)}},Y=async()=>{if(E)try{M("update");const H={configName:O.configName,description:O.description,value:Number(O.value),unit:O.unit,isActive:O.isActive,effectiveDate:O.effectiveDate?new Date(O.effectiveDate).toISOString():null,expiryDate:O.expiryDate?new Date(O.expiryDate).toISOString():null,notes:O.notes||null};await ot(`${Ge()}/api/pricingconfig/${E.id}`,{method:"PUT",body:JSON.stringify(H)}),Ae.success("Cập nhật cấu hình giá thành công"),T(!1),N(null),R(),K()}catch(H){console.error("Error updating pricing config:",H),Ae.error(H.message||"Không thể cập nhật cấu hình giá")}finally{M(null)}},U=async H=>{try{M(H),await ot(`${Ge()}/api/pricingconfig/${H}`,{method:"DELETE"}),Ae.success("Xóa cấu hình giá thành công"),K()}catch(ce){console.error("Error deleting pricing config:",ce),Ae.error(ce.message||"Không thể xóa cấu hình giá")}finally{M(null)}},R=()=>{q({configKey:"",configName:"",description:"",value:0,unit:"VND",category:"",isActive:!0,effectiveDate:"",expiryDate:"",notes:""})},z=H=>{N(H),q({configKey:H.configKey,configName:H.configName,description:H.description,value:H.value,unit:H.unit,category:H.category,isActive:H.isActive,effectiveDate:H.effectiveDate?new Date(H.effectiveDate).toISOString().split("T")[0]:"",expiryDate:H.expiryDate?new Date(H.expiryDate).toISOString().split("T")[0]:"",notes:H.notes||""}),T(!0)},W=H=>{switch(H){case"TourPush":return l.jsx(ct,{className:"bg-blue-100 text-blue-800",children:"Push Tour"});case"TourCommission":return l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Hoa hồng Tour"});case"ProductCommission":return l.jsx(ct,{className:"bg-purple-100 text-purple-800",children:"Hoa hồng Sản phẩm"});default:return l.jsx(ct,{variant:"outline",children:H})}},se=H=>H?l.jsx(ct,{className:"bg-green-100 text-green-800",children:"Hoạt động"}):l.jsx(ct,{className:"bg-red-100 text-red-800",children:"Tạm dừng"}),ne=(H,ce)=>ce==="%"?`${H}%`:new Intl.NumberFormat("vi-VN",{style:"currency",currency:ce==="VND"?"VND":ce==="USD"?"USD":"EUR"}).format(H),te=H=>new Date(H).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return!n||n.role!=="Admin"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị để truy cập trang này."})]})}):l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cấu hình giá"}),l.jsx("p",{className:"text-gray-600",children:"Quản lý đơn giá push tour và phần trăm hoa hồng"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-sm text-gray-500",children:["Tổng cộng: ",y," cấu hình"]}),l.jsxs(Qr,{open:_,onOpenChange:C,children:[l.jsx(gS,{asChild:!0,children:l.jsxs(Ce,{children:[l.jsx(Il,{className:"h-4 w-4 mr-2"}),"Tạo cấu hình"]})}),l.jsxs(Br,{className:"max-w-2xl",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Tạo cấu hình giá mới"}),l.jsx(Ma,{children:"Thêm cấu hình giá cho push tour hoặc phần trăm hoa hồng"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"configKey",children:"Mã cấu hình *"}),l.jsx(We,{id:"configKey",value:O.configKey,onChange:H=>q({...O,configKey:H.target.value}),placeholder:"VD: TOUR_PUSH_BASIC"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"category",children:"Danh mục *"}),l.jsxs(Cn,{value:O.category,onValueChange:H=>q({...O,category:H}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn danh mục"})}),l.jsx(_n,{children:D.map(H=>l.jsx(ze,{value:H,children:H==="TourPush"?"Push Tour":H==="TourCommission"?"Hoa hồng Tour":"Hoa hồng Sản phẩm"},H))})]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"configName",children:"Tên cấu hình *"}),l.jsx(We,{id:"configName",value:O.configName,onChange:H=>q({...O,configName:H.target.value}),placeholder:"VD: Gói Push Tour Cơ Bản"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"description",children:"Mô tả *"}),l.jsx(is,{id:"description",value:O.description,onChange:H=>q({...O,description:H.target.value}),placeholder:"Mô tả chi tiết về cấu hình này",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"value",children:"Giá trị *"}),l.jsx(We,{id:"value",type:"number",value:O.value,onChange:H=>q({...O,value:Number(H.target.value)}),placeholder:"0",min:"0",step:"0.01"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"unit",children:"Đơn vị *"}),l.jsxs(Cn,{value:O.unit,onValueChange:H=>q({...O,unit:H}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn đơn vị"})}),l.jsx(_n,{children:F.map(H=>l.jsx(ze,{value:H,children:H},H))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"effectiveDate",children:"Ngày hiệu lực"}),l.jsx(We,{id:"effectiveDate",type:"date",value:O.effectiveDate,onChange:H=>q({...O,effectiveDate:H.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"expiryDate",children:"Ngày hết hạn"}),l.jsx(We,{id:"expiryDate",type:"date",value:O.expiryDate,onChange:H=>q({...O,expiryDate:H.target.value})})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"notes",children:"Ghi chú"}),l.jsx(is,{id:"notes",value:O.notes,onChange:H=>q({...O,notes:H.target.value}),placeholder:"Ghi chú thêm về cấu hình",rows:2})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{id:"isActive",checked:O.isActive,onCheckedChange:H=>q({...O,isActive:H})}),l.jsx(Se,{htmlFor:"isActive",children:"Kích hoạt cấu hình"})]})]}),l.jsxs(Z0,{children:[l.jsx(Ce,{variant:"outline",onClick:()=>C(!1),children:"Hủy"}),l.jsx(Ce,{onClick:ee,disabled:P==="create",children:P==="create"?"Đang tạo...":"Tạo cấu hình"})]})]})]})]})]}),l.jsx(tt,{children:l.jsx(nt,{className:"p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(We,{placeholder:"Tìm kiếm theo tên, mã cấu hình...",value:s,onChange:H=>o(H.target.value),className:"pl-10"})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:a,onValueChange:c,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Danh mục"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"TourPush",children:"Push Tour"}),l.jsx(ze,{value:"TourCommission",children:"Hoa hồng Tour"}),l.jsx(ze,{value:"ProductCommission",children:"Hoa hồng Sản phẩm"})]})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:u,onValueChange:d,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"active",children:"Hoạt động"}),l.jsx(ze,{value:"inactive",children:"Tạm dừng"})]})]})})]})})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách cấu hình giá"})}),l.jsxs(nt,{children:[r?l.jsx("div",{className:"space-y-4",children:[...Array(5)].map((H,ce)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"h-16 bg-gray-200 rounded"})},ce))}):e.length>0?l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Tên cấu hình"}),l.jsx(Ot,{children:"Danh mục"}),l.jsx(Ot,{children:"Giá trị"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Ngày tạo"}),l.jsx(Ot,{children:"Thao tác"})]})}),l.jsx(Xu,{children:e.map(H=>l.jsxs(ur,{children:[l.jsx(wt,{children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:H.configName}),l.jsx("div",{className:"text-sm text-gray-500",children:H.configKey})]})}),l.jsx(wt,{children:W(H.category)}),l.jsx(wt,{children:l.jsx("div",{className:"font-medium",children:ne(H.value,H.unit)})}),l.jsx(wt,{children:se(H.isActive)}),l.jsx(wt,{children:te(H.createdAt)}),l.jsx(wt,{children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>z(H),children:l.jsx(dh,{className:"h-4 w-4"})}),l.jsxs(Hl,{children:[l.jsx(ux,{asChild:!0,children:l.jsx(Ce,{variant:"outline",size:"sm",children:l.jsx(Sm,{className:"h-4 w-4"})})}),l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xóa cấu hình?"}),l.jsx(Wu,{children:"Hành động này không thể hoàn tác. Cấu hình sẽ bị xóa vĩnh viễn."})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:()=>U(H.id),className:"bg-red-600 hover:bg-red-700",children:"Xóa"})]})]})]})]})})]},H.id))})]}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(U0,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không có cấu hình nào"}),l.jsx("p",{className:"text-gray-600",children:s||a!=="all"||u!=="all"?"Không tìm thấy cấu hình phù hợp với bộ lọc":"Chưa có cấu hình giá nào trong hệ thống"})]}),p>1&&l.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>f(H=>Math.max(1,H-1)),disabled:h===1,children:"Trước"}),l.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,p)},(H,ce)=>{const pe=ce+1;return l.jsx(Ce,{variant:h===pe?"default":"outline",size:"sm",onClick:()=>f(pe),className:"w-8 h-8 p-0",children:pe},pe)})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>f(H=>Math.min(p,H+1)),disabled:h===p,children:"Sau"})]})]})]}),l.jsx(Qr,{open:k,onOpenChange:T,children:l.jsxs(Br,{className:"max-w-2xl",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Chỉnh sửa cấu hình giá"}),l.jsx(Ma,{children:"Cập nhật thông tin cấu hình giá"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-configName",children:"Tên cấu hình *"}),l.jsx(We,{id:"edit-configName",value:O.configName,onChange:H=>q({...O,configName:H.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-description",children:"Mô tả *"}),l.jsx(is,{id:"edit-description",value:O.description,onChange:H=>q({...O,description:H.target.value}),rows:3})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-value",children:"Giá trị *"}),l.jsx(We,{id:"edit-value",type:"number",value:O.value,onChange:H=>q({...O,value:Number(H.target.value)}),min:"0",step:"0.01"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-unit",children:"Đơn vị *"}),l.jsxs(Cn,{value:O.unit,onValueChange:H=>q({...O,unit:H}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn đơn vị"})}),l.jsx(_n,{children:F.map(H=>l.jsx(ze,{value:H,children:H},H))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-effectiveDate",children:"Ngày hiệu lực"}),l.jsx(We,{id:"edit-effectiveDate",type:"date",value:O.effectiveDate,onChange:H=>q({...O,effectiveDate:H.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-expiryDate",children:"Ngày hết hạn"}),l.jsx(We,{id:"edit-expiryDate",type:"date",value:O.expiryDate,onChange:H=>q({...O,expiryDate:H.target.value})})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-notes",children:"Ghi chú"}),l.jsx(is,{id:"edit-notes",value:O.notes,onChange:H=>q({...O,notes:H.target.value}),rows:2})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{id:"edit-isActive",checked:O.isActive,onCheckedChange:H=>q({...O,isActive:H})}),l.jsx(Se,{htmlFor:"edit-isActive",children:"Kích hoạt cấu hình"})]})]}),l.jsxs(Z0,{children:[l.jsx(Ce,{variant:"outline",onClick:()=>T(!1),children:"Hủy"}),l.jsx(Ce,{onClick:Y,disabled:P==="update",children:P==="update"?"Đang cập nhật...":"Cập nhật"})]})]})})]})})}function Lgt(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(null),[s,o]=S.useState(!0),[a,c]=S.useState(""),[u,d]=S.useState("all"),[h,f]=S.useState("all"),[p,x]=S.useState(1),[y,b]=S.useState(1),[_,C]=S.useState(0),[k,T]=S.useState(!1),[E,N]=S.useState(!1),[P,M]=S.useState(null),[O,q]=S.useState(null),[D,F]=S.useState({costCode:"",costName:"",description:"",amount:0,currency:"VND",type:"",payerId:"",recipientId:"",relatedEntityId:"",relatedEntityType:"",referenceNumber:"",dueDate:"",paymentMethod:"",notes:"",isRecurring:!1,recurringIntervalDays:0}),K=[{value:"TourGuidePayment",label:"Thanh toán cho hướng dẫn viên"},{value:"RefundPayment",label:"Hoàn tiền cho khách"},{value:"FeaturedTourFee",label:"Phí đăng tour nổi bật"},{value:"CommissionFee",label:"Phí hoa hồng"},{value:"ServiceFee",label:"Phí dịch vụ"},{value:"PenaltyFee",label:"Phí phạt"},{value:"Other",label:"Chi phí khác"}],ee=["VND","USD","EUR"];S.useEffect(()=>{Y(),U()},[p,u,h,a]);const Y=async()=>{try{o(!0);const oe=new URLSearchParams({page:p.toString(),pageSize:"20"});u!=="all"&&oe.append("type",u),h!=="all"&&oe.append("status",h),a.trim()&&oe.append("searchTerm",a.trim());const ve=await ot(`${Ge()}/api/cost?${oe.toString()}`);t(ve.costs),b(ve.pagination.totalPages),C(ve.pagination.totalCount)}catch(oe){console.error("Error fetching costs:",oe),Ae.error("Không thể tải danh sách chi phí")}finally{o(!1)}},U=async()=>{try{const oe=await ot(`${Ge()}/api/cost/statistics`);i(oe)}catch(oe){console.error("Error fetching cost statistics:",oe)}},R=async()=>{try{q("create");const oe={...D,amount:Number(D.amount),payerId:D.payerId||(n==null?void 0:n.id),recipientId:D.recipientId||(n==null?void 0:n.id),dueDate:D.dueDate?new Date(D.dueDate).toISOString():null,relatedEntityId:D.relatedEntityId||null,recurringIntervalDays:D.isRecurring?Number(D.recurringIntervalDays):null};await ot(`${Ge()}/api/cost`,{method:"POST",body:JSON.stringify(oe)}),Ae.success("Tạo chi phí thành công"),T(!1),se(),Y(),U()}catch(oe){console.error("Error creating cost:",oe),Ae.error(oe.message||"Không thể tạo chi phí")}finally{q(null)}},z=async()=>{if(P)try{q("update");const oe={costName:D.costName,description:D.description,amount:Number(D.amount),currency:D.currency,status:P.status,referenceNumber:D.referenceNumber,dueDate:D.dueDate?new Date(D.dueDate).toISOString():null,paidDate:P.paidDate,paymentMethod:D.paymentMethod,notes:D.notes,isRecurring:D.isRecurring,recurringIntervalDays:D.isRecurring?Number(D.recurringIntervalDays):null};await ot(`${Ge()}/api/cost/${P.id}`,{method:"PUT",body:JSON.stringify(oe)}),Ae.success("Cập nhật chi phí thành công"),N(!1),M(null),se(),Y(),U()}catch(oe){console.error("Error updating cost:",oe),Ae.error(oe.message||"Không thể cập nhật chi phí")}finally{q(null)}},W=async oe=>{try{q(oe),await ot(`${Ge()}/api/cost/${oe}`,{method:"DELETE"}),Ae.success("Xóa chi phí thành công"),Y(),U()}catch(ve){console.error("Error deleting cost:",ve),Ae.error(ve.message||"Không thể xóa chi phí")}finally{q(null)}},se=()=>{F({costCode:"",costName:"",description:"",amount:0,currency:"VND",type:"",payerId:"",recipientId:"",relatedEntityId:"",relatedEntityType:"",referenceNumber:"",dueDate:"",paymentMethod:"",notes:"",isRecurring:!1,recurringIntervalDays:0})},ne=oe=>{M(oe),F({costCode:oe.costCode,costName:oe.costName,description:oe.description,amount:oe.amount,currency:oe.currency,type:oe.type,payerId:oe.payerId,recipientId:oe.recipientId,relatedEntityId:oe.relatedEntityId||"",relatedEntityType:oe.relatedEntityType||"",referenceNumber:oe.referenceNumber||"",dueDate:oe.dueDate?new Date(oe.dueDate).toISOString().split("T")[0]:"",paymentMethod:oe.paymentMethod||"",notes:oe.notes||"",isRecurring:oe.isRecurring,recurringIntervalDays:oe.recurringIntervalDays||0}),N(!0)},te=oe=>{const ve=K.find(fe=>fe.value===oe),be={TourGuidePayment:"bg-blue-100 text-blue-800",RefundPayment:"bg-green-100 text-green-800",FeaturedTourFee:"bg-purple-100 text-purple-800",CommissionFee:"bg-yellow-100 text-yellow-800",ServiceFee:"bg-gray-100 text-gray-800",PenaltyFee:"bg-red-100 text-red-800",Other:"bg-gray-100 text-gray-800"};return l.jsx(ct,{className:be[oe]||"bg-gray-100 text-gray-800",children:(ve==null?void 0:ve.label)||oe})},H=oe=>{const ve={Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-blue-100 text-blue-800",Paid:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800",Overdue:"bg-red-100 text-red-800"},be={Pending:"Chờ thanh toán",Approved:"Đã duyệt",Paid:"Đã thanh toán",Cancelled:"Đã hủy",Overdue:"Quá hạn"};return l.jsx(ct,{className:ve[oe]||"bg-gray-100 text-gray-800",children:be[oe]||oe})},ce=(oe,ve)=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:ve==="VND"?"VND":ve==="USD"?"USD":"EUR"}).format(oe),pe=oe=>new Date(oe).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return!n||n.role!=="Admin"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền quản trị để truy cập trang này."})]})}):l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quản lý chi phí"}),l.jsx("p",{className:"text-gray-600",children:"Quản lý các khoản chi phí và thanh toán"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-sm text-gray-500",children:["Tổng cộng: ",_," chi phí"]}),l.jsxs(Qr,{open:k,onOpenChange:T,children:[l.jsx(gS,{asChild:!0,children:l.jsxs(Ce,{children:[l.jsx(Il,{className:"h-4 w-4 mr-2"}),"Tạo chi phí"]})}),l.jsxs(Br,{className:"max-w-2xl",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Tạo chi phí mới"}),l.jsx(Ma,{children:"Thêm chi phí mới vào hệ thống"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"costCode",children:"Mã chi phí *"}),l.jsx(We,{id:"costCode",value:D.costCode,onChange:oe=>F({...D,costCode:oe.target.value}),placeholder:"VD: COST_001"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"type",children:"Loại chi phí *"}),l.jsxs(Cn,{value:D.type,onValueChange:oe=>F({...D,type:oe}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn loại chi phí"})}),l.jsx(_n,{children:K.map(oe=>l.jsx(ze,{value:oe.value,children:oe.label},oe.value))})]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"costName",children:"Tên chi phí *"}),l.jsx(We,{id:"costName",value:D.costName,onChange:oe=>F({...D,costName:oe.target.value}),placeholder:"VD: Thanh toán tour guide tháng 12"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"description",children:"Mô tả *"}),l.jsx(is,{id:"description",value:D.description,onChange:oe=>F({...D,description:oe.target.value}),placeholder:"Mô tả chi tiết về chi phí này",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"amount",children:"Số tiền *"}),l.jsx(We,{id:"amount",type:"number",value:D.amount,onChange:oe=>F({...D,amount:Number(oe.target.value)}),placeholder:"0",min:"0",step:"0.01"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"currency",children:"Đơn vị tiền tệ *"}),l.jsxs(Cn,{value:D.currency,onValueChange:oe=>F({...D,currency:oe}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn đơn vị"})}),l.jsx(_n,{children:ee.map(oe=>l.jsx(ze,{value:oe,children:oe},oe))})]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"dueDate",children:"Ngày đến hạn"}),l.jsx(We,{id:"dueDate",type:"date",value:D.dueDate,onChange:oe=>F({...D,dueDate:oe.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"paymentMethod",children:"Phương thức thanh toán"}),l.jsx(We,{id:"paymentMethod",value:D.paymentMethod,onChange:oe=>F({...D,paymentMethod:oe.target.value}),placeholder:"VD: Chuyển khoản, Tiền mặt"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"notes",children:"Ghi chú"}),l.jsx(is,{id:"notes",value:D.notes,onChange:oe=>F({...D,notes:oe.target.value}),placeholder:"Ghi chú thêm về chi phí",rows:2})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{id:"isRecurring",checked:D.isRecurring,onCheckedChange:oe=>F({...D,isRecurring:oe})}),l.jsx(Se,{htmlFor:"isRecurring",children:"Chi phí định kỳ"})]}),D.isRecurring&&l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"recurringIntervalDays",children:"Số ngày lặp lại"}),l.jsx(We,{id:"recurringIntervalDays",type:"number",value:D.recurringIntervalDays,onChange:oe=>F({...D,recurringIntervalDays:Number(oe.target.value)}),placeholder:"30",min:"1"})]})]}),l.jsxs(Z0,{children:[l.jsx(Ce,{variant:"outline",onClick:()=>T(!1),children:"Hủy"}),l.jsx(Ce,{onClick:R,disabled:O==="create",children:O==="create"?"Đang tạo...":"Tạo chi phí"})]})]})]})]})]}),r&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Chờ thanh toán"}),l.jsx(_m,{className:"h-4 w-4 text-yellow-600"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:ce(r.totalPendingAmount,"VND")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.pendingCount," chi phí"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Đã thanh toán"}),l.jsx(iS,{className:"h-4 w-4 text-green-600"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:ce(r.totalPaidAmount,"VND")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.paidCount," chi phí"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Quá hạn"}),l.jsx(B9,{className:"h-4 w-4 text-red-600"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:ce(r.totalOverdueAmount,"VND")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.overdueCount," chi phí"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng chi phí"}),l.jsx(wo,{className:"h-4 w-4 text-blue-600"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:ce(r.totalPendingAmount+r.totalPaidAmount+r.totalOverdueAmount,"VND")}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Tất cả chi phí"})]})]})]}),l.jsx(tt,{children:l.jsx(nt,{className:"p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(We,{placeholder:"Tìm kiếm theo tên, mã chi phí...",value:a,onChange:oe=>c(oe.target.value),className:"pl-10"})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:u,onValueChange:d,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Loại chi phí"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),K.map(oe=>l.jsx(ze,{value:oe.value,children:oe.label},oe.value))]})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:h,onValueChange:f,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"Pending",children:"Chờ thanh toán"}),l.jsx(ze,{value:"Approved",children:"Đã duyệt"}),l.jsx(ze,{value:"Paid",children:"Đã thanh toán"}),l.jsx(ze,{value:"Cancelled",children:"Đã hủy"}),l.jsx(ze,{value:"Overdue",children:"Quá hạn"})]})]})})]})})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách chi phí"})}),l.jsxs(nt,{children:[s?l.jsx("div",{className:"space-y-4",children:[...Array(5)].map((oe,ve)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"h-16 bg-gray-200 rounded"})},ve))}):e.length>0?l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Tên chi phí"}),l.jsx(Ot,{children:"Loại"}),l.jsx(Ot,{children:"Số tiền"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Người trả"}),l.jsx(Ot,{children:"Người nhận"}),l.jsx(Ot,{children:"Ngày đến hạn"}),l.jsx(Ot,{children:"Thao tác"})]})}),l.jsx(Xu,{children:e.map(oe=>l.jsxs(ur,{children:[l.jsx(wt,{children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:oe.costName}),l.jsx("div",{className:"text-sm text-gray-500",children:oe.costCode})]})}),l.jsx(wt,{children:te(oe.type)}),l.jsx(wt,{children:l.jsx("div",{className:"font-medium",children:ce(oe.amount,oe.currency)})}),l.jsx(wt,{children:H(oe.status)}),l.jsx(wt,{children:oe.payerName}),l.jsx(wt,{children:oe.recipientName}),l.jsx(wt,{children:oe.dueDate?pe(oe.dueDate):"-"}),l.jsx(wt,{children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>ne(oe),children:l.jsx(dh,{className:"h-4 w-4"})}),l.jsxs(Hl,{children:[l.jsx(ux,{asChild:!0,children:l.jsx(Ce,{variant:"outline",size:"sm",children:l.jsx(Sm,{className:"h-4 w-4"})})}),l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xóa chi phí?"}),l.jsx(Wu,{children:"Hành động này không thể hoàn tác. Chi phí sẽ bị xóa vĩnh viễn."})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:()=>W(oe.id),className:"bg-red-600 hover:bg-red-700",children:"Xóa"})]})]})]})]})})]},oe.id))})]}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(wo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không có chi phí nào"}),l.jsx("p",{className:"text-gray-600",children:a||u!=="all"||h!=="all"?"Không tìm thấy chi phí phù hợp với bộ lọc":"Chưa có chi phí nào trong hệ thống"})]}),y>1&&l.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>x(oe=>Math.max(1,oe-1)),disabled:p===1,children:"Trước"}),l.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,y)},(oe,ve)=>{const be=ve+1;return l.jsx(Ce,{variant:p===be?"default":"outline",size:"sm",onClick:()=>x(be),className:"w-8 h-8 p-0",children:be},be)})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>x(oe=>Math.min(y,oe+1)),disabled:p===y,children:"Sau"})]})]})]}),l.jsx(Qr,{open:E,onOpenChange:N,children:l.jsxs(Br,{className:"max-w-2xl",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Chỉnh sửa chi phí"}),l.jsx(Ma,{children:"Cập nhật thông tin chi phí"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-costName",children:"Tên chi phí *"}),l.jsx(We,{id:"edit-costName",value:D.costName,onChange:oe=>F({...D,costName:oe.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-description",children:"Mô tả *"}),l.jsx(is,{id:"edit-description",value:D.description,onChange:oe=>F({...D,description:oe.target.value}),rows:3})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-amount",children:"Số tiền *"}),l.jsx(We,{id:"edit-amount",type:"number",value:D.amount,onChange:oe=>F({...D,amount:Number(oe.target.value)}),min:"0",step:"0.01"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-currency",children:"Đơn vị tiền tệ *"}),l.jsxs(Cn,{value:D.currency,onValueChange:oe=>F({...D,currency:oe}),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn đơn vị"})}),l.jsx(_n,{children:ee.map(oe=>l.jsx(ze,{value:oe,children:oe},oe))})]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-dueDate",children:"Ngày đến hạn"}),l.jsx(We,{id:"edit-dueDate",type:"date",value:D.dueDate,onChange:oe=>F({...D,dueDate:oe.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-paymentMethod",children:"Phương thức thanh toán"}),l.jsx(We,{id:"edit-paymentMethod",value:D.paymentMethod,onChange:oe=>F({...D,paymentMethod:oe.target.value})})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-notes",children:"Ghi chú"}),l.jsx(is,{id:"edit-notes",value:D.notes,onChange:oe=>F({...D,notes:oe.target.value}),rows:2})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{id:"edit-isRecurring",checked:D.isRecurring,onCheckedChange:oe=>F({...D,isRecurring:oe})}),l.jsx(Se,{htmlFor:"edit-isRecurring",children:"Chi phí định kỳ"})]}),D.isRecurring&&l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-recurringIntervalDays",children:"Số ngày lặp lại"}),l.jsx(We,{id:"edit-recurringIntervalDays",type:"number",value:D.recurringIntervalDays,onChange:oe=>F({...D,recurringIntervalDays:Number(oe.target.value)}),min:"1"})]})]}),l.jsxs(Z0,{children:[l.jsx(Ce,{variant:"outline",onClick:()=>N(!1),children:"Hủy"}),l.jsx(Ce,{onClick:z,disabled:O==="update",children:O==="update"?"Đang cập nhật...":"Cập nhật"})]})]})})]})})}function Fgt(){const{user:n}=Zr(),[e,t]=S.useState([]),[r,i]=S.useState(null),[s,o]=S.useState(!0),[a,c]=S.useState(""),[u,d]=S.useState("all"),[h,f]=S.useState("all"),[p,x]=S.useState(1),[y,b]=S.useState(1),[_,C]=S.useState(0),[k,T]=S.useState(null),[E,N]=S.useState(!1),P=[{value:"TourGuidePayment",label:"Thanh toán cho hướng dẫn viên"},{value:"RefundPayment",label:"Hoàn tiền cho khách"},{value:"FeaturedTourFee",label:"Phí đăng tour nổi bật"},{value:"CommissionFee",label:"Phí hoa hồng"},{value:"ServiceFee",label:"Phí dịch vụ"},{value:"PenaltyFee",label:"Phí phạt"},{value:"Other",label:"Chi phí khác"}];S.useEffect(()=>{M(),O()},[p,u,h,a]);const M=async()=>{try{o(!0);const Y=new URLSearchParams({page:p.toString(),pageSize:"20",recipientId:(n==null?void 0:n.id)||""});u!=="all"&&Y.append("type",u),h!=="all"&&Y.append("status",h),a.trim()&&Y.append("searchTerm",a.trim());const U=await ot(`${Ge()}/api/cost?${Y.toString()}`);t(U.costs),b(U.pagination.totalPages),C(U.pagination.totalCount)}catch(Y){console.error("Error fetching costs:",Y),Ae.error("Không thể tải danh sách chi phí")}finally{o(!1)}},O=async()=>{try{const Y=new URLSearchParams({recipientId:(n==null?void 0:n.id)||""}),U=await ot(`${Ge()}/api/cost/statistics?${Y.toString()}`);i(U)}catch(Y){console.error("Error fetching cost statistics:",Y)}},q=Y=>{const U=P.find(z=>z.value===Y),R={TourGuidePayment:"bg-blue-100 text-blue-800",RefundPayment:"bg-green-100 text-green-800",FeaturedTourFee:"bg-purple-100 text-purple-800",CommissionFee:"bg-yellow-100 text-yellow-800",ServiceFee:"bg-gray-100 text-gray-800",PenaltyFee:"bg-red-100 text-red-800",Other:"bg-gray-100 text-gray-800"};return l.jsx(ct,{className:R[Y]||"bg-gray-100 text-gray-800",children:(U==null?void 0:U.label)||Y})},D=Y=>{const U={Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-blue-100 text-blue-800",Paid:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800",Overdue:"bg-red-100 text-red-800"},R={Pending:"Chờ thanh toán",Approved:"Đã duyệt",Paid:"Đã thanh toán",Cancelled:"Đã hủy",Overdue:"Quá hạn"};return l.jsx(ct,{className:U[Y]||"bg-gray-100 text-gray-800",children:R[Y]||Y})},F=(Y,U)=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:U==="VND"?"VND":U==="USD"?"USD":"EUR"}).format(Y),K=Y=>new Date(Y).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ee=Y=>{T(Y),N(!0)};return!n||n.role!=="Admin"&&n.role!=="TourGuide"?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không có quyền truy cập"}),l.jsx("p",{className:"text-gray-600",children:"Bạn cần quyền hướng dẫn viên để truy cập trang này."})]})}):l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Chi phí của tôi"}),l.jsx("p",{className:"text-gray-600",children:"Quản lý các khoản chi phí và thanh toán"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Tổng cộng: ",_," chi phí"]})]}),r&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Chờ thanh toán"}),l.jsx(_m,{className:"h-4 w-4 text-yellow-600"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:F(r.totalPendingAmount,"VND")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.pendingCount," chi phí"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Đã thanh toán"}),l.jsx(iS,{className:"h-4 w-4 text-green-600"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:F(r.totalPaidAmount,"VND")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.paidCount," chi phí"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Quá hạn"}),l.jsx(B9,{className:"h-4 w-4 text-red-600"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:F(r.totalOverdueAmount,"VND")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.overdueCount," chi phí"]})]})]})]}),l.jsx(tt,{children:l.jsx(nt,{className:"p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(We,{placeholder:"Tìm kiếm theo tên, mã chi phí...",value:a,onChange:Y=>c(Y.target.value),className:"pl-10"})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:u,onValueChange:d,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Loại chi phí"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),P.map(Y=>l.jsx(ze,{value:Y.value,children:Y.label},Y.value))]})]})}),l.jsx("div",{className:"w-full sm:w-48",children:l.jsxs(Cn,{value:h,onValueChange:f,children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"all",children:"Tất cả"}),l.jsx(ze,{value:"Pending",children:"Chờ thanh toán"}),l.jsx(ze,{value:"Approved",children:"Đã duyệt"}),l.jsx(ze,{value:"Paid",children:"Đã thanh toán"}),l.jsx(ze,{value:"Cancelled",children:"Đã hủy"}),l.jsx(ze,{value:"Overdue",children:"Quá hạn"})]})]})})]})})}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Danh sách chi phí"})}),l.jsxs(nt,{children:[s?l.jsx("div",{className:"space-y-4",children:[...Array(5)].map((Y,U)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"h-16 bg-gray-200 rounded"})},U))}):e.length>0?l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Tên chi phí"}),l.jsx(Ot,{children:"Loại"}),l.jsx(Ot,{children:"Số tiền"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Người trả"}),l.jsx(Ot,{children:"Ngày đến hạn"}),l.jsx(Ot,{children:"Thao tác"})]})}),l.jsx(Xu,{children:e.map(Y=>l.jsxs(ur,{children:[l.jsx(wt,{children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:Y.costName}),l.jsx("div",{className:"text-sm text-gray-500",children:Y.costCode})]})}),l.jsx(wt,{children:q(Y.type)}),l.jsx(wt,{children:l.jsx("div",{className:"font-medium",children:F(Y.amount,Y.currency)})}),l.jsx(wt,{children:D(Y.status)}),l.jsx(wt,{children:Y.payerName}),l.jsx(wt,{children:Y.dueDate?K(Y.dueDate):"-"}),l.jsx(wt,{children:l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>ee(Y),children:l.jsx(Ts,{className:"h-4 w-4"})})})]},Y.id))})]}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(wo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không có chi phí nào"}),l.jsx("p",{className:"text-gray-600",children:a||u!=="all"||h!=="all"?"Không tìm thấy chi phí phù hợp với bộ lọc":"Chưa có chi phí nào liên quan đến bạn"})]}),y>1&&l.jsxs("div",{className:"flex justify-center gap-2 pt-6",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>x(Y=>Math.max(1,Y-1)),disabled:p===1,children:"Trước"}),l.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,y)},(Y,U)=>{const R=U+1;return l.jsx(Ce,{variant:p===R?"default":"outline",size:"sm",onClick:()=>x(R),className:"w-8 h-8 p-0",children:R},R)})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>x(Y=>Math.min(y,Y+1)),disabled:p===y,children:"Sau"})]})]})]}),l.jsx(Qr,{open:E,onOpenChange:N,children:l.jsxs(Br,{className:"max-w-2xl",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Chi tiết chi phí"}),l.jsx(Ma,{children:"Thông tin chi tiết về chi phí"})]}),k&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Mã chi phí"}),l.jsx("p",{className:"text-lg font-semibold",children:k.costCode})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Loại"}),l.jsx("div",{className:"mt-1",children:q(k.type)})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Trạng thái"}),l.jsx("div",{className:"mt-1",children:D(k.status)})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Số tiền"}),l.jsx("p",{className:"text-lg font-semibold text-green-600",children:F(k.amount,k.currency)})]})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Tên chi phí"}),l.jsx("p",{className:"text-lg",children:k.costName})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Mô tả"}),l.jsx("p",{className:"text-sm text-gray-700",children:k.description})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Người trả"}),l.jsx("p",{className:"text-sm",children:k.payerName})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Người nhận"}),l.jsx("p",{className:"text-sm",children:k.recipientName})]})]}),k.dueDate&&l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Ngày đến hạn"}),l.jsx("p",{className:"text-sm",children:K(k.dueDate)})]}),k.paidDate&&l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Ngày thanh toán"}),l.jsx("p",{className:"text-sm",children:K(k.paidDate)})]}),k.paymentMethod&&l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Phương thức thanh toán"}),l.jsx("p",{className:"text-sm",children:k.paymentMethod})]}),k.notes&&l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Ghi chú"}),l.jsx("p",{className:"text-sm text-gray-700",children:k.notes})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Ngày tạo"}),l.jsx("p",{className:"text-sm",children:K(k.createdAt)})]}),l.jsxs("div",{children:[l.jsx(Se,{className:"text-sm font-medium text-gray-500",children:"Cập nhật cuối"}),l.jsx("p",{className:"text-sm",children:K(k.updatedAt)})]})]})]}),l.jsx(Z0,{children:l.jsx(Ce,{variant:"outline",onClick:()=>N(!1),children:"Đóng"})})]})})]})})}function Bgt(){const n=li();Zr();const[e,t]=S.useState([]),[r,i]=S.useState(!0),[s,o]=S.useState(null),[a,c]=S.useState({page:1,pageSize:10}),[u,d]=S.useState(0),[h,f]=S.useState(null);S.useEffect(()=>{p(),x()},[a]);const p=async()=>{try{i(!0);const T=new URLSearchParams;Object.entries(a).forEach(([N,P])=>{P!=null&&P!==""&&T.append(N,P.toString())});const E=await ot(`${Ge()}/api/product/my-products?${T.toString()}`);t(E.products),d(E.totalPages)}catch(T){console.error("Error loading products:",T),Ae.error("Không thể tải danh sách sản phẩm")}finally{i(!1)}},x=async()=>{try{const T=await ot(`${Ge()}/api/product/statistics`);o(T)}catch(T){console.error("Error loading statistics:",T)}},y=async T=>{try{await ot(`${Ge()}/api/product/${T}`,{method:"DELETE"}),Ae.success("Xóa sản phẩm thành công"),p(),x()}catch(E){console.error("Error deleting product:",E),Ae.error("Không thể xóa sản phẩm")}},b=(T,E)=>{c(N=>({...N,[T]:E,page:1}))},_=T=>{c(E=>({...E,page:T}))},C=T=>{const N={Draft:{label:"Nháp",variant:"outline"},Active:{label:"Hoạt động",variant:"default"},Inactive:{label:"Không hoạt động",variant:"secondary"},Discontinued:{label:"Ngừng bán",variant:"destructive"}}[T]||{label:T,variant:"outline"};return l.jsx(ct,{variant:N.variant,children:N.label})},k=(T,E)=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:E}).format(T);return r&&e.length===0?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý sản phẩm"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Quản lý sản phẩm của bạn"})]}),l.jsxs(Ce,{onClick:()=>n("/admin/product/create"),children:[l.jsx(Il,{className:"w-4 h-4 mr-2"}),"Tạo sản phẩm"]})]}),s&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng sản phẩm"}),l.jsx(ly,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:s.totalProducts}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.activeProducts," hoạt động"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Tổng giá trị"}),l.jsx(wo,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:k(s.totalValue,"VND")}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Trung bình ",k(s.averagePrice,"VND")]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Lượt xem"}),l.jsx(Ts,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:s.totalViews}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.totalPurchases," lượt mua"]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(pt,{className:"text-sm font-medium",children:"Đánh giá"}),l.jsx(ki,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(nt,{children:[l.jsx("div",{className:"text-2xl font-bold",children:s.averageRating.toFixed(1)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Trung bình đánh giá"})]})]})]}),l.jsxs(tt,{className:"mb-6",children:[l.jsx(dt,{children:l.jsx(pt,{children:"Bộ lọc"})}),l.jsx(nt,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Tìm kiếm"}),l.jsx(We,{placeholder:"Tên sản phẩm...",value:a.searchTerm||"",onChange:T=>b("searchTerm",T.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Trạng thái"}),l.jsxs(Cn,{value:a.status||"",onValueChange:T=>b("status",T),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Tất cả trạng thái"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"",children:"Tất cả trạng thái"}),l.jsx(ze,{value:"Draft",children:"Nháp"}),l.jsx(ze,{value:"Active",children:"Hoạt động"}),l.jsx(ze,{value:"Inactive",children:"Không hoạt động"}),l.jsx(ze,{value:"Discontinued",children:"Ngừng bán"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Danh mục"}),l.jsx(We,{placeholder:"Danh mục...",value:a.category||"",onChange:T=>b("category",T.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium",children:"Sắp xếp"}),l.jsxs(Cn,{value:a.sortBy||"",onValueChange:T=>b("sortBy",T),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Sắp xếp theo"})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"createdAt",children:"Ngày tạo"}),l.jsx(ze,{value:"name",children:"Tên"}),l.jsx(ze,{value:"price",children:"Giá"}),l.jsx(ze,{value:"viewCount",children:"Lượt xem"}),l.jsx(ze,{value:"purchaseCount",children:"Lượt mua"}),l.jsx(ze,{value:"rating",children:"Đánh giá"})]})]})]})]})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{children:["Sản phẩm (",e.length,")"]})}),l.jsx(nt,{children:e.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ly,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Chưa có sản phẩm"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Bắt đầu tạo sản phẩm đầu tiên của bạn"}),l.jsxs(Ce,{onClick:()=>n("/admin/product/create"),children:[l.jsx(Il,{className:"w-4 h-4 mr-2"}),"Tạo sản phẩm"]})]}):l.jsx("div",{className:"space-y-4",children:e.map(T=>l.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h3",{className:"font-semibold text-lg",children:T.name}),C(T.status),T.isFeatured&&l.jsx(ct,{variant:"secondary",children:"Nổi bật"}),T.isBestSeller&&l.jsx(ct,{variant:"secondary",children:"Bán chạy"}),T.isNewArrival&&l.jsx(ct,{variant:"secondary",children:"Mới"}),T.isOnSale&&l.jsx(ct,{variant:"destructive",children:"Giảm giá"})]}),l.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Tour:"})," ",T.tourTitle]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Giá:"})," ",k(T.price,T.currency)]}),T.salePrice&&l.jsxs("p",{children:[l.jsx("strong",{children:"Giá sale:"})," ",k(T.salePrice,T.currency)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Tồn kho:"})," ",T.stockQuantity]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Lượt xem:"})," ",T.viewCount," | ",l.jsx("strong",{children:"Lượt mua:"})," ",T.purchaseCount]}),T.rating&&l.jsxs("p",{children:[l.jsx("strong",{children:"Đánh giá:"})," ",T.rating.toFixed(1)," (",T.reviewCount," đánh giá)"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>n(`/admin/product/${T.id}`),children:l.jsx(Ts,{className:"w-4 h-4"})}),l.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>n(`/admin/product/${T.id}/edit`),children:l.jsx(dh,{className:"w-4 h-4"})}),l.jsxs(Hl,{children:[l.jsx(ux,{asChild:!0,children:l.jsx(Ce,{variant:"outline",size:"sm",children:l.jsx(Sm,{className:"w-4 h-4"})})}),l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xác nhận xóa"}),l.jsxs(Wu,{children:['Bạn có chắc chắn muốn xóa sản phẩm "',T.name,'"? Hành động này không thể hoàn tác.']})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:()=>y(T.id),className:"bg-red-600 hover:bg-red-700",children:"Xóa"})]})]})]})]})]})},T.id))})})]}),u>1&&l.jsx("div",{className:"flex justify-center mt-6",children:l.jsx("div",{className:"flex gap-2",children:Array.from({length:u},(T,E)=>E+1).map(T=>l.jsx(Ce,{variant:T===a.page?"default":"outline",size:"sm",onClick:()=>_(T),children:T},T))})})]})}function sae(){const n=li(),{id:e}=tA(),t=!!e,[r,i]=S.useState(!1),[s,o]=S.useState([]),[a,c]=S.useState({name:"",description:"",shortDescription:"",price:0,currency:"VND",images:"",tourId:"",category:"",brand:"",unit:"",weight:0,dimensions:"",specifications:"",features:"",usageInstructions:"",careInstructions:"",warranty:"",returnPolicy:"",shippingInfo:"",stockQuantity:0,minOrderQuantity:1,maxOrderQuantity:100,isDigital:!1,isFeatured:!1,isBestSeller:!1,isNewArrival:!1,isOnSale:!1,salePrice:0,saleStartDate:"",saleEndDate:"",tags:"",seoKeywords:"",seoDescription:"",notes:""});S.useEffect(()=>{u(),t&&d()},[e]);const u=async()=>{try{const p=await ot(`${Ge()}/api/tour/my-tours`);o(p.filter(x=>x.status==="Approved"||x.status==="Active"))}catch(p){console.error("Error loading tours:",p),Ae.error("Không thể tải danh sách tour")}},d=async()=>{try{const p=await ot(`${Ge()}/api/product/${e}`);c({name:p.name||"",description:p.description||"",shortDescription:p.shortDescription||"",price:p.price||0,currency:p.currency||"VND",images:p.images||"",tourId:p.tourId||"",category:p.category||"",brand:p.brand||"",unit:p.unit||"",weight:p.weight||0,dimensions:p.dimensions||"",specifications:p.specifications||"",features:p.features||"",usageInstructions:p.usageInstructions||"",careInstructions:p.careInstructions||"",warranty:p.warranty||"",returnPolicy:p.returnPolicy||"",shippingInfo:p.shippingInfo||"",stockQuantity:p.stockQuantity||0,minOrderQuantity:p.minOrderQuantity||1,maxOrderQuantity:p.maxOrderQuantity||100,isDigital:p.isDigital||!1,isFeatured:p.isFeatured||!1,isBestSeller:p.isBestSeller||!1,isNewArrival:p.isNewArrival||!1,isOnSale:p.isOnSale||!1,salePrice:p.salePrice||0,saleStartDate:p.saleStartDate||"",saleEndDate:p.saleEndDate||"",tags:p.tags||"",seoKeywords:p.seoKeywords||"",seoDescription:p.seoDescription||"",notes:p.notes||""})}catch(p){console.error("Error loading product:",p),Ae.error("Không thể tải thông tin sản phẩm")}},h=async p=>{if(p.preventDefault(),!a.name.trim()){Ae.error("Vui lòng nhập tên sản phẩm");return}if(!a.tourId){Ae.error("Vui lòng chọn tour");return}if(a.price<=0){Ae.error("Vui lòng nhập giá hợp lệ");return}try{i(!0),t?(await ot(`${Ge()}/api/product/${e}`,{method:"PUT",body:JSON.stringify(a)}),Ae.success("Cập nhật sản phẩm thành công")):(await ot(`${Ge()}/api/product`,{method:"POST",body:JSON.stringify(a)}),Ae.success("Tạo sản phẩm thành công")),n("/admin/products")}catch(x){console.error("Error saving product:",x),Ae.error(t?"Không thể cập nhật sản phẩm":"Không thể tạo sản phẩm")}finally{i(!1)}},f=(p,x)=>{c(y=>({...y,[p]:x}))};return l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsxs(Ce,{variant:"outline",onClick:()=>n("/admin/products"),children:[l.jsx(rh,{className:"w-4 h-4 mr-2"}),"Quay lại"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Chỉnh sửa sản phẩm":"Tạo sản phẩm mới"}),l.jsx("p",{className:"text-gray-600 mt-2",children:t?"Cập nhật thông tin sản phẩm":"Tạo sản phẩm mới cho tour của bạn"})]})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(ly,{className:"w-5 h-5"}),"Thông tin cơ bản"]})}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"name",children:"Tên sản phẩm *"}),l.jsx(We,{id:"name",value:a.name,onChange:p=>f("name",p.target.value),placeholder:"Nhập tên sản phẩm...",required:!0})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"tourId",children:"Tour *"}),l.jsxs(Cn,{value:a.tourId,onValueChange:p=>f("tourId",p),children:[l.jsx(wn,{children:l.jsx(En,{placeholder:"Chọn tour..."})}),l.jsx(_n,{children:s.map(p=>l.jsx(ze,{value:p.id,children:p.title},p.id))})]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"shortDescription",children:"Mô tả ngắn"}),l.jsx(is,{id:"shortDescription",value:a.shortDescription,onChange:p=>f("shortDescription",p.target.value),placeholder:"Mô tả ngắn về sản phẩm...",rows:3})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"description",children:"Mô tả chi tiết"}),l.jsx(is,{id:"description",value:a.description,onChange:p=>f("description",p.target.value),placeholder:"Mô tả chi tiết về sản phẩm...",rows:6})]})]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(wo,{className:"w-5 h-5"}),"Giá cả"]})}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"price",children:"Giá *"}),l.jsx(We,{id:"price",type:"number",value:a.price,onChange:p=>f("price",parseFloat(p.target.value)||0),placeholder:"0",min:"0",step:"0.01",required:!0})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"currency",children:"Tiền tệ"}),l.jsxs(Cn,{value:a.currency,onValueChange:p=>f("currency",p),children:[l.jsx(wn,{children:l.jsx(En,{})}),l.jsxs(_n,{children:[l.jsx(ze,{value:"VND",children:"VND"}),l.jsx(ze,{value:"USD",children:"USD"}),l.jsx(ze,{value:"EUR",children:"EUR"})]})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"stockQuantity",children:"Tồn kho"}),l.jsx(We,{id:"stockQuantity",type:"number",value:a.stockQuantity,onChange:p=>f("stockQuantity",parseInt(p.target.value)||0),placeholder:"0",min:"0"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(bu,{id:"isOnSale",checked:a.isOnSale,onCheckedChange:p=>f("isOnSale",p)}),l.jsx(Se,{htmlFor:"isOnSale",children:"Đang giảm giá"})]}),a.isOnSale&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"salePrice",children:"Giá sale"}),l.jsx(We,{id:"salePrice",type:"number",value:a.salePrice,onChange:p=>f("salePrice",parseFloat(p.target.value)||0),placeholder:"0",min:"0",step:"0.01"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"saleStartDate",children:"Ngày bắt đầu"}),l.jsx(We,{id:"saleStartDate",type:"date",value:a.saleStartDate,onChange:p=>f("saleStartDate",p.target.value)})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"saleEndDate",children:"Ngày kết thúc"}),l.jsx(We,{id:"saleEndDate",type:"date",value:a.saleEndDate,onChange:p=>f("saleEndDate",p.target.value)})]})]})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(U0,{className:"w-5 h-5"}),"Trạng thái & Tính năng"]})}),l.jsx(nt,{className:"space-y-4",children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(bu,{id:"isFeatured",checked:a.isFeatured,onCheckedChange:p=>f("isFeatured",p)}),l.jsx(Se,{htmlFor:"isFeatured",children:"Sản phẩm nổi bật"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(bu,{id:"isBestSeller",checked:a.isBestSeller,onCheckedChange:p=>f("isBestSeller",p)}),l.jsx(Se,{htmlFor:"isBestSeller",children:"Bán chạy"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(bu,{id:"isNewArrival",checked:a.isNewArrival,onCheckedChange:p=>f("isNewArrival",p)}),l.jsx(Se,{htmlFor:"isNewArrival",children:"Hàng mới"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(bu,{id:"isDigital",checked:a.isDigital,onCheckedChange:p=>f("isDigital",p)}),l.jsx(Se,{htmlFor:"isDigital",children:"Sản phẩm số"})]})]})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(CCe,{className:"w-5 h-5"}),"Phân loại"]})}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"category",children:"Danh mục"}),l.jsx(We,{id:"category",value:a.category,onChange:p=>f("category",p.target.value),placeholder:"Danh mục sản phẩm..."})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"brand",children:"Thương hiệu"}),l.jsx(We,{id:"brand",value:a.brand,onChange:p=>f("brand",p.target.value),placeholder:"Thương hiệu..."})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"unit",children:"Đơn vị"}),l.jsx(We,{id:"unit",value:a.unit,onChange:p=>f("unit",p.target.value),placeholder:"Cái, kg, lít..."})]})]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(zae,{className:"w-5 h-5"}),"Hình ảnh"]})}),l.jsx(nt,{children:l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"images",children:"URL hình ảnh"}),l.jsx(is,{id:"images",value:a.images,onChange:p=>f("images",p.target.value),placeholder:"Nhập URL hình ảnh (mỗi URL một dòng)...",rows:4})]})})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ce,{type:"submit",disabled:r,children:[l.jsx(cB,{className:"w-4 h-4 mr-2"}),r?"Đang lưu...":t?"Cập nhật":"Tạo sản phẩm"]})})]})]})}function Rk({children:n}){const{isLoggedIn:e}=Zr(),t=zl();return e?l.jsx(l.Fragment,{children:n}):l.jsx(sB,{to:"/login",state:{from:t.pathname},replace:!0})}function ao({children:n}){const{isLoggedIn:e,isAdmin:t,isLoading:r,user:i}=Zr(),s=zl();return r?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?t||(i==null?void 0:i.role)==="TourGuide"?l.jsx(l.Fragment,{children:n}):l.jsx(sB,{to:"/",replace:!0}):l.jsx(sB,{to:"/login",state:{from:s.pathname},replace:!0})}function $gt(){const{tourId:n}=tA(),e=li(),[t,r]=S.useState([]),[i,s]=S.useState([]),[o,a]=S.useState(!0),[c,u]=S.useState(""),[d,h]=S.useState(!1),[f,p]=S.useState(null),[x,y]=S.useState(!1),[b,_]=S.useState({tourId:n||"",date:new Date().toISOString().split("T")[0],maxParticipants:20,isAvailable:!0,departureDivisionCode:0,vehicle:"",adultPrice:0,childPrice:0,surcharge:0,tripTime:"",note:""}),C=["Bus 45 chỗ","Bus 29 chỗ","Bus 16 chỗ","Xe máy","Xe đạp","Tàu hỏa","Máy bay","Xe du lịch","Thuyền","Ca nô"],[k,T]=S.useState(1),[E,N]=S.useState(0);S.useEffect(()=>{n&&P()},[n]);const P=async()=>{try{a(!0);const R=async()=>{try{const te=(await ot(`${Ge()}/api/divisions`,{skipAuth:!0})||[]).filter(H=>(H.parentCode??H.ParentCode)==null).map(H=>{var ce,pe;return{id:((ce=H.id)==null?void 0:ce.toString())||((pe=H.Id)==null?void 0:pe.toString())||"",code:H.code??H.Code,name:H.name??H.Name,fullName:H.fullName??H.FullName,type:(H.type??H.Type)||"Province",parentCode:H.parentCode??H.ParentCode}});s(te)}catch(se){console.error("Failed to load divisions:",se),s([])}},[z,W]=await Promise.all([$b.getTourAvailabilities({tourId:n}),wc.getTour(n)]);await R(),r(z.data),u(W.title||`Tour ID: ${n}`)}catch(R){console.error("Error loading data:",R),Ae.error("Không thể tải dữ liệu"),u(`Tour ID: ${n}`)}finally{a(!1)}},M=()=>{_({tourId:n||"",date:new Date().toISOString().split("T")[0],maxParticipants:20,isAvailable:!0,departureDivisionCode:0,vehicle:"",adultPrice:0,childPrice:0,surcharge:0,tripTime:"",note:""}),T(1),N(0)},O=async()=>{try{y(!0),await $b.createTourAvailability(b),Ae.success("Tạo lịch trình thành công"),h(!1),M(),P()}catch(R){console.error("Error creating tour availability:",R),Ae.error("Không thể tạo lịch trình")}finally{y(!1)}},q=async()=>{if(f)try{y(!0);const R={date:b.date,maxParticipants:b.maxParticipants,isAvailable:b.isAvailable,departureDivisionCode:b.departureDivisionCode,vehicle:b.vehicle,adultPrice:b.adultPrice,childPrice:b.childPrice,surcharge:b.surcharge,tripTime:b.tripTime,note:b.note};await $b.updateTourAvailability(f.id,R),Ae.success("Cập nhật lịch trình thành công"),h(!1),p(null),M(),P()}catch(R){console.error("Error updating tour availability:",R),Ae.error("Không thể cập nhật lịch trình")}finally{y(!1)}},D=async R=>{try{await $b.deleteTourAvailability(R),Ae.success("Xóa lịch trình thành công"),P()}catch(z){console.error("Error deleting tour availability:",z),Ae.error("Không thể xóa lịch trình")}},F=R=>{var W;p(R),_({tourId:n||"",date:R.date.split("T")[0],maxParticipants:R.maxParticipants,isAvailable:R.isAvailable,departureDivisionCode:R.departureDivisionCode,vehicle:R.vehicle||"",adultPrice:R.adultPrice,childPrice:R.childPrice,surcharge:R.surcharge,tripTime:R.tripTime||"",note:R.note||""});const z=(W=R.tripTime)==null?void 0:W.match(/(\d+)\s*ngày\s*(\d+)\s*đêm/i);z?(T(parseInt(z[1])),N(parseInt(z[2]))):(T(1),N(0)),h(!0)},K=R=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(R),ee=R=>{const z=R.replace(/[^0-9]/g,"");return z?new Intl.NumberFormat("vi-VN").format(parseInt(z)):""},Y=R=>{const z=R.replace(/[^0-9]/g,"");return z?parseInt(z):0};S.useEffect(()=>{if(k>0||E>0){let R="";k>0&&(R+=`${k} ngày`),E>0&&(R+=` ${E} đêm`),_(z=>({...z,tripTime:R.trim()}))}},[k,E]);const U=R=>{if(!R.isAvailable)return l.jsx(ct,{variant:"destructive",children:"Không khả dụng"});const z=R.maxParticipants-R.bookedParticipants;return z<=0?l.jsx(ct,{variant:"destructive",children:"Hết chỗ"}):z<=5?l.jsx(ct,{variant:"secondary",children:"Sắp hết chỗ"}):l.jsx(ct,{variant:"default",children:"Còn chỗ"})};return o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Og,{className:"h-6 w-6 animate-spin"}),l.jsx("span",{children:"Đang tải dữ liệu..."})]})}):l.jsx(Ns,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(Ce,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"flex items-center space-x-2",children:[l.jsx(rh,{className:"h-4 w-4"}),l.jsx("span",{children:"Quay lại"})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Quản lý Lịch trình"}),l.jsxs("p",{className:"text-gray-600",children:["Tour: ",c]})]})]})}),l.jsx("div",{children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(tt,{children:[l.jsxs(dt,{children:[l.jsxs(pt,{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Danh sách Lịch trình"}),l.jsxs(Ce,{onClick:()=>{M(),h(!0),p(null)},className:"flex items-center space-x-2",children:[l.jsx(Il,{className:"h-4 w-4"}),l.jsx("span",{children:"Thêm lịch trình"})]})]}),l.jsx(Lg,{children:"Quản lý lịch trình và giá cho tour"})]}),l.jsx(nt,{children:t.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(er,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Chưa có lịch trình nào"}),l.jsx("p",{className:"text-sm",children:'Nhấn "Thêm lịch trình" để tạo lịch trình đầu tiên'})]}):l.jsx("div",{className:"space-y-4",children:t.map(R=>l.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(er,{className:"h-4 w-4 text-gray-500"}),l.jsx("span",{className:"font-medium",children:Wo(new Date(R.date),"dd/MM/yyyy",{locale:Yf})})]}),U(R)]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Xr,{className:"h-4 w-4"}),l.jsx("span",{children:R.departureDivisionName||"N/A"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(gCe,{className:"h-4 w-4"}),l.jsx("span",{children:R.vehicle||"N/A"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Bo,{className:"h-4 w-4"}),l.jsxs("span",{children:[R.bookedParticipants,"/",R.maxParticipants]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(wo,{className:"h-4 w-4"}),l.jsx("span",{children:K(R.adultPrice)})]})]}),R.tripTime&&l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(_m,{className:"h-4 w-4"}),l.jsx("span",{children:R.tripTime})]}),R.note&&l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(i_,{className:"h-4 w-4"}),l.jsx("span",{className:"truncate",children:R.note})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[l.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>F(R),children:l.jsx(dh,{className:"h-4 w-4"})}),l.jsxs(Hl,{children:[l.jsx(ux,{asChild:!0,children:l.jsx(Ce,{size:"sm",variant:"outline",children:l.jsx(Sm,{className:"h-4 w-4"})})}),l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xác nhận xóa"}),l.jsx(Wu,{children:"Bạn có chắc chắn muốn xóa lịch trình này? Hành động này không thể hoàn tác."})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:()=>D(R.id),className:"bg-red-600 hover:bg-red-700",children:"Xóa"})]})]})]})]})]})},R.id))})})]})}),l.jsx("div",{className:"lg:col-span-1",children:d&&l.jsxs(tt,{children:[l.jsxs(dt,{children:[l.jsx(pt,{children:f?"Chỉnh sửa Lịch trình":"Thêm Lịch trình"}),l.jsx(Lg,{children:f?"Cập nhật thông tin lịch trình":"Tạo lịch trình mới"})]}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"date",children:"Ngày khởi hành"}),l.jsxs(f_,{children:[l.jsx(m_,{asChild:!0,children:l.jsxs(Ce,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!b.date&&"text-muted-foreground"),children:[l.jsx(er,{className:"mr-2 h-4 w-4"}),b.date?Wo(new Date(b.date),"dd/MM/yyyy",{locale:Yf}):l.jsx("span",{children:"Chọn ngày khởi hành"})]})}),l.jsx(K0,{className:"w-auto p-0 z-[100]",align:"start",children:l.jsx(_A,{mode:"single",selected:b.date?new Date(b.date):void 0,onSelect:R=>{R&&_(z=>({...z,date:Wo(R,"yyyy-MM-dd")}))},disabled:R=>R<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0,locale:Yf})})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"maxParticipants",children:"Số người tối đa"}),l.jsx(We,{id:"maxParticipants",type:"number",min:"1",max:"1000",value:b.maxParticipants,onChange:R=>_(z=>({...z,maxParticipants:parseInt(R.target.value)||0}))})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"departureDivision",children:"Điểm khởi hành"}),l.jsx(fh,{value:b.departureDivisionCode.toString(),onValueChange:R=>_(z=>({...z,departureDivisionCode:parseInt(R)})),placeholder:"Chọn điểm khởi hành",searchPlaceholder:"Tìm kiếm tỉnh/thành...",options:i.map(R=>({value:R.code.toString(),label:R.name}))})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"vehicle",children:"Phương tiện"}),l.jsxs(f_,{children:[l.jsx(m_,{asChild:!0,children:l.jsxs(Ce,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[b.vehicle||"Chọn phương tiện...",l.jsx(zR,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),l.jsx(K0,{className:"w-full p-0 z-[100]",children:l.jsxs(dH,{children:[l.jsx(hH,{placeholder:"Tìm kiếm phương tiện..."}),l.jsxs(fH,{children:[l.jsx(mH,{children:"Không tìm thấy phương tiện."}),l.jsx(pH,{children:C.map(R=>l.jsx(vO,{value:R,onSelect:z=>{_(W=>({...W,vehicle:z}))},children:R},R))})]})]})})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"adultPrice",children:"Giá người lớn (VND)"}),l.jsx(We,{id:"adultPrice",placeholder:"Nhập giá...",value:ee(b.adultPrice.toString()),onChange:R=>_(z=>({...z,adultPrice:Y(R.target.value)}))})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"childPrice",children:"Giá trẻ em (VND)"}),l.jsx(We,{id:"childPrice",placeholder:"Nhập giá...",value:ee(b.childPrice.toString()),onChange:R=>_(z=>({...z,childPrice:Y(R.target.value)}))})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"surcharge",children:"Phụ thu (VND)"}),l.jsx(We,{id:"surcharge",placeholder:"Nhập phụ thu...",value:ee(b.surcharge.toString()),onChange:R=>_(z=>({...z,surcharge:Y(R.target.value)}))})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"tripDays",children:"Số ngày"}),l.jsx(We,{id:"tripDays",type:"number",min:"0",value:k,onChange:R=>T(parseInt(R.target.value)||0)})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"tripNights",children:"Số đêm"}),l.jsx(We,{id:"tripNights",type:"number",min:"0",value:E,onChange:R=>N(parseInt(R.target.value)||0)})]})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"note",children:"Ghi chú"}),l.jsx(is,{id:"note",placeholder:"Ghi chú đặc biệt cho ngày này...",value:b.note,onChange:R=>_(z=>({...z,note:R.target.value})),rows:3})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{id:"isAvailable",checked:b.isAvailable,onCheckedChange:R=>_(z=>({...z,isAvailable:R}))}),l.jsx(Se,{htmlFor:"isAvailable",children:"Khả dụng"})]}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[l.jsxs(Ce,{onClick:f?q:O,disabled:x,className:"flex-1",children:[x&&l.jsx(Og,{className:"mr-2 h-4 w-4 animate-spin"}),f?"Cập nhật":"Tạo"]}),l.jsx(Ce,{variant:"outline",onClick:()=>{h(!1),p(null),M()},children:l.jsx(si,{className:"h-4 w-4"})})]})]})]})})]})})]})})}const Vgt=()=>{const[n,e]=S.useState([]),[t,r]=S.useState(!0),[i,s]=S.useState(!1),[o,a]=S.useState(!1),[c,u]=S.useState(null),[d,h]=S.useState({name:"",code:"",description:"",icon:"",sortOrder:0}),f=async()=>{try{r(!0);const k=await ot(`${Ge()}/api/tourcategories`);e(k)}catch(k){console.error("Failed to load categories:",k),Ae.error("Không thể tải danh mục tour")}finally{r(!1)}};S.useEffect(()=>{f()},[]);const p=async()=>{try{const k=await ot(`${Ge()}/api/tourcategories`,{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}});e(T=>[...T,k]),s(!1),h({name:"",code:"",description:"",icon:"",sortOrder:0}),Ae.success("Tạo danh mục thành công")}catch(k){console.error("Failed to create category:",k),Ae.error("Không thể tạo danh mục")}},x=async()=>{if(c)try{const k={name:d.name,code:d.code,description:d.description,icon:d.icon,sortOrder:d.sortOrder},T=await ot(`${Ge()}/api/tourcategories/${c.id}`,{method:"PUT",body:JSON.stringify(k),headers:{"Content-Type":"application/json"}});e(E=>E.map(N=>N.id===c.id?T:N)),a(!1),u(null),h({name:"",code:"",description:"",icon:"",sortOrder:0}),Ae.success("Cập nhật danh mục thành công")}catch(k){console.error("Failed to update category:",k),Ae.error("Không thể cập nhật danh mục")}},y=async k=>{try{await ot(`${Ge()}/api/tourcategories/${k}`,{method:"DELETE"}),e(T=>T.filter(E=>E.id!==k)),Ae.success("Xóa danh mục thành công")}catch(T){console.error("Failed to delete category:",T),Ae.error("Không thể xóa danh mục")}},b=async k=>{try{const T=await ot(`${Ge()}/api/tourcategories/${k.id}`,{method:"PUT",body:JSON.stringify({isActive:!k.isActive}),headers:{"Content-Type":"application/json"}});e(E=>E.map(N=>N.id===k.id?T:N)),Ae.success(`Đã ${k.isActive?"vô hiệu hóa":"kích hoạt"} danh mục`)}catch(T){console.error("Failed to toggle category status:",T),Ae.error("Không thể thay đổi trạng thái danh mục")}},_=k=>{u(k),h({name:k.name,code:k.code,description:k.description||"",icon:k.icon||"",sortOrder:k.sortOrder}),a(!0)},C=()=>{h({name:"",code:"",description:"",icon:"",sortOrder:0}),u(null)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Quản lý Danh mục Tour"}),l.jsx("p",{className:"text-gray-600",children:"Quản lý các danh mục tour trong hệ thống"})]}),l.jsxs(Qr,{open:i,onOpenChange:s,children:[l.jsx(gS,{asChild:!0,children:l.jsxs(Ce,{onClick:C,children:[l.jsx(Il,{className:"h-4 w-4 mr-2"}),"Thêm danh mục"]})}),l.jsxs(Br,{className:"sm:max-w-[425px]",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Tạo danh mục mới"}),l.jsx(Ma,{children:"Điền thông tin để tạo danh mục tour mới"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"name",children:"Tên danh mục *"}),l.jsx(We,{id:"name",value:d.name,onChange:k=>h(T=>({...T,name:k.target.value})),placeholder:"Ví dụ: Phiêu lưu"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"code",children:"Mã danh mục *"}),l.jsx(We,{id:"code",value:d.code,onChange:k=>h(T=>({...T,code:k.target.value.toLowerCase()})),placeholder:"Ví dụ: adventure"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"description",children:"Mô tả"}),l.jsx(is,{id:"description",value:d.description,onChange:k=>h(T=>({...T,description:k.target.value})),placeholder:"Mô tả về danh mục tour",rows:3})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"icon",children:"Icon"}),l.jsx(We,{id:"icon",value:d.icon,onChange:k=>h(T=>({...T,icon:k.target.value})),placeholder:"Ví dụ: compass"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"sortOrder",children:"Thứ tự sắp xếp"}),l.jsx(We,{id:"sortOrder",type:"number",value:d.sortOrder,onChange:k=>h(T=>({...T,sortOrder:parseInt(k.target.value)||0})),placeholder:"0"})]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>s(!1),children:"Hủy"}),l.jsx(Ce,{onClick:p,children:"Tạo danh mục"})]})]})]})]})]}),l.jsxs(tt,{children:[l.jsxs(dt,{children:[l.jsx(pt,{children:"Danh sách danh mục"}),l.jsxs(Lg,{children:["Tổng cộng ",n.length," danh mục"]})]}),l.jsx(nt,{children:t?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),l.jsx("span",{className:"ml-2",children:"Đang tải..."})]}):l.jsxs(Ku,{children:[l.jsx(Yu,{children:l.jsxs(ur,{children:[l.jsx(Ot,{children:"Tên"}),l.jsx(Ot,{children:"Mã"}),l.jsx(Ot,{children:"Mô tả"}),l.jsx(Ot,{children:"Thứ tự"}),l.jsx(Ot,{children:"Trạng thái"}),l.jsx(Ot,{children:"Ngày tạo"}),l.jsx(Ot,{className:"text-right",children:"Thao tác"})]})}),l.jsx(Xu,{children:n.map(k=>l.jsxs(ur,{children:[l.jsx(wt,{className:"font-medium",children:k.name}),l.jsx(wt,{children:l.jsx(ct,{variant:"secondary",children:k.code})}),l.jsx(wt,{className:"max-w-xs truncate",children:k.description||"-"}),l.jsx(wt,{children:k.sortOrder}),l.jsx(wt,{children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ml,{checked:k.isActive,onCheckedChange:()=>b(k)}),l.jsx("span",{className:"text-sm",children:k.isActive?"Hoạt động":"Tạm dừng"})]})}),l.jsx(wt,{children:new Date(k.createdAt).toLocaleDateString("vi-VN")}),l.jsx(wt,{className:"text-right",children:l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>_(k),children:l.jsx(dh,{className:"h-4 w-4"})}),l.jsxs(Hl,{children:[l.jsx(ux,{asChild:!0,children:l.jsx(Ce,{size:"sm",variant:"outline",children:l.jsx(Sm,{className:"h-4 w-4"})})}),l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xác nhận xóa"}),l.jsxs(Wu,{children:['Bạn có chắc chắn muốn xóa danh mục "',k.name,'"? Hành động này không thể hoàn tác.']})]}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:()=>y(k.id),className:"bg-red-600 hover:bg-red-700",children:"Xóa"})]})]})]})]})})]},k.id))})]})})]}),l.jsx(Qr,{open:o,onOpenChange:a,children:l.jsxs(Br,{className:"sm:max-w-[425px]",children:[l.jsxs($r,{children:[l.jsx(Vr,{children:"Chỉnh sửa danh mục"}),l.jsx(Ma,{children:"Cập nhật thông tin danh mục tour"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-name",children:"Tên danh mục *"}),l.jsx(We,{id:"edit-name",value:d.name,onChange:k=>h(T=>({...T,name:k.target.value})),placeholder:"Ví dụ: Phiêu lưu"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-code",children:"Mã danh mục *"}),l.jsx(We,{id:"edit-code",value:d.code,onChange:k=>h(T=>({...T,code:k.target.value.toLowerCase()})),placeholder:"Ví dụ: adventure"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-description",children:"Mô tả"}),l.jsx(is,{id:"edit-description",value:d.description,onChange:k=>h(T=>({...T,description:k.target.value})),placeholder:"Mô tả về danh mục tour",rows:3})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-icon",children:"Icon"}),l.jsx(We,{id:"edit-icon",value:d.icon,onChange:k=>h(T=>({...T,icon:k.target.value})),placeholder:"Ví dụ: compass"})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"edit-sortOrder",children:"Thứ tự sắp xếp"}),l.jsx(We,{id:"edit-sortOrder",type:"number",value:d.sortOrder,onChange:k=>h(T=>({...T,sortOrder:parseInt(k.target.value)||0})),placeholder:"0"})]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(Ce,{variant:"outline",onClick:()=>a(!1),children:"Hủy"}),l.jsx(Ce,{onClick:x,children:"Cập nhật"})]})]})]})})]})},Ugt=()=>l.jsx(Ns,{children:l.jsx(Vgt,{})}),zgt=()=>{const{id:n}=tA(),e=li(),{user:t}=Zr(),[r]=Mae(),[i,s]=S.useState(null),[o,a]=S.useState([]),[c,u]=S.useState(null),[d,h]=S.useState(!0),[f,p]=S.useState(!1),[x,y]=S.useState([]),[b,_]=S.useState(!1),[C,k]=S.useState(!1),[T,E]=S.useState(""),[N,P]=S.useState(0),[M,O]=S.useState(!1),[q,D]=S.useState(null),[F,K]=S.useState(null),[ee,Y]=S.useState(null),[U,R]=S.useState({adultCount:1,childCount:0,contactName:t!=null&&t.firstName&&(t!=null&&t.lastName)?`${t.firstName} ${t.lastName}`:"",contactEmail:(t==null?void 0:t.email)||"",contactPhone:(t==null?void 0:t.phoneNumber)||"",specialRequests:""});S.useEffect(()=>{if(!t){Ae.error("Vui lòng đăng nhập để đặt tour");const pe=window.location.pathname+window.location.search;e(`/login?returnUrl=${encodeURIComponent(pe)}`);return}(async()=>{if(n)try{h(!0);const pe=r.get("availability"),oe=r.get("booking"),[ve,be,fe,we]=await Promise.all([wc.getTour(n),$b.getTourAvailabilities({tourId:n}),ot(`${Ge()}/api/tourcategories`,{skipAuth:!0}),ot(`${Ge()}/api/payment/admin-banking`,{skipAuth:!0})]);let ue=null;if(oe)try{ue=await ot(`${Ge()}/api/bookings/${oe}`)}catch(Z){console.error("Error fetching booking data:",Z)}if(s(ve),a(be.data),y(fe),D(we),ue){Y(ue);const Z=JSON.parse(ue.contactInfo);R({adultCount:ue.adultCount,childCount:ue.childCount,contactName:Z.Name||Z.name||"",contactEmail:Z.Email||Z.email||"",contactPhone:Z.Phone||Z.phone||"",specialRequests:ue.specialRequests||""})}if(pe){const Z=be.data.find(ge=>ge.id===pe);Z&&u(Z)}else be.data.length>0&&u(be.data[0])}catch(pe){console.error("Error loading tour data:",pe),Ae.error("Không thể tải thông tin tour"),e("/tours")}finally{h(!1)}})()},[n,e,r,t]);const z=async ce=>{if(ce.preventDefault(),!t){Ae.error("Vui lòng đăng nhập để đặt tour");const oe=window.location.pathname+window.location.search;e(`/login?returnUrl=${encodeURIComponent(oe)}`);return}if(!c){Ae.error("Vui lòng chọn ngày khởi hành");return}if(U.adultCount+U.childCount===0){Ae.error("Vui lòng chọn số lượng khách");return}if(!U.contactName||!U.contactEmail||!U.contactPhone){Ae.error("Vui lòng điền đầy đủ thông tin liên hệ");return}const pe=c.adultPrice*U.adultCount+c.childPrice*U.childCount;P(pe),_(!0)},W=async()=>{if(!(!c||!i))try{O(!0),_(!1);let ce;if(ee){const pe={tourId:i.id,tourAvailabilityId:c.id,adultCount:U.adultCount,childCount:U.childCount,contactName:U.contactName,contactEmail:U.contactEmail,contactPhone:U.contactPhone,specialRequests:U.specialRequests,totalAmount:N};ce=await ot(`${Ge()}/api/bookings/${ee.id}`,{method:"PUT",body:JSON.stringify(pe)})}else{const pe={tourId:i.id,tourAvailabilityId:c.id,adultCount:U.adultCount,childCount:U.childCount,contactName:U.contactName,contactEmail:U.contactEmail,contactPhone:U.contactPhone,specialRequests:U.specialRequests,totalAmount:N};ce=await ot(`${Ge()}/api/bookings`,{method:"POST",body:JSON.stringify(pe)})}E(ce.bookingNumber),k(!0),Ae.success("Đặt tour thành công! Vui lòng thanh toán để hoàn tất.")}catch(ce){console.error("Error creating booking:",ce),Ae.error("Có lỗi xảy ra khi đặt tour. Vui lòng thử lại.")}finally{O(!1)}},se=ce=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(ce),ne=ce=>new Date(ce).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}),te=ce=>{const pe=x.find(oe=>oe.code===ce);return pe?pe.name:ce},H=async(ce,pe)=>{try{await navigator.clipboard.writeText(ce),K(pe),Ae.success("Đã sao chép vào clipboard"),setTimeout(()=>K(null),2e3)}catch(oe){console.error("Failed to copy:",oe),Ae.error("Không thể sao chép")}};return t?d?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Đang tải thông tin tour..."})]})}):i?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Ks,{}),l.jsx("div",{className:"bg-white border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("nav",{className:"flex items-center space-x-2 py-4",children:[l.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700 transition-colors",children:[l.jsx(Uae,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Trang chủ"})]}),l.jsx(kg,{className:"h-4 w-4 text-gray-400"}),l.jsx("button",{onClick:()=>e("/tours"),className:"text-gray-500 hover:text-gray-700 transition-colors text-sm",children:"Tours"}),l.jsx(kg,{className:"h-4 w-4 text-gray-400"}),l.jsx("button",{onClick:()=>e(`/tour/${n}`),className:"text-gray-500 hover:text-gray-700 transition-colors text-sm",children:(i==null?void 0:i.title)||"Tour"}),l.jsx(kg,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{className:"text-gray-900 font-medium text-sm",children:"Đặt tour"})]})})}),l.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center space-x-2",children:[l.jsx(Xr,{className:"h-5 w-5"}),l.jsx("span",{children:"Thông tin tour"})]})}),l.jsxs(nt,{className:"space-y-4",children:[l.jsxs("div",{className:"flex space-x-4",children:[i.imageUrls&&i.imageUrls.length>0&&l.jsx("img",{src:i.imageUrls[0],alt:i.title,className:"w-24 h-24 object-cover rounded-lg"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i.title}),l.jsx("p",{className:"text-gray-600 mt-1",children:i.location}),l.jsx(ct,{variant:"secondary",className:"mt-2",children:te(i.category)})]})]}),l.jsx("div",{className:"text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:i.shortDescription}})]})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsxs(pt,{className:"flex items-center space-x-2",children:[l.jsx(Fo,{className:"h-5 w-5"}),l.jsx("span",{children:"Hướng dẫn viên"})]})}),l.jsx(nt,{children:l.jsxs("div",{className:"flex items-center space-x-4",children:[i.tourGuideAvatar&&l.jsx("img",{src:i.tourGuideAvatar,alt:i.tourGuideName,className:"w-16 h-16 rounded-full object-cover"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:i.tourGuideName}),i.tourGuideRating&&l.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.jsx(ki,{className:"h-4 w-4 text-yellow-500 fill-current"}),l.jsxs("span",{className:"text-sm text-gray-600",children:[i.tourGuideRating," (",i.tourGuideTotalReviews," đánh giá)"]})]})]})]})})]}),l.jsxs(tt,{children:[l.jsx(dt,{children:l.jsx(pt,{children:"Thông tin đặt tour"})}),l.jsx(nt,{children:l.jsxs("form",{onSubmit:z,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx(Se,{children:"Ngày khởi hành *"}),o.length>6&&l.jsxs(Qr,{open:f,onOpenChange:p,children:[l.jsx(gS,{asChild:!0,children:l.jsxs(Ce,{variant:"outline",size:"sm",children:["Xem tất cả (",o.length,")"]})}),l.jsxs(Br,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Tất cả ngày khởi hành"})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:o.map(ce=>l.jsx(tt,{className:`cursor-pointer transition-all ${(c==null?void 0:c.id)===ce.id?"ring-2 ring-blue-500 bg-blue-50":"hover:shadow-md"}`,onClick:()=>{u(ce),p(!1)},children:l.jsx(nt,{className:"p-4",children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(er,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-medium text-sm",children:ne(ce.date)})]}),l.jsx("div",{className:"text-lg font-semibold text-blue-600",children:se(ce.adultPrice)}),l.jsxs("div",{className:"text-xs text-gray-600",children:[l.jsxs("div",{children:["Điểm khởi hành: ",ce.departureDivisionName]}),ce.tripTime&&l.jsxs("div",{children:["Thời gian: ",ce.tripTime]}),ce.vehicle&&l.jsxs("div",{children:["Phương tiện: ",ce.vehicle]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("span",{children:[ce.bookedParticipants,"/",ce.maxParticipants," người"]}),l.jsx(ct,{variant:ce.bookedParticipants>=ce.maxParticipants?"destructive":"secondary",children:ce.bookedParticipants>=ce.maxParticipants?"Hết chỗ":"Còn chỗ"})]})]})})},ce.id))})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.slice(0,6).map(ce=>l.jsx(tt,{className:`cursor-pointer transition-all ${(c==null?void 0:c.id)===ce.id?"ring-2 ring-blue-500 bg-blue-50":"hover:shadow-md"}`,onClick:()=>u(ce),children:l.jsx(nt,{className:"p-4",children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(er,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-medium text-sm",children:ne(ce.date)})]}),l.jsx("div",{className:"text-lg font-semibold text-blue-600",children:se(ce.adultPrice)}),l.jsxs("div",{className:"text-xs text-gray-600",children:[l.jsxs("div",{children:["Điểm khởi hành: ",ce.departureDivisionName]}),ce.tripTime&&l.jsxs("div",{children:["Thời gian: ",ce.tripTime]}),ce.vehicle&&l.jsxs("div",{children:["Phương tiện: ",ce.vehicle]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("span",{children:[ce.bookedParticipants,"/",ce.maxParticipants," người"]}),l.jsx(ct,{variant:ce.bookedParticipants>=ce.maxParticipants?"destructive":"secondary",children:ce.bookedParticipants>=ce.maxParticipants?"Hết chỗ":"Còn chỗ"})]})]})})},ce.id))}),o.length===0&&l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(er,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Không có ngày khởi hành nào"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"adultCount",children:"Số người lớn *"}),l.jsx(We,{id:"adultCount",type:"number",min:"1",value:U.adultCount,onChange:ce=>R(pe=>({...pe,adultCount:parseInt(ce.target.value)||1}))})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"childCount",children:"Số trẻ em"}),l.jsx(We,{id:"childCount",type:"number",min:"0",value:U.childCount,onChange:ce=>R(pe=>({...pe,childCount:parseInt(ce.target.value)||0}))})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Thông tin liên hệ"}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"contactName",children:"Họ và tên *"}),l.jsx(We,{id:"contactName",value:U.contactName,onChange:ce=>R(pe=>({...pe,contactName:ce.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"contactEmail",children:"Email *"}),l.jsx(We,{id:"contactEmail",type:"email",value:U.contactEmail,onChange:ce=>R(pe=>({...pe,contactEmail:ce.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"contactPhone",children:"Số điện thoại *"}),l.jsx(We,{id:"contactPhone",value:U.contactPhone,onChange:ce=>R(pe=>({...pe,contactPhone:ce.target.value})),required:!0})]}),l.jsxs("div",{children:[l.jsx(Se,{htmlFor:"specialRequests",children:"Yêu cầu đặc biệt"}),l.jsx(We,{id:"specialRequests",value:U.specialRequests,onChange:ce=>R(pe=>({...pe,specialRequests:ce.target.value})),placeholder:"Nhập yêu cầu đặc biệt (nếu có)"})]})]}),l.jsx(Ce,{type:"submit",className:"w-full",children:"Tiếp tục thanh toán"})]})})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs(tt,{className:"sticky top-6",children:[l.jsx(dt,{children:l.jsx(pt,{children:"Tóm tắt đặt tour"})}),l.jsx(nt,{className:"space-y-4",children:c&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ngày khởi hành:"}),l.jsx("span",{className:"text-sm font-medium",children:ne(c.date)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Điểm khởi hành:"}),l.jsx("span",{className:"text-sm font-medium",children:c.departureDivisionName})]}),c.tripTime&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Thời gian:"}),l.jsx("span",{className:"text-sm font-medium",children:c.tripTime})]}),c.vehicle&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Phương tiện:"}),l.jsx("span",{className:"text-sm font-medium",children:c.vehicle})]})]}),l.jsx(Xf,{}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["Người lớn (",U.adultCount,"):"]}),l.jsx("span",{className:"text-sm font-medium",children:se(c.adultPrice*U.adultCount)})]}),U.childCount>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["Trẻ em (",U.childCount,"):"]}),l.jsx("span",{className:"text-sm font-medium",children:se(c.childPrice*U.childCount)})]})]}),l.jsx(Xf,{}),l.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[l.jsx("span",{children:"Tổng cộng:"}),l.jsx("span",{className:"text-blue-600",children:se(c.adultPrice*U.adultCount+c.childPrice*U.childCount)})]})]})})]})})]})}),l.jsx(Hl,{open:b,onOpenChange:_,children:l.jsxs(La,{children:[l.jsxs(Fa,{children:[l.jsx($a,{children:"Xác nhận đặt tour"}),l.jsx(Wu,{children:"Bạn có chắc chắn muốn đặt tour này không? Sau khi xác nhận, bạn sẽ được chuyển đến trang thanh toán."})]}),l.jsx("div",{className:"py-4",children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Tour:"}),l.jsx("span",{className:"text-sm font-medium",children:i==null?void 0:i.title})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ngày khởi hành:"}),l.jsx("span",{className:"text-sm font-medium",children:c?ne(c.date):""})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Số khách:"}),l.jsxs("span",{className:"text-sm font-medium",children:[U.adultCount," người lớn, ",U.childCount," trẻ em"]})]}),l.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[l.jsx("span",{children:"Tổng cộng:"}),l.jsx("span",{className:"text-blue-600",children:se(N)})]})]})}),l.jsxs(Ba,{children:[l.jsx(Wl,{children:"Hủy"}),l.jsx(qu,{onClick:W,disabled:M,children:M?"Đang xử lý...":"Xác nhận đặt tour"})]})]})}),l.jsx(Qr,{open:C,onOpenChange:k,children:l.jsxs(Br,{className:"max-w-4xl h-[80vh] overflow-hidden flex flex-col",children:[l.jsx($r,{children:l.jsx(Vr,{children:"Thanh toán"})}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[l.jsxs("div",{className:"text-center bg-blue-50 p-4 rounded-lg w-full",children:[l.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Mã đặt tour: ",l.jsx("span",{className:"font-mono font-semibold",children:T})]}),l.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["Số tiền: ",se(N)]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("img",{src:`${Ge()}/api/payment/qr-code?amount=${N}&des=${encodeURIComponent(T)}`,alt:"QR Code thanh toán",className:"w-64 h-64 border rounded-lg shadow-lg",onError:ce=>{ce.currentTarget.src="/placeholder.svg",ce.currentTarget.alt="Không thể tải QR code"}})}),l.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Quét mã QR để thanh toán nhanh chóng"})]}),l.jsxs("div",{className:"space-y-6",children:[q&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Thông tin chuyển khoản thủ công"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Số tài khoản:"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-mono font-semibold",children:q.account}),l.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>H(q.account,"account"),className:"h-8 w-8 p-0",children:F==="account"?l.jsx(Fr,{className:"h-4 w-4 text-green-600"}):l.jsx(ij,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Tên ngân hàng:"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold",children:q.bankName}),l.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>H(q.bankName,"bank"),className:"h-8 w-8 p-0",children:F==="bank"?l.jsx(Fr,{className:"h-4 w-4 text-green-600"}):l.jsx(ij,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Số tiền:"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold text-blue-600",children:se(N)}),l.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>H(N.toString(),"amount"),className:"h-8 w-8 p-0",children:F==="amount"?l.jsx(Fr,{className:"h-4 w-4 text-green-600"}):l.jsx(ij,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Nội dung:"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-mono text-sm",children:T}),l.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>H(T,"content"),className:"h-8 w-8 p-0",children:F==="content"?l.jsx(Fr,{className:"h-4 w-4 text-green-600"}):l.jsx(ij,{className:"h-4 w-4"})})]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Chính sách thanh toán"}),l.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[l.jsx("p",{children:"• Thanh toán 100% giá trị tour trước khi khởi hành"}),l.jsx("p",{children:"• Sau khi chuyển khoản, vui lòng giữ lại biên lai giao dịch"}),l.jsx("p",{children:'• Sau khi thanh toán, vui lòng nhấn "Hoàn tất" để hệ thống kiểm tra giao dịch'}),l.jsx("p",{children:"• Hệ thống sẽ tự động xác nhận thanh toán trong vòng 24 giờ"}),l.jsx("p",{children:"• Nếu có vấn đề về thanh toán, vui lòng liên hệ hotline: 1900-xxxx"}),l.jsx("p",{children:"• Tour có thể bị hủy nếu không thanh toán đúng hạn"})]})]})]})]})}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[l.jsx(Ce,{variant:"outline",className:"flex-1",onClick:()=>k(!1),children:"Đóng"}),l.jsx(Ce,{className:"flex-1",onClick:()=>{k(!1),e("/")},children:"Hoàn tất"})]})]})})]}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Không tìm thấy tour"}),l.jsx(Ce,{onClick:()=>e("/tours"),children:"Quay lại danh sách tour"})]})}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Cần đăng nhập"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Vui lòng đăng nhập để đặt tour"}),l.jsx(Ce,{onClick:()=>{const ce=window.location.pathname+window.location.search;e(`/login?returnUrl=${encodeURIComponent(ce)}`)},children:"Đăng nhập"})]})})},Hgt=new LIe,Wgt=()=>l.jsx(BIe,{client:Hgt,children:l.jsxs(uIe,{children:[l.jsx(xje,{}),l.jsx(Eje,{}),l.jsx(sCe,{children:l.jsxs(Jke,{children:[l.jsx(Nn,{path:"/",element:l.jsx($Ie,{})}),l.jsx(Nn,{path:"/register",element:l.jsx(VAe,{})}),l.jsx(Nn,{path:"/login",element:l.jsx(ICe,{})}),l.jsx(Nn,{path:"/forgot",element:l.jsx(UAe,{})}),l.jsx(Nn,{path:"/home",element:l.jsx(hue,{})}),l.jsx(Nn,{path:"/tours",element:l.jsx(d4e,{})}),l.jsx(Nn,{path:"/tour-guides",element:l.jsx(UIe,{})}),l.jsx(Nn,{path:"/tour/:id",element:l.jsx(c6e,{})}),l.jsx(Nn,{path:"/tour/:id/book",element:l.jsx(zgt,{})}),l.jsx(Nn,{path:"/about",element:l.jsx(u6e,{})}),l.jsx(Nn,{path:"/profile",element:l.jsx(kGe,{})}),l.jsx(Nn,{path:"/tour-guide-registration",element:l.jsx(Rk,{children:l.jsx(TGe,{})})}),l.jsx(Nn,{path:"/guide/:guideId",element:l.jsx(AGe,{})}),l.jsx(Nn,{path:"/checkout",element:l.jsx(NGe,{})}),l.jsx(Nn,{path:"/admin",element:l.jsx(ao,{children:l.jsx(Pgt,{})})}),l.jsx(Nn,{path:"/admin/tours",element:l.jsx(ao,{children:l.jsx(HGe,{})})}),l.jsx(Nn,{path:"/admin/divisions",element:l.jsx(ao,{children:l.jsx(WGe,{})})}),l.jsx(Nn,{path:"/admin/tour-categories",element:l.jsx(ao,{children:l.jsx(qGe,{})})}),l.jsx(Nn,{path:"/admin/tour-guide-applications",element:l.jsx(ao,{children:l.jsx(rJe,{})})}),l.jsx(Nn,{path:"/admin/users",element:l.jsx(ao,{children:l.jsx(iJe,{})})}),l.jsx(Nn,{path:"/admin/guides",element:l.jsx(ao,{children:l.jsx(sJe,{})})}),l.jsx(Nn,{path:"/admin/reviews",element:l.jsx(ao,{children:l.jsx(KQe,{})})}),l.jsx(Nn,{path:"/admin/transactions",element:l.jsx(ao,{children:l.jsx(Igt,{})})}),l.jsx(Nn,{path:"/admin/bookings",element:l.jsx(ao,{children:l.jsx(Ogt,{})})}),l.jsx(Nn,{path:"/admin/revenue",element:l.jsx(ao,{children:l.jsx(Rgt,{})})}),l.jsx(Nn,{path:"/admin/refunds",element:l.jsx(ao,{children:l.jsx(Mgt,{})})}),l.jsx(Nn,{path:"/admin/pricing-config",element:l.jsx(ao,{children:l.jsx(Dgt,{})})}),l.jsx(Nn,{path:"/admin/cost-management",element:l.jsx(ao,{children:l.jsx(Lgt,{})})}),l.jsx(Nn,{path:"/admin/products",element:l.jsx(Rk,{children:l.jsx(Bgt,{})})}),l.jsx(Nn,{path:"/admin/product/create",element:l.jsx(Rk,{children:l.jsx(sae,{})})}),l.jsx(Nn,{path:"/admin/product/:id/edit",element:l.jsx(Rk,{children:l.jsx(sae,{})})}),l.jsx(Nn,{path:"/cost-management",element:l.jsx(Rk,{children:l.jsx(Fgt,{})})}),l.jsx(Nn,{path:"/admin/tours/:tourId/availability",element:l.jsx(ao,{children:l.jsx($gt,{})})}),l.jsx(Nn,{path:"/admin/tour-categories",element:l.jsx(ao,{children:l.jsx(Ugt,{})})}),l.jsx(Nn,{path:"*",element:l.jsx(VIe,{})})]})})]})});wje.createRoot(document.getElementById("root")).render(l.jsx(Wgt,{}));
